var KTe=Object.defineProperty;var WTe=(e,t,i)=>t in e?KTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var _b=(e,t,i)=>(WTe(e,typeof t!="symbol"?t+"":t,i),i);function GTe(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(s,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nae={exports:{}},PL={},iae={exports:{}},yi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT=Symbol.for("react.element"),$Te=Symbol.for("react.portal"),zTe=Symbol.for("react.fragment"),qTe=Symbol.for("react.strict_mode"),YTe=Symbol.for("react.profiler"),XTe=Symbol.for("react.provider"),JTe=Symbol.for("react.context"),ZTe=Symbol.for("react.forward_ref"),eRe=Symbol.for("react.suspense"),tRe=Symbol.for("react.memo"),rRe=Symbol.for("react.lazy"),kZ=Symbol.iterator;function nRe(e){return e===null||typeof e!="object"?null:(e=kZ&&e[kZ]||e["@@iterator"],typeof e=="function"?e:null)}var oae={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sae=Object.assign,aae={};function Tw(e,t,i){this.props=e,this.context=t,this.refs=aae,this.updater=i||oae}Tw.prototype.isReactComponent={};Tw.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tw.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cae(){}cae.prototype=Tw.prototype;function U8(e,t,i){this.props=e,this.context=t,this.refs=aae,this.updater=i||oae}var M8=U8.prototype=new cae;M8.constructor=U8;sae(M8,Tw.prototype);M8.isPureReactComponent=!0;var DZ=Array.isArray,lae=Object.prototype.hasOwnProperty,F8={current:null},uae={key:!0,ref:!0,__self:!0,__source:!0};function Aae(e,t,i){var s,c={},u=null,f=null;if(t!=null)for(s in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(u=""+t.key),t)lae.call(t,s)&&!uae.hasOwnProperty(s)&&(c[s]=t[s]);var p=arguments.length-2;if(p===1)c.children=i;else if(1<p){for(var m=Array(p),E=0;E<p;E++)m[E]=arguments[E+2];c.children=m}if(e&&e.defaultProps)for(s in p=e.defaultProps,p)c[s]===void 0&&(c[s]=p[s]);return{$$typeof:OT,type:e,key:u,ref:f,props:c,_owner:F8.current}}function iRe(e,t){return{$$typeof:OT,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function V8(e){return typeof e=="object"&&e!==null&&e.$$typeof===OT}function oRe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var xZ=/\/+/g;function mM(e,t){return typeof e=="object"&&e!==null&&e.key!=null?oRe(""+e.key):t.toString(36)}function wN(e,t,i,s,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(u){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case OT:case $Te:f=!0}}if(f)return f=e,c=c(f),e=s===""?"."+mM(f,0):s,DZ(c)?(i="",e!=null&&(i=e.replace(xZ,"$&/")+"/"),wN(c,t,i,"",function(E){return E})):c!=null&&(V8(c)&&(c=iRe(c,i+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(xZ,"$&/")+"/")+e)),t.push(c)),1;if(f=0,s=s===""?".":s+":",DZ(e))for(var p=0;p<e.length;p++){u=e[p];var m=s+mM(u,p);f+=wN(u,t,i,m,c)}else if(m=nRe(e),typeof m=="function")for(e=m.call(e),p=0;!(u=e.next()).done;)u=u.value,m=s+mM(u,p++),f+=wN(u,t,i,m,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function nO(e,t,i){if(e==null)return e;var s=[],c=0;return wN(e,s,"","",function(u){return t.call(i,u,c++)}),s}function sRe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var au={current:null},SN={transition:null},aRe={ReactCurrentDispatcher:au,ReactCurrentBatchConfig:SN,ReactCurrentOwner:F8};function dae(){throw Error("act(...) is not supported in production builds of React.")}yi.Children={map:nO,forEach:function(e,t,i){nO(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return nO(e,function(){t++}),t},toArray:function(e){return nO(e,function(t){return t})||[]},only:function(e){if(!V8(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yi.Component=Tw;yi.Fragment=zTe;yi.Profiler=YTe;yi.PureComponent=U8;yi.StrictMode=qTe;yi.Suspense=eRe;yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aRe;yi.act=dae;yi.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=sae({},e.props),c=e.key,u=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,f=F8.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(m in t)lae.call(t,m)&&!uae.hasOwnProperty(m)&&(s[m]=t[m]===void 0&&p!==void 0?p[m]:t[m])}var m=arguments.length-2;if(m===1)s.children=i;else if(1<m){p=Array(m);for(var E=0;E<m;E++)p[E]=arguments[E+2];s.children=p}return{$$typeof:OT,type:e.type,key:c,ref:u,props:s,_owner:f}};yi.createContext=function(e){return e={$$typeof:JTe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XTe,_context:e},e.Consumer=e};yi.createElement=Aae;yi.createFactory=function(e){var t=Aae.bind(null,e);return t.type=e,t};yi.createRef=function(){return{current:null}};yi.forwardRef=function(e){return{$$typeof:ZTe,render:e}};yi.isValidElement=V8;yi.lazy=function(e){return{$$typeof:rRe,_payload:{_status:-1,_result:e},_init:sRe}};yi.memo=function(e,t){return{$$typeof:tRe,type:e,compare:t===void 0?null:t}};yi.startTransition=function(e){var t=SN.transition;SN.transition={};try{e()}finally{SN.transition=t}};yi.unstable_act=dae;yi.useCallback=function(e,t){return au.current.useCallback(e,t)};yi.useContext=function(e){return au.current.useContext(e)};yi.useDebugValue=function(){};yi.useDeferredValue=function(e){return au.current.useDeferredValue(e)};yi.useEffect=function(e,t){return au.current.useEffect(e,t)};yi.useId=function(){return au.current.useId()};yi.useImperativeHandle=function(e,t,i){return au.current.useImperativeHandle(e,t,i)};yi.useInsertionEffect=function(e,t){return au.current.useInsertionEffect(e,t)};yi.useLayoutEffect=function(e,t){return au.current.useLayoutEffect(e,t)};yi.useMemo=function(e,t){return au.current.useMemo(e,t)};yi.useReducer=function(e,t,i){return au.current.useReducer(e,t,i)};yi.useRef=function(e){return au.current.useRef(e)};yi.useState=function(e){return au.current.useState(e)};yi.useSyncExternalStore=function(e,t,i){return au.current.useSyncExternalStore(e,t,i)};yi.useTransition=function(){return au.current.useTransition()};yi.version="18.3.1";iae.exports=yi;var he=iae.exports;const vo=$i(he),AB=GTe({__proto__:null,default:vo},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cRe=he,lRe=Symbol.for("react.element"),uRe=Symbol.for("react.fragment"),ARe=Object.prototype.hasOwnProperty,dRe=cRe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fRe={key:!0,ref:!0,__self:!0,__source:!0};function fae(e,t,i){var s,c={},u=null,f=null;i!==void 0&&(u=""+i),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(f=t.ref);for(s in t)ARe.call(t,s)&&!fRe.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:lRe,type:e,key:u,ref:f,props:c,_owner:dRe.current}}PL.Fragment=uRe;PL.jsx=fae;PL.jsxs=fae;nae.exports=PL;var oe=nae.exports,H3={},hae={exports:{}},GA={},pae={exports:{}},gae={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Be,ke){var Ke=Be.length;Be.push(ke);e:for(;0<Ke;){var ht=Ke-1>>>1,ve=Be[ht];if(0<c(ve,ke))Be[ht]=ke,Be[Ke]=ve,Ke=ht;else break e}}function i(Be){return Be.length===0?null:Be[0]}function s(Be){if(Be.length===0)return null;var ke=Be[0],Ke=Be.pop();if(Ke!==ke){Be[0]=Ke;e:for(var ht=0,ve=Be.length,Oe=ve>>>1;ht<Oe;){var Ue=2*(ht+1)-1,Fe=Be[Ue],Qe=Ue+1,We=Be[Qe];if(0>c(Fe,Ke))Qe<ve&&0>c(We,Fe)?(Be[ht]=We,Be[Qe]=Ke,ht=Qe):(Be[ht]=Fe,Be[Ue]=Ke,ht=Ue);else if(Qe<ve&&0>c(We,Ke))Be[ht]=We,Be[Qe]=Ke,ht=Qe;else break e}}return ke}function c(Be,ke){var Ke=Be.sortIndex-ke.sortIndex;return Ke!==0?Ke:Be.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();e.unstable_now=function(){return f.now()-p}}var m=[],E=[],w=1,T=null,N=3,O=!1,P=!1,M=!1,Q=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Be){for(var ke=i(E);ke!==null;){if(ke.callback===null)s(E);else if(ke.startTime<=Be)s(E),ke.sortIndex=ke.expirationTime,t(m,ke);else break;ke=i(E)}}function K(Be){if(M=!1,V(Be),!P)if(i(m)!==null)P=!0,xe(J);else{var ke=i(E);ke!==null&&Me(K,ke.startTime-Be)}}function J(Be,ke){P=!1,M&&(M=!1,k(Z),Z=-1),O=!0;var Ke=N;try{for(V(ke),T=i(m);T!==null&&(!(T.expirationTime>ke)||Be&&!te());){var ht=T.callback;if(typeof ht=="function"){T.callback=null,N=T.priorityLevel;var ve=ht(T.expirationTime<=ke);ke=e.unstable_now(),typeof ve=="function"?T.callback=ve:T===i(m)&&s(m),V(ke)}else s(m);T=i(m)}if(T!==null)var Oe=!0;else{var Ue=i(E);Ue!==null&&Me(K,Ue.startTime-ke),Oe=!1}return Oe}finally{T=null,N=Ke,O=!1}}var ie=!1,fe=null,Z=-1,pe=5,Y=-1;function te(){return!(e.unstable_now()-Y<pe)}function le(){if(fe!==null){var Be=e.unstable_now();Y=Be;var ke=!0;try{ke=fe(!0,Be)}finally{ke?ae():(ie=!1,fe=null)}}else ie=!1}var ae;if(typeof D=="function")ae=function(){D(le)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,se=ge.port2;ge.port1.onmessage=le,ae=function(){se.postMessage(null)}}else ae=function(){Q(le,0)};function xe(Be){fe=Be,ie||(ie=!0,ae())}function Me(Be,ke){Z=Q(function(){Be(e.unstable_now())},ke)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Be){Be.callback=null},e.unstable_continueExecution=function(){P||O||(P=!0,xe(J))},e.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<Be?Math.floor(1e3/Be):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return i(m)},e.unstable_next=function(Be){switch(N){case 1:case 2:case 3:var ke=3;break;default:ke=N}var Ke=N;N=ke;try{return Be()}finally{N=Ke}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Be,ke){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Ke=N;N=Be;try{return ke()}finally{N=Ke}},e.unstable_scheduleCallback=function(Be,ke,Ke){var ht=e.unstable_now();switch(typeof Ke=="object"&&Ke!==null?(Ke=Ke.delay,Ke=typeof Ke=="number"&&0<Ke?ht+Ke:ht):Ke=ht,Be){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Ke+ve,Be={id:w++,callback:ke,priorityLevel:Be,startTime:Ke,expirationTime:ve,sortIndex:-1},Ke>ht?(Be.sortIndex=Ke,t(E,Be),i(m)===null&&Be===i(E)&&(M?(k(Z),Z=-1):M=!0,Me(K,Ke-ht))):(Be.sortIndex=ve,t(m,Be),P||O||(P=!0,xe(J))),Be},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(Be){var ke=N;return function(){var Ke=N;N=ke;try{return Be.apply(this,arguments)}finally{N=Ke}}}})(gae);pae.exports=gae;var hRe=pae.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pRe=he,HA=hRe;function ur(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mae=new Set,HC={};function l_(e,t){cw(e,t),cw(e+"Capture",t)}function cw(e,t){for(HC[e]=t,e=0;e<t.length;e++)mae.add(t[e])}var sm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j3=Object.prototype.hasOwnProperty,gRe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UZ={},MZ={};function mRe(e){return j3.call(MZ,e)?!0:j3.call(UZ,e)?!1:gRe.test(e)?MZ[e]=!0:(UZ[e]=!0,!1)}function vRe(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _Re(e,t,i,s){if(t===null||typeof t>"u"||vRe(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function cu(e,t,i,s,c,u,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=f}var cl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){cl[e]=new cu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];cl[t]=new cu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){cl[e]=new cu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){cl[e]=new cu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){cl[e]=new cu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){cl[e]=new cu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){cl[e]=new cu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){cl[e]=new cu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){cl[e]=new cu(e,5,!1,e.toLowerCase(),null,!1,!1)});var Q8=/[\-:]([a-z])/g;function H8(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Q8,H8);cl[t]=new cu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Q8,H8);cl[t]=new cu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Q8,H8);cl[t]=new cu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){cl[e]=new cu(e,1,!1,e.toLowerCase(),null,!1,!1)});cl.xlinkHref=new cu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){cl[e]=new cu(e,1,!1,e.toLowerCase(),null,!0,!0)});function j8(e,t,i,s){var c=cl.hasOwnProperty(t)?cl[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_Re(t,i,c,s)&&(i=null),s||c===null?mRe(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,s=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var gm=pRe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,iO=Symbol.for("react.element"),BE=Symbol.for("react.portal"),LE=Symbol.for("react.fragment"),K8=Symbol.for("react.strict_mode"),K3=Symbol.for("react.profiler"),vae=Symbol.for("react.provider"),_ae=Symbol.for("react.context"),W8=Symbol.for("react.forward_ref"),W3=Symbol.for("react.suspense"),G3=Symbol.for("react.suspense_list"),G8=Symbol.for("react.memo"),Lv=Symbol.for("react.lazy"),yae=Symbol.for("react.offscreen"),FZ=Symbol.iterator;function yb(e){return e===null||typeof e!="object"?null:(e=FZ&&e[FZ]||e["@@iterator"],typeof e=="function"?e:null)}var Qs=Object.assign,vM;function rC(e){if(vM===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);vM=t&&t[1]||""}return`
`+vM+e}var _M=!1;function yM(e,t){if(!e||_M)return"";_M=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var s=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){s=E}e.call(t.prototype)}else{try{throw Error()}catch(E){s=E}e()}}catch(E){if(E&&s&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),u=s.stack.split(`
`),f=c.length-1,p=u.length-1;1<=f&&0<=p&&c[f]!==u[p];)p--;for(;1<=f&&0<=p;f--,p--)if(c[f]!==u[p]){if(f!==1||p!==1)do if(f--,p--,0>p||c[f]!==u[p]){var m=`
`+c[f].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=f&&0<=p);break}}}finally{_M=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?rC(e):""}function yRe(e){switch(e.tag){case 5:return rC(e.type);case 16:return rC("Lazy");case 13:return rC("Suspense");case 19:return rC("SuspenseList");case 0:case 2:case 15:return e=yM(e.type,!1),e;case 11:return e=yM(e.type.render,!1),e;case 1:return e=yM(e.type,!0),e;default:return""}}function $3(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case LE:return"Fragment";case BE:return"Portal";case K3:return"Profiler";case K8:return"StrictMode";case W3:return"Suspense";case G3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _ae:return(e.displayName||"Context")+".Consumer";case vae:return(e._context.displayName||"Context")+".Provider";case W8:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G8:return t=e.displayName||null,t!==null?t:$3(e.type)||"Memo";case Lv:t=e._payload,e=e._init;try{return $3(e(t))}catch{}}return null}function ERe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $3(t);case 8:return t===K8?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function o0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Eae(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wRe(e){var t=Eae(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){s=""+f,u.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function oO(e){e._valueTracker||(e._valueTracker=wRe(e))}function wae(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Eae(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function dB(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function z3(e,t){var i=t.checked;return Qs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function VZ(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=o0(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sae(e,t){t=t.checked,t!=null&&j8(e,"checked",t,!1)}function q3(e,t){Sae(e,t);var i=o0(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y3(e,t.type,i):t.hasOwnProperty("defaultValue")&&Y3(e,t.type,o0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function QZ(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Y3(e,t,i){(t!=="number"||dB(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var nC=Array.isArray;function $E(e,t,i,s){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+o0(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function X3(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ur(91));return Qs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function HZ(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(ur(92));if(nC(i)){if(1<i.length)throw Error(ur(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:o0(i)}}function bae(e,t){var i=o0(t.value),s=o0(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function jZ(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J3(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cae(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sO,Tae=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sO=sO||document.createElement("div"),sO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jC(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var EC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SRe=["Webkit","ms","Moz","O"];Object.keys(EC).forEach(function(e){SRe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),EC[t]=EC[e]})});function Rae(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||EC.hasOwnProperty(e)&&EC[e]?(""+t).trim():t+"px"}function Iae(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,c=Rae(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,c):e[i]=c}}var bRe=Qs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Z3(e,t){if(t){if(bRe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ur(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ur(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ur(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ur(62))}}function eF(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tF=null;function $8(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rF=null,zE=null,qE=null;function KZ(e){if(e=LT(e)){if(typeof rF!="function")throw Error(ur(280));var t=e.stateNode;t&&(t=ML(t),rF(e.stateNode,e.type,t))}}function Oae(e){zE?qE?qE.push(e):qE=[e]:zE=e}function Nae(){if(zE){var e=zE,t=qE;if(qE=zE=null,KZ(e),t)for(e=0;e<t.length;e++)KZ(t[e])}}function Bae(e,t){return e(t)}function Lae(){}var EM=!1;function Pae(e,t,i){if(EM)return e(t,i);EM=!0;try{return Bae(e,t,i)}finally{EM=!1,(zE!==null||qE!==null)&&(Lae(),Nae())}}function KC(e,t){var i=e.stateNode;if(i===null)return null;var s=ML(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(ur(231,t,typeof i));return i}var nF=!1;if(sm)try{var Eb={};Object.defineProperty(Eb,"passive",{get:function(){nF=!0}}),window.addEventListener("test",Eb,Eb),window.removeEventListener("test",Eb,Eb)}catch{nF=!1}function CRe(e,t,i,s,c,u,f,p,m){var E=Array.prototype.slice.call(arguments,3);try{t.apply(i,E)}catch(w){this.onError(w)}}var wC=!1,fB=null,hB=!1,iF=null,TRe={onError:function(e){wC=!0,fB=e}};function RRe(e,t,i,s,c,u,f,p,m){wC=!1,fB=null,CRe.apply(TRe,arguments)}function IRe(e,t,i,s,c,u,f,p,m){if(RRe.apply(this,arguments),wC){if(wC){var E=fB;wC=!1,fB=null}else throw Error(ur(198));hB||(hB=!0,iF=E)}}function u_(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function kae(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function WZ(e){if(u_(e)!==e)throw Error(ur(188))}function ORe(e){var t=e.alternate;if(!t){if(t=u_(e),t===null)throw Error(ur(188));return t!==e?null:e}for(var i=e,s=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return WZ(c),e;if(u===s)return WZ(c),t;u=u.sibling}throw Error(ur(188))}if(i.return!==s.return)i=c,s=u;else{for(var f=!1,p=c.child;p;){if(p===i){f=!0,i=c,s=u;break}if(p===s){f=!0,s=c,i=u;break}p=p.sibling}if(!f){for(p=u.child;p;){if(p===i){f=!0,i=u,s=c;break}if(p===s){f=!0,s=u,i=c;break}p=p.sibling}if(!f)throw Error(ur(189))}}if(i.alternate!==s)throw Error(ur(190))}if(i.tag!==3)throw Error(ur(188));return i.stateNode.current===i?e:t}function Dae(e){return e=ORe(e),e!==null?xae(e):null}function xae(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xae(e);if(t!==null)return t;e=e.sibling}return null}var Uae=HA.unstable_scheduleCallback,GZ=HA.unstable_cancelCallback,NRe=HA.unstable_shouldYield,BRe=HA.unstable_requestPaint,ba=HA.unstable_now,LRe=HA.unstable_getCurrentPriorityLevel,z8=HA.unstable_ImmediatePriority,Mae=HA.unstable_UserBlockingPriority,pB=HA.unstable_NormalPriority,PRe=HA.unstable_LowPriority,Fae=HA.unstable_IdlePriority,kL=null,Gp=null;function kRe(e){if(Gp&&typeof Gp.onCommitFiberRoot=="function")try{Gp.onCommitFiberRoot(kL,e,void 0,(e.current.flags&128)===128)}catch{}}var vh=Math.clz32?Math.clz32:URe,DRe=Math.log,xRe=Math.LN2;function URe(e){return e>>>=0,e===0?32:31-(DRe(e)/xRe|0)|0}var aO=64,cO=4194304;function iC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gB(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,c=e.suspendedLanes,u=e.pingedLanes,f=i&268435455;if(f!==0){var p=f&~c;p!==0?s=iC(p):(u&=f,u!==0&&(s=iC(u)))}else f=i&~c,f!==0?s=iC(f):u!==0&&(s=iC(u));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-vh(t),c=1<<i,s|=e[i],t&=~c;return s}function MRe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FRe(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var f=31-vh(u),p=1<<f,m=c[f];m===-1?(!(p&i)||p&s)&&(c[f]=MRe(p,t)):m<=t&&(e.expiredLanes|=p),u&=~p}}function oF(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vae(){var e=aO;return aO<<=1,!(aO&4194240)&&(aO=64),e}function wM(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function NT(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vh(t),e[t]=i}function VRe(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-vh(i),u=1<<c;t[c]=0,s[c]=-1,e[c]=-1,i&=~u}}function q8(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-vh(i),c=1<<s;c&t|e[s]&t&&(e[s]|=t),i&=~c}}var yo=0;function Qae(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hae,Y8,jae,Kae,Wae,sF=!1,lO=[],Kv=null,Wv=null,Gv=null,WC=new Map,GC=new Map,Dv=[],QRe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $Z(e,t){switch(e){case"focusin":case"focusout":Kv=null;break;case"dragenter":case"dragleave":Wv=null;break;case"mouseover":case"mouseout":Gv=null;break;case"pointerover":case"pointerout":WC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":GC.delete(t.pointerId)}}function wb(e,t,i,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=LT(t),t!==null&&Y8(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function HRe(e,t,i,s,c){switch(t){case"focusin":return Kv=wb(Kv,e,t,i,s,c),!0;case"dragenter":return Wv=wb(Wv,e,t,i,s,c),!0;case"mouseover":return Gv=wb(Gv,e,t,i,s,c),!0;case"pointerover":var u=c.pointerId;return WC.set(u,wb(WC.get(u)||null,e,t,i,s,c)),!0;case"gotpointercapture":return u=c.pointerId,GC.set(u,wb(GC.get(u)||null,e,t,i,s,c)),!0}return!1}function Gae(e){var t=U1(e.target);if(t!==null){var i=u_(t);if(i!==null){if(t=i.tag,t===13){if(t=kae(i),t!==null){e.blockedOn=t,Wae(e.priority,function(){jae(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=aF(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);tF=s,i.target.dispatchEvent(s),tF=null}else return t=LT(i),t!==null&&Y8(t),e.blockedOn=i,!1;t.shift()}return!0}function zZ(e,t,i){bN(e)&&i.delete(t)}function jRe(){sF=!1,Kv!==null&&bN(Kv)&&(Kv=null),Wv!==null&&bN(Wv)&&(Wv=null),Gv!==null&&bN(Gv)&&(Gv=null),WC.forEach(zZ),GC.forEach(zZ)}function Sb(e,t){e.blockedOn===t&&(e.blockedOn=null,sF||(sF=!0,HA.unstable_scheduleCallback(HA.unstable_NormalPriority,jRe)))}function $C(e){function t(c){return Sb(c,e)}if(0<lO.length){Sb(lO[0],e);for(var i=1;i<lO.length;i++){var s=lO[i];s.blockedOn===e&&(s.blockedOn=null)}}for(Kv!==null&&Sb(Kv,e),Wv!==null&&Sb(Wv,e),Gv!==null&&Sb(Gv,e),WC.forEach(t),GC.forEach(t),i=0;i<Dv.length;i++)s=Dv[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<Dv.length&&(i=Dv[0],i.blockedOn===null);)Gae(i),i.blockedOn===null&&Dv.shift()}var YE=gm.ReactCurrentBatchConfig,mB=!0;function KRe(e,t,i,s){var c=yo,u=YE.transition;YE.transition=null;try{yo=1,X8(e,t,i,s)}finally{yo=c,YE.transition=u}}function WRe(e,t,i,s){var c=yo,u=YE.transition;YE.transition=null;try{yo=4,X8(e,t,i,s)}finally{yo=c,YE.transition=u}}function X8(e,t,i,s){if(mB){var c=aF(e,t,i,s);if(c===null)LM(e,t,s,vB,i),$Z(e,s);else if(HRe(c,e,t,i,s))s.stopPropagation();else if($Z(e,s),t&4&&-1<QRe.indexOf(e)){for(;c!==null;){var u=LT(c);if(u!==null&&Hae(u),u=aF(e,t,i,s),u===null&&LM(e,t,s,vB,i),u===c)break;c=u}c!==null&&s.stopPropagation()}else LM(e,t,s,null,i)}}var vB=null;function aF(e,t,i,s){if(vB=null,e=$8(s),e=U1(e),e!==null)if(t=u_(e),t===null)e=null;else if(i=t.tag,i===13){if(e=kae(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vB=e,null}function $ae(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LRe()){case z8:return 1;case Mae:return 4;case pB:case PRe:return 16;case Fae:return 536870912;default:return 16}default:return 16}}var Uv=null,J8=null,CN=null;function zae(){if(CN)return CN;var e,t=J8,i=t.length,s,c="value"in Uv?Uv.value:Uv.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var f=i-e;for(s=1;s<=f&&t[i-s]===c[u-s];s++);return CN=c.slice(e,1<s?1-s:void 0)}function TN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function uO(){return!0}function qZ(){return!1}function $A(e){function t(i,s,c,u,f){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=f,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(u):u[p]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?uO:qZ,this.isPropagationStopped=qZ,this}return Qs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=uO)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=uO)},persist:function(){},isPersistent:uO}),t}var Rw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z8=$A(Rw),BT=Qs({},Rw,{view:0,detail:0}),GRe=$A(BT),SM,bM,bb,DL=Qs({},BT,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eV,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bb&&(bb&&e.type==="mousemove"?(SM=e.screenX-bb.screenX,bM=e.screenY-bb.screenY):bM=SM=0,bb=e),SM)},movementY:function(e){return"movementY"in e?e.movementY:bM}}),YZ=$A(DL),$Re=Qs({},DL,{dataTransfer:0}),zRe=$A($Re),qRe=Qs({},BT,{relatedTarget:0}),CM=$A(qRe),YRe=Qs({},Rw,{animationName:0,elapsedTime:0,pseudoElement:0}),XRe=$A(YRe),JRe=Qs({},Rw,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZRe=$A(JRe),eIe=Qs({},Rw,{data:0}),XZ=$A(eIe),tIe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rIe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nIe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iIe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nIe[e])?!!t[e]:!1}function eV(){return iIe}var oIe=Qs({},BT,{key:function(e){if(e.key){var t=tIe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=TN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rIe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eV,charCode:function(e){return e.type==="keypress"?TN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?TN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sIe=$A(oIe),aIe=Qs({},DL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JZ=$A(aIe),cIe=Qs({},BT,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eV}),lIe=$A(cIe),uIe=Qs({},Rw,{propertyName:0,elapsedTime:0,pseudoElement:0}),AIe=$A(uIe),dIe=Qs({},DL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fIe=$A(dIe),hIe=[9,13,27,32],tV=sm&&"CompositionEvent"in window,SC=null;sm&&"documentMode"in document&&(SC=document.documentMode);var pIe=sm&&"TextEvent"in window&&!SC,qae=sm&&(!tV||SC&&8<SC&&11>=SC),ZZ=String.fromCharCode(32),eee=!1;function Yae(e,t){switch(e){case"keyup":return hIe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xae(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var PE=!1;function gIe(e,t){switch(e){case"compositionend":return Xae(t);case"keypress":return t.which!==32?null:(eee=!0,ZZ);case"textInput":return e=t.data,e===ZZ&&eee?null:e;default:return null}}function mIe(e,t){if(PE)return e==="compositionend"||!tV&&Yae(e,t)?(e=zae(),CN=J8=Uv=null,PE=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qae&&t.locale!=="ko"?null:t.data;default:return null}}var vIe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tee(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vIe[e.type]:t==="textarea"}function Jae(e,t,i,s){Oae(s),t=_B(t,"onChange"),0<t.length&&(i=new Z8("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var bC=null,zC=null;function _Ie(e){lce(e,0)}function xL(e){var t=xE(e);if(wae(t))return e}function yIe(e,t){if(e==="change")return t}var Zae=!1;if(sm){var TM;if(sm){var RM="oninput"in document;if(!RM){var ree=document.createElement("div");ree.setAttribute("oninput","return;"),RM=typeof ree.oninput=="function"}TM=RM}else TM=!1;Zae=TM&&(!document.documentMode||9<document.documentMode)}function nee(){bC&&(bC.detachEvent("onpropertychange",ece),zC=bC=null)}function ece(e){if(e.propertyName==="value"&&xL(zC)){var t=[];Jae(t,zC,e,$8(e)),Pae(_Ie,t)}}function EIe(e,t,i){e==="focusin"?(nee(),bC=t,zC=i,bC.attachEvent("onpropertychange",ece)):e==="focusout"&&nee()}function wIe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xL(zC)}function SIe(e,t){if(e==="click")return xL(t)}function bIe(e,t){if(e==="input"||e==="change")return xL(t)}function CIe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Eh=typeof Object.is=="function"?Object.is:CIe;function qC(e,t){if(Eh(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!j3.call(t,c)||!Eh(e[c],t[c]))return!1}return!0}function iee(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oee(e,t){var i=iee(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=iee(i)}}function tce(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tce(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rce(){for(var e=window,t=dB();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=dB(e.document)}return t}function rV(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function TIe(e){var t=rce(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&tce(i.ownerDocument.documentElement,i)){if(s!==null&&rV(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,u=Math.min(s.start,c);s=s.end===void 0?u:Math.min(s.end,c),!e.extend&&u>s&&(c=s,s=u,u=c),c=oee(i,u);var f=oee(i,s);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>s?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RIe=sm&&"documentMode"in document&&11>=document.documentMode,kE=null,cF=null,CC=null,lF=!1;function see(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;lF||kE==null||kE!==dB(s)||(s=kE,"selectionStart"in s&&rV(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),CC&&qC(CC,s)||(CC=s,s=_B(cF,"onSelect"),0<s.length&&(t=new Z8("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=kE)))}function AO(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var DE={animationend:AO("Animation","AnimationEnd"),animationiteration:AO("Animation","AnimationIteration"),animationstart:AO("Animation","AnimationStart"),transitionend:AO("Transition","TransitionEnd")},IM={},nce={};sm&&(nce=document.createElement("div").style,"AnimationEvent"in window||(delete DE.animationend.animation,delete DE.animationiteration.animation,delete DE.animationstart.animation),"TransitionEvent"in window||delete DE.transitionend.transition);function UL(e){if(IM[e])return IM[e];if(!DE[e])return e;var t=DE[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in nce)return IM[e]=t[i];return e}var ice=UL("animationend"),oce=UL("animationiteration"),sce=UL("animationstart"),ace=UL("transitionend"),cce=new Map,aee="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function h0(e,t){cce.set(e,t),l_(t,[e])}for(var OM=0;OM<aee.length;OM++){var NM=aee[OM],IIe=NM.toLowerCase(),OIe=NM[0].toUpperCase()+NM.slice(1);h0(IIe,"on"+OIe)}h0(ice,"onAnimationEnd");h0(oce,"onAnimationIteration");h0(sce,"onAnimationStart");h0("dblclick","onDoubleClick");h0("focusin","onFocus");h0("focusout","onBlur");h0(ace,"onTransitionEnd");cw("onMouseEnter",["mouseout","mouseover"]);cw("onMouseLeave",["mouseout","mouseover"]);cw("onPointerEnter",["pointerout","pointerover"]);cw("onPointerLeave",["pointerout","pointerover"]);l_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));l_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));l_("onBeforeInput",["compositionend","keypress","textInput","paste"]);l_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));l_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));l_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NIe=new Set("cancel close invalid load scroll toggle".split(" ").concat(oC));function cee(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,IRe(s,t,void 0,e),e.currentTarget=null}function lce(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var f=s.length-1;0<=f;f--){var p=s[f],m=p.instance,E=p.currentTarget;if(p=p.listener,m!==u&&c.isPropagationStopped())break e;cee(c,p,E),u=m}else for(f=0;f<s.length;f++){if(p=s[f],m=p.instance,E=p.currentTarget,p=p.listener,m!==u&&c.isPropagationStopped())break e;cee(c,p,E),u=m}}}if(hB)throw e=iF,hB=!1,iF=null,e}function ss(e,t){var i=t[hF];i===void 0&&(i=t[hF]=new Set);var s=e+"__bubble";i.has(s)||(uce(t,e,2,!1),i.add(s))}function BM(e,t,i){var s=0;t&&(s|=4),uce(i,e,s,t)}var dO="_reactListening"+Math.random().toString(36).slice(2);function YC(e){if(!e[dO]){e[dO]=!0,mae.forEach(function(i){i!=="selectionchange"&&(NIe.has(i)||BM(i,!1,e),BM(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dO]||(t[dO]=!0,BM("selectionchange",!1,t))}}function uce(e,t,i,s){switch($ae(t)){case 1:var c=KRe;break;case 4:c=WRe;break;default:c=X8}i=c.bind(null,t,i,e),c=void 0,!nF||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function LM(e,t,i,s,c){var u=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var p=s.stateNode.containerInfo;if(p===c||p.nodeType===8&&p.parentNode===c)break;if(f===4)for(f=s.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===c||m.nodeType===8&&m.parentNode===c))return;f=f.return}for(;p!==null;){if(f=U1(p),f===null)return;if(m=f.tag,m===5||m===6){s=u=f;continue e}p=p.parentNode}}s=s.return}Pae(function(){var E=u,w=$8(i),T=[];e:{var N=cce.get(e);if(N!==void 0){var O=Z8,P=e;switch(e){case"keypress":if(TN(i)===0)break e;case"keydown":case"keyup":O=sIe;break;case"focusin":P="focus",O=CM;break;case"focusout":P="blur",O=CM;break;case"beforeblur":case"afterblur":O=CM;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=YZ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=zRe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=lIe;break;case ice:case oce:case sce:O=XRe;break;case ace:O=AIe;break;case"scroll":O=GRe;break;case"wheel":O=fIe;break;case"copy":case"cut":case"paste":O=ZRe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=JZ}var M=(t&4)!==0,Q=!M&&e==="scroll",k=M?N!==null?N+"Capture":null:N;M=[];for(var D=E,V;D!==null;){V=D;var K=V.stateNode;if(V.tag===5&&K!==null&&(V=K,k!==null&&(K=KC(D,k),K!=null&&M.push(XC(D,K,V)))),Q)break;D=D.return}0<M.length&&(N=new O(N,P,null,i,w),T.push({event:N,listeners:M}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",N&&i!==tF&&(P=i.relatedTarget||i.fromElement)&&(U1(P)||P[am]))break e;if((O||N)&&(N=w.window===w?w:(N=w.ownerDocument)?N.defaultView||N.parentWindow:window,O?(P=i.relatedTarget||i.toElement,O=E,P=P?U1(P):null,P!==null&&(Q=u_(P),P!==Q||P.tag!==5&&P.tag!==6)&&(P=null)):(O=null,P=E),O!==P)){if(M=YZ,K="onMouseLeave",k="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(M=JZ,K="onPointerLeave",k="onPointerEnter",D="pointer"),Q=O==null?N:xE(O),V=P==null?N:xE(P),N=new M(K,D+"leave",O,i,w),N.target=Q,N.relatedTarget=V,K=null,U1(w)===E&&(M=new M(k,D+"enter",P,i,w),M.target=V,M.relatedTarget=Q,K=M),Q=K,O&&P)t:{for(M=O,k=P,D=0,V=M;V;V=tE(V))D++;for(V=0,K=k;K;K=tE(K))V++;for(;0<D-V;)M=tE(M),D--;for(;0<V-D;)k=tE(k),V--;for(;D--;){if(M===k||k!==null&&M===k.alternate)break t;M=tE(M),k=tE(k)}M=null}else M=null;O!==null&&lee(T,N,O,M,!1),P!==null&&Q!==null&&lee(T,Q,P,M,!0)}}e:{if(N=E?xE(E):window,O=N.nodeName&&N.nodeName.toLowerCase(),O==="select"||O==="input"&&N.type==="file")var J=yIe;else if(tee(N))if(Zae)J=bIe;else{J=wIe;var ie=EIe}else(O=N.nodeName)&&O.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(J=SIe);if(J&&(J=J(e,E))){Jae(T,J,i,w);break e}ie&&ie(e,N,E),e==="focusout"&&(ie=N._wrapperState)&&ie.controlled&&N.type==="number"&&Y3(N,"number",N.value)}switch(ie=E?xE(E):window,e){case"focusin":(tee(ie)||ie.contentEditable==="true")&&(kE=ie,cF=E,CC=null);break;case"focusout":CC=cF=kE=null;break;case"mousedown":lF=!0;break;case"contextmenu":case"mouseup":case"dragend":lF=!1,see(T,i,w);break;case"selectionchange":if(RIe)break;case"keydown":case"keyup":see(T,i,w)}var fe;if(tV)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else PE?Yae(e,i)&&(Z="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Z="onCompositionStart");Z&&(qae&&i.locale!=="ko"&&(PE||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&PE&&(fe=zae()):(Uv=w,J8="value"in Uv?Uv.value:Uv.textContent,PE=!0)),ie=_B(E,Z),0<ie.length&&(Z=new XZ(Z,e,null,i,w),T.push({event:Z,listeners:ie}),fe?Z.data=fe:(fe=Xae(i),fe!==null&&(Z.data=fe)))),(fe=pIe?gIe(e,i):mIe(e,i))&&(E=_B(E,"onBeforeInput"),0<E.length&&(w=new XZ("onBeforeInput","beforeinput",null,i,w),T.push({event:w,listeners:E}),w.data=fe))}lce(T,t)})}function XC(e,t,i){return{instance:e,listener:t,currentTarget:i}}function _B(e,t){for(var i=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=KC(e,i),u!=null&&s.unshift(XC(e,u,c)),u=KC(e,t),u!=null&&s.push(XC(e,u,c))),e=e.return}return s}function tE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lee(e,t,i,s,c){for(var u=t._reactName,f=[];i!==null&&i!==s;){var p=i,m=p.alternate,E=p.stateNode;if(m!==null&&m===s)break;p.tag===5&&E!==null&&(p=E,c?(m=KC(i,u),m!=null&&f.unshift(XC(i,m,p))):c||(m=KC(i,u),m!=null&&f.push(XC(i,m,p)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var BIe=/\r\n?/g,LIe=/\u0000|\uFFFD/g;function uee(e){return(typeof e=="string"?e:""+e).replace(BIe,`
`).replace(LIe,"")}function fO(e,t,i){if(t=uee(t),uee(e)!==t&&i)throw Error(ur(425))}function yB(){}var uF=null,AF=null;function dF(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fF=typeof setTimeout=="function"?setTimeout:void 0,PIe=typeof clearTimeout=="function"?clearTimeout:void 0,Aee=typeof Promise=="function"?Promise:void 0,kIe=typeof queueMicrotask=="function"?queueMicrotask:typeof Aee<"u"?function(e){return Aee.resolve(null).then(e).catch(DIe)}:fF;function DIe(e){setTimeout(function(){throw e})}function PM(e,t){var i=t,s=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(s===0){e.removeChild(c),$C(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=c}while(i);$C(t)}function $v(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dee(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Iw=Math.random().toString(36).slice(2),jp="__reactFiber$"+Iw,JC="__reactProps$"+Iw,am="__reactContainer$"+Iw,hF="__reactEvents$"+Iw,xIe="__reactListeners$"+Iw,UIe="__reactHandles$"+Iw;function U1(e){var t=e[jp];if(t)return t;for(var i=e.parentNode;i;){if(t=i[am]||i[jp]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=dee(e);e!==null;){if(i=e[jp])return i;e=dee(e)}return t}e=i,i=e.parentNode}return null}function LT(e){return e=e[jp]||e[am],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xE(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ur(33))}function ML(e){return e[JC]||null}var pF=[],UE=-1;function p0(e){return{current:e}}function cs(e){0>UE||(e.current=pF[UE],pF[UE]=null,UE--)}function Jo(e,t){UE++,pF[UE]=e.current,e.current=t}var s0={},Hl=p0(s0),Ku=p0(!1),J1=s0;function lw(e,t){var i=e.type.contextTypes;if(!i)return s0;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in i)c[u]=t[u];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Wu(e){return e=e.childContextTypes,e!=null}function EB(){cs(Ku),cs(Hl)}function fee(e,t,i){if(Hl.current!==s0)throw Error(ur(168));Jo(Hl,t),Jo(Ku,i)}function Ace(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(ur(108,ERe(e)||"Unknown",c));return Qs({},i,s)}function wB(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||s0,J1=Hl.current,Jo(Hl,e),Jo(Ku,Ku.current),!0}function hee(e,t,i){var s=e.stateNode;if(!s)throw Error(ur(169));i?(e=Ace(e,t,J1),s.__reactInternalMemoizedMergedChildContext=e,cs(Ku),cs(Hl),Jo(Hl,e)):cs(Ku),Jo(Ku,i)}var Jg=null,FL=!1,kM=!1;function dce(e){Jg===null?Jg=[e]:Jg.push(e)}function MIe(e){FL=!0,dce(e)}function g0(){if(!kM&&Jg!==null){kM=!0;var e=0,t=yo;try{var i=Jg;for(yo=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}Jg=null,FL=!1}catch(c){throw Jg!==null&&(Jg=Jg.slice(e+1)),Uae(z8,g0),c}finally{yo=t,kM=!1}}return null}var ME=[],FE=0,SB=null,bB=0,Fd=[],Vd=0,Z1=null,Zg=1,em="";function R1(e,t){ME[FE++]=bB,ME[FE++]=SB,SB=e,bB=t}function fce(e,t,i){Fd[Vd++]=Zg,Fd[Vd++]=em,Fd[Vd++]=Z1,Z1=e;var s=Zg;e=em;var c=32-vh(s)-1;s&=~(1<<c),i+=1;var u=32-vh(t)+c;if(30<u){var f=c-c%5;u=(s&(1<<f)-1).toString(32),s>>=f,c-=f,Zg=1<<32-vh(t)+c|i<<c|s,em=u+e}else Zg=1<<u|i<<c|s,em=e}function nV(e){e.return!==null&&(R1(e,1),fce(e,1,0))}function iV(e){for(;e===SB;)SB=ME[--FE],ME[FE]=null,bB=ME[--FE],ME[FE]=null;for(;e===Z1;)Z1=Fd[--Vd],Fd[Vd]=null,em=Fd[--Vd],Fd[Vd]=null,Zg=Fd[--Vd],Fd[Vd]=null}var VA=null,UA=null,vs=!1,hh=null;function hce(e,t){var i=Wd(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function pee(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,VA=e,UA=$v(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,VA=e,UA=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Z1!==null?{id:Zg,overflow:em}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Wd(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,VA=e,UA=null,!0):!1;default:return!1}}function gF(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mF(e){if(vs){var t=UA;if(t){var i=t;if(!pee(e,t)){if(gF(e))throw Error(ur(418));t=$v(i.nextSibling);var s=VA;t&&pee(e,t)?hce(s,i):(e.flags=e.flags&-4097|2,vs=!1,VA=e)}}else{if(gF(e))throw Error(ur(418));e.flags=e.flags&-4097|2,vs=!1,VA=e}}}function gee(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;VA=e}function hO(e){if(e!==VA)return!1;if(!vs)return gee(e),vs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dF(e.type,e.memoizedProps)),t&&(t=UA)){if(gF(e))throw pce(),Error(ur(418));for(;t;)hce(e,t),t=$v(t.nextSibling)}if(gee(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ur(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){UA=$v(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}UA=null}}else UA=VA?$v(e.stateNode.nextSibling):null;return!0}function pce(){for(var e=UA;e;)e=$v(e.nextSibling)}function uw(){UA=VA=null,vs=!1}function oV(e){hh===null?hh=[e]:hh.push(e)}var FIe=gm.ReactCurrentBatchConfig;function Cb(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(ur(309));var s=i.stateNode}if(!s)throw Error(ur(147,e));var c=s,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(f){var p=c.refs;f===null?delete p[u]:p[u]=f},t._stringRef=u,t)}if(typeof e!="string")throw Error(ur(284));if(!i._owner)throw Error(ur(290,e))}return e}function pO(e,t){throw e=Object.prototype.toString.call(t),Error(ur(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mee(e){var t=e._init;return t(e._payload)}function gce(e){function t(k,D){if(e){var V=k.deletions;V===null?(k.deletions=[D],k.flags|=16):V.push(D)}}function i(k,D){if(!e)return null;for(;D!==null;)t(k,D),D=D.sibling;return null}function s(k,D){for(k=new Map;D!==null;)D.key!==null?k.set(D.key,D):k.set(D.index,D),D=D.sibling;return k}function c(k,D){return k=Xv(k,D),k.index=0,k.sibling=null,k}function u(k,D,V){return k.index=V,e?(V=k.alternate,V!==null?(V=V.index,V<D?(k.flags|=2,D):V):(k.flags|=2,D)):(k.flags|=1048576,D)}function f(k){return e&&k.alternate===null&&(k.flags|=2),k}function p(k,D,V,K){return D===null||D.tag!==6?(D=QM(V,k.mode,K),D.return=k,D):(D=c(D,V),D.return=k,D)}function m(k,D,V,K){var J=V.type;return J===LE?w(k,D,V.props.children,K,V.key):D!==null&&(D.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Lv&&mee(J)===D.type)?(K=c(D,V.props),K.ref=Cb(k,D,V),K.return=k,K):(K=PN(V.type,V.key,V.props,null,k.mode,K),K.ref=Cb(k,D,V),K.return=k,K)}function E(k,D,V,K){return D===null||D.tag!==4||D.stateNode.containerInfo!==V.containerInfo||D.stateNode.implementation!==V.implementation?(D=HM(V,k.mode,K),D.return=k,D):(D=c(D,V.children||[]),D.return=k,D)}function w(k,D,V,K,J){return D===null||D.tag!==7?(D=W1(V,k.mode,K,J),D.return=k,D):(D=c(D,V),D.return=k,D)}function T(k,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return D=QM(""+D,k.mode,V),D.return=k,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case iO:return V=PN(D.type,D.key,D.props,null,k.mode,V),V.ref=Cb(k,null,D),V.return=k,V;case BE:return D=HM(D,k.mode,V),D.return=k,D;case Lv:var K=D._init;return T(k,K(D._payload),V)}if(nC(D)||yb(D))return D=W1(D,k.mode,V,null),D.return=k,D;pO(k,D)}return null}function N(k,D,V,K){var J=D!==null?D.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return J!==null?null:p(k,D,""+V,K);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case iO:return V.key===J?m(k,D,V,K):null;case BE:return V.key===J?E(k,D,V,K):null;case Lv:return J=V._init,N(k,D,J(V._payload),K)}if(nC(V)||yb(V))return J!==null?null:w(k,D,V,K,null);pO(k,V)}return null}function O(k,D,V,K,J){if(typeof K=="string"&&K!==""||typeof K=="number")return k=k.get(V)||null,p(D,k,""+K,J);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case iO:return k=k.get(K.key===null?V:K.key)||null,m(D,k,K,J);case BE:return k=k.get(K.key===null?V:K.key)||null,E(D,k,K,J);case Lv:var ie=K._init;return O(k,D,V,ie(K._payload),J)}if(nC(K)||yb(K))return k=k.get(V)||null,w(D,k,K,J,null);pO(D,K)}return null}function P(k,D,V,K){for(var J=null,ie=null,fe=D,Z=D=0,pe=null;fe!==null&&Z<V.length;Z++){fe.index>Z?(pe=fe,fe=null):pe=fe.sibling;var Y=N(k,fe,V[Z],K);if(Y===null){fe===null&&(fe=pe);break}e&&fe&&Y.alternate===null&&t(k,fe),D=u(Y,D,Z),ie===null?J=Y:ie.sibling=Y,ie=Y,fe=pe}if(Z===V.length)return i(k,fe),vs&&R1(k,Z),J;if(fe===null){for(;Z<V.length;Z++)fe=T(k,V[Z],K),fe!==null&&(D=u(fe,D,Z),ie===null?J=fe:ie.sibling=fe,ie=fe);return vs&&R1(k,Z),J}for(fe=s(k,fe);Z<V.length;Z++)pe=O(fe,k,Z,V[Z],K),pe!==null&&(e&&pe.alternate!==null&&fe.delete(pe.key===null?Z:pe.key),D=u(pe,D,Z),ie===null?J=pe:ie.sibling=pe,ie=pe);return e&&fe.forEach(function(te){return t(k,te)}),vs&&R1(k,Z),J}function M(k,D,V,K){var J=yb(V);if(typeof J!="function")throw Error(ur(150));if(V=J.call(V),V==null)throw Error(ur(151));for(var ie=J=null,fe=D,Z=D=0,pe=null,Y=V.next();fe!==null&&!Y.done;Z++,Y=V.next()){fe.index>Z?(pe=fe,fe=null):pe=fe.sibling;var te=N(k,fe,Y.value,K);if(te===null){fe===null&&(fe=pe);break}e&&fe&&te.alternate===null&&t(k,fe),D=u(te,D,Z),ie===null?J=te:ie.sibling=te,ie=te,fe=pe}if(Y.done)return i(k,fe),vs&&R1(k,Z),J;if(fe===null){for(;!Y.done;Z++,Y=V.next())Y=T(k,Y.value,K),Y!==null&&(D=u(Y,D,Z),ie===null?J=Y:ie.sibling=Y,ie=Y);return vs&&R1(k,Z),J}for(fe=s(k,fe);!Y.done;Z++,Y=V.next())Y=O(fe,k,Z,Y.value,K),Y!==null&&(e&&Y.alternate!==null&&fe.delete(Y.key===null?Z:Y.key),D=u(Y,D,Z),ie===null?J=Y:ie.sibling=Y,ie=Y);return e&&fe.forEach(function(le){return t(k,le)}),vs&&R1(k,Z),J}function Q(k,D,V,K){if(typeof V=="object"&&V!==null&&V.type===LE&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case iO:e:{for(var J=V.key,ie=D;ie!==null;){if(ie.key===J){if(J=V.type,J===LE){if(ie.tag===7){i(k,ie.sibling),D=c(ie,V.props.children),D.return=k,k=D;break e}}else if(ie.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Lv&&mee(J)===ie.type){i(k,ie.sibling),D=c(ie,V.props),D.ref=Cb(k,ie,V),D.return=k,k=D;break e}i(k,ie);break}else t(k,ie);ie=ie.sibling}V.type===LE?(D=W1(V.props.children,k.mode,K,V.key),D.return=k,k=D):(K=PN(V.type,V.key,V.props,null,k.mode,K),K.ref=Cb(k,D,V),K.return=k,k=K)}return f(k);case BE:e:{for(ie=V.key;D!==null;){if(D.key===ie)if(D.tag===4&&D.stateNode.containerInfo===V.containerInfo&&D.stateNode.implementation===V.implementation){i(k,D.sibling),D=c(D,V.children||[]),D.return=k,k=D;break e}else{i(k,D);break}else t(k,D);D=D.sibling}D=HM(V,k.mode,K),D.return=k,k=D}return f(k);case Lv:return ie=V._init,Q(k,D,ie(V._payload),K)}if(nC(V))return P(k,D,V,K);if(yb(V))return M(k,D,V,K);pO(k,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,D!==null&&D.tag===6?(i(k,D.sibling),D=c(D,V),D.return=k,k=D):(i(k,D),D=QM(V,k.mode,K),D.return=k,k=D),f(k)):i(k,D)}return Q}var Aw=gce(!0),mce=gce(!1),CB=p0(null),TB=null,VE=null,sV=null;function aV(){sV=VE=TB=null}function cV(e){var t=CB.current;cs(CB),e._currentValue=t}function vF(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function XE(e,t){TB=e,sV=VE=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ju=!0),e.firstContext=null)}function Xd(e){var t=e._currentValue;if(sV!==e)if(e={context:e,memoizedValue:t,next:null},VE===null){if(TB===null)throw Error(ur(308));VE=e,TB.dependencies={lanes:0,firstContext:e}}else VE=VE.next=e;return t}var M1=null;function lV(e){M1===null?M1=[e]:M1.push(e)}function vce(e,t,i,s){var c=t.interleaved;return c===null?(i.next=i,lV(t)):(i.next=c.next,c.next=i),t.interleaved=i,cm(e,s)}function cm(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Pv=!1;function uV(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _ce(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zv(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Gi&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,cm(e,i)}return c=s.interleaved,c===null?(t.next=t,lV(s)):(t.next=c.next,c.next=t),s.interleaved=t,cm(e,i)}function RN(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,q8(e,i)}}function vee(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var f={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};u===null?c=u=f:u=u.next=f,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function RB(e,t,i,s){var c=e.updateQueue;Pv=!1;var u=c.firstBaseUpdate,f=c.lastBaseUpdate,p=c.shared.pending;if(p!==null){c.shared.pending=null;var m=p,E=m.next;m.next=null,f===null?u=E:f.next=E,f=m;var w=e.alternate;w!==null&&(w=w.updateQueue,p=w.lastBaseUpdate,p!==f&&(p===null?w.firstBaseUpdate=E:p.next=E,w.lastBaseUpdate=m))}if(u!==null){var T=c.baseState;f=0,w=E=m=null,p=u;do{var N=p.lane,O=p.eventTime;if((s&N)===N){w!==null&&(w=w.next={eventTime:O,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var P=e,M=p;switch(N=t,O=i,M.tag){case 1:if(P=M.payload,typeof P=="function"){T=P.call(O,T,N);break e}T=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=M.payload,N=typeof P=="function"?P.call(O,T,N):P,N==null)break e;T=Qs({},T,N);break e;case 2:Pv=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,N=c.effects,N===null?c.effects=[p]:N.push(p))}else O={eventTime:O,lane:N,tag:p.tag,payload:p.payload,callback:p.callback,next:null},w===null?(E=w=O,m=T):w=w.next=O,f|=N;if(p=p.next,p===null){if(p=c.shared.pending,p===null)break;N=p,p=N.next,N.next=null,c.lastBaseUpdate=N,c.shared.pending=null}}while(1);if(w===null&&(m=T),c.baseState=m,c.firstBaseUpdate=E,c.lastBaseUpdate=w,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);t_|=f,e.lanes=f,e.memoizedState=T}}function _ee(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=i,typeof c!="function")throw Error(ur(191,c));c.call(s)}}}var PT={},$p=p0(PT),ZC=p0(PT),eT=p0(PT);function F1(e){if(e===PT)throw Error(ur(174));return e}function AV(e,t){switch(Jo(eT,t),Jo(ZC,e),Jo($p,PT),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:J3(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=J3(t,e)}cs($p),Jo($p,t)}function dw(){cs($p),cs(ZC),cs(eT)}function yce(e){F1(eT.current);var t=F1($p.current),i=J3(t,e.type);t!==i&&(Jo(ZC,e),Jo($p,i))}function dV(e){ZC.current===e&&(cs($p),cs(ZC))}var Fs=p0(0);function IB(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var DM=[];function fV(){for(var e=0;e<DM.length;e++)DM[e]._workInProgressVersionPrimary=null;DM.length=0}var IN=gm.ReactCurrentDispatcher,xM=gm.ReactCurrentBatchConfig,e_=0,Vs=null,ac=null,Oc=null,OB=!1,TC=!1,tT=0,VIe=0;function Il(){throw Error(ur(321))}function hV(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Eh(e[i],t[i]))return!1;return!0}function pV(e,t,i,s,c,u){if(e_=u,Vs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,IN.current=e===null||e.memoizedState===null?KIe:WIe,e=i(s,c),TC){u=0;do{if(TC=!1,tT=0,25<=u)throw Error(ur(301));u+=1,Oc=ac=null,t.updateQueue=null,IN.current=GIe,e=i(s,c)}while(TC)}if(IN.current=NB,t=ac!==null&&ac.next!==null,e_=0,Oc=ac=Vs=null,OB=!1,t)throw Error(ur(300));return e}function gV(){var e=tT!==0;return tT=0,e}function Fp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oc===null?Vs.memoizedState=Oc=e:Oc=Oc.next=e,Oc}function Jd(){if(ac===null){var e=Vs.alternate;e=e!==null?e.memoizedState:null}else e=ac.next;var t=Oc===null?Vs.memoizedState:Oc.next;if(t!==null)Oc=t,ac=e;else{if(e===null)throw Error(ur(310));ac=e,e={memoizedState:ac.memoizedState,baseState:ac.baseState,baseQueue:ac.baseQueue,queue:ac.queue,next:null},Oc===null?Vs.memoizedState=Oc=e:Oc=Oc.next=e}return Oc}function rT(e,t){return typeof t=="function"?t(e):t}function UM(e){var t=Jd(),i=t.queue;if(i===null)throw Error(ur(311));i.lastRenderedReducer=e;var s=ac,c=s.baseQueue,u=i.pending;if(u!==null){if(c!==null){var f=c.next;c.next=u.next,u.next=f}s.baseQueue=c=u,i.pending=null}if(c!==null){u=c.next,s=s.baseState;var p=f=null,m=null,E=u;do{var w=E.lane;if((e_&w)===w)m!==null&&(m=m.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),s=E.hasEagerState?E.eagerState:e(s,E.action);else{var T={lane:w,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};m===null?(p=m=T,f=s):m=m.next=T,Vs.lanes|=w,t_|=w}E=E.next}while(E!==null&&E!==u);m===null?f=s:m.next=p,Eh(s,t.memoizedState)||(ju=!0),t.memoizedState=s,t.baseState=f,t.baseQueue=m,i.lastRenderedState=s}if(e=i.interleaved,e!==null){c=e;do u=c.lane,Vs.lanes|=u,t_|=u,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function MM(e){var t=Jd(),i=t.queue;if(i===null)throw Error(ur(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var f=c=c.next;do u=e(u,f.action),f=f.next;while(f!==c);Eh(u,t.memoizedState)||(ju=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,s]}function Ece(){}function wce(e,t){var i=Vs,s=Jd(),c=t(),u=!Eh(s.memoizedState,c);if(u&&(s.memoizedState=c,ju=!0),s=s.queue,mV(Cce.bind(null,i,s,e),[e]),s.getSnapshot!==t||u||Oc!==null&&Oc.memoizedState.tag&1){if(i.flags|=2048,nT(9,bce.bind(null,i,s,c,t),void 0,null),Pc===null)throw Error(ur(349));e_&30||Sce(i,t,c)}return c}function Sce(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Vs.updateQueue,t===null?(t={lastEffect:null,stores:null},Vs.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function bce(e,t,i,s){t.value=i,t.getSnapshot=s,Tce(t)&&Rce(e)}function Cce(e,t,i){return i(function(){Tce(t)&&Rce(e)})}function Tce(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Eh(e,i)}catch{return!0}}function Rce(e){var t=cm(e,1);t!==null&&_h(t,e,1,-1)}function yee(e){var t=Fp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rT,lastRenderedState:e},t.queue=e,e=e.dispatch=jIe.bind(null,Vs,e),[t.memoizedState,e]}function nT(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Vs.updateQueue,t===null?(t={lastEffect:null,stores:null},Vs.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function Ice(){return Jd().memoizedState}function ON(e,t,i,s){var c=Fp();Vs.flags|=e,c.memoizedState=nT(1|t,i,void 0,s===void 0?null:s)}function VL(e,t,i,s){var c=Jd();s=s===void 0?null:s;var u=void 0;if(ac!==null){var f=ac.memoizedState;if(u=f.destroy,s!==null&&hV(s,f.deps)){c.memoizedState=nT(t,i,u,s);return}}Vs.flags|=e,c.memoizedState=nT(1|t,i,u,s)}function Eee(e,t){return ON(8390656,8,e,t)}function mV(e,t){return VL(2048,8,e,t)}function Oce(e,t){return VL(4,2,e,t)}function Nce(e,t){return VL(4,4,e,t)}function Bce(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lce(e,t,i){return i=i!=null?i.concat([e]):null,VL(4,4,Bce.bind(null,t,e),i)}function vV(){}function Pce(e,t){var i=Jd();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&hV(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function kce(e,t){var i=Jd();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&hV(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function Dce(e,t,i){return e_&21?(Eh(i,t)||(i=Vae(),Vs.lanes|=i,t_|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ju=!0),e.memoizedState=i)}function QIe(e,t){var i=yo;yo=i!==0&&4>i?i:4,e(!0);var s=xM.transition;xM.transition={};try{e(!1),t()}finally{yo=i,xM.transition=s}}function xce(){return Jd().memoizedState}function HIe(e,t,i){var s=Yv(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},Uce(e))Mce(t,i);else if(i=vce(e,t,i,s),i!==null){var c=ou();_h(i,e,s,c),Fce(i,t,s)}}function jIe(e,t,i){var s=Yv(e),c={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(Uce(e))Mce(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var f=t.lastRenderedState,p=u(f,i);if(c.hasEagerState=!0,c.eagerState=p,Eh(p,f)){var m=t.interleaved;m===null?(c.next=c,lV(t)):(c.next=m.next,m.next=c),t.interleaved=c;return}}catch{}finally{}i=vce(e,t,c,s),i!==null&&(c=ou(),_h(i,e,s,c),Fce(i,t,s))}}function Uce(e){var t=e.alternate;return e===Vs||t!==null&&t===Vs}function Mce(e,t){TC=OB=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Fce(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,q8(e,i)}}var NB={readContext:Xd,useCallback:Il,useContext:Il,useEffect:Il,useImperativeHandle:Il,useInsertionEffect:Il,useLayoutEffect:Il,useMemo:Il,useReducer:Il,useRef:Il,useState:Il,useDebugValue:Il,useDeferredValue:Il,useTransition:Il,useMutableSource:Il,useSyncExternalStore:Il,useId:Il,unstable_isNewReconciler:!1},KIe={readContext:Xd,useCallback:function(e,t){return Fp().memoizedState=[e,t===void 0?null:t],e},useContext:Xd,useEffect:Eee,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,ON(4194308,4,Bce.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ON(4194308,4,e,t)},useInsertionEffect:function(e,t){return ON(4,2,e,t)},useMemo:function(e,t){var i=Fp();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=Fp();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=HIe.bind(null,Vs,e),[s.memoizedState,e]},useRef:function(e){var t=Fp();return e={current:e},t.memoizedState=e},useState:yee,useDebugValue:vV,useDeferredValue:function(e){return Fp().memoizedState=e},useTransition:function(){var e=yee(!1),t=e[0];return e=QIe.bind(null,e[1]),Fp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Vs,c=Fp();if(vs){if(i===void 0)throw Error(ur(407));i=i()}else{if(i=t(),Pc===null)throw Error(ur(349));e_&30||Sce(s,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,Eee(Cce.bind(null,s,u,e),[e]),s.flags|=2048,nT(9,bce.bind(null,s,u,i,t),void 0,null),i},useId:function(){var e=Fp(),t=Pc.identifierPrefix;if(vs){var i=em,s=Zg;i=(s&~(1<<32-vh(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=tT++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=VIe++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},WIe={readContext:Xd,useCallback:Pce,useContext:Xd,useEffect:mV,useImperativeHandle:Lce,useInsertionEffect:Oce,useLayoutEffect:Nce,useMemo:kce,useReducer:UM,useRef:Ice,useState:function(){return UM(rT)},useDebugValue:vV,useDeferredValue:function(e){var t=Jd();return Dce(t,ac.memoizedState,e)},useTransition:function(){var e=UM(rT)[0],t=Jd().memoizedState;return[e,t]},useMutableSource:Ece,useSyncExternalStore:wce,useId:xce,unstable_isNewReconciler:!1},GIe={readContext:Xd,useCallback:Pce,useContext:Xd,useEffect:mV,useImperativeHandle:Lce,useInsertionEffect:Oce,useLayoutEffect:Nce,useMemo:kce,useReducer:MM,useRef:Ice,useState:function(){return MM(rT)},useDebugValue:vV,useDeferredValue:function(e){var t=Jd();return ac===null?t.memoizedState=e:Dce(t,ac.memoizedState,e)},useTransition:function(){var e=MM(rT)[0],t=Jd().memoizedState;return[e,t]},useMutableSource:Ece,useSyncExternalStore:wce,useId:xce,unstable_isNewReconciler:!1};function ch(e,t){if(e&&e.defaultProps){t=Qs({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function _F(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:Qs({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var QL={isMounted:function(e){return(e=e._reactInternals)?u_(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=ou(),c=Yv(e),u=tm(s,c);u.payload=t,i!=null&&(u.callback=i),t=zv(e,u,c),t!==null&&(_h(t,e,c,s),RN(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=ou(),c=Yv(e),u=tm(s,c);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=zv(e,u,c),t!==null&&(_h(t,e,c,s),RN(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ou(),s=Yv(e),c=tm(i,s);c.tag=2,t!=null&&(c.callback=t),t=zv(e,c,s),t!==null&&(_h(t,e,s,i),RN(t,e,s))}};function wee(e,t,i,s,c,u,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,f):t.prototype&&t.prototype.isPureReactComponent?!qC(i,s)||!qC(c,u):!0}function Vce(e,t,i){var s=!1,c=s0,u=t.contextType;return typeof u=="object"&&u!==null?u=Xd(u):(c=Wu(t)?J1:Hl.current,s=t.contextTypes,u=(s=s!=null)?lw(e,c):s0),t=new t(i,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=QL,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function See(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&QL.enqueueReplaceState(t,t.state,null)}function yF(e,t,i,s){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs={},uV(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Xd(u):(u=Wu(t)?J1:Hl.current,c.context=lw(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(_F(e,t,u,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&QL.enqueueReplaceState(c,c.state,null),RB(e,i,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function fw(e,t){try{var i="",s=t;do i+=yRe(s),s=s.return;while(s);var c=i}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function FM(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function EF(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var $Ie=typeof WeakMap=="function"?WeakMap:Map;function Qce(e,t,i){i=tm(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){LB||(LB=!0,BF=s),EF(e,t)},i}function Hce(e,t,i){i=tm(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;i.payload=function(){return s(c)},i.callback=function(){EF(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(i.callback=function(){EF(e,t),typeof s!="function"&&(qv===null?qv=new Set([this]):qv.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),i}function bee(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new $Ie;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(i)||(c.add(i),e=a2e.bind(null,e,t,i),t.then(e,e))}function Cee(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tee(e,t,i,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=tm(-1,1),t.tag=2,zv(i,t,1))),i.lanes|=1),e)}var zIe=gm.ReactCurrentOwner,ju=!1;function iu(e,t,i,s){t.child=e===null?mce(t,null,i,s):Aw(t,e.child,i,s)}function Ree(e,t,i,s,c){i=i.render;var u=t.ref;return XE(t,c),s=pV(e,t,i,s,u,c),i=gV(),e!==null&&!ju?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,lm(e,t,c)):(vs&&i&&nV(t),t.flags|=1,iu(e,t,s,c),t.child)}function Iee(e,t,i,s,c){if(e===null){var u=i.type;return typeof u=="function"&&!TV(u)&&u.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=u,jce(e,t,u,s,c)):(e=PN(i.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var f=u.memoizedProps;if(i=i.compare,i=i!==null?i:qC,i(f,s)&&e.ref===t.ref)return lm(e,t,c)}return t.flags|=1,e=Xv(u,s),e.ref=t.ref,e.return=t,t.child=e}function jce(e,t,i,s,c){if(e!==null){var u=e.memoizedProps;if(qC(u,s)&&e.ref===t.ref)if(ju=!1,t.pendingProps=s=u,(e.lanes&c)!==0)e.flags&131072&&(ju=!0);else return t.lanes=e.lanes,lm(e,t,c)}return wF(e,t,i,s,c)}function Kce(e,t,i){var s=t.pendingProps,c=s.children,u=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jo(HE,kA),kA|=i;else{if(!(i&1073741824))return e=u!==null?u.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jo(HE,kA),kA|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=u!==null?u.baseLanes:i,Jo(HE,kA),kA|=s}else u!==null?(s=u.baseLanes|i,t.memoizedState=null):s=i,Jo(HE,kA),kA|=s;return iu(e,t,c,i),t.child}function Wce(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function wF(e,t,i,s,c){var u=Wu(i)?J1:Hl.current;return u=lw(t,u),XE(t,c),i=pV(e,t,i,s,u,c),s=gV(),e!==null&&!ju?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,lm(e,t,c)):(vs&&s&&nV(t),t.flags|=1,iu(e,t,i,c),t.child)}function Oee(e,t,i,s,c){if(Wu(i)){var u=!0;wB(t)}else u=!1;if(XE(t,c),t.stateNode===null)NN(e,t),Vce(t,i,s),yF(t,i,s,c),s=!0;else if(e===null){var f=t.stateNode,p=t.memoizedProps;f.props=p;var m=f.context,E=i.contextType;typeof E=="object"&&E!==null?E=Xd(E):(E=Wu(i)?J1:Hl.current,E=lw(t,E));var w=i.getDerivedStateFromProps,T=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function";T||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==s||m!==E)&&See(t,f,s,E),Pv=!1;var N=t.memoizedState;f.state=N,RB(t,s,f,c),m=t.memoizedState,p!==s||N!==m||Ku.current||Pv?(typeof w=="function"&&(_F(t,i,w,s),m=t.memoizedState),(p=Pv||wee(t,i,p,s,N,m,E))?(T||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=m),f.props=s,f.state=m,f.context=E,s=p):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,_ce(e,t),p=t.memoizedProps,E=t.type===t.elementType?p:ch(t.type,p),f.props=E,T=t.pendingProps,N=f.context,m=i.contextType,typeof m=="object"&&m!==null?m=Xd(m):(m=Wu(i)?J1:Hl.current,m=lw(t,m));var O=i.getDerivedStateFromProps;(w=typeof O=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==T||N!==m)&&See(t,f,s,m),Pv=!1,N=t.memoizedState,f.state=N,RB(t,s,f,c);var P=t.memoizedState;p!==T||N!==P||Ku.current||Pv?(typeof O=="function"&&(_F(t,i,O,s),P=t.memoizedState),(E=Pv||wee(t,i,E,s,N,P,m)||!1)?(w||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,P,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,P,m)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=P),f.props=s,f.state=P,f.context=m,s=E):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),s=!1)}return SF(e,t,i,s,u,c)}function SF(e,t,i,s,c,u){Wce(e,t);var f=(t.flags&128)!==0;if(!s&&!f)return c&&hee(t,i,!1),lm(e,t,u);s=t.stateNode,zIe.current=t;var p=f&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&f?(t.child=Aw(t,e.child,null,u),t.child=Aw(t,null,p,u)):iu(e,t,p,u),t.memoizedState=s.state,c&&hee(t,i,!0),t.child}function Gce(e){var t=e.stateNode;t.pendingContext?fee(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fee(e,t.context,!1),AV(e,t.containerInfo)}function Nee(e,t,i,s,c){return uw(),oV(c),t.flags|=256,iu(e,t,i,s),t.child}var bF={dehydrated:null,treeContext:null,retryLane:0};function CF(e){return{baseLanes:e,cachePool:null,transitions:null}}function $ce(e,t,i){var s=t.pendingProps,c=Fs.current,u=!1,f=(t.flags&128)!==0,p;if((p=f)||(p=e!==null&&e.memoizedState===null?!1:(c&2)!==0),p?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Jo(Fs,c&1),e===null)return mF(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=s.children,e=s.fallback,u?(s=t.mode,u=t.child,f={mode:"hidden",children:f},!(s&1)&&u!==null?(u.childLanes=0,u.pendingProps=f):u=KL(f,s,0,null),e=W1(e,s,i,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=CF(i),t.memoizedState=bF,e):_V(t,f));if(c=e.memoizedState,c!==null&&(p=c.dehydrated,p!==null))return qIe(e,t,f,s,p,c,i);if(u){u=s.fallback,f=t.mode,c=e.child,p=c.sibling;var m={mode:"hidden",children:s.children};return!(f&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=m,t.deletions=null):(s=Xv(c,m),s.subtreeFlags=c.subtreeFlags&14680064),p!==null?u=Xv(p,u):(u=W1(u,f,i,null),u.flags|=2),u.return=t,s.return=t,s.sibling=u,t.child=s,s=u,u=t.child,f=e.child.memoizedState,f=f===null?CF(i):{baseLanes:f.baseLanes|i,cachePool:null,transitions:f.transitions},u.memoizedState=f,u.childLanes=e.childLanes&~i,t.memoizedState=bF,s}return u=e.child,e=u.sibling,s=Xv(u,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function _V(e,t){return t=KL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gO(e,t,i,s){return s!==null&&oV(s),Aw(t,e.child,null,i),e=_V(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qIe(e,t,i,s,c,u,f){if(i)return t.flags&256?(t.flags&=-257,s=FM(Error(ur(422))),gO(e,t,f,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=s.fallback,c=t.mode,s=KL({mode:"visible",children:s.children},c,0,null),u=W1(u,c,f,null),u.flags|=2,s.return=t,u.return=t,s.sibling=u,t.child=s,t.mode&1&&Aw(t,e.child,null,f),t.child.memoizedState=CF(f),t.memoizedState=bF,u);if(!(t.mode&1))return gO(e,t,f,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var p=s.dgst;return s=p,u=Error(ur(419)),s=FM(u,s,void 0),gO(e,t,f,s)}if(p=(f&e.childLanes)!==0,ju||p){if(s=Pc,s!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|f)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,cm(e,c),_h(s,e,c,-1))}return CV(),s=FM(Error(ur(421))),gO(e,t,f,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=c2e.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,UA=$v(c.nextSibling),VA=t,vs=!0,hh=null,e!==null&&(Fd[Vd++]=Zg,Fd[Vd++]=em,Fd[Vd++]=Z1,Zg=e.id,em=e.overflow,Z1=t),t=_V(t,s.children),t.flags|=4096,t)}function Bee(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),vF(e.return,t,i)}function VM(e,t,i,s,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=s,u.tail=i,u.tailMode=c)}function zce(e,t,i){var s=t.pendingProps,c=s.revealOrder,u=s.tail;if(iu(e,t,s.children,i),s=Fs.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bee(e,i,t);else if(e.tag===19)Bee(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Jo(Fs,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&IB(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),VM(t,!1,c,i,u);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&IB(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}VM(t,!0,i,null,u);break;case"together":VM(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function NN(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lm(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),t_|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ur(153));if(t.child!==null){for(e=t.child,i=Xv(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Xv(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function YIe(e,t,i){switch(t.tag){case 3:Gce(t),uw();break;case 5:yce(t);break;case 1:Wu(t.type)&&wB(t);break;case 4:AV(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;Jo(CB,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Jo(Fs,Fs.current&1),t.flags|=128,null):i&t.child.childLanes?$ce(e,t,i):(Jo(Fs,Fs.current&1),e=lm(e,t,i),e!==null?e.sibling:null);Jo(Fs,Fs.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return zce(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Jo(Fs,Fs.current),s)break;return null;case 22:case 23:return t.lanes=0,Kce(e,t,i)}return lm(e,t,i)}var qce,TF,Yce,Xce;qce=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};TF=function(){};Yce=function(e,t,i,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,F1($p.current);var u=null;switch(i){case"input":c=z3(e,c),s=z3(e,s),u=[];break;case"select":c=Qs({},c,{value:void 0}),s=Qs({},s,{value:void 0}),u=[];break;case"textarea":c=X3(e,c),s=X3(e,s),u=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=yB)}Z3(i,s);var f;i=null;for(E in c)if(!s.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var p=c[E];for(f in p)p.hasOwnProperty(f)&&(i||(i={}),i[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(HC.hasOwnProperty(E)?u||(u=[]):(u=u||[]).push(E,null));for(E in s){var m=s[E];if(p=c!=null?c[E]:void 0,s.hasOwnProperty(E)&&m!==p&&(m!=null||p!=null))if(E==="style")if(p){for(f in p)!p.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(i||(i={}),i[f]="");for(f in m)m.hasOwnProperty(f)&&p[f]!==m[f]&&(i||(i={}),i[f]=m[f])}else i||(u||(u=[]),u.push(E,i)),i=m;else E==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,p=p?p.__html:void 0,m!=null&&p!==m&&(u=u||[]).push(E,m)):E==="children"?typeof m!="string"&&typeof m!="number"||(u=u||[]).push(E,""+m):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(HC.hasOwnProperty(E)?(m!=null&&E==="onScroll"&&ss("scroll",e),u||p===m||(u=[])):(u=u||[]).push(E,m))}i&&(u=u||[]).push("style",i);var E=u;(t.updateQueue=E)&&(t.flags|=4)}};Xce=function(e,t,i,s){i!==s&&(t.flags|=4)};function Tb(e,t){if(!vs)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ol(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function XIe(e,t,i){var s=t.pendingProps;switch(iV(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ol(t),null;case 1:return Wu(t.type)&&EB(),Ol(t),null;case 3:return s=t.stateNode,dw(),cs(Ku),cs(Hl),fV(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(hO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hh!==null&&(kF(hh),hh=null))),TF(e,t),Ol(t),null;case 5:dV(t);var c=F1(eT.current);if(i=t.type,e!==null&&t.stateNode!=null)Yce(e,t,i,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(ur(166));return Ol(t),null}if(e=F1($p.current),hO(t)){s=t.stateNode,i=t.type;var u=t.memoizedProps;switch(s[jp]=t,s[JC]=u,e=(t.mode&1)!==0,i){case"dialog":ss("cancel",s),ss("close",s);break;case"iframe":case"object":case"embed":ss("load",s);break;case"video":case"audio":for(c=0;c<oC.length;c++)ss(oC[c],s);break;case"source":ss("error",s);break;case"img":case"image":case"link":ss("error",s),ss("load",s);break;case"details":ss("toggle",s);break;case"input":VZ(s,u),ss("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!u.multiple},ss("invalid",s);break;case"textarea":HZ(s,u),ss("invalid",s)}Z3(i,u),c=null;for(var f in u)if(u.hasOwnProperty(f)){var p=u[f];f==="children"?typeof p=="string"?s.textContent!==p&&(u.suppressHydrationWarning!==!0&&fO(s.textContent,p,e),c=["children",p]):typeof p=="number"&&s.textContent!==""+p&&(u.suppressHydrationWarning!==!0&&fO(s.textContent,p,e),c=["children",""+p]):HC.hasOwnProperty(f)&&p!=null&&f==="onScroll"&&ss("scroll",s)}switch(i){case"input":oO(s),QZ(s,u,!0);break;case"textarea":oO(s),jZ(s);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(s.onclick=yB)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cae(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(i,{is:s.is}):(e=f.createElement(i),i==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,i),e[jp]=t,e[JC]=s,qce(e,t,!1,!1),t.stateNode=e;e:{switch(f=eF(i,s),i){case"dialog":ss("cancel",e),ss("close",e),c=s;break;case"iframe":case"object":case"embed":ss("load",e),c=s;break;case"video":case"audio":for(c=0;c<oC.length;c++)ss(oC[c],e);c=s;break;case"source":ss("error",e),c=s;break;case"img":case"image":case"link":ss("error",e),ss("load",e),c=s;break;case"details":ss("toggle",e),c=s;break;case"input":VZ(e,s),c=z3(e,s),ss("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Qs({},s,{value:void 0}),ss("invalid",e);break;case"textarea":HZ(e,s),c=X3(e,s),ss("invalid",e);break;default:c=s}Z3(i,c),p=c;for(u in p)if(p.hasOwnProperty(u)){var m=p[u];u==="style"?Iae(e,m):u==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Tae(e,m)):u==="children"?typeof m=="string"?(i!=="textarea"||m!=="")&&jC(e,m):typeof m=="number"&&jC(e,""+m):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(HC.hasOwnProperty(u)?m!=null&&u==="onScroll"&&ss("scroll",e):m!=null&&j8(e,u,m,f))}switch(i){case"input":oO(e),QZ(e,s,!1);break;case"textarea":oO(e),jZ(e);break;case"option":s.value!=null&&e.setAttribute("value",""+o0(s.value));break;case"select":e.multiple=!!s.multiple,u=s.value,u!=null?$E(e,!!s.multiple,u,!1):s.defaultValue!=null&&$E(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=yB)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ol(t),null;case 6:if(e&&t.stateNode!=null)Xce(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ur(166));if(i=F1(eT.current),F1($p.current),hO(t)){if(s=t.stateNode,i=t.memoizedProps,s[jp]=t,(u=s.nodeValue!==i)&&(e=VA,e!==null))switch(e.tag){case 3:fO(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fO(s.nodeValue,i,(e.mode&1)!==0)}u&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[jp]=t,t.stateNode=s}return Ol(t),null;case 13:if(cs(Fs),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vs&&UA!==null&&t.mode&1&&!(t.flags&128))pce(),uw(),t.flags|=98560,u=!1;else if(u=hO(t),s!==null&&s.dehydrated!==null){if(e===null){if(!u)throw Error(ur(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(ur(317));u[jp]=t}else uw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ol(t),u=!1}else hh!==null&&(kF(hh),hh=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Fs.current&1?lc===0&&(lc=3):CV())),t.updateQueue!==null&&(t.flags|=4),Ol(t),null);case 4:return dw(),TF(e,t),e===null&&YC(t.stateNode.containerInfo),Ol(t),null;case 10:return cV(t.type._context),Ol(t),null;case 17:return Wu(t.type)&&EB(),Ol(t),null;case 19:if(cs(Fs),u=t.memoizedState,u===null)return Ol(t),null;if(s=(t.flags&128)!==0,f=u.rendering,f===null)if(s)Tb(u,!1);else{if(lc!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=IB(e),f!==null){for(t.flags|=128,Tb(u,!1),s=f.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)u=i,e=s,u.flags&=14680066,f=u.alternate,f===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=f.childLanes,u.lanes=f.lanes,u.child=f.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=f.memoizedProps,u.memoizedState=f.memoizedState,u.updateQueue=f.updateQueue,u.type=f.type,e=f.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Jo(Fs,Fs.current&1|2),t.child}e=e.sibling}u.tail!==null&&ba()>hw&&(t.flags|=128,s=!0,Tb(u,!1),t.lanes=4194304)}else{if(!s)if(e=IB(f),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Tb(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!vs)return Ol(t),null}else 2*ba()-u.renderingStartTime>hw&&i!==1073741824&&(t.flags|=128,s=!0,Tb(u,!1),t.lanes=4194304);u.isBackwards?(f.sibling=t.child,t.child=f):(i=u.last,i!==null?i.sibling=f:t.child=f,u.last=f)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=ba(),t.sibling=null,i=Fs.current,Jo(Fs,s?i&1|2:i&1),t):(Ol(t),null);case 22:case 23:return bV(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?kA&1073741824&&(Ol(t),t.subtreeFlags&6&&(t.flags|=8192)):Ol(t),null;case 24:return null;case 25:return null}throw Error(ur(156,t.tag))}function JIe(e,t){switch(iV(t),t.tag){case 1:return Wu(t.type)&&EB(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dw(),cs(Ku),cs(Hl),fV(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dV(t),null;case 13:if(cs(Fs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ur(340));uw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cs(Fs),null;case 4:return dw(),null;case 10:return cV(t.type._context),null;case 22:case 23:return bV(),null;case 24:return null;default:return null}}var mO=!1,Ul=!1,ZIe=typeof WeakSet=="function"?WeakSet:Set,$r=null;function QE(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){aa(e,t,s)}else i.current=null}function RF(e,t,i){try{i()}catch(s){aa(e,t,s)}}var Lee=!1;function e2e(e,t){if(uF=mB,e=rce(),rV(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var f=0,p=-1,m=-1,E=0,w=0,T=e,N=null;t:for(;;){for(var O;T!==i||c!==0&&T.nodeType!==3||(p=f+c),T!==u||s!==0&&T.nodeType!==3||(m=f+s),T.nodeType===3&&(f+=T.nodeValue.length),(O=T.firstChild)!==null;)N=T,T=O;for(;;){if(T===e)break t;if(N===i&&++E===c&&(p=f),N===u&&++w===s&&(m=f),(O=T.nextSibling)!==null)break;T=N,N=T.parentNode}T=O}i=p===-1||m===-1?null:{start:p,end:m}}else i=null}i=i||{start:0,end:0}}else i=null;for(AF={focusedElem:e,selectionRange:i},mB=!1,$r=t;$r!==null;)if(t=$r,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$r=e;else for(;$r!==null;){t=$r;try{var P=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var M=P.memoizedProps,Q=P.memoizedState,k=t.stateNode,D=k.getSnapshotBeforeUpdate(t.elementType===t.type?M:ch(t.type,M),Q);k.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ur(163))}}catch(K){aa(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,$r=e;break}$r=t.return}return P=Lee,Lee=!1,P}function RC(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&RF(t,i,u)}c=c.next}while(c!==s)}}function HL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function IF(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Jce(e){var t=e.alternate;t!==null&&(e.alternate=null,Jce(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jp],delete t[JC],delete t[hF],delete t[xIe],delete t[UIe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zce(e){return e.tag===5||e.tag===3||e.tag===4}function Pee(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zce(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function OF(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=yB));else if(s!==4&&(e=e.child,e!==null))for(OF(e,t,i),e=e.sibling;e!==null;)OF(e,t,i),e=e.sibling}function NF(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(NF(e,t,i),e=e.sibling;e!==null;)NF(e,t,i),e=e.sibling}var nl=null,dh=!1;function bv(e,t,i){for(i=i.child;i!==null;)ele(e,t,i),i=i.sibling}function ele(e,t,i){if(Gp&&typeof Gp.onCommitFiberUnmount=="function")try{Gp.onCommitFiberUnmount(kL,i)}catch{}switch(i.tag){case 5:Ul||QE(i,t);case 6:var s=nl,c=dh;nl=null,bv(e,t,i),nl=s,dh=c,nl!==null&&(dh?(e=nl,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):nl.removeChild(i.stateNode));break;case 18:nl!==null&&(dh?(e=nl,i=i.stateNode,e.nodeType===8?PM(e.parentNode,i):e.nodeType===1&&PM(e,i),$C(e)):PM(nl,i.stateNode));break;case 4:s=nl,c=dh,nl=i.stateNode.containerInfo,dh=!0,bv(e,t,i),nl=s,dh=c;break;case 0:case 11:case 14:case 15:if(!Ul&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var u=c,f=u.destroy;u=u.tag,f!==void 0&&(u&2||u&4)&&RF(i,t,f),c=c.next}while(c!==s)}bv(e,t,i);break;case 1:if(!Ul&&(QE(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(p){aa(i,t,p)}bv(e,t,i);break;case 21:bv(e,t,i);break;case 22:i.mode&1?(Ul=(s=Ul)||i.memoizedState!==null,bv(e,t,i),Ul=s):bv(e,t,i);break;default:bv(e,t,i)}}function kee(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new ZIe),t.forEach(function(s){var c=l2e.bind(null,e,s);i.has(s)||(i.add(s),s.then(c,c))})}}function nh(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s];try{var u=e,f=t,p=f;e:for(;p!==null;){switch(p.tag){case 5:nl=p.stateNode,dh=!1;break e;case 3:nl=p.stateNode.containerInfo,dh=!0;break e;case 4:nl=p.stateNode.containerInfo,dh=!0;break e}p=p.return}if(nl===null)throw Error(ur(160));ele(u,f,c),nl=null,dh=!1;var m=c.alternate;m!==null&&(m.return=null),c.return=null}catch(E){aa(c,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tle(t,e),t=t.sibling}function tle(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nh(t,e),Bp(e),s&4){try{RC(3,e,e.return),HL(3,e)}catch(M){aa(e,e.return,M)}try{RC(5,e,e.return)}catch(M){aa(e,e.return,M)}}break;case 1:nh(t,e),Bp(e),s&512&&i!==null&&QE(i,i.return);break;case 5:if(nh(t,e),Bp(e),s&512&&i!==null&&QE(i,i.return),e.flags&32){var c=e.stateNode;try{jC(c,"")}catch(M){aa(e,e.return,M)}}if(s&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,f=i!==null?i.memoizedProps:u,p=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{p==="input"&&u.type==="radio"&&u.name!=null&&Sae(c,u),eF(p,f);var E=eF(p,u);for(f=0;f<m.length;f+=2){var w=m[f],T=m[f+1];w==="style"?Iae(c,T):w==="dangerouslySetInnerHTML"?Tae(c,T):w==="children"?jC(c,T):j8(c,w,T,E)}switch(p){case"input":q3(c,u);break;case"textarea":bae(c,u);break;case"select":var N=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var O=u.value;O!=null?$E(c,!!u.multiple,O,!1):N!==!!u.multiple&&(u.defaultValue!=null?$E(c,!!u.multiple,u.defaultValue,!0):$E(c,!!u.multiple,u.multiple?[]:"",!1))}c[JC]=u}catch(M){aa(e,e.return,M)}}break;case 6:if(nh(t,e),Bp(e),s&4){if(e.stateNode===null)throw Error(ur(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(M){aa(e,e.return,M)}}break;case 3:if(nh(t,e),Bp(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{$C(t.containerInfo)}catch(M){aa(e,e.return,M)}break;case 4:nh(t,e),Bp(e);break;case 13:nh(t,e),Bp(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(wV=ba())),s&4&&kee(e);break;case 22:if(w=i!==null&&i.memoizedState!==null,e.mode&1?(Ul=(E=Ul)||w,nh(t,e),Ul=E):nh(t,e),Bp(e),s&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!w&&e.mode&1)for($r=e,w=e.child;w!==null;){for(T=$r=w;$r!==null;){switch(N=$r,O=N.child,N.tag){case 0:case 11:case 14:case 15:RC(4,N,N.return);break;case 1:QE(N,N.return);var P=N.stateNode;if(typeof P.componentWillUnmount=="function"){s=N,i=N.return;try{t=s,P.props=t.memoizedProps,P.state=t.memoizedState,P.componentWillUnmount()}catch(M){aa(s,i,M)}}break;case 5:QE(N,N.return);break;case 22:if(N.memoizedState!==null){xee(T);continue}}O!==null?(O.return=N,$r=O):xee(T)}w=w.sibling}e:for(w=null,T=e;;){if(T.tag===5){if(w===null){w=T;try{c=T.stateNode,E?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(p=T.stateNode,m=T.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,p.style.display=Rae("display",f))}catch(M){aa(e,e.return,M)}}}else if(T.tag===6){if(w===null)try{T.stateNode.nodeValue=E?"":T.memoizedProps}catch(M){aa(e,e.return,M)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===e)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===e)break e;for(;T.sibling===null;){if(T.return===null||T.return===e)break e;w===T&&(w=null),T=T.return}w===T&&(w=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:nh(t,e),Bp(e),s&4&&kee(e);break;case 21:break;default:nh(t,e),Bp(e)}}function Bp(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Zce(i)){var s=i;break e}i=i.return}throw Error(ur(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(jC(c,""),s.flags&=-33);var u=Pee(e);NF(e,u,c);break;case 3:case 4:var f=s.stateNode.containerInfo,p=Pee(e);OF(e,p,f);break;default:throw Error(ur(161))}}catch(m){aa(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function t2e(e,t,i){$r=e,rle(e)}function rle(e,t,i){for(var s=(e.mode&1)!==0;$r!==null;){var c=$r,u=c.child;if(c.tag===22&&s){var f=c.memoizedState!==null||mO;if(!f){var p=c.alternate,m=p!==null&&p.memoizedState!==null||Ul;p=mO;var E=Ul;if(mO=f,(Ul=m)&&!E)for($r=c;$r!==null;)f=$r,m=f.child,f.tag===22&&f.memoizedState!==null?Uee(c):m!==null?(m.return=f,$r=m):Uee(c);for(;u!==null;)$r=u,rle(u),u=u.sibling;$r=c,mO=p,Ul=E}Dee(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,$r=u):Dee(e)}}function Dee(e){for(;$r!==null;){var t=$r;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ul||HL(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ul)if(i===null)s.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:ch(t.type,i.memoizedProps);s.componentDidUpdate(c,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&_ee(t,u,s);break;case 3:var f=t.updateQueue;if(f!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}_ee(t,f,i)}break;case 5:var p=t.stateNode;if(i===null&&t.flags&4){i=p;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&i.focus();break;case"img":m.src&&(i.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var w=E.memoizedState;if(w!==null){var T=w.dehydrated;T!==null&&$C(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ur(163))}Ul||t.flags&512&&IF(t)}catch(N){aa(t,t.return,N)}}if(t===e){$r=null;break}if(i=t.sibling,i!==null){i.return=t.return,$r=i;break}$r=t.return}}function xee(e){for(;$r!==null;){var t=$r;if(t===e){$r=null;break}var i=t.sibling;if(i!==null){i.return=t.return,$r=i;break}$r=t.return}}function Uee(e){for(;$r!==null;){var t=$r;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{HL(4,t)}catch(m){aa(t,i,m)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(m){aa(t,c,m)}}var u=t.return;try{IF(t)}catch(m){aa(t,u,m)}break;case 5:var f=t.return;try{IF(t)}catch(m){aa(t,f,m)}}}catch(m){aa(t,t.return,m)}if(t===e){$r=null;break}var p=t.sibling;if(p!==null){p.return=t.return,$r=p;break}$r=t.return}}var r2e=Math.ceil,BB=gm.ReactCurrentDispatcher,yV=gm.ReactCurrentOwner,zd=gm.ReactCurrentBatchConfig,Gi=0,Pc=null,ja=null,al=0,kA=0,HE=p0(0),lc=0,iT=null,t_=0,jL=0,EV=0,IC=null,Qu=null,wV=0,hw=1/0,Xg=null,LB=!1,BF=null,qv=null,vO=!1,Mv=null,PB=0,OC=0,LF=null,BN=-1,LN=0;function ou(){return Gi&6?ba():BN!==-1?BN:BN=ba()}function Yv(e){return e.mode&1?Gi&2&&al!==0?al&-al:FIe.transition!==null?(LN===0&&(LN=Vae()),LN):(e=yo,e!==0||(e=window.event,e=e===void 0?16:$ae(e.type)),e):1}function _h(e,t,i,s){if(50<OC)throw OC=0,LF=null,Error(ur(185));NT(e,i,s),(!(Gi&2)||e!==Pc)&&(e===Pc&&(!(Gi&2)&&(jL|=i),lc===4&&xv(e,al)),Gu(e,s),i===1&&Gi===0&&!(t.mode&1)&&(hw=ba()+500,FL&&g0()))}function Gu(e,t){var i=e.callbackNode;FRe(e,t);var s=gB(e,e===Pc?al:0);if(s===0)i!==null&&GZ(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&GZ(i),t===1)e.tag===0?MIe(Mee.bind(null,e)):dce(Mee.bind(null,e)),kIe(function(){!(Gi&6)&&g0()}),i=null;else{switch(Qae(s)){case 1:i=z8;break;case 4:i=Mae;break;case 16:i=pB;break;case 536870912:i=Fae;break;default:i=pB}i=ule(i,nle.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function nle(e,t){if(BN=-1,LN=0,Gi&6)throw Error(ur(327));var i=e.callbackNode;if(JE()&&e.callbackNode!==i)return null;var s=gB(e,e===Pc?al:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=kB(e,s);else{t=s;var c=Gi;Gi|=2;var u=ole();(Pc!==e||al!==t)&&(Xg=null,hw=ba()+500,K1(e,t));do try{o2e();break}catch(p){ile(e,p)}while(1);aV(),BB.current=u,Gi=c,ja!==null?t=0:(Pc=null,al=0,t=lc)}if(t!==0){if(t===2&&(c=oF(e),c!==0&&(s=c,t=PF(e,c))),t===1)throw i=iT,K1(e,0),xv(e,s),Gu(e,ba()),i;if(t===6)xv(e,s);else{if(c=e.current.alternate,!(s&30)&&!n2e(c)&&(t=kB(e,s),t===2&&(u=oF(e),u!==0&&(s=u,t=PF(e,u))),t===1))throw i=iT,K1(e,0),xv(e,s),Gu(e,ba()),i;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(ur(345));case 2:I1(e,Qu,Xg);break;case 3:if(xv(e,s),(s&130023424)===s&&(t=wV+500-ba(),10<t)){if(gB(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){ou(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=fF(I1.bind(null,e,Qu,Xg),t);break}I1(e,Qu,Xg);break;case 4:if(xv(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var f=31-vh(s);u=1<<f,f=t[f],f>c&&(c=f),s&=~u}if(s=c,s=ba()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*r2e(s/1960))-s,10<s){e.timeoutHandle=fF(I1.bind(null,e,Qu,Xg),s);break}I1(e,Qu,Xg);break;case 5:I1(e,Qu,Xg);break;default:throw Error(ur(329))}}}return Gu(e,ba()),e.callbackNode===i?nle.bind(null,e):null}function PF(e,t){var i=IC;return e.current.memoizedState.isDehydrated&&(K1(e,t).flags|=256),e=kB(e,t),e!==2&&(t=Qu,Qu=i,t!==null&&kF(t)),e}function kF(e){Qu===null?Qu=e:Qu.push.apply(Qu,e)}function n2e(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var c=i[s],u=c.getSnapshot;c=c.value;try{if(!Eh(u(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xv(e,t){for(t&=~EV,t&=~jL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-vh(t),s=1<<i;e[i]=-1,t&=~s}}function Mee(e){if(Gi&6)throw Error(ur(327));JE();var t=gB(e,0);if(!(t&1))return Gu(e,ba()),null;var i=kB(e,t);if(e.tag!==0&&i===2){var s=oF(e);s!==0&&(t=s,i=PF(e,s))}if(i===1)throw i=iT,K1(e,0),xv(e,t),Gu(e,ba()),i;if(i===6)throw Error(ur(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,I1(e,Qu,Xg),Gu(e,ba()),null}function SV(e,t){var i=Gi;Gi|=1;try{return e(t)}finally{Gi=i,Gi===0&&(hw=ba()+500,FL&&g0())}}function r_(e){Mv!==null&&Mv.tag===0&&!(Gi&6)&&JE();var t=Gi;Gi|=1;var i=zd.transition,s=yo;try{if(zd.transition=null,yo=1,e)return e()}finally{yo=s,zd.transition=i,Gi=t,!(Gi&6)&&g0()}}function bV(){kA=HE.current,cs(HE)}function K1(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,PIe(i)),ja!==null)for(i=ja.return;i!==null;){var s=i;switch(iV(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&EB();break;case 3:dw(),cs(Ku),cs(Hl),fV();break;case 5:dV(s);break;case 4:dw();break;case 13:cs(Fs);break;case 19:cs(Fs);break;case 10:cV(s.type._context);break;case 22:case 23:bV()}i=i.return}if(Pc=e,ja=e=Xv(e.current,null),al=kA=t,lc=0,iT=null,EV=jL=t_=0,Qu=IC=null,M1!==null){for(t=0;t<M1.length;t++)if(i=M1[t],s=i.interleaved,s!==null){i.interleaved=null;var c=s.next,u=i.pending;if(u!==null){var f=u.next;u.next=c,s.next=f}i.pending=s}M1=null}return e}function ile(e,t){do{var i=ja;try{if(aV(),IN.current=NB,OB){for(var s=Vs.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}OB=!1}if(e_=0,Oc=ac=Vs=null,TC=!1,tT=0,yV.current=null,i===null||i.return===null){lc=1,iT=t,ja=null;break}e:{var u=e,f=i.return,p=i,m=t;if(t=al,p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var E=m,w=p,T=w.tag;if(!(w.mode&1)&&(T===0||T===11||T===15)){var N=w.alternate;N?(w.updateQueue=N.updateQueue,w.memoizedState=N.memoizedState,w.lanes=N.lanes):(w.updateQueue=null,w.memoizedState=null)}var O=Cee(f);if(O!==null){O.flags&=-257,Tee(O,f,p,u,t),O.mode&1&&bee(u,E,t),t=O,m=E;var P=t.updateQueue;if(P===null){var M=new Set;M.add(m),t.updateQueue=M}else P.add(m);break e}else{if(!(t&1)){bee(u,E,t),CV();break e}m=Error(ur(426))}}else if(vs&&p.mode&1){var Q=Cee(f);if(Q!==null){!(Q.flags&65536)&&(Q.flags|=256),Tee(Q,f,p,u,t),oV(fw(m,p));break e}}u=m=fw(m,p),lc!==4&&(lc=2),IC===null?IC=[u]:IC.push(u),u=f;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var k=Qce(u,m,t);vee(u,k);break e;case 1:p=m;var D=u.type,V=u.stateNode;if(!(u.flags&128)&&(typeof D.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(qv===null||!qv.has(V)))){u.flags|=65536,t&=-t,u.lanes|=t;var K=Hce(u,p,t);vee(u,K);break e}}u=u.return}while(u!==null)}ale(i)}catch(J){t=J,ja===i&&i!==null&&(ja=i=i.return);continue}break}while(1)}function ole(){var e=BB.current;return BB.current=NB,e===null?NB:e}function CV(){(lc===0||lc===3||lc===2)&&(lc=4),Pc===null||!(t_&268435455)&&!(jL&268435455)||xv(Pc,al)}function kB(e,t){var i=Gi;Gi|=2;var s=ole();(Pc!==e||al!==t)&&(Xg=null,K1(e,t));do try{i2e();break}catch(c){ile(e,c)}while(1);if(aV(),Gi=i,BB.current=s,ja!==null)throw Error(ur(261));return Pc=null,al=0,lc}function i2e(){for(;ja!==null;)sle(ja)}function o2e(){for(;ja!==null&&!NRe();)sle(ja)}function sle(e){var t=lle(e.alternate,e,kA);e.memoizedProps=e.pendingProps,t===null?ale(e):ja=t,yV.current=null}function ale(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=JIe(i,t),i!==null){i.flags&=32767,ja=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lc=6,ja=null;return}}else if(i=XIe(i,t,kA),i!==null){ja=i;return}if(t=t.sibling,t!==null){ja=t;return}ja=t=e}while(t!==null);lc===0&&(lc=5)}function I1(e,t,i){var s=yo,c=zd.transition;try{zd.transition=null,yo=1,s2e(e,t,i,s)}finally{zd.transition=c,yo=s}return null}function s2e(e,t,i,s){do JE();while(Mv!==null);if(Gi&6)throw Error(ur(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(ur(177));e.callbackNode=null,e.callbackPriority=0;var u=i.lanes|i.childLanes;if(VRe(e,u),e===Pc&&(ja=Pc=null,al=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vO||(vO=!0,ule(pB,function(){return JE(),null})),u=(i.flags&15990)!==0,i.subtreeFlags&15990||u){u=zd.transition,zd.transition=null;var f=yo;yo=1;var p=Gi;Gi|=4,yV.current=null,e2e(e,i),tle(i,e),TIe(AF),mB=!!uF,AF=uF=null,e.current=i,t2e(i),BRe(),Gi=p,yo=f,zd.transition=u}else e.current=i;if(vO&&(vO=!1,Mv=e,PB=c),u=e.pendingLanes,u===0&&(qv=null),kRe(i.stateNode),Gu(e,ba()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],s(c.value,{componentStack:c.stack,digest:c.digest});if(LB)throw LB=!1,e=BF,BF=null,e;return PB&1&&e.tag!==0&&JE(),u=e.pendingLanes,u&1?e===LF?OC++:(OC=0,LF=e):OC=0,g0(),null}function JE(){if(Mv!==null){var e=Qae(PB),t=zd.transition,i=yo;try{if(zd.transition=null,yo=16>e?16:e,Mv===null)var s=!1;else{if(e=Mv,Mv=null,PB=0,Gi&6)throw Error(ur(331));var c=Gi;for(Gi|=4,$r=e.current;$r!==null;){var u=$r,f=u.child;if($r.flags&16){var p=u.deletions;if(p!==null){for(var m=0;m<p.length;m++){var E=p[m];for($r=E;$r!==null;){var w=$r;switch(w.tag){case 0:case 11:case 15:RC(8,w,u)}var T=w.child;if(T!==null)T.return=w,$r=T;else for(;$r!==null;){w=$r;var N=w.sibling,O=w.return;if(Jce(w),w===E){$r=null;break}if(N!==null){N.return=O,$r=N;break}$r=O}}}var P=u.alternate;if(P!==null){var M=P.child;if(M!==null){P.child=null;do{var Q=M.sibling;M.sibling=null,M=Q}while(M!==null)}}$r=u}}if(u.subtreeFlags&2064&&f!==null)f.return=u,$r=f;else e:for(;$r!==null;){if(u=$r,u.flags&2048)switch(u.tag){case 0:case 11:case 15:RC(9,u,u.return)}var k=u.sibling;if(k!==null){k.return=u.return,$r=k;break e}$r=u.return}}var D=e.current;for($r=D;$r!==null;){f=$r;var V=f.child;if(f.subtreeFlags&2064&&V!==null)V.return=f,$r=V;else e:for(f=D;$r!==null;){if(p=$r,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:HL(9,p)}}catch(J){aa(p,p.return,J)}if(p===f){$r=null;break e}var K=p.sibling;if(K!==null){K.return=p.return,$r=K;break e}$r=p.return}}if(Gi=c,g0(),Gp&&typeof Gp.onPostCommitFiberRoot=="function")try{Gp.onPostCommitFiberRoot(kL,e)}catch{}s=!0}return s}finally{yo=i,zd.transition=t}}return!1}function Fee(e,t,i){t=fw(i,t),t=Qce(e,t,1),e=zv(e,t,1),t=ou(),e!==null&&(NT(e,1,t),Gu(e,t))}function aa(e,t,i){if(e.tag===3)Fee(e,e,i);else for(;t!==null;){if(t.tag===3){Fee(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qv===null||!qv.has(s))){e=fw(i,e),e=Hce(t,e,1),t=zv(t,e,1),e=ou(),t!==null&&(NT(t,1,e),Gu(t,e));break}}t=t.return}}function a2e(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=ou(),e.pingedLanes|=e.suspendedLanes&i,Pc===e&&(al&i)===i&&(lc===4||lc===3&&(al&130023424)===al&&500>ba()-wV?K1(e,0):EV|=i),Gu(e,t)}function cle(e,t){t===0&&(e.mode&1?(t=cO,cO<<=1,!(cO&130023424)&&(cO=4194304)):t=1);var i=ou();e=cm(e,t),e!==null&&(NT(e,t,i),Gu(e,i))}function c2e(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),cle(e,i)}function l2e(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(ur(314))}s!==null&&s.delete(t),cle(e,i)}var lle;lle=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ku.current)ju=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return ju=!1,YIe(e,t,i);ju=!!(e.flags&131072)}else ju=!1,vs&&t.flags&1048576&&fce(t,bB,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;NN(e,t),e=t.pendingProps;var c=lw(t,Hl.current);XE(t,i),c=pV(null,t,s,e,c,i);var u=gV();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wu(s)?(u=!0,wB(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,uV(t),c.updater=QL,t.stateNode=c,c._reactInternals=t,yF(t,s,e,i),t=SF(null,t,s,!0,u,i)):(t.tag=0,vs&&u&&nV(t),iu(null,t,c,i),t=t.child),t;case 16:s=t.elementType;e:{switch(NN(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=A2e(s),e=ch(s,e),c){case 0:t=wF(null,t,s,e,i);break e;case 1:t=Oee(null,t,s,e,i);break e;case 11:t=Ree(null,t,s,e,i);break e;case 14:t=Iee(null,t,s,ch(s.type,e),i);break e}throw Error(ur(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ch(s,c),wF(e,t,s,c,i);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ch(s,c),Oee(e,t,s,c,i);case 3:e:{if(Gce(t),e===null)throw Error(ur(387));s=t.pendingProps,u=t.memoizedState,c=u.element,_ce(e,t),RB(t,s,null,i);var f=t.memoizedState;if(s=f.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=fw(Error(ur(423)),t),t=Nee(e,t,s,i,c);break e}else if(s!==c){c=fw(Error(ur(424)),t),t=Nee(e,t,s,i,c);break e}else for(UA=$v(t.stateNode.containerInfo.firstChild),VA=t,vs=!0,hh=null,i=mce(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(uw(),s===c){t=lm(e,t,i);break e}iu(e,t,s,i)}t=t.child}return t;case 5:return yce(t),e===null&&mF(t),s=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,f=c.children,dF(s,c)?f=null:u!==null&&dF(s,u)&&(t.flags|=32),Wce(e,t),iu(e,t,f,i),t.child;case 6:return e===null&&mF(t),null;case 13:return $ce(e,t,i);case 4:return AV(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Aw(t,null,s,i):iu(e,t,s,i),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ch(s,c),Ree(e,t,s,c,i);case 7:return iu(e,t,t.pendingProps,i),t.child;case 8:return iu(e,t,t.pendingProps.children,i),t.child;case 12:return iu(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,u=t.memoizedProps,f=c.value,Jo(CB,s._currentValue),s._currentValue=f,u!==null)if(Eh(u.value,f)){if(u.children===c.children&&!Ku.current){t=lm(e,t,i);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var p=u.dependencies;if(p!==null){f=u.child;for(var m=p.firstContext;m!==null;){if(m.context===s){if(u.tag===1){m=tm(-1,i&-i),m.tag=2;var E=u.updateQueue;if(E!==null){E=E.shared;var w=E.pending;w===null?m.next=m:(m.next=w.next,w.next=m),E.pending=m}}u.lanes|=i,m=u.alternate,m!==null&&(m.lanes|=i),vF(u.return,i,t),p.lanes|=i;break}m=m.next}}else if(u.tag===10)f=u.type===t.type?null:u.child;else if(u.tag===18){if(f=u.return,f===null)throw Error(ur(341));f.lanes|=i,p=f.alternate,p!==null&&(p.lanes|=i),vF(f,i,t),f=u.sibling}else f=u.child;if(f!==null)f.return=u;else for(f=u;f!==null;){if(f===t){f=null;break}if(u=f.sibling,u!==null){u.return=f.return,f=u;break}f=f.return}u=f}iu(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,XE(t,i),c=Xd(c),s=s(c),t.flags|=1,iu(e,t,s,i),t.child;case 14:return s=t.type,c=ch(s,t.pendingProps),c=ch(s.type,c),Iee(e,t,s,c,i);case 15:return jce(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ch(s,c),NN(e,t),t.tag=1,Wu(s)?(e=!0,wB(t)):e=!1,XE(t,i),Vce(t,s,c),yF(t,s,c,i),SF(null,t,s,!0,e,i);case 19:return zce(e,t,i);case 22:return Kce(e,t,i)}throw Error(ur(156,t.tag))};function ule(e,t){return Uae(e,t)}function u2e(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wd(e,t,i,s){return new u2e(e,t,i,s)}function TV(e){return e=e.prototype,!(!e||!e.isReactComponent)}function A2e(e){if(typeof e=="function")return TV(e)?1:0;if(e!=null){if(e=e.$$typeof,e===W8)return 11;if(e===G8)return 14}return 2}function Xv(e,t){var i=e.alternate;return i===null?(i=Wd(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function PN(e,t,i,s,c,u){var f=2;if(s=e,typeof e=="function")TV(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case LE:return W1(i.children,c,u,t);case K8:f=8,c|=8;break;case K3:return e=Wd(12,i,t,c|2),e.elementType=K3,e.lanes=u,e;case W3:return e=Wd(13,i,t,c),e.elementType=W3,e.lanes=u,e;case G3:return e=Wd(19,i,t,c),e.elementType=G3,e.lanes=u,e;case yae:return KL(i,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vae:f=10;break e;case _ae:f=9;break e;case W8:f=11;break e;case G8:f=14;break e;case Lv:f=16,s=null;break e}throw Error(ur(130,e==null?e:typeof e,""))}return t=Wd(f,i,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function W1(e,t,i,s){return e=Wd(7,e,s,t),e.lanes=i,e}function KL(e,t,i,s){return e=Wd(22,e,s,t),e.elementType=yae,e.lanes=i,e.stateNode={isHidden:!1},e}function QM(e,t,i){return e=Wd(6,e,null,t),e.lanes=i,e}function HM(e,t,i){return t=Wd(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function d2e(e,t,i,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wM(0),this.expirationTimes=wM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wM(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function RV(e,t,i,s,c,u,f,p,m){return e=new d2e(e,t,i,p,m),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Wd(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},uV(u),e}function f2e(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:BE,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function Ale(e){if(!e)return s0;e=e._reactInternals;e:{if(u_(e)!==e||e.tag!==1)throw Error(ur(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ur(171))}if(e.tag===1){var i=e.type;if(Wu(i))return Ace(e,i,t)}return t}function dle(e,t,i,s,c,u,f,p,m){return e=RV(i,s,!0,e,c,u,f,p,m),e.context=Ale(null),i=e.current,s=ou(),c=Yv(i),u=tm(s,c),u.callback=t??null,zv(i,u,c),e.current.lanes=c,NT(e,c,s),Gu(e,s),e}function WL(e,t,i,s){var c=t.current,u=ou(),f=Yv(c);return i=Ale(i),t.context===null?t.context=i:t.pendingContext=i,t=tm(u,f),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=zv(c,t,f),e!==null&&(_h(e,c,f,u),RN(e,c,f)),f}function DB(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vee(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function IV(e,t){Vee(e,t),(e=e.alternate)&&Vee(e,t)}function h2e(){return null}var fle=typeof reportError=="function"?reportError:function(e){console.error(e)};function OV(e){this._internalRoot=e}GL.prototype.render=OV.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ur(409));WL(e,t,null,null)};GL.prototype.unmount=OV.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;r_(function(){WL(null,e,null,null)}),t[am]=null}};function GL(e){this._internalRoot=e}GL.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kae();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Dv.length&&t!==0&&t<Dv[i].priority;i++);Dv.splice(i,0,e),i===0&&Gae(e)}};function NV(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $L(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qee(){}function p2e(e,t,i,s,c){if(c){if(typeof s=="function"){var u=s;s=function(){var E=DB(f);u.call(E)}}var f=dle(t,s,e,0,null,!1,!1,"",Qee);return e._reactRootContainer=f,e[am]=f.current,YC(e.nodeType===8?e.parentNode:e),r_(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var p=s;s=function(){var E=DB(m);p.call(E)}}var m=RV(e,0,!1,null,null,!1,!1,"",Qee);return e._reactRootContainer=m,e[am]=m.current,YC(e.nodeType===8?e.parentNode:e),r_(function(){WL(t,m,i,s)}),m}function zL(e,t,i,s,c){var u=i._reactRootContainer;if(u){var f=u;if(typeof c=="function"){var p=c;c=function(){var m=DB(f);p.call(m)}}WL(t,f,e,c)}else f=p2e(i,t,e,c,s);return DB(f)}Hae=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=iC(t.pendingLanes);i!==0&&(q8(t,i|1),Gu(t,ba()),!(Gi&6)&&(hw=ba()+500,g0()))}break;case 13:r_(function(){var s=cm(e,1);if(s!==null){var c=ou();_h(s,e,1,c)}}),IV(e,1)}};Y8=function(e){if(e.tag===13){var t=cm(e,134217728);if(t!==null){var i=ou();_h(t,e,134217728,i)}IV(e,134217728)}};jae=function(e){if(e.tag===13){var t=Yv(e),i=cm(e,t);if(i!==null){var s=ou();_h(i,e,t,s)}IV(e,t)}};Kae=function(){return yo};Wae=function(e,t){var i=yo;try{return yo=e,t()}finally{yo=i}};rF=function(e,t,i){switch(t){case"input":if(q3(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var c=ML(s);if(!c)throw Error(ur(90));wae(s),q3(s,c)}}}break;case"textarea":bae(e,i);break;case"select":t=i.value,t!=null&&$E(e,!!i.multiple,t,!1)}};Bae=SV;Lae=r_;var g2e={usingClientEntryPoint:!1,Events:[LT,xE,ML,Oae,Nae,SV]},Rb={findFiberByHostInstance:U1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m2e={bundleType:Rb.bundleType,version:Rb.version,rendererPackageName:Rb.rendererPackageName,rendererConfig:Rb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dae(e),e===null?null:e.stateNode},findFiberByHostInstance:Rb.findFiberByHostInstance||h2e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _O=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_O.isDisabled&&_O.supportsFiber)try{kL=_O.inject(m2e),Gp=_O}catch{}}GA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g2e;GA.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NV(t))throw Error(ur(200));return f2e(e,t,null,i)};GA.createRoot=function(e,t){if(!NV(e))throw Error(ur(299));var i=!1,s="",c=fle;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=RV(e,1,!1,null,null,i,!1,s,c),e[am]=t.current,YC(e.nodeType===8?e.parentNode:e),new OV(t)};GA.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ur(188)):(e=Object.keys(e).join(","),Error(ur(268,e)));return e=Dae(t),e=e===null?null:e.stateNode,e};GA.flushSync=function(e){return r_(e)};GA.hydrate=function(e,t,i){if(!$L(t))throw Error(ur(200));return zL(null,e,t,!0,i)};GA.hydrateRoot=function(e,t,i){if(!NV(e))throw Error(ur(405));var s=i!=null&&i.hydratedSources||null,c=!1,u="",f=fle;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),t=dle(t,null,e,1,i??null,c,!1,u,f),e[am]=t.current,YC(e),s)for(e=0;e<s.length;e++)i=s[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new GL(t)};GA.render=function(e,t,i){if(!$L(t))throw Error(ur(200));return zL(null,e,t,!1,i)};GA.unmountComponentAtNode=function(e){if(!$L(e))throw Error(ur(40));return e._reactRootContainer?(r_(function(){zL(null,null,e,!1,function(){e._reactRootContainer=null,e[am]=null})}),!0):!1};GA.unstable_batchedUpdates=SV;GA.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!$L(i))throw Error(ur(200));if(e==null||e._reactInternals===void 0)throw Error(ur(38));return zL(e,t,i,!1,s)};GA.version="18.3.1-next-f1338f8080-20240426";function hle(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hle)}catch(e){console.error(e)}}hle(),hae.exports=GA;var BV=hae.exports;const yO=$i(BV);var Hee=BV;H3.createRoot=Hee.createRoot,H3.hydrateRoot=Hee.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oT(){return oT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},oT.apply(this,arguments)}var Fv;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fv||(Fv={}));const jee="popstate";function v2e(e){e===void 0&&(e={});function t(s,c){let{pathname:u,search:f,hash:p}=s.location;return DF("",{pathname:u,search:f,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(s,c){return typeof c=="string"?c:xB(c)}return y2e(t,i,null,e)}function Wa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ple(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _2e(){return Math.random().toString(36).substr(2,8)}function Kee(e,t){return{usr:e.state,key:e.key,idx:t}}function DF(e,t,i,s){return i===void 0&&(i=null),oT({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ow(t):t,{state:i,key:t&&t.key||s||_2e()})}function xB(e){let{pathname:t="/",search:i="",hash:s=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Ow(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function y2e(e,t,i,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:u=!1}=s,f=c.history,p=Fv.Pop,m=null,E=w();E==null&&(E=0,f.replaceState(oT({},f.state,{idx:E}),""));function w(){return(f.state||{idx:null}).idx}function T(){p=Fv.Pop;let Q=w(),k=Q==null?null:Q-E;E=Q,m&&m({action:p,location:M.location,delta:k})}function N(Q,k){p=Fv.Push;let D=DF(M.location,Q,k);i&&i(D,Q),E=w()+1;let V=Kee(D,E),K=M.createHref(D);try{f.pushState(V,"",K)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;c.location.assign(K)}u&&m&&m({action:p,location:M.location,delta:1})}function O(Q,k){p=Fv.Replace;let D=DF(M.location,Q,k);i&&i(D,Q),E=w();let V=Kee(D,E),K=M.createHref(D);f.replaceState(V,"",K),u&&m&&m({action:p,location:M.location,delta:0})}function P(Q){let k=c.location.origin!=="null"?c.location.origin:c.location.href,D=typeof Q=="string"?Q:xB(Q);return D=D.replace(/ $/,"%20"),Wa(k,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,k)}let M={get action(){return p},get location(){return e(c,f)},listen(Q){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(jee,T),m=Q,()=>{c.removeEventListener(jee,T),m=null}},createHref(Q){return t(c,Q)},createURL:P,encodeLocation(Q){let k=P(Q);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:N,replace:O,go(Q){return f.go(Q)}};return M}var Wee;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wee||(Wee={}));function E2e(e,t,i){return i===void 0&&(i="/"),w2e(e,t,i,!1)}function w2e(e,t,i,s){let c=typeof t=="string"?Ow(t):t,u=LV(c.pathname||"/",i);if(u==null)return null;let f=gle(e);S2e(f);let p=null;for(let m=0;p==null&&m<f.length;++m){let E=k2e(u);p=L2e(f[m],E,s)}return p}function gle(e,t,i,s){t===void 0&&(t=[]),i===void 0&&(i=[]),s===void 0&&(s="");let c=(u,f,p)=>{let m={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};m.relativePath.startsWith("/")&&(Wa(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let E=Jv([s,m.relativePath]),w=i.concat(m);u.children&&u.children.length>0&&(Wa(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),gle(u.children,t,w,E)),!(u.path==null&&!u.index)&&t.push({path:E,score:N2e(E,u.index),routesMeta:w})};return e.forEach((u,f)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))c(u,f);else for(let m of mle(u.path))c(u,f,m)}),t}function mle(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(s.length===0)return c?[u,""]:[u];let f=mle(s.join("/")),p=[];return p.push(...f.map(m=>m===""?u:[u,m].join("/"))),c&&p.push(...f),p.map(m=>e.startsWith("/")&&m===""?"/":m)}function S2e(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:B2e(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}const b2e=/^:[\w-]+$/,C2e=3,T2e=2,R2e=1,I2e=10,O2e=-2,Gee=e=>e==="*";function N2e(e,t){let i=e.split("/"),s=i.length;return i.some(Gee)&&(s+=O2e),t&&(s+=T2e),i.filter(c=>!Gee(c)).reduce((c,u)=>c+(b2e.test(u)?C2e:u===""?R2e:I2e),s)}function B2e(e,t){return e.length===t.length&&e.slice(0,-1).every((s,c)=>s===t[c])?e[e.length-1]-t[t.length-1]:0}function L2e(e,t,i){i===void 0&&(i=!1);let{routesMeta:s}=e,c={},u="/",f=[];for(let p=0;p<s.length;++p){let m=s[p],E=p===s.length-1,w=u==="/"?t:t.slice(u.length)||"/",T=$ee({path:m.relativePath,caseSensitive:m.caseSensitive,end:E},w),N=m.route;if(!T&&E&&i&&!s[s.length-1].route.index&&(T=$ee({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},w)),!T)return null;Object.assign(c,T.params),f.push({params:c,pathname:Jv([u,T.pathname]),pathnameBase:M2e(Jv([u,T.pathnameBase])),route:N}),T.pathnameBase!=="/"&&(u=Jv([u,T.pathnameBase]))}return f}function $ee(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=P2e(e.path,e.caseSensitive,e.end),c=t.match(i);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:s.reduce((E,w,T)=>{let{paramName:N,isOptional:O}=w;if(N==="*"){let M=p[T]||"";f=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const P=p[T];return O&&!P?E[N]=void 0:E[N]=(P||"").replace(/%2F/g,"/"),E},{}),pathname:u,pathnameBase:f,pattern:e}}function P2e(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),ple(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),s]}function k2e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ple(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function LV(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function D2e(e,t){t===void 0&&(t="/");let{pathname:i,search:s="",hash:c=""}=typeof e=="string"?Ow(e):e;return{pathname:i?i.startsWith("/")?i:x2e(i,t):t,search:F2e(s),hash:V2e(c)}}function x2e(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function jM(e,t,i,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function U2e(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function vle(e,t){let i=U2e(e);return t?i.map((s,c)=>c===i.length-1?s.pathname:s.pathnameBase):i.map(s=>s.pathnameBase)}function _le(e,t,i,s){s===void 0&&(s=!1);let c;typeof e=="string"?c=Ow(e):(c=oT({},e),Wa(!c.pathname||!c.pathname.includes("?"),jM("?","pathname","search",c)),Wa(!c.pathname||!c.pathname.includes("#"),jM("#","pathname","hash",c)),Wa(!c.search||!c.search.includes("#"),jM("#","search","hash",c)));let u=e===""||c.pathname==="",f=u?"/":c.pathname,p;if(f==null)p=i;else{let T=t.length-1;if(!s&&f.startsWith("..")){let N=f.split("/");for(;N[0]==="..";)N.shift(),T-=1;c.pathname=N.join("/")}p=T>=0?t[T]:"/"}let m=D2e(c,p),E=f&&f!=="/"&&f.endsWith("/"),w=(u||f===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(E||w)&&(m.pathname+="/"),m}const Jv=e=>e.join("/").replace(/\/\/+/g,"/"),M2e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F2e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,V2e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q2e(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yle=["post","put","patch","delete"];new Set(yle);const H2e=["get",...yle];new Set(H2e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sT(){return sT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},sT.apply(this,arguments)}const PV=he.createContext(null),j2e=he.createContext(null),A_=he.createContext(null),qL=he.createContext(null),m0=he.createContext({outlet:null,matches:[],isDataRoute:!1}),Ele=he.createContext(null);function K2e(e,t){let{relative:i}=t===void 0?{}:t;kT()||Wa(!1);let{basename:s,navigator:c}=he.useContext(A_),{hash:u,pathname:f,search:p}=ble(e,{relative:i}),m=f;return s!=="/"&&(m=f==="/"?s:Jv([s,f])),c.createHref({pathname:m,search:p,hash:u})}function kT(){return he.useContext(qL)!=null}function YL(){return kT()||Wa(!1),he.useContext(qL).location}function wle(e){he.useContext(A_).static||he.useLayoutEffect(e)}function v0(){let{isDataRoute:e}=he.useContext(m0);return e?nOe():W2e()}function W2e(){kT()||Wa(!1);let e=he.useContext(PV),{basename:t,future:i,navigator:s}=he.useContext(A_),{matches:c}=he.useContext(m0),{pathname:u}=YL(),f=JSON.stringify(vle(c,i.v7_relativeSplatPath)),p=he.useRef(!1);return wle(()=>{p.current=!0}),he.useCallback(function(E,w){if(w===void 0&&(w={}),!p.current)return;if(typeof E=="number"){s.go(E);return}let T=_le(E,JSON.parse(f),u,w.relative==="path");e==null&&t!=="/"&&(T.pathname=T.pathname==="/"?t:Jv([t,T.pathname])),(w.replace?s.replace:s.push)(T,w.state,w)},[t,s,f,u,e])}function Sle(){let{matches:e}=he.useContext(m0),t=e[e.length-1];return t?t.params:{}}function ble(e,t){let{relative:i}=t===void 0?{}:t,{future:s}=he.useContext(A_),{matches:c}=he.useContext(m0),{pathname:u}=YL(),f=JSON.stringify(vle(c,s.v7_relativeSplatPath));return he.useMemo(()=>_le(e,JSON.parse(f),u,i==="path"),[e,f,u,i])}function G2e(e,t){return $2e(e,t)}function $2e(e,t,i,s){kT()||Wa(!1);let{navigator:c}=he.useContext(A_),{matches:u}=he.useContext(m0),f=u[u.length-1],p=f?f.params:{};f&&f.pathname;let m=f?f.pathnameBase:"/";f&&f.route;let E=YL(),w;if(t){var T;let Q=typeof t=="string"?Ow(t):t;m==="/"||(T=Q.pathname)!=null&&T.startsWith(m)||Wa(!1),w=Q}else w=E;let N=w.pathname||"/",O=N;if(m!=="/"){let Q=m.replace(/^\//,"").split("/");O="/"+N.replace(/^\//,"").split("/").slice(Q.length).join("/")}let P=E2e(e,{pathname:O}),M=J2e(P&&P.map(Q=>Object.assign({},Q,{params:Object.assign({},p,Q.params),pathname:Jv([m,c.encodeLocation?c.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?m:Jv([m,c.encodeLocation?c.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),u,i,s);return t&&M?he.createElement(qL.Provider,{value:{location:sT({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Fv.Pop}},M):M}function z2e(){let e=rOe(),t=Q2e(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},t),i?he.createElement("pre",{style:c},i):null,u)}const q2e=he.createElement(z2e,null);class Y2e extends he.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?he.createElement(m0.Provider,{value:this.props.routeContext},he.createElement(Ele.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X2e(e){let{routeContext:t,match:i,children:s}=e,c=he.useContext(PV);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),he.createElement(m0.Provider,{value:t},s)}function J2e(e,t,i,s){var c;if(t===void 0&&(t=[]),i===void 0&&(i=null),s===void 0&&(s=null),e==null){var u;if(!i)return null;if(i.errors)e=i.matches;else if((u=s)!=null&&u.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let f=e,p=(c=i)==null?void 0:c.errors;if(p!=null){let w=f.findIndex(T=>T.route.id&&(p==null?void 0:p[T.route.id])!==void 0);w>=0||Wa(!1),f=f.slice(0,Math.min(f.length,w+1))}let m=!1,E=-1;if(i&&s&&s.v7_partialHydration)for(let w=0;w<f.length;w++){let T=f[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(E=w),T.route.id){let{loaderData:N,errors:O}=i,P=T.route.loader&&N[T.route.id]===void 0&&(!O||O[T.route.id]===void 0);if(T.route.lazy||P){m=!0,E>=0?f=f.slice(0,E+1):f=[f[0]];break}}}return f.reduceRight((w,T,N)=>{let O,P=!1,M=null,Q=null;i&&(O=p&&T.route.id?p[T.route.id]:void 0,M=T.route.errorElement||q2e,m&&(E<0&&N===0?(iOe("route-fallback",!1),P=!0,Q=null):E===N&&(P=!0,Q=T.route.hydrateFallbackElement||null)));let k=t.concat(f.slice(0,N+1)),D=()=>{let V;return O?V=M:P?V=Q:T.route.Component?V=he.createElement(T.route.Component,null):T.route.element?V=T.route.element:V=w,he.createElement(X2e,{match:T,routeContext:{outlet:w,matches:k,isDataRoute:i!=null},children:V})};return i&&(T.route.ErrorBoundary||T.route.errorElement||N===0)?he.createElement(Y2e,{location:i.location,revalidation:i.revalidation,component:M,error:O,children:D(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):D()},null)}var Cle=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Cle||{}),UB=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(UB||{});function Z2e(e){let t=he.useContext(PV);return t||Wa(!1),t}function eOe(e){let t=he.useContext(j2e);return t||Wa(!1),t}function tOe(e){let t=he.useContext(m0);return t||Wa(!1),t}function Tle(e){let t=tOe(),i=t.matches[t.matches.length-1];return i.route.id||Wa(!1),i.route.id}function rOe(){var e;let t=he.useContext(Ele),i=eOe(UB.UseRouteError),s=Tle(UB.UseRouteError);return t!==void 0?t:(e=i.errors)==null?void 0:e[s]}function nOe(){let{router:e}=Z2e(Cle.UseNavigateStable),t=Tle(UB.UseNavigateStable),i=he.useRef(!1);return wle(()=>{i.current=!0}),he.useCallback(function(c,u){u===void 0&&(u={}),i.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,sT({fromRouteId:t},u)))},[e,t])}const zee={};function iOe(e,t,i){!t&&!zee[e]&&(zee[e]=!0)}function oOe(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Rle(e){Wa(!1)}function sOe(e){let{basename:t="/",children:i=null,location:s,navigationType:c=Fv.Pop,navigator:u,static:f=!1,future:p}=e;kT()&&Wa(!1);let m=t.replace(/^\/*/,"/"),E=he.useMemo(()=>({basename:m,navigator:u,static:f,future:sT({v7_relativeSplatPath:!1},p)}),[m,p,u,f]);typeof s=="string"&&(s=Ow(s));let{pathname:w="/",search:T="",hash:N="",state:O=null,key:P="default"}=s,M=he.useMemo(()=>{let Q=LV(w,m);return Q==null?null:{location:{pathname:Q,search:T,hash:N,state:O,key:P},navigationType:c}},[m,w,T,N,O,P,c]);return M==null?null:he.createElement(A_.Provider,{value:E},he.createElement(qL.Provider,{children:i,value:M}))}function aOe(e){let{children:t,location:i}=e;return G2e(xF(t),i)}new Promise(()=>{});function xF(e,t){t===void 0&&(t=[]);let i=[];return he.Children.forEach(e,(s,c)=>{if(!he.isValidElement(s))return;let u=[...t,c];if(s.type===he.Fragment){i.push.apply(i,xF(s.props.children,u));return}s.type!==Rle&&Wa(!1),!s.props.index||!s.props.children||Wa(!1);let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=xF(s.props.children,u)),i.push(f)}),i}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},UF.apply(this,arguments)}function cOe(e,t){if(e==null)return{};var i={},s=Object.keys(e),c,u;for(u=0;u<s.length;u++)c=s[u],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function lOe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function uOe(e,t){return e.button===0&&(!t||t==="_self")&&!lOe(e)}const AOe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dOe="6";try{window.__reactRouterVersion=dOe}catch{}const fOe="startTransition",qee=AB[fOe];function hOe(e){let{basename:t,children:i,future:s,window:c}=e,u=he.useRef();u.current==null&&(u.current=v2e({window:c,v5Compat:!0}));let f=u.current,[p,m]=he.useState({action:f.action,location:f.location}),{v7_startTransition:E}=s||{},w=he.useCallback(T=>{E&&qee?qee(()=>m(T)):m(T)},[m,E]);return he.useLayoutEffect(()=>f.listen(w),[f,w]),he.useEffect(()=>oOe(s),[s]),he.createElement(sOe,{basename:t,children:i,location:p.location,navigationType:p.action,navigator:f,future:s})}const pOe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gOe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aT=he.forwardRef(function(t,i){let{onClick:s,relative:c,reloadDocument:u,replace:f,state:p,target:m,to:E,preventScrollReset:w,viewTransition:T}=t,N=cOe(t,AOe),{basename:O}=he.useContext(A_),P,M=!1;if(typeof E=="string"&&gOe.test(E)&&(P=E,pOe))try{let V=new URL(window.location.href),K=E.startsWith("//")?new URL(V.protocol+E):new URL(E),J=LV(K.pathname,O);K.origin===V.origin&&J!=null?E=J+K.search+K.hash:M=!0}catch{}let Q=K2e(E,{relative:c}),k=mOe(E,{replace:f,state:p,target:m,preventScrollReset:w,relative:c,viewTransition:T});function D(V){s&&s(V),V.defaultPrevented||k(V)}return he.createElement("a",UF({},N,{href:P||Q,onClick:M||u?s:D,ref:i,target:m}))});var Yee;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yee||(Yee={}));var Xee;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xee||(Xee={}));function mOe(e,t){let{target:i,replace:s,state:c,preventScrollReset:u,relative:f,viewTransition:p}=t===void 0?{}:t,m=v0(),E=YL(),w=ble(e,{relative:f});return he.useCallback(T=>{if(uOe(T,i)){T.preventDefault();let N=s!==void 0?s:xB(E)===xB(w);m(e,{replace:N,state:c,preventScrollReset:u,relative:f,viewTransition:p})}},[E,m,w,s,c,i,e,u,f,p])}const vOe={black:"#000",white:"#fff"},cT=vOe,_Oe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},rE=_Oe,yOe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},nE=yOe,EOe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},iE=EOe,wOe={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},oE=wOe,SOe={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},sE=SOe,bOe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ib=bOe,COe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},TOe=COe;function um(e,...t){const i=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>i.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${i} for the full message.`}const zp="$$material";function MB(){return MB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},MB.apply(null,arguments)}var ROe=!1;function IOe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function OOe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var NOe=function(){function e(i){var s=this;this._insertTag=function(c){var u;s.tags.length===0?s.insertionPoint?u=s.insertionPoint.nextSibling:s.prepend?u=s.container.firstChild:u=s.before:u=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(c,u),s.tags.push(c)},this.isSpeedy=i.speedy===void 0?!ROe:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(OOe(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=IOe(c);try{u.insertRule(s,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var c;return(c=s.parentNode)==null?void 0:c.removeChild(s)}),this.tags=[],this.ctr=0},e}(),kl="-ms-",FB="-moz-",eo="-webkit-",Ile="comm",kV="rule",DV="decl",BOe="@import",Ole="@keyframes",LOe="@layer",POe=Math.abs,XL=String.fromCharCode,kOe=Object.assign;function DOe(e,t){return ol(e,0)^45?(((t<<2^ol(e,0))<<2^ol(e,1))<<2^ol(e,2))<<2^ol(e,3):0}function Nle(e){return e.trim()}function xOe(e,t){return(e=t.exec(e))?e[0]:e}function to(e,t,i){return e.replace(t,i)}function MF(e,t){return e.indexOf(t)}function ol(e,t){return e.charCodeAt(t)|0}function lT(e,t,i){return e.slice(t,i)}function Qp(e){return e.length}function xV(e){return e.length}function EO(e,t){return t.push(e),e}function UOe(e,t){return e.map(t).join("")}var JL=1,pw=1,Ble=0,Yu=0,Qa=0,Nw="";function ZL(e,t,i,s,c,u,f){return{value:e,root:t,parent:i,type:s,props:c,children:u,line:JL,column:pw,length:f,return:""}}function Ob(e,t){return kOe(ZL("",null,null,"",null,null,0),e,{length:-e.length},t)}function MOe(){return Qa}function FOe(){return Qa=Yu>0?ol(Nw,--Yu):0,pw--,Qa===10&&(pw=1,JL--),Qa}function QA(){return Qa=Yu<Ble?ol(Nw,Yu++):0,pw++,Qa===10&&(pw=1,JL++),Qa}function qp(){return ol(Nw,Yu)}function kN(){return Yu}function DT(e,t){return lT(Nw,e,t)}function uT(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lle(e){return JL=pw=1,Ble=Qp(Nw=e),Yu=0,[]}function Ple(e){return Nw="",e}function DN(e){return Nle(DT(Yu-1,FF(e===91?e+2:e===40?e+1:e)))}function VOe(e){for(;(Qa=qp())&&Qa<33;)QA();return uT(e)>2||uT(Qa)>3?"":" "}function QOe(e,t){for(;--t&&QA()&&!(Qa<48||Qa>102||Qa>57&&Qa<65||Qa>70&&Qa<97););return DT(e,kN()+(t<6&&qp()==32&&QA()==32))}function FF(e){for(;QA();)switch(Qa){case e:return Yu;case 34:case 39:e!==34&&e!==39&&FF(Qa);break;case 40:e===41&&FF(e);break;case 92:QA();break}return Yu}function HOe(e,t){for(;QA()&&e+Qa!==47+10;)if(e+Qa===42+42&&qp()===47)break;return"/*"+DT(t,Yu-1)+"*"+XL(e===47?e:QA())}function jOe(e){for(;!uT(qp());)QA();return DT(e,Yu)}function KOe(e){return Ple(xN("",null,null,null,[""],e=Lle(e),0,[0],e))}function xN(e,t,i,s,c,u,f,p,m){for(var E=0,w=0,T=f,N=0,O=0,P=0,M=1,Q=1,k=1,D=0,V="",K=c,J=u,ie=s,fe=V;Q;)switch(P=D,D=QA()){case 40:if(P!=108&&ol(fe,T-1)==58){MF(fe+=to(DN(D),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:fe+=DN(D);break;case 9:case 10:case 13:case 32:fe+=VOe(P);break;case 92:fe+=QOe(kN()-1,7);continue;case 47:switch(qp()){case 42:case 47:EO(WOe(HOe(QA(),kN()),t,i),m);break;default:fe+="/"}break;case 123*M:p[E++]=Qp(fe)*k;case 125*M:case 59:case 0:switch(D){case 0:case 125:Q=0;case 59+w:k==-1&&(fe=to(fe,/\f/g,"")),O>0&&Qp(fe)-T&&EO(O>32?Zee(fe+";",s,i,T-1):Zee(to(fe," ","")+";",s,i,T-2),m);break;case 59:fe+=";";default:if(EO(ie=Jee(fe,t,i,E,w,c,p,V,K=[],J=[],T),u),D===123)if(w===0)xN(fe,t,ie,ie,K,u,T,p,J);else switch(N===99&&ol(fe,3)===110?100:N){case 100:case 108:case 109:case 115:xN(e,ie,ie,s&&EO(Jee(e,ie,ie,0,0,c,p,V,c,K=[],T),J),c,J,T,p,s?K:J);break;default:xN(fe,ie,ie,ie,[""],J,0,p,J)}}E=w=O=0,M=k=1,V=fe="",T=f;break;case 58:T=1+Qp(fe),O=P;default:if(M<1){if(D==123)--M;else if(D==125&&M++==0&&FOe()==125)continue}switch(fe+=XL(D),D*M){case 38:k=w>0?1:(fe+="\f",-1);break;case 44:p[E++]=(Qp(fe)-1)*k,k=1;break;case 64:qp()===45&&(fe+=DN(QA())),N=qp(),w=T=Qp(V=fe+=jOe(kN())),D++;break;case 45:P===45&&Qp(fe)==2&&(M=0)}}return u}function Jee(e,t,i,s,c,u,f,p,m,E,w){for(var T=c-1,N=c===0?u:[""],O=xV(N),P=0,M=0,Q=0;P<s;++P)for(var k=0,D=lT(e,T+1,T=POe(M=f[P])),V=e;k<O;++k)(V=Nle(M>0?N[k]+" "+D:to(D,/&\f/g,N[k])))&&(m[Q++]=V);return ZL(e,t,i,c===0?kV:p,m,E,w)}function WOe(e,t,i){return ZL(e,t,i,Ile,XL(MOe()),lT(e,2,-2),0)}function Zee(e,t,i,s){return ZL(e,t,i,DV,lT(e,0,s),lT(e,s+1,-1),s)}function ZE(e,t){for(var i="",s=xV(e),c=0;c<s;c++)i+=t(e[c],c,e,t)||"";return i}function GOe(e,t,i,s){switch(e.type){case LOe:if(e.children.length)break;case BOe:case DV:return e.return=e.return||e.value;case Ile:return"";case Ole:return e.return=e.value+"{"+ZE(e.children,s)+"}";case kV:e.value=e.props.join(",")}return Qp(i=ZE(e.children,s))?e.return=e.value+"{"+i+"}":""}function $Oe(e){var t=xV(e);return function(i,s,c,u){for(var f="",p=0;p<t;p++)f+=e[p](i,s,c,u)||"";return f}}function zOe(e){return function(t){t.root||(t=t.return)&&e(t)}}function kle(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var qOe=function(t,i,s){for(var c=0,u=0;c=u,u=qp(),c===38&&u===12&&(i[s]=1),!uT(u);)QA();return DT(t,Yu)},YOe=function(t,i){var s=-1,c=44;do switch(uT(c)){case 0:c===38&&qp()===12&&(i[s]=1),t[s]+=qOe(Yu-1,i,s);break;case 2:t[s]+=DN(c);break;case 4:if(c===44){t[++s]=qp()===58?"&\f":"",i[s]=t[s].length;break}default:t[s]+=XL(c)}while(c=QA());return t},XOe=function(t,i){return Ple(YOe(Lle(t),i))},ete=new WeakMap,JOe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,s=t.parent,c=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!ete.get(s))&&!c){ete.set(t,!0);for(var u=[],f=XOe(i,u),p=s.props,m=0,E=0;m<f.length;m++)for(var w=0;w<p.length;w++,E++)t.props[E]=u[m]?f[m].replace(/&\f/g,p[w]):p[w]+" "+f[m]}}},ZOe=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function Dle(e,t){switch(DOe(e,t)){case 5103:return eo+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return eo+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return eo+e+FB+e+kl+e+e;case 6828:case 4268:return eo+e+kl+e+e;case 6165:return eo+e+kl+"flex-"+e+e;case 5187:return eo+e+to(e,/(\w+).+(:[^]+)/,eo+"box-$1$2"+kl+"flex-$1$2")+e;case 5443:return eo+e+kl+"flex-item-"+to(e,/flex-|-self/,"")+e;case 4675:return eo+e+kl+"flex-line-pack"+to(e,/align-content|flex-|-self/,"")+e;case 5548:return eo+e+kl+to(e,"shrink","negative")+e;case 5292:return eo+e+kl+to(e,"basis","preferred-size")+e;case 6060:return eo+"box-"+to(e,"-grow","")+eo+e+kl+to(e,"grow","positive")+e;case 4554:return eo+to(e,/([^-])(transform)/g,"$1"+eo+"$2")+e;case 6187:return to(to(to(e,/(zoom-|grab)/,eo+"$1"),/(image-set)/,eo+"$1"),e,"")+e;case 5495:case 3959:return to(e,/(image-set\([^]*)/,eo+"$1$`$1");case 4968:return to(to(e,/(.+:)(flex-)?(.*)/,eo+"box-pack:$3"+kl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+eo+e+e;case 4095:case 3583:case 4068:case 2532:return to(e,/(.+)-inline(.+)/,eo+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Qp(e)-1-t>6)switch(ol(e,t+1)){case 109:if(ol(e,t+4)!==45)break;case 102:return to(e,/(.+:)(.+)-([^]+)/,"$1"+eo+"$2-$3$1"+FB+(ol(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~MF(e,"stretch")?Dle(to(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ol(e,t+1)!==115)break;case 6444:switch(ol(e,Qp(e)-3-(~MF(e,"!important")&&10))){case 107:return to(e,":",":"+eo)+e;case 101:return to(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+eo+(ol(e,14)===45?"inline-":"")+"box$3$1"+eo+"$2$3$1"+kl+"$2box$3")+e}break;case 5936:switch(ol(e,t+11)){case 114:return eo+e+kl+to(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return eo+e+kl+to(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return eo+e+kl+to(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return eo+e+kl+e+e}return e}var eNe=function(t,i,s,c){if(t.length>-1&&!t.return)switch(t.type){case DV:t.return=Dle(t.value,t.length);break;case Ole:return ZE([Ob(t,{value:to(t.value,"@","@"+eo)})],c);case kV:if(t.length)return UOe(t.props,function(u){switch(xOe(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ZE([Ob(t,{props:[to(u,/:(read-\w+)/,":"+FB+"$1")]})],c);case"::placeholder":return ZE([Ob(t,{props:[to(u,/:(plac\w+)/,":"+eo+"input-$1")]}),Ob(t,{props:[to(u,/:(plac\w+)/,":"+FB+"$1")]}),Ob(t,{props:[to(u,/:(plac\w+)/,kl+"input-$1")]})],c)}return""})}},tNe=[eNe],xle=function(t){var i=t.key;if(i==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(M){var Q=M.getAttribute("data-emotion");Q.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var c=t.stylisPlugins||tNe,u={},f,p=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(M){for(var Q=M.getAttribute("data-emotion").split(" "),k=1;k<Q.length;k++)u[Q[k]]=!0;p.push(M)});var m,E=[JOe,ZOe];{var w,T=[GOe,zOe(function(M){w.insert(M)})],N=$Oe(E.concat(c,T)),O=function(Q){return ZE(KOe(Q),N)};m=function(Q,k,D,V){w=D,O(Q?Q+"{"+k.styles+"}":k.styles),V&&(P.inserted[k.name]=!0)}}var P={key:i,sheet:new NOe({key:i,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:m};return P.sheet.hydrate(p),P},Ule={exports:{}},Eo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc=typeof Symbol=="function"&&Symbol.for,UV=Dc?Symbol.for("react.element"):60103,MV=Dc?Symbol.for("react.portal"):60106,eP=Dc?Symbol.for("react.fragment"):60107,tP=Dc?Symbol.for("react.strict_mode"):60108,rP=Dc?Symbol.for("react.profiler"):60114,nP=Dc?Symbol.for("react.provider"):60109,iP=Dc?Symbol.for("react.context"):60110,FV=Dc?Symbol.for("react.async_mode"):60111,oP=Dc?Symbol.for("react.concurrent_mode"):60111,sP=Dc?Symbol.for("react.forward_ref"):60112,aP=Dc?Symbol.for("react.suspense"):60113,rNe=Dc?Symbol.for("react.suspense_list"):60120,cP=Dc?Symbol.for("react.memo"):60115,lP=Dc?Symbol.for("react.lazy"):60116,nNe=Dc?Symbol.for("react.block"):60121,iNe=Dc?Symbol.for("react.fundamental"):60117,oNe=Dc?Symbol.for("react.responder"):60118,sNe=Dc?Symbol.for("react.scope"):60119;function zA(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case UV:switch(e=e.type,e){case FV:case oP:case eP:case rP:case tP:case aP:return e;default:switch(e=e&&e.$$typeof,e){case iP:case sP:case lP:case cP:case nP:return e;default:return t}}case MV:return t}}}function Mle(e){return zA(e)===oP}Eo.AsyncMode=FV;Eo.ConcurrentMode=oP;Eo.ContextConsumer=iP;Eo.ContextProvider=nP;Eo.Element=UV;Eo.ForwardRef=sP;Eo.Fragment=eP;Eo.Lazy=lP;Eo.Memo=cP;Eo.Portal=MV;Eo.Profiler=rP;Eo.StrictMode=tP;Eo.Suspense=aP;Eo.isAsyncMode=function(e){return Mle(e)||zA(e)===FV};Eo.isConcurrentMode=Mle;Eo.isContextConsumer=function(e){return zA(e)===iP};Eo.isContextProvider=function(e){return zA(e)===nP};Eo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===UV};Eo.isForwardRef=function(e){return zA(e)===sP};Eo.isFragment=function(e){return zA(e)===eP};Eo.isLazy=function(e){return zA(e)===lP};Eo.isMemo=function(e){return zA(e)===cP};Eo.isPortal=function(e){return zA(e)===MV};Eo.isProfiler=function(e){return zA(e)===rP};Eo.isStrictMode=function(e){return zA(e)===tP};Eo.isSuspense=function(e){return zA(e)===aP};Eo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===eP||e===oP||e===rP||e===tP||e===aP||e===rNe||typeof e=="object"&&e!==null&&(e.$$typeof===lP||e.$$typeof===cP||e.$$typeof===nP||e.$$typeof===iP||e.$$typeof===sP||e.$$typeof===iNe||e.$$typeof===oNe||e.$$typeof===sNe||e.$$typeof===nNe)};Eo.typeOf=zA;Ule.exports=Eo;var aNe=Ule.exports,Fle=aNe,cNe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lNe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Vle={};Vle[Fle.ForwardRef]=cNe;Vle[Fle.Memo]=lNe;var uNe=!0;function uP(e,t,i){var s="";return i.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):c&&(s+=c+" ")}),s}var VV=function(t,i,s){var c=t.key+"-"+i.name;(s===!1||uNe===!1)&&t.registered[c]===void 0&&(t.registered[c]=i.styles)},AP=function(t,i,s){VV(t,i,s);var c=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var u=i;do t.insert(i===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function ANe(e){for(var t=0,i,s=0,c=e.length;c>=4;++s,c-=4)i=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var dNe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fNe=!1,hNe=/[A-Z]|^ms/g,pNe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Qle=function(t){return t.charCodeAt(1)===45},tte=function(t){return t!=null&&typeof t!="boolean"},KM=kle(function(e){return Qle(e)?e:e.replace(hNe,"-$&").toLowerCase()}),rte=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(pNe,function(s,c,u){return Hp={name:c,styles:u,next:Hp},c})}return dNe[t]!==1&&!Qle(t)&&typeof i=="number"&&i!==0?i+"px":i},gNe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function AT(e,t,i){if(i==null)return"";var s=i;if(s.__emotion_styles!==void 0)return s;switch(typeof i){case"boolean":return"";case"object":{var c=i;if(c.anim===1)return Hp={name:c.name,styles:c.styles,next:Hp},c.name;var u=i;if(u.styles!==void 0){var f=u.next;if(f!==void 0)for(;f!==void 0;)Hp={name:f.name,styles:f.styles,next:Hp},f=f.next;var p=u.styles+";";return p}return mNe(e,t,i)}case"function":{if(e!==void 0){var m=Hp,E=i(e);return Hp=m,AT(e,t,E)}break}}var w=i;if(t==null)return w;var T=t[w];return T!==void 0?T:w}function mNe(e,t,i){var s="";if(Array.isArray(i))for(var c=0;c<i.length;c++)s+=AT(e,t,i[c])+";";else for(var u in i){var f=i[u];if(typeof f!="object"){var p=f;t!=null&&t[p]!==void 0?s+=u+"{"+t[p]+"}":tte(p)&&(s+=KM(u)+":"+rte(u,p)+";")}else{if(u==="NO_COMPONENT_SELECTOR"&&fNe)throw new Error(gNe);if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var m=0;m<f.length;m++)tte(f[m])&&(s+=KM(u)+":"+rte(u,f[m])+";");else{var E=AT(e,t,f);switch(u){case"animation":case"animationName":{s+=KM(u)+":"+E+";";break}default:s+=u+"{"+E+"}"}}}}return s}var nte=/label:\s*([^\s;{]+)\s*(;|$)/g,Hp;function Zv(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,c="";Hp=void 0;var u=e[0];if(u==null||u.raw===void 0)s=!1,c+=AT(i,t,u);else{var f=u;c+=f[0]}for(var p=1;p<e.length;p++)if(c+=AT(i,t,e[p]),s){var m=u;c+=m[p]}nte.lastIndex=0;for(var E="",w;(w=nte.exec(c))!==null;)E+="-"+w[1];var T=ANe(c)+E;return{name:T,styles:c,next:Hp}}var vNe=function(t){return t()},Hle=AB["useInsertionEffect"]?AB["useInsertionEffect"]:!1,jle=Hle||vNe,ite=Hle||he.useLayoutEffect,_Ne=!1,Kle=he.createContext(typeof HTMLElement<"u"?xle({key:"css"}):null);Kle.Provider;var QV=function(t){return he.forwardRef(function(i,s){var c=he.useContext(Kle);return t(i,c,s)})},xT=he.createContext({}),HV={}.hasOwnProperty,VF="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",yNe=function(t,i){var s={};for(var c in i)HV.call(i,c)&&(s[c]=i[c]);return s[VF]=t,s},ENe=function(t){var i=t.cache,s=t.serialized,c=t.isStringTag;return VV(i,s,c),jle(function(){return AP(i,s,c)}),null},wNe=QV(function(e,t,i){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var c=e[VF],u=[s],f="";typeof e.className=="string"?f=uP(t.registered,u,e.className):e.className!=null&&(f=e.className+" ");var p=Zv(u,void 0,he.useContext(xT));f+=t.key+"-"+p.name;var m={};for(var E in e)HV.call(e,E)&&E!=="css"&&E!==VF&&!_Ne&&(m[E]=e[E]);return m.className=f,i&&(m.ref=i),he.createElement(he.Fragment,null,he.createElement(ENe,{cache:t,serialized:p,isStringTag:typeof c=="string"}),he.createElement(c,m))}),SNe=wNe,ote=function(t,i){var s=arguments;if(i==null||!HV.call(i,"css"))return he.createElement.apply(void 0,s);var c=s.length,u=new Array(c);u[0]=SNe,u[1]=yNe(t,i);for(var f=2;f<c;f++)u[f]=s[f];return he.createElement.apply(null,u)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(ote||(ote={}));var bNe=QV(function(e,t){var i=e.styles,s=Zv([i],void 0,he.useContext(xT)),c=he.useRef();return ite(function(){var u=t.key+"-global",f=new t.sheet.constructor({key:u,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,m=document.querySelector('style[data-emotion="'+u+" "+s.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),m!==null&&(p=!0,m.setAttribute("data-emotion",u),f.hydrate([m])),c.current=[f,p],function(){f.flush()}},[t]),ite(function(){var u=c.current,f=u[0],p=u[1];if(p){u[1]=!1;return}if(s.next!==void 0&&AP(t,s.next,!0),f.tags.length){var m=f.tags[f.tags.length-1].nextElementSibling;f.before=m,f.flush()}t.insert("",s,f,!1)},[t,s.name]),null});function jV(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Zv(t)}function UT(){var e=jV.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var CNe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,TNe=kle(function(e){return CNe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),RNe=!1,INe=TNe,ONe=function(t){return t!=="theme"},ste=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?INe:ONe},ate=function(t,i,s){var c;if(i){var u=i.shouldForwardProp;c=t.__emotion_forwardProp&&u?function(f){return t.__emotion_forwardProp(f)&&u(f)}:u}return typeof c!="function"&&s&&(c=t.__emotion_forwardProp),c},NNe=function(t){var i=t.cache,s=t.serialized,c=t.isStringTag;return VV(i,s,c),jle(function(){return AP(i,s,c)}),null},BNe=function e(t,i){var s=t.__emotion_real===t,c=s&&t.__emotion_base||t,u,f;i!==void 0&&(u=i.label,f=i.target);var p=ate(t,i,s),m=p||ste(c),E=!m("as");return function(){var w=arguments,T=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(u!==void 0&&T.push("label:"+u+";"),w[0]==null||w[0].raw===void 0)T.push.apply(T,w);else{var N=w[0];T.push(N[0]);for(var O=w.length,P=1;P<O;P++)T.push(w[P],N[P])}var M=QV(function(Q,k,D){var V=E&&Q.as||c,K="",J=[],ie=Q;if(Q.theme==null){ie={};for(var fe in Q)ie[fe]=Q[fe];ie.theme=he.useContext(xT)}typeof Q.className=="string"?K=uP(k.registered,J,Q.className):Q.className!=null&&(K=Q.className+" ");var Z=Zv(T.concat(J),k.registered,ie);K+=k.key+"-"+Z.name,f!==void 0&&(K+=" "+f);var pe=E&&p===void 0?ste(V):m,Y={};for(var te in Q)E&&te==="as"||pe(te)&&(Y[te]=Q[te]);return Y.className=K,D&&(Y.ref=D),he.createElement(he.Fragment,null,he.createElement(NNe,{cache:k,serialized:Z,isStringTag:typeof V=="string"}),he.createElement(V,Y))});return M.displayName=u!==void 0?u:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",M.defaultProps=t.defaultProps,M.__emotion_real=M,M.__emotion_base=c,M.__emotion_styles=T,M.__emotion_forwardProp=p,Object.defineProperty(M,"toString",{value:function(){return f===void 0&&RNe?"NO_COMPONENT_SELECTOR":"."+f}}),M.withComponent=function(Q,k){var D=e(Q,MB({},i,k,{shouldForwardProp:ate(M,k,!0)}));return D.apply(void 0,T)},M}},LNe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],QF=BNe.bind(null);LNe.forEach(function(e){QF[e]=QF(e)});function PNe(e){return e==null||Object.keys(e).length===0}function Wle(e){const{styles:t,defaultTheme:i={}}=e,s=typeof t=="function"?c=>t(PNe(c)?i:c):t;return oe.jsx(bNe,{styles:s})}/**
 * @mui/styled-engine v7.1.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Gle(e,t){return QF(e,t)}function kNe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const cte=[];function lte(e){return cte[0]=e,Zv(cte)}var $le={exports:{}},Wo={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KV=Symbol.for("react.transitional.element"),WV=Symbol.for("react.portal"),dP=Symbol.for("react.fragment"),fP=Symbol.for("react.strict_mode"),hP=Symbol.for("react.profiler"),pP=Symbol.for("react.consumer"),gP=Symbol.for("react.context"),mP=Symbol.for("react.forward_ref"),vP=Symbol.for("react.suspense"),_P=Symbol.for("react.suspense_list"),yP=Symbol.for("react.memo"),EP=Symbol.for("react.lazy"),DNe=Symbol.for("react.view_transition"),xNe=Symbol.for("react.client.reference");function rf(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case KV:switch(e=e.type,e){case dP:case hP:case fP:case vP:case _P:case DNe:return e;default:switch(e=e&&e.$$typeof,e){case gP:case mP:case EP:case yP:return e;case pP:return e;default:return t}}case WV:return t}}}Wo.ContextConsumer=pP;Wo.ContextProvider=gP;Wo.Element=KV;Wo.ForwardRef=mP;Wo.Fragment=dP;Wo.Lazy=EP;Wo.Memo=yP;Wo.Portal=WV;Wo.Profiler=hP;Wo.StrictMode=fP;Wo.Suspense=vP;Wo.SuspenseList=_P;Wo.isContextConsumer=function(e){return rf(e)===pP};Wo.isContextProvider=function(e){return rf(e)===gP};Wo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===KV};Wo.isForwardRef=function(e){return rf(e)===mP};Wo.isFragment=function(e){return rf(e)===dP};Wo.isLazy=function(e){return rf(e)===EP};Wo.isMemo=function(e){return rf(e)===yP};Wo.isPortal=function(e){return rf(e)===WV};Wo.isProfiler=function(e){return rf(e)===hP};Wo.isStrictMode=function(e){return rf(e)===fP};Wo.isSuspense=function(e){return rf(e)===vP};Wo.isSuspenseList=function(e){return rf(e)===_P};Wo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dP||e===hP||e===fP||e===vP||e===_P||typeof e=="object"&&e!==null&&(e.$$typeof===EP||e.$$typeof===yP||e.$$typeof===gP||e.$$typeof===pP||e.$$typeof===mP||e.$$typeof===xNe||e.getModuleId!==void 0)};Wo.typeOf=rf;$le.exports=Wo;var zle=$le.exports;function Kp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function qle(e){if(he.isValidElement(e)||zle.isValidElementType(e)||!Kp(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=qle(e[i])}),t}function kc(e,t,i={clone:!0}){const s=i.clone?{...e}:e;return Kp(e)&&Kp(t)&&Object.keys(t).forEach(c=>{he.isValidElement(t[c])||zle.isValidElementType(t[c])?s[c]=t[c]:Kp(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&Kp(e[c])?s[c]=kc(e[c],t[c],i):i.clone?s[c]=Kp(t[c])?qle(t[c]):t[c]:s[c]=t[c]}),s}const UNe=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,s)=>i.val-s.val),t.reduce((i,s)=>({...i,[s.key]:s.val}),{})};function MNe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:s=5,...c}=e,u=UNe(t),f=Object.keys(u);function p(N){return`@media (min-width:${typeof t[N]=="number"?t[N]:N}${i})`}function m(N){return`@media (max-width:${(typeof t[N]=="number"?t[N]:N)-s/100}${i})`}function E(N,O){const P=f.indexOf(O);return`@media (min-width:${typeof t[N]=="number"?t[N]:N}${i}) and (max-width:${(P!==-1&&typeof t[f[P]]=="number"?t[f[P]]:O)-s/100}${i})`}function w(N){return f.indexOf(N)+1<f.length?E(N,f[f.indexOf(N)+1]):p(N)}function T(N){const O=f.indexOf(N);return O===0?p(f[1]):O===f.length-1?m(f[O]):E(N,f[f.indexOf(N)+1]).replace("@media","@media not all and")}return{keys:f,values:u,up:p,down:m,between:E,only:w,not:T,unit:i,...c}}function FNe(e,t){if(!e.containerQueries)return t;const i=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,c)=>{var f,p;const u=/min-width:\s*([0-9.]+)/;return+(((f=s.match(u))==null?void 0:f[1])||0)-+(((p=c.match(u))==null?void 0:p[1])||0)});return i.length?i.reduce((s,c)=>{const u=t[c];return delete s[c],s[c]=u,s},{...t}):t}function VNe(e,t){return t==="@"||t.startsWith("@")&&(e.some(i=>t.startsWith(`@${i}`))||!!t.match(/^@\d/))}function QNe(e,t){const i=t.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,s,c]=i,u=Number.isNaN(+s)?s||0:+s;return e.containerQueries(c).up(u)}function HNe(e){const t=(u,f)=>u.replace("@media",f?`@container ${f}`:"@container");function i(u,f){u.up=(...p)=>t(e.breakpoints.up(...p),f),u.down=(...p)=>t(e.breakpoints.down(...p),f),u.between=(...p)=>t(e.breakpoints.between(...p),f),u.only=(...p)=>t(e.breakpoints.only(...p),f),u.not=(...p)=>{const m=t(e.breakpoints.not(...p),f);return m.includes("not all and")?m.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):m}}const s={},c=u=>(i(s,u),s);return i(c),{...e,containerQueries:c}}const jNe={borderRadius:4},KNe=jNe;function NC(e,t){return t?kc(e,t,{clone:!1}):e}const wP={xs:0,sm:600,md:900,lg:1200,xl:1536},ute={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${wP[e]}px)`},WNe={containerQueries:e=>({up:t=>{let i=typeof t=="number"?t:wP[t]||t;return typeof i=="number"&&(i=`${i}px`),e?`@container ${e} (min-width:${i})`:`@container (min-width:${i})`}})};function wh(e,t,i){const s=e.theme||{};if(Array.isArray(t)){const u=s.breakpoints||ute;return t.reduce((f,p,m)=>(f[u.up(u.keys[m])]=i(t[m]),f),{})}if(typeof t=="object"){const u=s.breakpoints||ute;return Object.keys(t).reduce((f,p)=>{if(VNe(u.keys,p)){const m=QNe(s.containerQueries?s:WNe,p);m&&(f[m]=i(t[p],p))}else if(Object.keys(u.values||wP).includes(p)){const m=u.up(p);f[m]=i(t[p],p)}else{const m=p;f[m]=t[m]}return f},{})}return i(t)}function Yle(e={}){var i;return((i=e.keys)==null?void 0:i.reduce((s,c)=>{const u=e.up(c);return s[u]={},s},{}))||{}}function Xle(e,t){return e.reduce((i,s)=>{const c=i[s];return(!c||Object.keys(c).length===0)&&delete i[s],i},t)}function GNe(e,...t){const i=Yle(e),s=[i,...t].reduce((c,u)=>kc(c,u),{});return Xle(Object.keys(i),s)}function $Ne(e,t){if(typeof e!="object")return{};const i={},s=Object.keys(t);return Array.isArray(e)?s.forEach((c,u)=>{u<e.length&&(i[c]=!0)}):s.forEach(c=>{e[c]!=null&&(i[c]=!0)}),i}function WM({values:e,breakpoints:t,base:i}){const s=i||$Ne(e,t),c=Object.keys(s);if(c.length===0)return e;let u;return c.reduce((f,p,m)=>(Array.isArray(e)?(f[p]=e[m]!=null?e[m]:e[u],u=m):typeof e=="object"?(f[p]=e[p]!=null?e[p]:e[u],u=p):f[p]=e,f),{})}function Ur(e){if(typeof e!="string")throw new Error(um(7));return e.charAt(0).toUpperCase()+e.slice(1)}function SP(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const s=`vars.${t}`.split(".").reduce((c,u)=>c&&c[u]?c[u]:null,e);if(s!=null)return s}return t.split(".").reduce((s,c)=>s&&s[c]!=null?s[c]:null,e)}function VB(e,t,i,s=i){let c;return typeof e=="function"?c=e(i):Array.isArray(e)?c=e[i]||s:c=SP(e,i)||s,t&&(c=t(c,s,e)),c}function Ia(e){const{prop:t,cssProperty:i=e.prop,themeKey:s,transform:c}=e,u=f=>{if(f[t]==null)return null;const p=f[t],m=f.theme,E=SP(m,s)||{};return wh(f,p,T=>{let N=VB(E,c,T);return T===N&&typeof T=="string"&&(N=VB(E,c,`${t}${T==="default"?"":Ur(T)}`,T)),i===!1?N:{[i]:N}})};return u.propTypes={},u.filterProps=[t],u}function zNe(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const qNe={m:"margin",p:"padding"},YNe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ate={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},XNe=zNe(e=>{if(e.length>2)if(Ate[e])e=Ate[e];else return[e];const[t,i]=e.split(""),s=qNe[t],c=YNe[i]||"";return Array.isArray(c)?c.map(u=>s+u):[s+c]}),GV=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],$V=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...GV,...$V];function MT(e,t,i,s){const c=SP(e,t,!0)??i;return typeof c=="number"||typeof c=="string"?u=>typeof u=="string"?u:typeof c=="string"?c.startsWith("var(")&&u===0?0:c.startsWith("var(")&&u===1?c:`calc(${u} * ${c})`:c*u:Array.isArray(c)?u=>{if(typeof u=="string")return u;const f=Math.abs(u),p=c[f];return u>=0?p:typeof p=="number"?-p:typeof p=="string"&&p.startsWith("var(")?`calc(-1 * ${p})`:`-${p}`}:typeof c=="function"?c:()=>{}}function bP(e){return MT(e,"spacing",8)}function n_(e,t){return typeof t=="string"||t==null?t:e(t)}function JNe(e,t){return i=>e.reduce((s,c)=>(s[c]=n_(t,i),s),{})}function ZNe(e,t,i,s){if(!t.includes(i))return null;const c=XNe(i),u=JNe(c,s),f=e[i];return wh(e,f,u)}function Jle(e,t){const i=bP(e.theme);return Object.keys(e).map(s=>ZNe(e,t,s,i)).reduce(NC,{})}function na(e){return Jle(e,GV)}na.propTypes={};na.filterProps=GV;function ia(e){return Jle(e,$V)}ia.propTypes={};ia.filterProps=$V;function Zle(e=8,t=bP({spacing:e})){if(e.mui)return e;const i=(...s)=>(s.length===0?[1]:s).map(u=>{const f=t(u);return typeof f=="number"?`${f}px`:f}).join(" ");return i.mui=!0,i}function CP(...e){const t=e.reduce((s,c)=>(c.filterProps.forEach(u=>{s[u]=c}),s),{}),i=s=>Object.keys(s).reduce((c,u)=>t[u]?NC(c,t[u](s)):c,{});return i.propTypes={},i.filterProps=e.reduce((s,c)=>s.concat(c.filterProps),[]),i}function Qd(e){return typeof e!="number"?e:`${e}px solid`}function nf(e,t){return Ia({prop:e,themeKey:"borders",transform:t})}const eBe=nf("border",Qd),tBe=nf("borderTop",Qd),rBe=nf("borderRight",Qd),nBe=nf("borderBottom",Qd),iBe=nf("borderLeft",Qd),oBe=nf("borderColor"),sBe=nf("borderTopColor"),aBe=nf("borderRightColor"),cBe=nf("borderBottomColor"),lBe=nf("borderLeftColor"),uBe=nf("outline",Qd),ABe=nf("outlineColor"),TP=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=MT(e.theme,"shape.borderRadius",4),i=s=>({borderRadius:n_(t,s)});return wh(e,e.borderRadius,i)}return null};TP.propTypes={};TP.filterProps=["borderRadius"];CP(eBe,tBe,rBe,nBe,iBe,oBe,sBe,aBe,cBe,lBe,TP,uBe,ABe);const RP=e=>{if(e.gap!==void 0&&e.gap!==null){const t=MT(e.theme,"spacing",8),i=s=>({gap:n_(t,s)});return wh(e,e.gap,i)}return null};RP.propTypes={};RP.filterProps=["gap"];const IP=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=MT(e.theme,"spacing",8),i=s=>({columnGap:n_(t,s)});return wh(e,e.columnGap,i)}return null};IP.propTypes={};IP.filterProps=["columnGap"];const OP=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=MT(e.theme,"spacing",8),i=s=>({rowGap:n_(t,s)});return wh(e,e.rowGap,i)}return null};OP.propTypes={};OP.filterProps=["rowGap"];const dBe=Ia({prop:"gridColumn"}),fBe=Ia({prop:"gridRow"}),hBe=Ia({prop:"gridAutoFlow"}),pBe=Ia({prop:"gridAutoColumns"}),gBe=Ia({prop:"gridAutoRows"}),mBe=Ia({prop:"gridTemplateColumns"}),vBe=Ia({prop:"gridTemplateRows"}),_Be=Ia({prop:"gridTemplateAreas"}),yBe=Ia({prop:"gridArea"});CP(RP,IP,OP,dBe,fBe,hBe,pBe,gBe,mBe,vBe,_Be,yBe);function ew(e,t){return t==="grey"?t:e}const EBe=Ia({prop:"color",themeKey:"palette",transform:ew}),wBe=Ia({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ew}),SBe=Ia({prop:"backgroundColor",themeKey:"palette",transform:ew});CP(EBe,wBe,SBe);function xA(e){return e<=1&&e!==0?`${e*100}%`:e}const bBe=Ia({prop:"width",transform:xA}),zV=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var c,u,f,p,m;const s=((f=(u=(c=e.theme)==null?void 0:c.breakpoints)==null?void 0:u.values)==null?void 0:f[i])||wP[i];return s?((m=(p=e.theme)==null?void 0:p.breakpoints)==null?void 0:m.unit)!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:xA(i)}};return wh(e,e.maxWidth,t)}return null};zV.filterProps=["maxWidth"];const CBe=Ia({prop:"minWidth",transform:xA}),TBe=Ia({prop:"height",transform:xA}),RBe=Ia({prop:"maxHeight",transform:xA}),IBe=Ia({prop:"minHeight",transform:xA});Ia({prop:"size",cssProperty:"width",transform:xA});Ia({prop:"size",cssProperty:"height",transform:xA});const OBe=Ia({prop:"boxSizing"});CP(bBe,zV,CBe,TBe,RBe,IBe,OBe);const NBe={border:{themeKey:"borders",transform:Qd},borderTop:{themeKey:"borders",transform:Qd},borderRight:{themeKey:"borders",transform:Qd},borderBottom:{themeKey:"borders",transform:Qd},borderLeft:{themeKey:"borders",transform:Qd},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Qd},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:TP},color:{themeKey:"palette",transform:ew},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ew},backgroundColor:{themeKey:"palette",transform:ew},p:{style:ia},pt:{style:ia},pr:{style:ia},pb:{style:ia},pl:{style:ia},px:{style:ia},py:{style:ia},padding:{style:ia},paddingTop:{style:ia},paddingRight:{style:ia},paddingBottom:{style:ia},paddingLeft:{style:ia},paddingX:{style:ia},paddingY:{style:ia},paddingInline:{style:ia},paddingInlineStart:{style:ia},paddingInlineEnd:{style:ia},paddingBlock:{style:ia},paddingBlockStart:{style:ia},paddingBlockEnd:{style:ia},m:{style:na},mt:{style:na},mr:{style:na},mb:{style:na},ml:{style:na},mx:{style:na},my:{style:na},margin:{style:na},marginTop:{style:na},marginRight:{style:na},marginBottom:{style:na},marginLeft:{style:na},marginX:{style:na},marginY:{style:na},marginInline:{style:na},marginInlineStart:{style:na},marginInlineEnd:{style:na},marginBlock:{style:na},marginBlockStart:{style:na},marginBlockEnd:{style:na},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:RP},rowGap:{style:OP},columnGap:{style:IP},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:xA},maxWidth:{style:zV},minWidth:{transform:xA},height:{transform:xA},maxHeight:{transform:xA},minHeight:{transform:xA},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},FT=NBe;function BBe(...e){const t=e.reduce((s,c)=>s.concat(Object.keys(c)),[]),i=new Set(t);return e.every(s=>i.size===Object.keys(s).length)}function LBe(e,t){return typeof e=="function"?e(t):e}function PBe(){function e(i,s,c,u){const f={[i]:s,theme:c},p=u[i];if(!p)return{[i]:s};const{cssProperty:m=i,themeKey:E,transform:w,style:T}=p;if(s==null)return null;if(E==="typography"&&s==="inherit")return{[i]:s};const N=SP(c,E)||{};return T?T(f):wh(f,s,P=>{let M=VB(N,w,P);return P===M&&typeof P=="string"&&(M=VB(N,w,`${i}${P==="default"?"":Ur(P)}`,P)),m===!1?M:{[m]:M}})}function t(i){const{sx:s,theme:c={}}=i||{};if(!s)return null;const u=c.unstable_sxConfig??FT;function f(p){let m=p;if(typeof p=="function")m=p(c);else if(typeof p!="object")return p;if(!m)return null;const E=Yle(c.breakpoints),w=Object.keys(E);let T=E;return Object.keys(m).forEach(N=>{const O=LBe(m[N],c);if(O!=null)if(typeof O=="object")if(u[N])T=NC(T,e(N,O,c,u));else{const P=wh({theme:c},O,M=>({[N]:M}));BBe(P,O)?T[N]=t({sx:O,theme:c}):T=NC(T,P)}else T=NC(T,e(N,O,c,u))}),FNe(c,Xle(w,T))}return Array.isArray(s)?s.map(f):f(s)}return t}const eue=PBe();eue.filterProps=["sx"];const i_=eue;function kBe(e,t){var s;const i=this;if(i.vars){if(!((s=i.colorSchemes)!=null&&s[e])||typeof i.getColorSchemeSelector!="function")return{};let c=i.getColorSchemeSelector(e);return c==="&"?t:((c.includes("data-")||c.includes("."))&&(c=`*:where(${c.replace(/\s*&$/,"")}) &`),{[c]:t})}return i.palette.mode===e?t:{}}function Bw(e={},...t){const{breakpoints:i={},palette:s={},spacing:c,shape:u={},...f}=e,p=MNe(i),m=Zle(c);let E=kc({breakpoints:p,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:m,shape:{...KNe,...u}},f);return E=HNe(E),E.applyStyles=kBe,E=t.reduce((w,T)=>kc(w,T),E),E.unstable_sxConfig={...FT,...f==null?void 0:f.unstable_sxConfig},E.unstable_sx=function(T){return i_({sx:T,theme:this})},E}function DBe(e){return Object.keys(e).length===0}function tue(e=null){const t=he.useContext(xT);return!t||DBe(t)?e:t}const xBe=Bw();function VT(e=xBe){return tue(e)}function UBe({styles:e,themeId:t,defaultTheme:i={}}){const s=VT(i),c=typeof e=="function"?e(t&&s[t]||s):e;return oe.jsx(Wle,{styles:c})}const MBe=e=>{var s;const t={systemProps:{},otherProps:{}},i=((s=e==null?void 0:e.theme)==null?void 0:s.unstable_sxConfig)??FT;return Object.keys(e).forEach(c=>{i[c]?t.systemProps[c]=e[c]:t.otherProps[c]=e[c]}),t};function NP(e){const{sx:t,...i}=e,{systemProps:s,otherProps:c}=MBe(i);let u;return Array.isArray(t)?u=[s,...t]:typeof t=="function"?u=(...f)=>{const p=t(...f);return Kp(p)?{...s,...p}:s}:u={...s,...t},{...c,sx:u}}const dte=e=>e,FBe=()=>{let e=dte;return{configure(t){e=t},generate(t){return e(t)},reset(){e=dte}}},VBe=FBe(),rue=VBe;function nue(e){var t,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(i=nue(e[t]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}function nn(){for(var e,t,i=0,s="",c=arguments.length;i<c;i++)(e=arguments[i])&&(t=nue(e))&&(s&&(s+=" "),s+=t);return s}function QBe(e={}){const{themeId:t,defaultTheme:i,defaultClassName:s="MuiBox-root",generateClassName:c}=e,u=Gle("div",{shouldForwardProp:p=>p!=="theme"&&p!=="sx"&&p!=="as"})(i_);return he.forwardRef(function(m,E){const w=VT(i),{className:T,component:N="div",...O}=NP(m);return oe.jsx(u,{as:N,ref:E,className:nn(T,c?c(s):s),theme:t&&w[t]||w,...O})})}const HBe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Qn(e,t,i="Mui"){const s=HBe[t];return s?`${i}-${s}`:`${rue.generate(e)}-${t}`}function Un(e,t,i="Mui"){const s={};return t.forEach(c=>{s[c]=Qn(e,c,i)}),s}function iue(e){const{variants:t,...i}=e,s={variants:t,style:lte(i),isProcessed:!0};return s.style===i||t&&t.forEach(c=>{typeof c.style!="function"&&(c.style=lte(c.style))}),s}const jBe=Bw();function GM(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function KBe(e){return e?(t,i)=>i[e]:null}function WBe(e,t,i){e.theme=$Be(e.theme)?i:e.theme[t]||e.theme}function UN(e,t){const i=typeof t=="function"?t(e):t;if(Array.isArray(i))return i.flatMap(s=>UN(e,s));if(Array.isArray(i==null?void 0:i.variants)){let s;if(i.isProcessed)s=i.style;else{const{variants:c,...u}=i;s=u}return oue(e,i.variants,[s])}return i!=null&&i.isProcessed?i.style:i}function oue(e,t,i=[]){var c;let s;e:for(let u=0;u<t.length;u+=1){const f=t[u];if(typeof f.props=="function"){if(s??(s={...e,...e.ownerState,ownerState:e.ownerState}),!f.props(s))continue}else for(const p in f.props)if(e[p]!==f.props[p]&&((c=e.ownerState)==null?void 0:c[p])!==f.props[p])continue e;typeof f.style=="function"?(s??(s={...e,...e.ownerState,ownerState:e.ownerState}),i.push(f.style(s))):i.push(f.style)}return i}function sue(e={}){const{themeId:t,defaultTheme:i=jBe,rootShouldForwardProp:s=GM,slotShouldForwardProp:c=GM}=e;function u(p){WBe(p,t,i)}return(p,m={})=>{kNe(p,J=>J.filter(ie=>ie!==i_));const{name:E,slot:w,skipVariantsResolver:T,skipSx:N,overridesResolver:O=KBe(qBe(w)),...P}=m,M=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,Q=N||!1;let k=GM;w==="Root"||w==="root"?k=s:w?k=c:zBe(p)&&(k=void 0);const D=Gle(p,{shouldForwardProp:k,label:GBe(),...P}),V=J=>{if(J.__emotion_real===J)return J;if(typeof J=="function")return function(fe){return UN(fe,J)};if(Kp(J)){const ie=iue(J);return ie.variants?function(Z){return UN(Z,ie)}:ie.style}return J},K=(...J)=>{const ie=[],fe=J.map(V),Z=[];if(ie.push(u),E&&O&&Z.push(function(le){var xe,Me;const ge=(Me=(xe=le.theme.components)==null?void 0:xe[E])==null?void 0:Me.styleOverrides;if(!ge)return null;const se={};for(const Be in ge)se[Be]=UN(le,ge[Be]);return O(le,se)}),E&&!M&&Z.push(function(le){var se,xe;const ae=le.theme,ge=(xe=(se=ae==null?void 0:ae.components)==null?void 0:se[E])==null?void 0:xe.variants;return ge?oue(le,ge):null}),Q||Z.push(i_),Array.isArray(fe[0])){const te=fe.shift(),le=new Array(ie.length).fill(""),ae=new Array(Z.length).fill("");let ge;ge=[...le,...te,...ae],ge.raw=[...le,...te.raw,...ae],ie.unshift(ge)}const pe=[...ie,...fe,...Z],Y=D(...pe);return p.muiName&&(Y.muiName=p.muiName),Y};return D.withConfig&&(K.withConfig=D.withConfig),K}}function GBe(e,t){let i;return i}function $Be(e){for(const t in e)return!1;return!0}function zBe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function qBe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const YBe=sue(),qV=YBe;function dT(e,t){const i={...t};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const c=s;if(c==="components"||c==="slots")i[c]={...e[c],...i[c]};else if(c==="componentsProps"||c==="slotProps"){const u=e[c],f=t[c];if(!f)i[c]=u||{};else if(!u)i[c]=f;else{i[c]={...f};for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=p;i[c][m]=dT(u[m],f[m])}}}else i[c]===void 0&&(i[c]=e[c])}return i}function XBe(e){const{theme:t,name:i,props:s}=e;return!t||!t.components||!t.components[i]||!t.components[i].defaultProps?s:dT(t.components[i].defaultProps,s)}function YV({props:e,name:t,defaultTheme:i,themeId:s}){let c=VT(i);return s&&(c=c[s]||c),XBe({theme:c,name:t,props:e})}const JBe=typeof window<"u"?he.useLayoutEffect:he.useEffect,Sh=JBe;function ZBe(e,t=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,i))}function XV(e,t=0,i=1){return ZBe(e,t,i)}function eLe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(s=>s+s)),i?`rgb${i.length===4?"a":""}(${i.map((s,c)=>c<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function a0(e){if(e.type)return e;if(e.charAt(0)==="#")return a0(eLe(e));const t=e.indexOf("("),i=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(um(9,e));let s=e.substring(t+1,e.length-1),c;if(i==="color"){if(s=s.split(" "),c=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(c))throw new Error(um(10,c))}else s=s.split(",");return s=s.map(u=>parseFloat(u)),{type:i,values:s,colorSpace:c}}const tLe=e=>{const t=a0(e);return t.values.slice(0,3).map((i,s)=>t.type.includes("hsl")&&s!==0?`${i}%`:i).join(" ")},sC=(e,t)=>{try{return tLe(e)}catch{return e}};function BP(e){const{type:t,colorSpace:i}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((c,u)=>u<3?parseInt(c,10):c):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${i} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function aue(e){e=a0(e);const{values:t}=e,i=t[0],s=t[1]/100,c=t[2]/100,u=s*Math.min(c,1-c),f=(E,w=(E+i/30)%12)=>c-u*Math.max(Math.min(w-3,9-w,1),-1);let p="rgb";const m=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(p+="a",m.push(t[3])),BP({type:p,values:m})}function HF(e){e=a0(e);let t=e.type==="hsl"||e.type==="hsla"?a0(aue(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function rLe(e,t){const i=HF(e),s=HF(t);return(Math.max(i,s)+.05)/(Math.min(i,s)+.05)}function Bc(e,t){return e=a0(e),t=XV(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,BP(e)}function wO(e,t,i){try{return Bc(e,t)}catch{return e}}function fT(e,t){if(e=a0(e),t=XV(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return BP(e)}function Qo(e,t,i){try{return fT(e,t)}catch{return e}}function hT(e,t){if(e=a0(e),t=XV(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return BP(e)}function Ho(e,t,i){try{return hT(e,t)}catch{return e}}function jF(e,t=.15){return HF(e)>.5?fT(e,t):hT(e,t)}function SO(e,t,i){try{return jF(e,t)}catch{return e}}const nLe=he.createContext(null),cue=nLe;function JV(){return he.useContext(cue)}const iLe=typeof Symbol=="function"&&Symbol.for,oLe=iLe?Symbol.for("mui.nested"):"__THEME_NESTED__";function sLe(e,t){return typeof t=="function"?t(e):{...e,...t}}function aLe(e){const{children:t,theme:i}=e,s=JV(),c=he.useMemo(()=>{const u=s===null?{...i}:sLe(s,i);return u!=null&&(u[oLe]=s!==null),u},[i,s]);return oe.jsx(cue.Provider,{value:c,children:t})}const lue=he.createContext();function cLe({value:e,...t}){return oe.jsx(lue.Provider,{value:e??!0,...t})}const ZV=()=>he.useContext(lue)??!1,uue=he.createContext(void 0);function lLe({value:e,children:t}){return oe.jsx(uue.Provider,{value:e,children:t})}function uLe(e){const{theme:t,name:i,props:s}=e;if(!t||!t.components||!t.components[i])return s;const c=t.components[i];return c.defaultProps?dT(c.defaultProps,s):!c.styleOverrides&&!c.variants?dT(c,s):s}function ALe({props:e,name:t}){const i=he.useContext(uue);return uLe({props:e,name:t,theme:{components:i}})}const fte={};function hte(e,t,i,s=!1){return he.useMemo(()=>{const c=e&&t[e]||t;if(typeof i=="function"){const u=i(c),f=e?{...t,[e]:u}:u;return s?()=>f:f}return e?{...t,[e]:i}:{...t,...i}},[e,t,i,s])}function Aue(e){const{children:t,theme:i,themeId:s}=e,c=tue(fte),u=JV()||fte,f=hte(s,c,i),p=hte(s,u,i,!0),m=(s?f[s]:f).direction==="rtl";return oe.jsx(aLe,{theme:p,children:oe.jsx(xT.Provider,{value:f,children:oe.jsx(cLe,{value:m,children:oe.jsx(lLe,{value:s?f[s].components:f.components,children:t})})})})}const pte={theme:void 0};function dLe(e){let t,i;return function(c){let u=t;return(u===void 0||c.theme!==i)&&(pte.theme=c.theme,u=iue(e(pte)),t=u,i=c.theme),u}}const eQ="mode",tQ="color-scheme",fLe="data-color-scheme";function hLe(e){const{defaultMode:t="system",defaultLightColorScheme:i="light",defaultDarkColorScheme:s="dark",modeStorageKey:c=eQ,colorSchemeStorageKey:u=tQ,attribute:f=fLe,colorSchemeNode:p="document.documentElement",nonce:m}=e||{};let E="",w=f;if(f==="class"&&(w=".%s"),f==="data"&&(w="[data-%s]"),w.startsWith(".")){const N=w.substring(1);E+=`${p}.classList.remove('${N}'.replace('%s', light), '${N}'.replace('%s', dark));
      ${p}.classList.add('${N}'.replace('%s', colorScheme));`}const T=w.match(/\[([^\]]+)\]/);if(T){const[N,O]=T[1].split("=");O||(E+=`${p}.removeAttribute('${N}'.replace('%s', light));
      ${p}.removeAttribute('${N}'.replace('%s', dark));`),E+=`
      ${p}.setAttribute('${N}'.replace('%s', colorScheme), ${O?`${O}.replace('%s', colorScheme)`:'""'});`}else E+=`${p}.setAttribute('${w}', colorScheme);`;return oe.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?m:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${c}') || '${t}';
  const dark = localStorage.getItem('${u}-dark') || '${s}';
  const light = localStorage.getItem('${u}-light') || '${i}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${E}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function pLe(){}const gLe=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(i){if(typeof window>"u")return;if(!t)return i;let s;try{s=t.localStorage.getItem(e)}catch{}return s||i},set:i=>{if(t)try{t.localStorage.setItem(e,i)}catch{}},subscribe:i=>{if(!t)return pLe;const s=c=>{const u=c.newValue;c.key===e&&i(u)};return t.addEventListener("storage",s),()=>{t.removeEventListener("storage",s)}}}),mLe=gLe;function $M(){}function gte(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function due(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function vLe(e){return due(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function _Le(e){const{defaultMode:t="light",defaultLightColorScheme:i,defaultDarkColorScheme:s,supportedColorSchemes:c=[],modeStorageKey:u=eQ,colorSchemeStorageKey:f=tQ,storageWindow:p=typeof window>"u"?void 0:window,storageManager:m=mLe,noSsr:E=!1}=e,w=c.join(","),T=c.length>1,N=he.useMemo(()=>m==null?void 0:m({key:u,storageWindow:p}),[m,u,p]),O=he.useMemo(()=>m==null?void 0:m({key:`${f}-light`,storageWindow:p}),[m,f,p]),P=he.useMemo(()=>m==null?void 0:m({key:`${f}-dark`,storageWindow:p}),[m,f,p]),[M,Q]=he.useState(()=>{const Z=(N==null?void 0:N.get(t))||t,pe=(O==null?void 0:O.get(i))||i,Y=(P==null?void 0:P.get(s))||s;return{mode:Z,systemMode:gte(Z),lightColorScheme:pe,darkColorScheme:Y}}),[k,D]=he.useState(E||!T);he.useEffect(()=>{D(!0)},[]);const V=vLe(M),K=he.useCallback(Z=>{Q(pe=>{if(Z===pe.mode)return pe;const Y=Z??t;return N==null||N.set(Y),{...pe,mode:Y,systemMode:gte(Y)}})},[N,t]),J=he.useCallback(Z=>{Z?typeof Z=="string"?Z&&!w.includes(Z)?console.error(`\`${Z}\` does not exist in \`theme.colorSchemes\`.`):Q(pe=>{const Y={...pe};return due(pe,te=>{te==="light"&&(O==null||O.set(Z),Y.lightColorScheme=Z),te==="dark"&&(P==null||P.set(Z),Y.darkColorScheme=Z)}),Y}):Q(pe=>{const Y={...pe},te=Z.light===null?i:Z.light,le=Z.dark===null?s:Z.dark;return te&&(w.includes(te)?(Y.lightColorScheme=te,O==null||O.set(te)):console.error(`\`${te}\` does not exist in \`theme.colorSchemes\`.`)),le&&(w.includes(le)?(Y.darkColorScheme=le,P==null||P.set(le)):console.error(`\`${le}\` does not exist in \`theme.colorSchemes\`.`)),Y}):Q(pe=>(O==null||O.set(i),P==null||P.set(s),{...pe,lightColorScheme:i,darkColorScheme:s}))},[w,O,P,i,s]),ie=he.useCallback(Z=>{M.mode==="system"&&Q(pe=>{const Y=Z!=null&&Z.matches?"dark":"light";return pe.systemMode===Y?pe:{...pe,systemMode:Y}})},[M.mode]),fe=he.useRef(ie);return fe.current=ie,he.useEffect(()=>{if(typeof window.matchMedia!="function"||!T)return;const Z=(...Y)=>fe.current(...Y),pe=window.matchMedia("(prefers-color-scheme: dark)");return pe.addListener(Z),Z(pe),()=>{pe.removeListener(Z)}},[T]),he.useEffect(()=>{if(T){const Z=(N==null?void 0:N.subscribe(te=>{(!te||["light","dark","system"].includes(te))&&K(te||t)}))||$M,pe=(O==null?void 0:O.subscribe(te=>{(!te||w.match(te))&&J({light:te})}))||$M,Y=(P==null?void 0:P.subscribe(te=>{(!te||w.match(te))&&J({dark:te})}))||$M;return()=>{Z(),pe(),Y()}}},[J,K,w,t,p,T,N,O,P]),{...M,mode:k?M.mode:void 0,systemMode:k?M.systemMode:void 0,colorScheme:k?V:void 0,setMode:K,setColorScheme:J}}const yLe="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function ELe(e){const{themeId:t,theme:i={},modeStorageKey:s=eQ,colorSchemeStorageKey:c=tQ,disableTransitionOnChange:u=!1,defaultColorScheme:f,resolveTheme:p}=e,m={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},E=he.createContext(void 0),w=()=>he.useContext(E)||m,T={},N={};function O(k){var Xr,Kt,yr,nr;const{children:D,theme:V,modeStorageKey:K=s,colorSchemeStorageKey:J=c,disableTransitionOnChange:ie=u,storageManager:fe,storageWindow:Z=typeof window>"u"?void 0:window,documentNode:pe=typeof document>"u"?void 0:document,colorSchemeNode:Y=typeof document>"u"?void 0:document.documentElement,disableNestedContext:te=!1,disableStyleSheetGeneration:le=!1,defaultMode:ae="system",forceThemeRerender:ge=!1,noSsr:se}=k,xe=he.useRef(!1),Me=JV(),Be=he.useContext(E),ke=!!Be&&!te,Ke=he.useMemo(()=>V||(typeof i=="function"?i():i),[V]),ht=Ke[t],ve=ht||Ke,{colorSchemes:Oe=T,components:Ue=N,cssVarPrefix:Fe}=ve,Qe=Object.keys(Oe).filter(er=>!!Oe[er]).join(","),We=he.useMemo(()=>Qe.split(","),[Qe]),et=typeof f=="string"?f:f.light,Ze=typeof f=="string"?f:f.dark,pt=Oe[et]&&Oe[Ze]?ae:((Kt=(Xr=Oe[ve.defaultColorScheme])==null?void 0:Xr.palette)==null?void 0:Kt.mode)||((yr=ve.palette)==null?void 0:yr.mode),{mode:at,setMode:Rt,systemMode:Ot,lightColorScheme:Ft,darkColorScheme:lt,colorScheme:He,setColorScheme:vr}=_Le({supportedColorSchemes:We,defaultLightColorScheme:et,defaultDarkColorScheme:Ze,modeStorageKey:K,colorSchemeStorageKey:J,defaultMode:pt,storageManager:fe,storageWindow:Z,noSsr:se});let qt=at,Nt=He;ke&&(qt=Be.mode,Nt=Be.colorScheme);let It=Nt||ve.defaultColorScheme;ve.vars&&!ge&&(It=ve.defaultColorScheme);const Yt=he.useMemo(()=>{var tn;const er=((tn=ve.generateThemeVars)==null?void 0:tn.call(ve))||ve.vars,vt={...ve,components:Ue,colorSchemes:Oe,cssVarPrefix:Fe,vars:er};if(typeof vt.generateSpacing=="function"&&(vt.spacing=vt.generateSpacing()),It){const Rr=Oe[It];Rr&&typeof Rr=="object"&&Object.keys(Rr).forEach(on=>{Rr[on]&&typeof Rr[on]=="object"?vt[on]={...vt[on],...Rr[on]}:vt[on]=Rr[on]})}return p?p(vt):vt},[ve,It,Ue,Oe,Fe]),Bt=ve.colorSchemeSelector;Sh(()=>{if(Nt&&Y&&Bt&&Bt!=="media"){const er=Bt;let vt=Bt;if(er==="class"&&(vt=".%s"),er==="data"&&(vt="[data-%s]"),er!=null&&er.startsWith("data-")&&!er.includes("%s")&&(vt=`[${er}="%s"]`),vt.startsWith("."))Y.classList.remove(...We.map(tn=>vt.substring(1).replace("%s",tn))),Y.classList.add(vt.substring(1).replace("%s",Nt));else{const tn=vt.replace("%s",Nt).match(/\[([^\]]+)\]/);if(tn){const[Rr,on]=tn[1].split("=");on||We.forEach(sr=>{Y.removeAttribute(Rr.replace(Nt,sr))}),Y.setAttribute(Rr,on?on.replace(/"|'/g,""):"")}else Y.setAttribute(vt,Nt)}}},[Nt,Bt,Y,We]),he.useEffect(()=>{let er;if(ie&&xe.current&&pe){const vt=pe.createElement("style");vt.appendChild(pe.createTextNode(yLe)),pe.head.appendChild(vt),window.getComputedStyle(pe.body),er=setTimeout(()=>{pe.head.removeChild(vt)},1)}return()=>{clearTimeout(er)}},[Nt,ie,pe]),he.useEffect(()=>(xe.current=!0,()=>{xe.current=!1}),[]);const _r=he.useMemo(()=>({allColorSchemes:We,colorScheme:Nt,darkColorScheme:lt,lightColorScheme:Ft,mode:qt,setColorScheme:vr,setMode:Rt,systemMode:Ot}),[We,Nt,lt,Ft,qt,vr,Rt,Ot,Yt.colorSchemeSelector]);let ar=!0;(le||ve.cssVariables===!1||ke&&(Me==null?void 0:Me.cssVarPrefix)===Fe)&&(ar=!1);const zr=oe.jsxs(he.Fragment,{children:[oe.jsx(Aue,{themeId:ht?t:void 0,theme:Yt,children:D}),ar&&oe.jsx(Wle,{styles:((nr=Yt.generateStyleSheets)==null?void 0:nr.call(Yt))||[]})]});return ke?zr:oe.jsx(E.Provider,{value:_r,children:zr})}const P=typeof f=="string"?f:f.light,M=typeof f=="string"?f:f.dark;return{CssVarsProvider:O,useColorScheme:w,getInitColorSchemeScript:k=>hLe({colorSchemeStorageKey:c,defaultLightColorScheme:P,defaultDarkColorScheme:M,modeStorageKey:s,...k})}}function wLe(e=""){function t(...s){if(!s.length)return"";const c=s[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...s.slice(1))})`:`, ${c}`}return(s,...c)=>`var(--${e?`${e}-`:""}${s}${t(...c)})`}const mte=(e,t,i,s=[])=>{let c=e;t.forEach((u,f)=>{f===t.length-1?Array.isArray(c)?c[Number(u)]=i:c&&typeof c=="object"&&(c[u]=i):c&&typeof c=="object"&&(c[u]||(c[u]=s.includes(u)?[]:{}),c=c[u])})},SLe=(e,t,i)=>{function s(c,u=[],f=[]){Object.entries(c).forEach(([p,m])=>{(!i||i&&!i([...u,p]))&&m!=null&&(typeof m=="object"&&Object.keys(m).length>0?s(m,[...u,p],Array.isArray(m)?[...f,p]:f):t([...u,p],m,f))})}s(e)},bLe=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function zM(e,t){const{prefix:i,shouldSkipGeneratingVar:s}=t||{},c={},u={},f={};return SLe(e,(p,m,E)=>{if((typeof m=="string"||typeof m=="number")&&(!s||!s(p,m))){const w=`--${i?`${i}-`:""}${p.join("-")}`,T=bLe(p,m);Object.assign(c,{[w]:T}),mte(u,p,`var(${w})`,E),mte(f,p,`var(${w}, ${T})`,E)}},p=>p[0]==="vars"),{css:c,vars:u,varsWithDefaults:f}}function CLe(e,t={}){const{getSelector:i=Q,disableCssColorScheme:s,colorSchemeSelector:c}=t,{colorSchemes:u={},components:f,defaultColorScheme:p="light",...m}=e,{vars:E,css:w,varsWithDefaults:T}=zM(m,t);let N=T;const O={},{[p]:P,...M}=u;if(Object.entries(M||{}).forEach(([V,K])=>{const{vars:J,css:ie,varsWithDefaults:fe}=zM(K,t);N=kc(N,fe),O[V]={css:ie,vars:J}}),P){const{css:V,vars:K,varsWithDefaults:J}=zM(P,t);N=kc(N,J),O[p]={css:V,vars:K}}function Q(V,K){var ie,fe;let J=c;if(c==="class"&&(J=".%s"),c==="data"&&(J="[data-%s]"),c!=null&&c.startsWith("data-")&&!c.includes("%s")&&(J=`[${c}="%s"]`),V){if(J==="media")return e.defaultColorScheme===V?":root":{[`@media (prefers-color-scheme: ${((fe=(ie=u[V])==null?void 0:ie.palette)==null?void 0:fe.mode)||V})`]:{":root":K}};if(J)return e.defaultColorScheme===V?`:root, ${J.replace("%s",String(V))}`:J.replace("%s",String(V))}return":root"}return{vars:N,generateThemeVars:()=>{let V={...E};return Object.entries(O).forEach(([,{vars:K}])=>{V=kc(V,K)}),V},generateStyleSheets:()=>{var Z,pe;const V=[],K=e.defaultColorScheme||"light";function J(Y,te){Object.keys(te).length&&V.push(typeof Y=="string"?{[Y]:{...te}}:Y)}J(i(void 0,{...w}),w);const{[K]:ie,...fe}=O;if(ie){const{css:Y}=ie,te=(pe=(Z=u[K])==null?void 0:Z.palette)==null?void 0:pe.mode,le=!s&&te?{colorScheme:te,...Y}:{...Y};J(i(K,{...le}),le)}return Object.entries(fe).forEach(([Y,{css:te}])=>{var ge,se;const le=(se=(ge=u[Y])==null?void 0:ge.palette)==null?void 0:se.mode,ae=!s&&le?{colorScheme:le,...te}:{...te};J(i(Y,{...ae}),ae)}),V}}}function TLe(e){return function(i){return e==="media"?`@media (prefers-color-scheme: ${i})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${i}"] &`:e==="class"?`.${i} &`:e==="data"?`[data-${i}] &`:`${e.replace("%s",i)} &`:"&"}}function Hn(e,t,i=void 0){const s={};for(const c in e){const u=e[c];let f="",p=!0;for(let m=0;m<u.length;m+=1){const E=u[m];E&&(f+=(p===!0?"":" ")+t(E),p=!1,i&&i[E]&&(f+=" "+i[E]))}s[c]=f}return s}const RLe=Bw(),ILe=qV("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`maxWidth${Ur(String(i.maxWidth))}`],i.fixed&&t.fixed,i.disableGutters&&t.disableGutters]}}),OLe=e=>YV({props:e,name:"MuiContainer",defaultTheme:RLe}),NLe=(e,t)=>{const i=m=>Qn(t,m),{classes:s,fixed:c,disableGutters:u,maxWidth:f}=e,p={root:["root",f&&`maxWidth${Ur(String(f))}`,c&&"fixed",u&&"disableGutters"]};return Hn(p,i,s)};function BLe(e={}){const{createStyledComponent:t=ILe,useThemeProps:i=OLe,componentName:s="MuiContainer"}=e,c=t(({theme:f,ownerState:p})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!p.disableGutters&&{paddingLeft:f.spacing(2),paddingRight:f.spacing(2),[f.breakpoints.up("sm")]:{paddingLeft:f.spacing(3),paddingRight:f.spacing(3)}}}),({theme:f,ownerState:p})=>p.fixed&&Object.keys(f.breakpoints.values).reduce((m,E)=>{const w=E,T=f.breakpoints.values[w];return T!==0&&(m[f.breakpoints.up(w)]={maxWidth:`${T}${f.breakpoints.unit}`}),m},{}),({theme:f,ownerState:p})=>({...p.maxWidth==="xs"&&{[f.breakpoints.up("xs")]:{maxWidth:Math.max(f.breakpoints.values.xs,444)}},...p.maxWidth&&p.maxWidth!=="xs"&&{[f.breakpoints.up(p.maxWidth)]:{maxWidth:`${f.breakpoints.values[p.maxWidth]}${f.breakpoints.unit}`}}}));return he.forwardRef(function(p,m){const E=i(p),{className:w,component:T="div",disableGutters:N=!1,fixed:O=!1,maxWidth:P="lg",classes:M,...Q}=E,k={...E,component:T,disableGutters:N,fixed:O,maxWidth:P},D=NLe(k,s);return oe.jsx(c,{as:T,ownerState:k,className:nn(D.root,w),ref:m,...Q})})}function MN(e,t){var i,s,c;return he.isValidElement(e)&&t.indexOf(e.type.muiName??((c=(s=(i=e.type)==null?void 0:i._payload)==null?void 0:s.value)==null?void 0:c.muiName))!==-1}const LLe=(e,t)=>e.filter(i=>t.includes(i)),Lw=(e,t,i)=>{const s=e.keys[0];Array.isArray(t)?t.forEach((c,u)=>{i((f,p)=>{u<=e.keys.length-1&&(u===0?Object.assign(f,p):f[e.up(e.keys[u])]=p)},c)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:LLe(e.keys,Object.keys(t))).forEach(u=>{if(e.keys.includes(u)){const f=t[u];f!==void 0&&i((p,m)=>{s===u?Object.assign(p,m):p[e.up(u)]=m},f)}}):(typeof t=="number"||typeof t=="string")&&i((c,u)=>{Object.assign(c,u)},t)};function QB(e){return`--Grid-${e}Spacing`}function LP(e){return`--Grid-parent-${e}Spacing`}const vte="--Grid-columns",tw="--Grid-parent-columns",PLe=({theme:e,ownerState:t})=>{const i={};return Lw(e.breakpoints,t.size,(s,c)=>{let u={};c==="grow"&&(u={flexBasis:0,flexGrow:1,maxWidth:"100%"}),c==="auto"&&(u={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof c=="number"&&(u={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${c} / var(${tw}) - (var(${tw}) - ${c}) * (var(${LP("column")}) / var(${tw})))`}),s(i,u)}),i},kLe=({theme:e,ownerState:t})=>{const i={};return Lw(e.breakpoints,t.offset,(s,c)=>{let u={};c==="auto"&&(u={marginLeft:"auto"}),typeof c=="number"&&(u={marginLeft:c===0?"0px":`calc(100% * ${c} / var(${tw}) + var(${LP("column")}) * ${c} / var(${tw}))`}),s(i,u)}),i},DLe=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={[vte]:12};return Lw(e.breakpoints,t.columns,(s,c)=>{const u=c??12;s(i,{[vte]:u,"> *":{[tw]:u}})}),i},xLe=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={};return Lw(e.breakpoints,t.rowSpacing,(s,c)=>{var f;const u=typeof c=="string"?c:(f=e.spacing)==null?void 0:f.call(e,c);s(i,{[QB("row")]:u,"> *":{[LP("row")]:u}})}),i},ULe=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={};return Lw(e.breakpoints,t.columnSpacing,(s,c)=>{var f;const u=typeof c=="string"?c:(f=e.spacing)==null?void 0:f.call(e,c);s(i,{[QB("column")]:u,"> *":{[LP("column")]:u}})}),i},MLe=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={};return Lw(e.breakpoints,t.direction,(s,c)=>{s(i,{flexDirection:c})}),i},FLe=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${QB("row")}) var(${QB("column")})`}}),VLe=e=>{const t=[];return Object.entries(e).forEach(([i,s])=>{s!==!1&&s!==void 0&&t.push(`grid-${i}-${String(s)}`)}),t},QLe=(e,t="xs")=>{function i(s){return s===void 0?!1:typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"&&s>0}if(i(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const s=[];return Object.entries(e).forEach(([c,u])=>{i(u)&&s.push(`spacing-${c}-${String(u)}`)}),s}return[]},HLe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,i])=>`direction-${t}-${i}`):[`direction-xs-${String(e)}`];function jLe(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(i=>{e[i]!==void 0&&delete e[i]})}const KLe=Bw(),WLe=qV("div",{name:"MuiGrid",slot:"Root"});function GLe(e){return YV({props:e,name:"MuiGrid",defaultTheme:KLe})}function $Le(e={}){const{createStyledComponent:t=WLe,useThemeProps:i=GLe,useTheme:s=VT,componentName:c="MuiGrid"}=e,u=(E,w)=>{const{container:T,direction:N,spacing:O,wrap:P,size:M}=E,Q={root:["root",T&&"container",P!=="wrap"&&`wrap-xs-${String(P)}`,...HLe(N),...VLe(M),...T?QLe(O,w.breakpoints.keys[0]):[]]};return Hn(Q,k=>Qn(c,k),{})};function f(E,w,T=()=>!0){const N={};return E===null||(Array.isArray(E)?E.forEach((O,P)=>{O!==null&&T(O)&&w.keys[P]&&(N[w.keys[P]]=O)}):typeof E=="object"?Object.keys(E).forEach(O=>{const P=E[O];P!=null&&T(P)&&(N[O]=P)}):N[w.keys[0]]=E),N}const p=t(DLe,ULe,xLe,PLe,MLe,FLe,kLe),m=he.forwardRef(function(w,T){const N=s(),O=i(w),P=NP(O);jLe(P,N.breakpoints);const{className:M,children:Q,columns:k=12,container:D=!1,component:V="div",direction:K="row",wrap:J="wrap",size:ie={},offset:fe={},spacing:Z=0,rowSpacing:pe=Z,columnSpacing:Y=Z,unstable_level:te=0,...le}=P,ae=f(ie,N.breakpoints,ht=>ht!==!1),ge=f(fe,N.breakpoints),se=w.columns??(te?void 0:k),xe=w.spacing??(te?void 0:Z),Me=w.rowSpacing??w.spacing??(te?void 0:pe),Be=w.columnSpacing??w.spacing??(te?void 0:Y),ke={...P,level:te,columns:se,container:D,direction:K,wrap:J,spacing:xe,rowSpacing:Me,columnSpacing:Be,size:ae,offset:ge},Ke=u(ke,N);return oe.jsx(p,{ref:T,as:V,ownerState:ke,className:nn(Ke.root,M),...le,children:he.Children.map(Q,ht=>{var ve;return he.isValidElement(ht)&&MN(ht,["Grid"])&&D&&ht.props.container?he.cloneElement(ht,{unstable_level:((ve=ht.props)==null?void 0:ve.unstable_level)??te+1}):ht})})});return m.muiName="Grid",m}const zLe=Bw(),qLe=qV("div",{name:"MuiStack",slot:"Root"});function YLe(e){return YV({props:e,name:"MuiStack",defaultTheme:zLe})}function XLe(e,t){const i=he.Children.toArray(e).filter(Boolean);return i.reduce((s,c,u)=>(s.push(c),u<i.length-1&&s.push(he.cloneElement(t,{key:`separator-${u}`})),s),[])}const JLe=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],ZLe=({ownerState:e,theme:t})=>{let i={display:"flex",flexDirection:"column",...wh({theme:t},WM({values:e.direction,breakpoints:t.breakpoints.values}),s=>({flexDirection:s}))};if(e.spacing){const s=bP(t),c=Object.keys(t.breakpoints.values).reduce((m,E)=>((typeof e.spacing=="object"&&e.spacing[E]!=null||typeof e.direction=="object"&&e.direction[E]!=null)&&(m[E]=!0),m),{}),u=WM({values:e.direction,base:c}),f=WM({values:e.spacing,base:c});typeof u=="object"&&Object.keys(u).forEach((m,E,w)=>{if(!u[m]){const N=E>0?u[w[E-1]]:"column";u[m]=N}}),i=kc(i,wh({theme:t},f,(m,E)=>e.useFlexGap?{gap:n_(s,m)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${JLe(E?u[E]:e.direction)}`]:n_(s,m)}}))}return i=GNe(t.breakpoints,i),i};function ePe(e={}){const{createStyledComponent:t=qLe,useThemeProps:i=YLe,componentName:s="MuiStack"}=e,c=()=>Hn({root:["root"]},m=>Qn(s,m),{}),u=t(ZLe);return he.forwardRef(function(m,E){const w=i(m),T=NP(w),{component:N="div",direction:O="column",spacing:P=0,divider:M,children:Q,className:k,useFlexGap:D=!1,...V}=T,K={direction:O,spacing:P,useFlexGap:D},J=c();return oe.jsx(u,{as:N,ownerState:K,ref:E,className:nn(J.root,k),...V,children:M?XLe(Q,M):Q})})}function fue(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:cT.white,default:cT.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const tPe=fue();function hue(){return{text:{primary:cT.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:cT.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const _te=hue();function yte(e,t,i,s){const c=s.light||s,u=s.dark||s*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=hT(e.main,c):t==="dark"&&(e.dark=fT(e.main,u)))}function rPe(e="light"){return e==="dark"?{main:iE[200],light:iE[50],dark:iE[400]}:{main:iE[700],light:iE[400],dark:iE[800]}}function nPe(e="light"){return e==="dark"?{main:nE[200],light:nE[50],dark:nE[400]}:{main:nE[500],light:nE[300],dark:nE[700]}}function iPe(e="light"){return e==="dark"?{main:rE[500],light:rE[300],dark:rE[700]}:{main:rE[700],light:rE[400],dark:rE[800]}}function oPe(e="light"){return e==="dark"?{main:oE[400],light:oE[300],dark:oE[700]}:{main:oE[700],light:oE[500],dark:oE[900]}}function sPe(e="light"){return e==="dark"?{main:sE[400],light:sE[300],dark:sE[700]}:{main:sE[800],light:sE[500],dark:sE[900]}}function aPe(e="light"){return e==="dark"?{main:Ib[400],light:Ib[300],dark:Ib[700]}:{main:"#ed6c02",light:Ib[500],dark:Ib[900]}}function rQ(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:s=.2,...c}=e,u=e.primary||rPe(t),f=e.secondary||nPe(t),p=e.error||iPe(t),m=e.info||oPe(t),E=e.success||sPe(t),w=e.warning||aPe(t);function T(M){return rLe(M,_te.text.primary)>=i?_te.text.primary:tPe.text.primary}const N=({color:M,name:Q,mainShade:k=500,lightShade:D=300,darkShade:V=700})=>{if(M={...M},!M.main&&M[k]&&(M.main=M[k]),!M.hasOwnProperty("main"))throw new Error(um(11,Q?` (${Q})`:"",k));if(typeof M.main!="string")throw new Error(um(12,Q?` (${Q})`:"",JSON.stringify(M.main)));return yte(M,"light",D,s),yte(M,"dark",V,s),M.contrastText||(M.contrastText=T(M.main)),M};let O;return t==="light"?O=fue():t==="dark"&&(O=hue()),kc({common:{...cT},mode:t,primary:N({color:u,name:"primary"}),secondary:N({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:p,name:"error"}),warning:N({color:w,name:"warning"}),info:N({color:m,name:"info"}),success:N({color:E,name:"success"}),grey:TOe,contrastThreshold:i,getContrastText:T,augmentColor:N,tonalOffset:s,...O},c)}function cPe(e){const t={};return Object.entries(e).forEach(s=>{const[c,u]=s;typeof u=="object"&&(t[c]=`${u.fontStyle?`${u.fontStyle} `:""}${u.fontVariant?`${u.fontVariant} `:""}${u.fontWeight?`${u.fontWeight} `:""}${u.fontStretch?`${u.fontStretch} `:""}${u.fontSize||""}${u.lineHeight?`/${u.lineHeight} `:""}${u.fontFamily||""}`)}),t}function lPe(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function uPe(e){return Math.round(e*1e5)/1e5}const Ete={textTransform:"uppercase"},wte='"Roboto", "Helvetica", "Arial", sans-serif';function pue(e,t){const{fontFamily:i=wte,fontSize:s=14,fontWeightLight:c=300,fontWeightRegular:u=400,fontWeightMedium:f=500,fontWeightBold:p=700,htmlFontSize:m=16,allVariants:E,pxToRem:w,...T}=typeof t=="function"?t(e):t,N=s/14,O=w||(Q=>`${Q/m*N}rem`),P=(Q,k,D,V,K)=>({fontFamily:i,fontWeight:Q,fontSize:O(k),lineHeight:D,...i===wte?{letterSpacing:`${uPe(V/k)}em`}:{},...K,...E}),M={h1:P(c,96,1.167,-1.5),h2:P(c,60,1.2,-.5),h3:P(u,48,1.167,0),h4:P(u,34,1.235,.25),h5:P(u,24,1.334,0),h6:P(f,20,1.6,.15),subtitle1:P(u,16,1.75,.15),subtitle2:P(f,14,1.57,.1),body1:P(u,16,1.5,.15),body2:P(u,14,1.43,.15),button:P(f,14,1.75,.4,Ete),caption:P(u,12,1.66,.4),overline:P(u,12,2.66,1,Ete),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return kc({htmlFontSize:m,pxToRem:O,fontFamily:i,fontSize:s,fontWeightLight:c,fontWeightRegular:u,fontWeightMedium:f,fontWeightBold:p,...M},T,{clone:!1})}const APe=.2,dPe=.14,fPe=.12;function gs(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${APe})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${dPe})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${fPe})`].join(",")}const hPe=["none",gs(0,2,1,-1,0,1,1,0,0,1,3,0),gs(0,3,1,-2,0,2,2,0,0,1,5,0),gs(0,3,3,-2,0,3,4,0,0,1,8,0),gs(0,2,4,-1,0,4,5,0,0,1,10,0),gs(0,3,5,-1,0,5,8,0,0,1,14,0),gs(0,3,5,-1,0,6,10,0,0,1,18,0),gs(0,4,5,-2,0,7,10,1,0,2,16,1),gs(0,5,5,-3,0,8,10,1,0,3,14,2),gs(0,5,6,-3,0,9,12,1,0,3,16,2),gs(0,6,6,-3,0,10,14,1,0,4,18,3),gs(0,6,7,-4,0,11,15,1,0,4,20,3),gs(0,7,8,-4,0,12,17,2,0,5,22,4),gs(0,7,8,-4,0,13,19,2,0,5,24,4),gs(0,7,9,-4,0,14,21,2,0,5,26,4),gs(0,8,9,-5,0,15,22,2,0,6,28,5),gs(0,8,10,-5,0,16,24,2,0,6,30,5),gs(0,8,11,-5,0,17,26,2,0,6,32,5),gs(0,9,11,-5,0,18,28,2,0,7,34,6),gs(0,9,12,-6,0,19,29,2,0,7,36,6),gs(0,10,13,-6,0,20,31,3,0,8,38,7),gs(0,10,13,-6,0,21,33,3,0,8,40,7),gs(0,10,14,-6,0,22,35,3,0,8,42,7),gs(0,11,14,-7,0,23,36,3,0,9,44,8),gs(0,11,15,-7,0,24,38,3,0,9,46,8)],pPe=hPe,gPe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},mPe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ste(e){return`${Math.round(e)}ms`}function vPe(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function _Pe(e){const t={...gPe,...e.easing},i={...mPe,...e.duration};return{getAutoHeightDuration:vPe,create:(c=["all"],u={})=>{const{duration:f=i.standard,easing:p=t.easeInOut,delay:m=0,...E}=u;return(Array.isArray(c)?c:[c]).map(w=>`${w} ${typeof f=="string"?f:Ste(f)} ${p} ${typeof m=="string"?m:Ste(m)}`).join(",")},...e,easing:t,duration:i}}const yPe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},EPe=yPe;function wPe(e){return Kp(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function gue(e={}){const t={...e};function i(s){const c=Object.entries(s);for(let u=0;u<c.length;u++){const[f,p]=c[u];!wPe(p)||f.startsWith("unstable_")?delete s[f]:Kp(p)&&(s[f]={...p},i(s[f]))}}return i(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function KF(e={},...t){const{breakpoints:i,mixins:s={},spacing:c,palette:u={},transitions:f={},typography:p={},shape:m,...E}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(um(20));const w=rQ(u),T=Bw(e);let N=kc(T,{mixins:lPe(T.breakpoints,s),palette:w,shadows:pPe.slice(),typography:pue(w,p),transitions:_Pe(f),zIndex:{...EPe}});return N=kc(N,E),N=t.reduce((O,P)=>kc(O,P),N),N.unstable_sxConfig={...FT,...E==null?void 0:E.unstable_sxConfig},N.unstable_sx=function(P){return i_({sx:P,theme:this})},N.toRuntimeSource=gue,N}function WF(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const SPe=[...Array(25)].map((e,t)=>{if(t===0)return"none";const i=WF(t);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`});function mue(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function vue(e){return e==="dark"?SPe:[]}function bPe(e){const{palette:t={mode:"light"},opacity:i,overlays:s,...c}=e,u=rQ(t);return{palette:u,opacity:{...mue(u.mode),...i},overlays:s||vue(u.mode),...c}}function CPe(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const TPe=e=>[...[...Array(25)].map((t,i)=>`--${e?`${e}-`:""}overlays-${i}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],RPe=TPe,IPe=e=>(t,i)=>{const s=e.rootSelector||":root",c=e.colorSchemeSelector;let u=c;if(c==="class"&&(u=".%s"),c==="data"&&(u="[data-%s]"),c!=null&&c.startsWith("data-")&&!c.includes("%s")&&(u=`[${c}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const f={};return RPe(e.cssVarPrefix).forEach(p=>{f[p]=i[p],delete i[p]}),u==="media"?{[s]:i,"@media (prefers-color-scheme: dark)":{[s]:f}}:u?{[u.replace("%s",t)]:f,[`${s}, ${u.replace("%s",t)}`]:i}:{[s]:{...i,...f}}}if(u&&u!=="media")return`${s}, ${u.replace("%s",String(t))}`}else if(t){if(u==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:i}};if(u)return u.replace("%s",String(t))}return s};function OPe(e,t){t.forEach(i=>{e[i]||(e[i]={})})}function Vt(e,t,i){!e[t]&&i&&(e[t]=i)}function aC(e){return typeof e!="string"||!e.startsWith("hsl")?e:aue(e)}function Gg(e,t){`${t}Channel`in e||(e[`${t}Channel`]=sC(aC(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function NPe(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Lp=e=>{try{return e()}catch{}},BPe=(e="mui")=>wLe(e);function qM(e,t,i,s){if(!t)return;t=t===!0?{}:t;const c=s==="dark"?"dark":"light";if(!i){e[s]=bPe({...t,palette:{mode:c,...t==null?void 0:t.palette}});return}const{palette:u,...f}=KF({...i,palette:{mode:c,...t==null?void 0:t.palette}});return e[s]={...t,palette:u,opacity:{...mue(c),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||vue(c)},f}function LPe(e={},...t){const{colorSchemes:i={light:!0},defaultColorScheme:s,disableCssColorScheme:c=!1,cssVarPrefix:u="mui",shouldSkipGeneratingVar:f=CPe,colorSchemeSelector:p=i.light&&i.dark?"media":void 0,rootSelector:m=":root",...E}=e,w=Object.keys(i)[0],T=s||(i.light&&w!=="light"?"light":w),N=BPe(u),{[T]:O,light:P,dark:M,...Q}=i,k={...Q};let D=O;if((T==="dark"&&!("dark"in i)||T==="light"&&!("light"in i))&&(D=!0),!D)throw new Error(um(21,T));const V=qM(k,D,E,T);P&&!k.light&&qM(k,P,void 0,"light"),M&&!k.dark&&qM(k,M,void 0,"dark");let K={defaultColorScheme:T,...V,cssVarPrefix:u,colorSchemeSelector:p,rootSelector:m,getCssVar:N,colorSchemes:k,font:{...cPe(V.typography),...V.font},spacing:NPe(E.spacing)};Object.keys(K.colorSchemes).forEach(pe=>{const Y=K.colorSchemes[pe].palette,te=le=>{const ae=le.split("-"),ge=ae[1],se=ae[2];return N(le,Y[ge][se])};if(Y.mode==="light"&&(Vt(Y.common,"background","#fff"),Vt(Y.common,"onBackground","#000")),Y.mode==="dark"&&(Vt(Y.common,"background","#000"),Vt(Y.common,"onBackground","#fff")),OPe(Y,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),Y.mode==="light"){Vt(Y.Alert,"errorColor",Qo(Y.error.light,.6)),Vt(Y.Alert,"infoColor",Qo(Y.info.light,.6)),Vt(Y.Alert,"successColor",Qo(Y.success.light,.6)),Vt(Y.Alert,"warningColor",Qo(Y.warning.light,.6)),Vt(Y.Alert,"errorFilledBg",te("palette-error-main")),Vt(Y.Alert,"infoFilledBg",te("palette-info-main")),Vt(Y.Alert,"successFilledBg",te("palette-success-main")),Vt(Y.Alert,"warningFilledBg",te("palette-warning-main")),Vt(Y.Alert,"errorFilledColor",Lp(()=>Y.getContrastText(Y.error.main))),Vt(Y.Alert,"infoFilledColor",Lp(()=>Y.getContrastText(Y.info.main))),Vt(Y.Alert,"successFilledColor",Lp(()=>Y.getContrastText(Y.success.main))),Vt(Y.Alert,"warningFilledColor",Lp(()=>Y.getContrastText(Y.warning.main))),Vt(Y.Alert,"errorStandardBg",Ho(Y.error.light,.9)),Vt(Y.Alert,"infoStandardBg",Ho(Y.info.light,.9)),Vt(Y.Alert,"successStandardBg",Ho(Y.success.light,.9)),Vt(Y.Alert,"warningStandardBg",Ho(Y.warning.light,.9)),Vt(Y.Alert,"errorIconColor",te("palette-error-main")),Vt(Y.Alert,"infoIconColor",te("palette-info-main")),Vt(Y.Alert,"successIconColor",te("palette-success-main")),Vt(Y.Alert,"warningIconColor",te("palette-warning-main")),Vt(Y.AppBar,"defaultBg",te("palette-grey-100")),Vt(Y.Avatar,"defaultBg",te("palette-grey-400")),Vt(Y.Button,"inheritContainedBg",te("palette-grey-300")),Vt(Y.Button,"inheritContainedHoverBg",te("palette-grey-A100")),Vt(Y.Chip,"defaultBorder",te("palette-grey-400")),Vt(Y.Chip,"defaultAvatarColor",te("palette-grey-700")),Vt(Y.Chip,"defaultIconColor",te("palette-grey-700")),Vt(Y.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Vt(Y.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Vt(Y.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Vt(Y.LinearProgress,"primaryBg",Ho(Y.primary.main,.62)),Vt(Y.LinearProgress,"secondaryBg",Ho(Y.secondary.main,.62)),Vt(Y.LinearProgress,"errorBg",Ho(Y.error.main,.62)),Vt(Y.LinearProgress,"infoBg",Ho(Y.info.main,.62)),Vt(Y.LinearProgress,"successBg",Ho(Y.success.main,.62)),Vt(Y.LinearProgress,"warningBg",Ho(Y.warning.main,.62)),Vt(Y.Skeleton,"bg",`rgba(${te("palette-text-primaryChannel")} / 0.11)`),Vt(Y.Slider,"primaryTrack",Ho(Y.primary.main,.62)),Vt(Y.Slider,"secondaryTrack",Ho(Y.secondary.main,.62)),Vt(Y.Slider,"errorTrack",Ho(Y.error.main,.62)),Vt(Y.Slider,"infoTrack",Ho(Y.info.main,.62)),Vt(Y.Slider,"successTrack",Ho(Y.success.main,.62)),Vt(Y.Slider,"warningTrack",Ho(Y.warning.main,.62));const le=SO(Y.background.default,.8);Vt(Y.SnackbarContent,"bg",le),Vt(Y.SnackbarContent,"color",Lp(()=>Y.getContrastText(le))),Vt(Y.SpeedDialAction,"fabHoverBg",SO(Y.background.paper,.15)),Vt(Y.StepConnector,"border",te("palette-grey-400")),Vt(Y.StepContent,"border",te("palette-grey-400")),Vt(Y.Switch,"defaultColor",te("palette-common-white")),Vt(Y.Switch,"defaultDisabledColor",te("palette-grey-100")),Vt(Y.Switch,"primaryDisabledColor",Ho(Y.primary.main,.62)),Vt(Y.Switch,"secondaryDisabledColor",Ho(Y.secondary.main,.62)),Vt(Y.Switch,"errorDisabledColor",Ho(Y.error.main,.62)),Vt(Y.Switch,"infoDisabledColor",Ho(Y.info.main,.62)),Vt(Y.Switch,"successDisabledColor",Ho(Y.success.main,.62)),Vt(Y.Switch,"warningDisabledColor",Ho(Y.warning.main,.62)),Vt(Y.TableCell,"border",Ho(wO(Y.divider,1),.88)),Vt(Y.Tooltip,"bg",wO(Y.grey[700],.92))}if(Y.mode==="dark"){Vt(Y.Alert,"errorColor",Ho(Y.error.light,.6)),Vt(Y.Alert,"infoColor",Ho(Y.info.light,.6)),Vt(Y.Alert,"successColor",Ho(Y.success.light,.6)),Vt(Y.Alert,"warningColor",Ho(Y.warning.light,.6)),Vt(Y.Alert,"errorFilledBg",te("palette-error-dark")),Vt(Y.Alert,"infoFilledBg",te("palette-info-dark")),Vt(Y.Alert,"successFilledBg",te("palette-success-dark")),Vt(Y.Alert,"warningFilledBg",te("palette-warning-dark")),Vt(Y.Alert,"errorFilledColor",Lp(()=>Y.getContrastText(Y.error.dark))),Vt(Y.Alert,"infoFilledColor",Lp(()=>Y.getContrastText(Y.info.dark))),Vt(Y.Alert,"successFilledColor",Lp(()=>Y.getContrastText(Y.success.dark))),Vt(Y.Alert,"warningFilledColor",Lp(()=>Y.getContrastText(Y.warning.dark))),Vt(Y.Alert,"errorStandardBg",Qo(Y.error.light,.9)),Vt(Y.Alert,"infoStandardBg",Qo(Y.info.light,.9)),Vt(Y.Alert,"successStandardBg",Qo(Y.success.light,.9)),Vt(Y.Alert,"warningStandardBg",Qo(Y.warning.light,.9)),Vt(Y.Alert,"errorIconColor",te("palette-error-main")),Vt(Y.Alert,"infoIconColor",te("palette-info-main")),Vt(Y.Alert,"successIconColor",te("palette-success-main")),Vt(Y.Alert,"warningIconColor",te("palette-warning-main")),Vt(Y.AppBar,"defaultBg",te("palette-grey-900")),Vt(Y.AppBar,"darkBg",te("palette-background-paper")),Vt(Y.AppBar,"darkColor",te("palette-text-primary")),Vt(Y.Avatar,"defaultBg",te("palette-grey-600")),Vt(Y.Button,"inheritContainedBg",te("palette-grey-800")),Vt(Y.Button,"inheritContainedHoverBg",te("palette-grey-700")),Vt(Y.Chip,"defaultBorder",te("palette-grey-700")),Vt(Y.Chip,"defaultAvatarColor",te("palette-grey-300")),Vt(Y.Chip,"defaultIconColor",te("palette-grey-300")),Vt(Y.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Vt(Y.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Vt(Y.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Vt(Y.LinearProgress,"primaryBg",Qo(Y.primary.main,.5)),Vt(Y.LinearProgress,"secondaryBg",Qo(Y.secondary.main,.5)),Vt(Y.LinearProgress,"errorBg",Qo(Y.error.main,.5)),Vt(Y.LinearProgress,"infoBg",Qo(Y.info.main,.5)),Vt(Y.LinearProgress,"successBg",Qo(Y.success.main,.5)),Vt(Y.LinearProgress,"warningBg",Qo(Y.warning.main,.5)),Vt(Y.Skeleton,"bg",`rgba(${te("palette-text-primaryChannel")} / 0.13)`),Vt(Y.Slider,"primaryTrack",Qo(Y.primary.main,.5)),Vt(Y.Slider,"secondaryTrack",Qo(Y.secondary.main,.5)),Vt(Y.Slider,"errorTrack",Qo(Y.error.main,.5)),Vt(Y.Slider,"infoTrack",Qo(Y.info.main,.5)),Vt(Y.Slider,"successTrack",Qo(Y.success.main,.5)),Vt(Y.Slider,"warningTrack",Qo(Y.warning.main,.5));const le=SO(Y.background.default,.98);Vt(Y.SnackbarContent,"bg",le),Vt(Y.SnackbarContent,"color",Lp(()=>Y.getContrastText(le))),Vt(Y.SpeedDialAction,"fabHoverBg",SO(Y.background.paper,.15)),Vt(Y.StepConnector,"border",te("palette-grey-600")),Vt(Y.StepContent,"border",te("palette-grey-600")),Vt(Y.Switch,"defaultColor",te("palette-grey-300")),Vt(Y.Switch,"defaultDisabledColor",te("palette-grey-600")),Vt(Y.Switch,"primaryDisabledColor",Qo(Y.primary.main,.55)),Vt(Y.Switch,"secondaryDisabledColor",Qo(Y.secondary.main,.55)),Vt(Y.Switch,"errorDisabledColor",Qo(Y.error.main,.55)),Vt(Y.Switch,"infoDisabledColor",Qo(Y.info.main,.55)),Vt(Y.Switch,"successDisabledColor",Qo(Y.success.main,.55)),Vt(Y.Switch,"warningDisabledColor",Qo(Y.warning.main,.55)),Vt(Y.TableCell,"border",Qo(wO(Y.divider,1),.68)),Vt(Y.Tooltip,"bg",wO(Y.grey[700],.92))}Gg(Y.background,"default"),Gg(Y.background,"paper"),Gg(Y.common,"background"),Gg(Y.common,"onBackground"),Gg(Y,"divider"),Object.keys(Y).forEach(le=>{const ae=Y[le];le!=="tonalOffset"&&ae&&typeof ae=="object"&&(ae.main&&Vt(Y[le],"mainChannel",sC(aC(ae.main))),ae.light&&Vt(Y[le],"lightChannel",sC(aC(ae.light))),ae.dark&&Vt(Y[le],"darkChannel",sC(aC(ae.dark))),ae.contrastText&&Vt(Y[le],"contrastTextChannel",sC(aC(ae.contrastText))),le==="text"&&(Gg(Y[le],"primary"),Gg(Y[le],"secondary")),le==="action"&&(ae.active&&Gg(Y[le],"active"),ae.selected&&Gg(Y[le],"selected")))})}),K=t.reduce((pe,Y)=>kc(pe,Y),K);const J={prefix:u,disableCssColorScheme:c,shouldSkipGeneratingVar:f,getSelector:IPe(K)},{vars:ie,generateThemeVars:fe,generateStyleSheets:Z}=CLe(K,J);return K.vars=ie,Object.entries(K.colorSchemes[K.defaultColorScheme]).forEach(([pe,Y])=>{K[pe]=Y}),K.generateThemeVars=fe,K.generateStyleSheets=Z,K.generateSpacing=function(){return Zle(E.spacing,bP(this))},K.getColorSchemeSelector=TLe(p),K.spacing=K.generateSpacing(),K.shouldSkipGeneratingVar=f,K.unstable_sxConfig={...FT,...E==null?void 0:E.unstable_sxConfig},K.unstable_sx=function(Y){return i_({sx:Y,theme:this})},K.toRuntimeSource=gue,K}function bte(e,t,i){e.colorSchemes&&i&&(e.colorSchemes[t]={...i!==!0&&i,palette:rQ({...i===!0?{}:i.palette,mode:t})})}function PP(e={},...t){const{palette:i,cssVariables:s=!1,colorSchemes:c=i?void 0:{light:!0},defaultColorScheme:u=i==null?void 0:i.mode,...f}=e,p=u||"light",m=c==null?void 0:c[p],E={...c,...i?{[p]:{...typeof m!="boolean"&&m,palette:i}}:void 0};if(s===!1){if(!("colorSchemes"in e))return KF(e,...t);let w=i;"palette"in e||E[p]&&(E[p]!==!0?w=E[p].palette:p==="dark"&&(w={mode:"dark"}));const T=KF({...e,palette:w},...t);return T.defaultColorScheme=p,T.colorSchemes=E,T.palette.mode==="light"&&(T.colorSchemes.light={...E.light!==!0&&E.light,palette:T.palette},bte(T,"dark",E.dark)),T.palette.mode==="dark"&&(T.colorSchemes.dark={...E.dark!==!0&&E.dark,palette:T.palette},bte(T,"light",E.light)),T}return!i&&!("light"in E)&&p==="light"&&(E.light=!0),LPe({...f,colorSchemes:E,defaultColorScheme:p,...typeof s!="boolean"&&s},...t)}const PPe=PP(),nQ=PPe;function d_(){const e=VT(nQ);return e[zp]||e}function _ue(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const kPe=e=>_ue(e)&&e!=="classes",Xu=kPe,DPe=sue({themeId:zp,defaultTheme:nQ,rootShouldForwardProp:Xu}),mr=DPe;function xPe({theme:e,...t}){const i=zp in e?e[zp]:void 0;return oe.jsx(Aue,{...t,themeId:i?zp:void 0,theme:i||e})}const bO={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:UPe,useColorScheme:PAt,getInitColorSchemeScript:kAt}=ELe({themeId:zp,theme:()=>PP({cssVariables:!0}),colorSchemeStorageKey:bO.colorSchemeStorageKey,modeStorageKey:bO.modeStorageKey,defaultColorScheme:{light:bO.defaultLightColorScheme,dark:bO.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:pue(e.palette,e.typography)};return t.unstable_sx=function(s){return i_({sx:s,theme:this})},t}}),MPe=UPe;function FPe({theme:e,...t}){const i=he.useMemo(()=>{if(typeof e=="function")return e;const s=zp in e?e[zp]:e;return"colorSchemes"in s?null:"vars"in s?e:{...e,vars:null}},[e]);return i?oe.jsx(xPe,{theme:i,...t}):oe.jsx(MPe,{theme:e,...t})}function Cte(...e){return e.reduce((t,i)=>i==null?t:function(...c){t.apply(this,c),i.apply(this,c)},()=>{})}function VPe(e){return oe.jsx(UBe,{...e,defaultTheme:nQ,themeId:zp})}function iQ(e){return function(i){return oe.jsx(VPe,{styles:typeof e=="function"?s=>e({theme:s,...i}):e})}}function QPe(){return NP}const HPe=dLe,_i=HPe;function $n(e){return ALe(e)}function jPe(e){return Qn("MuiSvgIcon",e)}Un("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const KPe=e=>{const{color:t,fontSize:i,classes:s}=e,c={root:["root",t!=="inherit"&&`color${Ur(t)}`,`fontSize${Ur(i)}`]};return Hn(c,jPe,s)},WPe=mr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="inherit"&&t[`color${Ur(i.color)}`],t[`fontSize${Ur(i.fontSize)}`]]}})(_i(({theme:e})=>{var t,i,s,c,u,f,p,m,E,w,T,N,O,P;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(c=(t=e.transitions)==null?void 0:t.create)==null?void 0:c.call(t,"fill",{duration:(s=(i=(e.vars??e).transitions)==null?void 0:i.duration)==null?void 0:s.shorter}),variants:[{props:M=>!M.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((f=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:f.call(u,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((m=(p=e.typography)==null?void 0:p.pxToRem)==null?void 0:m.call(p,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((w=(E=e.typography)==null?void 0:E.pxToRem)==null?void 0:w.call(E,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,M])=>M&&M.main).map(([M])=>{var Q,k;return{props:{color:M},style:{color:(k=(Q=(e.vars??e).palette)==null?void 0:Q[M])==null?void 0:k.main}}}),{props:{color:"action"},style:{color:(N=(T=(e.vars??e).palette)==null?void 0:T.action)==null?void 0:N.active}},{props:{color:"disabled"},style:{color:(P=(O=(e.vars??e).palette)==null?void 0:O.action)==null?void 0:P.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),yue=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiSvgIcon"}),{children:c,className:u,color:f="inherit",component:p="svg",fontSize:m="medium",htmlColor:E,inheritViewBox:w=!1,titleAccess:T,viewBox:N="0 0 24 24",...O}=s,P=he.isValidElement(c)&&c.type==="svg",M={...s,color:f,component:p,fontSize:m,instanceFontSize:t.fontSize,inheritViewBox:w,viewBox:N,hasSvgAsChild:P},Q={};w||(Q.viewBox=N);const k=KPe(M);return oe.jsxs(WPe,{as:p,className:nn(k.root,u),focusable:"false",color:E,"aria-hidden":T?void 0:!0,role:T?"img":void 0,ref:i,...Q,...O,...P&&c.props,ownerState:M,children:[P?c.props.children:c,T?oe.jsx("title",{children:T}):null]})});yue.muiName="SvgIcon";const Tte=yue;function Go(e,t){function i(s,c){return oe.jsx(Tte,{"data-testid":void 0,ref:c,...s,children:e})}return i.muiName=Tte.muiName,he.memo(he.forwardRef(i))}function Eue(e,t=166){let i;function s(...c){const u=()=>{e.apply(this,c)};clearTimeout(i),i=setTimeout(u,t)}return s.clear=()=>{clearTimeout(i)},s}function Ql(e){return e&&e.ownerDocument||document}function Am(e){return Ql(e).defaultView||window}function Rte(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let Ite=0;function GPe(e){const[t,i]=he.useState(e),s=e||t;return he.useEffect(()=>{t==null&&(Ite+=1,i(`mui-${Ite}`))},[t]),s}const $Pe={...AB},Ote=$Pe.useId;function Pw(e){if(Ote!==void 0){const t=Ote();return e??t}return GPe(e)}function HB(e){const{controlled:t,default:i,name:s,state:c="value"}=e,{current:u}=he.useRef(t!==void 0),[f,p]=he.useState(i),m=u?t:f,E=he.useCallback(w=>{u||p(w)},[]);return[m,E]}function qd(e){const t=he.useRef(e);return Sh(()=>{t.current=e}),he.useRef((...i)=>(0,t.current)(...i)).current}function uc(...e){const t=he.useRef(void 0),i=he.useCallback(s=>{const c=e.map(u=>{if(u==null)return null;if(typeof u=="function"){const f=u,p=f(s);return typeof p=="function"?p:()=>{f(null)}}return u.current=s,()=>{u.current=null}});return()=>{c.forEach(u=>u==null?void 0:u())}},e);return he.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=i(s))},e)}function zPe(e,t){const i=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&i>=65&&i<=90&&typeof t=="function"}function wue(e,t){if(!e)return t;function i(f,p){const m={};return Object.keys(p).forEach(E=>{zPe(E,p[E])&&typeof f[E]=="function"&&(m[E]=(...w)=>{f[E](...w),p[E](...w)})}),m}if(typeof e=="function"||typeof t=="function")return f=>{const p=typeof t=="function"?t(f):t,m=typeof e=="function"?e({...f,...p}):e,E=nn(f==null?void 0:f.className,p==null?void 0:p.className,m==null?void 0:m.className),w=i(m,p);return{...p,...m,...w,...!!E&&{className:E},...(p==null?void 0:p.style)&&(m==null?void 0:m.style)&&{style:{...p.style,...m.style}},...(p==null?void 0:p.sx)&&(m==null?void 0:m.sx)&&{sx:[...Array.isArray(p.sx)?p.sx:[p.sx],...Array.isArray(m.sx)?m.sx:[m.sx]]}}};const s=t,c=i(e,s),u=nn(s==null?void 0:s.className,e==null?void 0:e.className);return{...t,...e,...c,...!!u&&{className:u},...(s==null?void 0:s.style)&&(e==null?void 0:e.style)&&{style:{...s.style,...e.style}},...(s==null?void 0:s.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function Sue(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function GF(e,t){return GF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},GF(e,t)}function bue(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,GF(e,t)}const Nte={disabled:!1},jB=vo.createContext(null);var qPe=function(t){return t.scrollTop},cC="unmounted",O1="exited",N1="entering",CE="entered",$F="exiting",mm=function(e){bue(t,e);function t(s,c){var u;u=e.call(this,s,c)||this;var f=c,p=f&&!f.isMounting?s.enter:s.appear,m;return u.appearStatus=null,s.in?p?(m=O1,u.appearStatus=N1):m=CE:s.unmountOnExit||s.mountOnEnter?m=cC:m=O1,u.state={status:m},u.nextCallback=null,u}t.getDerivedStateFromProps=function(c,u){var f=c.in;return f&&u.status===cC?{status:O1}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(c){var u=null;if(c!==this.props){var f=this.state.status;this.props.in?f!==N1&&f!==CE&&(u=N1):(f===N1||f===CE)&&(u=$F)}this.updateStatus(!1,u)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var c=this.props.timeout,u,f,p;return u=f=p=c,c!=null&&typeof c!="number"&&(u=c.exit,f=c.enter,p=c.appear!==void 0?c.appear:f),{exit:u,enter:f,appear:p}},i.updateStatus=function(c,u){if(c===void 0&&(c=!1),u!==null)if(this.cancelNextCallback(),u===N1){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:yO.findDOMNode(this);f&&qPe(f)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===O1&&this.setState({status:cC})},i.performEnter=function(c){var u=this,f=this.props.enter,p=this.context?this.context.isMounting:c,m=this.props.nodeRef?[p]:[yO.findDOMNode(this),p],E=m[0],w=m[1],T=this.getTimeouts(),N=p?T.appear:T.enter;if(!c&&!f||Nte.disabled){this.safeSetState({status:CE},function(){u.props.onEntered(E)});return}this.props.onEnter(E,w),this.safeSetState({status:N1},function(){u.props.onEntering(E,w),u.onTransitionEnd(N,function(){u.safeSetState({status:CE},function(){u.props.onEntered(E,w)})})})},i.performExit=function(){var c=this,u=this.props.exit,f=this.getTimeouts(),p=this.props.nodeRef?void 0:yO.findDOMNode(this);if(!u||Nte.disabled){this.safeSetState({status:O1},function(){c.props.onExited(p)});return}this.props.onExit(p),this.safeSetState({status:$F},function(){c.props.onExiting(p),c.onTransitionEnd(f.exit,function(){c.safeSetState({status:O1},function(){c.props.onExited(p)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(c,u){u=this.setNextCallback(u),this.setState(c,u)},i.setNextCallback=function(c){var u=this,f=!0;return this.nextCallback=function(p){f&&(f=!1,u.nextCallback=null,c(p))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},i.onTransitionEnd=function(c,u){this.setNextCallback(u);var f=this.props.nodeRef?this.props.nodeRef.current:yO.findDOMNode(this),p=c==null&&!this.props.addEndListener;if(!f||p){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],E=m[0],w=m[1];this.props.addEndListener(E,w)}c!=null&&setTimeout(this.nextCallback,c)},i.render=function(){var c=this.state.status;if(c===cC)return null;var u=this.props,f=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var p=Sue(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return vo.createElement(jB.Provider,{value:null},typeof f=="function"?f(c,p):vo.cloneElement(vo.Children.only(f),p))},t}(vo.Component);mm.contextType=jB;mm.propTypes={};function aE(){}mm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:aE,onEntering:aE,onEntered:aE,onExit:aE,onExiting:aE,onExited:aE};mm.UNMOUNTED=cC;mm.EXITED=O1;mm.ENTERING=N1;mm.ENTERED=CE;mm.EXITING=$F;const Cue=mm;function YPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oQ(e,t){var i=function(u){return t&&he.isValidElement(u)?t(u):u},s=Object.create(null);return e&&he.Children.map(e,function(c){return c}).forEach(function(c){s[c.key]=i(c)}),s}function XPe(e,t){e=e||{},t=t||{};function i(w){return w in t?t[w]:e[w]}var s=Object.create(null),c=[];for(var u in e)u in t?c.length&&(s[u]=c,c=[]):c.push(u);var f,p={};for(var m in t){if(s[m])for(f=0;f<s[m].length;f++){var E=s[m][f];p[s[m][f]]=i(E)}p[m]=i(m)}for(f=0;f<c.length;f++)p[c[f]]=i(c[f]);return p}function V1(e,t,i){return i[t]!=null?i[t]:e.props[t]}function JPe(e,t){return oQ(e.children,function(i){return he.cloneElement(i,{onExited:t.bind(null,i),in:!0,appear:V1(i,"appear",e),enter:V1(i,"enter",e),exit:V1(i,"exit",e)})})}function ZPe(e,t,i){var s=oQ(e.children),c=XPe(t,s);return Object.keys(c).forEach(function(u){var f=c[u];if(he.isValidElement(f)){var p=u in t,m=u in s,E=t[u],w=he.isValidElement(E)&&!E.props.in;m&&(!p||w)?c[u]=he.cloneElement(f,{onExited:i.bind(null,f),in:!0,exit:V1(f,"exit",e),enter:V1(f,"enter",e)}):!m&&p&&!w?c[u]=he.cloneElement(f,{in:!1}):m&&p&&he.isValidElement(E)&&(c[u]=he.cloneElement(f,{onExited:i.bind(null,f),in:E.props.in,exit:V1(f,"exit",e),enter:V1(f,"enter",e)}))}}),c}var eke=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},tke={component:"div",childFactory:function(t){return t}},sQ=function(e){bue(t,e);function t(s,c){var u;u=e.call(this,s,c)||this;var f=u.handleExited.bind(YPe(u));return u.state={contextValue:{isMounting:!0},handleExited:f,firstRender:!0},u}var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,u){var f=u.children,p=u.handleExited,m=u.firstRender;return{children:m?JPe(c,p):ZPe(c,f,p),firstRender:!1}},i.handleExited=function(c,u){var f=oQ(this.props.children);c.key in f||(c.props.onExited&&c.props.onExited(u),this.mounted&&this.setState(function(p){var m=MB({},p.children);return delete m[c.key],{children:m}}))},i.render=function(){var c=this.props,u=c.component,f=c.childFactory,p=Sue(c,["component","childFactory"]),m=this.state.contextValue,E=eke(this.state.children).map(f);return delete p.appear,delete p.enter,delete p.exit,u===null?vo.createElement(jB.Provider,{value:m},E):vo.createElement(jB.Provider,{value:m},vo.createElement(u,p,E))},t}(vo.Component);sQ.propTypes={};sQ.defaultProps=tke;const rke=sQ,Bte={};function Tue(e,t){const i=he.useRef(Bte);return i.current===Bte&&(i.current=e(t)),i}const nke=[];function ike(e){he.useEffect(e,nke)}class kP{constructor(){_b(this,"currentId",null);_b(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});_b(this,"disposeEffect",()=>this.clear)}static create(){return new kP}start(t,i){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,i()},t)}}function Q1(){const e=Tue(kP.create).current;return ike(e.disposeEffect),e}const Rue=e=>e.scrollTop;function KB(e,t){const{timeout:i,easing:s,style:c={}}=e;return{duration:c.transitionDuration??(typeof i=="number"?i:i[t.mode]||0),easing:c.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:c.transitionDelay}}function oke(e){return Qn("MuiPaper",e)}Un("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const ske=e=>{const{square:t,elevation:i,variant:s,classes:c}=e,u={root:["root",s,!t&&"rounded",s==="elevation"&&`elevation${i}`]};return Hn(u,oke,c)},ake=mr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],!i.square&&t.rounded,i.variant==="elevation"&&t[`elevation${i.elevation}`]]}})(_i(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),cke=he.forwardRef(function(t,i){var O;const s=$n({props:t,name:"MuiPaper"}),c=d_(),{className:u,component:f="div",elevation:p=1,square:m=!1,variant:E="elevation",...w}=s,T={...s,component:f,elevation:p,square:m,variant:E},N=ske(T);return oe.jsx(ake,{as:f,ownerState:T,className:nn(N.root,u),ref:i,...w,style:{...E==="elevation"&&{"--Paper-shadow":(c.vars||c).shadows[p],...c.vars&&{"--Paper-overlay":(O=c.vars.overlays)==null?void 0:O[p]},...!c.vars&&c.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Bc("#fff",WF(p))}, ${Bc("#fff",WF(p))})`}},...w.style}})}),Zd=cke;function lke(e){return typeof e=="string"}function Iue(e,t,i){return e===void 0||lke(e)?t:{...t,ownerState:{...t.ownerState,...i}}}function Oue(e,t,i){return typeof e=="function"?e(t,i):e}function WB(e,t=[]){if(e===void 0)return{};const i={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{i[s]=e[s]}),i}function Lte(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(i=>!(i.match(/^on[A-Z]/)&&typeof e[i]=="function")).forEach(i=>{t[i]=e[i]}),t}function Nue(e){const{getSlotProps:t,additionalProps:i,externalSlotProps:s,externalForwardedProps:c,className:u}=e;if(!t){const O=nn(i==null?void 0:i.className,u,c==null?void 0:c.className,s==null?void 0:s.className),P={...i==null?void 0:i.style,...c==null?void 0:c.style,...s==null?void 0:s.style},M={...i,...c,...s};return O.length>0&&(M.className=O),Object.keys(P).length>0&&(M.style=P),{props:M,internalRef:void 0}}const f=WB({...c,...s}),p=Lte(s),m=Lte(c),E=t(f),w=nn(E==null?void 0:E.className,i==null?void 0:i.className,u,c==null?void 0:c.className,s==null?void 0:s.className),T={...E==null?void 0:E.style,...i==null?void 0:i.style,...c==null?void 0:c.style,...s==null?void 0:s.style},N={...E,...i,...m,...p};return w.length>0&&(N.className=w),Object.keys(T).length>0&&(N.style=T),{props:N,internalRef:E.ref}}function ei(e,t){const{className:i,elementType:s,ownerState:c,externalForwardedProps:u,internalForwardedProps:f,shouldForwardComponentProp:p=!1,...m}=t,{component:E,slots:w={[e]:void 0},slotProps:T={[e]:void 0},...N}=u,O=w[e]||s,P=Oue(T[e],c),{props:{component:M,...Q},internalRef:k}=Nue({className:i,...m,externalForwardedProps:e==="root"?N:void 0,externalSlotProps:P}),D=uc(k,P==null?void 0:P.ref,t.ref),V=e==="root"?M||E:M,K=Iue(O,{...e==="root"&&!E&&!w[e]&&f,...e!=="root"&&!w[e]&&f,...Q,...V&&!p&&{as:V},...V&&p&&{component:V},ref:D},c);return[O,K]}function GB(e){try{return e.matches(":focus-visible")}catch{}return!1}class $B{constructor(){_b(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new $B}static use(){const t=Tue($B.create).current,[i,s]=he.useState(!1);return t.shouldMount=i,t.setShouldMount=s,he.useEffect(t.mountEffect,[i]),t}mount(){return this.mounted||(this.mounted=Ake(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var i;return(i=this.ref.current)==null?void 0:i.start(...t)})}stop(...t){this.mount().then(()=>{var i;return(i=this.ref.current)==null?void 0:i.stop(...t)})}pulsate(...t){this.mount().then(()=>{var i;return(i=this.ref.current)==null?void 0:i.pulsate(...t)})}}function uke(){return $B.use()}function Ake(){let e,t;const i=new Promise((s,c)=>{e=s,t=c});return i.resolve=e,i.reject=t,i}function dke(e){const{className:t,classes:i,pulsate:s=!1,rippleX:c,rippleY:u,rippleSize:f,in:p,onExited:m,timeout:E}=e,[w,T]=he.useState(!1),N=nn(t,i.ripple,i.rippleVisible,s&&i.ripplePulsate),O={width:f,height:f,top:-(f/2)+u,left:-(f/2)+c},P=nn(i.child,w&&i.childLeaving,s&&i.childPulsate);return!p&&!w&&T(!0),he.useEffect(()=>{if(!p&&m!=null){const M=setTimeout(m,E);return()=>{clearTimeout(M)}}},[m,p,E]),oe.jsx("span",{className:N,style:O,children:oe.jsx("span",{className:P})})}const fke=Un("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Md=fke,zF=550,hke=80,pke=UT`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,gke=UT`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,mke=UT`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,vke=mr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),_ke=mr(dke,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Md.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${pke};
    animation-duration: ${zF}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Md.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Md.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Md.childLeaving} {
    opacity: 0;
    animation-name: ${gke};
    animation-duration: ${zF}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Md.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${mke};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,yke=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:u={},className:f,...p}=s,[m,E]=he.useState([]),w=he.useRef(0),T=he.useRef(null);he.useEffect(()=>{T.current&&(T.current(),T.current=null)},[m]);const N=he.useRef(!1),O=Q1(),P=he.useRef(null),M=he.useRef(null),Q=he.useCallback(K=>{const{pulsate:J,rippleX:ie,rippleY:fe,rippleSize:Z,cb:pe}=K;E(Y=>[...Y,oe.jsx(_ke,{classes:{ripple:nn(u.ripple,Md.ripple),rippleVisible:nn(u.rippleVisible,Md.rippleVisible),ripplePulsate:nn(u.ripplePulsate,Md.ripplePulsate),child:nn(u.child,Md.child),childLeaving:nn(u.childLeaving,Md.childLeaving),childPulsate:nn(u.childPulsate,Md.childPulsate)},timeout:zF,pulsate:J,rippleX:ie,rippleY:fe,rippleSize:Z},w.current)]),w.current+=1,T.current=pe},[u]),k=he.useCallback((K={},J={},ie=()=>{})=>{const{pulsate:fe=!1,center:Z=c||J.pulsate,fakeElement:pe=!1}=J;if((K==null?void 0:K.type)==="mousedown"&&N.current){N.current=!1;return}(K==null?void 0:K.type)==="touchstart"&&(N.current=!0);const Y=pe?null:M.current,te=Y?Y.getBoundingClientRect():{width:0,height:0,left:0,top:0};let le,ae,ge;if(Z||K===void 0||K.clientX===0&&K.clientY===0||!K.clientX&&!K.touches)le=Math.round(te.width/2),ae=Math.round(te.height/2);else{const{clientX:se,clientY:xe}=K.touches&&K.touches.length>0?K.touches[0]:K;le=Math.round(se-te.left),ae=Math.round(xe-te.top)}if(Z)ge=Math.sqrt((2*te.width**2+te.height**2)/3),ge%2===0&&(ge+=1);else{const se=Math.max(Math.abs((Y?Y.clientWidth:0)-le),le)*2+2,xe=Math.max(Math.abs((Y?Y.clientHeight:0)-ae),ae)*2+2;ge=Math.sqrt(se**2+xe**2)}K!=null&&K.touches?P.current===null&&(P.current=()=>{Q({pulsate:fe,rippleX:le,rippleY:ae,rippleSize:ge,cb:ie})},O.start(hke,()=>{P.current&&(P.current(),P.current=null)})):Q({pulsate:fe,rippleX:le,rippleY:ae,rippleSize:ge,cb:ie})},[c,Q,O]),D=he.useCallback(()=>{k({},{pulsate:!0})},[k]),V=he.useCallback((K,J)=>{if(O.clear(),(K==null?void 0:K.type)==="touchend"&&P.current){P.current(),P.current=null,O.start(0,()=>{V(K,J)});return}P.current=null,E(ie=>ie.length>0?ie.slice(1):ie),T.current=J},[O]);return he.useImperativeHandle(i,()=>({pulsate:D,start:k,stop:V}),[D,k,V]),oe.jsx(vke,{className:nn(Md.root,u.root,f),ref:M,...p,children:oe.jsx(rke,{component:null,exit:!0,children:m})})}),Eke=yke;function wke(e){return Qn("MuiButtonBase",e)}const Ske=Un("MuiButtonBase",["root","disabled","focusVisible"]),bke=Ske,Cke=e=>{const{disabled:t,focusVisible:i,focusVisibleClassName:s,classes:c}=e,f=Hn({root:["root",t&&"disabled",i&&"focusVisible"]},wke,c);return i&&s&&(f.root+=` ${s}`),f},Tke=mr("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${bke.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Rke=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:u=!1,children:f,className:p,component:m="button",disabled:E=!1,disableRipple:w=!1,disableTouchRipple:T=!1,focusRipple:N=!1,focusVisibleClassName:O,LinkComponent:P="a",onBlur:M,onClick:Q,onContextMenu:k,onDragLeave:D,onFocus:V,onFocusVisible:K,onKeyDown:J,onKeyUp:ie,onMouseDown:fe,onMouseLeave:Z,onMouseUp:pe,onTouchEnd:Y,onTouchMove:te,onTouchStart:le,tabIndex:ae=0,TouchRippleProps:ge,touchRippleRef:se,type:xe,...Me}=s,Be=he.useRef(null),ke=uke(),Ke=uc(ke.ref,se),[ht,ve]=he.useState(!1);E&&ht&&ve(!1),he.useImperativeHandle(c,()=>({focusVisible:()=>{ve(!0),Be.current.focus()}}),[]);const Oe=ke.shouldMount&&!w&&!E;he.useEffect(()=>{ht&&N&&!w&&ke.pulsate()},[w,N,ht,ke]);const Ue=$g(ke,"start",fe,T),Fe=$g(ke,"stop",k,T),Qe=$g(ke,"stop",D,T),We=$g(ke,"stop",pe,T),et=$g(ke,"stop",Bt=>{ht&&Bt.preventDefault(),Z&&Z(Bt)},T),Ze=$g(ke,"start",le,T),pt=$g(ke,"stop",Y,T),at=$g(ke,"stop",te,T),Rt=$g(ke,"stop",Bt=>{GB(Bt.target)||ve(!1),M&&M(Bt)},!1),Ot=qd(Bt=>{Be.current||(Be.current=Bt.currentTarget),GB(Bt.target)&&(ve(!0),K&&K(Bt)),V&&V(Bt)}),Ft=()=>{const Bt=Be.current;return m&&m!=="button"&&!(Bt.tagName==="A"&&Bt.href)},lt=qd(Bt=>{N&&!Bt.repeat&&ht&&Bt.key===" "&&ke.stop(Bt,()=>{ke.start(Bt)}),Bt.target===Bt.currentTarget&&Ft()&&Bt.key===" "&&Bt.preventDefault(),J&&J(Bt),Bt.target===Bt.currentTarget&&Ft()&&Bt.key==="Enter"&&!E&&(Bt.preventDefault(),Q&&Q(Bt))}),He=qd(Bt=>{N&&Bt.key===" "&&ht&&!Bt.defaultPrevented&&ke.stop(Bt,()=>{ke.pulsate(Bt)}),ie&&ie(Bt),Q&&Bt.target===Bt.currentTarget&&Ft()&&Bt.key===" "&&!Bt.defaultPrevented&&Q(Bt)});let vr=m;vr==="button"&&(Me.href||Me.to)&&(vr=P);const qt={};vr==="button"?(qt.type=xe===void 0?"button":xe,qt.disabled=E):(!Me.href&&!Me.to&&(qt.role="button"),E&&(qt["aria-disabled"]=E));const Nt=uc(i,Be),It={...s,centerRipple:u,component:m,disabled:E,disableRipple:w,disableTouchRipple:T,focusRipple:N,tabIndex:ae,focusVisible:ht},Yt=Cke(It);return oe.jsxs(Tke,{as:vr,className:nn(Yt.root,p),ownerState:It,onBlur:Rt,onClick:Q,onContextMenu:Fe,onFocus:Ot,onKeyDown:lt,onKeyUp:He,onMouseDown:Ue,onMouseLeave:et,onMouseUp:We,onDragLeave:Qe,onTouchEnd:pt,onTouchMove:at,onTouchStart:Ze,ref:Nt,tabIndex:E?-1:ae,type:xe,...qt,...Me,children:[f,Oe?oe.jsx(Eke,{ref:Ke,center:u,...ge}):null]})});function $g(e,t,i,s=!1){return qd(c=>(i&&i(c),s||e[t](c),!0))}const DP=Rke;function Ike(e){return typeof e.main=="string"}function Oke(e,t=[]){if(!Ike(e))return!1;for(const i of t)if(!e.hasOwnProperty(i)||typeof e[i]!="string")return!1;return!0}function su(e=[]){return([,t])=>t&&Oke(t,e)}function Nke(e){return Qn("MuiAlert",e)}const Bke=Un("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Pte=Bke;function Lke(e){return Qn("MuiCircularProgress",e)}Un("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Cv=44,qF=UT`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,YF=UT`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Pke=typeof qF!="string"?jV`
        animation: ${qF} 1.4s linear infinite;
      `:null,kke=typeof YF!="string"?jV`
        animation: ${YF} 1.4s ease-in-out infinite;
      `:null,Dke=e=>{const{classes:t,variant:i,color:s,disableShrink:c}=e,u={root:["root",i,`color${Ur(s)}`],svg:["svg"],circle:["circle",`circle${Ur(i)}`,c&&"circleDisableShrink"]};return Hn(u,Lke,t)},xke=mr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`color${Ur(i.color)}`]]}})(_i(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Pke||{animation:`${qF} 1.4s linear infinite`}},...Object.entries(e.palette).filter(su()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Uke=mr("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Mke=mr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.circle,t[`circle${Ur(i.variant)}`],i.disableShrink&&t.circleDisableShrink]}})(_i(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:kke||{animation:`${YF} 1.4s ease-in-out infinite`}}]}))),Fke=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiCircularProgress"}),{className:c,color:u="primary",disableShrink:f=!1,size:p=40,style:m,thickness:E=3.6,value:w=0,variant:T="indeterminate",...N}=s,O={...s,color:u,disableShrink:f,size:p,thickness:E,value:w,variant:T},P=Dke(O),M={},Q={},k={};if(T==="determinate"){const D=2*Math.PI*((Cv-E)/2);M.strokeDasharray=D.toFixed(3),k["aria-valuenow"]=Math.round(w),M.strokeDashoffset=`${((100-w)/100*D).toFixed(3)}px`,Q.transform="rotate(-90deg)"}return oe.jsx(xke,{className:nn(P.root,c),style:{width:p,height:p,...Q,...m},ownerState:O,ref:i,role:"progressbar",...k,...N,children:oe.jsx(Uke,{className:P.svg,ownerState:O,viewBox:`${Cv/2} ${Cv/2} ${Cv} ${Cv}`,children:oe.jsx(Mke,{className:P.circle,style:M,ownerState:O,cx:Cv,cy:Cv,r:(Cv-E)/2,fill:"none",strokeWidth:E})})})}),zB=Fke;function Vke(e){return Qn("MuiIconButton",e)}const Qke=Un("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),kte=Qke,Hke=e=>{const{classes:t,disabled:i,color:s,edge:c,size:u,loading:f}=e,p={root:["root",f&&"loading",i&&"disabled",s!=="default"&&`color${Ur(s)}`,c&&`edge${Ur(c)}`,`size${Ur(u)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Hn(p,Vke,t)},jke=mr(DP,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.loading&&t.loading,i.color!=="default"&&t[`color${Ur(i.color)}`],i.edge&&t[`edge${Ur(i.edge)}`],t[`size${Ur(i.size)}`]]}})(_i(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),_i(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(su()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(su()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${kte.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${kte.loading}`]:{color:"transparent"}}))),Kke=mr("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Wke=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiIconButton"}),{edge:c=!1,children:u,className:f,color:p="default",disabled:m=!1,disableFocusRipple:E=!1,size:w="medium",id:T,loading:N=null,loadingIndicator:O,...P}=s,M=Pw(T),Q=O??oe.jsx(zB,{"aria-labelledby":M,color:"inherit",size:16}),k={...s,edge:c,color:p,disabled:m,disableFocusRipple:E,loading:N,loadingIndicator:Q,size:w},D=Hke(k);return oe.jsxs(jke,{id:N?M:T,className:nn(D.root,f),centerRipple:!0,focusRipple:!E,disabled:m||N,ref:i,...P,ownerState:k,children:[typeof N=="boolean"&&oe.jsx("span",{className:D.loadingWrapper,style:{display:"contents"},children:oe.jsx(Kke,{className:D.loadingIndicator,ownerState:k,children:N&&Q})}),u]})}),pT=Wke,Gke=Go(oe.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),$ke=Go(oe.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),zke=Go(oe.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),qke=Go(oe.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),Yke=Go(oe.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Xke=e=>{const{variant:t,color:i,severity:s,classes:c}=e,u={root:["root",`color${Ur(i||s)}`,`${t}${Ur(i||s)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Hn(u,Nke,c)},Jke=mr(Zd,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`${i.variant}${Ur(i.color||i.severity)}`]]}})(_i(({theme:e})=>{const t=e.palette.mode==="light"?fT:hT,i=e.palette.mode==="light"?hT:fT;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(su(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${s}Color`]:t(e.palette[s].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${s}StandardBg`]:i(e.palette[s].light,.9),[`& .${Pte.icon}`]:e.vars?{color:e.vars.palette.Alert[`${s}IconColor`]}:{color:e.palette[s].main}}})),...Object.entries(e.palette).filter(su(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${s}Color`]:t(e.palette[s].light,.6),border:`1px solid ${(e.vars||e).palette[s].light}`,[`& .${Pte.icon}`]:e.vars?{color:e.vars.palette.Alert[`${s}IconColor`]}:{color:e.palette[s].main}}})),...Object.entries(e.palette).filter(su(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${s}FilledColor`],backgroundColor:e.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[s].dark:e.palette[s].main,color:e.palette.getContrastText(e.palette[s].main)}}}))]}})),Zke=mr("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),eDe=mr("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),tDe=mr("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Dte={success:oe.jsx(Gke,{fontSize:"inherit"}),warning:oe.jsx($ke,{fontSize:"inherit"}),error:oe.jsx(zke,{fontSize:"inherit"}),info:oe.jsx(qke,{fontSize:"inherit"})},rDe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiAlert"}),{action:c,children:u,className:f,closeText:p="Close",color:m,components:E={},componentsProps:w={},icon:T,iconMapping:N=Dte,onClose:O,role:P="alert",severity:M="success",slotProps:Q={},slots:k={},variant:D="standard",...V}=s,K={...s,color:m,severity:M,variant:D,colorSeverity:m||M},J=Xke(K),ie={slots:{closeButton:E.CloseButton,closeIcon:E.CloseIcon,...k},slotProps:{...w,...Q}},[fe,Z]=ei("root",{ref:i,shouldForwardComponentProp:!0,className:nn(J.root,f),elementType:Jke,externalForwardedProps:{...ie,...V},ownerState:K,additionalProps:{role:P,elevation:0}}),[pe,Y]=ei("icon",{className:J.icon,elementType:Zke,externalForwardedProps:ie,ownerState:K}),[te,le]=ei("message",{className:J.message,elementType:eDe,externalForwardedProps:ie,ownerState:K}),[ae,ge]=ei("action",{className:J.action,elementType:tDe,externalForwardedProps:ie,ownerState:K}),[se,xe]=ei("closeButton",{elementType:pT,externalForwardedProps:ie,ownerState:K}),[Me,Be]=ei("closeIcon",{elementType:Yke,externalForwardedProps:ie,ownerState:K});return oe.jsxs(fe,{...Z,children:[T!==!1?oe.jsx(pe,{...Y,children:T||N[M]||Dte[M]}):null,oe.jsx(te,{...le,children:u}),c!=null?oe.jsx(ae,{...ge,children:c}):null,c==null&&O?oe.jsx(ae,{...ge,children:oe.jsx(se,{size:"small","aria-label":p,title:p,color:"inherit",onClick:O,...xe,children:oe.jsx(Me,{fontSize:"small",...Be})})}):null]})}),nDe=rDe;function iDe(e){return Qn("MuiTypography",e)}Un("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const oDe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},sDe=QPe(),aDe=e=>{const{align:t,gutterBottom:i,noWrap:s,paragraph:c,variant:u,classes:f}=e,p={root:["root",u,e.align!=="inherit"&&`align${Ur(t)}`,i&&"gutterBottom",s&&"noWrap",c&&"paragraph"]};return Hn(p,iDe,f)},cDe=mr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.variant&&t[i.variant],i.align!=="inherit"&&t[`align${Ur(i.align)}`],i.noWrap&&t.noWrap,i.gutterBottom&&t.gutterBottom,i.paragraph&&t.paragraph]}})(_i(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([i,s])=>i!=="inherit"&&s&&typeof s=="object").map(([i,s])=>({props:{variant:i},style:s})),...Object.entries(e.palette).filter(su()).map(([i])=>({props:{color:i},style:{color:(e.vars||e).palette[i].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,i])=>typeof i=="string").map(([i])=>({props:{color:`text${Ur(i)}`},style:{color:(e.vars||e).palette.text[i]}})),{props:({ownerState:i})=>i.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:i})=>i.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:i})=>i.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:i})=>i.paragraph,style:{marginBottom:16}}]}})),xte={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},lDe=he.forwardRef(function(t,i){const{color:s,...c}=$n({props:t,name:"MuiTypography"}),u=!oDe[s],f=sDe({...c,...u&&{color:s}}),{align:p="inherit",className:m,component:E,gutterBottom:w=!1,noWrap:T=!1,paragraph:N=!1,variant:O="body1",variantMapping:P=xte,...M}=f,Q={...f,align:p,color:s,className:m,component:E,gutterBottom:w,noWrap:T,paragraph:N,variant:O,variantMapping:P},k=E||(N?"p":P[O]||xte[O])||"span",D=aDe(Q);return oe.jsx(cDe,{as:k,ref:i,className:nn(D.root,m),...M,ownerState:Q,style:{...p!=="inherit"&&{"--Typography-textAlign":p},...M.style}})}),Gn=lDe;function uDe(e){return Qn("MuiAppBar",e)}Un("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ADe=e=>{const{color:t,position:i,classes:s}=e,c={root:["root",`color${Ur(t)}`,`position${Ur(i)}`]};return Hn(c,uDe,s)},Ute=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,dDe=mr(Zd,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`position${Ur(i.position)}`],t[`color${Ur(i.color)}`]]}})(_i(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(su(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?Ute(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?Ute(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),fDe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiAppBar"}),{className:c,color:u="primary",enableColorOnDark:f=!1,position:p="fixed",...m}=s,E={...s,color:u,position:p,enableColorOnDark:f},w=ADe(E);return oe.jsx(dDe,{square:!0,component:"header",ownerState:E,elevation:4,className:nn(w.root,c,p==="fixed"&&"mui-fixed"),ref:i,...m})}),aQ=fDe;var $u="top",ef="bottom",tf="right",zu="left",cQ="auto",QT=[$u,ef,tf,zu],gw="start",gT="end",hDe="clippingParents",Bue="viewport",Nb="popper",pDe="reference",Mte=QT.reduce(function(e,t){return e.concat([t+"-"+gw,t+"-"+gT])},[]),Lue=[].concat(QT,[cQ]).reduce(function(e,t){return e.concat([t,t+"-"+gw,t+"-"+gT])},[]),gDe="beforeRead",mDe="read",vDe="afterRead",_De="beforeMain",yDe="main",EDe="afterMain",wDe="beforeWrite",SDe="write",bDe="afterWrite",CDe=[gDe,mDe,vDe,_De,yDe,EDe,wDe,SDe,bDe];function Jp(e){return e?(e.nodeName||"").toLowerCase():null}function jA(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function o_(e){var t=jA(e).Element;return e instanceof t||e instanceof Element}function Yd(e){var t=jA(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function lQ(e){if(typeof ShadowRoot>"u")return!1;var t=jA(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function TDe(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var s=t.styles[i]||{},c=t.attributes[i]||{},u=t.elements[i];!Yd(u)||!Jp(u)||(Object.assign(u.style,s),Object.keys(c).forEach(function(f){var p=c[f];p===!1?u.removeAttribute(f):u.setAttribute(f,p===!0?"":p)}))})}function RDe(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(s){var c=t.elements[s],u=t.attributes[s]||{},f=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:i[s]),p=f.reduce(function(m,E){return m[E]="",m},{});!Yd(c)||!Jp(c)||(Object.assign(c.style,p),Object.keys(u).forEach(function(m){c.removeAttribute(m)}))})}}const IDe={name:"applyStyles",enabled:!0,phase:"write",fn:TDe,effect:RDe,requires:["computeStyles"]};function Yp(e){return e.split("-")[0]}var G1=Math.max,qB=Math.min,mw=Math.round;function XF(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Pue(){return!/^((?!chrome|android).)*safari/i.test(XF())}function vw(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var s=e.getBoundingClientRect(),c=1,u=1;t&&Yd(e)&&(c=e.offsetWidth>0&&mw(s.width)/e.offsetWidth||1,u=e.offsetHeight>0&&mw(s.height)/e.offsetHeight||1);var f=o_(e)?jA(e):window,p=f.visualViewport,m=!Pue()&&i,E=(s.left+(m&&p?p.offsetLeft:0))/c,w=(s.top+(m&&p?p.offsetTop:0))/u,T=s.width/c,N=s.height/u;return{width:T,height:N,top:w,right:E+T,bottom:w+N,left:E,x:E,y:w}}function uQ(e){var t=vw(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function kue(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&lQ(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function dm(e){return jA(e).getComputedStyle(e)}function ODe(e){return["table","td","th"].indexOf(Jp(e))>=0}function _0(e){return((o_(e)?e.ownerDocument:e.document)||window.document).documentElement}function xP(e){return Jp(e)==="html"?e:e.assignedSlot||e.parentNode||(lQ(e)?e.host:null)||_0(e)}function Fte(e){return!Yd(e)||dm(e).position==="fixed"?null:e.offsetParent}function NDe(e){var t=/firefox/i.test(XF()),i=/Trident/i.test(XF());if(i&&Yd(e)){var s=dm(e);if(s.position==="fixed")return null}var c=xP(e);for(lQ(c)&&(c=c.host);Yd(c)&&["html","body"].indexOf(Jp(c))<0;){var u=dm(c);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return c;c=c.parentNode}return null}function HT(e){for(var t=jA(e),i=Fte(e);i&&ODe(i)&&dm(i).position==="static";)i=Fte(i);return i&&(Jp(i)==="html"||Jp(i)==="body"&&dm(i).position==="static")?t:i||NDe(e)||t}function AQ(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function BC(e,t,i){return G1(e,qB(t,i))}function BDe(e,t,i){var s=BC(e,t,i);return s>i?i:s}function Due(){return{top:0,right:0,bottom:0,left:0}}function xue(e){return Object.assign({},Due(),e)}function Uue(e,t){return t.reduce(function(i,s){return i[s]=e,i},{})}var LDe=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,xue(typeof t!="number"?t:Uue(t,QT))};function PDe(e){var t,i=e.state,s=e.name,c=e.options,u=i.elements.arrow,f=i.modifiersData.popperOffsets,p=Yp(i.placement),m=AQ(p),E=[zu,tf].indexOf(p)>=0,w=E?"height":"width";if(!(!u||!f)){var T=LDe(c.padding,i),N=uQ(u),O=m==="y"?$u:zu,P=m==="y"?ef:tf,M=i.rects.reference[w]+i.rects.reference[m]-f[m]-i.rects.popper[w],Q=f[m]-i.rects.reference[m],k=HT(u),D=k?m==="y"?k.clientHeight||0:k.clientWidth||0:0,V=M/2-Q/2,K=T[O],J=D-N[w]-T[P],ie=D/2-N[w]/2+V,fe=BC(K,ie,J),Z=m;i.modifiersData[s]=(t={},t[Z]=fe,t.centerOffset=fe-ie,t)}}function kDe(e){var t=e.state,i=e.options,s=i.element,c=s===void 0?"[data-popper-arrow]":s;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||kue(t.elements.popper,c)&&(t.elements.arrow=c))}const DDe={name:"arrow",enabled:!0,phase:"main",fn:PDe,effect:kDe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _w(e){return e.split("-")[1]}var xDe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function UDe(e,t){var i=e.x,s=e.y,c=t.devicePixelRatio||1;return{x:mw(i*c)/c||0,y:mw(s*c)/c||0}}function Vte(e){var t,i=e.popper,s=e.popperRect,c=e.placement,u=e.variation,f=e.offsets,p=e.position,m=e.gpuAcceleration,E=e.adaptive,w=e.roundOffsets,T=e.isFixed,N=f.x,O=N===void 0?0:N,P=f.y,M=P===void 0?0:P,Q=typeof w=="function"?w({x:O,y:M}):{x:O,y:M};O=Q.x,M=Q.y;var k=f.hasOwnProperty("x"),D=f.hasOwnProperty("y"),V=zu,K=$u,J=window;if(E){var ie=HT(i),fe="clientHeight",Z="clientWidth";if(ie===jA(i)&&(ie=_0(i),dm(ie).position!=="static"&&p==="absolute"&&(fe="scrollHeight",Z="scrollWidth")),ie=ie,c===$u||(c===zu||c===tf)&&u===gT){K=ef;var pe=T&&ie===J&&J.visualViewport?J.visualViewport.height:ie[fe];M-=pe-s.height,M*=m?1:-1}if(c===zu||(c===$u||c===ef)&&u===gT){V=tf;var Y=T&&ie===J&&J.visualViewport?J.visualViewport.width:ie[Z];O-=Y-s.width,O*=m?1:-1}}var te=Object.assign({position:p},E&&xDe),le=w===!0?UDe({x:O,y:M},jA(i)):{x:O,y:M};if(O=le.x,M=le.y,m){var ae;return Object.assign({},te,(ae={},ae[K]=D?"0":"",ae[V]=k?"0":"",ae.transform=(J.devicePixelRatio||1)<=1?"translate("+O+"px, "+M+"px)":"translate3d("+O+"px, "+M+"px, 0)",ae))}return Object.assign({},te,(t={},t[K]=D?M+"px":"",t[V]=k?O+"px":"",t.transform="",t))}function MDe(e){var t=e.state,i=e.options,s=i.gpuAcceleration,c=s===void 0?!0:s,u=i.adaptive,f=u===void 0?!0:u,p=i.roundOffsets,m=p===void 0?!0:p,E={placement:Yp(t.placement),variation:_w(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Vte(Object.assign({},E,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vte(Object.assign({},E,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const FDe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:MDe,data:{}};var CO={passive:!0};function VDe(e){var t=e.state,i=e.instance,s=e.options,c=s.scroll,u=c===void 0?!0:c,f=s.resize,p=f===void 0?!0:f,m=jA(t.elements.popper),E=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&E.forEach(function(w){w.addEventListener("scroll",i.update,CO)}),p&&m.addEventListener("resize",i.update,CO),function(){u&&E.forEach(function(w){w.removeEventListener("scroll",i.update,CO)}),p&&m.removeEventListener("resize",i.update,CO)}}const QDe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:VDe,data:{}};var HDe={left:"right",right:"left",bottom:"top",top:"bottom"};function FN(e){return e.replace(/left|right|bottom|top/g,function(t){return HDe[t]})}var jDe={start:"end",end:"start"};function Qte(e){return e.replace(/start|end/g,function(t){return jDe[t]})}function dQ(e){var t=jA(e),i=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:i,scrollTop:s}}function fQ(e){return vw(_0(e)).left+dQ(e).scrollLeft}function KDe(e,t){var i=jA(e),s=_0(e),c=i.visualViewport,u=s.clientWidth,f=s.clientHeight,p=0,m=0;if(c){u=c.width,f=c.height;var E=Pue();(E||!E&&t==="fixed")&&(p=c.offsetLeft,m=c.offsetTop)}return{width:u,height:f,x:p+fQ(e),y:m}}function WDe(e){var t,i=_0(e),s=dQ(e),c=(t=e.ownerDocument)==null?void 0:t.body,u=G1(i.scrollWidth,i.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),f=G1(i.scrollHeight,i.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),p=-s.scrollLeft+fQ(e),m=-s.scrollTop;return dm(c||i).direction==="rtl"&&(p+=G1(i.clientWidth,c?c.clientWidth:0)-u),{width:u,height:f,x:p,y:m}}function hQ(e){var t=dm(e),i=t.overflow,s=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+c+s)}function Mue(e){return["html","body","#document"].indexOf(Jp(e))>=0?e.ownerDocument.body:Yd(e)&&hQ(e)?e:Mue(xP(e))}function LC(e,t){var i;t===void 0&&(t=[]);var s=Mue(e),c=s===((i=e.ownerDocument)==null?void 0:i.body),u=jA(s),f=c?[u].concat(u.visualViewport||[],hQ(s)?s:[]):s,p=t.concat(f);return c?p:p.concat(LC(xP(f)))}function JF(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function GDe(e,t){var i=vw(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function Hte(e,t,i){return t===Bue?JF(KDe(e,i)):o_(t)?GDe(t,i):JF(WDe(_0(e)))}function $De(e){var t=LC(xP(e)),i=["absolute","fixed"].indexOf(dm(e).position)>=0,s=i&&Yd(e)?HT(e):e;return o_(s)?t.filter(function(c){return o_(c)&&kue(c,s)&&Jp(c)!=="body"}):[]}function zDe(e,t,i,s){var c=t==="clippingParents"?$De(e):[].concat(t),u=[].concat(c,[i]),f=u[0],p=u.reduce(function(m,E){var w=Hte(e,E,s);return m.top=G1(w.top,m.top),m.right=qB(w.right,m.right),m.bottom=qB(w.bottom,m.bottom),m.left=G1(w.left,m.left),m},Hte(e,f,s));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function Fue(e){var t=e.reference,i=e.element,s=e.placement,c=s?Yp(s):null,u=s?_w(s):null,f=t.x+t.width/2-i.width/2,p=t.y+t.height/2-i.height/2,m;switch(c){case $u:m={x:f,y:t.y-i.height};break;case ef:m={x:f,y:t.y+t.height};break;case tf:m={x:t.x+t.width,y:p};break;case zu:m={x:t.x-i.width,y:p};break;default:m={x:t.x,y:t.y}}var E=c?AQ(c):null;if(E!=null){var w=E==="y"?"height":"width";switch(u){case gw:m[E]=m[E]-(t[w]/2-i[w]/2);break;case gT:m[E]=m[E]+(t[w]/2-i[w]/2);break}}return m}function mT(e,t){t===void 0&&(t={});var i=t,s=i.placement,c=s===void 0?e.placement:s,u=i.strategy,f=u===void 0?e.strategy:u,p=i.boundary,m=p===void 0?hDe:p,E=i.rootBoundary,w=E===void 0?Bue:E,T=i.elementContext,N=T===void 0?Nb:T,O=i.altBoundary,P=O===void 0?!1:O,M=i.padding,Q=M===void 0?0:M,k=xue(typeof Q!="number"?Q:Uue(Q,QT)),D=N===Nb?pDe:Nb,V=e.rects.popper,K=e.elements[P?D:N],J=zDe(o_(K)?K:K.contextElement||_0(e.elements.popper),m,w,f),ie=vw(e.elements.reference),fe=Fue({reference:ie,element:V,strategy:"absolute",placement:c}),Z=JF(Object.assign({},V,fe)),pe=N===Nb?Z:ie,Y={top:J.top-pe.top+k.top,bottom:pe.bottom-J.bottom+k.bottom,left:J.left-pe.left+k.left,right:pe.right-J.right+k.right},te=e.modifiersData.offset;if(N===Nb&&te){var le=te[c];Object.keys(Y).forEach(function(ae){var ge=[tf,ef].indexOf(ae)>=0?1:-1,se=[$u,ef].indexOf(ae)>=0?"y":"x";Y[ae]+=le[se]*ge})}return Y}function qDe(e,t){t===void 0&&(t={});var i=t,s=i.placement,c=i.boundary,u=i.rootBoundary,f=i.padding,p=i.flipVariations,m=i.allowedAutoPlacements,E=m===void 0?Lue:m,w=_w(s),T=w?p?Mte:Mte.filter(function(P){return _w(P)===w}):QT,N=T.filter(function(P){return E.indexOf(P)>=0});N.length===0&&(N=T);var O=N.reduce(function(P,M){return P[M]=mT(e,{placement:M,boundary:c,rootBoundary:u,padding:f})[Yp(M)],P},{});return Object.keys(O).sort(function(P,M){return O[P]-O[M]})}function YDe(e){if(Yp(e)===cQ)return[];var t=FN(e);return[Qte(e),t,Qte(t)]}function XDe(e){var t=e.state,i=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var c=i.mainAxis,u=c===void 0?!0:c,f=i.altAxis,p=f===void 0?!0:f,m=i.fallbackPlacements,E=i.padding,w=i.boundary,T=i.rootBoundary,N=i.altBoundary,O=i.flipVariations,P=O===void 0?!0:O,M=i.allowedAutoPlacements,Q=t.options.placement,k=Yp(Q),D=k===Q,V=m||(D||!P?[FN(Q)]:YDe(Q)),K=[Q].concat(V).reduce(function(Ue,Fe){return Ue.concat(Yp(Fe)===cQ?qDe(t,{placement:Fe,boundary:w,rootBoundary:T,padding:E,flipVariations:P,allowedAutoPlacements:M}):Fe)},[]),J=t.rects.reference,ie=t.rects.popper,fe=new Map,Z=!0,pe=K[0],Y=0;Y<K.length;Y++){var te=K[Y],le=Yp(te),ae=_w(te)===gw,ge=[$u,ef].indexOf(le)>=0,se=ge?"width":"height",xe=mT(t,{placement:te,boundary:w,rootBoundary:T,altBoundary:N,padding:E}),Me=ge?ae?tf:zu:ae?ef:$u;J[se]>ie[se]&&(Me=FN(Me));var Be=FN(Me),ke=[];if(u&&ke.push(xe[le]<=0),p&&ke.push(xe[Me]<=0,xe[Be]<=0),ke.every(function(Ue){return Ue})){pe=te,Z=!1;break}fe.set(te,ke)}if(Z)for(var Ke=P?3:1,ht=function(Fe){var Qe=K.find(function(We){var et=fe.get(We);if(et)return et.slice(0,Fe).every(function(Ze){return Ze})});if(Qe)return pe=Qe,"break"},ve=Ke;ve>0;ve--){var Oe=ht(ve);if(Oe==="break")break}t.placement!==pe&&(t.modifiersData[s]._skip=!0,t.placement=pe,t.reset=!0)}}const JDe={name:"flip",enabled:!0,phase:"main",fn:XDe,requiresIfExists:["offset"],data:{_skip:!1}};function jte(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function Kte(e){return[$u,tf,ef,zu].some(function(t){return e[t]>=0})}function ZDe(e){var t=e.state,i=e.name,s=t.rects.reference,c=t.rects.popper,u=t.modifiersData.preventOverflow,f=mT(t,{elementContext:"reference"}),p=mT(t,{altBoundary:!0}),m=jte(f,s),E=jte(p,c,u),w=Kte(m),T=Kte(E);t.modifiersData[i]={referenceClippingOffsets:m,popperEscapeOffsets:E,isReferenceHidden:w,hasPopperEscaped:T},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":T})}const exe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ZDe};function txe(e,t,i){var s=Yp(e),c=[zu,$u].indexOf(s)>=0?-1:1,u=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,f=u[0],p=u[1];return f=f||0,p=(p||0)*c,[zu,tf].indexOf(s)>=0?{x:p,y:f}:{x:f,y:p}}function rxe(e){var t=e.state,i=e.options,s=e.name,c=i.offset,u=c===void 0?[0,0]:c,f=Lue.reduce(function(w,T){return w[T]=txe(T,t.rects,u),w},{}),p=f[t.placement],m=p.x,E=p.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=E),t.modifiersData[s]=f}const nxe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rxe};function ixe(e){var t=e.state,i=e.name;t.modifiersData[i]=Fue({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const oxe={name:"popperOffsets",enabled:!0,phase:"read",fn:ixe,data:{}};function sxe(e){return e==="x"?"y":"x"}function axe(e){var t=e.state,i=e.options,s=e.name,c=i.mainAxis,u=c===void 0?!0:c,f=i.altAxis,p=f===void 0?!1:f,m=i.boundary,E=i.rootBoundary,w=i.altBoundary,T=i.padding,N=i.tether,O=N===void 0?!0:N,P=i.tetherOffset,M=P===void 0?0:P,Q=mT(t,{boundary:m,rootBoundary:E,padding:T,altBoundary:w}),k=Yp(t.placement),D=_w(t.placement),V=!D,K=AQ(k),J=sxe(K),ie=t.modifiersData.popperOffsets,fe=t.rects.reference,Z=t.rects.popper,pe=typeof M=="function"?M(Object.assign({},t.rects,{placement:t.placement})):M,Y=typeof pe=="number"?{mainAxis:pe,altAxis:pe}:Object.assign({mainAxis:0,altAxis:0},pe),te=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,le={x:0,y:0};if(ie){if(u){var ae,ge=K==="y"?$u:zu,se=K==="y"?ef:tf,xe=K==="y"?"height":"width",Me=ie[K],Be=Me+Q[ge],ke=Me-Q[se],Ke=O?-Z[xe]/2:0,ht=D===gw?fe[xe]:Z[xe],ve=D===gw?-Z[xe]:-fe[xe],Oe=t.elements.arrow,Ue=O&&Oe?uQ(Oe):{width:0,height:0},Fe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Due(),Qe=Fe[ge],We=Fe[se],et=BC(0,fe[xe],Ue[xe]),Ze=V?fe[xe]/2-Ke-et-Qe-Y.mainAxis:ht-et-Qe-Y.mainAxis,pt=V?-fe[xe]/2+Ke+et+We+Y.mainAxis:ve+et+We+Y.mainAxis,at=t.elements.arrow&&HT(t.elements.arrow),Rt=at?K==="y"?at.clientTop||0:at.clientLeft||0:0,Ot=(ae=te==null?void 0:te[K])!=null?ae:0,Ft=Me+Ze-Ot-Rt,lt=Me+pt-Ot,He=BC(O?qB(Be,Ft):Be,Me,O?G1(ke,lt):ke);ie[K]=He,le[K]=He-Me}if(p){var vr,qt=K==="x"?$u:zu,Nt=K==="x"?ef:tf,It=ie[J],Yt=J==="y"?"height":"width",Bt=It+Q[qt],_r=It-Q[Nt],ar=[$u,zu].indexOf(k)!==-1,zr=(vr=te==null?void 0:te[J])!=null?vr:0,Xr=ar?Bt:It-fe[Yt]-Z[Yt]-zr+Y.altAxis,Kt=ar?It+fe[Yt]+Z[Yt]-zr-Y.altAxis:_r,yr=O&&ar?BDe(Xr,It,Kt):BC(O?Xr:Bt,It,O?Kt:_r);ie[J]=yr,le[J]=yr-It}t.modifiersData[s]=le}}const cxe={name:"preventOverflow",enabled:!0,phase:"main",fn:axe,requiresIfExists:["offset"]};function lxe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function uxe(e){return e===jA(e)||!Yd(e)?dQ(e):lxe(e)}function Axe(e){var t=e.getBoundingClientRect(),i=mw(t.width)/e.offsetWidth||1,s=mw(t.height)/e.offsetHeight||1;return i!==1||s!==1}function dxe(e,t,i){i===void 0&&(i=!1);var s=Yd(t),c=Yd(t)&&Axe(t),u=_0(t),f=vw(e,c,i),p={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(s||!s&&!i)&&((Jp(t)!=="body"||hQ(u))&&(p=uxe(t)),Yd(t)?(m=vw(t,!0),m.x+=t.clientLeft,m.y+=t.clientTop):u&&(m.x=fQ(u))),{x:f.left+p.scrollLeft-m.x,y:f.top+p.scrollTop-m.y,width:f.width,height:f.height}}function fxe(e){var t=new Map,i=new Set,s=[];e.forEach(function(u){t.set(u.name,u)});function c(u){i.add(u.name);var f=[].concat(u.requires||[],u.requiresIfExists||[]);f.forEach(function(p){if(!i.has(p)){var m=t.get(p);m&&c(m)}}),s.push(u)}return e.forEach(function(u){i.has(u.name)||c(u)}),s}function hxe(e){var t=fxe(e);return CDe.reduce(function(i,s){return i.concat(t.filter(function(c){return c.phase===s}))},[])}function pxe(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function gxe(e){var t=e.reduce(function(i,s){var c=i[s.name];return i[s.name]=c?Object.assign({},c,s,{options:Object.assign({},c.options,s.options),data:Object.assign({},c.data,s.data)}):s,i},{});return Object.keys(t).map(function(i){return t[i]})}var Wte={placement:"bottom",modifiers:[],strategy:"absolute"};function Gte(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function mxe(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,s=i===void 0?[]:i,c=t.defaultOptions,u=c===void 0?Wte:c;return function(p,m,E){E===void 0&&(E=u);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wte,u),modifiersData:{},elements:{reference:p,popper:m},attributes:{},styles:{}},T=[],N=!1,O={state:w,setOptions:function(k){var D=typeof k=="function"?k(w.options):k;M(),w.options=Object.assign({},u,w.options,D),w.scrollParents={reference:o_(p)?LC(p):p.contextElement?LC(p.contextElement):[],popper:LC(m)};var V=hxe(gxe([].concat(s,w.options.modifiers)));return w.orderedModifiers=V.filter(function(K){return K.enabled}),P(),O.update()},forceUpdate:function(){if(!N){var k=w.elements,D=k.reference,V=k.popper;if(Gte(D,V)){w.rects={reference:dxe(D,HT(V),w.options.strategy==="fixed"),popper:uQ(V)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(Y){return w.modifiersData[Y.name]=Object.assign({},Y.data)});for(var K=0;K<w.orderedModifiers.length;K++){if(w.reset===!0){w.reset=!1,K=-1;continue}var J=w.orderedModifiers[K],ie=J.fn,fe=J.options,Z=fe===void 0?{}:fe,pe=J.name;typeof ie=="function"&&(w=ie({state:w,options:Z,name:pe,instance:O})||w)}}}},update:pxe(function(){return new Promise(function(Q){O.forceUpdate(),Q(w)})}),destroy:function(){M(),N=!0}};if(!Gte(p,m))return O;O.setOptions(E).then(function(Q){!N&&E.onFirstUpdate&&E.onFirstUpdate(Q)});function P(){w.orderedModifiers.forEach(function(Q){var k=Q.name,D=Q.options,V=D===void 0?{}:D,K=Q.effect;if(typeof K=="function"){var J=K({state:w,name:k,instance:O,options:V}),ie=function(){};T.push(J||ie)}})}function M(){T.forEach(function(Q){return Q()}),T=[]}return O}}var vxe=[QDe,oxe,FDe,IDe,nxe,JDe,cxe,DDe,exe],_xe=mxe({defaultModifiers:vxe});function Vue(e){var T;const{elementType:t,externalSlotProps:i,ownerState:s,skipResolvingSlotProps:c=!1,...u}=e,f=c?{}:Oue(i,s),{props:p,internalRef:m}=Nue({...u,externalSlotProps:f}),E=uc(m,f==null?void 0:f.ref,(T=e.additionalProps)==null?void 0:T.ref);return Iue(t,{...p,ref:E},s)}function f_(e){var t;return parseInt(he.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function yxe(e){return typeof e=="function"?e():e}const Exe=he.forwardRef(function(t,i){const{children:s,container:c,disablePortal:u=!1}=t,[f,p]=he.useState(null),m=uc(he.isValidElement(s)?f_(s):null,i);if(Sh(()=>{u||p(yxe(c)||document.body)},[c,u]),Sh(()=>{if(f&&!u)return Rte(i,f),()=>{Rte(i,null)}},[i,f,u]),u){if(he.isValidElement(s)){const E={ref:m};return he.cloneElement(s,E)}return s}return f&&BV.createPortal(s,f)}),Que=Exe;function wxe(e){return Qn("MuiPopper",e)}Un("MuiPopper",["root"]);function Sxe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function ZF(e){return typeof e=="function"?e():e}function bxe(e){return e.nodeType!==void 0}const Cxe=e=>{const{classes:t}=e;return Hn({root:["root"]},wxe,t)},Txe={},Rxe=he.forwardRef(function(t,i){const{anchorEl:s,children:c,direction:u,disablePortal:f,modifiers:p,open:m,placement:E,popperOptions:w,popperRef:T,slotProps:N={},slots:O={},TransitionProps:P,ownerState:M,...Q}=t,k=he.useRef(null),D=uc(k,i),V=he.useRef(null),K=uc(V,T),J=he.useRef(K);Sh(()=>{J.current=K},[K]),he.useImperativeHandle(T,()=>V.current,[]);const ie=Sxe(E,u),[fe,Z]=he.useState(ie),[pe,Y]=he.useState(ZF(s));he.useEffect(()=>{V.current&&V.current.forceUpdate()}),he.useEffect(()=>{s&&Y(ZF(s))},[s]),Sh(()=>{if(!pe||!m)return;const se=Be=>{Z(Be.placement)};let xe=[{name:"preventOverflow",options:{altBoundary:f}},{name:"flip",options:{altBoundary:f}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Be})=>{se(Be)}}];p!=null&&(xe=xe.concat(p)),w&&w.modifiers!=null&&(xe=xe.concat(w.modifiers));const Me=_xe(pe,k.current,{placement:ie,...w,modifiers:xe});return J.current(Me),()=>{Me.destroy(),J.current(null)}},[pe,f,p,m,w,ie]);const te={placement:fe};P!==null&&(te.TransitionProps=P);const le=Cxe(t),ae=O.root??"div",ge=Vue({elementType:ae,externalSlotProps:N.root,externalForwardedProps:Q,additionalProps:{role:"tooltip",ref:D},ownerState:t,className:le.root});return oe.jsx(ae,{...ge,children:typeof c=="function"?c(te):c})}),Ixe=he.forwardRef(function(t,i){const{anchorEl:s,children:c,container:u,direction:f="ltr",disablePortal:p=!1,keepMounted:m=!1,modifiers:E,open:w,placement:T="bottom",popperOptions:N=Txe,popperRef:O,style:P,transition:M=!1,slotProps:Q={},slots:k={},...D}=t,[V,K]=he.useState(!0),J=()=>{K(!1)},ie=()=>{K(!0)};if(!m&&!w&&(!M||V))return null;let fe;if(u)fe=u;else if(s){const Y=ZF(s);fe=Y&&bxe(Y)?Ql(Y).body:Ql(null).body}const Z=!w&&m&&(!M||V)?"none":void 0,pe=M?{in:w,onEnter:J,onExited:ie}:void 0;return oe.jsx(Que,{disablePortal:p,container:fe,children:oe.jsx(Rxe,{anchorEl:s,direction:f,disablePortal:p,modifiers:E,ref:i,open:M?!V:w,placement:T,popperOptions:N,popperRef:O,slotProps:Q,slots:k,...D,style:{position:"fixed",top:0,left:0,display:Z,...P},TransitionProps:pe,children:c})})}),Oxe=Ixe,Nxe=mr(Oxe,{name:"MuiPopper",slot:"Root"})({}),Bxe=he.forwardRef(function(t,i){const s=ZV(),c=$n({props:t,name:"MuiPopper"}),{anchorEl:u,component:f,components:p,componentsProps:m,container:E,disablePortal:w,keepMounted:T,modifiers:N,open:O,placement:P,popperOptions:M,popperRef:Q,transition:k,slots:D,slotProps:V,...K}=c,J=(D==null?void 0:D.root)??(p==null?void 0:p.Root),ie={anchorEl:u,container:E,disablePortal:w,keepMounted:T,modifiers:N,open:O,placement:P,popperOptions:M,popperRef:Q,transition:k,...K};return oe.jsx(Nxe,{as:f,direction:s?"rtl":"ltr",slots:{root:J},slotProps:V??m,...ie,ref:i})}),Hue=Bxe;function TO(e){return parseInt(e,10)||0}const Lxe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Pxe(e){for(const t in e)return!1;return!0}function $te(e){return Pxe(e)||e.outerHeightStyle===0&&!e.overflowing}const kxe=he.forwardRef(function(t,i){const{onChange:s,maxRows:c,minRows:u=1,style:f,value:p,...m}=t,{current:E}=he.useRef(p!=null),w=he.useRef(null),T=uc(i,w),N=he.useRef(null),O=he.useRef(null),P=he.useCallback(()=>{const V=w.current,K=O.current;if(!V||!K)return;const ie=Am(V).getComputedStyle(V);if(ie.width==="0px")return{outerHeightStyle:0,overflowing:!1};K.style.width=ie.width,K.value=V.value||t.placeholder||"x",K.value.slice(-1)===`
`&&(K.value+=" ");const fe=ie.boxSizing,Z=TO(ie.paddingBottom)+TO(ie.paddingTop),pe=TO(ie.borderBottomWidth)+TO(ie.borderTopWidth),Y=K.scrollHeight;K.value="x";const te=K.scrollHeight;let le=Y;u&&(le=Math.max(Number(u)*te,le)),c&&(le=Math.min(Number(c)*te,le)),le=Math.max(le,te);const ae=le+(fe==="border-box"?Z+pe:0),ge=Math.abs(le-Y)<=1;return{outerHeightStyle:ae,overflowing:ge}},[c,u,t.placeholder]),M=qd(()=>{const V=w.current,K=P();if(!V||!K||$te(K))return!1;const J=K.outerHeightStyle;return N.current!=null&&N.current!==J}),Q=he.useCallback(()=>{const V=w.current,K=P();if(!V||!K||$te(K))return;const J=K.outerHeightStyle;N.current!==J&&(N.current=J,V.style.height=`${J}px`),V.style.overflow=K.overflowing?"hidden":""},[P]),k=he.useRef(-1);Sh(()=>{const V=Eue(Q),K=w==null?void 0:w.current;if(!K)return;const J=Am(K);J.addEventListener("resize",V);let ie;return typeof ResizeObserver<"u"&&(ie=new ResizeObserver(()=>{M()&&(ie.unobserve(K),cancelAnimationFrame(k.current),Q(),k.current=requestAnimationFrame(()=>{ie.observe(K)}))}),ie.observe(K)),()=>{V.clear(),cancelAnimationFrame(k.current),J.removeEventListener("resize",V),ie&&ie.disconnect()}},[P,Q,M]),Sh(()=>{Q()});const D=V=>{E||Q();const K=V.target,J=K.value.length,ie=K.value.endsWith(`
`),fe=K.selectionStart===J;ie&&fe&&K.setSelectionRange(J,J),s&&s(V)};return oe.jsxs(he.Fragment,{children:[oe.jsx("textarea",{value:p,onChange:D,ref:T,rows:u,style:f,...m}),oe.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:O,tabIndex:-1,style:{...Lxe.shadow,...f,paddingTop:0,paddingBottom:0}})]})}),Dxe=kxe;function e6(e){return typeof e=="string"}function h_({props:e,states:t,muiFormControl:i}){return t.reduce((s,c)=>(s[c]=e[c],i&&typeof e[c]>"u"&&(s[c]=i[c]),s),{})}const xxe=he.createContext(void 0),pQ=xxe;function y0(){return he.useContext(pQ)}function zte(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function YB(e,t=!1){return e&&(zte(e.value)&&e.value!==""||t&&zte(e.defaultValue)&&e.defaultValue!=="")}function Uxe(e){return e.startAdornment}function Mxe(e){return Qn("MuiInputBase",e)}const Fxe=Un("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),yw=Fxe;var qte;const UP=(e,t)=>{const{ownerState:i}=e;return[t.root,i.formControl&&t.formControl,i.startAdornment&&t.adornedStart,i.endAdornment&&t.adornedEnd,i.error&&t.error,i.size==="small"&&t.sizeSmall,i.multiline&&t.multiline,i.color&&t[`color${Ur(i.color)}`],i.fullWidth&&t.fullWidth,i.hiddenLabel&&t.hiddenLabel]},MP=(e,t)=>{const{ownerState:i}=e;return[t.input,i.size==="small"&&t.inputSizeSmall,i.multiline&&t.inputMultiline,i.type==="search"&&t.inputTypeSearch,i.startAdornment&&t.inputAdornedStart,i.endAdornment&&t.inputAdornedEnd,i.hiddenLabel&&t.inputHiddenLabel]},Vxe=e=>{const{classes:t,color:i,disabled:s,error:c,endAdornment:u,focused:f,formControl:p,fullWidth:m,hiddenLabel:E,multiline:w,readOnly:T,size:N,startAdornment:O,type:P}=e,M={root:["root",`color${Ur(i)}`,s&&"disabled",c&&"error",m&&"fullWidth",f&&"focused",p&&"formControl",N&&N!=="medium"&&`size${Ur(N)}`,w&&"multiline",O&&"adornedStart",u&&"adornedEnd",E&&"hiddenLabel",T&&"readOnly"],input:["input",s&&"disabled",P==="search"&&"inputTypeSearch",w&&"inputMultiline",N==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",O&&"inputAdornedStart",u&&"inputAdornedEnd",T&&"readOnly"]};return Hn(M,Mxe,t)},FP=mr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:UP})(_i(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${yw.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:i})=>t.multiline&&i==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),VP=mr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:MP})(_i(({theme:e})=>{const t=e.palette.mode==="light",i={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},s={opacity:"0 !important"},c=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${yw.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":c,"&:focus::-moz-placeholder":c,"&:focus::-ms-input-placeholder":c},[`&.${yw.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:u})=>!u.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:u})=>u.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),Yte=iQ({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Qxe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiInputBase"}),{"aria-describedby":c,autoComplete:u,autoFocus:f,className:p,color:m,components:E={},componentsProps:w={},defaultValue:T,disabled:N,disableInjectingGlobalStyles:O,endAdornment:P,error:M,fullWidth:Q=!1,id:k,inputComponent:D="input",inputProps:V={},inputRef:K,margin:J,maxRows:ie,minRows:fe,multiline:Z=!1,name:pe,onBlur:Y,onChange:te,onClick:le,onFocus:ae,onKeyDown:ge,onKeyUp:se,placeholder:xe,readOnly:Me,renderSuffix:Be,rows:ke,size:Ke,slotProps:ht={},slots:ve={},startAdornment:Oe,type:Ue="text",value:Fe,...Qe}=s,We=V.value!=null?V.value:Fe,{current:et}=he.useRef(We!=null),Ze=he.useRef(),pt=he.useCallback(vt=>{},[]),at=uc(Ze,K,V.ref,pt),[Rt,Ot]=he.useState(!1),Ft=y0(),lt=h_({props:s,muiFormControl:Ft,states:["color","disabled","error","hiddenLabel","size","required","filled"]});lt.focused=Ft?Ft.focused:Rt,he.useEffect(()=>{!Ft&&N&&Rt&&(Ot(!1),Y&&Y())},[Ft,N,Rt,Y]);const He=Ft&&Ft.onFilled,vr=Ft&&Ft.onEmpty,qt=he.useCallback(vt=>{YB(vt)?He&&He():vr&&vr()},[He,vr]);Sh(()=>{et&&qt({value:We})},[We,qt,et]);const Nt=vt=>{ae&&ae(vt),V.onFocus&&V.onFocus(vt),Ft&&Ft.onFocus?Ft.onFocus(vt):Ot(!0)},It=vt=>{Y&&Y(vt),V.onBlur&&V.onBlur(vt),Ft&&Ft.onBlur?Ft.onBlur(vt):Ot(!1)},Yt=(vt,...tn)=>{if(!et){const Rr=vt.target||Ze.current;if(Rr==null)throw new Error(um(1));qt({value:Rr.value})}V.onChange&&V.onChange(vt,...tn),te&&te(vt,...tn)};he.useEffect(()=>{qt(Ze.current)},[]);const Bt=vt=>{Ze.current&&vt.currentTarget===vt.target&&Ze.current.focus(),le&&le(vt)};let _r=D,ar=V;Z&&_r==="input"&&(ke?ar={type:void 0,minRows:ke,maxRows:ke,...ar}:ar={type:void 0,maxRows:ie,minRows:fe,...ar},_r=Dxe);const zr=vt=>{qt(vt.animationName==="mui-auto-fill-cancel"?Ze.current:{value:"x"})};he.useEffect(()=>{Ft&&Ft.setAdornedStart(!!Oe)},[Ft,Oe]);const Xr={...s,color:lt.color||"primary",disabled:lt.disabled,endAdornment:P,error:lt.error,focused:lt.focused,formControl:Ft,fullWidth:Q,hiddenLabel:lt.hiddenLabel,multiline:Z,size:lt.size,startAdornment:Oe,type:Ue},Kt=Vxe(Xr),yr=ve.root||E.Root||FP,nr=ht.root||w.root||{},er=ve.input||E.Input||VP;return ar={...ar,...ht.input??w.input},oe.jsxs(he.Fragment,{children:[!O&&typeof Yte=="function"&&(qte||(qte=oe.jsx(Yte,{}))),oe.jsxs(yr,{...nr,ref:i,onClick:Bt,...Qe,...!e6(yr)&&{ownerState:{...Xr,...nr.ownerState}},className:nn(Kt.root,nr.className,p,Me&&"MuiInputBase-readOnly"),children:[Oe,oe.jsx(pQ.Provider,{value:null,children:oe.jsx(er,{"aria-invalid":lt.error,"aria-describedby":c,autoComplete:u,autoFocus:f,defaultValue:T,disabled:lt.disabled,id:k,onAnimationStart:zr,name:pe,placeholder:xe,readOnly:Me,required:lt.required,rows:ke,value:We,onKeyDown:ge,onKeyUp:se,type:Ue,...ar,...!e6(er)&&{as:_r,ownerState:{...Xr,...ar.ownerState}},ref:at,className:nn(Kt.input,ar.className,Me&&"MuiInputBase-readOnly"),onBlur:It,onChange:Yt,onFocus:Nt})}),P,Be?Be({...lt,startAdornment:Oe}):null]})]})}),gQ=Qxe;function Hxe(e){return Qn("MuiInput",e)}const jxe={...yw,...Un("MuiInput",["root","underline","input"])},Bb=jxe;function Kxe(e){return Qn("MuiOutlinedInput",e)}const Wxe={...yw,...Un("MuiOutlinedInput",["root","notchedOutline","input"])},Pp=Wxe;function Gxe(e){return Qn("MuiFilledInput",e)}const $xe={...yw,...Un("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},S1=$xe,zxe=Go(oe.jsx("path",{d:"M7 10l5 5 5-5z"})),qxe=Go(oe.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Yxe(e){return Qn("MuiAvatar",e)}Un("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Xxe=e=>{const{classes:t,variant:i,colorDefault:s}=e;return Hn({root:["root",i,s&&"colorDefault"],img:["img"],fallback:["fallback"]},Yxe,t)},Jxe=mr("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],i.colorDefault&&t.colorDefault]}})(_i(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),Zxe=mr("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),e5e=mr(qxe,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function t5e({crossOrigin:e,referrerPolicy:t,src:i,srcSet:s}){const[c,u]=he.useState(!1);return he.useEffect(()=>{if(!i&&!s)return;u(!1);let f=!0;const p=new Image;return p.onload=()=>{f&&u("loaded")},p.onerror=()=>{f&&u("error")},p.crossOrigin=e,p.referrerPolicy=t,p.src=i,s&&(p.srcset=s),()=>{f=!1}},[e,t,i,s]),c}const r5e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiAvatar"}),{alt:c,children:u,className:f,component:p="div",slots:m={},slotProps:E={},imgProps:w,sizes:T,src:N,srcSet:O,variant:P="circular",...M}=s;let Q=null;const k={...s,component:p,variant:P},D=t5e({...w,...typeof E.img=="function"?E.img(k):E.img,src:N,srcSet:O}),V=N||O,K=V&&D!=="error";k.colorDefault=!K,delete k.ownerState;const J=Xxe(k),[ie,fe]=ei("root",{ref:i,className:nn(J.root,f),elementType:Jxe,externalForwardedProps:{slots:m,slotProps:E,component:p,...M},ownerState:k}),[Z,pe]=ei("img",{className:J.img,elementType:Zxe,externalForwardedProps:{slots:m,slotProps:{img:{...w,...E.img}}},additionalProps:{alt:c,src:N,srcSet:O,sizes:T},ownerState:k}),[Y,te]=ei("fallback",{className:J.fallback,elementType:e5e,externalForwardedProps:{slots:m,slotProps:E},shouldForwardComponentProp:!0,ownerState:k});return K?Q=oe.jsx(Z,{...pe}):u||u===0?Q=u:V&&c?Q=c[0]:Q=oe.jsx(Y,{...te}),oe.jsx(ie,{...fe,children:Q})}),XB=r5e,n5e={entering:{opacity:1},entered:{opacity:1}},i5e=he.forwardRef(function(t,i){const s=d_(),c={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:u,appear:f=!0,children:p,easing:m,in:E,onEnter:w,onEntered:T,onEntering:N,onExit:O,onExited:P,onExiting:M,style:Q,timeout:k=c,TransitionComponent:D=Cue,...V}=t,K=he.useRef(null),J=uc(K,f_(p),i),ie=ge=>se=>{if(ge){const xe=K.current;se===void 0?ge(xe):ge(xe,se)}},fe=ie(N),Z=ie((ge,se)=>{Rue(ge);const xe=KB({style:Q,timeout:k,easing:m},{mode:"enter"});ge.style.webkitTransition=s.transitions.create("opacity",xe),ge.style.transition=s.transitions.create("opacity",xe),w&&w(ge,se)}),pe=ie(T),Y=ie(M),te=ie(ge=>{const se=KB({style:Q,timeout:k,easing:m},{mode:"exit"});ge.style.webkitTransition=s.transitions.create("opacity",se),ge.style.transition=s.transitions.create("opacity",se),O&&O(ge)}),le=ie(P),ae=ge=>{u&&u(K.current,ge)};return oe.jsx(D,{appear:f,in:E,nodeRef:K,onEnter:Z,onEntered:pe,onEntering:fe,onExit:te,onExited:le,onExiting:Y,addEndListener:ae,timeout:k,...V,children:(ge,{ownerState:se,...xe})=>he.cloneElement(p,{style:{opacity:0,visibility:ge==="exited"&&!E?"hidden":void 0,...n5e[ge],...Q,...p.props.style},ref:J,...xe})})}),t6=i5e;function o5e(e){return Qn("MuiBackdrop",e)}Un("MuiBackdrop",["root","invisible"]);const s5e=e=>{const{classes:t,invisible:i}=e;return Hn({root:["root",i&&"invisible"]},o5e,t)},a5e=mr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),c5e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiBackdrop"}),{children:c,className:u,component:f="div",invisible:p=!1,open:m,components:E={},componentsProps:w={},slotProps:T={},slots:N={},TransitionComponent:O,transitionDuration:P,...M}=s,Q={...s,component:f,invisible:p},k=s5e(Q),D={transition:O,root:E.Root,...N},V={...w,...T},K={slots:D,slotProps:V},[J,ie]=ei("root",{elementType:a5e,externalForwardedProps:K,className:nn(k.root,u),ownerState:Q}),[fe,Z]=ei("transition",{elementType:t6,externalForwardedProps:K,ownerState:Q});return oe.jsx(fe,{in:m,timeout:P,...M,...Z,children:oe.jsx(J,{"aria-hidden":!0,...ie,classes:k,ref:i,children:c})})}),jue=c5e,l5e=Un("MuiBox",["root"]),u5e=l5e,A5e=PP(),d5e=QBe({themeId:zp,defaultTheme:A5e,defaultClassName:u5e.root,generateClassName:rue.generate}),Xi=d5e;function f5e(e){return Qn("MuiButton",e)}const h5e=Un("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),b1=h5e,p5e=he.createContext({}),g5e=p5e,m5e=he.createContext(void 0),v5e=m5e,_5e=e=>{const{color:t,disableElevation:i,fullWidth:s,size:c,variant:u,loading:f,loadingPosition:p,classes:m}=e,E={root:["root",f&&"loading",u,`${u}${Ur(t)}`,`size${Ur(c)}`,`${u}Size${Ur(c)}`,`color${Ur(t)}`,i&&"disableElevation",s&&"fullWidth",f&&`loadingPosition${Ur(p)}`],startIcon:["icon","startIcon",`iconSize${Ur(c)}`],endIcon:["icon","endIcon",`iconSize${Ur(c)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},w=Hn(E,f5e,m);return{...m,...w}},Kue=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],y5e=mr(DP,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`${i.variant}${Ur(i.color)}`],t[`size${Ur(i.size)}`],t[`${i.variant}Size${Ur(i.size)}`],i.color==="inherit"&&t.colorInherit,i.disableElevation&&t.disableElevation,i.fullWidth&&t.fullWidth,i.loading&&t.loading]}})(_i(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],i=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${b1.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${b1.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${b1.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${b1.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(su()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[s].mainChannel} / 0.5)`:Bc(e.palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc(e.palette[s].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc(e.palette[s].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:i,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${b1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${b1.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${b1.loading}`]:{color:"transparent"}}}]}})),E5e=mr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.startIcon,i.loading&&t.startIconLoadingStart,t[`iconSize${Ur(i.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Kue]})),w5e=mr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.endIcon,i.loading&&t.endIconLoadingEnd,t[`iconSize${Ur(i.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Kue]})),S5e=mr("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Xte=mr("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),b5e=he.forwardRef(function(t,i){const s=he.useContext(g5e),c=he.useContext(v5e),u=dT(s,t),f=$n({props:u,name:"MuiButton"}),{children:p,color:m="primary",component:E="button",className:w,disabled:T=!1,disableElevation:N=!1,disableFocusRipple:O=!1,endIcon:P,focusVisibleClassName:M,fullWidth:Q=!1,id:k,loading:D=null,loadingIndicator:V,loadingPosition:K="center",size:J="medium",startIcon:ie,type:fe,variant:Z="text",...pe}=f,Y=Pw(k),te=V??oe.jsx(zB,{"aria-labelledby":Y,color:"inherit",size:16}),le={...f,color:m,component:E,disabled:T,disableElevation:N,disableFocusRipple:O,fullWidth:Q,loading:D,loadingIndicator:te,loadingPosition:K,size:J,type:fe,variant:Z},ae=_5e(le),ge=(ie||D&&K==="start")&&oe.jsx(E5e,{className:ae.startIcon,ownerState:le,children:ie||oe.jsx(Xte,{className:ae.loadingIconPlaceholder,ownerState:le})}),se=(P||D&&K==="end")&&oe.jsx(w5e,{className:ae.endIcon,ownerState:le,children:P||oe.jsx(Xte,{className:ae.loadingIconPlaceholder,ownerState:le})}),xe=c||"",Me=typeof D=="boolean"?oe.jsx("span",{className:ae.loadingWrapper,style:{display:"contents"},children:D&&oe.jsx(S5e,{className:ae.loadingIndicator,ownerState:le,children:te})}):null;return oe.jsxs(y5e,{ownerState:le,className:nn(s.className,ae.root,w,xe),component:E,disabled:T||D,focusRipple:!O,focusVisibleClassName:nn(ae.focusVisible,M),ref:i,type:fe,id:D?Y:k,...pe,classes:ae,children:[ge,K!=="end"&&Me,p,K==="end"&&Me,se]})}),Ko=b5e;function C5e(e){return Qn("MuiCard",e)}Un("MuiCard",["root"]);const T5e=e=>{const{classes:t}=e;return Hn({root:["root"]},C5e,t)},R5e=mr(Zd,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),I5e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiCard"}),{className:c,raised:u=!1,...f}=s,p={...s,raised:u},m=T5e(p);return oe.jsx(R5e,{className:nn(m.root,c),elevation:u?8:void 0,ref:i,ownerState:p,...f})}),r6=I5e;function O5e(e){return Qn("MuiCardContent",e)}Un("MuiCardContent",["root"]);const N5e=e=>{const{classes:t}=e;return Hn({root:["root"]},O5e,t)},B5e=mr("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),L5e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiCardContent"}),{className:c,component:u="div",...f}=s,p={...s,component:u},m=N5e(p);return oe.jsx(B5e,{as:u,className:nn(m.root,c),ownerState:p,ref:i,...f})}),n6=L5e;function P5e(e){return Qn("PrivateSwitchBase",e)}Un("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const k5e=e=>{const{classes:t,checked:i,disabled:s,edge:c}=e,u={root:["root",i&&"checked",s&&"disabled",c&&`edge${Ur(c)}`],input:["input"]};return Hn(u,P5e,t)},D5e=mr(DP)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),x5e=mr("input",{shouldForwardProp:Xu})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),U5e=he.forwardRef(function(t,i){const{autoFocus:s,checked:c,checkedIcon:u,defaultChecked:f,disabled:p,disableFocusRipple:m=!1,edge:E=!1,icon:w,id:T,inputProps:N,inputRef:O,name:P,onBlur:M,onChange:Q,onFocus:k,readOnly:D,required:V=!1,tabIndex:K,type:J,value:ie,slots:fe={},slotProps:Z={},...pe}=t,[Y,te]=HB({controlled:c,default:!!f,name:"SwitchBase",state:"checked"}),le=y0(),ae=Fe=>{k&&k(Fe),le&&le.onFocus&&le.onFocus(Fe)},ge=Fe=>{M&&M(Fe),le&&le.onBlur&&le.onBlur(Fe)},se=Fe=>{if(Fe.nativeEvent.defaultPrevented)return;const Qe=Fe.target.checked;te(Qe),Q&&Q(Fe,Qe)};let xe=p;le&&typeof xe>"u"&&(xe=le.disabled);const Me=J==="checkbox"||J==="radio",Be={...t,checked:Y,disabled:xe,disableFocusRipple:m,edge:E},ke=k5e(Be),Ke={slots:fe,slotProps:{input:N,...Z}},[ht,ve]=ei("root",{ref:i,elementType:D5e,className:ke.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Ke,component:"span",...pe},getSlotProps:Fe=>({...Fe,onFocus:Qe=>{var We;(We=Fe.onFocus)==null||We.call(Fe,Qe),ae(Qe)},onBlur:Qe=>{var We;(We=Fe.onBlur)==null||We.call(Fe,Qe),ge(Qe)}}),ownerState:Be,additionalProps:{centerRipple:!0,focusRipple:!m,disabled:xe,role:void 0,tabIndex:null}}),[Oe,Ue]=ei("input",{ref:O,elementType:x5e,className:ke.input,externalForwardedProps:Ke,getSlotProps:Fe=>({...Fe,onChange:Qe=>{var We;(We=Fe.onChange)==null||We.call(Fe,Qe),se(Qe)}}),ownerState:Be,additionalProps:{autoFocus:s,checked:c,defaultChecked:f,disabled:xe,id:Me?T:void 0,name:P,readOnly:D,required:V,tabIndex:K,type:J,...J==="checkbox"&&ie===void 0?{}:{value:ie}}});return oe.jsxs(ht,{...ve,children:[oe.jsx(Oe,{...Ue}),Y?u:w]})}),M5e=U5e,F5e=Go(oe.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),V5e=Go(oe.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Q5e=Go(oe.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function H5e(e){return Qn("MuiCheckbox",e)}const j5e=Un("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),YM=j5e,K5e=e=>{const{classes:t,indeterminate:i,color:s,size:c}=e,u={root:["root",i&&"indeterminate",`color${Ur(s)}`,`size${Ur(c)}`]},f=Hn(u,H5e,t);return{...t,...f}},W5e=mr(M5e,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.indeterminate&&t.indeterminate,t[`size${Ur(i.size)}`],i.color!=="default"&&t[`color${Ur(i.color)}`]]}})(_i(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(su()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Bc(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(su()).map(([t])=>({props:{color:t},style:{[`&.${YM.checked}, &.${YM.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${YM.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),G5e=oe.jsx(V5e,{}),$5e=oe.jsx(F5e,{}),z5e=oe.jsx(Q5e,{}),q5e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiCheckbox"}),{checkedIcon:c=G5e,color:u="primary",icon:f=$5e,indeterminate:p=!1,indeterminateIcon:m=z5e,inputProps:E,size:w="medium",disableRipple:T=!1,className:N,slots:O={},slotProps:P={},...M}=s,Q=p?m:f,k=p?m:c,D={...s,disableRipple:T,color:u,indeterminate:p,size:w},V=K5e(D),K=P.input??E,[J,ie]=ei("root",{ref:i,elementType:W5e,className:nn(V.root,N),shouldForwardComponentProp:!0,externalForwardedProps:{slots:O,slotProps:P,...M},ownerState:D,additionalProps:{type:"checkbox",icon:he.cloneElement(Q,{fontSize:Q.props.fontSize??w}),checkedIcon:he.cloneElement(k,{fontSize:k.props.fontSize??w}),disableRipple:T,slots:O,slotProps:{input:wue(typeof K=="function"?K(D):K,{"data-indeterminate":p})}}});return oe.jsx(J,{...ie,classes:V})}),Y5e=q5e;function Jte(e){return e.substring(2).toLowerCase()}function X5e(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function J5e(e){const{children:t,disableReactTree:i=!1,mouseEvent:s="onClick",onClickAway:c,touchEvent:u="onTouchEnd"}=e,f=he.useRef(!1),p=he.useRef(null),m=he.useRef(!1),E=he.useRef(!1);he.useEffect(()=>(setTimeout(()=>{m.current=!0},0),()=>{m.current=!1}),[]);const w=uc(f_(t),p),T=qd(P=>{const M=E.current;E.current=!1;const Q=Ql(p.current);if(!m.current||!p.current||"clientX"in P&&X5e(P,Q))return;if(f.current){f.current=!1;return}let k;P.composedPath?k=P.composedPath().includes(p.current):k=!Q.documentElement.contains(P.target)||p.current.contains(P.target),!k&&(i||!M)&&c(P)}),N=P=>M=>{E.current=!0;const Q=t.props[P];Q&&Q(M)},O={ref:w};return u!==!1&&(O[u]=N(u)),he.useEffect(()=>{if(u!==!1){const P=Jte(u),M=Ql(p.current),Q=()=>{f.current=!0};return M.addEventListener(P,T),M.addEventListener("touchmove",Q),()=>{M.removeEventListener(P,T),M.removeEventListener("touchmove",Q)}}},[T,u]),s!==!1&&(O[s]=N(s)),he.useEffect(()=>{if(s!==!1){const P=Jte(s),M=Ql(p.current);return M.addEventListener(P,T),()=>{M.removeEventListener(P,T)}}},[T,s]),he.cloneElement(t,O)}const Z5e=BLe({createStyledComponent:mr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`maxWidth${Ur(String(i.maxWidth))}`],i.fixed&&t.fixed,i.disableGutters&&t.disableGutters]}}),useThemeProps:e=>$n({props:e,name:"MuiContainer"})}),Wue=Z5e,i6=typeof iQ({})=="function",eUe=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),tUe=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),Gue=(e,t=!1)=>{var u,f;const i={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([p,m])=>{var w,T;const E=e.getColorSchemeSelector(p);E.startsWith("@")?i[E]={":root":{colorScheme:(w=m.palette)==null?void 0:w.mode}}:i[E.replace(/\s*&/,"")]={colorScheme:(T=m.palette)==null?void 0:T.mode}});let s={html:eUe(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...tUe(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...i};const c=(f=(u=e.components)==null?void 0:u.MuiCssBaseline)==null?void 0:f.styleOverrides;return c&&(s=[s,c]),s},VN="mui-ecs",rUe=e=>{const t=Gue(e,!1),i=Array.isArray(t)?t[0]:t;return!e.vars&&i&&(i.html[`:root:has(${VN})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([s,c])=>{var f,p;const u=e.getColorSchemeSelector(s);u.startsWith("@")?i[u]={[`:root:not(:has(.${VN}))`]:{colorScheme:(f=c.palette)==null?void 0:f.mode}}:i[u.replace(/\s*&/,"")]={[`&:not(:has(.${VN}))`]:{colorScheme:(p=c.palette)==null?void 0:p.mode}}}),t},nUe=iQ(i6?({theme:e,enableColorScheme:t})=>Gue(e,t):({theme:e})=>rUe(e));function $ue(e){const t=$n({props:e,name:"MuiCssBaseline"}),{children:i,enableColorScheme:s=!1}=t;return oe.jsxs(he.Fragment,{children:[i6&&oe.jsx(nUe,{enableColorScheme:s}),!i6&&!s&&oe.jsx("span",{className:VN,style:{display:"none"}}),i]})}function zue(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function iUe(e){const t=Ql(e);return t.body===e?Am(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function PC(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Zte(e){return parseInt(Am(e).getComputedStyle(e).paddingRight,10)||0}function oUe(e){const i=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),s=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return i||s}function ere(e,t,i,s,c){const u=[t,i,...s];[].forEach.call(e.children,f=>{const p=!u.includes(f),m=!oUe(f);p&&m&&PC(f,c)})}function XM(e,t){let i=-1;return e.some((s,c)=>t(s)?(i=c,!0):!1),i}function sUe(e,t){const i=[],s=e.container;if(!t.disableScrollLock){if(iUe(s)){const f=zue(Am(s));i.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${Zte(s)+f}px`;const p=Ql(s).querySelectorAll(".mui-fixed");[].forEach.call(p,m=>{i.push({value:m.style.paddingRight,property:"padding-right",el:m}),m.style.paddingRight=`${Zte(m)+f}px`})}let u;if(s.parentNode instanceof DocumentFragment)u=Ql(s).body;else{const f=s.parentElement,p=Am(s);u=(f==null?void 0:f.nodeName)==="HTML"&&p.getComputedStyle(f).overflowY==="scroll"?f:s}i.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{i.forEach(({value:u,el:f,property:p})=>{u?f.style.setProperty(p,u):f.style.removeProperty(p)})}}function aUe(e){const t=[];return[].forEach.call(e.children,i=>{i.getAttribute("aria-hidden")==="true"&&t.push(i)}),t}class cUe{constructor(){this.modals=[],this.containers=[]}add(t,i){let s=this.modals.indexOf(t);if(s!==-1)return s;s=this.modals.length,this.modals.push(t),t.modalRef&&PC(t.modalRef,!1);const c=aUe(i);ere(i,t.mount,t.modalRef,c,!0);const u=XM(this.containers,f=>f.container===i);return u!==-1?(this.containers[u].modals.push(t),s):(this.containers.push({modals:[t],container:i,restore:null,hiddenSiblings:c}),s)}mount(t,i){const s=XM(this.containers,u=>u.modals.includes(t)),c=this.containers[s];c.restore||(c.restore=sUe(c,i))}remove(t,i=!0){const s=this.modals.indexOf(t);if(s===-1)return s;const c=XM(this.containers,f=>f.modals.includes(t)),u=this.containers[c];if(u.modals.splice(u.modals.indexOf(t),1),this.modals.splice(s,1),u.modals.length===0)u.restore&&u.restore(),t.modalRef&&PC(t.modalRef,i),ere(u.container,t.mount,t.modalRef,u.hiddenSiblings,!1),this.containers.splice(c,1);else{const f=u.modals[u.modals.length-1];f.modalRef&&PC(f.modalRef,!1)}return s}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const lUe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function uUe(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function AUe(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=s=>e.ownerDocument.querySelector(`input[type="radio"]${s}`);let i=t(`[name="${e.name}"]:checked`);return i||(i=t(`[name="${e.name}"]`)),i!==e}function dUe(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||AUe(e))}function fUe(e){const t=[],i=[];return Array.from(e.querySelectorAll(lUe)).forEach((s,c)=>{const u=uUe(s);u===-1||!dUe(s)||(u===0?t.push(s):i.push({documentOrder:c,tabIndex:u,node:s}))}),i.sort((s,c)=>s.tabIndex===c.tabIndex?s.documentOrder-c.documentOrder:s.tabIndex-c.tabIndex).map(s=>s.node).concat(t)}function hUe(){return!0}function pUe(e){const{children:t,disableAutoFocus:i=!1,disableEnforceFocus:s=!1,disableRestoreFocus:c=!1,getTabbable:u=fUe,isEnabled:f=hUe,open:p}=e,m=he.useRef(!1),E=he.useRef(null),w=he.useRef(null),T=he.useRef(null),N=he.useRef(null),O=he.useRef(!1),P=he.useRef(null),M=uc(f_(t),P),Q=he.useRef(null);he.useEffect(()=>{!p||!P.current||(O.current=!i)},[i,p]),he.useEffect(()=>{if(!p||!P.current)return;const V=Ql(P.current);return P.current.contains(V.activeElement)||(P.current.hasAttribute("tabIndex")||P.current.setAttribute("tabIndex","-1"),O.current&&P.current.focus()),()=>{c||(T.current&&T.current.focus&&(m.current=!0,T.current.focus()),T.current=null)}},[p]),he.useEffect(()=>{if(!p||!P.current)return;const V=Ql(P.current),K=fe=>{Q.current=fe,!(s||!f()||fe.key!=="Tab")&&V.activeElement===P.current&&fe.shiftKey&&(m.current=!0,w.current&&w.current.focus())},J=()=>{var pe,Y;const fe=P.current;if(fe===null)return;if(!V.hasFocus()||!f()||m.current){m.current=!1;return}if(fe.contains(V.activeElement)||s&&V.activeElement!==E.current&&V.activeElement!==w.current)return;if(V.activeElement!==N.current)N.current=null;else if(N.current!==null)return;if(!O.current)return;let Z=[];if((V.activeElement===E.current||V.activeElement===w.current)&&(Z=u(P.current)),Z.length>0){const te=!!((pe=Q.current)!=null&&pe.shiftKey&&((Y=Q.current)==null?void 0:Y.key)==="Tab"),le=Z[0],ae=Z[Z.length-1];typeof le!="string"&&typeof ae!="string"&&(te?ae.focus():le.focus())}else fe.focus()};V.addEventListener("focusin",J),V.addEventListener("keydown",K,!0);const ie=setInterval(()=>{V.activeElement&&V.activeElement.tagName==="BODY"&&J()},50);return()=>{clearInterval(ie),V.removeEventListener("focusin",J),V.removeEventListener("keydown",K,!0)}},[i,s,c,f,p,u]);const k=V=>{T.current===null&&(T.current=V.relatedTarget),O.current=!0,N.current=V.target;const K=t.props.onFocus;K&&K(V)},D=V=>{T.current===null&&(T.current=V.relatedTarget),O.current=!0};return oe.jsxs(he.Fragment,{children:[oe.jsx("div",{tabIndex:p?0:-1,onFocus:D,ref:E,"data-testid":"sentinelStart"}),he.cloneElement(t,{ref:M,onFocus:k}),oe.jsx("div",{tabIndex:p?0:-1,onFocus:D,ref:w,"data-testid":"sentinelEnd"})]})}function gUe(e){return typeof e=="function"?e():e}function mUe(e){return e?e.props.hasOwnProperty("in"):!1}const tre=()=>{},RO=new cUe;function vUe(e){const{container:t,disableEscapeKeyDown:i=!1,disableScrollLock:s=!1,closeAfterTransition:c=!1,onTransitionEnter:u,onTransitionExited:f,children:p,onClose:m,open:E,rootRef:w}=e,T=he.useRef({}),N=he.useRef(null),O=he.useRef(null),P=uc(O,w),[M,Q]=he.useState(!E),k=mUe(p);let D=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(D=!1);const V=()=>Ql(N.current),K=()=>(T.current.modalRef=O.current,T.current.mount=N.current,T.current),J=()=>{RO.mount(K(),{disableScrollLock:s}),O.current&&(O.current.scrollTop=0)},ie=qd(()=>{const se=gUe(t)||V().body;RO.add(K(),se),O.current&&J()}),fe=()=>RO.isTopModal(K()),Z=qd(se=>{N.current=se,se&&(E&&fe()?J():O.current&&PC(O.current,D))}),pe=he.useCallback(()=>{RO.remove(K(),D)},[D]);he.useEffect(()=>()=>{pe()},[pe]),he.useEffect(()=>{E?ie():(!k||!c)&&pe()},[E,pe,k,c,ie]);const Y=se=>xe=>{var Me;(Me=se.onKeyDown)==null||Me.call(se,xe),!(xe.key!=="Escape"||xe.which===229||!fe())&&(i||(xe.stopPropagation(),m&&m(xe,"escapeKeyDown")))},te=se=>xe=>{var Me;(Me=se.onClick)==null||Me.call(se,xe),xe.target===xe.currentTarget&&m&&m(xe,"backdropClick")};return{getRootProps:(se={})=>{const xe=WB(e);delete xe.onTransitionEnter,delete xe.onTransitionExited;const Me={...xe,...se};return{role:"presentation",...Me,onKeyDown:Y(Me),ref:P}},getBackdropProps:(se={})=>{const xe=se;return{"aria-hidden":!0,...xe,onClick:te(xe),open:E}},getTransitionProps:()=>{const se=()=>{Q(!1),u&&u()},xe=()=>{Q(!0),f&&f(),c&&pe()};return{onEnter:Cte(se,(p==null?void 0:p.props.onEnter)??tre),onExited:Cte(xe,(p==null?void 0:p.props.onExited)??tre)}},rootRef:P,portalRef:Z,isTopModal:fe,exited:M,hasTransition:k}}function _Ue(e){return Qn("MuiModal",e)}Un("MuiModal",["root","hidden","backdrop"]);const yUe=e=>{const{open:t,exited:i,classes:s}=e;return Hn({root:["root",!t&&i&&"hidden"],backdrop:["backdrop"]},_Ue,s)},EUe=mr("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.open&&i.exited&&t.hidden]}})(_i(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),wUe=mr(jue,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),SUe=he.forwardRef(function(t,i){const s=$n({name:"MuiModal",props:t}),{BackdropComponent:c=wUe,BackdropProps:u,classes:f,className:p,closeAfterTransition:m=!1,children:E,container:w,component:T,components:N={},componentsProps:O={},disableAutoFocus:P=!1,disableEnforceFocus:M=!1,disableEscapeKeyDown:Q=!1,disablePortal:k=!1,disableRestoreFocus:D=!1,disableScrollLock:V=!1,hideBackdrop:K=!1,keepMounted:J=!1,onClose:ie,onTransitionEnter:fe,onTransitionExited:Z,open:pe,slotProps:Y={},slots:te={},theme:le,...ae}=s,ge={...s,closeAfterTransition:m,disableAutoFocus:P,disableEnforceFocus:M,disableEscapeKeyDown:Q,disablePortal:k,disableRestoreFocus:D,disableScrollLock:V,hideBackdrop:K,keepMounted:J},{getRootProps:se,getBackdropProps:xe,getTransitionProps:Me,portalRef:Be,isTopModal:ke,exited:Ke,hasTransition:ht}=vUe({...ge,rootRef:i}),ve={...ge,exited:Ke},Oe=yUe(ve),Ue={};if(E.props.tabIndex===void 0&&(Ue.tabIndex="-1"),ht){const{onEnter:pt,onExited:at}=Me();Ue.onEnter=pt,Ue.onExited=at}const Fe={slots:{root:N.Root,backdrop:N.Backdrop,...te},slotProps:{...O,...Y}},[Qe,We]=ei("root",{ref:i,elementType:EUe,externalForwardedProps:{...Fe,...ae,component:T},getSlotProps:se,ownerState:ve,className:nn(p,Oe==null?void 0:Oe.root,!ve.open&&ve.exited&&(Oe==null?void 0:Oe.hidden))}),[et,Ze]=ei("backdrop",{ref:u==null?void 0:u.ref,elementType:c,externalForwardedProps:Fe,shouldForwardComponentProp:!0,additionalProps:u,getSlotProps:pt=>xe({...pt,onClick:at=>{pt!=null&&pt.onClick&&pt.onClick(at)}}),className:nn(u==null?void 0:u.className,Oe==null?void 0:Oe.backdrop),ownerState:ve});return!J&&!pe&&(!ht||Ke)?null:oe.jsx(Que,{ref:Be,container:w,disablePortal:k,children:oe.jsxs(Qe,{...We,children:[!K&&c?oe.jsx(et,{...Ze}):null,oe.jsx(pUe,{disableEnforceFocus:M,disableAutoFocus:P,disableRestoreFocus:D,isEnabled:ke,open:pe,children:he.cloneElement(E,Ue)})]})})}),que=SUe;function bUe(e){return Qn("MuiDialog",e)}const CUe=Un("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),JM=CUe,TUe=he.createContext({}),Yue=TUe,RUe=mr(jue,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),IUe=e=>{const{classes:t,scroll:i,maxWidth:s,fullWidth:c,fullScreen:u}=e,f={root:["root"],container:["container",`scroll${Ur(i)}`],paper:["paper",`paperScroll${Ur(i)}`,`paperWidth${Ur(String(s))}`,c&&"paperFullWidth",u&&"paperFullScreen"]};return Hn(f,bUe,t)},OUe=mr(que,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),NUe=mr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.container,t[`scroll${Ur(i.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),BUe=mr(Zd,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.paper,t[`scrollPaper${Ur(i.scroll)}`],t[`paperWidth${Ur(String(i.maxWidth))}`],i.fullWidth&&t.paperFullWidth,i.fullScreen&&t.paperFullScreen]}})(_i(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${JM.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${JM.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${JM.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),LUe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiDialog"}),c=d_(),u={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{"aria-describedby":f,"aria-labelledby":p,"aria-modal":m=!0,BackdropComponent:E,BackdropProps:w,children:T,className:N,disableEscapeKeyDown:O=!1,fullScreen:P=!1,fullWidth:M=!1,maxWidth:Q="sm",onClick:k,onClose:D,open:V,PaperComponent:K=Zd,PaperProps:J={},scroll:ie="paper",slots:fe={},slotProps:Z={},TransitionComponent:pe=t6,transitionDuration:Y=u,TransitionProps:te,...le}=s,ae={...s,disableEscapeKeyDown:O,fullScreen:P,fullWidth:M,maxWidth:Q,scroll:ie},ge=IUe(ae),se=he.useRef(),xe=Ot=>{se.current=Ot.target===Ot.currentTarget},Me=Ot=>{k&&k(Ot),se.current&&(se.current=null,D&&D(Ot,"backdropClick"))},Be=Pw(p),ke=he.useMemo(()=>({titleId:Be}),[Be]),Ke={transition:pe,...fe},ht={transition:te,paper:J,backdrop:w,...Z},ve={slots:Ke,slotProps:ht},[Oe,Ue]=ei("root",{elementType:OUe,shouldForwardComponentProp:!0,externalForwardedProps:ve,ownerState:ae,className:nn(ge.root,N),ref:i}),[Fe,Qe]=ei("backdrop",{elementType:RUe,shouldForwardComponentProp:!0,externalForwardedProps:ve,ownerState:ae}),[We,et]=ei("paper",{elementType:BUe,shouldForwardComponentProp:!0,externalForwardedProps:ve,ownerState:ae,className:nn(ge.paper,J.className)}),[Ze,pt]=ei("container",{elementType:NUe,externalForwardedProps:ve,ownerState:ae,className:ge.container}),[at,Rt]=ei("transition",{elementType:t6,externalForwardedProps:ve,ownerState:ae,additionalProps:{appear:!0,in:V,timeout:Y,role:"presentation"}});return oe.jsx(Oe,{closeAfterTransition:!0,slots:{backdrop:Fe},slotProps:{backdrop:{transitionDuration:Y,as:E,...Qe}},disableEscapeKeyDown:O,onClose:D,open:V,onClick:Me,...Ue,...le,children:oe.jsx(at,{...Rt,children:oe.jsx(Ze,{onMouseDown:xe,...pt,children:oe.jsx(We,{as:K,elevation:24,role:"dialog","aria-describedby":f,"aria-labelledby":Be,"aria-modal":m,...et,children:oe.jsx(Yue.Provider,{value:ke,children:T})})})})})}),mQ=LUe;function PUe(e){return Qn("MuiDialogActions",e)}Un("MuiDialogActions",["root","spacing"]);const kUe=e=>{const{classes:t,disableSpacing:i}=e;return Hn({root:["root",!i&&"spacing"]},PUe,t)},DUe=mr("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),xUe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiDialogActions"}),{className:c,disableSpacing:u=!1,...f}=s,p={...s,disableSpacing:u},m=kUe(p);return oe.jsx(DUe,{className:nn(m.root,c),ownerState:p,ref:i,...f})}),Xue=xUe;function UUe(e){return Qn("MuiDialogContent",e)}Un("MuiDialogContent",["root","dividers"]);function MUe(e){return Qn("MuiDialogTitle",e)}const FUe=Un("MuiDialogTitle",["root"]),VUe=FUe,QUe=e=>{const{classes:t,dividers:i}=e;return Hn({root:["root",i&&"dividers"]},UUe,t)},HUe=mr("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})(_i(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${VUe.root} + &`]:{paddingTop:0}}}]}))),jUe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiDialogContent"}),{className:c,dividers:u=!1,...f}=s,p={...s,dividers:u},m=QUe(p);return oe.jsx(HUe,{className:nn(m.root,c),ownerState:p,ref:i,...f})}),vQ=jUe,KUe=e=>{const{classes:t}=e;return Hn({root:["root"]},MUe,t)},WUe=mr(Gn,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),GUe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiDialogTitle"}),{className:c,id:u,...f}=s,p=s,m=KUe(p),{titleId:E=u}=he.useContext(Yue);return oe.jsx(WUe,{component:"h2",className:nn(m.root,c),ownerState:p,ref:i,variant:"h6",id:u??E,...f})}),_Q=GUe,$Ue=Un("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),rre=$Ue,zUe=e=>{const{classes:t,disableUnderline:i,startAdornment:s,endAdornment:c,size:u,hiddenLabel:f,multiline:p}=e,m={root:["root",!i&&"underline",s&&"adornedStart",c&&"adornedEnd",u==="small"&&`size${Ur(u)}`,f&&"hiddenLabel",p&&"multiline"],input:["input"]},E=Hn(m,Gxe,t);return{...t,...E}},qUe=mr(FP,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[...UP(e,t),!i.disableUnderline&&t.underline]}})(_i(({theme:e})=>{const t=e.palette.mode==="light",i=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",c=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:c,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},[`&.${S1.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},[`&.${S1.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:u},variants:[{props:({ownerState:f})=>!f.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${S1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${S1.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${S1.disabled}, .${S1.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${S1.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(su()).map(([f])=>{var p;return{props:{disableUnderline:!1,color:f},style:{"&::after":{borderBottom:`2px solid ${(p=(e.vars||e).palette[f])==null?void 0:p.main}`}}}}),{props:({ownerState:f})=>f.startAdornment,style:{paddingLeft:12}},{props:({ownerState:f})=>f.endAdornment,style:{paddingRight:12}},{props:({ownerState:f})=>f.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:f,size:p})=>f.multiline&&p==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:f})=>f.multiline&&f.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:f})=>f.multiline&&f.hiddenLabel&&f.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),YUe=mr(VP,{name:"MuiFilledInput",slot:"Input",overridesResolver:MP})(_i(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Jue=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiFilledInput"}),{disableUnderline:c=!1,components:u={},componentsProps:f,fullWidth:p=!1,hiddenLabel:m,inputComponent:E="input",multiline:w=!1,slotProps:T,slots:N={},type:O="text",...P}=s,M={...s,disableUnderline:c,fullWidth:p,inputComponent:E,multiline:w,type:O},Q=zUe(s),k={root:{ownerState:M},input:{ownerState:M}},D=T??f?kc(k,T??f):k,V=N.root??u.Root??qUe,K=N.input??u.Input??YUe;return oe.jsx(gQ,{slots:{root:V,input:K},slotProps:D,fullWidth:p,inputComponent:E,multiline:w,ref:i,type:O,...P,classes:Q})});Jue.muiName="Input";const Zue=Jue;function XUe(e){return Qn("MuiFormControl",e)}Un("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const JUe=e=>{const{classes:t,margin:i,fullWidth:s}=e,c={root:["root",i!=="none"&&`margin${Ur(i)}`,s&&"fullWidth"]};return Hn(c,XUe,t)},ZUe=mr("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`margin${Ur(i.margin)}`],i.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),eMe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiFormControl"}),{children:c,className:u,color:f="primary",component:p="div",disabled:m=!1,error:E=!1,focused:w,fullWidth:T=!1,hiddenLabel:N=!1,margin:O="none",required:P=!1,size:M="medium",variant:Q="outlined",...k}=s,D={...s,color:f,component:p,disabled:m,error:E,fullWidth:T,hiddenLabel:N,margin:O,required:P,size:M,variant:Q},V=JUe(D),[K,J]=he.useState(()=>{let se=!1;return c&&he.Children.forEach(c,xe=>{if(!MN(xe,["Input","Select"]))return;const Me=MN(xe,["Select"])?xe.props.input:xe;Me&&Uxe(Me.props)&&(se=!0)}),se}),[ie,fe]=he.useState(()=>{let se=!1;return c&&he.Children.forEach(c,xe=>{MN(xe,["Input","Select"])&&(YB(xe.props,!0)||YB(xe.props.inputProps,!0))&&(se=!0)}),se}),[Z,pe]=he.useState(!1);m&&Z&&pe(!1);const Y=w!==void 0&&!m?w:Z;let te;he.useRef(!1);const le=he.useCallback(()=>{fe(!0)},[]),ae=he.useCallback(()=>{fe(!1)},[]),ge=he.useMemo(()=>({adornedStart:K,setAdornedStart:J,color:f,disabled:m,error:E,filled:ie,focused:Y,fullWidth:T,hiddenLabel:N,size:M,onBlur:()=>{pe(!1)},onFocus:()=>{pe(!0)},onEmpty:ae,onFilled:le,registerEffect:te,required:P,variant:Q}),[K,f,m,E,ie,Y,T,N,te,ae,le,P,M,Q]);return oe.jsx(pQ.Provider,{value:ge,children:oe.jsx(ZUe,{as:p,ownerState:D,className:nn(V.root,u),ref:i,...k,children:c})})}),tMe=eMe;function rMe(e){return Qn("MuiFormControlLabel",e)}const nMe=Un("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),lC=nMe,iMe=e=>{const{classes:t,disabled:i,labelPlacement:s,error:c,required:u}=e,f={root:["root",i&&"disabled",`labelPlacement${Ur(s)}`,c&&"error",u&&"required"],label:["label",i&&"disabled"],asterisk:["asterisk",c&&"error"]};return Hn(f,rMe,t)},oMe=mr("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`& .${lC.label}`]:t.label},t.root,t[`labelPlacement${Ur(i.labelPlacement)}`]]}})(_i(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${lC.disabled}`]:{cursor:"default"},[`& .${lC.label}`]:{[`&.${lC.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),sMe=mr("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(_i(({theme:e})=>({[`&.${lC.error}`]:{color:(e.vars||e).palette.error.main}}))),aMe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiFormControlLabel"}),{checked:c,className:u,componentsProps:f={},control:p,disabled:m,disableTypography:E,inputRef:w,label:T,labelPlacement:N="end",name:O,onChange:P,required:M,slots:Q={},slotProps:k={},value:D,...V}=s,K=y0(),J=m??p.props.disabled??(K==null?void 0:K.disabled),ie=M??p.props.required,fe={disabled:J,required:ie};["checked","name","onChange","value","inputRef"].forEach(se=>{typeof p.props[se]>"u"&&typeof s[se]<"u"&&(fe[se]=s[se])});const Z=h_({props:s,muiFormControl:K,states:["error"]}),pe={...s,disabled:J,labelPlacement:N,required:ie,error:Z.error},Y=iMe(pe),te={slots:Q,slotProps:{...f,...k}},[le,ae]=ei("typography",{elementType:Gn,externalForwardedProps:te,ownerState:pe});let ge=T;return ge!=null&&ge.type!==Gn&&!E&&(ge=oe.jsx(le,{component:"span",...ae,className:nn(Y.label,ae==null?void 0:ae.className),children:ge})),oe.jsxs(oMe,{className:nn(Y.root,u),ownerState:pe,ref:i,...V,children:[he.cloneElement(p,fe),ie?oe.jsxs("div",{children:[ge,oe.jsxs(sMe,{ownerState:pe,"aria-hidden":!0,className:Y.asterisk,children:["","*"]})]}):ge]})}),cMe=aMe;function lMe(e){return Qn("MuiFormHelperText",e)}const uMe=Un("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),nre=uMe;var ire;const AMe=e=>{const{classes:t,contained:i,size:s,disabled:c,error:u,filled:f,focused:p,required:m}=e,E={root:["root",c&&"disabled",u&&"error",s&&`size${Ur(s)}`,i&&"contained",p&&"focused",f&&"filled",m&&"required"]};return Hn(E,lMe,t)},dMe=mr("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.size&&t[`size${Ur(i.size)}`],i.contained&&t.contained,i.filled&&t.filled]}})(_i(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${nre.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${nre.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),fMe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiFormHelperText"}),{children:c,className:u,component:f="p",disabled:p,error:m,filled:E,focused:w,margin:T,required:N,variant:O,...P}=s,M=y0(),Q=h_({props:s,muiFormControl:M,states:["variant","size","disabled","error","filled","focused","required"]}),k={...s,component:f,contained:Q.variant==="filled"||Q.variant==="outlined",variant:Q.variant,size:Q.size,disabled:Q.disabled,error:Q.error,filled:Q.filled,focused:Q.focused,required:Q.required};delete k.ownerState;const D=AMe(k);return oe.jsx(dMe,{as:f,className:nn(D.root,u),ref:i,...P,ownerState:k,children:c===" "?ire||(ire=oe.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):c})}),hMe=fMe;function pMe(e){return Qn("MuiFormLabel",e)}const gMe=Un("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),kC=gMe,mMe=e=>{const{classes:t,color:i,focused:s,disabled:c,error:u,filled:f,required:p}=e,m={root:["root",`color${Ur(i)}`,c&&"disabled",u&&"error",f&&"filled",s&&"focused",p&&"required"],asterisk:["asterisk",u&&"error"]};return Hn(m,pMe,t)},vMe=mr("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color==="secondary"&&t.colorSecondary,i.filled&&t.filled]}})(_i(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(su()).map(([t])=>({props:{color:t},style:{[`&.${kC.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${kC.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${kC.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),_Me=mr("span",{name:"MuiFormLabel",slot:"Asterisk"})(_i(({theme:e})=>({[`&.${kC.error}`]:{color:(e.vars||e).palette.error.main}}))),yMe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiFormLabel"}),{children:c,className:u,color:f,component:p="label",disabled:m,error:E,filled:w,focused:T,required:N,...O}=s,P=y0(),M=h_({props:s,muiFormControl:P,states:["color","required","focused","disabled","error","filled"]}),Q={...s,color:M.color||"primary",component:p,disabled:M.disabled,error:M.error,filled:M.filled,focused:M.focused,required:M.required},k=mMe(Q);return oe.jsxs(vMe,{as:p,ownerState:Q,className:nn(k.root,u),ref:i,...O,children:[c,M.required&&oe.jsxs(_Me,{ownerState:Q,"aria-hidden":!0,className:k.asterisk,children:["","*"]})]})}),EMe=yMe,wMe=$Le({createStyledComponent:mr("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>$n({props:e,name:"MuiGrid"}),useTheme:d_}),bn=wMe;function o6(e){return`scale(${e}, ${e**2})`}const SMe={entering:{opacity:1,transform:o6(1)},entered:{opacity:1,transform:"none"}},ZM=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),s6=he.forwardRef(function(t,i){const{addEndListener:s,appear:c=!0,children:u,easing:f,in:p,onEnter:m,onEntered:E,onEntering:w,onExit:T,onExited:N,onExiting:O,style:P,timeout:M="auto",TransitionComponent:Q=Cue,...k}=t,D=Q1(),V=he.useRef(),K=d_(),J=he.useRef(null),ie=uc(J,f_(u),i),fe=se=>xe=>{if(se){const Me=J.current;xe===void 0?se(Me):se(Me,xe)}},Z=fe(w),pe=fe((se,xe)=>{Rue(se);const{duration:Me,delay:Be,easing:ke}=KB({style:P,timeout:M,easing:f},{mode:"enter"});let Ke;M==="auto"?(Ke=K.transitions.getAutoHeightDuration(se.clientHeight),V.current=Ke):Ke=Me,se.style.transition=[K.transitions.create("opacity",{duration:Ke,delay:Be}),K.transitions.create("transform",{duration:ZM?Ke:Ke*.666,delay:Be,easing:ke})].join(","),m&&m(se,xe)}),Y=fe(E),te=fe(O),le=fe(se=>{const{duration:xe,delay:Me,easing:Be}=KB({style:P,timeout:M,easing:f},{mode:"exit"});let ke;M==="auto"?(ke=K.transitions.getAutoHeightDuration(se.clientHeight),V.current=ke):ke=xe,se.style.transition=[K.transitions.create("opacity",{duration:ke,delay:Me}),K.transitions.create("transform",{duration:ZM?ke:ke*.666,delay:ZM?Me:Me||ke*.333,easing:Be})].join(","),se.style.opacity=0,se.style.transform=o6(.75),T&&T(se)}),ae=fe(N),ge=se=>{M==="auto"&&D.start(V.current||0,se),s&&s(J.current,se)};return oe.jsx(Q,{appear:c,in:p,nodeRef:J,onEnter:pe,onEntered:Y,onEntering:Z,onExit:le,onExited:ae,onExiting:te,addEndListener:ge,timeout:M==="auto"?null:M,...k,children:(se,{ownerState:xe,...Me})=>he.cloneElement(u,{style:{opacity:0,transform:o6(.75),visibility:se==="exited"&&!p?"hidden":void 0,...SMe[se],...P,...u.props.style},ref:ie,...Me})})});s6&&(s6.muiSupportAuto=!0);const yQ=s6,bMe=e=>{const{classes:t,disableUnderline:i}=e,c=Hn({root:["root",!i&&"underline"],input:["input"]},Hxe,t);return{...t,...c}},CMe=mr(FP,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[...UP(e,t),!i.disableUnderline&&t.underline]}})(_i(({theme:e})=>{let i=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:s})=>s.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:s})=>!s.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Bb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Bb.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Bb.disabled}, .${Bb.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${Bb.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(su()).map(([s])=>({props:{color:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[s].main}`}}}))]}})),TMe=mr(VP,{name:"MuiInput",slot:"Input",overridesResolver:MP})({}),eAe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiInput"}),{disableUnderline:c=!1,components:u={},componentsProps:f,fullWidth:p=!1,inputComponent:m="input",multiline:E=!1,slotProps:w,slots:T={},type:N="text",...O}=s,P=bMe(s),Q={root:{ownerState:{disableUnderline:c}}},k=w??f?kc(w??f,Q):Q,D=T.root??u.Root??CMe,V=T.input??u.Input??TMe;return oe.jsx(gQ,{slots:{root:D,input:V},slotProps:k,fullWidth:p,inputComponent:m,multiline:E,ref:i,type:N,...O,classes:P})});eAe.muiName="Input";const tAe=eAe;function RMe(e){return Qn("MuiInputLabel",e)}Un("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const IMe=e=>{const{classes:t,formControl:i,size:s,shrink:c,disableAnimation:u,variant:f,required:p}=e,m={root:["root",i&&"formControl",!u&&"animated",c&&"shrink",s&&s!=="medium"&&`size${Ur(s)}`,f],asterisk:[p&&"asterisk"]},E=Hn(m,RMe,t);return{...t,...E}},OMe=mr(EMe,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`& .${kC.asterisk}`]:t.asterisk},t.root,i.formControl&&t.formControl,i.size==="small"&&t.sizeSmall,i.shrink&&t.shrink,!i.disableAnimation&&t.animated,i.focused&&t.focused,t[i.variant]]}})(_i(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:i})=>t==="filled"&&i.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:i,size:s})=>t==="filled"&&i.shrink&&s==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:i})=>t==="outlined"&&i.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),NMe=he.forwardRef(function(t,i){const s=$n({name:"MuiInputLabel",props:t}),{disableAnimation:c=!1,margin:u,shrink:f,variant:p,className:m,...E}=s,w=y0();let T=f;typeof T>"u"&&w&&(T=w.filled||w.focused||w.adornedStart);const N=h_({props:s,muiFormControl:w,states:["size","variant","required","focused"]}),O={...s,disableAnimation:c,formControl:w,shrink:T,size:N.size,variant:N.variant,required:N.required,focused:N.focused},P=IMe(O);return oe.jsx(OMe,{"data-shrink":T,ref:i,className:nn(P.root,m),...E,ownerState:O,classes:P})}),BMe=NMe,LMe=he.createContext({}),a6=LMe;function PMe(e){return Qn("MuiList",e)}Un("MuiList",["root","padding","dense","subheader"]);const kMe=e=>{const{classes:t,disablePadding:i,dense:s,subheader:c}=e;return Hn({root:["root",!i&&"padding",s&&"dense",c&&"subheader"]},PMe,t)},DMe=mr("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disablePadding&&t.padding,i.dense&&t.dense,i.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),xMe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiList"}),{children:c,className:u,component:f="ul",dense:p=!1,disablePadding:m=!1,subheader:E,...w}=s,T=he.useMemo(()=>({dense:p}),[p]),N={...s,component:f,dense:p,disablePadding:m},O=kMe(N);return oe.jsx(a6.Provider,{value:T,children:oe.jsxs(DMe,{as:f,className:nn(O.root,u),ref:i,ownerState:N,...w,children:[E,c]})})}),UMe=xMe,MMe=Un("MuiListItemIcon",["root","alignItemsFlexStart"]),ore=MMe,FMe=Un("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),sre=FMe;function e4(e,t,i){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:i?null:e.firstChild}function are(e,t,i){return e===t?i?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:i?null:e.lastChild}function rAe(e,t){if(t===void 0)return!0;let i=e.innerText;return i===void 0&&(i=e.textContent),i=i.trim().toLowerCase(),i.length===0?!1:t.repeating?i[0]===t.keys[0]:i.startsWith(t.keys.join(""))}function Lb(e,t,i,s,c,u){let f=!1,p=c(e,t,t?i:!1);for(;p;){if(p===e.firstChild){if(f)return!1;f=!0}const m=s?!1:p.disabled||p.getAttribute("aria-disabled")==="true";if(!p.hasAttribute("tabindex")||!rAe(p,u)||m)p=c(e,p,i);else return p.focus(),!0}return!1}const VMe=he.forwardRef(function(t,i){const{actions:s,autoFocus:c=!1,autoFocusItem:u=!1,children:f,className:p,disabledItemsFocusable:m=!1,disableListWrap:E=!1,onKeyDown:w,variant:T="selectedMenu",...N}=t,O=he.useRef(null),P=he.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Sh(()=>{c&&O.current.focus()},[c]),he.useImperativeHandle(s,()=>({adjustStyleForScrollbar:(V,{direction:K})=>{const J=!O.current.style.width;if(V.clientHeight<O.current.clientHeight&&J){const ie=`${zue(Am(V))}px`;O.current.style[K==="rtl"?"paddingLeft":"paddingRight"]=ie,O.current.style.width=`calc(100% + ${ie})`}return O.current}}),[]);const M=V=>{const K=O.current,J=V.key;if(V.ctrlKey||V.metaKey||V.altKey){w&&w(V);return}const fe=Ql(K).activeElement;if(J==="ArrowDown")V.preventDefault(),Lb(K,fe,E,m,e4);else if(J==="ArrowUp")V.preventDefault(),Lb(K,fe,E,m,are);else if(J==="Home")V.preventDefault(),Lb(K,null,E,m,e4);else if(J==="End")V.preventDefault(),Lb(K,null,E,m,are);else if(J.length===1){const Z=P.current,pe=J.toLowerCase(),Y=performance.now();Z.keys.length>0&&(Y-Z.lastTime>500?(Z.keys=[],Z.repeating=!0,Z.previousKeyMatched=!0):Z.repeating&&pe!==Z.keys[0]&&(Z.repeating=!1)),Z.lastTime=Y,Z.keys.push(pe);const te=fe&&!Z.repeating&&rAe(fe,Z);Z.previousKeyMatched&&(te||Lb(K,fe,!1,m,e4,Z))?V.preventDefault():Z.previousKeyMatched=!1}w&&w(V)},Q=uc(O,i);let k=-1;he.Children.forEach(f,(V,K)=>{if(!he.isValidElement(V)){k===K&&(k+=1,k>=f.length&&(k=-1));return}V.props.disabled||(T==="selectedMenu"&&V.props.selected||k===-1)&&(k=K),k===K&&(V.props.disabled||V.props.muiSkipListHighlight||V.type.muiSkipListHighlight)&&(k+=1,k>=f.length&&(k=-1))});const D=he.Children.map(f,(V,K)=>{if(K===k){const J={};return u&&(J.autoFocus=!0),V.props.tabIndex===void 0&&T==="selectedMenu"&&(J.tabIndex=0),he.cloneElement(V,J)}return V});return oe.jsx(UMe,{role:"menu",ref:Q,className:p,onKeyDown:M,tabIndex:c?0:-1,...N,children:D})}),QMe=VMe;function HMe(e){return Qn("MuiPopover",e)}Un("MuiPopover",["root","paper"]);function cre(e,t){let i=0;return typeof t=="number"?i=t:t==="center"?i=e.height/2:t==="bottom"&&(i=e.height),i}function lre(e,t){let i=0;return typeof t=="number"?i=t:t==="center"?i=e.width/2:t==="right"&&(i=e.width),i}function ure(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function IO(e){return typeof e=="function"?e():e}const jMe=e=>{const{classes:t}=e;return Hn({root:["root"],paper:["paper"]},HMe,t)},KMe=mr(que,{name:"MuiPopover",slot:"Root"})({}),nAe=mr(Zd,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),WMe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiPopover"}),{action:c,anchorEl:u,anchorOrigin:f={vertical:"top",horizontal:"left"},anchorPosition:p,anchorReference:m="anchorEl",children:E,className:w,container:T,elevation:N=8,marginThreshold:O=16,open:P,PaperProps:M={},slots:Q={},slotProps:k={},transformOrigin:D={vertical:"top",horizontal:"left"},TransitionComponent:V,transitionDuration:K="auto",TransitionProps:J={},disableScrollLock:ie=!1,...fe}=s,Z=he.useRef(),pe={...s,anchorOrigin:f,anchorReference:m,elevation:N,marginThreshold:O,transformOrigin:D,TransitionComponent:V,transitionDuration:K,TransitionProps:J},Y=jMe(pe),te=he.useCallback(()=>{if(m==="anchorPosition")return p;const pt=IO(u),Rt=(pt&&pt.nodeType===1?pt:Ql(Z.current).body).getBoundingClientRect();return{top:Rt.top+cre(Rt,f.vertical),left:Rt.left+lre(Rt,f.horizontal)}},[u,f.horizontal,f.vertical,p,m]),le=he.useCallback(pt=>({vertical:cre(pt,D.vertical),horizontal:lre(pt,D.horizontal)}),[D.horizontal,D.vertical]),ae=he.useCallback(pt=>{const at={width:pt.offsetWidth,height:pt.offsetHeight},Rt=le(at);if(m==="none")return{top:null,left:null,transformOrigin:ure(Rt)};const Ot=te();let Ft=Ot.top-Rt.vertical,lt=Ot.left-Rt.horizontal;const He=Ft+at.height,vr=lt+at.width,qt=Am(IO(u)),Nt=qt.innerHeight-O,It=qt.innerWidth-O;if(O!==null&&Ft<O){const Yt=Ft-O;Ft-=Yt,Rt.vertical+=Yt}else if(O!==null&&He>Nt){const Yt=He-Nt;Ft-=Yt,Rt.vertical+=Yt}if(O!==null&&lt<O){const Yt=lt-O;lt-=Yt,Rt.horizontal+=Yt}else if(vr>It){const Yt=vr-It;lt-=Yt,Rt.horizontal+=Yt}return{top:`${Math.round(Ft)}px`,left:`${Math.round(lt)}px`,transformOrigin:ure(Rt)}},[u,m,te,le,O]),[ge,se]=he.useState(P),xe=he.useCallback(()=>{const pt=Z.current;if(!pt)return;const at=ae(pt);at.top!==null&&pt.style.setProperty("top",at.top),at.left!==null&&(pt.style.left=at.left),pt.style.transformOrigin=at.transformOrigin,se(!0)},[ae]);he.useEffect(()=>(ie&&window.addEventListener("scroll",xe),()=>window.removeEventListener("scroll",xe)),[u,ie,xe]);const Me=()=>{xe()},Be=()=>{se(!1)};he.useEffect(()=>{P&&xe()}),he.useImperativeHandle(c,()=>P?{updatePosition:()=>{xe()}}:null,[P,xe]),he.useEffect(()=>{if(!P)return;const pt=Eue(()=>{xe()}),at=Am(IO(u));return at.addEventListener("resize",pt),()=>{pt.clear(),at.removeEventListener("resize",pt)}},[u,P,xe]);let ke=K;const Ke={slots:{transition:V,...Q},slotProps:{transition:J,paper:M,...k}},[ht,ve]=ei("transition",{elementType:yQ,externalForwardedProps:Ke,ownerState:pe,getSlotProps:pt=>({...pt,onEntering:(at,Rt)=>{var Ot;(Ot=pt.onEntering)==null||Ot.call(pt,at,Rt),Me()},onExited:at=>{var Rt;(Rt=pt.onExited)==null||Rt.call(pt,at),Be()}}),additionalProps:{appear:!0,in:P}});K==="auto"&&!ht.muiSupportAuto&&(ke=void 0);const Oe=T||(u?Ql(IO(u)).body:void 0),[Ue,{slots:Fe,slotProps:Qe,...We}]=ei("root",{ref:i,elementType:KMe,externalForwardedProps:{...Ke,...fe},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:Q.backdrop},slotProps:{backdrop:wue(typeof k.backdrop=="function"?k.backdrop(pe):k.backdrop,{invisible:!0})},container:Oe,open:P},ownerState:pe,className:nn(Y.root,w)}),[et,Ze]=ei("paper",{ref:Z,className:Y.paper,elementType:nAe,externalForwardedProps:Ke,shouldForwardComponentProp:!0,additionalProps:{elevation:N,style:ge?void 0:{opacity:0}},ownerState:pe});return oe.jsx(Ue,{...We,...!e6(Ue)&&{slots:Fe,slotProps:Qe,disableScrollLock:ie},children:oe.jsx(ht,{...ve,timeout:ke,children:oe.jsx(et,{...Ze,children:E})})})}),GMe=WMe;function $Me(e){return Qn("MuiMenu",e)}Un("MuiMenu",["root","paper","list"]);const zMe={vertical:"top",horizontal:"right"},qMe={vertical:"top",horizontal:"left"},YMe=e=>{const{classes:t}=e;return Hn({root:["root"],paper:["paper"],list:["list"]},$Me,t)},XMe=mr(GMe,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),JMe=mr(nAe,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),ZMe=mr(QMe,{name:"MuiMenu",slot:"List"})({outline:0}),e4e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiMenu"}),{autoFocus:c=!0,children:u,className:f,disableAutoFocusItem:p=!1,MenuListProps:m={},onClose:E,open:w,PaperProps:T={},PopoverClasses:N,transitionDuration:O="auto",TransitionProps:{onEntering:P,...M}={},variant:Q="selectedMenu",slots:k={},slotProps:D={},...V}=s,K=ZV(),J={...s,autoFocus:c,disableAutoFocusItem:p,MenuListProps:m,onEntering:P,PaperProps:T,transitionDuration:O,TransitionProps:M,variant:Q},ie=YMe(J),fe=c&&!p&&w,Z=he.useRef(null),pe=(ke,Ke)=>{Z.current&&Z.current.adjustStyleForScrollbar(ke,{direction:K?"rtl":"ltr"}),P&&P(ke,Ke)},Y=ke=>{ke.key==="Tab"&&(ke.preventDefault(),E&&E(ke,"tabKeyDown"))};let te=-1;he.Children.map(u,(ke,Ke)=>{he.isValidElement(ke)&&(ke.props.disabled||(Q==="selectedMenu"&&ke.props.selected||te===-1)&&(te=Ke))});const le={slots:k,slotProps:{list:m,transition:M,paper:T,...D}},ae=Vue({elementType:k.root,externalSlotProps:D.root,ownerState:J,className:[ie.root,f]}),[ge,se]=ei("paper",{className:ie.paper,elementType:JMe,externalForwardedProps:le,shouldForwardComponentProp:!0,ownerState:J}),[xe,Me]=ei("list",{className:nn(ie.list,m.className),elementType:ZMe,shouldForwardComponentProp:!0,externalForwardedProps:le,getSlotProps:ke=>({...ke,onKeyDown:Ke=>{var ht;Y(Ke),(ht=ke.onKeyDown)==null||ht.call(ke,Ke)}}),ownerState:J}),Be=typeof le.slotProps.transition=="function"?le.slotProps.transition(J):le.slotProps.transition;return oe.jsx(XMe,{onClose:E,anchorOrigin:{vertical:"bottom",horizontal:K?"right":"left"},transformOrigin:K?zMe:qMe,slots:{root:k.root,paper:ge,backdrop:k.backdrop,...k.transition&&{transition:k.transition}},slotProps:{root:ae,paper:se,backdrop:typeof D.backdrop=="function"?D.backdrop(J):D.backdrop,transition:{...Be,onEntering:(...ke)=>{var Ke;pe(...ke),(Ke=Be==null?void 0:Be.onEntering)==null||Ke.call(Be,...ke)}}},open:w,ref:i,transitionDuration:O,ownerState:J,...V,classes:N,children:oe.jsx(xe,{actions:Z,autoFocus:c&&(te===-1||p),autoFocusItem:fe,variant:Q,...Me,children:u})})}),iAe=e4e;function t4e(e){return Qn("MuiMenuItem",e)}const r4e=Un("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Pb=r4e,n4e=(e,t)=>{const{ownerState:i}=e;return[t.root,i.dense&&t.dense,i.divider&&t.divider,!i.disableGutters&&t.gutters]},i4e=e=>{const{disabled:t,dense:i,divider:s,disableGutters:c,selected:u,classes:f}=e,m=Hn({root:["root",i&&"dense",t&&"disabled",!c&&"gutters",s&&"divider",u&&"selected"]},t4e,f);return{...f,...m}},o4e=mr(DP,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:n4e})(_i(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Pb.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Bc(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Pb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Bc(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Pb.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Bc(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Bc(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Pb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Pb.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${rre.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${rre.inset}`]:{marginLeft:52},[`& .${sre.root}`]:{marginTop:0,marginBottom:0},[`& .${sre.inset}`]:{paddingLeft:36},[`& .${ore.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${ore.root} svg`]:{fontSize:"1.25rem"}}}]}))),s4e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiMenuItem"}),{autoFocus:c=!1,component:u="li",dense:f=!1,divider:p=!1,disableGutters:m=!1,focusVisibleClassName:E,role:w="menuitem",tabIndex:T,className:N,...O}=s,P=he.useContext(a6),M=he.useMemo(()=>({dense:f||P.dense||!1,disableGutters:m}),[P.dense,f,m]),Q=he.useRef(null);Sh(()=>{c&&Q.current&&Q.current.focus()},[c]);const k={...s,dense:M.dense,divider:p,disableGutters:m},D=i4e(s),V=uc(Q,i);let K;return s.disabled||(K=T!==void 0?T:-1),oe.jsx(a6.Provider,{value:M,children:oe.jsx(o4e,{ref:V,role:w,tabIndex:K,component:u,focusVisibleClassName:nn(D.focusVisible,E),className:nn(D.root,N),...O,ownerState:k,classes:D})})}),c6=s4e;function a4e(e){return Qn("MuiNativeSelect",e)}const c4e=Un("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),EQ=c4e,l4e=e=>{const{classes:t,variant:i,disabled:s,multiple:c,open:u,error:f}=e,p={select:["select",i,s&&"disabled",c&&"multiple",f&&"error"],icon:["icon",`icon${Ur(i)}`,u&&"iconOpen",s&&"disabled"]};return Hn(p,a4e,t)},oAe=mr("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${EQ.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),u4e=mr(oAe,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Xu,overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.select,t[i.variant],i.error&&t.error,{[`&.${EQ.multiple}`]:t.multiple}]}})({}),sAe=mr("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${EQ.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),A4e=mr(sAe,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.icon,i.variant&&t[`icon${Ur(i.variant)}`],i.open&&t.iconOpen]}})({}),d4e=he.forwardRef(function(t,i){const{className:s,disabled:c,error:u,IconComponent:f,inputRef:p,variant:m="standard",...E}=t,w={...t,disabled:c,variant:m,error:u},T=l4e(w);return oe.jsxs(he.Fragment,{children:[oe.jsx(u4e,{ownerState:w,className:nn(T.select,s),disabled:c,ref:p||i,...E}),t.multiple?null:oe.jsx(A4e,{as:f,ownerState:w,className:T.icon})]})}),f4e=d4e;var Are;const h4e=mr("fieldset",{shouldForwardProp:Xu})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),p4e=mr("legend",{shouldForwardProp:Xu})(_i(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function g4e(e){const{children:t,classes:i,className:s,label:c,notched:u,...f}=e,p=c!=null&&c!=="",m={...e,notched:u,withLabel:p};return oe.jsx(h4e,{"aria-hidden":!0,className:s,ownerState:m,...f,children:oe.jsx(p4e,{ownerState:m,children:p?oe.jsx("span",{children:c}):Are||(Are=oe.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const m4e=e=>{const{classes:t}=e,s=Hn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Kxe,t);return{...t,...s}},v4e=mr(FP,{shouldForwardProp:e=>Xu(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:UP})(_i(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Pp.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Pp.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Pp.focused} .${Pp.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(su()).map(([i])=>({props:{color:i},style:{[`&.${Pp.focused} .${Pp.notchedOutline}`]:{borderColor:(e.vars||e).palette[i].main}}})),{props:{},style:{[`&.${Pp.error} .${Pp.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Pp.disabled} .${Pp.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:i})=>i.startAdornment,style:{paddingLeft:14}},{props:({ownerState:i})=>i.endAdornment,style:{paddingRight:14}},{props:({ownerState:i})=>i.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:i,size:s})=>i.multiline&&s==="small",style:{padding:"8.5px 14px"}}]}})),_4e=mr(g4e,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(_i(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),y4e=mr(VP,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:MP})(_i(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),aAe=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:f="input",label:p,multiline:m=!1,notched:E,slots:w={},slotProps:T={},type:N="text",...O}=s,P=m4e(s),M=y0(),Q=h_({props:s,muiFormControl:M,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),k={...s,color:Q.color||"primary",disabled:Q.disabled,error:Q.error,focused:Q.focused,formControl:M,fullWidth:u,hiddenLabel:Q.hiddenLabel,multiline:m,size:Q.size,type:N},D=w.root??c.Root??v4e,V=w.input??c.Input??y4e,[K,J]=ei("notchedOutline",{elementType:_4e,className:P.notchedOutline,shouldForwardComponentProp:!0,ownerState:k,externalForwardedProps:{slots:w,slotProps:T},additionalProps:{label:p!=null&&p!==""&&Q.required?oe.jsxs(he.Fragment,{children:[p,"","*"]}):p}});return oe.jsx(gQ,{slots:{root:D,input:V},slotProps:T,renderSuffix:ie=>oe.jsx(K,{...J,notched:typeof E<"u"?E:!!(ie.startAdornment||ie.filled||ie.focused)}),fullWidth:u,inputComponent:f,multiline:m,ref:i,type:N,...O,classes:{...P,notchedOutline:null}})});aAe.muiName="Input";const cAe=aAe;function lAe(e){return Qn("MuiSelect",e)}const kb=Un("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var dre;const E4e=mr(oAe,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`&.${kb.select}`]:t.select},{[`&.${kb.select}`]:t[i.variant]},{[`&.${kb.error}`]:t.error},{[`&.${kb.multiple}`]:t.multiple}]}})({[`&.${kb.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),w4e=mr(sAe,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.icon,i.variant&&t[`icon${Ur(i.variant)}`],i.open&&t.iconOpen]}})({}),S4e=mr("input",{shouldForwardProp:e=>_ue(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function fre(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function b4e(e){return e==null||typeof e=="string"&&!e.trim()}const C4e=e=>{const{classes:t,variant:i,disabled:s,multiple:c,open:u,error:f}=e,p={select:["select",i,s&&"disabled",c&&"multiple",f&&"error"],icon:["icon",`icon${Ur(i)}`,u&&"iconOpen",s&&"disabled"],nativeInput:["nativeInput"]};return Hn(p,lAe,t)},T4e=he.forwardRef(function(t,i){var on;const{"aria-describedby":s,"aria-label":c,autoFocus:u,autoWidth:f,children:p,className:m,defaultOpen:E,defaultValue:w,disabled:T,displayEmpty:N,error:O=!1,IconComponent:P,inputRef:M,labelId:Q,MenuProps:k={},multiple:D,name:V,onBlur:K,onChange:J,onClose:ie,onFocus:fe,onOpen:Z,open:pe,readOnly:Y,renderValue:te,required:le,SelectDisplayProps:ae={},tabIndex:ge,type:se,value:xe,variant:Me="standard",...Be}=t,[ke,Ke]=HB({controlled:xe,default:w,name:"Select"}),[ht,ve]=HB({controlled:pe,default:E,name:"Select"}),Oe=he.useRef(null),Ue=he.useRef(null),[Fe,Qe]=he.useState(null),{current:We}=he.useRef(pe!=null),[et,Ze]=he.useState(),pt=uc(i,M),at=he.useCallback(sr=>{Ue.current=sr,sr&&Qe(sr)},[]),Rt=Fe==null?void 0:Fe.parentNode;he.useImperativeHandle(pt,()=>({focus:()=>{Ue.current.focus()},node:Oe.current,value:ke}),[ke]),he.useEffect(()=>{E&&ht&&Fe&&!We&&(Ze(f?null:Rt.clientWidth),Ue.current.focus())},[Fe,f]),he.useEffect(()=>{u&&Ue.current.focus()},[u]),he.useEffect(()=>{if(!Q)return;const sr=Ql(Ue.current).getElementById(Q);if(sr){const Mr=()=>{getSelection().isCollapsed&&Ue.current.focus()};return sr.addEventListener("click",Mr),()=>{sr.removeEventListener("click",Mr)}}},[Q]);const Ot=(sr,Mr)=>{sr?Z&&Z(Mr):ie&&ie(Mr),We||(Ze(f?null:Rt.clientWidth),ve(sr))},Ft=sr=>{sr.button===0&&(sr.preventDefault(),Ue.current.focus(),Ot(!0,sr))},lt=sr=>{Ot(!1,sr)},He=he.Children.toArray(p),vr=sr=>{const Mr=He.find(Tr=>Tr.props.value===sr.target.value);Mr!==void 0&&(Ke(Mr.props.value),J&&J(sr,Mr))},qt=sr=>Mr=>{let Tr;if(Mr.currentTarget.hasAttribute("tabindex")){if(D){Tr=Array.isArray(ke)?ke.slice():[];const rn=ke.indexOf(sr.props.value);rn===-1?Tr.push(sr.props.value):Tr.splice(rn,1)}else Tr=sr.props.value;if(sr.props.onClick&&sr.props.onClick(Mr),ke!==Tr&&(Ke(Tr),J)){const rn=Mr.nativeEvent||Mr,Sr=new rn.constructor(rn.type,rn);Object.defineProperty(Sr,"target",{writable:!0,value:{value:Tr,name:V}}),J(Sr,sr)}D||Ot(!1,Mr)}},Nt=sr=>{Y||[" ","ArrowUp","ArrowDown","Enter"].includes(sr.key)&&(sr.preventDefault(),Ot(!0,sr))},It=Fe!==null&&ht,Yt=sr=>{!It&&K&&(Object.defineProperty(sr,"target",{writable:!0,value:{value:ke,name:V}}),K(sr))};delete Be["aria-invalid"];let Bt,_r;const ar=[];let zr=!1;(YB({value:ke})||N)&&(te?Bt=te(ke):zr=!0);const Xr=He.map(sr=>{if(!he.isValidElement(sr))return null;let Mr;if(D){if(!Array.isArray(ke))throw new Error(um(2));Mr=ke.some(Tr=>fre(Tr,sr.props.value)),Mr&&zr&&ar.push(sr.props.children)}else Mr=fre(ke,sr.props.value),Mr&&zr&&(_r=sr.props.children);return he.cloneElement(sr,{"aria-selected":Mr?"true":"false",onClick:qt(sr),onKeyUp:Tr=>{Tr.key===" "&&Tr.preventDefault(),sr.props.onKeyUp&&sr.props.onKeyUp(Tr)},role:"option",selected:Mr,value:void 0,"data-value":sr.props.value})});zr&&(D?ar.length===0?Bt=null:Bt=ar.reduce((sr,Mr,Tr)=>(sr.push(Mr),Tr<ar.length-1&&sr.push(", "),sr),[]):Bt=_r);let Kt=et;!f&&We&&Fe&&(Kt=Rt.clientWidth);let yr;typeof ge<"u"?yr=ge:yr=T?null:0;const nr=ae.id||(V?`mui-component-select-${V}`:void 0),er={...t,variant:Me,value:ke,open:It,error:O},vt=C4e(er),tn={...k.PaperProps,...(on=k.slotProps)==null?void 0:on.paper},Rr=Pw();return oe.jsxs(he.Fragment,{children:[oe.jsx(E4e,{as:"div",ref:at,tabIndex:yr,role:"combobox","aria-controls":It?Rr:void 0,"aria-disabled":T?"true":void 0,"aria-expanded":It?"true":"false","aria-haspopup":"listbox","aria-label":c,"aria-labelledby":[Q,nr].filter(Boolean).join(" ")||void 0,"aria-describedby":s,"aria-required":le?"true":void 0,"aria-invalid":O?"true":void 0,onKeyDown:Nt,onMouseDown:T||Y?null:Ft,onBlur:Yt,onFocus:fe,...ae,ownerState:er,className:nn(ae.className,vt.select,m),id:nr,children:b4e(Bt)?dre||(dre=oe.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Bt}),oe.jsx(S4e,{"aria-invalid":O,value:Array.isArray(ke)?ke.join(","):ke,name:V,ref:Oe,"aria-hidden":!0,onChange:vr,tabIndex:-1,disabled:T,className:vt.nativeInput,autoFocus:u,required:le,...Be,ownerState:er}),oe.jsx(w4e,{as:P,className:vt.icon,ownerState:er}),oe.jsx(iAe,{id:`menu-${V||""}`,anchorEl:Rt,open:It,onClose:lt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...k,slotProps:{...k.slotProps,list:{"aria-labelledby":Q,role:"listbox","aria-multiselectable":D?"true":void 0,disableListWrap:!0,id:Rr,...k.MenuListProps},paper:{...tn,style:{minWidth:Kt,...tn!=null?tn.style:null}}},children:Xr})]})}),R4e=T4e,I4e=e=>{const{classes:t}=e,s=Hn({root:["root"]},lAe,t);return{...t,...s}},wQ={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>Xu(e)&&e!=="variant"},O4e=mr(tAe,wQ)(""),N4e=mr(cAe,wQ)(""),B4e=mr(Zue,wQ)(""),uAe=he.forwardRef(function(t,i){const s=$n({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:u,classes:f={},className:p,defaultOpen:m=!1,displayEmpty:E=!1,IconComponent:w=zxe,id:T,input:N,inputProps:O,label:P,labelId:M,MenuProps:Q,multiple:k=!1,native:D=!1,onClose:V,onOpen:K,open:J,renderValue:ie,SelectDisplayProps:fe,variant:Z="outlined",...pe}=s,Y=D?f4e:R4e,te=y0(),le=h_({props:s,muiFormControl:te,states:["variant","error"]}),ae=le.variant||Z,ge={...s,variant:ae,classes:f},se=I4e(ge),{root:xe,...Me}=se,Be=N||{standard:oe.jsx(O4e,{ownerState:ge}),outlined:oe.jsx(N4e,{label:P,ownerState:ge}),filled:oe.jsx(B4e,{ownerState:ge})}[ae],ke=uc(i,f_(Be));return oe.jsx(he.Fragment,{children:he.cloneElement(Be,{inputComponent:Y,inputProps:{children:u,error:le.error,IconComponent:w,variant:ae,type:void 0,multiple:k,...D?{id:T}:{autoWidth:c,defaultOpen:m,displayEmpty:E,labelId:M,MenuProps:Q,onClose:V,onOpen:K,open:J,renderValue:ie,SelectDisplayProps:{id:T,...fe}},...O,classes:O?kc(Me,O.classes):Me,...N?N.props.inputProps:{}},...(k&&D||E)&&ae==="outlined"?{notched:!0}:{},ref:ke,className:nn(Be.props.className,p,se.root),...!N&&{variant:ae},...pe})})});uAe.muiName="Select";const AAe=uAe;function L4e(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:i=!1,onClose:s,open:c,resumeHideDuration:u}=e,f=Q1();he.useEffect(()=>{if(!c)return;function k(D){D.defaultPrevented||D.key==="Escape"&&(s==null||s(D,"escapeKeyDown"))}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[c,s]);const p=qd((k,D)=>{s==null||s(k,D)}),m=qd(k=>{!s||k==null||f.start(k,()=>{p(null,"timeout")})});he.useEffect(()=>(c&&m(t),f.clear),[c,t,m,f]);const E=k=>{s==null||s(k,"clickaway")},w=f.clear,T=he.useCallback(()=>{t!=null&&m(u??t*.5)},[t,u,m]),N=k=>D=>{const V=k.onBlur;V==null||V(D),T()},O=k=>D=>{const V=k.onFocus;V==null||V(D),w()},P=k=>D=>{const V=k.onMouseEnter;V==null||V(D),w()},M=k=>D=>{const V=k.onMouseLeave;V==null||V(D),T()};return he.useEffect(()=>{if(!i&&c)return window.addEventListener("focus",T),window.addEventListener("blur",w),()=>{window.removeEventListener("focus",T),window.removeEventListener("blur",w)}},[i,c,T,w]),{getRootProps:(k={})=>{const D={...WB(e),...WB(k)};return{role:"presentation",...k,...D,onBlur:N(D),onFocus:O(D),onMouseEnter:P(D),onMouseLeave:M(D)}},onClickAway:E}}function P4e(e){return Qn("MuiSnackbarContent",e)}Un("MuiSnackbarContent",["root","message","action"]);const k4e=e=>{const{classes:t}=e;return Hn({root:["root"],action:["action"],message:["message"]},P4e,t)},D4e=mr(Zd,{name:"MuiSnackbarContent",slot:"Root"})(_i(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(jF(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:jF(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),x4e=mr("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),U4e=mr("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),M4e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiSnackbarContent"}),{action:c,className:u,message:f,role:p="alert",...m}=s,E=s,w=k4e(E);return oe.jsxs(D4e,{role:p,elevation:6,className:nn(w.root,u),ownerState:E,ref:i,...m,children:[oe.jsx(x4e,{className:w.message,ownerState:E,children:f}),c?oe.jsx(U4e,{className:w.action,ownerState:E,children:c}):null]})}),F4e=M4e;function V4e(e){return Qn("MuiSnackbar",e)}Un("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Q4e=e=>{const{classes:t,anchorOrigin:i}=e,s={root:["root",`anchorOrigin${Ur(i.vertical)}${Ur(i.horizontal)}`]};return Hn(s,V4e,t)},H4e=mr("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`anchorOrigin${Ur(i.anchorOrigin.vertical)}${Ur(i.anchorOrigin.horizontal)}`]]}})(_i(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),j4e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiSnackbar"}),c=d_(),u={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{action:f,anchorOrigin:{vertical:p,horizontal:m}={vertical:"bottom",horizontal:"left"},autoHideDuration:E=null,children:w,className:T,ClickAwayListenerProps:N,ContentProps:O,disableWindowBlurListener:P=!1,message:M,onBlur:Q,onClose:k,onFocus:D,onMouseEnter:V,onMouseLeave:K,open:J,resumeHideDuration:ie,slots:fe={},slotProps:Z={},TransitionComponent:pe,transitionDuration:Y=u,TransitionProps:{onEnter:te,onExited:le,...ae}={},...ge}=s,se={...s,anchorOrigin:{vertical:p,horizontal:m},autoHideDuration:E,disableWindowBlurListener:P,TransitionComponent:pe,transitionDuration:Y},xe=Q4e(se),{getRootProps:Me,onClickAway:Be}=L4e({...se}),[ke,Ke]=he.useState(!0),ht=Ot=>{Ke(!0),le&&le(Ot)},ve=(Ot,Ft)=>{Ke(!1),te&&te(Ot,Ft)},Oe={slots:{transition:pe,...fe},slotProps:{content:O,clickAwayListener:N,transition:ae,...Z}},[Ue,Fe]=ei("root",{ref:i,className:[xe.root,T],elementType:H4e,getSlotProps:Me,externalForwardedProps:{...Oe,...ge},ownerState:se}),[Qe,{ownerState:We,...et}]=ei("clickAwayListener",{elementType:J5e,externalForwardedProps:Oe,getSlotProps:Ot=>({onClickAway:(...Ft)=>{var He;const lt=Ft[0];(He=Ot.onClickAway)==null||He.call(Ot,...Ft),!(lt!=null&&lt.defaultMuiPrevented)&&Be(...Ft)}}),ownerState:se}),[Ze,pt]=ei("content",{elementType:F4e,shouldForwardComponentProp:!0,externalForwardedProps:Oe,additionalProps:{message:M,action:f},ownerState:se}),[at,Rt]=ei("transition",{elementType:yQ,externalForwardedProps:Oe,getSlotProps:Ot=>({onEnter:(...Ft)=>{var lt;(lt=Ot.onEnter)==null||lt.call(Ot,...Ft),ve(...Ft)},onExited:(...Ft)=>{var lt;(lt=Ot.onExited)==null||lt.call(Ot,...Ft),ht(...Ft)}}),additionalProps:{appear:!0,in:J,timeout:Y,direction:p==="top"?"down":"up"},ownerState:se});return!J&&ke?null:oe.jsx(Qe,{...et,...fe.clickAwayListener&&{ownerState:We},children:oe.jsx(Ue,{...Fe,children:oe.jsx(at,{...Rt,children:w||oe.jsx(Ze,{...pt})})})})}),jT=j4e;function K4e(e){return Qn("MuiTooltip",e)}const W4e=Un("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),oa=W4e;function G4e(e){return Math.round(e*1e5)/1e5}const $4e=e=>{const{classes:t,disableInteractive:i,arrow:s,touch:c,placement:u}=e,f={popper:["popper",!i&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",c&&"touch",`tooltipPlacement${Ur(u.split("-")[0])}`],arrow:["arrow"]};return Hn(f,K4e,t)},z4e=mr(Hue,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.popper,!i.disableInteractive&&t.popperInteractive,i.arrow&&t.popperArrow,!i.open&&t.popperClose]}})(_i(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${oa.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${oa.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${oa.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${oa.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${oa.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${oa.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${oa.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${oa.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),q4e=mr("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.tooltip,i.touch&&t.touch,i.arrow&&t.tooltipArrow,t[`tooltipPlacement${Ur(i.placement.split("-")[0])}`]]}})(_i(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Bc(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${oa.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${oa.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${oa.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${oa.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${G4e(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${oa.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${oa.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${oa.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${oa.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${oa.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${oa.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${oa.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${oa.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${oa.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${oa.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Y4e=mr("span",{name:"MuiTooltip",slot:"Arrow"})(_i(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:Bc(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let OO=!1;const hre=new kP;let Db={x:0,y:0};function NO(e,t){return(i,...s)=>{t&&t(i,...s),e(i,...s)}}const X4e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiTooltip"}),{arrow:c=!1,children:u,classes:f,components:p={},componentsProps:m={},describeChild:E=!1,disableFocusListener:w=!1,disableHoverListener:T=!1,disableInteractive:N=!1,disableTouchListener:O=!1,enterDelay:P=100,enterNextDelay:M=0,enterTouchDelay:Q=700,followCursor:k=!1,id:D,leaveDelay:V=0,leaveTouchDelay:K=1500,onClose:J,onOpen:ie,open:fe,placement:Z="bottom",PopperComponent:pe,PopperProps:Y={},slotProps:te={},slots:le={},title:ae,TransitionComponent:ge,TransitionProps:se,...xe}=s,Me=he.isValidElement(u)?u:oe.jsx("span",{children:u}),Be=d_(),ke=ZV(),[Ke,ht]=he.useState(),[ve,Oe]=he.useState(null),Ue=he.useRef(!1),Fe=N||k,Qe=Q1(),We=Q1(),et=Q1(),Ze=Q1(),[pt,at]=HB({controlled:fe,default:!1,name:"Tooltip",state:"open"});let Rt=pt;const Ot=Pw(D),Ft=he.useRef(),lt=qd(()=>{Ft.current!==void 0&&(document.body.style.WebkitUserSelect=Ft.current,Ft.current=void 0),Ze.clear()});he.useEffect(()=>lt,[lt]);const He=br=>{hre.clear(),OO=!0,at(!0),ie&&!Rt&&ie(br)},vr=qd(br=>{hre.start(800+V,()=>{OO=!1}),at(!1),J&&Rt&&J(br),Qe.start(Be.transitions.duration.shortest,()=>{Ue.current=!1})}),qt=br=>{Ue.current&&br.type!=="touchstart"||(Ke&&Ke.removeAttribute("title"),We.clear(),et.clear(),P||OO&&M?We.start(OO?M:P,()=>{He(br)}):He(br))},Nt=br=>{We.clear(),et.start(V,()=>{vr(br)})},[,It]=he.useState(!1),Yt=br=>{GB(br.target)||(It(!1),Nt(br))},Bt=br=>{Ke||ht(br.currentTarget),GB(br.target)&&(It(!0),qt(br))},_r=br=>{Ue.current=!0;const Pi=Me.props;Pi.onTouchStart&&Pi.onTouchStart(br)},ar=br=>{_r(br),et.clear(),Qe.clear(),lt(),Ft.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ze.start(Q,()=>{document.body.style.WebkitUserSelect=Ft.current,qt(br)})},zr=br=>{Me.props.onTouchEnd&&Me.props.onTouchEnd(br),lt(),et.start(K,()=>{vr(br)})};he.useEffect(()=>{if(!Rt)return;function br(Pi){Pi.key==="Escape"&&vr(Pi)}return document.addEventListener("keydown",br),()=>{document.removeEventListener("keydown",br)}},[vr,Rt]);const Xr=uc(f_(Me),ht,i);!ae&&ae!==0&&(Rt=!1);const Kt=he.useRef(),yr=br=>{const Pi=Me.props;Pi.onMouseMove&&Pi.onMouseMove(br),Db={x:br.clientX,y:br.clientY},Kt.current&&Kt.current.update()},nr={},er=typeof ae=="string";E?(nr.title=!Rt&&er&&!T?ae:null,nr["aria-describedby"]=Rt?Ot:null):(nr["aria-label"]=er?ae:null,nr["aria-labelledby"]=Rt&&!er?Ot:null);const vt={...nr,...xe,...Me.props,className:nn(xe.className,Me.props.className),onTouchStart:_r,ref:Xr,...k?{onMouseMove:yr}:{}},tn={};O||(vt.onTouchStart=ar,vt.onTouchEnd=zr),T||(vt.onMouseOver=NO(qt,vt.onMouseOver),vt.onMouseLeave=NO(Nt,vt.onMouseLeave),Fe||(tn.onMouseOver=qt,tn.onMouseLeave=Nt)),w||(vt.onFocus=NO(Bt,vt.onFocus),vt.onBlur=NO(Yt,vt.onBlur),Fe||(tn.onFocus=Bt,tn.onBlur=Yt));const Rr={...s,isRtl:ke,arrow:c,disableInteractive:Fe,placement:Z,PopperComponentProp:pe,touch:Ue.current},on=typeof te.popper=="function"?te.popper(Rr):te.popper,sr=he.useMemo(()=>{var Pi,ki;let br=[{name:"arrow",enabled:!!ve,options:{element:ve,padding:4}}];return(Pi=Y.popperOptions)!=null&&Pi.modifiers&&(br=br.concat(Y.popperOptions.modifiers)),(ki=on==null?void 0:on.popperOptions)!=null&&ki.modifiers&&(br=br.concat(on.popperOptions.modifiers)),{...Y.popperOptions,...on==null?void 0:on.popperOptions,modifiers:br}},[ve,Y.popperOptions,on==null?void 0:on.popperOptions]),Mr=$4e(Rr),Tr=typeof te.transition=="function"?te.transition(Rr):te.transition,rn={slots:{popper:p.Popper,transition:p.Transition??ge,tooltip:p.Tooltip,arrow:p.Arrow,...le},slotProps:{arrow:te.arrow??m.arrow,popper:{...Y,...on??m.popper},tooltip:te.tooltip??m.tooltip,transition:{...se,...Tr??m.transition}}},[Sr,ai]=ei("popper",{elementType:z4e,externalForwardedProps:rn,ownerState:Rr,className:nn(Mr.popper,Y==null?void 0:Y.className)}),[Ei,ti]=ei("transition",{elementType:yQ,externalForwardedProps:rn,ownerState:Rr}),[dn,Qr]=ei("tooltip",{elementType:q4e,className:Mr.tooltip,externalForwardedProps:rn,ownerState:Rr}),[yn,wi]=ei("arrow",{elementType:Y4e,className:Mr.arrow,externalForwardedProps:rn,ownerState:Rr,ref:Oe});return oe.jsxs(he.Fragment,{children:[he.cloneElement(Me,vt),oe.jsx(Sr,{as:pe??Hue,placement:Z,anchorEl:k?{getBoundingClientRect:()=>({top:Db.y,left:Db.x,right:Db.x,bottom:Db.y,width:0,height:0})}:Ke,popperRef:Kt,open:Ke?Rt:!1,id:Ot,transition:!0,...tn,...ai,popperOptions:sr,children:({TransitionProps:br})=>oe.jsx(Ei,{timeout:Be.transitions.duration.shorter,...br,...ti,children:oe.jsxs(dn,{...Qr,children:[ae,c?oe.jsx(yn,{...wi}):null]})})})]})}),J4e=X4e,Z4e=ePe({createStyledComponent:mr("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>$n({props:e,name:"MuiStack"})}),SQ=Z4e;function e3e(e){return Qn("MuiToolbar",e)}Un("MuiToolbar",["root","gutters","regular","dense"]);const t3e=e=>{const{classes:t,disableGutters:i,variant:s}=e;return Hn({root:["root",!i&&"gutters",s]},e3e,t)},r3e=mr("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disableGutters&&t.gutters,t[i.variant]]}})(_i(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),n3e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiToolbar"}),{className:c,component:u="div",disableGutters:f=!1,variant:p="regular",...m}=s,E={...s,component:u,disableGutters:f,variant:p},w=t3e(E);return oe.jsx(r3e,{as:u,className:nn(w.root,c),ref:i,ownerState:E,...m})}),bQ=n3e;function i3e(e){return Qn("MuiTextField",e)}Un("MuiTextField",["root"]);const o3e={standard:tAe,filled:Zue,outlined:cAe},s3e=e=>{const{classes:t}=e;return Hn({root:["root"]},i3e,t)},a3e=mr(tMe,{name:"MuiTextField",slot:"Root"})({}),c3e=he.forwardRef(function(t,i){const s=$n({props:t,name:"MuiTextField"}),{autoComplete:c,autoFocus:u=!1,children:f,className:p,color:m="primary",defaultValue:E,disabled:w=!1,error:T=!1,FormHelperTextProps:N,fullWidth:O=!1,helperText:P,id:M,InputLabelProps:Q,inputProps:k,InputProps:D,inputRef:V,label:K,maxRows:J,minRows:ie,multiline:fe=!1,name:Z,onBlur:pe,onChange:Y,onFocus:te,placeholder:le,required:ae=!1,rows:ge,select:se=!1,SelectProps:xe,slots:Me={},slotProps:Be={},type:ke,value:Ke,variant:ht="outlined",...ve}=s,Oe={...s,autoFocus:u,color:m,disabled:w,error:T,fullWidth:O,multiline:fe,required:ae,select:se,variant:ht},Ue=s3e(Oe),Fe=Pw(M),Qe=P&&Fe?`${Fe}-helper-text`:void 0,We=K&&Fe?`${Fe}-label`:void 0,et=o3e[ht],Ze={slots:Me,slotProps:{input:D,inputLabel:Q,htmlInput:k,formHelperText:N,select:xe,...Be}},pt={},at=Ze.slotProps.inputLabel;ht==="outlined"&&(at&&typeof at.shrink<"u"&&(pt.notched=at.shrink),pt.label=K),se&&((!xe||!xe.native)&&(pt.id=void 0),pt["aria-describedby"]=void 0);const[Rt,Ot]=ei("root",{elementType:a3e,shouldForwardComponentProp:!0,externalForwardedProps:{...Ze,...ve},ownerState:Oe,className:nn(Ue.root,p),ref:i,additionalProps:{disabled:w,error:T,fullWidth:O,required:ae,color:m,variant:ht}}),[Ft,lt]=ei("input",{elementType:et,externalForwardedProps:Ze,additionalProps:pt,ownerState:Oe}),[He,vr]=ei("inputLabel",{elementType:BMe,externalForwardedProps:Ze,ownerState:Oe}),[qt,Nt]=ei("htmlInput",{elementType:"input",externalForwardedProps:Ze,ownerState:Oe}),[It,Yt]=ei("formHelperText",{elementType:hMe,externalForwardedProps:Ze,ownerState:Oe}),[Bt,_r]=ei("select",{elementType:AAe,externalForwardedProps:Ze,ownerState:Oe}),ar=oe.jsx(Ft,{"aria-describedby":Qe,autoComplete:c,autoFocus:u,defaultValue:E,fullWidth:O,multiline:fe,name:Z,rows:ge,maxRows:J,minRows:ie,type:ke,value:Ke,id:Fe,inputRef:V,onBlur:pe,onChange:Y,onFocus:te,placeholder:le,inputProps:Nt,slots:{input:Me.htmlInput?qt:void 0},...lt});return oe.jsxs(Rt,{...Ot,children:[K!=null&&K!==""&&oe.jsx(He,{htmlFor:Fe,id:We,...vr,children:K}),se?oe.jsx(Bt,{"aria-describedby":Qe,id:Fe,labelId:We,value:Ke,input:ar,..._r,children:f}):ar,P&&oe.jsx(It,{id:Qe,...Yt,children:P})]})}),Ml=c3e,dAe=Go(oe.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}));function fAe(e,t){return function(){return e.apply(t,arguments)}}const{toString:l3e}=Object.prototype,{getPrototypeOf:CQ}=Object,{iterator:QP,toStringTag:hAe}=Symbol,HP=(e=>t=>{const i=l3e.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),bh=e=>(e=e.toLowerCase(),t=>HP(t)===e),jP=e=>t=>typeof t===e,{isArray:kw}=Array,vT=jP("undefined");function u3e(e){return e!==null&&!vT(e)&&e.constructor!==null&&!vT(e.constructor)&&qu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pAe=bh("ArrayBuffer");function A3e(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&pAe(e.buffer),t}const d3e=jP("string"),qu=jP("function"),gAe=jP("number"),KP=e=>e!==null&&typeof e=="object",f3e=e=>e===!0||e===!1,QN=e=>{if(HP(e)!=="object")return!1;const t=CQ(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(hAe in e)&&!(QP in e)},h3e=bh("Date"),p3e=bh("File"),g3e=bh("Blob"),m3e=bh("FileList"),v3e=e=>KP(e)&&qu(e.pipe),_3e=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||qu(e.append)&&((t=HP(e))==="formdata"||t==="object"&&qu(e.toString)&&e.toString()==="[object FormData]"))},y3e=bh("URLSearchParams"),[E3e,w3e,S3e,b3e]=["ReadableStream","Request","Response","Headers"].map(bh),C3e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function KT(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,c;if(typeof e!="object"&&(e=[e]),kw(e))for(s=0,c=e.length;s<c;s++)t.call(null,e[s],s,e);else{const u=i?Object.getOwnPropertyNames(e):Object.keys(e),f=u.length;let p;for(s=0;s<f;s++)p=u[s],t.call(null,e[p],p,e)}}function mAe(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,c;for(;s-- >0;)if(c=i[s],t===c.toLowerCase())return c;return null}const H1=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),vAe=e=>!vT(e)&&e!==H1;function l6(){const{caseless:e}=vAe(this)&&this||{},t={},i=(s,c)=>{const u=e&&mAe(t,c)||c;QN(t[u])&&QN(s)?t[u]=l6(t[u],s):QN(s)?t[u]=l6({},s):kw(s)?t[u]=s.slice():t[u]=s};for(let s=0,c=arguments.length;s<c;s++)arguments[s]&&KT(arguments[s],i);return t}const T3e=(e,t,i,{allOwnKeys:s}={})=>(KT(t,(c,u)=>{i&&qu(c)?e[u]=fAe(c,i):e[u]=c},{allOwnKeys:s}),e),R3e=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),I3e=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},O3e=(e,t,i,s)=>{let c,u,f;const p={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),u=c.length;u-- >0;)f=c[u],(!s||s(f,e,t))&&!p[f]&&(t[f]=e[f],p[f]=!0);e=i!==!1&&CQ(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},N3e=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},B3e=e=>{if(!e)return null;if(kw(e))return e;let t=e.length;if(!gAe(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},L3e=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&CQ(Uint8Array)),P3e=(e,t)=>{const s=(e&&e[QP]).call(e);let c;for(;(c=s.next())&&!c.done;){const u=c.value;t.call(e,u[0],u[1])}},k3e=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},D3e=bh("HTMLFormElement"),x3e=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,c){return s.toUpperCase()+c}),pre=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),U3e=bh("RegExp"),_Ae=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};KT(i,(c,u)=>{let f;(f=t(c,u,e))!==!1&&(s[u]=f||c)}),Object.defineProperties(e,s)},M3e=e=>{_Ae(e,(t,i)=>{if(qu(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(qu(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},F3e=(e,t)=>{const i={},s=c=>{c.forEach(u=>{i[u]=!0})};return kw(e)?s(e):s(String(e).split(t)),i},V3e=()=>{},Q3e=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function H3e(e){return!!(e&&qu(e.append)&&e[hAe]==="FormData"&&e[QP])}const j3e=e=>{const t=new Array(10),i=(s,c)=>{if(KP(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[c]=s;const u=kw(s)?[]:{};return KT(s,(f,p)=>{const m=i(f,c+1);!vT(m)&&(u[p]=m)}),t[c]=void 0,u}}return s};return i(e,0)},K3e=bh("AsyncFunction"),W3e=e=>e&&(KP(e)||qu(e))&&qu(e.then)&&qu(e.catch),yAe=((e,t)=>e?setImmediate:t?((i,s)=>(H1.addEventListener("message",({source:c,data:u})=>{c===H1&&u===i&&s.length&&s.shift()()},!1),c=>{s.push(c),H1.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",qu(H1.postMessage)),G3e=typeof queueMicrotask<"u"?queueMicrotask.bind(H1):typeof process<"u"&&process.nextTick||yAe,$3e=e=>e!=null&&qu(e[QP]),xt={isArray:kw,isArrayBuffer:pAe,isBuffer:u3e,isFormData:_3e,isArrayBufferView:A3e,isString:d3e,isNumber:gAe,isBoolean:f3e,isObject:KP,isPlainObject:QN,isReadableStream:E3e,isRequest:w3e,isResponse:S3e,isHeaders:b3e,isUndefined:vT,isDate:h3e,isFile:p3e,isBlob:g3e,isRegExp:U3e,isFunction:qu,isStream:v3e,isURLSearchParams:y3e,isTypedArray:L3e,isFileList:m3e,forEach:KT,merge:l6,extend:T3e,trim:C3e,stripBOM:R3e,inherits:I3e,toFlatObject:O3e,kindOf:HP,kindOfTest:bh,endsWith:N3e,toArray:B3e,forEachEntry:P3e,matchAll:k3e,isHTMLForm:D3e,hasOwnProperty:pre,hasOwnProp:pre,reduceDescriptors:_Ae,freezeMethods:M3e,toObjectSet:F3e,toCamelCase:x3e,noop:V3e,toFiniteNumber:Q3e,findKey:mAe,global:H1,isContextDefined:vAe,isSpecCompliantForm:H3e,toJSONObject:j3e,isAsyncFn:K3e,isThenable:W3e,setImmediate:yAe,asap:G3e,isIterable:$3e};function Zn(e,t,i,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),c&&(this.response=c,this.status=c.status?c.status:null)}xt.inherits(Zn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xt.toJSONObject(this.config),code:this.code,status:this.status}}});const EAe=Zn.prototype,wAe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wAe[e]={value:e}});Object.defineProperties(Zn,wAe);Object.defineProperty(EAe,"isAxiosError",{value:!0});Zn.from=(e,t,i,s,c,u)=>{const f=Object.create(EAe);return xt.toFlatObject(e,f,function(m){return m!==Error.prototype},p=>p!=="isAxiosError"),Zn.call(f,e.message,t,i,s,c),f.cause=e,f.name=e.name,u&&Object.assign(f,u),f};const z3e=null;function u6(e){return xt.isPlainObject(e)||xt.isArray(e)}function SAe(e){return xt.endsWith(e,"[]")?e.slice(0,-2):e}function gre(e,t,i){return e?e.concat(t).map(function(c,u){return c=SAe(c),!i&&u?"["+c+"]":c}).join(i?".":""):t}function q3e(e){return xt.isArray(e)&&!e.some(u6)}const Y3e=xt.toFlatObject(xt,{},null,function(t){return/^is[A-Z]/.test(t)});function WP(e,t,i){if(!xt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=xt.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,Q){return!xt.isUndefined(Q[M])});const s=i.metaTokens,c=i.visitor||w,u=i.dots,f=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&xt.isSpecCompliantForm(t);if(!xt.isFunction(c))throw new TypeError("visitor must be a function");function E(P){if(P===null)return"";if(xt.isDate(P))return P.toISOString();if(!m&&xt.isBlob(P))throw new Zn("Blob is not supported. Use a Buffer instead.");return xt.isArrayBuffer(P)||xt.isTypedArray(P)?m&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function w(P,M,Q){let k=P;if(P&&!Q&&typeof P=="object"){if(xt.endsWith(M,"{}"))M=s?M:M.slice(0,-2),P=JSON.stringify(P);else if(xt.isArray(P)&&q3e(P)||(xt.isFileList(P)||xt.endsWith(M,"[]"))&&(k=xt.toArray(P)))return M=SAe(M),k.forEach(function(V,K){!(xt.isUndefined(V)||V===null)&&t.append(f===!0?gre([M],K,u):f===null?M:M+"[]",E(V))}),!1}return u6(P)?!0:(t.append(gre(Q,M,u),E(P)),!1)}const T=[],N=Object.assign(Y3e,{defaultVisitor:w,convertValue:E,isVisitable:u6});function O(P,M){if(!xt.isUndefined(P)){if(T.indexOf(P)!==-1)throw Error("Circular reference detected in "+M.join("."));T.push(P),xt.forEach(P,function(k,D){(!(xt.isUndefined(k)||k===null)&&c.call(t,k,xt.isString(D)?D.trim():D,M,N))===!0&&O(k,M?M.concat(D):[D])}),T.pop()}}if(!xt.isObject(e))throw new TypeError("data must be an object");return O(e),t}function mre(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function TQ(e,t){this._pairs=[],e&&WP(e,this,t)}const bAe=TQ.prototype;bAe.append=function(t,i){this._pairs.push([t,i])};bAe.toString=function(t){const i=t?function(s){return t.call(this,s,mre)}:mre;return this._pairs.map(function(c){return i(c[0])+"="+i(c[1])},"").join("&")};function X3e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function CAe(e,t,i){if(!t)return e;const s=i&&i.encode||X3e;xt.isFunction(i)&&(i={serialize:i});const c=i&&i.serialize;let u;if(c?u=c(t,i):u=xt.isURLSearchParams(t)?t.toString():new TQ(t,i).toString(s),u){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class J3e{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const vre=J3e,TAe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z3e=typeof URLSearchParams<"u"?URLSearchParams:TQ,eFe=typeof FormData<"u"?FormData:null,tFe=typeof Blob<"u"?Blob:null,rFe={isBrowser:!0,classes:{URLSearchParams:Z3e,FormData:eFe,Blob:tFe},protocols:["http","https","file","blob","url","data"]},RQ=typeof window<"u"&&typeof document<"u",A6=typeof navigator=="object"&&navigator||void 0,nFe=RQ&&(!A6||["ReactNative","NativeScript","NS"].indexOf(A6.product)<0),iFe=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),oFe=RQ&&window.location.href||"http://localhost",sFe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:RQ,hasStandardBrowserEnv:nFe,hasStandardBrowserWebWorkerEnv:iFe,navigator:A6,origin:oFe},Symbol.toStringTag,{value:"Module"})),Fl={...sFe,...rFe};function aFe(e,t){return WP(e,new Fl.classes.URLSearchParams,Object.assign({visitor:function(i,s,c,u){return Fl.isNode&&xt.isBuffer(i)?(this.append(s,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function cFe(e){return xt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function lFe(e){const t={},i=Object.keys(e);let s;const c=i.length;let u;for(s=0;s<c;s++)u=i[s],t[u]=e[u];return t}function RAe(e){function t(i,s,c,u){let f=i[u++];if(f==="__proto__")return!0;const p=Number.isFinite(+f),m=u>=i.length;return f=!f&&xt.isArray(c)?c.length:f,m?(xt.hasOwnProp(c,f)?c[f]=[c[f],s]:c[f]=s,!p):((!c[f]||!xt.isObject(c[f]))&&(c[f]=[]),t(i,s,c[f],u)&&xt.isArray(c[f])&&(c[f]=lFe(c[f])),!p)}if(xt.isFormData(e)&&xt.isFunction(e.entries)){const i={};return xt.forEachEntry(e,(s,c)=>{t(cFe(s),c,i,0)}),i}return null}function uFe(e,t,i){if(xt.isString(e))try{return(t||JSON.parse)(e),xt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const IQ={transitional:TAe,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const s=i.getContentType()||"",c=s.indexOf("application/json")>-1,u=xt.isObject(t);if(u&&xt.isHTMLForm(t)&&(t=new FormData(t)),xt.isFormData(t))return c?JSON.stringify(RAe(t)):t;if(xt.isArrayBuffer(t)||xt.isBuffer(t)||xt.isStream(t)||xt.isFile(t)||xt.isBlob(t)||xt.isReadableStream(t))return t;if(xt.isArrayBufferView(t))return t.buffer;if(xt.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let p;if(u){if(s.indexOf("application/x-www-form-urlencoded")>-1)return aFe(t,this.formSerializer).toString();if((p=xt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return WP(p?{"files[]":t}:t,m&&new m,this.formSerializer)}}return u||c?(i.setContentType("application/json",!1),uFe(t)):t}],transformResponse:[function(t){const i=this.transitional||IQ.transitional,s=i&&i.forcedJSONParsing,c=this.responseType==="json";if(xt.isResponse(t)||xt.isReadableStream(t))return t;if(t&&xt.isString(t)&&(s&&!this.responseType||c)){const f=!(i&&i.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(p){if(f)throw p.name==="SyntaxError"?Zn.from(p,Zn.ERR_BAD_RESPONSE,this,null,this.response):p}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fl.classes.FormData,Blob:Fl.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xt.forEach(["delete","get","head","post","put","patch"],e=>{IQ.headers[e]={}});const OQ=IQ,AFe=xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dFe=e=>{const t={};let i,s,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),i=f.substring(0,c).trim().toLowerCase(),s=f.substring(c+1).trim(),!(!i||t[i]&&AFe[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},_re=Symbol("internals");function xb(e){return e&&String(e).trim().toLowerCase()}function HN(e){return e===!1||e==null?e:xt.isArray(e)?e.map(HN):String(e)}function fFe(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const hFe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function t4(e,t,i,s,c){if(xt.isFunction(s))return s.call(this,t,i);if(c&&(t=i),!!xt.isString(t)){if(xt.isString(s))return t.indexOf(s)!==-1;if(xt.isRegExp(s))return s.test(t)}}function pFe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function gFe(e,t){const i=xt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(c,u,f){return this[s].call(this,t,c,u,f)},configurable:!0})})}class GP{constructor(t){t&&this.set(t)}set(t,i,s){const c=this;function u(p,m,E){const w=xb(m);if(!w)throw new Error("header name must be a non-empty string");const T=xt.findKey(c,w);(!T||c[T]===void 0||E===!0||E===void 0&&c[T]!==!1)&&(c[T||m]=HN(p))}const f=(p,m)=>xt.forEach(p,(E,w)=>u(E,w,m));if(xt.isPlainObject(t)||t instanceof this.constructor)f(t,i);else if(xt.isString(t)&&(t=t.trim())&&!hFe(t))f(dFe(t),i);else if(xt.isObject(t)&&xt.isIterable(t)){let p={},m,E;for(const w of t){if(!xt.isArray(w))throw TypeError("Object iterator must return a key-value pair");p[E=w[0]]=(m=p[E])?xt.isArray(m)?[...m,w[1]]:[m,w[1]]:w[1]}f(p,i)}else t!=null&&u(i,t,s);return this}get(t,i){if(t=xb(t),t){const s=xt.findKey(this,t);if(s){const c=this[s];if(!i)return c;if(i===!0)return fFe(c);if(xt.isFunction(i))return i.call(this,c,s);if(xt.isRegExp(i))return i.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=xb(t),t){const s=xt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!i||t4(this,this[s],s,i)))}return!1}delete(t,i){const s=this;let c=!1;function u(f){if(f=xb(f),f){const p=xt.findKey(s,f);p&&(!i||t4(s,s[p],p,i))&&(delete s[p],c=!0)}}return xt.isArray(t)?t.forEach(u):u(t),c}clear(t){const i=Object.keys(this);let s=i.length,c=!1;for(;s--;){const u=i[s];(!t||t4(this,this[u],u,t,!0))&&(delete this[u],c=!0)}return c}normalize(t){const i=this,s={};return xt.forEach(this,(c,u)=>{const f=xt.findKey(s,u);if(f){i[f]=HN(c),delete i[u];return}const p=t?pFe(u):String(u).trim();p!==u&&delete i[u],i[p]=HN(c),s[p]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return xt.forEach(this,(s,c)=>{s!=null&&s!==!1&&(i[c]=t&&xt.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const s=new this(t);return i.forEach(c=>s.set(c)),s}static accessor(t){const s=(this[_re]=this[_re]={accessors:{}}).accessors,c=this.prototype;function u(f){const p=xb(f);s[p]||(gFe(c,f),s[p]=!0)}return xt.isArray(t)?t.forEach(u):u(t),this}}GP.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xt.reduceDescriptors(GP.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[i]=s}}});xt.freezeMethods(GP);const yh=GP;function r4(e,t){const i=this||OQ,s=t||i,c=yh.from(s.headers);let u=s.data;return xt.forEach(e,function(p){u=p.call(i,u,c.normalize(),t?t.status:void 0)}),c.normalize(),u}function IAe(e){return!!(e&&e.__CANCEL__)}function Dw(e,t,i){Zn.call(this,e??"canceled",Zn.ERR_CANCELED,t,i),this.name="CanceledError"}xt.inherits(Dw,Zn,{__CANCEL__:!0});function OAe(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new Zn("Request failed with status code "+i.status,[Zn.ERR_BAD_REQUEST,Zn.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function mFe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function vFe(e,t){e=e||10;const i=new Array(e),s=new Array(e);let c=0,u=0,f;return t=t!==void 0?t:1e3,function(m){const E=Date.now(),w=s[u];f||(f=E),i[c]=m,s[c]=E;let T=u,N=0;for(;T!==c;)N+=i[T++],T=T%e;if(c=(c+1)%e,c===u&&(u=(u+1)%e),E-f<t)return;const O=w&&E-w;return O?Math.round(N*1e3/O):void 0}}function _Fe(e,t){let i=0,s=1e3/t,c,u;const f=(E,w=Date.now())=>{i=w,c=null,u&&(clearTimeout(u),u=null),e.apply(null,E)};return[(...E)=>{const w=Date.now(),T=w-i;T>=s?f(E,w):(c=E,u||(u=setTimeout(()=>{u=null,f(c)},s-T)))},()=>c&&f(c)]}const JB=(e,t,i=3)=>{let s=0;const c=vFe(50,250);return _Fe(u=>{const f=u.loaded,p=u.lengthComputable?u.total:void 0,m=f-s,E=c(m),w=f<=p;s=f;const T={loaded:f,total:p,progress:p?f/p:void 0,bytes:m,rate:E||void 0,estimated:E&&p&&w?(p-f)/E:void 0,event:u,lengthComputable:p!=null,[t?"download":"upload"]:!0};e(T)},i)},yre=(e,t)=>{const i=e!=null;return[s=>t[0]({lengthComputable:i,total:e,loaded:s}),t[1]]},Ere=e=>(...t)=>xt.asap(()=>e(...t)),yFe=Fl.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,Fl.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(Fl.origin),Fl.navigator&&/(msie|trident)/i.test(Fl.navigator.userAgent)):()=>!0,EFe=Fl.hasStandardBrowserEnv?{write(e,t,i,s,c,u){const f=[e+"="+encodeURIComponent(t)];xt.isNumber(i)&&f.push("expires="+new Date(i).toGMTString()),xt.isString(s)&&f.push("path="+s),xt.isString(c)&&f.push("domain="+c),u===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wFe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function SFe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function NAe(e,t,i){let s=!wFe(t);return e&&(s||i==!1)?SFe(e,t):t}const wre=e=>e instanceof yh?{...e}:e;function s_(e,t){t=t||{};const i={};function s(E,w,T,N){return xt.isPlainObject(E)&&xt.isPlainObject(w)?xt.merge.call({caseless:N},E,w):xt.isPlainObject(w)?xt.merge({},w):xt.isArray(w)?w.slice():w}function c(E,w,T,N){if(xt.isUndefined(w)){if(!xt.isUndefined(E))return s(void 0,E,T,N)}else return s(E,w,T,N)}function u(E,w){if(!xt.isUndefined(w))return s(void 0,w)}function f(E,w){if(xt.isUndefined(w)){if(!xt.isUndefined(E))return s(void 0,E)}else return s(void 0,w)}function p(E,w,T){if(T in t)return s(E,w);if(T in e)return s(void 0,E)}const m={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:p,headers:(E,w,T)=>c(wre(E),wre(w),T,!0)};return xt.forEach(Object.keys(Object.assign({},e,t)),function(w){const T=m[w]||c,N=T(e[w],t[w],w);xt.isUndefined(N)&&T!==p||(i[w]=N)}),i}const BAe=e=>{const t=s_({},e);let{data:i,withXSRFToken:s,xsrfHeaderName:c,xsrfCookieName:u,headers:f,auth:p}=t;t.headers=f=yh.from(f),t.url=CAe(NAe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),p&&f.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let m;if(xt.isFormData(i)){if(Fl.hasStandardBrowserEnv||Fl.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((m=f.getContentType())!==!1){const[E,...w]=m?m.split(";").map(T=>T.trim()).filter(Boolean):[];f.setContentType([E||"multipart/form-data",...w].join("; "))}}if(Fl.hasStandardBrowserEnv&&(s&&xt.isFunction(s)&&(s=s(t)),s||s!==!1&&yFe(t.url))){const E=c&&u&&EFe.read(u);E&&f.set(c,E)}return t},bFe=typeof XMLHttpRequest<"u",CFe=bFe&&function(e){return new Promise(function(i,s){const c=BAe(e);let u=c.data;const f=yh.from(c.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:E}=c,w,T,N,O,P;function M(){O&&O(),P&&P(),c.cancelToken&&c.cancelToken.unsubscribe(w),c.signal&&c.signal.removeEventListener("abort",w)}let Q=new XMLHttpRequest;Q.open(c.method.toUpperCase(),c.url,!0),Q.timeout=c.timeout;function k(){if(!Q)return;const V=yh.from("getAllResponseHeaders"in Q&&Q.getAllResponseHeaders()),J={data:!p||p==="text"||p==="json"?Q.responseText:Q.response,status:Q.status,statusText:Q.statusText,headers:V,config:e,request:Q};OAe(function(fe){i(fe),M()},function(fe){s(fe),M()},J),Q=null}"onloadend"in Q?Q.onloadend=k:Q.onreadystatechange=function(){!Q||Q.readyState!==4||Q.status===0&&!(Q.responseURL&&Q.responseURL.indexOf("file:")===0)||setTimeout(k)},Q.onabort=function(){Q&&(s(new Zn("Request aborted",Zn.ECONNABORTED,e,Q)),Q=null)},Q.onerror=function(){s(new Zn("Network Error",Zn.ERR_NETWORK,e,Q)),Q=null},Q.ontimeout=function(){let K=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const J=c.transitional||TAe;c.timeoutErrorMessage&&(K=c.timeoutErrorMessage),s(new Zn(K,J.clarifyTimeoutError?Zn.ETIMEDOUT:Zn.ECONNABORTED,e,Q)),Q=null},u===void 0&&f.setContentType(null),"setRequestHeader"in Q&&xt.forEach(f.toJSON(),function(K,J){Q.setRequestHeader(J,K)}),xt.isUndefined(c.withCredentials)||(Q.withCredentials=!!c.withCredentials),p&&p!=="json"&&(Q.responseType=c.responseType),E&&([N,P]=JB(E,!0),Q.addEventListener("progress",N)),m&&Q.upload&&([T,O]=JB(m),Q.upload.addEventListener("progress",T),Q.upload.addEventListener("loadend",O)),(c.cancelToken||c.signal)&&(w=V=>{Q&&(s(!V||V.type?new Dw(null,e,Q):V),Q.abort(),Q=null)},c.cancelToken&&c.cancelToken.subscribe(w),c.signal&&(c.signal.aborted?w():c.signal.addEventListener("abort",w)));const D=mFe(c.url);if(D&&Fl.protocols.indexOf(D)===-1){s(new Zn("Unsupported protocol "+D+":",Zn.ERR_BAD_REQUEST,e));return}Q.send(u||null)})},TFe=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let s=new AbortController,c;const u=function(E){if(!c){c=!0,p();const w=E instanceof Error?E:this.reason;s.abort(w instanceof Zn?w:new Dw(w instanceof Error?w.message:w))}};let f=t&&setTimeout(()=>{f=null,u(new Zn(`timeout ${t} of ms exceeded`,Zn.ETIMEDOUT))},t);const p=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(E=>{E.unsubscribe?E.unsubscribe(u):E.removeEventListener("abort",u)}),e=null)};e.forEach(E=>E.addEventListener("abort",u));const{signal:m}=s;return m.unsubscribe=()=>xt.asap(p),m}},RFe=TFe,IFe=function*(e,t){let i=e.byteLength;if(!t||i<t){yield e;return}let s=0,c;for(;s<i;)c=s+t,yield e.slice(s,c),s=c},OFe=async function*(e,t){for await(const i of NFe(e))yield*IFe(i,t)},NFe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:i,value:s}=await t.read();if(i)break;yield s}}finally{await t.cancel()}},Sre=(e,t,i,s)=>{const c=OFe(e,t);let u=0,f,p=m=>{f||(f=!0,s&&s(m))};return new ReadableStream({async pull(m){try{const{done:E,value:w}=await c.next();if(E){p(),m.close();return}let T=w.byteLength;if(i){let N=u+=T;i(N)}m.enqueue(new Uint8Array(w))}catch(E){throw p(E),E}},cancel(m){return p(m),c.return()}},{highWaterMark:2})},$P=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",LAe=$P&&typeof ReadableStream=="function",BFe=$P&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),PAe=(e,...t)=>{try{return!!e(...t)}catch{return!1}},LFe=LAe&&PAe(()=>{let e=!1;const t=new Request(Fl.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),bre=64*1024,d6=LAe&&PAe(()=>xt.isReadableStream(new Response("").body)),ZB={stream:d6&&(e=>e.body)};$P&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ZB[t]&&(ZB[t]=xt.isFunction(e[t])?i=>i[t]():(i,s)=>{throw new Zn(`Response type '${t}' is not supported`,Zn.ERR_NOT_SUPPORT,s)})})})(new Response);const PFe=async e=>{if(e==null)return 0;if(xt.isBlob(e))return e.size;if(xt.isSpecCompliantForm(e))return(await new Request(Fl.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(xt.isArrayBufferView(e)||xt.isArrayBuffer(e))return e.byteLength;if(xt.isURLSearchParams(e)&&(e=e+""),xt.isString(e))return(await BFe(e)).byteLength},kFe=async(e,t)=>{const i=xt.toFiniteNumber(e.getContentLength());return i??PFe(t)},DFe=$P&&(async e=>{let{url:t,method:i,data:s,signal:c,cancelToken:u,timeout:f,onDownloadProgress:p,onUploadProgress:m,responseType:E,headers:w,withCredentials:T="same-origin",fetchOptions:N}=BAe(e);E=E?(E+"").toLowerCase():"text";let O=RFe([c,u&&u.toAbortSignal()],f),P;const M=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let Q;try{if(m&&LFe&&i!=="get"&&i!=="head"&&(Q=await kFe(w,s))!==0){let J=new Request(t,{method:"POST",body:s,duplex:"half"}),ie;if(xt.isFormData(s)&&(ie=J.headers.get("content-type"))&&w.setContentType(ie),J.body){const[fe,Z]=yre(Q,JB(Ere(m)));s=Sre(J.body,bre,fe,Z)}}xt.isString(T)||(T=T?"include":"omit");const k="credentials"in Request.prototype;P=new Request(t,{...N,signal:O,method:i.toUpperCase(),headers:w.normalize().toJSON(),body:s,duplex:"half",credentials:k?T:void 0});let D=await fetch(P);const V=d6&&(E==="stream"||E==="response");if(d6&&(p||V&&M)){const J={};["status","statusText","headers"].forEach(pe=>{J[pe]=D[pe]});const ie=xt.toFiniteNumber(D.headers.get("content-length")),[fe,Z]=p&&yre(ie,JB(Ere(p),!0))||[];D=new Response(Sre(D.body,bre,fe,()=>{Z&&Z(),M&&M()}),J)}E=E||"text";let K=await ZB[xt.findKey(ZB,E)||"text"](D,e);return!V&&M&&M(),await new Promise((J,ie)=>{OAe(J,ie,{data:K,headers:yh.from(D.headers),status:D.status,statusText:D.statusText,config:e,request:P})})}catch(k){throw M&&M(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Zn("Network Error",Zn.ERR_NETWORK,e,P),{cause:k.cause||k}):Zn.from(k,k&&k.code,e,P)}}),f6={http:z3e,xhr:CFe,fetch:DFe};xt.forEach(f6,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Cre=e=>`- ${e}`,xFe=e=>xt.isFunction(e)||e===null||e===!1,kAe={getAdapter:e=>{e=xt.isArray(e)?e:[e];const{length:t}=e;let i,s;const c={};for(let u=0;u<t;u++){i=e[u];let f;if(s=i,!xFe(i)&&(s=f6[(f=String(i)).toLowerCase()],s===void 0))throw new Zn(`Unknown adapter '${f}'`);if(s)break;c[f||"#"+u]=s}if(!s){const u=Object.entries(c).map(([p,m])=>`adapter ${p} `+(m===!1?"is not supported by the environment":"is not available in the build"));let f=t?u.length>1?`since :
`+u.map(Cre).join(`
`):" "+Cre(u[0]):"as no adapter specified";throw new Zn("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return s},adapters:f6};function n4(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Dw(null,e)}function Tre(e){return n4(e),e.headers=yh.from(e.headers),e.data=r4.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kAe.getAdapter(e.adapter||OQ.adapter)(e).then(function(s){return n4(e),s.data=r4.call(e,e.transformResponse,s),s.headers=yh.from(s.headers),s},function(s){return IAe(s)||(n4(e),s&&s.response&&(s.response.data=r4.call(e,e.transformResponse,s.response),s.response.headers=yh.from(s.response.headers))),Promise.reject(s)})}const DAe="1.9.0",zP={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zP[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Rre={};zP.transitional=function(t,i,s){function c(u,f){return"[Axios v"+DAe+"] Transitional option '"+u+"'"+f+(s?". "+s:"")}return(u,f,p)=>{if(t===!1)throw new Zn(c(f," has been removed"+(i?" in "+i:"")),Zn.ERR_DEPRECATED);return i&&!Rre[f]&&(Rre[f]=!0,console.warn(c(f," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(u,f,p):!0}};zP.spelling=function(t){return(i,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function UFe(e,t,i){if(typeof e!="object")throw new Zn("options must be an object",Zn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let c=s.length;for(;c-- >0;){const u=s[c],f=t[u];if(f){const p=e[u],m=p===void 0||f(p,u,e);if(m!==!0)throw new Zn("option "+u+" must be "+m,Zn.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Zn("Unknown option "+u,Zn.ERR_BAD_OPTION)}}const jN={assertOptions:UFe,validators:zP},kp=jN.validators;class eL{constructor(t){this.defaults=t||{},this.interceptors={request:new vre,response:new vre}}async request(t,i){try{return await this._request(t,i)}catch(s){if(s instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const u=c.stack?c.stack.replace(/^.+\n/,""):"";try{s.stack?u&&!String(s.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+u):s.stack=u}catch{}}throw s}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=s_(this.defaults,i);const{transitional:s,paramsSerializer:c,headers:u}=i;s!==void 0&&jN.assertOptions(s,{silentJSONParsing:kp.transitional(kp.boolean),forcedJSONParsing:kp.transitional(kp.boolean),clarifyTimeoutError:kp.transitional(kp.boolean)},!1),c!=null&&(xt.isFunction(c)?i.paramsSerializer={serialize:c}:jN.assertOptions(c,{encode:kp.function,serialize:kp.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),jN.assertOptions(i,{baseUrl:kp.spelling("baseURL"),withXsrfToken:kp.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let f=u&&xt.merge(u.common,u[i.method]);u&&xt.forEach(["delete","get","head","post","put","patch","common"],P=>{delete u[P]}),i.headers=yh.concat(f,u);const p=[];let m=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(i)===!1||(m=m&&M.synchronous,p.unshift(M.fulfilled,M.rejected))});const E=[];this.interceptors.response.forEach(function(M){E.push(M.fulfilled,M.rejected)});let w,T=0,N;if(!m){const P=[Tre.bind(this),void 0];for(P.unshift.apply(P,p),P.push.apply(P,E),N=P.length,w=Promise.resolve(i);T<N;)w=w.then(P[T++],P[T++]);return w}N=p.length;let O=i;for(T=0;T<N;){const P=p[T++],M=p[T++];try{O=P(O)}catch(Q){M.call(this,Q);break}}try{w=Tre.call(this,O)}catch(P){return Promise.reject(P)}for(T=0,N=E.length;T<N;)w=w.then(E[T++],E[T++]);return w}getUri(t){t=s_(this.defaults,t);const i=NAe(t.baseURL,t.url,t.allowAbsoluteUrls);return CAe(i,t.params,t.paramsSerializer)}}xt.forEach(["delete","get","head","options"],function(t){eL.prototype[t]=function(i,s){return this.request(s_(s||{},{method:t,url:i,data:(s||{}).data}))}});xt.forEach(["post","put","patch"],function(t){function i(s){return function(u,f,p){return this.request(s_(p||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}eL.prototype[t]=i(),eL.prototype[t+"Form"]=i(!0)});const KN=eL;class NQ{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const s=this;this.promise.then(c=>{if(!s._listeners)return;let u=s._listeners.length;for(;u-- >0;)s._listeners[u](c);s._listeners=null}),this.promise.then=c=>{let u;const f=new Promise(p=>{s.subscribe(p),u=p}).then(c);return f.cancel=function(){s.unsubscribe(u)},f},t(function(u,f,p){s.reason||(s.reason=new Dw(u,f,p),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const t=new AbortController,i=s=>{t.abort(s)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new NQ(function(c){t=c}),cancel:t}}}const MFe=NQ;function FFe(e){return function(i){return e.apply(null,i)}}function VFe(e){return xt.isObject(e)&&e.isAxiosError===!0}const h6={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(h6).forEach(([e,t])=>{h6[t]=e});const QFe=h6;function xAe(e){const t=new KN(e),i=fAe(KN.prototype.request,t);return xt.extend(i,KN.prototype,t,{allOwnKeys:!0}),xt.extend(i,t,null,{allOwnKeys:!0}),i.create=function(c){return xAe(s_(e,c))},i}const Ga=xAe(OQ);Ga.Axios=KN;Ga.CanceledError=Dw;Ga.CancelToken=MFe;Ga.isCancel=IAe;Ga.VERSION=DAe;Ga.toFormData=WP;Ga.AxiosError=Zn;Ga.Cancel=Ga.CanceledError;Ga.all=function(t){return Promise.all(t)};Ga.spread=FFe;Ga.isAxiosError=VFe;Ga.mergeConfig=s_;Ga.AxiosHeaders=yh;Ga.formToJSON=e=>RAe(xt.isHTMLForm(e)?new FormData(e):e);Ga.getAdapter=kAe.getAdapter;Ga.HttpStatusCode=QFe;Ga.default=Ga;const qA=Ga,Ch="https://collab-g94w.onrender.com",HFe=async e=>{try{return(await qA.post(`${Ch}/signup`,e)).data}catch(t){throw console.error("Error registering user:",t),t}},jFe=async e=>{try{return(await qA.post(`${Ch}/login`,e)).data}catch(t){throw console.error("Error while login as user:",t),t}},KFe=async e=>{try{return(await qA.get(`${Ch}/user/getUsersOfSystem/${e}`)).data}catch(t){throw console.error("Error fetching data:",t),t}},WFe=async(e,t)=>{try{return(await qA.post(`${Ch}/reset-password/${e}`,t)).data}catch(i){throw console.error("Error fetching data:",i),i}},GFe=async e=>{try{return(await qA.get(`${Ch}/room/getRoomsForUser/${e}`)).data}catch(t){throw console.error("Error fetching data:",t),t}},$Fe=async e=>{try{return(await qA.post(`${Ch}/room/createRoomWithMembers`,e)).data}catch(t){throw console.error("Error fetching data:",t),t}},zFe=async e=>{try{return console.log("join"),(await qA.post(`${Ch}/room/joinRoom`,e)).data}catch(t){throw console.error("Error fetching data:",t),t}},qFe=async e=>{try{return(await qA.delete(`${Ch}/room/${e}`)).data}catch(t){throw console.error("Error fetching data:",t),t}},YFe=async e=>{try{return(await qA.get(`${Ch}/user/${e}`)).data}catch(t){throw console.error("Error fetching data:",t),t}},XFe=async e=>{try{return(await qA.get(`${Ch}/room/${e}`)).data}catch(t){throw console.error("Error fetching board data:",t),t}},JFe=async e=>{try{return(await qA.get(`${Ch}/room/${e}/messages`)).data}catch(t){throw console.error("Error fetching data:",t),t}},Ire=()=>{const e=he.useRef(null),[t,i]=he.useState(!1),[s,c]=he.useState(""),u=v0(),f=()=>{i(!1)},p=async m=>{m.preventDefault();const E=new FormData(m.currentTarget),w={email:E.get("email"),password:E.get("password")};try{const T=await jFe(w);console.log(T),c("User loggedIn successfully!"),i(!0),e.current.reset(),localStorage.setItem("token",T.token),localStorage.setItem("userId",T.userId),localStorage.setItem("username",T.username),localStorage.setItem("fullname",T.fullname),u("/rooms")}catch(T){console.log(`error while logging in user : ${T}`),c("Incorrect username or password!"),i(!0)}};return oe.jsxs(Wue,{component:"main",maxWidth:"xs",children:[oe.jsx($ue,{}),oe.jsxs(Xi,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[oe.jsx(XB,{sx:{m:1,bgcolor:"secondary.main"},children:oe.jsx(dAe,{})}),oe.jsx(Gn,{component:"h1",variant:"h5",children:"Sign in"}),oe.jsxs(Xi,{component:"form",ref:e,onSubmit:p,noValidate:!0,sx:{mt:1},children:[oe.jsx(Ml,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),oe.jsx(Ml,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),oe.jsx(cMe,{control:oe.jsx(Y5e,{value:"remember",color:"primary"}),label:"Remember me"}),oe.jsx(Ko,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),oe.jsx(bn,{container:!0,children:oe.jsxs(bn,{item:!0,display:"flex",children:[oe.jsxs(Gn,{children:["Don't have an account?"," "]}),oe.jsx(aT,{to:"/registration",variant:"body2",children:"SignUp"})]})})]})]}),oe.jsx(jT,{open:t,autoHideDuration:5e3,onClose:f,message:s,anchorOrigin:{vertical:"bottom",horizontal:"right"}})]})},ZFe=PP(),e6e=()=>{const e=he.useRef(null),[t,i]=he.useState(!1),[s,c]=he.useState(""),u=()=>{i(!1)},f=async p=>{p.preventDefault();const m=new FormData(p.currentTarget);console.log(m);const E={firstName:m.get("firstName"),lastName:m.get("lastName"),username:m.get("username"),email:m.get("email"),password:m.get("password"),role:"USER"};try{const w=await HFe(E);console.log(w),c("User registered successfully!, please continue with Login"),i(!0),e.current.reset()}catch(w){console.log(`error while registering user : ${w}`),c("Error while registering user!!"),i(!0)}};return oe.jsx(FPe,{theme:ZFe,children:oe.jsxs(Wue,{component:"main",maxWidth:"xs",children:[oe.jsx($ue,{}),oe.jsxs(Xi,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[oe.jsx(XB,{sx:{m:1,bgcolor:"secondary.main"},children:oe.jsx(dAe,{})}),oe.jsx(Gn,{component:"h1",variant:"h5",children:"Sign up"}),oe.jsxs(Xi,{component:"form",ref:e,noValidate:!0,onSubmit:f,sx:{mt:3},children:[oe.jsxs(bn,{container:!0,spacing:2,children:[oe.jsx(bn,{item:!0,xs:12,sm:6,minWidth:"25vw",children:oe.jsx(Ml,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),oe.jsx(bn,{item:!0,xs:12,sm:6,minWidth:"25vw",children:oe.jsx(Ml,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name"})}),oe.jsx(bn,{item:!0,xs:12,minWidth:"25vw",children:oe.jsx(Ml,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),oe.jsx(bn,{item:!0,xs:12,minWidth:"25vw",children:oe.jsx(Ml,{required:!0,fullWidth:!0,name:"username",label:"Username",type:"text",id:"username"})}),oe.jsx(bn,{item:!0,xs:12,minWidth:"25vw",children:oe.jsx(Ml,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})})]}),oe.jsx(Ko,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),oe.jsx(bn,{container:!0,justifyContent:"flex-end",children:oe.jsxs(bn,{item:!0,display:"flex",children:[oe.jsx(Gn,{children:"Already have an account?"}),oe.jsx(aT,{to:"/login",variant:"body2",children:"LogIn"})]})})]})]}),oe.jsx(jT,{open:t,autoHideDuration:5e3,onClose:u,message:s,anchorOrigin:{vertical:"bottom",horizontal:"right"}})]})})},t6e=()=>oe.jsx(Xi,{sx:{flexGrow:1},children:oe.jsx(aQ,{position:"static",children:oe.jsxs(bQ,{children:[oe.jsx(Gn,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Collab"}),oe.jsx(Ko,{color:"inherit",component:aT,to:"/login",style:{textDecoration:"none",color:"inherit"},children:"Login"}),oe.jsx(Ko,{color:"inherit",component:aT,to:"/registration",style:{textDecoration:"none",color:"inherit"},children:"Registration"})]})})}),r6e=Go(oe.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),n6e=Go(oe.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),i6e=Go(oe.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"})),o6e=Go(oe.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),BQ=Go(oe.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),s6e=({open:e,handleClose:t,roomId:i,roomName:s,roomDescription:c})=>{const[u,f]=he.useState("Copy Room ID"),p=()=>{navigator.clipboard.writeText(i),f("Copied!"),setTimeout(()=>{f("Copy Room ID")},1e3)};return oe.jsxs(mQ,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[oe.jsx(_Q,{color:"primary",children:oe.jsx(Gn,{variant:"h4",sx:{fontWeight:"bold"},children:"Share Room"})}),oe.jsx(vQ,{children:oe.jsxs(SQ,{spacing:2,sx:{pt:1},children:[oe.jsx(Ml,{label:"Room Name",value:s||"",fullWidth:!0,InputProps:{readOnly:!0}}),oe.jsx(Ml,{label:"Description",value:c||"",multiline:!0,fullWidth:!0,InputProps:{readOnly:!0}}),oe.jsxs(Xi,{display:"flex",alignItems:"center",children:[oe.jsx(Ml,{label:"Room ID",value:i,fullWidth:!0,InputProps:{readOnly:!0}}),oe.jsx(J4e,{title:u,children:oe.jsx(pT,{onClick:p,sx:{ml:1},children:oe.jsx(o6e,{})})})]}),oe.jsx(Xi,{display:"flex",justifyContent:"flex-end",mt:1,children:oe.jsx(Ko,{variant:"contained",startIcon:oe.jsx(BQ,{}),onClick:t,children:"Back"})})]})})]})},tL=({open:e,title:t,content:i,onConfirm:s,onClose:c})=>oe.jsxs(mQ,{open:e,onClose:c,children:[oe.jsx(_Q,{children:oe.jsx(Gn,{variant:"body1",children:t})}),oe.jsx(vQ,{children:oe.jsx(Gn,{variant:"body2",children:i})}),oe.jsxs(Xue,{children:[oe.jsx(Ko,{onClick:c,color:"primary",children:oe.jsx(Gn,{variant:"button",children:"Cancel"})}),oe.jsx(Ko,{onClick:s,color:"primary",variant:"contained",autoFocus:!0,children:oe.jsx(Gn,{variant:"button",children:"Yes"})})]})]}),a6e=({roomId:e,roomTitle:t,name:i,description:s,role:c,memberCnt:u,lastAccessedAt:f})=>{const p=v0(),[m,E]=he.useState(!1),[w,T]=he.useState(!1),[N,O]=he.useState(!1),P=()=>{E(!0)},M=()=>{E(!1)},Q=()=>{console.log(`handleOpenRoom called... for ${e}`),O(!0)},k=()=>{console.log("handleOpenRoomConfirm called..."),localStorage.setItem("roomId",e),localStorage.setItem("roomTitle",t),p(`../room/${e}`)},D=()=>{console.log("handleDeleteRoom called..."),T(!0)},V=()=>{console.log("handleDeleteClose called..."),T(!1)},K=async()=>{console.log("handleDeleteRoomConfirm called...");try{const ie=await qFe(e);console.log(ie),window.location.reload(),T(!1)}catch(ie){console.log(`error while deleting room : ${ie}`)}},J=()=>{console.log("handleCloseOpenRoomDialog called..."),O(!1)};return oe.jsxs(bn,{item:!0,xs:4,children:[oe.jsx(r6,{children:oe.jsx(n6,{children:oe.jsxs(bn,{container:!0,children:[oe.jsxs(bn,{container:!0,direction:"column",children:[oe.jsx(bn,{item:!0,xs:6,children:oe.jsx(Gn,{variant:"h6",color:"primary",sx:{fontWeight:"bold"},children:s})}),oe.jsx(bn,{item:!0,xs:12,children:oe.jsxs(Gn,{variant:"body2",className:"mt-5",children:[oe.jsxs(Gn,{variant:"body3",children:[oe.jsx("span",{className:"f-bold",children:"Role: "})," ",c]}),oe.jsxs(Gn,{variant:"body3",children:[oe.jsx("span",{className:"f-bold ml-20",children:"Members: "})," ",u]})]})})]}),oe.jsx(bn,{item:!0,xs:6,children:oe.jsxs(SQ,{direction:"row",spacing:2,children:[(c==="EDITOR"||c==="OWNER")&&oe.jsx(Ko,{variant:"outlined",color:"error",startIcon:oe.jsx(r6e,{}),onClick:D,children:"Delete"}),oe.jsx(Ko,{variant:"outlined",startIcon:oe.jsx(n6e,{}),onClick:Q,children:"Open"}),(c==="EDITOR"||c==="OWNER")&&oe.jsx(Ko,{variant:"outlined",startIcon:oe.jsx(i6e,{}),onClick:P,children:"Share"})]})})]})})}),oe.jsx(s6e,{open:m,handleClose:M,roomId:e,roomDescription:s,roomName:t}),oe.jsx(tL,{open:w,title:"Delete Confirmation",content:"Are you sure you want to delete this item?",onConfirm:K,onClose:V}),oe.jsx(tL,{open:N,title:"Open Room Confirmation",content:"Are you sure you want to open this room?",onConfirm:k,onClose:J})]})},Ore=Go(oe.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),c6e=({canBtnHandler:e})=>{const t=localStorage.getItem("userId"),i=he.useRef(null);v0();const[s,c]=he.useState([]),[u,f]=he.useState(""),[p,m]=he.useState(""),[E,w]=he.useState([]),[T,N]=he.useState(null),[O,P]=he.useState(!1),[M,Q]=he.useState(""),k=()=>{P(!1)};he.useEffect(()=>{(async()=>{try{const pe=await KFe(t);console.log(pe),c(pe.users)}catch(pe){console.log(`error while loading rooms for user : ${pe}`)}})()},[]);const D=Z=>{f(Z.target.value)},V=Z=>{m(Z.target.value)},K=(Z,pe)=>{const Y=s.find(te=>te._id===Z);N({...Y,role:pe})},J=()=>{T&&(w(Z=>[...Z,T]),c(Z=>Z.filter(pe=>pe._id!==T._id)),N(null))},ie=Z=>{const pe=E.find(Y=>Y._id===Z);pe&&(w(Y=>Y.filter(te=>te._id!==Z)),c(Y=>[...Y,pe]))},fe=async Z=>{Z.preventDefault();const pe=[{memberId:t,role:"OWNER"},...E.map(te=>({memberId:te._id,role:te.role}))],Y={roomTitle:u,roomDescription:p,members:pe};console.log(Y);try{const te=await $Fe(Y);console.log(te),Q("Room created successfully!!"),P(!0),f(""),m(""),w([]),setTimeout(()=>{e()},1e3)}catch(te){console.log(`error while creating room : ${te}`),Q("Error while creating room!!"),P(!0)}};return oe.jsxs(oe.Fragment,{children:[oe.jsx(bn,{sx:{padding:"10px"},children:oe.jsx(Gn,{variant:"h5",children:"Create New Room"})}),oe.jsxs(bn,{container:!0,spacing:2,sx:{padding:"20px"},children:[oe.jsxs(bn,{item:!0,xs:6,md:6,children:[oe.jsxs("form",{onSubmit:fe,ref:i,children:[oe.jsx(Ml,{fullWidth:!0,label:"Room Title",variant:"outlined",value:u,onChange:D}),oe.jsx(Ml,{fullWidth:!0,multiline:!0,rows:4,label:"Room Description",variant:"outlined",value:p,onChange:V,sx:{marginTop:2}}),oe.jsx(Ko,{variant:"outlined",color:"error",onClick:e,sx:{marginTop:2},children:"Cancel"}),oe.jsx(Ko,{className:"ml-20",type:"submit",variant:"contained",sx:{marginTop:2,marginLeft:1.5},children:"Create New Room"})]}),oe.jsxs("div",{children:[oe.jsx(Gn,{variant:"h5",style:{marginTop:10,marginBottom:10},children:"Added Members"}),oe.jsx(Zd,{elevation:3,style:{padding:"20px",marginTop:"10px"},children:E.map(Z=>oe.jsx(r6,{variant:"outlined",style:{marginBottom:"10px"},children:oe.jsx(n6,{children:oe.jsxs(bn,{container:!0,alignItems:"center",children:[oe.jsx(bn,{item:!0,children:oe.jsx(XB,{style:{backgroundColor:"#3f51b5",marginRight:"10px"},children:Z.firstName&&Z.firstName[0]?Z.firstName[0]:oe.jsx(Ore,{})})}),oe.jsxs(bn,{item:!0,children:[oe.jsx(Gn,{variant:"h6",component:"div",children:Z.firstName&&Z.lastName?`${Z.firstName} ${Z.lastName}`:"Unknown User"}),oe.jsx(Gn,{variant:"body2",color:"textSecondary",children:Z.email||"No email available"})]}),oe.jsx(bn,{item:!0,style:{marginLeft:30},children:oe.jsxs(Gn,{variant:"body2",color:"textSecondary",children:["Role: ",Z.role]})}),oe.jsx(bn,{item:!0,style:{marginLeft:30},children:oe.jsx(Ko,{variant:"contained",color:"error",onClick:()=>ie(Z._id),children:"Remove Member"})})]})})},Z._id))})]})]}),oe.jsx(bn,{item:!0,xs:6,md:6,children:oe.jsxs("div",{children:[oe.jsx(Gn,{variant:"h5",gutterBottom:!0,children:"All Users"}),oe.jsx(Zd,{elevation:3,style:{padding:"20px",marginBottom:"20px"},children:s.map(Z=>oe.jsx(r6,{variant:"outlined",style:{marginBottom:"10px"},children:oe.jsx(n6,{children:oe.jsxs(bn,{container:!0,alignItems:"center",children:[oe.jsx(bn,{item:!0,children:oe.jsx(XB,{style:{backgroundColor:"#3f51b5",marginRight:"10px"},children:Z.firstName&&Z.firstName[0]?Z.firstName[0]:oe.jsx(Ore,{})})}),oe.jsxs(bn,{item:!0,children:[oe.jsx(Gn,{variant:"h6",component:"div",children:Z.firstName&&Z.lastName?`${Z.firstName} ${Z.lastName}`:"Unknown User"}),oe.jsx(Gn,{variant:"body2",color:"textSecondary",children:Z.email||"No email available"})]}),oe.jsx(bn,{item:!0,style:{marginLeft:30},children:oe.jsxs(AAe,{value:T&&T._id===Z._id?T.role:"",onChange:pe=>K(Z._id,pe.target.value),variant:"outlined",children:[oe.jsx(c6,{value:"EDITOR",children:"Editor"}),oe.jsx(c6,{value:"VIEWER",children:"Viewer"})]})}),oe.jsx(bn,{item:!0,style:{marginLeft:30},children:oe.jsx(Ko,{variant:"contained",onClick:J,children:"Add Member"})})]})})},Z._id))})]})})]}),oe.jsx(jT,{open:O,autoHideDuration:5e3,onClose:k,message:M,anchorOrigin:{vertical:"bottom",horizontal:"right"}})]})},l6e=Go(oe.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),u6e=Go(oe.jsx("path",{d:"M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66M9.78 12h4.44c1.21 0 2.14-1.06 1.98-2.26l-.32-2.45C15.57 5.39 13.92 4 12 4S8.43 5.39 8.12 7.29L7.8 9.74c-.16 1.2.77 2.26 1.98 2.26"})),A6e=Go(oe.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),UAe=({isProfilePage:e})=>{const t=localStorage.getItem("fullname"),i=v0(),[s,c]=he.useState(null),[u,f]=he.useState(!1),p=[{title:"profile",icon:oe.jsx(u6e,{}),path:"/profile"},{title:"logout",icon:oe.jsx(A6e,{}),action:()=>w()}],m=O=>{c(O.currentTarget)},E=()=>{c(null)},w=()=>{console.log("Logout clicked"),f(!0)},T=()=>{console.log("handleLogoutConfirm called"),f(!1),localStorage.clear(),i("/login")},N=()=>{console.log("handleLogoutDialogClose called"),f(!1)};return oe.jsxs(oe.Fragment,{children:[oe.jsx(aQ,{position:"static",children:oe.jsxs(bQ,{children:[oe.jsx(Gn,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Collab"}),!e&&oe.jsxs(oe.Fragment,{children:[oe.jsx(Gn,{children:t}),oe.jsx(pT,{onClick:m,color:"inherit",children:oe.jsx(l6e,{})})]}),oe.jsx(iAe,{anchorEl:s,open:!!s,onClose:E,children:p.map((O,P)=>oe.jsx(c6,{sx:{padding:2},onClick:O.action||E,children:O.path?oe.jsxs(aT,{to:O.path,style:{textDecoration:"none",color:"inherit"},children:[O.icon," ",O.title]}):oe.jsxs(oe.Fragment,{children:[O.icon," ",O.title]})},P))})]})}),oe.jsx(tL,{open:u,title:"Logout Confirmation",content:"Are you sure you want to logout?",onConfirm:T,onClose:N})]})},d6e=({canBtnHandler:e})=>{const[t,i]=he.useState(""),[s,c]=he.useState(""),[u,f]=he.useState(!1),[p,m]=he.useState(""),E=localStorage.getItem("userId");v0();const w=()=>{f(!1)},T=async()=>{const N={roomId:t,userId:E,role:"EDITOR"};console.log(N);try{const O=await zFe(N);console.log(O),m("Joined Room successfully!!"),f(!0),e()}catch(O){console.log(`error while Joining room : ${O}`),m("Error while Joining room!!"),f(!0)}};return oe.jsxs(oe.Fragment,{children:[oe.jsx(Xi,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:oe.jsxs(Zd,{elevation:4,sx:{p:5,minWidth:400,borderRadius:3},children:[oe.jsx(Gn,{variant:"h5",gutterBottom:!0,children:"Join Room"}),oe.jsx(Ml,{fullWidth:!0,label:"Room ID",variant:"outlined",value:t,onChange:N=>i(N.target.value),sx:{mt:2}}),s&&oe.jsx(nDe,{severity:"error",sx:{mt:2},children:s}),oe.jsxs(SQ,{spacing:2,direction:"column",sx:{mt:3},children:[oe.jsx(Ko,{variant:"contained",color:"primary",disabled:!t,fullWidth:!0,onClick:T,children:"Join Room"}),oe.jsx(Ko,{variant:"contained",fullWidth:!0,onClick:e,children:"Cancel"})]})]})}),oe.jsx(jT,{open:u,autoHideDuration:5e3,onClose:w,message:p,anchorOrigin:{vertical:"bottom",horizontal:"right"}})]})},f6e=()=>{const e=localStorage.getItem("userId"),[t,i]=he.useState(!1),[s,c]=he.useState(!1),[u,f]=he.useState([]);he.useEffect(()=>{(async()=>{try{const w=await GFe(e);console.log(w),f(w.respRoom||[])}catch(w){console.log(`error while loading rooms for user : ${w}`)}})()},[s,t]);function p(){i(!t)}function m(){c(!s)}return oe.jsxs("div",{children:[oe.jsx(UAe,{}),oe.jsxs(Xi,{sx:{padding:"20px"},children:[oe.jsxs(Xi,{display:"flex",justifyContent:"center",children:[!t&&!s&&oe.jsx(Xi,{sx:{marginBottom:"20px",textAlign:"center",pr:1},children:oe.jsx(Ko,{variant:"contained",onClick:p,children:"Create New Room"})}),!s&&!t&&oe.jsx(Xi,{sx:{marginBottom:"20px",textAlign:"center",pl:1},children:oe.jsx(Ko,{variant:"contained",onClick:m,sx:{pl:6,pr:6},children:"Join Room"})})]}),!t&&!s&&u.length>0&&oe.jsx(bn,{container:!0,spacing:3,pt:3,children:u.map(E=>oe.jsx(bn,{item:!0,xs:12,sm:6,md:4,lg:3,children:oe.jsx(Xi,{sx:{border:"1px solid #e0e0e0",borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.02)"},backgroundColor:"#fff"},children:oe.jsx(Xi,{sx:{padding:"16px",display:"flex",flexDirection:"column",height:"100%"},children:oe.jsx(a6e,{roomId:E._id,roomTitle:E.roomTitle,description:E.roomDescription,role:E.role,memberCnt:E.members.length,lastAccessedAt:E.lastAccessedAt})})})},E._id))}),!t&&u.length===0&&oe.jsx(Xi,{sx:{textAlign:"center",padding:"40px 20px",color:"text.secondary"},children:oe.jsx("p",{children:"No rooms found. Create your first room to get started!"})}),t&&oe.jsx(Xi,{children:oe.jsx(c6e,{canBtnHandler:p})}),s&&oe.jsx(Xi,{children:oe.jsx(d6e,{canBtnHandler:m})})]})]})},h6e=Go(oe.jsx("path",{d:"m18.85 10.39 1.06-1.06c.78-.78.78-2.05 0-2.83L18.5 5.09c-.78-.78-2.05-.78-2.83 0l-1.06 1.06zm-5.66-2.83L4 16.76V21h4.24l9.19-9.19zM19 17.5c0 2.19-2.54 3.5-5 3.5-.55 0-1-.45-1-1s.45-1 1-1c1.54 0 3-.73 3-1.5 0-.47-.48-.87-1.23-1.2l1.48-1.48c1.07.63 1.75 1.47 1.75 2.68M4.58 13.35C3.61 12.79 3 12.06 3 11c0-1.8 1.89-2.63 3.56-3.36C7.59 7.18 9 6.56 9 6c0-.41-.78-1-2-1-1.26 0-1.8.61-1.83.64-.35.41-.98.46-1.4.12-.41-.34-.49-.95-.15-1.38C3.73 4.24 4.76 3 7 3s4 1.32 4 3c0 1.87-1.93 2.72-3.64 3.47C6.42 9.88 5 10.5 5 11c0 .31.43.6 1.07.86z"})),p6e=Go(oe.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"})),g6e=Go(oe.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),m6e=Go(oe.jsx("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}));var MAe={exports:{}},FAe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT=he;function v6e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _6e=typeof Object.is=="function"?Object.is:v6e,y6e=WT.useSyncExternalStore,E6e=WT.useRef,w6e=WT.useEffect,S6e=WT.useMemo,b6e=WT.useDebugValue;FAe.useSyncExternalStoreWithSelector=function(e,t,i,s,c){var u=E6e(null);if(u.current===null){var f={hasValue:!1,value:null};u.current=f}else f=u.current;u=S6e(function(){function m(O){if(!E){if(E=!0,w=O,O=s(O),c!==void 0&&f.hasValue){var P=f.value;if(c(P,O))return T=P}return T=O}if(P=T,_6e(w,O))return P;var M=s(O);return c!==void 0&&c(P,M)?(w=O,P):(w=O,T=M)}var E=!1,w,T,N=i===void 0?null:i;return[function(){return m(t())},N===null?void 0:function(){return m(N())}]},[t,i,s,c]);var p=y6e(e,u[0],u[1]);return w6e(function(){f.hasValue=!0,f.value=p},[p]),b6e(p),p};MAe.exports=FAe;var C6e=MAe.exports;function T6e(e){e()}function R6e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){T6e(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){const i=[];let s=e;for(;s;)i.push(s),s=s.next;return i},subscribe(i){let s=!0;const c=t={callback:i,next:null,prev:t};return c.prev?c.prev.next=c:e=c,function(){!s||e===null||(s=!1,c.next?c.next.prev=c.prev:t=c.prev,c.prev?c.prev.next=c.next:e=c.next)}}}}var Nre={notify(){},get:()=>[]};function I6e(e,t){let i,s=Nre,c=0,u=!1;function f(M){w();const Q=s.subscribe(M);let k=!1;return()=>{k||(k=!0,Q(),T())}}function p(){s.notify()}function m(){P.onStateChange&&P.onStateChange()}function E(){return u}function w(){c++,i||(i=t?t.addNestedSub(m):e.subscribe(m),s=R6e())}function T(){c--,i&&c===0&&(i(),i=void 0,s.clear(),s=Nre)}function N(){u||(u=!0,w())}function O(){u&&(u=!1,T())}const P={addNestedSub:f,notifyNestedSubs:p,handleChangeWrapper:m,isSubscribed:E,trySubscribe:N,tryUnsubscribe:O,getListeners:()=>s};return P}var O6e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N6e=O6e(),B6e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",L6e=B6e(),P6e=()=>N6e||L6e?he.useLayoutEffect:he.useEffect,k6e=P6e(),i4=Symbol.for("react-redux-context"),o4=typeof globalThis<"u"?globalThis:{};function D6e(){if(!he.createContext)return{};const e=o4[i4]??(o4[i4]=new Map);let t=e.get(he.createContext);return t||(t=he.createContext(null),e.set(he.createContext,t)),t}var c0=D6e();function x6e(e){const{children:t,context:i,serverState:s,store:c}=e,u=he.useMemo(()=>{const m=I6e(c);return{store:c,subscription:m,getServerState:s?()=>s:void 0}},[c,s]),f=he.useMemo(()=>c.getState(),[c]);k6e(()=>{const{subscription:m}=u;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),f!==c.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[u,f]);const p=i||c0;return he.createElement(p.Provider,{value:u},t)}var U6e=x6e;function LQ(e=c0){return function(){return he.useContext(e)}}var VAe=LQ();function QAe(e=c0){const t=e===c0?VAe:LQ(e),i=()=>{const{store:s}=t();return s};return Object.assign(i,{withTypes:()=>i}),i}var M6e=QAe();function F6e(e=c0){const t=e===c0?M6e:QAe(e),i=()=>t().dispatch;return Object.assign(i,{withTypes:()=>i}),i}var HAe=F6e(),V6e=(e,t)=>e===t;function Q6e(e=c0){const t=e===c0?VAe:LQ(e),i=(s,c={})=>{const{equalityFn:u=V6e}=typeof c=="function"?{equalityFn:c}:c,f=t(),{store:p,subscription:m,getServerState:E}=f;he.useRef(!0);const w=he.useCallback({[s.name](N){return s(N)}}[s.name],[s]),T=C6e.useSyncExternalStoreWithSelector(m.addNestedSub,p.getState,E||p.getState,w,u);return he.useDebugValue(T),T};return Object.assign(i,{withTypes:()=>i}),i}var l0=Q6e();const H6e=Go(oe.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),j6e=Go(oe.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),K6e=Go(oe.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}));var jAe={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(Kd,function(){function i(r,n){return n.forEach(function(o){o&&typeof o!="string"&&!Array.isArray(o)&&Object.keys(o).forEach(function(a){if(a!=="default"&&!(a in r)){var l=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:function(){return o[a]}})}})}),Object.freeze(r)}var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Kd<"u"?Kd:typeof self<"u"?self:{};function c(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var u=function(r){try{return!!r()}catch{return!0}},f=!u(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),p=f,m=Function.prototype,E=m.call,w=p&&m.bind.bind(E,E),T=p?w:function(r){return function(){return E.apply(r,arguments)}},N=T({}.isPrototypeOf),O=function(r){return r&&r.Math===Math&&r},P=O(typeof globalThis=="object"&&globalThis)||O(typeof window=="object"&&window)||O(typeof self=="object"&&self)||O(typeof s=="object"&&s)||O(typeof s=="object"&&s)||function(){return this}()||Function("return this")(),M=f,Q=Function.prototype,k=Q.apply,D=Q.call,V=typeof Reflect=="object"&&Reflect.apply||(M?D.bind(k):function(){return D.apply(k,arguments)}),K=T,J=K({}.toString),ie=K("".slice),fe=function(r){return ie(J(r),8,-1)},Z=fe,pe=T,Y=function(r){if(Z(r)==="Function")return pe(r)},te=typeof document=="object"&&document.all,le=te===void 0&&te!==void 0?function(r){return typeof r=="function"||r===te}:function(r){return typeof r=="function"},ae={},ge=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),se=f,xe=Function.prototype.call,Me=se?xe.bind(xe):function(){return xe.apply(xe,arguments)},Be={},ke={}.propertyIsEnumerable,Ke=Object.getOwnPropertyDescriptor,ht=Ke&&!ke.call({1:2},1);Be.f=ht?function(r){var n=Ke(this,r);return!!n&&n.enumerable}:ke;var ve,Oe,Ue=function(r,n){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:n}},Fe=u,Qe=fe,We=Object,et=T("".split),Ze=Fe(function(){return!We("z").propertyIsEnumerable(0)})?function(r){return Qe(r)==="String"?et(r,""):We(r)}:We,pt=function(r){return r==null},at=pt,Rt=TypeError,Ot=function(r){if(at(r))throw new Rt("Can't call method on "+r);return r},Ft=Ze,lt=Ot,He=function(r){return Ft(lt(r))},vr=le,qt=function(r){return typeof r=="object"?r!==null:vr(r)},Nt={},It=Nt,Yt=P,Bt=le,_r=function(r){return Bt(r)?r:void 0},ar=function(r,n){return arguments.length<2?_r(It[r])||_r(Yt[r]):It[r]&&It[r][n]||Yt[r]&&Yt[r][n]},zr=P.navigator,Xr=zr&&zr.userAgent,Kt=Xr?String(Xr):"",yr=P,nr=Kt,er=yr.process,vt=yr.Deno,tn=er&&er.versions||vt&&vt.version,Rr=tn&&tn.v8;Rr&&(Oe=(ve=Rr.split("."))[0]>0&&ve[0]<4?1:+(ve[0]+ve[1])),!Oe&&nr&&(!(ve=nr.match(/Edge\/(\d+)/))||ve[1]>=74)&&(ve=nr.match(/Chrome\/(\d+)/))&&(Oe=+ve[1]);var on=Oe,sr=on,Mr=u,Tr=P.String,rn=!!Object.getOwnPropertySymbols&&!Mr(function(){var r=Symbol("symbol detection");return!Tr(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&sr&&sr<41}),Sr=rn&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ai=ar,Ei=le,ti=N,dn=Object,Qr=Sr?function(r){return typeof r=="symbol"}:function(r){var n=ai("Symbol");return Ei(n)&&ti(n.prototype,dn(r))},yn=String,wi=function(r){try{return yn(r)}catch{return"Object"}},br=le,Pi=wi,ki=TypeError,kr=function(r){if(br(r))return r;throw new ki(Pi(r)+" is not a function")},$a=kr,ls=pt,_s=function(r,n){var o=r[n];return ls(o)?void 0:$a(o)},ro=Me,uo=le,ys=qt,Uc=TypeError,Zo={exports:{}},Es=P,hc=Object.defineProperty,es=P,ul=function(r,n){try{hc(Es,r,{value:n,configurable:!0,writable:!0})}catch{Es[r]=n}return n},js="__core-js_shared__",ts=Zo.exports=es[js]||ul(js,{});(ts.versions||(ts.versions=[])).push({version:"3.42.0",mode:"pure",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"});var ws=Zo.exports,Mc=ws,Oa=function(r,n){return Mc[r]||(Mc[r]=n||{})},Kl=Ot,Fc=Object,Ks=function(r){return Fc(Kl(r))},Al=Ks,sf=T({}.hasOwnProperty),Di=Object.hasOwn||function(r,n){return sf(Al(r),n)},no=T,Hr=0,Vc=Math.random(),af=no(1 .toString),Ws=function(r){return"Symbol("+(r===void 0?"":r)+")_"+af(++Hr+Vc,36)},Ce=Oa,Ge=Di,Ut=Ws,Wt=rn,Tt=Sr,lr=P.Symbol,ri=Ce("wks"),Lo=Tt?lr.for||lr:lr&&lr.withoutSetter||Ut,Bn=function(r){return Ge(ri,r)||(ri[r]=Wt&&Ge(lr,r)?lr[r]:Lo("Symbol."+r)),ri[r]},Na=Me,JA=qt,qr=Qr,sg=_s,ag=function(r,n){var o,a;if(n==="string"&&uo(o=r.toString)&&!ys(a=ro(o,r))||uo(o=r.valueOf)&&!ys(a=ro(o,r))||n!=="string"&&uo(o=r.toString)&&!ys(a=ro(o,r)))return a;throw new Uc("Can't convert object to primitive value")},Bh=TypeError,Qc=Bn("toPrimitive"),Em=function(r,n){if(!JA(r)||qr(r))return r;var o,a=sg(r,Qc);if(a){if(n===void 0&&(n="default"),o=Na(a,r,n),!JA(o)||qr(o))return o;throw new Bh("Can't convert object to primitive value")}return n===void 0&&(n="number"),ag(r,n)},cg=Qr,eA=function(r){var n=Em(r,"string");return cg(n)?n:n+""},ZA=qt,Lh=P.document,lg=ZA(Lh)&&ZA(Lh.createElement),Ph=function(r){return lg?Lh.createElement(r):{}},lu=Ph,ed=!ge&&!u(function(){return Object.defineProperty(lu("div"),"a",{get:function(){return 7}}).a!==7}),cf=ge,wm=Me,Ba=Be,Sm=Ue,dl=He,Cn=eA,S0=Di,kh=ed,za=Object.getOwnPropertyDescriptor;ae.f=cf?za:function(r,n){if(r=dl(r),n=Cn(n),kh)try{return za(r,n)}catch{}if(S0(r,n))return Sm(!wm(Ba.f,r,n),r[n])};var bm=u,Cm=le,Dh=/#|\.prototype\./,tA=function(r,n){var o=Tm[ug(r)];return o===xh||o!==b0&&(Cm(n)?bm(n):!!n)},ug=tA.normalize=function(r){return String(r).replace(Dh,".").toLowerCase()},Tm=tA.data={},b0=tA.NATIVE="N",xh=tA.POLYFILL="P",rA=tA,Wl=kr,Uh=f,nA=Y(Y.bind),Hc=function(r,n){return Wl(r),n===void 0?r:Uh?nA(r,n):function(){return r.apply(n,arguments)}},Gs={},td=ge&&u(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Rm=qt,Ag=String,pc=TypeError,wo=function(r){if(Rm(r))return r;throw new pc(Ag(r)+" is not an object")},iA=ge,dg=ed,oA=td,rs=wo,rd=eA,qa=TypeError,nd=Object.defineProperty,id=Object.getOwnPropertyDescriptor,uu="enumerable",lf="configurable",uf="writable";Gs.f=iA?oA?function(r,n,o){if(rs(r),n=rd(n),rs(o),typeof r=="function"&&n==="prototype"&&"value"in o&&uf in o&&!o[uf]){var a=id(r,n);a&&a[uf]&&(r[n]=o.value,o={configurable:lf in o?o[lf]:a[lf],enumerable:uu in o?o[uu]:a[uu],writable:!1})}return nd(r,n,o)}:nd:function(r,n,o){if(rs(r),n=rd(n),rs(o),dg)try{return nd(r,n,o)}catch{}if("get"in o||"set"in o)throw new qa("Accessors not supported");return"value"in o&&(r[n]=o.value),r};var Im=Gs,Mh=Ue,fl=ge?function(r,n,o){return Im.f(r,n,Mh(1,o))}:function(r,n,o){return r[n]=o,r},Au=P,Om=V,C0=Y,Fh=le,Af=ae.f,Vh=rA,jc=Nt,Qh=Hc,j=fl,we=Di,$e=function(r){var n=function(o,a,l){if(this instanceof n){switch(arguments.length){case 0:return new r;case 1:return new r(o);case 2:return new r(o,a)}return new r(o,a,l)}return Om(r,this,arguments)};return n.prototype=r.prototype,n},Ye=function(r,n){var o,a,l,d,h,v,_,y,C,B=r.target,L=r.global,x=r.stat,X=r.proto,G=L?Au:x?Au[B]:Au[B]&&Au[B].prototype,q=L?jc:jc[B]||j(jc,B,{})[B],Ae=q.prototype;for(d in n)a=!(o=Vh(L?d:B+(x?".":"#")+d,r.forced))&&G&&we(G,d),v=q[d],a&&(_=r.dontCallGetSet?(C=Af(G,d))&&C.value:G[d]),h=a&&_?_:n[d],(o||X||typeof v!=typeof h)&&(y=r.bind&&a?Qh(h,Au):r.wrap&&a?$e(h):X&&Fh(h)?C0(h):h,(r.sham||h&&h.sham||v&&v.sham)&&j(y,"sham",!0),j(q,d,y),X&&(we(jc,l=B+"Prototype")||j(jc,l,{}),j(jc[l],d,h),r.real&&Ae&&(o||!Ae[d])&&j(Ae,d,h)))},gt=Math.ceil,Dt=Math.floor,Gt=Math.trunc||function(r){var n=+r;return(n>0?Dt:gt)(n)},Lr=Gt,Jr=function(r){var n=+r;return n!=n||n===0?0:Lr(n)},En=Jr,On=Math.max,ci=Math.min,Ao=function(r,n){var o=En(r);return o<0?On(o+n,0):ci(o,n)},So=Jr,ns=Math.min,ca=function(r){var n=So(r);return n>0?ns(n,9007199254740991):0},$s=ca,Ss=function(r){return $s(r.length)},gc=He,du=Ao,od=Ss,mc=function(r){return function(n,o,a){var l=gc(n),d=od(l);if(d===0)return!r&&-1;var h,v=du(a,d);if(r&&o!=o){for(;d>v;)if((h=l[v++])!=h)return!0}else for(;d>v;v++)if((r||v in l)&&l[v]===o)return r||v||0;return!r&&-1}},fu={includes:mc(!0),indexOf:mc(!1)},sd=fu.includes;Ye({target:"Array",proto:!0,forced:u(function(){return!Array(1).includes()})},{includes:function(r){return sd(this,r,arguments.length>1?arguments[1]:void 0)}});var Hh=P,vc=Nt,Po=function(r,n){var o=vc[r+"Prototype"],a=o&&o[n];if(a)return a;var l=Hh[r],d=l&&l.prototype;return d&&d[n]},bs=Po("Array","includes"),jh=qt,df=fe,Kh=Bn("match"),ff=function(r){var n;return jh(r)&&((n=r[Kh])!==void 0?!!n:df(r)==="RegExp")},La=ff,ad=TypeError,Ya={};Ya[Bn("toStringTag")]="z";var hf=String(Ya)==="[object z]",Kc=hf,Wh=le,pf=fe,Nm=Bn("toStringTag"),sA=Object,cd=pf(function(){return arguments}())==="Arguments",fo=Kc?pf:function(r){var n,o,a;return r===void 0?"Undefined":r===null?"Null":typeof(o=function(l,d){try{return l[d]}catch{}}(n=sA(r),Nm))=="string"?o:cd?pf(n):(a=pf(n))==="Object"&&Wh(n.callee)?"Arguments":a},Pa=fo,aA=String,bo=function(r){if(Pa(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return aA(r)},hl=Bn("match"),gf=Ye,pl=function(r){if(La(r))throw new ad("The method doesn't accept regular expressions");return r},Ri=Ot,mf=bo,la=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[hl]=!1,"/./"[r](n)}catch{}}return!1},_c=T("".indexOf);gf({target:"String",proto:!0,forced:!la("includes")},{includes:function(r){return!!~_c(mf(Ri(this)),mf(pl(r)),arguments.length>1?arguments[1]:void 0)}});var vf=Po("String","includes"),Gh=N,_f=bs,yf=vf,cA=Array.prototype,hu=String.prototype,Wc=function(r){var n=r.includes;return r===cA||Gh(cA,r)&&n===cA.includes?_f:typeof r=="string"||r===hu||Gh(hu,r)&&n===hu.includes?yf:n},_t=c(Wc),gl=kr,pu=Ks,Ef=Ze,Gc=Ss,Xa=TypeError,mi="Reduce of empty array with no initial value",vi=function(r){return function(n,o,a,l){var d=pu(n),h=Ef(d),v=Gc(d);if(gl(o),v===0&&a<2)throw new Xa(mi);var _=r?v-1:0,y=r?-1:1;if(a<2)for(;;){if(_ in h){l=h[_],_+=y;break}if(_+=y,r?_<0:v<=_)throw new Xa(mi)}for(;r?_>=0:v>_;_+=y)_ in h&&(l=o(l,h[_],_,d));return l}},li={left:vi(!1),right:vi(!0)},io=u,Cs=function(r,n){var o=[][r];return!!o&&io(function(){o.call(null,n||function(){return 1},1)})},ml=P,$h=Kt,fg=fe,gu=function(r){return $h.slice(0,r.length)===r},wf=gu("Bun/")?"BUN":gu("Cloudflare-Workers")?"CLOUDFLARE":gu("Deno/")?"DENO":gu("Node.js/")?"NODE":ml.Bun&&typeof Bun.version=="string"?"BUN":ml.Deno&&typeof Deno.version=="object"?"DENO":fg(ml.process)==="process"?"NODE":ml.window&&ml.document?"BROWSER":"REST",zs=wf==="NODE",Ja=li.left;Ye({target:"Array",proto:!0,forced:!zs&&on>79&&on<83||!Cs("reduce")},{reduce:function(r){var n=arguments.length;return Ja(this,r,n,n>1?arguments[1]:void 0)}});var Bm=Po("Array","reduce"),zh=N,T0=Bm,ld=Array.prototype,qh=function(r){var n=r.reduce;return r===ld||zh(ld,r)&&n===ld.reduce?T0:n},lA=qh,ka=c(lA),Lm=fe,mu=Array.isArray||function(r){return Lm(r)==="Array"},Pm=Ye,R0=mu,jw=T([].reverse),km=[1,2];Pm({target:"Array",proto:!0,forced:String(km)===String(km.reverse())},{reverse:function(){return R0(this)&&(this.length=this.length),jw(this)}});var Dm=Po("Array","reverse"),Yh=N,hg=Dm,I0=Array.prototype,xm=function(r){var n=r.reverse;return r===I0||Yh(I0,r)&&n===I0.reverse?hg:n},O0=xm,ud=c(O0),Um=Ws,vl=Oa("keys"),Ad=function(r){return vl[r]||(vl[r]=Um(r))},Sf=!u(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),Xh=Di,Jh=le,E_=Ks,w_=Sf,N0=Ad("IE_PROTO"),vu=Object,ua=vu.prototype,Aa=w_?vu.getPrototypeOf:function(r){var n=E_(r);if(Xh(n,N0))return n[N0];var o=n.constructor;return Jh(o)&&n instanceof o?o.prototype:n instanceof vu?ua:null},Kw=T,S_=kr,dd=qt,_l=function(r){return dd(r)||r===null},Ww=String,Gw=TypeError,Za=function(r,n,o){try{return Kw(S_(Object.getOwnPropertyDescriptor(r,n)[o]))}catch{}},us=qt,da=Ot,As=function(r){if(_l(r))return r;throw new Gw("Can't set "+Ww(r)+" as a prototype")},pg=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,o={};try{(r=Za(Object.prototype,"__proto__","set"))(o,[]),n=o instanceof Array}catch{}return function(a,l){return da(a),As(l),us(a)&&(n?r(a,l):a.__proto__=l),a}}():void 0),bf={},_u={},Cf=Di,B0=He,b_=fu.indexOf,L0=_u,Mm=T([].push),Fm=function(r,n){var o,a=B0(r),l=0,d=[];for(o in a)!Cf(L0,o)&&Cf(a,o)&&Mm(d,o);for(;n.length>l;)Cf(a,o=n[l++])&&(~b_(d,o)||Mm(d,o));return d},P0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],k0=Fm,D0=P0.concat("length","prototype");bf.f=Object.getOwnPropertyNames||function(r){return k0(r,D0)};var Zh={};Zh.f=Object.getOwnPropertySymbols;var C_=ar,Vm=bf,gg=Zh,mg=wo,$w=T([].concat),vg=C_("Reflect","ownKeys")||function(r){var n=Vm.f(mg(r)),o=gg.f;return o?$w(n,o(r)):n},I=Di,U=vg,$=ae,ne=Gs,Ee={},be=Fm,Re=P0,Ie=Object.keys||function(r){return be(r,Re)},Pe=ge,je=td,nt=Gs,yt=wo,Et=He,dt=Ie;Ee.f=Pe&&!je?Object.defineProperties:function(r,n){yt(r);for(var o,a=Et(n),l=dt(n),d=l.length,h=0;d>h;)nt.f(r,o=l[h++],a[o]);return r};var Ht,Pt=ar("document","documentElement"),it=wo,st=Ee,$t=P0,ir=_u,Jt=Pt,Ir=Ph,pr="prototype",sn="script",wr=Ad("IE_PROTO"),di=function(){},xi=function(r){return"<"+sn+">"+r+"</"+sn+">"},fi=function(r){r.write(xi("")),r.close();var n=r.parentWindow.Object;return r=null,n},Pn=function(){try{Ht=new ActiveXObject("htmlfile")}catch{}var r,n,o;Pn=typeof document<"u"?document.domain&&Ht?fi(Ht):(n=Ir("iframe"),o="java"+sn+":",n.style.display="none",Jt.appendChild(n),n.src=String(o),(r=n.contentWindow.document).open(),r.write(xi("document.F=Object")),r.close(),r.F):fi(Ht);for(var a=$t.length;a--;)delete Pn[pr][$t[a]];return Pn()};ir[wr]=!0;var Si=Object.create||function(r,n){var o;return r!==null?(di[pr]=it(r),o=new di,di[pr]=null,o[wr]=r):o=Pn(),n===void 0?o:st.f(o,n)},zi=qt,kn=fl,$o=Error,Ts=T("".replace),zo=String(new $o("zxcasd").stack),qs=/\n\s*at [^:]*:[^\n]*/,Ui=qs.test(zo),ec=Ue,yc=!u(function(){var r=new Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",ec(1,7)),r.stack!==7)}),Ys=fl,Xs=function(r,n){if(Ui&&typeof r=="string"&&!$o.prepareStackTrace)for(;n--;)r=Ts(r,qs,"");return r},Ii=yc,Da=Error.captureStackTrace,xa={},Rs=xa,yu=Bn("iterator"),yl=Array.prototype,Eu=function(r){return r!==void 0&&(Rs.Array===r||yl[yu]===r)},uA=fo,Co=_s,Qm=pt,Tf=xa,x0=Bn("iterator"),wu=function(r){if(!Qm(r))return Co(r,x0)||Co(r,"@@iterator")||Tf[uA(r)]},ep=Me,fd=kr,Gl=wo,$l=wi,Rf=wu,U0=TypeError,If=function(r,n){var o=arguments.length<2?Rf(r):n;if(fd(o))return Gl(ep(o,r));throw new U0($l(r)+" is not iterable")},tp=Me,AA=wo,Of=_s,dA=function(r,n,o){var a,l;AA(r);try{if(!(a=Of(r,"return"))){if(n==="throw")throw o;return o}a=tp(a,r)}catch(d){l=!0,a=d}if(n==="throw")throw o;if(l)throw a;return AA(a),o},rp=Hc,zw=Me,T_=wo,Su=wi,$c=Eu,_g=Ss,R_=N,I_=If,O_=wu,yg=dA,N_=TypeError,Is=function(r,n){this.stopped=r,this.result=n},np=Is.prototype,Nf=function(r,n,o){var a,l,d,h,v,_,y,C=o&&o.that,B=!(!o||!o.AS_ENTRIES),L=!(!o||!o.IS_RECORD),x=!(!o||!o.IS_ITERATOR),X=!(!o||!o.INTERRUPTED),G=rp(n,C),q=function(ue){return a&&yg(a,"normal",ue),new Is(!0,ue)},Ae=function(ue){return B?(T_(ue),X?G(ue[0],ue[1],q):G(ue[0],ue[1])):X?G(ue,q):G(ue)};if(L)a=r.iterator;else if(x)a=r;else{if(!(l=O_(r)))throw new N_(Su(r)+" is not iterable");if($c(l)){for(d=0,h=_g(r);h>d;d++)if((v=Ae(r[d]))&&R_(np,v))return v;return new Is(!1)}a=I_(r,l)}for(_=L?r.next:a.next;!(y=zw(_,a)).done;){try{v=Ae(y.value)}catch(ue){yg(a,"throw",ue)}if(typeof v=="object"&&v&&R_(np,v))return v}return new Is(!1)},Eg=bo,B_=Ye,L_=N,wg=Aa,ip=pg,M0=function(r,n,o){for(var a=U(n),l=ne.f,d=$.f,h=0;h<a.length;h++){var v=a[h];I(r,v)||o&&I(o,v)||l(r,v,d(n,v))}},fA=Si,Hm=fl,zl=Ue,Sg=function(r,n){zi(n)&&"cause"in n&&kn(r,"cause",n.cause)},bg=function(r,n,o,a){Ii&&(Da?Da(r,n):Ys(r,"stack",Xs(o,a)))},bu=Nf,hA=function(r,n){return r===void 0?arguments.length<2?"":n:Eg(r)},P_=Bn("toStringTag"),jm=Error,Bf=[].push,Lf=function(r,n){var o,a=L_(hd,this);ip?o=ip(new jm,a?wg(this):hd):(o=a?this:fA(hd),Hm(o,P_,"Error")),n!==void 0&&Hm(o,"message",hA(n)),bg(o,Lf,o.stack,1),arguments.length>2&&Sg(o,arguments[2]);var l=[];return bu(r,Bf,{that:l}),Hm(o,"errors",l),o};ip?ip(Lf,jm):M0(Lf,jm,{name:!0});var hd=Lf.prototype=fA(jm.prototype,{constructor:zl(1,Lf),message:zl(1,""),name:zl(1,"AggregateError")});B_({global:!0,constructor:!0,arity:2},{AggregateError:Lf});var Pf,ql,fa,Cu=le,Yl=P.WeakMap,op=Cu(Yl)&&/native code/.test(String(Yl)),Km=P,sp=qt,k_=fl,Cg=Di,ap=ws,D_=Ad,Mk=_u,dR="Object already initialized",Tg=Km.TypeError,fR=Km.WeakMap;if(op||ap.state){var pA=ap.state||(ap.state=new fR);pA.get=pA.get,pA.has=pA.has,pA.set=pA.set,Pf=function(r,n){if(pA.has(r))throw new Tg(dR);return n.facade=r,pA.set(r,n),n},ql=function(r){return pA.get(r)||{}},fa=function(r){return pA.has(r)}}else{var Wm=D_("state");Mk[Wm]=!0,Pf=function(r,n){if(Cg(r,Wm))throw new Tg(dR);return n.facade=r,k_(r,Wm,n),n},ql=function(r){return Cg(r,Wm)?r[Wm]:{}},fa=function(r){return Cg(r,Wm)}}var kf,qw,hR,cp={set:Pf,get:ql,has:fa,enforce:function(r){return fa(r)?ql(r):Pf(r,{})},getterFor:function(r){return function(n){var o;if(!sp(n)||(o=ql(n)).type!==r)throw new Tg("Incompatible receiver, "+r+" required");return o}}},x_=ge,Fk=Di,U_=Function.prototype,F0=x_&&Object.getOwnPropertyDescriptor,Rg=Fk(U_,"name"),pR={EXISTS:Rg,PROPER:Rg&&(function(){}).name==="something",CONFIGURABLE:Rg&&(!x_||x_&&F0(U_,"name").configurable)},gR=fl,lp=function(r,n,o,a){return a&&a.enumerable?r[n]=o:gR(r,n,o),r},Vk=u,Qk=le,Hk=qt,mR=Si,vR=Aa,jk=lp,M_=Bn("iterator"),F_=!1;[].keys&&("next"in(hR=[].keys())?(qw=vR(vR(hR)))!==Object.prototype&&(kf=qw):F_=!0);var _R=!Hk(kf)||Vk(function(){var r={};return kf[M_].call(r)!==r});Qk((kf=_R?{}:mR(kf))[M_])||jk(kf,M_,function(){return this});var yR={IteratorPrototype:kf,BUGGY_SAFARI_ITERATORS:F_},ER=fo,Gm=hf?{}.toString:function(){return"[object "+ER(this)+"]"},wR=hf,V_=Gs.f,Kk=fl,Wk=Di,Gk=Gm,To=Bn("toStringTag"),Df=function(r,n,o,a){var l=o?r:r&&r.prototype;l&&(Wk(l,To)||V_(l,To,{configurable:!0,value:n}),a&&!wR&&Kk(l,"toString",Gk))},Yw=yR.IteratorPrototype,V0=Si,gA=Ue,Q_=Df,Xw=xa,SR=function(){return this},H_=function(r,n,o,a){var l=n+" Iterator";return r.prototype=V0(Yw,{next:gA(+!a,o)}),Q_(r,l,!1,!0),Xw[l]=SR,r},bR=Ye,Jw=Me,CR=pR,$k=H_,Zw=Aa,TR=Df,Qi=lp,eS=xa,zk=yR,$m=CR.PROPER,j_=zk.BUGGY_SAFARI_ITERATORS,zm=Bn("iterator"),RR="keys",ko="values",IR="entries",qk=function(){return this},OR=function(r,n,o,a,l,d,h){$k(o,n,a);var v,_,y,C=function(Ae){if(Ae===l&&G)return G;if(!j_&&Ae&&Ae in x)return x[Ae];switch(Ae){case RR:case ko:case IR:return function(){return new o(this,Ae)}}return function(){return new o(this)}},B=n+" Iterator",L=!1,x=r.prototype,X=x[zm]||x["@@iterator"]||l&&x[l],G=!j_&&X||C(l),q=n==="Array"&&x.entries||X;if(q&&(v=Zw(q.call(new r)))!==Object.prototype&&v.next&&(TR(v,B,!0,!0),eS[B]=qk),$m&&l===ko&&X&&X.name!==ko&&(L=!0,G=function(){return Jw(X,this)}),l)if(_={values:C(ko),keys:d?G:C(RR),entries:C(IR)},h)for(y in _)(j_||L||!(y in x))&&Qi(x,y,_[y]);else bR({target:n,proto:!0,forced:j_||L},_);return h&&x[zm]!==G&&Qi(x,zm,G,{name:l}),eS[n]=G,_},Ig=function(r,n){return{value:r,done:n}},A=He,g=xa,b=cp;Gs.f;var S=OR,R=Ig,F="Array Iterator",z=b.set,ee=b.getterFor(F);S(Array,"Array",function(r,n){z(this,{type:F,target:A(r),index:0,kind:n})},function(){var r=ee(this),n=r.target,o=r.index++;if(!n||o>=n.length)return r.target=null,R(void 0,!0);switch(r.kind){case"keys":return R(o,!1);case"values":return R(n[o],!1)}return R([o,n[o]],!1)},"values"),g.Arguments=g.Array;var ce=Gs,ye=function(r,n,o){return ce.f(r,n,o)},Ve=ar,qe=ye,ut=ge,ot=Bn("species"),Lt=N,zt=TypeError,or=function(r,n){if(Lt(n,r))return r;throw new zt("Incorrect invocation")},Ar=le,Er=ws,dr=T(Function.toString);Ar(Er.inspectSource)||(Er.inspectSource=function(r){return dr(r)});var Nr=Er.inspectSource,an=T,Zr=u,Mn=le,oo=fo,ha=Nr,Do=function(){},zc=ar("Reflect","construct"),tc=/^\s*(?:class|function)\b/,Os=an(tc.exec),qc=!tc.test(Do),ds=function(r){if(!Mn(r))return!1;try{return zc(Do,[],r),!0}catch{return!1}},Ns=function(r){if(!Mn(r))return!1;switch(oo(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return qc||!!Os(tc,ha(r))}catch{return!0}};Ns.sham=!0;var xo,so,Ec,up,mA=!zc||Zr(function(){var r;return ds(ds.call)||!ds(Object)||!ds(function(){r=!0})||r})?Ns:ds,rc=mA,pd=wi,pa=TypeError,K_=wo,xf=function(r){if(rc(r))return r;throw new pa(pd(r)+" is not a constructor")},Og=pt,Ng=Bn("species"),Ua=function(r,n){var o,a=K_(r).constructor;return a===void 0||Og(o=K_(a)[Ng])?n:xf(o)},Xl=T([].slice),tS=TypeError,Q0=function(r,n){if(r<n)throw new tS("Not enough arguments");return r},ij=/(?:ipad|iphone|ipod).*applewebkit/i.test(Kt),vA=P,Nge=V,Bge=Hc,oj=le,Lge=Di,sj=u,aj=Pt,Pge=Xl,cj=Ph,kge=Q0,Dge=ij,xge=zs,Yk=vA.setImmediate,Xk=vA.clearImmediate,Uge=vA.process,Jk=vA.Dispatch,Mge=vA.Function,lj=vA.MessageChannel,Fge=vA.String,Zk=0,rS={},uj="onreadystatechange";sj(function(){xo=vA.location});var eD=function(r){if(Lge(rS,r)){var n=rS[r];delete rS[r],n()}},tD=function(r){return function(){eD(r)}},Aj=function(r){eD(r.data)},dj=function(r){vA.postMessage(Fge(r),xo.protocol+"//"+xo.host)};Yk&&Xk||(Yk=function(r){kge(arguments.length,1);var n=oj(r)?r:Mge(r),o=Pge(arguments,1);return rS[++Zk]=function(){Nge(n,void 0,o)},so(Zk),Zk},Xk=function(r){delete rS[r]},xge?so=function(r){Uge.nextTick(tD(r))}:Jk&&Jk.now?so=function(r){Jk.now(tD(r))}:lj&&!Dge?(up=(Ec=new lj).port2,Ec.port1.onmessage=Aj,so=Bge(up.postMessage,up)):vA.addEventListener&&oj(vA.postMessage)&&!vA.importScripts&&xo&&xo.protocol!=="file:"&&!sj(dj)?(so=dj,vA.addEventListener("message",Aj,!1)):so=uj in cj("script")?function(r){aj.appendChild(cj("script"))[uj]=function(){aj.removeChild(this),eD(r)}}:function(r){setTimeout(tD(r),0)});var NR={set:Yk,clear:Xk},fj=P,Vge=ge,Qge=Object.getOwnPropertyDescriptor,hj=function(r){if(!Vge)return fj[r];var n=Qge(fj,r);return n&&n.value},pj=function(){this.head=null,this.tail=null};pj.prototype={add:function(r){var n={item:r,next:null},o=this.tail;o?o.next=n:this.head=n,this.tail=n},get:function(){var r=this.head;if(r)return(this.head=r.next)===null&&(this.tail=null),r.item}};var W_,rD,nD,iD,gj,mj=pj,Hge=/ipad|iphone|ipod/i.test(Kt)&&typeof Pebble<"u",jge=/web0s(?!.*chrome)/i.test(Kt),G_=P,Kge=hj,vj=Hc,oD=NR.set,Wge=mj,Gge=ij,$ge=Hge,zge=jge,sD=zs,_j=G_.MutationObserver||G_.WebKitMutationObserver,yj=G_.document,Ej=G_.process,BR=G_.Promise,aD=Kge("queueMicrotask");if(!aD){var LR=new Wge,PR=function(){var r,n;for(sD&&(r=Ej.domain)&&r.exit();n=LR.get();)try{n()}catch(o){throw LR.head&&W_(),o}r&&r.enter()};Gge||sD||zge||!_j||!yj?!$ge&&BR&&BR.resolve?((iD=BR.resolve(void 0)).constructor=BR,gj=vj(iD.then,iD),W_=function(){gj(PR)}):sD?W_=function(){Ej.nextTick(PR)}:(oD=vj(oD,G_),W_=function(){oD(PR)}):(rD=!0,nD=yj.createTextNode(""),new _j(PR).observe(nD,{characterData:!0}),W_=function(){nD.data=rD=!rD}),aD=function(r){LR.head||W_(),LR.add(r)}}var wj=aD,$_=function(r){try{return{error:!1,value:r()}}catch(n){return{error:!0,value:n}}},H0=P.Promise,qge=P,nS=H0,Yge=le,Xge=rA,Jge=Nr,Zge=Bn,Sj=wf,cD=on,bj=nS&&nS.prototype,eme=Zge("species"),Cj=!1,Tj=Yge(qge.PromiseRejectionEvent),tme=Xge("Promise",function(){var r=Jge(nS),n=r!==String(nS);if(!n&&cD===66||!bj.catch||!bj.finally)return!0;if(!cD||cD<51||!/native code/.test(r)){var o=new nS(function(l){l(1)}),a=function(l){l(function(){},function(){})};if((o.constructor={})[eme]=a,!(Cj=o.then(function(){})instanceof a))return!0}return!(n||Sj!=="BROWSER"&&Sj!=="DENO"||Tj)}),iS={CONSTRUCTOR:tme,REJECTION_EVENT:Tj,SUBCLASSING:Cj},Ap={},Rj=kr,rme=TypeError,nme=function(r){var n,o;this.promise=new r(function(a,l){if(n!==void 0||o!==void 0)throw new rme("Bad Promise constructor");n=a,o=l}),this.resolve=Rj(n),this.reject=Rj(o)};Ap.f=function(r){return new nme(r)};var lD,Ij,ime=Ye,kR=zs,qm=P,oS=Me,ome=lp,sme=Df,ame=function(r){var n=Ve(r);ut&&n&&!n[ot]&&qe(n,ot,{configurable:!0,get:function(){return this}})},cme=kr,uD=le,lme=qt,ume=or,Ame=Ua,Oj=NR.set,AD=wj,dme=function(r,n){try{arguments.length===1?console.error(r):console.error(r,n)}catch{}},fme=$_,hme=mj,Nj=cp,dD=H0,Bj=iS,Lj=Ap,DR="Promise",Pj=Bj.CONSTRUCTOR,pme=Bj.REJECTION_EVENT,fD=Nj.getterFor(DR),gme=Nj.set,mme=dD&&dD.prototype,sS=dD,hD=mme,kj=qm.TypeError,pD=qm.document,gD=qm.process,mD=Lj.f,vme=mD,_me=!!(pD&&pD.createEvent&&qm.dispatchEvent),Dj="unhandledrejection",xj=function(r){var n;return!(!lme(r)||!uD(n=r.then))&&n},Uj=function(r,n){var o,a,l,d=n.value,h=n.state===1,v=h?r.ok:r.fail,_=r.resolve,y=r.reject,C=r.domain;try{v?(h||(n.rejection===2&&Eme(n),n.rejection=1),v===!0?o=d:(C&&C.enter(),o=v(d),C&&(C.exit(),l=!0)),o===r.promise?y(new kj("Promise-chain cycle")):(a=xj(o))?oS(a,o,_,y):_(o)):y(d)}catch(B){C&&!l&&C.exit(),y(B)}},Mj=function(r,n){r.notified||(r.notified=!0,AD(function(){for(var o,a=r.reactions;o=a.get();)Uj(o,r);r.notified=!1,n&&!r.rejection&&yme(r)}))},Fj=function(r,n,o){var a,l;_me?((a=pD.createEvent("Event")).promise=n,a.reason=o,a.initEvent(r,!1,!0),qm.dispatchEvent(a)):a={promise:n,reason:o},!pme&&(l=qm["on"+r])?l(a):r===Dj&&dme("Unhandled promise rejection",o)},yme=function(r){oS(Oj,qm,function(){var n,o=r.facade,a=r.value;if(Vj(r)&&(n=fme(function(){kR?gD.emit("unhandledRejection",a,o):Fj(Dj,o,a)}),r.rejection=kR||Vj(r)?2:1,n.error))throw n.value})},Vj=function(r){return r.rejection!==1&&!r.parent},Eme=function(r){oS(Oj,qm,function(){var n=r.facade;kR?gD.emit("rejectionHandled",n):Fj("rejectionhandled",n,r.value)})},z_=function(r,n,o){return function(a){r(n,a,o)}},q_=function(r,n,o){r.done||(r.done=!0,o&&(r=o),r.value=n,r.state=2,Mj(r,!0))},vD=function(r,n,o){if(!r.done){r.done=!0,o&&(r=o);try{if(r.facade===n)throw new kj("Promise can't be resolved itself");var a=xj(n);a?AD(function(){var l={done:!1};try{oS(a,n,z_(vD,l,r),z_(q_,l,r))}catch(d){q_(l,d,r)}}):(r.value=n,r.state=1,Mj(r,!1))}catch(l){q_({done:!1},l,r)}}};Pj&&(hD=(sS=function(r){ume(this,hD),cme(r),oS(lD,this);var n=fD(this);try{r(z_(vD,n),z_(q_,n))}catch(o){q_(n,o)}}).prototype,(lD=function(r){gme(this,{type:DR,done:!1,notified:!1,parent:!1,reactions:new hme,rejection:!1,state:0,value:null})}).prototype=ome(hD,"then",function(r,n){var o=fD(this),a=mD(Ame(this,sS));return o.parent=!0,a.ok=!uD(r)||r,a.fail=uD(n)&&n,a.domain=kR?gD.domain:void 0,o.state===0?o.reactions.add(a):AD(function(){Uj(a,o)}),a.promise}),Ij=function(){var r=new lD,n=fD(r);this.promise=r,this.resolve=z_(vD,n),this.reject=z_(q_,n)},Lj.f=mD=function(r){return r===sS||r===void 0?new Ij(r):vme(r)}),ime({global:!0,constructor:!0,wrap:!0,forced:Pj},{Promise:sS}),sme(sS,DR,!1,!0),ame(DR);var Qj=Bn("iterator"),Hj=!1;try{var wme=0,jj={next:function(){return{done:!!wme++}},return:function(){Hj=!0}};jj[Qj]=function(){return this},Array.from(jj,function(){throw 2})}catch{}var Sme=H0,bme=function(r,n){try{if(!n&&!Hj)return!1}catch{return!1}var o=!1;try{var a={};a[Qj]=function(){return{next:function(){return{done:o=!0}}}},r(a)}catch{}return o},xR=iS.CONSTRUCTOR||!bme(function(r){Sme.all(r).then(void 0,function(){})}),Cme=Me,Tme=kr,Rme=Ap,Ime=$_,Ome=Nf;Ye({target:"Promise",stat:!0,forced:xR},{all:function(r){var n=this,o=Rme.f(n),a=o.resolve,l=o.reject,d=Ime(function(){var h=Tme(n.resolve),v=[],_=0,y=1;Ome(r,function(C){var B=_++,L=!1;y++,Cme(h,n,C).then(function(x){L||(L=!0,v[B]=x,--y||a(v))},l)}),--y||a(v)});return d.error&&l(d.value),o.promise}});var Nme=Ye,Bme=iS.CONSTRUCTOR;H0&&H0.prototype,Nme({target:"Promise",proto:!0,forced:Bme,real:!0},{catch:function(r){return this.then(void 0,r)}});var Lme=Me,Pme=kr,kme=Ap,Dme=$_,xme=Nf;Ye({target:"Promise",stat:!0,forced:xR},{race:function(r){var n=this,o=kme.f(n),a=o.reject,l=Dme(function(){var d=Pme(n.resolve);xme(r,function(h){Lme(d,n,h).then(o.resolve,a)})});return l.error&&a(l.value),o.promise}});var Ume=Ap;Ye({target:"Promise",stat:!0,forced:iS.CONSTRUCTOR},{reject:function(r){var n=Ume.f(this);return(0,n.reject)(r),n.promise}});var Mme=wo,Fme=qt,Vme=Ap,Kj=function(r,n){if(Mme(r),Fme(n)&&n.constructor===r)return n;var o=Vme.f(r);return(0,o.resolve)(n),o.promise},Qme=Ye,Hme=H0,jme=iS.CONSTRUCTOR,Kme=Kj,Wme=ar("Promise"),Gme=!jme;Qme({target:"Promise",stat:!0,forced:!0},{resolve:function(r){return Kme(Gme&&this===Wme?Hme:this,r)}});var $me=Me,zme=kr,qme=Ap,Yme=$_,Xme=Nf;Ye({target:"Promise",stat:!0,forced:xR},{allSettled:function(r){var n=this,o=qme.f(n),a=o.resolve,l=o.reject,d=Yme(function(){var h=zme(n.resolve),v=[],_=0,y=1;Xme(r,function(C){var B=_++,L=!1;y++,$me(h,n,C).then(function(x){L||(L=!0,v[B]={status:"fulfilled",value:x},--y||a(v))},function(x){L||(L=!0,v[B]={status:"rejected",reason:x},--y||a(v))})}),--y||a(v)});return d.error&&l(d.value),o.promise}});var Jme=Me,Zme=kr,eve=ar,tve=Ap,rve=$_,nve=Nf,Wj="No one promise resolved";Ye({target:"Promise",stat:!0,forced:xR},{any:function(r){var n=this,o=eve("AggregateError"),a=tve.f(n),l=a.resolve,d=a.reject,h=rve(function(){var v=Zme(n.resolve),_=[],y=0,C=1,B=!1;nve(r,function(L){var x=y++,X=!1;C++,Jme(v,n,L).then(function(G){X||B||(B=!0,l(G))},function(G){X||B||(X=!0,_[x]=G,--C||d(new o(_,Wj)))})}),--C||d(new o(_,Wj))});return h.error&&d(h.value),a.promise}});var ive=Ye,ove=V,sve=Xl,ave=Ap,cve=kr,Gj=$_,_D=P.Promise,$j=!1;ive({target:"Promise",stat:!0,forced:!_D||!_D.try||Gj(function(){_D.try(function(r){$j=r===8},8)}).error||!$j},{try:function(r){var n=arguments.length>1?sve(arguments,1):[],o=ave.f(this),a=Gj(function(){return ove(cve(r),void 0,n)});return(a.error?o.reject:o.resolve)(a.value),o.promise}});var lve=Ap;Ye({target:"Promise",stat:!0},{withResolvers:function(){var r=lve.f(this);return{promise:r.promise,resolve:r.resolve,reject:r.reject}}});var uve=Ye,yD=H0,Ave=u,dve=ar,fve=le,hve=Ua,zj=Kj,pve=yD&&yD.prototype;uve({target:"Promise",proto:!0,real:!0,forced:!!yD&&Ave(function(){pve.finally.call({then:function(){}},function(){})})},{finally:function(r){var n=hve(this,dve("Promise")),o=fve(r);return this.then(o?function(a){return zj(n,r()).then(function(){return a})}:r,o?function(a){return zj(n,r()).then(function(){throw a})}:r)}});var ED=T,gve=Jr,mve=bo,vve=Ot,_ve=ED("".charAt),qj=ED("".charCodeAt),yve=ED("".slice),Yj=function(r){return function(n,o){var a,l,d=mve(vve(n)),h=gve(o),v=d.length;return h<0||h>=v?r?"":void 0:(a=qj(d,h))<55296||a>56319||h+1===v||(l=qj(d,h+1))<56320||l>57343?r?_ve(d,h):a:r?yve(d,h,h+2):l-56320+(a-55296<<10)+65536}},wD={codeAt:Yj(!1),charAt:Yj(!0)},Eve=wD.charAt,wve=bo,Xj=cp,Sve=OR,Jj=Ig,Zj="String Iterator",bve=Xj.set,Cve=Xj.getterFor(Zj);Sve(String,"String",function(r){bve(this,{type:Zj,string:wve(r),index:0})},function(){var r,n=Cve(this),o=n.string,a=n.index;return a>=o.length?Jj(void 0,!0):(r=Eve(o,a),n.index+=r.length,Jj(r,!1))});var Tve=Nt.Promise,Rve={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ive=P,Ove=Df,e7=xa;for(var SD in Rve)Ove(Ive[SD],SD),e7[SD]=e7.Array;var t7=Tve,Mt=c(t7),Nve=Po("Array","values"),Bve=fo,Lve=Di,Pve=N,kve=Nve,bD=Array.prototype,Dve={DOMTokenList:!0,NodeList:!0},xve=function(r){var n=r.values;return r===bD||Pve(bD,r)&&n===bD.values||Lve(Dve,Bve(r))?kve:n},Jl=c(xve),r7=wi,Uve=TypeError,n7=Xl,Mve=Math.floor,CD=function(r,n){var o=r.length;if(o<8)for(var a,l,d=1;d<o;){for(l=d,a=r[d];l&&n(r[l-1],a)>0;)r[l]=r[--l];l!==d++&&(r[l]=a)}else for(var h=Mve(o/2),v=CD(n7(r,0,h),n),_=CD(n7(r,h),n),y=v.length,C=_.length,B=0,L=0;B<y||L<C;)r[B+L]=B<y&&L<C?n(v[B],_[L])<=0?v[B++]:_[L++]:B<y?v[B++]:_[L++];return r},i7=CD,o7=Kt.match(/firefox\/(\d+)/i),Fve=!!o7&&+o7[1],Vve=/MSIE|Trident/.test(Kt),s7=Kt.match(/AppleWebKit\/(\d+)\./),Qve=!!s7&&+s7[1],Hve=Ye,a7=T,jve=kr,Kve=Ks,c7=Ss,Wve=function(r,n){if(!delete r[n])throw new Uve("Cannot delete property "+r7(n)+" of "+r7(r))},l7=bo,TD=u,Gve=i7,$ve=Cs,u7=Fve,zve=Vve,A7=on,d7=Qve,Ym=[],f7=a7(Ym.sort),qve=a7(Ym.push),Yve=TD(function(){Ym.sort(void 0)}),Xve=TD(function(){Ym.sort(null)}),Jve=$ve("sort"),h7=!TD(function(){if(A7)return A7<70;if(!(u7&&u7>3)){if(zve)return!0;if(d7)return d7<603;var r,n,o,a,l="";for(r=65;r<76;r++){switch(n=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(a=0;a<47;a++)Ym.push({k:n+a,v:o})}for(Ym.sort(function(d,h){return h.v-d.v}),a=0;a<Ym.length;a++)n=Ym[a].k.charAt(0),l.charAt(l.length-1)!==n&&(l+=n);return l!=="DGBEFHACIJK"}});Hve({target:"Array",proto:!0,forced:Yve||!Xve||!Jve||!h7},{sort:function(r){r!==void 0&&jve(r);var n=Kve(this);if(h7)return r===void 0?f7(n):f7(n,r);var o,a,l=[],d=c7(n);for(a=0;a<d;a++)a in n&&qve(l,n[a]);for(Gve(l,function(h){return function(v,_){return _===void 0?-1:v===void 0?1:h!==void 0?+h(v,_)||0:l7(v)>l7(_)?1:-1}}(r)),o=c7(l),a=0;a<o;)n[a]=l[a++];for(;a<d;)Wve(n,a++);return n}});var Zve=Po("Array","sort"),e0e=N,t0e=Zve,RD=Array.prototype,r0e=function(r){var n=r.sort;return r===RD||e0e(RD,r)&&n===RD.sort?t0e:n},j0=c(r0e),n0e=Ye,i0e=T,o0e=Ao,s0e=RangeError,p7=String.fromCharCode,g7=String.fromCodePoint,a0e=i0e([].join);n0e({target:"String",stat:!0,arity:1,forced:!!g7&&g7.length!==1},{fromCodePoint:function(r){for(var n,o=[],a=arguments.length,l=0;a>l;){if(n=+arguments[l++],o0e(n,1114111)!==n)throw new s0e(n+" is not a valid code point");o[l]=n<65536?p7(n):p7(55296+((n-=65536)>>10),n%1024+56320)}return a0e(o,"")}});var c0e=u,l0e=Bn("iterator"),UR=!c0e(function(){var r=new URL("b?a=1&b=2&c=3","https://a"),n=r.searchParams,o=new URLSearchParams("a=1&a=2&b=3"),a="";return r.pathname="c%20d",n.forEach(function(l,d){n.delete("b"),a+=d+l}),o.delete("a",2),o.delete("b",void 0),!r.toJSON||!o.has("a",1)||o.has("a",2)||!o.has("a",void 0)||o.has("b")||!n.size&&!0||!n.sort||r.href!=="https://a/c%20d?a=1&c=3"||n.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!n[l0e]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://").host!=="xn--e1aybc"||new URL("https://a#").hash!=="#%D0%B1"||a!=="a1c3"||new URL("https://x",void 0).host!=="x"}),u0e=lp,ID=Ye,m7=P,OD=hj,A0e=ar,MR=Me,Uf=T,aS=ge,v7=UR,_7=lp,d0e=ye,f0e=function(r,n,o){for(var a in n)o&&o.unsafe&&r[a]?r[a]=n[a]:u0e(r,a,n[a],o);return r},h0e=Df,p0e=H_,ND=cp,y7=or,BD=le,g0e=Di,m0e=Hc,v0e=fo,_0e=wo,E7=qt,Zl=bo,y0e=Si,w7=Ue,S7=If,E0e=wu,FR=Ig,Y_=Q0,w0e=i7,S0e=Bn("iterator"),X_="URLSearchParams",b7=X_+"Iterator",C7=ND.set,gd=ND.getterFor(X_),b0e=ND.getterFor(b7),T7=OD("fetch"),VR=OD("Request"),cS=OD("Headers"),LD=VR&&VR.prototype,R7=cS&&cS.prototype,C0e=m7.TypeError,T0e=m7.encodeURIComponent,R0e=String.fromCharCode,I0e=A0e("String","fromCodePoint"),O0e=parseInt,QR=Uf("".charAt),I7=Uf([].join),Xm=Uf([].push),O7=Uf("".replace),N0e=Uf([].shift),N7=Uf([].splice),B7=Uf("".split),L7=Uf("".slice),B0e=Uf(/./.exec),L0e=/\+/g,P0e=/^[0-9a-f]+$/i,P7=function(r,n){var o=L7(r,n,n+2);return B0e(P0e,o)?O0e(o,16):NaN},k0e=function(r){for(var n=0,o=128;o>0&&r&o;o>>=1)n++;return n},D0e=function(r){var n=null;switch(r.length){case 1:n=r[0];break;case 2:n=(31&r[0])<<6|63&r[1];break;case 3:n=(15&r[0])<<12|(63&r[1])<<6|63&r[2];break;case 4:n=(7&r[0])<<18|(63&r[1])<<12|(63&r[2])<<6|63&r[3]}return n>1114111?null:n},k7=function(r){for(var n=(r=O7(r,L0e," ")).length,o="",a=0;a<n;){var l=QR(r,a);if(l==="%"){if(QR(r,a+1)==="%"||a+3>n){o+="%",a++;continue}var d=P7(r,a+1);if(d!=d){o+=l,a++;continue}a+=2;var h=k0e(d);if(h===0)l=R0e(d);else{if(h===1||h>4){o+="",a++;continue}for(var v=[d],_=1;_<h&&!(++a+3>n||QR(r,a)!=="%");){var y=P7(r,a+1);if(y!=y){a+=3;break}if(y>191||y<128)break;Xm(v,y),a+=2,_++}if(v.length!==h){o+="";continue}var C=D0e(v);C===null?o+="":l=I0e(C)}}o+=l,a++}return o},x0e=/[!'()~]|%20/g,U0e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},M0e=function(r){return U0e[r]},D7=function(r){return O7(T0e(r),x0e,M0e)},PD=p0e(function(r,n){C7(this,{type:b7,target:gd(r).entries,index:0,kind:n})},X_,function(){var r=b0e(this),n=r.target,o=r.index++;if(!n||o>=n.length)return r.target=null,FR(void 0,!0);var a=n[o];switch(r.kind){case"keys":return FR(a.key,!1);case"values":return FR(a.value,!1)}return FR([a.key,a.value],!1)},!0),x7=function(r){this.entries=[],this.url=null,r!==void 0&&(E7(r)?this.parseObject(r):this.parseQuery(typeof r=="string"?QR(r,0)==="?"?L7(r,1):r:Zl(r)))};x7.prototype={type:X_,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var n,o,a,l,d,h,v,_=this.entries,y=E0e(r);if(y)for(o=(n=S7(r,y)).next;!(a=MR(o,n)).done;){if(d=(l=S7(_0e(a.value))).next,(h=MR(d,l)).done||(v=MR(d,l)).done||!MR(d,l).done)throw new C0e("Expected sequence with length 2");Xm(_,{key:Zl(h.value),value:Zl(v.value)})}else for(var C in r)g0e(r,C)&&Xm(_,{key:C,value:Zl(r[C])})},parseQuery:function(r){if(r)for(var n,o,a=this.entries,l=B7(r,"&"),d=0;d<l.length;)(n=l[d++]).length&&(o=B7(n,"="),Xm(a,{key:k7(N0e(o)),value:k7(I7(o,"="))}))},serialize:function(){for(var r,n=this.entries,o=[],a=0;a<n.length;)r=n[a++],Xm(o,D7(r.key)+"="+D7(r.value));return I7(o,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var HR=function(){y7(this,J_);var r=C7(this,new x7(arguments.length>0?arguments[0]:void 0));aS||(this.size=r.entries.length)},J_=HR.prototype;if(f0e(J_,{append:function(r,n){var o=gd(this);Y_(arguments.length,2),Xm(o.entries,{key:Zl(r),value:Zl(n)}),aS||this.length++,o.updateURL()},delete:function(r){for(var n=gd(this),o=Y_(arguments.length,1),a=n.entries,l=Zl(r),d=o<2?void 0:arguments[1],h=d===void 0?d:Zl(d),v=0;v<a.length;){var _=a[v];if(_.key!==l||h!==void 0&&_.value!==h)v++;else if(N7(a,v,1),h!==void 0)break}aS||(this.size=a.length),n.updateURL()},get:function(r){var n=gd(this).entries;Y_(arguments.length,1);for(var o=Zl(r),a=0;a<n.length;a++)if(n[a].key===o)return n[a].value;return null},getAll:function(r){var n=gd(this).entries;Y_(arguments.length,1);for(var o=Zl(r),a=[],l=0;l<n.length;l++)n[l].key===o&&Xm(a,n[l].value);return a},has:function(r){for(var n=gd(this).entries,o=Y_(arguments.length,1),a=Zl(r),l=o<2?void 0:arguments[1],d=l===void 0?l:Zl(l),h=0;h<n.length;){var v=n[h++];if(v.key===a&&(d===void 0||v.value===d))return!0}return!1},set:function(r,n){var o=gd(this);Y_(arguments.length,1);for(var a,l=o.entries,d=!1,h=Zl(r),v=Zl(n),_=0;_<l.length;_++)(a=l[_]).key===h&&(d?N7(l,_--,1):(d=!0,a.value=v));d||Xm(l,{key:h,value:v}),aS||(this.size=l.length),o.updateURL()},sort:function(){var r=gd(this);w0e(r.entries,function(n,o){return n.key>o.key?1:-1}),r.updateURL()},forEach:function(r){for(var n,o=gd(this).entries,a=m0e(r,arguments.length>1?arguments[1]:void 0),l=0;l<o.length;)a((n=o[l++]).value,n.key,this)},keys:function(){return new PD(this,"keys")},values:function(){return new PD(this,"values")},entries:function(){return new PD(this,"entries")}},{enumerable:!0}),_7(J_,S0e,J_.entries,{name:"entries"}),_7(J_,"toString",function(){return gd(this).serialize()},{enumerable:!0}),aS&&d0e(J_,"size",{get:function(){return gd(this).entries.length},configurable:!0,enumerable:!0}),h0e(HR,X_),ID({global:!0,constructor:!0,forced:!v7},{URLSearchParams:HR}),!v7&&BD(cS)){var F0e=Uf(R7.has),V0e=Uf(R7.set),U7=function(r){if(E7(r)){var n,o=r.body;if(v0e(o)===X_)return n=r.headers?new cS(r.headers):new cS,F0e(n,"content-type")||V0e(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),y0e(r,{body:w7(0,Zl(o)),headers:w7(0,n)})}return r};if(BD(T7)&&ID({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(r){return T7(r,arguments.length>1?U7(arguments[1]):{})}}),BD(VR)){var kD=function(r){return y7(this,LD),new VR(r,arguments.length>1?U7(arguments[1]):{})};LD.constructor=kD,kD.prototype=LD,ID({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:kD})}}var md,Q0e={URLSearchParams:HR,getState:gd},H0e=Nt.URLSearchParams,M7=ge,j0e=T,K0e=Me,W0e=u,DD=Ie,G0e=Zh,$0e=Be,z0e=Ks,q0e=Ze,Z_=Object.assign,F7=Object.defineProperty,Y0e=j0e([].concat),X0e=!Z_||W0e(function(){if(M7&&Z_({b:1},Z_(F7({},"a",{enumerable:!0,get:function(){F7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},n={},o=Symbol("assign detection"),a="abcdefghijklmnopqrst";return r[o]=7,a.split("").forEach(function(l){n[l]=l}),Z_({},r)[o]!==7||DD(Z_({},n)).join("")!==a})?function(r,n){for(var o=z0e(r),a=arguments.length,l=1,d=G0e.f,h=$0e.f;a>l;)for(var v,_=q0e(arguments[l++]),y=d?Y0e(DD(_),d(_)):DD(_),C=y.length,B=0;C>B;)v=y[B++],M7&&!K0e(h,_,v)||(o[v]=_[v]);return o}:Z_,J0e=wo,Z0e=dA,e1e=ge,t1e=Gs,r1e=Ue,xD=function(r,n,o){e1e?t1e.f(r,n,r1e(0,o)):r[n]=o},n1e=Hc,i1e=Me,o1e=Ks,s1e=function(r,n,o,a){try{return a?n(J0e(o)[0],o[1]):n(o)}catch(l){Z0e(r,"throw",l)}},a1e=Eu,c1e=mA,l1e=Ss,V7=xD,u1e=If,A1e=wu,Q7=Array,K0=T,UD=2147483647,d1e=/[^\0-\u007E]/,H7=/[.\u3002\uFF0E\uFF61]/g,j7="Overflow: input needs wider integers to process",K7=RangeError,f1e=K0(H7.exec),ey=Math.floor,MD=String.fromCharCode,W7=K0("".charCodeAt),G7=K0([].join),Jm=K0([].push),h1e=K0("".replace),p1e=K0("".split),g1e=K0("".toLowerCase),$7=function(r){return r+22+75*(r<26)},m1e=function(r,n,o){var a=0;for(r=o?ey(r/700):r>>1,r+=ey(r/n);r>455;)r=ey(r/35),a+=36;return ey(a+36*r/(r+38))},v1e=function(r){var n=[];r=function(Ae){for(var ue=[],_e=0,De=Ae.length;_e<De;){var Le=W7(Ae,_e++);if(Le>=55296&&Le<=56319&&_e<De){var Te=W7(Ae,_e++);(64512&Te)==56320?Jm(ue,((1023&Le)<<10)+(1023&Te)+65536):(Jm(ue,Le),_e--)}else Jm(ue,Le)}return ue}(r);var o,a,l=r.length,d=128,h=0,v=72;for(o=0;o<r.length;o++)(a=r[o])<128&&Jm(n,MD(a));var _=n.length,y=_;for(_&&Jm(n,"-");y<l;){var C=UD;for(o=0;o<r.length;o++)(a=r[o])>=d&&a<C&&(C=a);var B=y+1;if(C-d>ey((UD-h)/B))throw new K7(j7);for(h+=(C-d)*B,d=C,o=0;o<r.length;o++){if((a=r[o])<d&&++h>UD)throw new K7(j7);if(a===d){for(var L=h,x=36;;){var X=x<=v?1:x>=v+26?26:x-v;if(L<X)break;var G=L-X,q=36-X;Jm(n,MD($7(X+G%q))),L=ey(G/q),x+=36}Jm(n,MD($7(L))),v=m1e(h,B,y===_),h=0,y++}}h++,d++}return G7(n,"")},_1e=Ye,FD=ge,y1e=UR,VD=P,z7=Hc,vd=T,jR=lp,_d=ye,E1e=or,QD=Di,HD=X0e,ty=function(r){var n=o1e(r),o=c1e(this),a=arguments.length,l=a>1?arguments[1]:void 0,d=l!==void 0;d&&(l=n1e(l,a>2?arguments[2]:void 0));var h,v,_,y,C,B,L=A1e(n),x=0;if(!L||this===Q7&&a1e(L))for(h=l1e(n),v=o?new this(h):Q7(h);h>x;x++)B=d?l(n[x],x):n[x],V7(v,x,B);else for(v=o?new this:[],C=(y=u1e(n,L)).next;!(_=i1e(C,y)).done;x++)B=d?s1e(y,l,[_.value,x],!0):_.value,V7(v,x,B);return v.length=x,v},Mf=Xl,w1e=wD.codeAt,S1e=function(r){var n,o,a=[],l=p1e(h1e(g1e(r),H7,"."),".");for(n=0;n<l.length;n++)o=l[n],Jm(a,f1e(d1e,o)?"xn--"+v1e(o):o);return G7(a,".")},Bg=bo,b1e=Df,C1e=Q0,q7=Q0e,Y7=cp,T1e=Y7.set,KR=Y7.getterFor("URL"),R1e=q7.URLSearchParams,I1e=q7.getState,lS=VD.URL,jD=VD.TypeError,WR=VD.parseInt,O1e=Math.floor,X7=Math.pow,yd=vd("".charAt),Ff=vd(/./.exec),uS=vd([].join),N1e=vd(1 .toString),B1e=vd([].pop),ry=vd([].push),KD=vd("".replace),L1e=vd([].shift),P1e=vd("".split),AS=vd("".slice),GR=vd("".toLowerCase),k1e=vd([].unshift),WD="Invalid scheme",W0="Invalid host",J7="Invalid port",Z7=/[a-z]/i,D1e=/[\d+-.a-z]/i,GD=/\d/,x1e=/^0x/i,U1e=/^[0-7]+$/,M1e=/^\d+$/,e9=/^[\da-f]+$/i,F1e=/[\0\t\n\r #%/:<>?@[\\\]^|]/,V1e=/[\0\t\n\r #/:<>?@[\\\]^|]/,Q1e=/^[\u0000-\u0020]+/,H1e=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,j1e=/[\t\n\r]/g,dS=function(r){var n,o,a,l;if(typeof r=="number"){for(n=[],o=0;o<4;o++)k1e(n,r%256),r=O1e(r/256);return uS(n,".")}if(typeof r=="object"){for(n="",a=function(d){for(var h=null,v=1,_=null,y=0,C=0;C<8;C++)d[C]!==0?(y>v&&(h=_,v=y),_=null,y=0):(_===null&&(_=C),++y);return y>v?_:h}(r),o=0;o<8;o++)l&&r[o]===0||(l&&(l=!1),a===o?(n+=o?":":"::",l=!0):(n+=N1e(r[o],16),o<7&&(n+=":")));return"["+n+"]"}return r},$R={},t9=HD({},$R,{" ":1,'"':1,"<":1,">":1,"`":1}),r9=HD({},t9,{"#":1,"?":1,"{":1,"}":1}),$D=HD({},r9,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Zm=function(r,n){var o=w1e(r,0);return o>32&&o<127&&!QD(n,r)?r:encodeURIComponent(r)},zR={ftp:21,file:null,http:80,https:443,ws:80,wss:443},fS=function(r,n){var o;return r.length===2&&Ff(Z7,yd(r,0))&&((o=yd(r,1))===":"||!n&&o==="|")},n9=function(r){var n;return r.length>1&&fS(AS(r,0,2))&&(r.length===2||(n=yd(r,2))==="/"||n==="\\"||n==="?"||n==="#")},K1e=function(r){return r==="."||GR(r)==="%2e"},zD={},i9={},qD={},o9={},s9={},YD={},a9={},c9={},qR={},YR={},XD={},JD={},ZD={},ex={},l9={},tx={},ny={},dp={},u9={},G0={},Lg={},rx=function(r,n,o){var a,l,d,h=Bg(r);if(n){if(l=this.parse(h))throw new jD(l);this.searchParams=null}else{if(o!==void 0&&(a=new rx(o,!0)),l=this.parse(h,null,a))throw new jD(l);(d=I1e(new R1e)).bindURL(this),this.searchParams=d}};rx.prototype={type:"URL",parse:function(r,n,o){var a,l,d,h,v,_=this,y=n||zD,C=0,B="",L=!1,x=!1,X=!1;for(r=Bg(r),n||(_.scheme="",_.username="",_.password="",_.host=null,_.port=null,_.path=[],_.query=null,_.fragment=null,_.cannotBeABaseURL=!1,r=KD(r,Q1e,""),r=KD(r,H1e,"$1")),r=KD(r,j1e,""),a=ty(r);C<=a.length;){switch(l=a[C],y){case zD:if(!l||!Ff(Z7,l)){if(n)return WD;y=qD;continue}B+=GR(l),y=i9;break;case i9:if(l&&(Ff(D1e,l)||l==="+"||l==="-"||l==="."))B+=GR(l);else{if(l!==":"){if(n)return WD;B="",y=qD,C=0;continue}if(n&&(_.isSpecial()!==QD(zR,B)||B==="file"&&(_.includesCredentials()||_.port!==null)||_.scheme==="file"&&!_.host))return;if(_.scheme=B,n)return void(_.isSpecial()&&zR[_.scheme]===_.port&&(_.port=null));B="",_.scheme==="file"?y=ex:_.isSpecial()&&o&&o.scheme===_.scheme?y=o9:_.isSpecial()?y=c9:a[C+1]==="/"?(y=s9,C++):(_.cannotBeABaseURL=!0,ry(_.path,""),y=u9)}break;case qD:if(!o||o.cannotBeABaseURL&&l!=="#")return WD;if(o.cannotBeABaseURL&&l==="#"){_.scheme=o.scheme,_.path=Mf(o.path),_.query=o.query,_.fragment="",_.cannotBeABaseURL=!0,y=Lg;break}y=o.scheme==="file"?ex:YD;continue;case o9:if(l!=="/"||a[C+1]!=="/"){y=YD;continue}y=qR,C++;break;case s9:if(l==="/"){y=YR;break}y=dp;continue;case YD:if(_.scheme=o.scheme,l===md)_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mf(o.path),_.query=o.query;else if(l==="/"||l==="\\"&&_.isSpecial())y=a9;else if(l==="?")_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mf(o.path),_.query="",y=G0;else{if(l!=="#"){_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mf(o.path),_.path.length--,y=dp;continue}_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mf(o.path),_.query=o.query,_.fragment="",y=Lg}break;case a9:if(!_.isSpecial()||l!=="/"&&l!=="\\"){if(l!=="/"){_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,y=dp;continue}y=YR}else y=qR;break;case c9:if(y=qR,l!=="/"||yd(B,C+1)!=="/")continue;C++;break;case qR:if(l!=="/"&&l!=="\\"){y=YR;continue}break;case YR:if(l==="@"){L&&(B="%40"+B),L=!0,d=ty(B);for(var G=0;G<d.length;G++){var q=d[G];if(q!==":"||X){var Ae=Zm(q,$D);X?_.password+=Ae:_.username+=Ae}else X=!0}B=""}else if(l===md||l==="/"||l==="?"||l==="#"||l==="\\"&&_.isSpecial()){if(L&&B==="")return"Invalid authority";C-=ty(B).length+1,B="",y=XD}else B+=l;break;case XD:case JD:if(n&&_.scheme==="file"){y=tx;continue}if(l!==":"||x){if(l===md||l==="/"||l==="?"||l==="#"||l==="\\"&&_.isSpecial()){if(_.isSpecial()&&B==="")return W0;if(n&&B===""&&(_.includesCredentials()||_.port!==null))return;if(h=_.parseHost(B))return h;if(B="",y=ny,n)return;continue}l==="["?x=!0:l==="]"&&(x=!1),B+=l}else{if(B==="")return W0;if(h=_.parseHost(B))return h;if(B="",y=ZD,n===JD)return}break;case ZD:if(!Ff(GD,l)){if(l===md||l==="/"||l==="?"||l==="#"||l==="\\"&&_.isSpecial()||n){if(B!==""){var ue=WR(B,10);if(ue>65535)return J7;_.port=_.isSpecial()&&ue===zR[_.scheme]?null:ue,B=""}if(n)return;y=ny;continue}return J7}B+=l;break;case ex:if(_.scheme="file",l==="/"||l==="\\")y=l9;else{if(!o||o.scheme!=="file"){y=dp;continue}switch(l){case md:_.host=o.host,_.path=Mf(o.path),_.query=o.query;break;case"?":_.host=o.host,_.path=Mf(o.path),_.query="",y=G0;break;case"#":_.host=o.host,_.path=Mf(o.path),_.query=o.query,_.fragment="",y=Lg;break;default:n9(uS(Mf(a,C),""))||(_.host=o.host,_.path=Mf(o.path),_.shortenPath()),y=dp;continue}}break;case l9:if(l==="/"||l==="\\"){y=tx;break}o&&o.scheme==="file"&&!n9(uS(Mf(a,C),""))&&(fS(o.path[0],!0)?ry(_.path,o.path[0]):_.host=o.host),y=dp;continue;case tx:if(l===md||l==="/"||l==="\\"||l==="?"||l==="#"){if(!n&&fS(B))y=dp;else if(B===""){if(_.host="",n)return;y=ny}else{if(h=_.parseHost(B))return h;if(_.host==="localhost"&&(_.host=""),n)return;B="",y=ny}continue}B+=l;break;case ny:if(_.isSpecial()){if(y=dp,l!=="/"&&l!=="\\")continue}else if(n||l!=="?")if(n||l!=="#"){if(l!==md&&(y=dp,l!=="/"))continue}else _.fragment="",y=Lg;else _.query="",y=G0;break;case dp:if(l===md||l==="/"||l==="\\"&&_.isSpecial()||!n&&(l==="?"||l==="#")){if((v=GR(v=B))===".."||v==="%2e."||v===".%2e"||v==="%2e%2e"?(_.shortenPath(),l==="/"||l==="\\"&&_.isSpecial()||ry(_.path,"")):K1e(B)?l==="/"||l==="\\"&&_.isSpecial()||ry(_.path,""):(_.scheme==="file"&&!_.path.length&&fS(B)&&(_.host&&(_.host=""),B=yd(B,0)+":"),ry(_.path,B)),B="",_.scheme==="file"&&(l===md||l==="?"||l==="#"))for(;_.path.length>1&&_.path[0]==="";)L1e(_.path);l==="?"?(_.query="",y=G0):l==="#"&&(_.fragment="",y=Lg)}else B+=Zm(l,r9);break;case u9:l==="?"?(_.query="",y=G0):l==="#"?(_.fragment="",y=Lg):l!==md&&(_.path[0]+=Zm(l,$R));break;case G0:n||l!=="#"?l!==md&&(l==="'"&&_.isSpecial()?_.query+="%27":_.query+=l==="#"?"%23":Zm(l,$R)):(_.fragment="",y=Lg);break;case Lg:l!==md&&(_.fragment+=Zm(l,t9))}C++}},parseHost:function(r){var n,o,a;if(yd(r,0)==="["){if(yd(r,r.length-1)!=="]"||(n=function(l){var d,h,v,_,y,C,B,L=[0,0,0,0,0,0,0,0],x=0,X=null,G=0,q=function(){return yd(l,G)};if(q()===":"){if(yd(l,1)!==":")return;G+=2,X=++x}for(;q();){if(x===8)return;if(q()!==":"){for(d=h=0;h<4&&Ff(e9,q());)d=16*d+WR(q(),16),G++,h++;if(q()==="."){if(h===0||(G-=h,x>6))return;for(v=0;q();){if(_=null,v>0){if(!(q()==="."&&v<4))return;G++}if(!Ff(GD,q()))return;for(;Ff(GD,q());){if(y=WR(q(),10),_===null)_=y;else{if(_===0)return;_=10*_+y}if(_>255)return;G++}L[x]=256*L[x]+_,++v!=2&&v!==4||x++}if(v!==4)return;break}if(q()===":"){if(G++,!q())return}else if(q())return;L[x++]=d}else{if(X!==null)return;G++,X=++x}}if(X!==null)for(C=x-X,x=7;x!==0&&C>0;)B=L[x],L[x--]=L[X+C-1],L[X+--C]=B;else if(x!==8)return;return L}(AS(r,1,-1)),!n))return W0;this.host=n}else if(this.isSpecial()){if(r=S1e(r),Ff(F1e,r)||(n=function(l){var d,h,v,_,y,C,B,L=P1e(l,".");if(L.length&&L[L.length-1]===""&&L.length--,(d=L.length)>4)return l;for(h=[],v=0;v<d;v++){if((_=L[v])==="")return l;if(y=10,_.length>1&&yd(_,0)==="0"&&(y=Ff(x1e,_)?16:8,_=AS(_,y===8?1:2)),_==="")C=0;else{if(!Ff(y===10?M1e:y===8?U1e:e9,_))return l;C=WR(_,y)}ry(h,C)}for(v=0;v<d;v++)if(C=h[v],v===d-1){if(C>=X7(256,5-d))return null}else if(C>255)return null;for(B=B1e(h),v=0;v<h.length;v++)B+=h[v]*X7(256,3-v);return B}(r),n===null))return W0;this.host=n}else{if(Ff(V1e,r))return W0;for(n="",o=ty(r),a=0;a<o.length;a++)n+=Zm(o[a],$R);this.host=n}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return QD(zR,this.scheme)},shortenPath:function(){var r=this.path,n=r.length;!n||this.scheme==="file"&&n===1&&fS(r[0],!0)||r.length--},serialize:function(){var r=this,n=r.scheme,o=r.username,a=r.password,l=r.host,d=r.port,h=r.path,v=r.query,_=r.fragment,y=n+":";return l!==null?(y+="//",r.includesCredentials()&&(y+=o+(a?":"+a:"")+"@"),y+=dS(l),d!==null&&(y+=":"+d)):n==="file"&&(y+="//"),y+=r.cannotBeABaseURL?h[0]:h.length?"/"+uS(h,"/"):"",v!==null&&(y+="?"+v),_!==null&&(y+="#"+_),y},setHref:function(r){var n=this.parse(r);if(n)throw new jD(n);this.searchParams.update()},getOrigin:function(){var r=this.scheme,n=this.port;if(r==="blob")try{return new iy(r.path[0]).origin}catch{return"null"}return r!=="file"&&this.isSpecial()?r+"://"+dS(this.host)+(n!==null?":"+n:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(Bg(r)+":",zD)},getUsername:function(){return this.username},setUsername:function(r){var n=ty(Bg(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var o=0;o<n.length;o++)this.username+=Zm(n[o],$D)}},getPassword:function(){return this.password},setPassword:function(r){var n=ty(Bg(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var o=0;o<n.length;o++)this.password+=Zm(n[o],$D)}},getHost:function(){var r=this.host,n=this.port;return r===null?"":n===null?dS(r):dS(r)+":"+n},setHost:function(r){this.cannotBeABaseURL||this.parse(r,XD)},getHostname:function(){var r=this.host;return r===null?"":dS(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,JD)},getPort:function(){var r=this.port;return r===null?"":Bg(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||((r=Bg(r))===""?this.port=null:this.parse(r,ZD))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+uS(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,ny))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){(r=Bg(r))===""?this.query=null:(yd(r,0)==="?"&&(r=AS(r,1)),this.query="",this.parse(r,G0)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){(r=Bg(r))!==""?(yd(r,0)==="#"&&(r=AS(r,1)),this.fragment="",this.parse(r,Lg)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var iy=function(r){var n=E1e(this,eu),o=C1e(arguments.length,1)>1?arguments[1]:void 0,a=T1e(n,new rx(r,!1,o));FD||(n.href=a.serialize(),n.origin=a.getOrigin(),n.protocol=a.getProtocol(),n.username=a.getUsername(),n.password=a.getPassword(),n.host=a.getHost(),n.hostname=a.getHostname(),n.port=a.getPort(),n.pathname=a.getPathname(),n.search=a.getSearch(),n.searchParams=a.getSearchParams(),n.hash=a.getHash())},eu=iy.prototype,Ed=function(r,n){return{get:function(){return KR(this)[r]()},set:n&&function(o){return KR(this)[n](o)},configurable:!0,enumerable:!0}};if(FD&&(_d(eu,"href",Ed("serialize","setHref")),_d(eu,"origin",Ed("getOrigin")),_d(eu,"protocol",Ed("getProtocol","setProtocol")),_d(eu,"username",Ed("getUsername","setUsername")),_d(eu,"password",Ed("getPassword","setPassword")),_d(eu,"host",Ed("getHost","setHost")),_d(eu,"hostname",Ed("getHostname","setHostname")),_d(eu,"port",Ed("getPort","setPort")),_d(eu,"pathname",Ed("getPathname","setPathname")),_d(eu,"search",Ed("getSearch","setSearch")),_d(eu,"searchParams",Ed("getSearchParams")),_d(eu,"hash",Ed("getHash","setHash"))),jR(eu,"toJSON",function(){return KR(this).serialize()},{enumerable:!0}),jR(eu,"toString",function(){return KR(this).serialize()},{enumerable:!0}),lS){var A9=lS.createObjectURL,d9=lS.revokeObjectURL;A9&&jR(iy,"createObjectURL",z7(A9,lS)),d9&&jR(iy,"revokeObjectURL",z7(d9,lS))}b1e(iy,"URL"),_1e({global:!0,constructor:!0,forced:!y1e,sham:!FD},{URL:iy});var W1e=Ye,f9=u,G1e=Q0,h9=bo,$1e=UR,nx=ar("URL"),z1e=$1e&&f9(function(){nx.canParse()}),q1e=f9(function(){return nx.canParse.length!==1});W1e({target:"URL",stat:!0,forced:!z1e||q1e},{canParse:function(r){var n=G1e(arguments.length,1),o=h9(r),a=n<2||arguments[1]===void 0?void 0:h9(arguments[1]);try{return!!new nx(o,a)}catch{return!1}}});var Y1e=Ye,X1e=Q0,p9=bo,J1e=UR,Z1e=ar("URL");Y1e({target:"URL",stat:!0,forced:!J1e},{parse:function(r){var n=X1e(arguments.length,1),o=p9(r),a=n<2||arguments[1]===void 0?void 0:p9(arguments[1]);try{return new Z1e(o,a)}catch{return null}}});var XR=c(Nt.URL);let g9=!0,m9=!0;function JR(r,n,o){const a=r.match(n);return a&&a.length>=o&&parseInt(a[o],10)}function $0(r,n,o){if(!r.RTCPeerConnection)return;const a=r.RTCPeerConnection.prototype,l=a.addEventListener;a.addEventListener=function(h,v){if(h!==n)return l.apply(this,arguments);const _=y=>{const C=o(y);C&&(v.handleEvent?v.handleEvent(C):v(C))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(v,_),l.apply(this,[h,_])};const d=a.removeEventListener;a.removeEventListener=function(h,v){if(h!==n||!this._eventMap||!this._eventMap[n])return d.apply(this,arguments);if(!this._eventMap[n].has(v))return d.apply(this,arguments);const _=this._eventMap[n].get(v);return this._eventMap[n].delete(v),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,d.apply(this,[h,_])},Object.defineProperty(a,"on"+n,{get(){return this["_on"+n]},set(h){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),h&&this.addEventListener(n,this["_on"+n]=h)},enumerable:!0,configurable:!0})}function e_e(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(g9=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function t_e(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(m9=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function v9(){if(typeof window=="object"){if(g9)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ix(r,n){m9&&console.warn(r+" is deprecated, please use "+n+" instead.")}function _9(r){return Object.prototype.toString.call(r)==="[object Object]"}function y9(r){var n;return _9(r)?ka(n=Object.keys(r)).call(n,function(o,a){const l=_9(r[a]),d=l?y9(r[a]):r[a],h=l&&!Object.keys(d).length;return d===void 0||h?o:Object.assign(o,{[a]:d})},{}):r}function ox(r,n,o){n&&!o.has(n.id)&&(o.set(n.id,n),Object.keys(n).forEach(a=>{a.endsWith("Id")?ox(r,r.get(n[a]),o):a.endsWith("Ids")&&n[a].forEach(l=>{ox(r,r.get(l),o)})}))}function E9(r,n,o){const a=o?"outbound-rtp":"inbound-rtp",l=new Map;if(n===null)return l;const d=[];return r.forEach(h=>{h.type==="track"&&h.trackIdentifier===n.id&&d.push(h)}),d.forEach(h=>{r.forEach(v=>{v.type===a&&v.trackId===h.id&&ox(r,v,l)})}),l}const w9=v9;function S9(r,n){const o=r&&r.navigator;if(!o.mediaDevices)return;const a=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const v={};return Object.keys(h).forEach(_=>{if(_==="require"||_==="advanced"||_==="mediaSource")return;const y=typeof h[_]=="object"?h[_]:{ideal:h[_]};y.exact!==void 0&&typeof y.exact=="number"&&(y.min=y.max=y.exact);const C=function(B,L){return B?B+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(y.ideal!==void 0){v.optional=v.optional||[];let B={};typeof y.ideal=="number"?(B[C("min",_)]=y.ideal,v.optional.push(B),B={},B[C("max",_)]=y.ideal,v.optional.push(B)):(B[C("",_)]=y.ideal,v.optional.push(B))}y.exact!==void 0&&typeof y.exact!="number"?(v.mandatory=v.mandatory||{},v.mandatory[C("",_)]=y.exact):["min","max"].forEach(B=>{y[B]!==void 0&&(v.mandatory=v.mandatory||{},v.mandatory[C(B,_)]=y[B])})}),h.advanced&&(v.optional=(v.optional||[]).concat(h.advanced)),v},l=function(h,v){if(n.version>=61)return v(h);if((h=JSON.parse(JSON.stringify(h)))&&typeof h.audio=="object"){const _=function(y,C,B){C in y&&!(B in y)&&(y[B]=y[C],delete y[C])};_((h=JSON.parse(JSON.stringify(h))).audio,"autoGainControl","googAutoGainControl"),_(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=a(h.audio)}if(h&&typeof h.video=="object"){let _=h.video.facingMode;_=_&&(typeof _=="object"?_:{ideal:_});const y=n.version<66;if(_&&(_.exact==="user"||_.exact==="environment"||_.ideal==="user"||_.ideal==="environment")&&(!o.mediaDevices.getSupportedConstraints||!o.mediaDevices.getSupportedConstraints().facingMode||y)){let C;if(delete h.video.facingMode,_.exact==="environment"||_.ideal==="environment"?C=["back","rear"]:_.exact!=="user"&&_.ideal!=="user"||(C=["front"]),C)return o.mediaDevices.enumerateDevices().then(B=>{B=B.filter(x=>x.kind==="videoinput");let L=B.find(x=>C.some(X=>{var G;return _t(G=x.label.toLowerCase()).call(G,X)}));return!L&&B.length&&_t(C).call(C,"back")&&(L=B[B.length-1]),L&&(h.video.deviceId=_.exact?{exact:L.deviceId}:{ideal:L.deviceId}),h.video=a(h.video),w9("chrome: "+JSON.stringify(h)),v(h)})}h.video=a(h.video)}return w9("chrome: "+JSON.stringify(h)),v(h)},d=function(h){return n.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(o.getUserMedia=(function(h,v,_){l(h,y=>{o.webkitGetUserMedia(y,v,C=>{_&&_(d(C))})})}).bind(o),o.mediaDevices.getUserMedia){const h=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(v){return l(v,_=>h(_).then(y=>{if(_.audio&&!y.getAudioTracks().length||_.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(C=>{C.stop()}),new DOMException("","NotFoundError");return y},y=>Mt.reject(d(y))))}}}function b9(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function C9(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",a=>{let l;l=r.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):{track:a.track};const d=new Event("track");d.track=a.track,d.receiver=l,d.transceiver={receiver:l},d.streams=[o.stream],this.dispatchEvent(d)}),o.stream.getTracks().forEach(a=>{let l;l=r.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.id):{track:a};const d=new Event("track");d.track=a,d.receiver=l,d.transceiver={receiver:l},d.streams=[o.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else $0(r,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function T9(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const n=function(l,d){return{track:d,get dtmf(){return this._dtmf===void 0&&(d.kind==="audio"?this._dtmf=l.createDTMFSender(d):this._dtmf=null),this._dtmf},_pc:l}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(h,v){let _=l.apply(this,arguments);return _||(_=n(this,h),this._senders.push(_)),_};const d=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(h){d.apply(this,arguments);const v=this._senders.indexOf(h);v!==-1&&this._senders.splice(v,1)}}const o=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],o.apply(this,[l]),l.getTracks().forEach(d=>{this._senders.push(n(this,d))})};const a=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],a.apply(this,[l]),l.getTracks().forEach(d=>{const h=this._senders.find(v=>v.track===d);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const n=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(a=>a._pc=this),o},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function R9(r){if(!r.RTCPeerConnection)return;const n=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[o,a,l]=arguments;if(arguments.length>0&&typeof o=="function")return n.apply(this,arguments);if(n.length===0&&(arguments.length===0||typeof o!="function"))return n.apply(this,[]);const d=function(v){const _={};return v.result().forEach(y=>{const C={id:y.id,timestamp:y.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[y.type]||y.type};y.names().forEach(B=>{C[B]=y.stat(B)}),_[C.id]=C}),_},h=function(v){return new Map(Object.keys(v).map(_=>[_,v[_]]))};if(arguments.length>=2){const v=function(_){a(h(d(_)))};return n.apply(this,[v,o])}return new Mt((v,_)=>{n.apply(this,[function(y){v(h(d(y)))},_])}).then(a,l)}}function I9(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const o=r.RTCPeerConnection.prototype.getSenders;o&&(r.RTCPeerConnection.prototype.getSenders=function(){const l=o.apply(this,[]);return l.forEach(d=>d._pc=this),l});const a=r.RTCPeerConnection.prototype.addTrack;a&&(r.RTCPeerConnection.prototype.addTrack=function(){const l=a.apply(this,arguments);return l._pc=this,l}),r.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(d=>E9(d,l.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const o=r.RTCPeerConnection.prototype.getReceivers;o&&(r.RTCPeerConnection.prototype.getReceivers=function(){const a=o.apply(this,[]);return a.forEach(l=>l._pc=this),a}),$0(r,"track",a=>(a.receiver._pc=a.srcElement,a)),r.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>E9(l,a.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype)||!("getStats"in r.RTCRtpReceiver.prototype))return;const n=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const o=arguments[0];let a,l,d;return this.getSenders().forEach(h=>{h.track===o&&(a?d=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===o&&(l?d=!0:l=h),h.track===o)),d||a&&l?Mt.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Mt.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function O9(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const n=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(d,h){if(!h)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const v=n.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(v)===-1&&this._shimmedLocalStreams[h.id].push(v):this._shimmedLocalStreams[h.id]=[h,v],v};const o=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(_=>{if(this.getSenders().find(C=>C.track===_))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();o.apply(this,arguments);const v=this.getSenders().filter(_=>h.indexOf(_)===-1);this._shimmedLocalStreams[d.id]=[d].concat(v)};const a=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],a.apply(this,arguments)};const l=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const v=this._shimmedLocalStreams[h].indexOf(d);v!==-1&&this._shimmedLocalStreams[h].splice(v,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),l.apply(this,arguments)}}function N9(r,n){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&n.version>=65)return O9(r);const o=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const _=o.apply(this);return this._reverseStreams=this._reverseStreams||{},_.map(y=>this._reverseStreams[y.id])};const a=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(_){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_.getTracks().forEach(y=>{if(this.getSenders().find(B=>B.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[_.id]){const y=new r.MediaStream(_.getTracks());this._streams[_.id]=y,this._reverseStreams[y.id]=_,_=y}a.apply(this,[_])};const l=r.RTCPeerConnection.prototype.removeStream;function d(_,y){let C=y.sdp;return Object.keys(_._reverseStreams||[]).forEach(B=>{const L=_._reverseStreams[B],x=_._streams[L.id];C=C.replace(new RegExp(x.id,"g"),L.id)}),new RTCSessionDescription({type:y.type,sdp:C})}r.RTCPeerConnection.prototype.removeStream=function(_){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[_.id]||_]),delete this._reverseStreams[this._streams[_.id]?this._streams[_.id].id:_.id],delete this._streams[_.id]},r.RTCPeerConnection.prototype.addTrack=function(_,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const C=[].slice.call(arguments,1);if(C.length!==1||!C[0].getTracks().find(x=>x===_))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===_))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const L=this._streams[y.id];if(L)L.addTrack(_),Mt.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new r.MediaStream([_]);this._streams[y.id]=x,this._reverseStreams[x.id]=y,this.addStream(x)}return this.getSenders().find(x=>x.track===_)},["createOffer","createAnswer"].forEach(function(_){const y=r.RTCPeerConnection.prototype[_],C={[_](){const B=arguments;return arguments.length&&typeof arguments[0]=="function"?y.apply(this,[L=>{const x=d(this,L);B[0].apply(null,[x])},L=>{B[1]&&B[1].apply(null,L)},arguments[2]]):y.apply(this,arguments).then(L=>d(this,L))}};r.RTCPeerConnection.prototype[_]=C[_]});const h=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(_,y){let C=y.sdp;return Object.keys(_._reverseStreams||[]).forEach(B=>{const L=_._reverseStreams[B],x=_._streams[L.id];C=C.replace(new RegExp(L.id,"g"),x.id)}),new RTCSessionDescription({type:y.type,sdp:C})}(this,arguments[0]),h.apply(this,arguments)):h.apply(this,arguments)};const v=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const _=v.get.apply(this);return _.type===""?_:d(this,_)}}),r.RTCPeerConnection.prototype.removeTrack=function(_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!_._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(_._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let y;this._streams=this._streams||{},Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(B=>_.track===B)&&(y=this._streams[C])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(_.track),this.dispatchEvent(new Event("negotiationneeded")))}}function sx(r,n){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const a=r.RTCPeerConnection.prototype[o],l={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=l[o]})}function B9(r,n){$0(r,"negotiationneeded",o=>{const a=o.target;if(!(n.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")||a.signalingState==="stable")return o})}var L9=Object.freeze({__proto__:null,fixNegotiationNeeded:B9,shimAddTrackRemoveTrack:N9,shimAddTrackRemoveTrackWithNative:O9,shimGetDisplayMedia:function(r,n){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(typeof n=="function"?r.navigator.mediaDevices.getDisplayMedia=function(o){return n(o).then(a=>{const l=o.video&&o.video.width,d=o.video&&o.video.height,h=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:h||3}},l&&(o.video.mandatory.maxWidth=l),d&&(o.video.mandatory.maxHeight=d),r.navigator.mediaDevices.getUserMedia(o)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:T9,shimGetStats:R9,shimGetUserMedia:S9,shimMediaStream:b9,shimOnTrack:C9,shimPeerConnection:sx,shimSenderReceiverGetStats:I9});function P9(r,n){const o=r&&r.navigator,a=r&&r.MediaStreamTrack;if(o.getUserMedia=function(l,d,h){ix("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(l).then(d,h)},!(n.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const l=function(h,v,_){v in h&&!(_ in h)&&(h[_]=h[v],delete h[v])},d=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(h){return typeof h=="object"&&typeof h.audio=="object"&&(h=JSON.parse(JSON.stringify(h)),l(h.audio,"autoGainControl","mozAutoGainControl"),l(h.audio,"noiseSuppression","mozNoiseSuppression")),d(h)},a&&a.prototype.getSettings){const h=a.prototype.getSettings;a.prototype.getSettings=function(){const v=h.apply(this,arguments);return l(v,"mozAutoGainControl","autoGainControl"),l(v,"mozNoiseSuppression","noiseSuppression"),v}}if(a&&a.prototype.applyConstraints){const h=a.prototype.applyConstraints;a.prototype.applyConstraints=function(v){return this.kind==="audio"&&typeof v=="object"&&(v=JSON.parse(JSON.stringify(v)),l(v,"autoGainControl","mozAutoGainControl"),l(v,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[v])}}}}function k9(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ax(r,n){if(typeof r!="object"||!r.RTCPeerConnection&&!r.mozRTCPeerConnection)return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const d=r.RTCPeerConnection.prototype[l],h={[l](){return arguments[0]=new(l==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),d.apply(this,arguments)}};r.RTCPeerConnection.prototype[l]=h[l]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[l,d,h]=arguments;return a.apply(this,[l||null]).then(v=>{if(n.version<53&&!d)try{v.forEach(_=>{_.type=o[_.type]||_.type})}catch(_){if(_.name!=="TypeError")throw _;v.forEach((y,C)=>{v.set(C,Object.assign({},y,{type:o[y.type]||y.type}))})}return v}).then(d,h)}}function D9(r){if(typeof r!="object"||!r.RTCPeerConnection||!r.RTCRtpSender||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const n=r.RTCPeerConnection.prototype.getSenders;n&&(r.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(l=>l._pc=this),a});const o=r.RTCPeerConnection.prototype.addTrack;o&&(r.RTCPeerConnection.prototype.addTrack=function(){const a=o.apply(this,arguments);return a._pc=this,a}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Mt.resolve(new Map)}}function x9(r){if(typeof r!="object"||!r.RTCPeerConnection||!r.RTCRtpSender||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const n=r.RTCPeerConnection.prototype.getReceivers;n&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(a=>a._pc=this),o}),$0(r,"track",o=>(o.receiver._pc=o.srcElement,o)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function U9(r){r.RTCPeerConnection&&!("removeStream"in r.RTCPeerConnection.prototype)&&(r.RTCPeerConnection.prototype.removeStream=function(n){ix("removeStream","removeTrack"),this.getSenders().forEach(o=>{var a;o.track&&_t(a=n.getTracks()).call(a,o.track)&&this.removeTrack(o)})})}function M9(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function F9(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const n=r.RTCPeerConnection.prototype.addTransceiver;n&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let o=arguments[1]&&arguments[1].sendEncodings;o===void 0&&(o=[]),o=[...o];const a=o.length>0;a&&o.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=n.apply(this,arguments);if(a){const{sender:d}=l,h=d.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=o,d.sendEncodings=o,this.setParametersPromises.push(d.setParameters(h).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return l})}function V9(r){if(typeof r!="object"||!r.RTCRtpSender)return;const n=r.RTCRtpSender.prototype.getParameters;n&&(r.RTCRtpSender.prototype.getParameters=function(){const o=n.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function Q9(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const n=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Mt.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function H9(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const n=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Mt.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}var j9=Object.freeze({__proto__:null,shimAddTransceiver:F9,shimCreateAnswer:H9,shimCreateOffer:Q9,shimGetDisplayMedia:function(r,n){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(o){if(!o||!o.video){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Mt.reject(a)}return o.video===!0?o.video={mediaSource:n}:o.video.mediaSource=n,r.navigator.mediaDevices.getUserMedia(o)})},shimGetParameters:V9,shimGetUserMedia:P9,shimOnTrack:k9,shimPeerConnection:ax,shimRTCDataChannel:M9,shimReceiverGetStats:x9,shimRemoveStream:U9,shimSenderGetStats:D9});function K9(r){if(typeof r=="object"&&r.RTCPeerConnection){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const n=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(o){var a;this._localStreams||(this._localStreams=[]),_t(a=this._localStreams).call(a,o)||this._localStreams.push(o),o.getAudioTracks().forEach(l=>n.call(this,l,o)),o.getVideoTracks().forEach(l=>n.call(this,l,o))},r.RTCPeerConnection.prototype.addTrack=function(o){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return l&&l.forEach(h=>{var v;this._localStreams?_t(v=this._localStreams).call(v,h)||this._localStreams.push(h):this._localStreams=[h]}),n.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(n);if(o===-1)return;this._localStreams.splice(o,1);const a=n.getTracks();this.getSenders().forEach(l=>{_t(a).call(a,l.track)&&this.removeTrack(l)})})}}function W9(r){if(typeof r=="object"&&r.RTCPeerConnection&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(l=>{var d;if(this._remoteStreams||(this._remoteStreams=[]),_t(d=this._remoteStreams).call(d,l))return;this._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,this.dispatchEvent(h)})})}});const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(l)>=0)return;o._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,o.dispatchEvent(d)})}),n.apply(o,arguments)}}}function G9(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const n=r.RTCPeerConnection.prototype,o=n.createOffer,a=n.createAnswer,l=n.setLocalDescription,d=n.setRemoteDescription,h=n.addIceCandidate;n.createOffer=function(_,y){const C=arguments.length>=2?arguments[2]:arguments[0],B=o.apply(this,[C]);return y?(B.then(_,y),Mt.resolve()):B},n.createAnswer=function(_,y){const C=arguments.length>=2?arguments[2]:arguments[0],B=a.apply(this,[C]);return y?(B.then(_,y),Mt.resolve()):B};let v=function(_,y,C){const B=l.apply(this,[_]);return C?(B.then(y,C),Mt.resolve()):B};n.setLocalDescription=v,v=function(_,y,C){const B=d.apply(this,[_]);return C?(B.then(y,C),Mt.resolve()):B},n.setRemoteDescription=v,v=function(_,y,C){const B=h.apply(this,[_]);return C?(B.then(y,C),Mt.resolve()):B},n.addIceCandidate=v}function $9(r){const n=r&&r.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){const o=n.mediaDevices,a=o.getUserMedia.bind(o);n.mediaDevices.getUserMedia=l=>a(z9(l))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(o,a,l){n.mediaDevices.getUserMedia(o).then(a,l)}).bind(n))}function z9(r){return r&&r.video!==void 0?Object.assign({},r,{video:y9(r.video)}):r}function q9(r){if(!r.RTCPeerConnection)return;const n=r.RTCPeerConnection;r.RTCPeerConnection=function(o,a){if(o&&o.iceServers){const l=[];for(let d=0;d<o.iceServers.length;d++){let h=o.iceServers[d];!h.hasOwnProperty("urls")&&h.hasOwnProperty("url")?(ix("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(o.iceServers[d])}o.iceServers=l}return new n(o,a)},r.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:()=>n.generateCertificate})}function Y9(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function X9(r){const n=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(o){if(o){o.offerToReceiveAudio!==void 0&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const a=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");o.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):o.offerToReceiveAudio!==!0||a||this.addTransceiver("audio",{direction:"recvonly"}),o.offerToReceiveVideo!==void 0&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const l=this.getTransceivers().find(d=>d.receiver.track.kind==="video");o.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):o.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function J9(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}var Z9=Object.freeze({__proto__:null,shimAudioContext:J9,shimCallbacksAPI:G9,shimConstraints:z9,shimCreateOfferLegacy:X9,shimGetUserMedia:$9,shimLocalStreamsAPI:K9,shimRTCIceServerUrls:q9,shimRemoteStreamsAPI:W9,shimTrackEventTransceiver:Y9}),eK=`	
\v\f\r \u2028\u2029\uFEFF`,r_e=Ot,n_e=bo,cx=eK,tK=T("".replace),i_e=RegExp("^["+cx+"]+"),o_e=RegExp("(^|[^"+cx+"])["+cx+"]+$"),lx=function(r){return function(n){var o=n_e(r_e(n));return 1&r&&(o=tK(o,i_e,"")),2&r&&(o=tK(o,o_e,"$1")),o}},s_e={start:lx(1),end:lx(2),trim:lx(3)},a_e=pR.PROPER,c_e=u,rK=eK,l_e=s_e.trim;Ye({target:"String",proto:!0,forced:function(r){return c_e(function(){return!!rK[r]()||""[r]()!==""||a_e&&rK[r].name!==r})}("trim")},{trim:function(){return l_e(this)}});var u_e=Po("String","trim"),A_e=N,d_e=u_e,ux=String.prototype,f_e=function(r){var n=r.trim;return typeof r=="string"||r===ux||A_e(ux,r)&&n===ux.trim?d_e:n},nc=c(f_e),nK={exports:{}};(function(r){const n={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};n.localCName=n.generateIdentifier(),n.splitLines=function(o){return o.trim().split(`
`).map(a=>a.trim())},n.splitSections=function(o){return o.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},n.getDescription=function(o){const a=n.splitSections(o);return a&&a[0]},n.getMediaSections=function(o){const a=n.splitSections(o);return a.shift(),a},n.matchPrefix=function(o,a){return n.splitLines(o).filter(l=>l.indexOf(a)===0)},n.parseCandidate=function(o){let a;a=o.indexOf("a=candidate:")===0?o.substring(12).split(" "):o.substring(10).split(" ");const l={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let d=8;d<a.length;d+=2)switch(a[d]){case"raddr":l.relatedAddress=a[d+1];break;case"rport":l.relatedPort=parseInt(a[d+1],10);break;case"tcptype":l.tcpType=a[d+1];break;case"ufrag":l.ufrag=a[d+1],l.usernameFragment=a[d+1];break;default:l[a[d]]===void 0&&(l[a[d]]=a[d+1])}return l},n.writeCandidate=function(o){const a=[];a.push(o.foundation);const l=o.component;l==="rtp"?a.push(1):l==="rtcp"?a.push(2):a.push(l),a.push(o.protocol.toUpperCase()),a.push(o.priority),a.push(o.address||o.ip),a.push(o.port);const d=o.type;return a.push("typ"),a.push(d),d!=="host"&&o.relatedAddress&&o.relatedPort&&(a.push("raddr"),a.push(o.relatedAddress),a.push("rport"),a.push(o.relatedPort)),o.tcpType&&o.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(a.push("ufrag"),a.push(o.usernameFragment||o.ufrag)),"candidate:"+a.join(" ")},n.parseIceOptions=function(o){return o.substring(14).split(" ")},n.parseRtpMap=function(o){let a=o.substring(9).split(" ");const l={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),l.name=a[0],l.clockRate=parseInt(a[1],10),l.channels=a.length===3?parseInt(a[2],10):1,l.numChannels=l.channels,l},n.writeRtpMap=function(o){let a=o.payloadType;o.preferredPayloadType!==void 0&&(a=o.preferredPayloadType);const l=o.channels||o.numChannels||1;return"a=rtpmap:"+a+" "+o.name+"/"+o.clockRate+(l!==1?"/"+l:"")+`\r
`},n.parseExtmap=function(o){const a=o.substring(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1],attributes:a.slice(2).join(" ")}},n.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&o.direction!=="sendrecv"?"/"+o.direction:"")+" "+o.uri+(o.attributes?" "+o.attributes:"")+`\r
`},n.parseFmtp=function(o){const a={};let l;const d=o.substring(o.indexOf(" ")+1).split(";");for(let h=0;h<d.length;h++)l=d[h].trim().split("="),a[l[0].trim()]=l[1];return a},n.writeFmtp=function(o){let a="",l=o.payloadType;if(o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){const d=[];Object.keys(o.parameters).forEach(h=>{o.parameters[h]!==void 0?d.push(h+"="+o.parameters[h]):d.push(h)}),a+="a=fmtp:"+l+" "+d.join(";")+`\r
`}return a},n.parseRtcpFb=function(o){const a=o.substring(o.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},n.writeRtcpFb=function(o){let a="",l=o.payloadType;return o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(d=>{a+="a=rtcp-fb:"+l+" "+d.type+(d.parameter&&d.parameter.length?" "+d.parameter:"")+`\r
`}),a},n.parseSsrcMedia=function(o){const a=o.indexOf(" "),l={ssrc:parseInt(o.substring(7,a),10)},d=o.indexOf(":",a);return d>-1?(l.attribute=o.substring(a+1,d),l.value=o.substring(d+1)):l.attribute=o.substring(a+1),l},n.parseSsrcGroup=function(o){const a=o.substring(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(l=>parseInt(l,10))}},n.getMid=function(o){const a=n.matchPrefix(o,"a=mid:")[0];if(a)return a.substring(6)},n.parseFingerprint=function(o){const a=o.substring(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},n.getDtlsParameters=function(o,a){return{role:"auto",fingerprints:n.matchPrefix(o+a,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(o,a){let l="a=setup:"+a+`\r
`;return o.fingerprints.forEach(d=>{l+="a=fingerprint:"+d.algorithm+" "+d.value+`\r
`}),l},n.parseCryptoLine=function(o){const a=o.substring(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},n.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+(typeof o.keyParams=="object"?n.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+`\r
`},n.parseCryptoKeyParams=function(o){if(o.indexOf("inline:")!==0)return null;const a=o.substring(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},n.getCryptoParameters=function(o,a){return n.matchPrefix(o+a,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(o,a){const l=n.matchPrefix(o+a,"a=ice-ufrag:")[0],d=n.matchPrefix(o+a,"a=ice-pwd:")[0];return l&&d?{usernameFragment:l.substring(12),password:d.substring(10)}:null},n.writeIceParameters=function(o){let a="a=ice-ufrag:"+o.usernameFragment+`\r
a=ice-pwd:`+o.password+`\r
`;return o.iceLite&&(a+=`a=ice-lite\r
`),a},n.parseRtpParameters=function(o){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=n.splitLines(o)[0].split(" ");a.profile=l[2];for(let h=3;h<l.length;h++){const v=l[h],_=n.matchPrefix(o,"a=rtpmap:"+v+" ")[0];if(_){const y=n.parseRtpMap(_),C=n.matchPrefix(o,"a=fmtp:"+v+" ");switch(y.parameters=C.length?n.parseFmtp(C[0]):{},y.rtcpFeedback=n.matchPrefix(o,"a=rtcp-fb:"+v+" ").map(n.parseRtcpFb),a.codecs.push(y),y.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(y.name.toUpperCase())}}}n.matchPrefix(o,"a=extmap:").forEach(h=>{a.headerExtensions.push(n.parseExtmap(h))});const d=n.matchPrefix(o,"a=rtcp-fb:* ").map(n.parseRtcpFb);return a.codecs.forEach(h=>{d.forEach(v=>{h.rtcpFeedback.find(_=>_.type===v.type&&_.parameter===v.parameter)||h.rtcpFeedback.push(v)})}),a},n.writeRtpDescription=function(o,a){let l="";l+="m="+o+" ",l+=a.codecs.length>0?"9":"0",l+=" "+(a.profile||"UDP/TLS/RTP/SAVPF")+" ",l+=a.codecs.map(h=>h.preferredPayloadType!==void 0?h.preferredPayloadType:h.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(h=>{l+=n.writeRtpMap(h),l+=n.writeFmtp(h),l+=n.writeRtcpFb(h)});let d=0;return a.codecs.forEach(h=>{h.maxptime>d&&(d=h.maxptime)}),d>0&&(l+="a=maxptime:"+d+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(h=>{l+=n.writeExtmap(h)}),l},n.parseRtpEncodingParameters=function(o){const a=[],l=n.parseRtpParameters(o),d=l.fecMechanisms.indexOf("RED")!==-1,h=l.fecMechanisms.indexOf("ULPFEC")!==-1,v=n.matchPrefix(o,"a=ssrc:").map(L=>n.parseSsrcMedia(L)).filter(L=>L.attribute==="cname"),_=v.length>0&&v[0].ssrc;let y;const C=n.matchPrefix(o,"a=ssrc-group:FID").map(L=>L.substring(17).split(" ").map(x=>parseInt(x,10)));C.length>0&&C[0].length>1&&C[0][0]===_&&(y=C[0][1]),l.codecs.forEach(L=>{if(L.name.toUpperCase()==="RTX"&&L.parameters.apt){let x={ssrc:_,codecPayloadType:parseInt(L.parameters.apt,10)};_&&y&&(x.rtx={ssrc:y}),a.push(x),d&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:_,mechanism:h?"red+ulpfec":"red"},a.push(x))}}),a.length===0&&_&&a.push({ssrc:_});let B=n.matchPrefix(o,"b=");return B.length&&(B=B[0].indexOf("b=TIAS:")===0?parseInt(B[0].substring(7),10):B[0].indexOf("b=AS:")===0?1e3*parseInt(B[0].substring(5),10)*.95-16e3:void 0,a.forEach(L=>{L.maxBitrate=B})),a},n.parseRtcpParameters=function(o){const a={},l=n.matchPrefix(o,"a=ssrc:").map(v=>n.parseSsrcMedia(v)).filter(v=>v.attribute==="cname")[0];l&&(a.cname=l.value,a.ssrc=l.ssrc);const d=n.matchPrefix(o,"a=rtcp-rsize");a.reducedSize=d.length>0,a.compound=d.length===0;const h=n.matchPrefix(o,"a=rtcp-mux");return a.mux=h.length>0,a},n.writeRtcpParameters=function(o){let a="";return o.reducedSize&&(a+=`a=rtcp-rsize\r
`),o.mux&&(a+=`a=rtcp-mux\r
`),o.ssrc!==void 0&&o.cname&&(a+="a=ssrc:"+o.ssrc+" cname:"+o.cname+`\r
`),a},n.parseMsid=function(o){let a;const l=n.matchPrefix(o,"a=msid:");if(l.length===1)return a=l[0].substring(7).split(" "),{stream:a[0],track:a[1]};const d=n.matchPrefix(o,"a=ssrc:").map(h=>n.parseSsrcMedia(h)).filter(h=>h.attribute==="msid");return d.length>0?(a=d[0].value.split(" "),{stream:a[0],track:a[1]}):void 0},n.parseSctpDescription=function(o){const a=n.parseMLine(o),l=n.matchPrefix(o,"a=max-message-size:");let d;l.length>0&&(d=parseInt(l[0].substring(19),10)),isNaN(d)&&(d=65536);const h=n.matchPrefix(o,"a=sctp-port:");if(h.length>0)return{port:parseInt(h[0].substring(12),10),protocol:a.fmt,maxMessageSize:d};const v=n.matchPrefix(o,"a=sctpmap:");if(v.length>0){const _=v[0].substring(10).split(" ");return{port:parseInt(_[0],10),protocol:_[1],maxMessageSize:d}}},n.writeSctpDescription=function(o,a){let l=[];return l=o.protocol!=="DTLS/SCTP"?["m="+o.kind+" 9 "+o.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:["m="+o.kind+" 9 "+o.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&l.push("a=max-message-size:"+a.maxMessageSize+`\r
`),l.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,22)},n.writeSessionBoilerplate=function(o,a,l){let d;const h=a!==void 0?a:2;return d=o||n.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+d+" "+h+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},n.getDirection=function(o,a){const l=n.splitLines(o);for(let d=0;d<l.length;d++)switch(l[d]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[d].substring(2)}return a?n.getDirection(a):"sendrecv"},n.getKind=function(o){return n.splitLines(o)[0].split(" ")[0].substring(2)},n.isRejected=function(o){return o.split(" ",2)[1]==="0"},n.parseMLine=function(o){const a=n.splitLines(o)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},n.parseOLine=function(o){const a=n.matchPrefix(o,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},n.isValidSDP=function(o){if(typeof o!="string"||o.length===0)return!1;const a=n.splitLines(o);for(let l=0;l<a.length;l++)if(a[l].length<2||a[l].charAt(1)!=="=")return!1;return!0},r.exports=n})(nK);var iK=nK.exports,oy=c(iK),h_e=i({__proto__:null,default:oy},[iK]);function ZR(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const n=r.RTCIceCandidate;r.RTCIceCandidate=function(o){if(typeof o=="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&((o=JSON.parse(JSON.stringify(o))).candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){const a=new n(o),l=oy.parseCandidate(o.candidate),d=Object.assign(a,l);return d.toJSON=function(){return{candidate:d.candidate,sdpMid:d.sdpMid,sdpMLineIndex:d.sdpMLineIndex,usernameFragment:d.usernameFragment}},d}return new n(o)},r.RTCIceCandidate.prototype=n.prototype,$0(r,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new r.RTCIceCandidate(o.candidate),writable:"false"}),o))}function Ax(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||$0(r,"icecandidate",n=>{if(n.candidate){const o=oy.parseCandidate(n.candidate.candidate);o.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[o.priority>>24])}return n})}function eI(r,n){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const o=function(v){if(!v||!v.sdp)return!1;const _=oy.splitSections(v.sdp);return _.shift(),_.some(y=>{const C=oy.parseMLine(y);return C&&C.kind==="application"&&C.protocol.indexOf("SCTP")!==-1})},a=function(v){const _=v.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(_===null||_.length<2)return-1;const y=parseInt(_[1],10);return y!=y?-1:y},l=function(v){let _=65536;return n.browser==="firefox"&&(_=n.version<57?v===-1?16384:2147483637:n.version<60?n.version===57?65535:65536:2147483637),_},d=function(v,_){let y=65536;n.browser==="firefox"&&n.version===57&&(y=65535);const C=oy.matchPrefix(v.sdp,"a=max-message-size:");return C.length>0?y=parseInt(C[0].substr(19),10):n.browser==="firefox"&&_!==-1&&(y=2147483637),y},h=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n.browser==="chrome"&&n.version>=76){const{sdpSemantics:v}=this.getConfiguration();v==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const v=a(arguments[0]),_=l(v),y=d(arguments[0],v);let C;C=_===0&&y===0?Number.POSITIVE_INFINITY:_===0||y===0?Math.max(_,y):Math.min(_,y);const B={};Object.defineProperty(B,"maxMessageSize",{get:()=>C}),this._sctp=B}return h.apply(this,arguments)}}function tI(r){if(!r.RTCPeerConnection||!("createDataChannel"in r.RTCPeerConnection.prototype))return;function n(a,l){const d=a.send;a.send=function(){const h=arguments[0],v=h.length||h.size||h.byteLength;if(a.readyState==="open"&&l.sctp&&v>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return d.apply(a,arguments)}}const o=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const a=o.apply(this,arguments);return n(a,this),a},$0(r,"datachannel",a=>(n(a.channel,a.target),a))}function dx(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const n=r.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const a=n[o];n[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const d=l.target;if(d._lastConnectionState!==d.connectionState){d._lastConnectionState=d.connectionState;const h=new Event("connectionstatechange",l);d.dispatchEvent(h)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function fx(r,n){if(!r.RTCPeerConnection||n.browser==="chrome"&&n.version>=71||n.browser==="safari"&&n.version>=605)return;const o=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(d=>nc(d).call(d)!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&a instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return o.apply(this,arguments)}}function rI(r,n){if(!r.RTCPeerConnection||!r.RTCPeerConnection.prototype)return;const o=r.RTCPeerConnection.prototype.addIceCandidate;o&&o.length!==0&&(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(n.browser==="chrome"&&n.version<78||n.browser==="firefox"&&n.version<68||n.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Mt.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Mt.resolve())})}function nI(r,n){if(!r.RTCPeerConnection||!r.RTCPeerConnection.prototype)return;const o=r.RTCPeerConnection.prototype.setLocalDescription;o&&o.length!==0&&(r.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return o.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer"}return a.sdp||a.type!=="offer"&&a.type!=="answer"?o.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>o.apply(this,[l]))})}var p_e=Object.freeze({__proto__:null,removeExtmapAllowMixed:fx,shimAddIceCandidateNullOrEmpty:rI,shimConnectionState:dx,shimMaxMessageSize:eI,shimParameterlessSetLocalDescription:nI,shimRTCIceCandidate:ZR,shimRTCIceCandidateRelayProtocol:Ax,shimSendThrowTypeError:tI});(function(){let{window:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const o=v9,a=function(d){const h={browser:null,version:null};if(d===void 0||!d.navigator)return h.browser="Not a browser.",h;const{navigator:v}=d;if(v.mozGetUserMedia)h.browser="firefox",h.version=JR(v.userAgent,/Firefox\/(\d+)\./,1);else if(v.webkitGetUserMedia||d.isSecureContext===!1&&d.webkitRTCPeerConnection)h.browser="chrome",h.version=JR(v.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!d.RTCPeerConnection||!v.userAgent.match(/AppleWebKit\/(\d+)\./))return h.browser="Not a supported browser.",h;h.browser="safari",h.version=JR(v.userAgent,/AppleWebKit\/(\d+)\./,1),h.supportsUnifiedPlan=d.RTCRtpTransceiver&&"currentDirection"in d.RTCRtpTransceiver.prototype}return h}(r),l={browserDetails:a,commonShim:p_e,extractVersion:JR,disableLog:e_e,disableWarnings:t_e,sdp:h_e};switch(a.browser){case"chrome":if(!L9||!sx||!n.shimChrome)return o("Chrome shim is not included in this adapter release."),l;if(a.version===null)return o("Chrome shim can not determine version, not shimming."),l;o("adapter.js shimming chrome."),l.browserShim=L9,rI(r,a),nI(r),S9(r,a),b9(r),sx(r,a),C9(r),N9(r,a),T9(r),R9(r),I9(r),B9(r,a),ZR(r),Ax(r),dx(r),eI(r,a),tI(r),fx(r,a);break;case"firefox":if(!j9||!ax||!n.shimFirefox)return o("Firefox shim is not included in this adapter release."),l;o("adapter.js shimming firefox."),l.browserShim=j9,rI(r,a),nI(r),P9(r,a),ax(r,a),k9(r),U9(r),D9(r),x9(r),M9(r),F9(r),V9(r),Q9(r),H9(r),ZR(r),dx(r),eI(r,a),tI(r);break;case"safari":if(!Z9||!n.shimSafari)return o("Safari shim is not included in this adapter release."),l;o("adapter.js shimming safari."),l.browserShim=Z9,rI(r,a),nI(r),q9(r),X9(r),G9(r),K9(r),W9(r),Y9(r),$9(r),J9(r),ZR(r),Ax(r),eI(r,a),tI(r),fx(r,a);break;default:o("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var hx=P;Ye({global:!0,forced:hx.globalThis!==hx},{globalThis:hx});var oK=c(P),px={exports:{}};(function(r,n){(function(o,a){var l="function",d="undefined",h="object",v="string",_="major",y="model",C="name",B="type",L="vendor",x="version",X="architecture",G="console",q="mobile",Ae="tablet",ue="smarttv",_e="wearable",De="embedded",Le="Amazon",Te="Apple",ze="ASUS",rt="BlackBerry",At="Browser",wt="Chrome",Gr="Firefox",en="Google",Or="Huawei",Ln="LG",Tn="Microsoft",Ea="Motorola",ct="Opera",Ct="Samsung",Xt="Sharp",ft="Sony",W="Xiaomi",Se="Zebra",Ne="Facebook",bt="Chromium OS",Fr="Mac OS",si=" Browser",Fo=function(Oo){for(var Vo={},gi=0;gi<Oo.length;gi++)Vo[Oo[gi].toUpperCase()]=Oo[gi];return Vo},OA=function(Oo,Vo){return typeof Oo===v&&Dd(Vo).indexOf(Dd(Oo))!==-1},Dd=function(Oo){return Oo.toLowerCase()},vb=function(Oo,Vo){if(typeof Oo===v)return Oo=Oo.replace(/^\s\s*/,""),typeof Vo===d?Oo:Oo.substring(0,500)},E1=function(Oo,Vo){for(var gi,Rl,th,co,Wg,gn,rh=0;rh<Vo.length&&!Wg;){var w1=Vo[rh],Np=Vo[rh+1];for(gi=Rl=0;gi<w1.length&&!Wg&&w1[gi];)if(Wg=w1[gi++].exec(Oo))for(th=0;th<Np.length;th++)gn=Wg[++Rl],typeof(co=Np[th])===h&&co.length>0?co.length===2?typeof co[1]==l?this[co[0]]=co[1].call(this,gn):this[co[0]]=co[1]:co.length===3?typeof co[1]!==l||co[1].exec&&co[1].test?this[co[0]]=gn?gn.replace(co[1],co[2]):a:this[co[0]]=gn?co[1].call(this,gn,co[2]):a:co.length===4&&(this[co[0]]=gn?co[3].call(this,gn.replace(co[1],co[2])):a):this[co]=gn||a;rh+=2}},eE=function(Oo,Vo){for(var gi in Vo)if(typeof Vo[gi]===h&&Vo[gi].length>0){for(var Rl=0;Rl<Vo[gi].length;Rl++)if(OA(Vo[gi][Rl],Oo))return gi==="?"?a:gi}else if(OA(Vo[gi],Oo))return gi==="?"?a:gi;return Vo.hasOwnProperty("*")?Vo["*"]:Oo},eO={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},tO={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[C,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[C,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[C,x],[/opios[\/ ]+([\w\.]+)/i],[x,[C,ct+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[x,[C,ct+" GX"]],[/\bopr\/([\w\.]+)/i],[x,[C,ct]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[x,[C,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[x,[C,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[C,x],[/quark(?:pc)?\/([-\w\.]+)/i],[x,[C,"Quark"]],[/\bddg\/([\w\.]+)/i],[x,[C,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[C,"UC"+At]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[x,[C,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[C,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[C,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[x,[C,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[x,[C,"Smart Lenovo "+At]],[/(avast|avg)\/([\w\.]+)/i],[[C,/(.+)/,"$1 Secure "+At],x],[/\bfocus\/([\w\.]+)/i],[x,[C,Gr+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[C,ct+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[C,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[C,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[C,ct+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[C,"MIUI"+si]],[/fxios\/([\w\.-]+)/i],[x,[C,Gr]],[/\bqihoobrowser\/?([\w\.]*)/i],[x,[C,"360"]],[/\b(qq)\/([\w\.]+)/i],[[C,/(.+)/,"$1Browser"],x],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[C,/(.+)/,"$1"+si],x],[/samsungbrowser\/([\w\.]+)/i],[x,[C,Ct+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[x,[C,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[C,"Sogou Mobile"],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[C,x],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[C],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[x,C],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[C,Ne],x],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[C,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[C,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[x,[C,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[C,wt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[C,wt+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[C,"Android "+At]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[C,x],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[x,[C,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[x,C],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[C,[x,eE,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[C,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[C,"Netscape"],x],[/(wolvic|librewolf)\/([\w\.]+)/i],[C,x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[C,Gr+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[C,[x,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[C,[x,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[X,"amd64"]],[/(ia32(?=;))/i],[[X,Dd]],[/((?:i[346]|x)86)[;\)]/i],[[X,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[X,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[X,"armhf"]],[/windows (ce|mobile); ppc;/i],[[X,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[X,/ower/,"",Dd]],[/(sun4\w)[;\)]/i],[[X,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[X,Dd]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[y,[L,Ct],[B,Ae]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[y,[L,Ct],[B,q]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[y,[L,Te],[B,q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[y,[L,Te],[B,Ae]],[/(macintosh);/i],[y,[L,Te]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[y,[L,Xt],[B,q]],[/(?:honor)([-\w ]+)[;\)]/i],[y,[L,"Honor"],[B,q]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[y,[L,Or],[B,Ae]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[y,[L,Or],[B,q]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[y,/_/g," "],[L,W],[B,q]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[y,/_/g," "],[L,W],[B,Ae]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[y,[L,"OPPO"],[B,q]],[/\b(opd2\d{3}a?) bui/i],[y,[L,"OPPO"],[B,Ae]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[y,[L,"Vivo"],[B,q]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[y,[L,"Realme"],[B,q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[y,[L,Ea],[B,q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[y,[L,Ea],[B,Ae]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[y,[L,Ln],[B,Ae]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[y,[L,Ln],[B,q]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[y,[L,"Lenovo"],[B,Ae]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[y,/_/g," "],[L,"Nokia"],[B,q]],[/(pixel c)\b/i],[y,[L,en],[B,Ae]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[y,[L,en],[B,q]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[y,[L,ft],[B,q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[y,"Xperia Tablet"],[L,ft],[B,Ae]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[y,[L,"OnePlus"],[B,q]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[y,[L,Le],[B,Ae]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[y,/(.+)/g,"Fire Phone $1"],[L,Le],[B,q]],[/(playbook);[-\w\),; ]+(rim)/i],[y,L,[B,Ae]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[y,[L,rt],[B,q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[y,[L,ze],[B,Ae]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[y,[L,ze],[B,q]],[/(nexus 9)/i],[y,[L,"HTC"],[B,Ae]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[L,[y,/_/g," "],[B,q]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[y,[L,"TCL"],[B,Ae]],[/(itel) ((\w+))/i],[[L,Dd],y,[B,eE,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[y,[L,"Acer"],[B,Ae]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[y,[L,"Meizu"],[B,q]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[y,[L,"Ulefone"],[B,q]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[y,[L,"Energizer"],[B,q]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[y,[L,"Cat"],[B,q]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[y,[L,"Smartfren"],[B,q]],[/droid.+; (a(?:015|06[35]|142p?))/i],[y,[L,"Nothing"],[B,q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[L,y,[B,q]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[L,y,[B,Ae]],[/(surface duo)/i],[y,[L,Tn],[B,Ae]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[y,[L,"Fairphone"],[B,q]],[/(u304aa)/i],[y,[L,"AT&T"],[B,q]],[/\bsie-(\w*)/i],[y,[L,"Siemens"],[B,q]],[/\b(rct\w+) b/i],[y,[L,"RCA"],[B,Ae]],[/\b(venue[\d ]{2,7}) b/i],[y,[L,"Dell"],[B,Ae]],[/\b(q(?:mv|ta)\w+) b/i],[y,[L,"Verizon"],[B,Ae]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[y,[L,"Barnes & Noble"],[B,Ae]],[/\b(tm\d{3}\w+) b/i],[y,[L,"NuVision"],[B,Ae]],[/\b(k88) b/i],[y,[L,"ZTE"],[B,Ae]],[/\b(nx\d{3}j) b/i],[y,[L,"ZTE"],[B,q]],[/\b(gen\d{3}) b.+49h/i],[y,[L,"Swiss"],[B,q]],[/\b(zur\d{3}) b/i],[y,[L,"Swiss"],[B,Ae]],[/\b((zeki)?tb.*\b) b/i],[y,[L,"Zeki"],[B,Ae]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[L,"Dragon Touch"],y,[B,Ae]],[/\b(ns-?\w{0,9}) b/i],[y,[L,"Insignia"],[B,Ae]],[/\b((nxa|next)-?\w{0,9}) b/i],[y,[L,"NextBook"],[B,Ae]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[L,"Voice"],y,[B,q]],[/\b(lvtel\-)?(v1[12]) b/i],[[L,"LvTel"],y,[B,q]],[/\b(ph-1) /i],[y,[L,"Essential"],[B,q]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[y,[L,"Envizen"],[B,Ae]],[/\b(trio[-\w\. ]+) b/i],[y,[L,"MachSpeed"],[B,Ae]],[/\btu_(1491) b/i],[y,[L,"Rotor"],[B,Ae]],[/(shield[\w ]+) b/i],[y,[L,"Nvidia"],[B,Ae]],[/(sprint) (\w+)/i],[L,y,[B,q]],[/(kin\.[onetw]{3})/i],[[y,/\./g," "],[L,Tn],[B,q]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[y,[L,Se],[B,Ae]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[y,[L,Se],[B,q]],[/smart-tv.+(samsung)/i],[L,[B,ue]],[/hbbtv.+maple;(\d+)/i],[[y,/^/,"SmartTV"],[L,Ct],[B,ue]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[L,Ln],[B,ue]],[/(apple) ?tv/i],[L,[y,Te+" TV"],[B,ue]],[/crkey/i],[[y,wt+"cast"],[L,en],[B,ue]],[/droid.+aft(\w+)( bui|\))/i],[y,[L,Le],[B,ue]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[y,[L,Xt],[B,ue]],[/(bravia[\w ]+)( bui|\))/i],[y,[L,ft],[B,ue]],[/(mitv-\w{5}) bui/i],[y,[L,W],[B,ue]],[/Hbbtv.*(technisat) (.*);/i],[L,y,[B,ue]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[L,vb],[y,vb],[B,ue]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[B,ue]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[L,y,[B,G]],[/droid.+; (shield) bui/i],[y,[L,"Nvidia"],[B,G]],[/(playstation [345portablevi]+)/i],[y,[L,ft],[B,G]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[y,[L,Tn],[B,G]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[y,[L,Ct],[B,_e]],[/((pebble))app/i],[L,y,[B,_e]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[y,[L,Te],[B,_e]],[/droid.+; (glass) \d/i],[y,[L,en],[B,_e]],[/droid.+; (wt63?0{2,3})\)/i],[y,[L,Se],[B,_e]],[/droid.+; (glass) \d/i],[y,[L,en],[B,_e]],[/(pico) (4|neo3(?: link|pro)?)/i],[L,y,[B,_e]],[/; (quest( \d| pro)?)/i],[y,[L,Ne],[B,_e]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[L,[B,De]],[/(aeobc)\b/i],[y,[L,Le],[B,De]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[y,[B,q]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[y,[B,Ae]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[B,Ae]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[B,q]],[/(android[-\w\. ]{0,9});.+buil/i],[y,[L,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[C,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[C,x],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[C,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[C,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,C]],os:[[/microsoft (windows) (vista|xp)/i],[C,x],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[C,[x,eE,eO]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[x,eE,eO],[C,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[C,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[C,Fr],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[x,C],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[C,x],[/\(bb(10);/i],[x,[C,rt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[C,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[C,Gr+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[C,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[x,[C,"watchOS"]],[/crkey\/([\d\.]+)/i],[x,[C,wt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[C,bt],x],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[C,x],[/(sunos) ?([\w\.\d]*)/i],[[C,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[C,x]]},NA=function(Oo,Vo){if(typeof Oo===h&&(Vo=Oo,Oo=a),!(this instanceof NA))return new NA(Oo,Vo).getResult();var gi=typeof o!==d&&o.navigator?o.navigator:a,Rl=Oo||(gi&&gi.userAgent?gi.userAgent:""),th=gi&&gi.userAgentData?gi.userAgentData:a,co=Vo?function(gn,rh){var w1={};for(var Np in gn)rh[Np]&&rh[Np].length%2==0?w1[Np]=rh[Np].concat(gn[Np]):w1[Np]=gn[Np];return w1}(tO,Vo):tO,Wg=gi&&gi.userAgent==Rl;return this.getBrowser=function(){var gn={};return gn[C]=a,gn[x]=a,E1.call(gn,Rl,co.browser),gn[_]=function(rh){return typeof rh===v?rh.replace(/[^\d\.]/g,"").split(".")[0]:a}(gn[x]),Wg&&gi&&gi.brave&&typeof gi.brave.isBrave==l&&(gn[C]="Brave"),gn},this.getCPU=function(){var gn={};return gn[X]=a,E1.call(gn,Rl,co.cpu),gn},this.getDevice=function(){var gn={};return gn[L]=a,gn[y]=a,gn[B]=a,E1.call(gn,Rl,co.device),Wg&&!gn[B]&&th&&th.mobile&&(gn[B]=q),Wg&&gn[y]=="Macintosh"&&gi&&typeof gi.standalone!==d&&gi.maxTouchPoints&&gi.maxTouchPoints>2&&(gn[y]="iPad",gn[B]=Ae),gn},this.getEngine=function(){var gn={};return gn[C]=a,gn[x]=a,E1.call(gn,Rl,co.engine),gn},this.getOS=function(){var gn={};return gn[C]=a,gn[x]=a,E1.call(gn,Rl,co.os),Wg&&!gn[C]&&th&&th.platform&&th.platform!="Unknown"&&(gn[C]=th.platform.replace(/chrome os/i,bt).replace(/macos/i,Fr)),gn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Rl},this.setUA=function(gn){return Rl=typeof gn===v&&gn.length>500?vb(gn,500):gn,this},this.setUA(Rl),this};NA.VERSION="0.7.40",NA.BROWSER=Fo([C,x,_]),NA.CPU=Fo([X]),NA.DEVICE=Fo([y,L,B,G,q,ue,Ae,_e,De]),NA.ENGINE=NA.OS=Fo([C,x]),r.exports&&(n=r.exports=NA),n.UAParser=NA;var Kg=typeof o!==d&&(o.jQuery||o.Zepto);if(Kg&&!Kg.ua){var rO=new NA;Kg.ua=rO.getResult(),Kg.ua.get=function(){return rO.getUA()},Kg.ua.set=function(Oo){rO.setUA(Oo);var Vo=rO.getResult();for(var gi in Vo)Kg.ua[gi]=Vo[gi]}}})(typeof window=="object"?window:s)})(px,px.exports);var g_e=c(px.exports),sK=NR.clear;Ye({global:!0,bind:!0,enumerable:!0,forced:P.clearImmediate!==sK},{clearImmediate:sK});var aK=P,m_e=V,v_e=le,__e=wf,y_e=Kt,E_e=Xl,w_e=Q0,S_e=aK.Function,b_e=/MSIE .\./.test(y_e)||__e==="BUN"&&function(){var r=aK.Bun.version.split(".");return r.length<3||r[0]==="0"&&(r[1]<3||r[1]==="3"&&r[2]==="0")}(),C_e=Ye,cK=P,lK=NR.set,T_e=function(r,n){var o=n?2:1;return b_e?function(a,l){var d=w_e(arguments.length,1)>o,h=v_e(a)?a:S_e(a),v=d?E_e(arguments,o):[],_=d?function(){m_e(h,this,v)}:h;return n?r(_,l):r(_)}:r},uK=cK.setImmediate?T_e(lK,!1):lK;C_e({global:!0,bind:!0,enumerable:!0,forced:cK.setImmediate!==uK},{setImmediate:uK});var AK=c(Nt.setImmediate),R_e=P,I_e=wj,O_e=kr,N_e=Q0,B_e=ge;Ye({global:!0,enumerable:!0,dontCallGetSet:!0,forced:u(function(){return B_e&&Object.getOwnPropertyDescriptor(R_e,"queueMicrotask").value.length!==1})},{queueMicrotask:function(r){N_e(arguments.length,1),I_e(O_e(r))}});var dK=c(Nt.queueMicrotask);function fK(r,n){return function(){return r.apply(n,arguments)}}const{toString:L_e}=Object.prototype,{getPrototypeOf:gx}=Object,{iterator:iI,toStringTag:hK}=Symbol,oI=(mx=Object.create(null),r=>{const n=L_e.call(r);return mx[n]||(mx[n]=n.slice(8,-1).toLowerCase())});var mx;const Vf=r=>(r=r.toLowerCase(),n=>oI(n)===r),sI=r=>n=>typeof n===r,{isArray:sy}=Array,hS=sI("undefined"),pK=Vf("ArrayBuffer"),P_e=sI("string"),Tu=sI("function"),gK=sI("number"),aI=r=>r!==null&&typeof r=="object",cI=r=>{if(oI(r)!=="object")return!1;const n=gx(r);return!(n!==null&&n!==Object.prototype&&Object.getPrototypeOf(n)!==null||hK in r||iI in r)},k_e=Vf("Date"),D_e=Vf("File"),x_e=Vf("Blob"),U_e=Vf("FileList"),M_e=Vf("URLSearchParams"),[F_e,V_e,Q_e,H_e]=["ReadableStream","Request","Response","Headers"].map(Vf);function pS(r,n){let o,a,{allOwnKeys:l=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r!=null)if(typeof r!="object"&&(r=[r]),sy(r))for(o=0,a=r.length;o<a;o++)n.call(null,r[o],o,r);else{const d=l?Object.getOwnPropertyNames(r):Object.keys(r),h=d.length;let v;for(o=0;o<h;o++)v=d[o],n.call(null,r[v],v,r)}}function mK(r,n){n=n.toLowerCase();const o=Object.keys(r);let a,l=o.length;for(;l-- >0;)if(a=o[l],n===a.toLowerCase())return a;return null}const z0=oK!==void 0?oK:typeof self<"u"?self:typeof window<"u"?window:Kd,vK=r=>!hS(r)&&r!==z0,j_e=(vx=typeof Uint8Array<"u"&&gx(Uint8Array),r=>vx&&r instanceof vx);var vx;const K_e=Vf("HTMLFormElement"),_K=(r=>{let{hasOwnProperty:n}=r;return(o,a)=>n.call(o,a)})(Object.prototype),W_e=Vf("RegExp"),yK=(r,n)=>{const o=Object.getOwnPropertyDescriptors(r),a={};pS(o,(l,d)=>{let h;(h=n(l,d,r))!==!1&&(a[d]=h||l)}),Object.defineProperties(r,a)},G_e=Vf("AsyncFunction"),EK=(wK=typeof AK=="function",SK=Tu(z0.postMessage),wK?AK:SK?(_x="axios@".concat(Math.random()),lI=[],z0.addEventListener("message",r=>{let{source:n,data:o}=r;n===z0&&o===_x&&lI.length&&lI.shift()()},!1),r=>{lI.push(r),z0.postMessage(_x,"*")}):r=>setTimeout(r));var wK,SK,_x,lI;const $_e=dK!==void 0?dK.bind(z0):typeof process<"u"&&process.nextTick||EK;var kt={isArray:sy,isArrayBuffer:pK,isBuffer:function(r){return r!==null&&!hS(r)&&r.constructor!==null&&!hS(r.constructor)&&Tu(r.constructor.isBuffer)&&r.constructor.isBuffer(r)},isFormData:r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||Tu(r.append)&&((n=oI(r))==="formdata"||n==="object"&&Tu(r.toString)&&r.toString()==="[object FormData]"))},isArrayBufferView:function(r){let n;return n=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&pK(r.buffer),n},isString:P_e,isNumber:gK,isBoolean:r=>r===!0||r===!1,isObject:aI,isPlainObject:cI,isReadableStream:F_e,isRequest:V_e,isResponse:Q_e,isHeaders:H_e,isUndefined:hS,isDate:k_e,isFile:D_e,isBlob:x_e,isRegExp:W_e,isFunction:Tu,isStream:r=>aI(r)&&Tu(r.pipe),isURLSearchParams:M_e,isTypedArray:j_e,isFileList:U_e,forEach:pS,merge:function r(){const{caseless:n}=vK(this)&&this||{},o={},a=(l,d)=>{const h=n&&mK(o,d)||d;cI(o[h])&&cI(l)?o[h]=r(o[h],l):cI(l)?o[h]=r({},l):sy(l)?o[h]=l.slice():o[h]=l};for(let l=0,d=arguments.length;l<d;l++)arguments[l]&&pS(arguments[l],a);return o},extend:function(r,n,o){let{allOwnKeys:a}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return pS(n,(l,d)=>{o&&Tu(l)?r[d]=fK(l,o):r[d]=l},{allOwnKeys:a}),r},trim:r=>nc(r)?nc(r).call(r):r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),inherits:(r,n,o,a)=>{r.prototype=Object.create(n.prototype,a),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),o&&Object.assign(r.prototype,o)},toFlatObject:(r,n,o,a)=>{let l,d,h;const v={};if(n=n||{},r==null)return n;do{for(l=Object.getOwnPropertyNames(r),d=l.length;d-- >0;)h=l[d],a&&!a(h,r,n)||v[h]||(n[h]=r[h],v[h]=!0);r=o!==!1&&gx(r)}while(r&&(!o||o(r,n))&&r!==Object.prototype);return n},kindOf:oI,kindOfTest:Vf,endsWith:(r,n,o)=>{r=String(r),(o===void 0||o>r.length)&&(o=r.length),o-=n.length;const a=r.indexOf(n,o);return a!==-1&&a===o},toArray:r=>{if(!r)return null;if(sy(r))return r;let n=r.length;if(!gK(n))return null;const o=new Array(n);for(;n-- >0;)o[n]=r[n];return o},forEachEntry:(r,n)=>{const o=(r&&r[iI]).call(r);let a;for(;(a=o.next())&&!a.done;){const l=a.value;n.call(r,l[0],l[1])}},matchAll:(r,n)=>{let o;const a=[];for(;(o=r.exec(n))!==null;)a.push(o);return a},isHTMLForm:K_e,hasOwnProperty:_K,hasOwnProp:_K,reduceDescriptors:yK,freezeMethods:r=>{yK(r,(n,o)=>{if(Tu(r)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const a=r[o];Tu(a)&&(n.enumerable=!1,"writable"in n?n.writable=!1:n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")}))})},toObjectSet:(r,n)=>{const o={},a=l=>{l.forEach(d=>{o[d]=!0})};return sy(r)?a(r):a(String(r).split(n)),o},toCamelCase:r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(r,n)=>r!=null&&Number.isFinite(r=+r)?r:n,findKey:mK,global:z0,isContextDefined:vK,isSpecCompliantForm:function(r){return!!(r&&Tu(r.append)&&r[hK]==="FormData"&&r[iI])},toJSONObject:r=>{const n=new Array(10),o=(a,l)=>{if(aI(a)){if(n.indexOf(a)>=0)return;if(!("toJSON"in a)){n[l]=a;const d=sy(a)?[]:{};return pS(a,(h,v)=>{const _=o(h,l+1);!hS(_)&&(d[v]=_)}),n[l]=void 0,d}}return a};return o(r,0)},isAsyncFn:G_e,isThenable:r=>r&&(aI(r)||Tu(r))&&Tu(r.then)&&Tu(r.catch),setImmediate:EK,asap:$_e,isIterable:r=>r!=null&&Tu(r[iI])};function Yn(r,n,o,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),o&&(this.config=o),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}kt.inherits(Yn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:kt.toJSONObject(this.config),code:this.code,status:this.status}}});const bK=Yn.prototype,CK={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{CK[r]={value:r}}),Object.defineProperties(Yn,CK),Object.defineProperty(bK,"isAxiosError",{value:!0}),Yn.from=(r,n,o,a,l,d)=>{const h=Object.create(bK);return kt.toFlatObject(r,h,function(v){return v!==Error.prototype},v=>v!=="isAxiosError"),Yn.call(h,r.message,n,o,a,l),h.cause=r,h.name=r.name,d&&Object.assign(h,d),h};function yx(r){return kt.isPlainObject(r)||kt.isArray(r)}function TK(r){return kt.endsWith(r,"[]")?r.slice(0,-2):r}function RK(r,n,o){return r?r.concat(n).map(function(a,l){return a=TK(a),!o&&l?"["+a+"]":a}).join(o?".":""):n}const z_e=kt.toFlatObject(kt,{},null,function(r){return/^is[A-Z]/.test(r)});function uI(r,n,o){if(!kt.isObject(r))throw new TypeError("target must be an object");n=n||new FormData;const a=(o=kt.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,x){return!kt.isUndefined(x[L])})).metaTokens,l=o.visitor||y,d=o.dots,h=o.indexes,v=(o.Blob||typeof Blob<"u"&&Blob)&&kt.isSpecCompliantForm(n);if(!kt.isFunction(l))throw new TypeError("visitor must be a function");function _(L){if(L===null)return"";if(kt.isDate(L))return L.toISOString();if(!v&&kt.isBlob(L))throw new Yn("Blob is not supported. Use a Buffer instead.");return kt.isArrayBuffer(L)||kt.isTypedArray(L)?v&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function y(L,x,X){let G=L;if(L&&!X&&typeof L=="object"){if(kt.endsWith(x,"{}"))x=a?x:x.slice(0,-2),L=JSON.stringify(L);else if(kt.isArray(L)&&function(q){return kt.isArray(q)&&!q.some(yx)}(L)||(kt.isFileList(L)||kt.endsWith(x,"[]"))&&(G=kt.toArray(L)))return x=TK(x),G.forEach(function(q,Ae){!kt.isUndefined(q)&&q!==null&&n.append(h===!0?RK([x],Ae,d):h===null?x:x+"[]",_(q))}),!1}return!!yx(L)||(n.append(RK(X,x,d),_(L)),!1)}const C=[],B=Object.assign(z_e,{defaultVisitor:y,convertValue:_,isVisitable:yx});if(!kt.isObject(r))throw new TypeError("data must be an object");return function L(x,X){if(!kt.isUndefined(x)){if(C.indexOf(x)!==-1)throw Error("Circular reference detected in "+X.join("."));C.push(x),kt.forEach(x,function(G,q){(!(kt.isUndefined(G)||G===null)&&l.call(n,G,kt.isString(q)?nc(q).call(q):q,X,B))===!0&&L(G,X?X.concat(q):[q])}),C.pop()}}(r),n}function IK(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function Ex(r,n){this._pairs=[],r&&uI(r,this,n)}const OK=Ex.prototype;function q_e(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function NK(r,n,o){if(!n)return r;const a=o&&o.encode||q_e;kt.isFunction(o)&&(o={serialize:o});const l=o&&o.serialize;let d;if(d=l?l(n,o):kt.isURLSearchParams(n)?n.toString():new Ex(n,o).toString(a),d){const h=r.indexOf("#");h!==-1&&(r=r.slice(0,h)),r+=(r.indexOf("?")===-1?"?":"&")+d}return r}OK.append=function(r,n){this._pairs.push([r,n])},OK.toString=function(r){const n=r?function(o){return r.call(this,o,IK)}:IK;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};var BK=class{constructor(){this.handlers=[]}use(r,n,o){return this.handlers.push({fulfilled:r,rejected:n,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){kt.forEach(this.handlers,function(n){n!==null&&r(n)})}},LK={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PK={exports:{}},Y_e=Ye,X_e=ge,kK=Gs.f;Y_e({target:"Object",stat:!0,forced:Object.defineProperty!==kK,sham:!X_e},{defineProperty:kK});var DK=Nt.Object,J_e=PK.exports=function(r,n,o){return DK.defineProperty(r,n,o)};DK.defineProperty.sham&&(J_e.sham=!0);var xK=c(PK.exports),Z_e=TypeError,UK=mu,eye=mA,tye=qt,rye=Bn("species"),MK=Array,nye=function(r){var n;return UK(r)&&(n=r.constructor,(eye(n)&&(n===MK||UK(n.prototype))||tye(n)&&(n=n[rye])===null)&&(n=void 0)),n===void 0?MK:n},FK=function(r,n){return new(nye(r))(n===0?0:n)},iye=u,oye=on,sye=Bn("species"),VK=function(r){return oye>=51||!iye(function(){var n=[];return(n.constructor={})[sye]=function(){return{foo:1}},n[r](Boolean).foo!==1})},aye=Ye,cye=u,lye=mu,uye=qt,Aye=Ks,dye=Ss,QK=function(r){if(r>9007199254740991)throw Z_e("Maximum allowed index exceeded");return r},HK=xD,fye=FK,hye=VK,pye=on,jK=Bn("isConcatSpreadable"),gye=pye>=51||!cye(function(){var r=[];return r[jK]=!1,r.concat()[0]!==r}),mye=function(r){if(!uye(r))return!1;var n=r[jK];return n!==void 0?!!n:lye(r)};aye({target:"Array",proto:!0,arity:1,forced:!gye||!hye("concat")},{concat:function(r){var n,o,a,l,d,h=Aye(this),v=fye(h,0),_=0;for(n=-1,a=arguments.length;n<a;n++)if(mye(d=n===-1?h:arguments[n]))for(l=dye(d),QK(_+l),o=0;o<l;o++,_++)o in d&&HK(v,_,d[o]);else QK(_+1),HK(v,_++,d);return v.length=_,v}});var KK={},vye=fe,_ye=He,WK=bf.f,yye=Xl,GK=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];KK.f=function(r){return GK&&vye(r)==="Window"?function(n){try{return WK(n)}catch{return yye(GK)}}(r):WK(_ye(r))};var ay={},Eye=Bn;ay.f=Eye;var $K=Nt,wye=Di,Sye=ay,bye=Gs.f,Bs=function(r){var n=$K.Symbol||($K.Symbol={});wye(n,r)||bye(n,r,{value:Sye.f(r)})},Cye=Me,Tye=ar,Rye=Bn,Iye=lp,zK=function(){var r=Tye("Symbol"),n=r&&r.prototype,o=n&&n.valueOf,a=Rye("toPrimitive");n&&!n[a]&&Iye(n,a,function(l){return Cye(o,this)},{arity:1})},Oye=Hc,Nye=Ze,Bye=Ks,Lye=Ss,Pye=FK,qK=T([].push),ev=function(r){var n=r===1,o=r===2,a=r===3,l=r===4,d=r===6,h=r===7,v=r===5||d;return function(_,y,C,B){for(var L,x,X=Bye(_),G=Nye(X),q=Lye(G),Ae=Oye(y,C),ue=0,_e=B||Pye,De=n?_e(_,q):o||h?_e(_,0):void 0;q>ue;ue++)if((v||ue in G)&&(x=Ae(L=G[ue],ue,X),r))if(n)De[ue]=x;else if(x)switch(r){case 3:return!0;case 5:return L;case 6:return ue;case 2:qK(De,L)}else switch(r){case 4:return!1;case 7:qK(De,L)}return d?-1:a||l?l:De}},YK={forEach:ev(0),map:ev(1),filter:ev(2),some:ev(3),every:ev(4),find:ev(5),findIndex:ev(6),filterReject:ev(7)},AI=Ye,gS=P,wx=Me,kye=T,cy=ge,ly=rn,Dye=u,wc=Di,xye=N,Sx=wo,dI=He,bx=eA,Uye=bo,Cx=Ue,uy=Si,XK=Ie,Mye=bf,JK=KK,Fye=Zh,ZK=ae,eW=Gs,Vye=Ee,tW=Be,rW=lp,Qye=ye,Tx=Oa,nW=_u,iW=Ws,Hye=Bn,jye=ay,Kye=Bs,Wye=zK,Gye=Df,oW=cp,fI=YK.forEach,Ru=Ad("hidden"),hI="Symbol",mS="prototype",$ye=oW.set,sW=oW.getterFor(hI),Qf=Object[mS],q0=gS.Symbol,pI=q0&&q0[mS],zye=gS.RangeError,qye=gS.TypeError,Rx=gS.QObject,aW=ZK.f,Y0=eW.f,cW=JK.f,Yye=tW.f,lW=kye([].push),Pg=Tx("symbols"),vS=Tx("op-symbols"),Xye=Tx("wks"),Ix=!Rx||!Rx[mS]||!Rx[mS].findChild,uW=function(r,n,o){var a=aW(Qf,n);a&&delete Qf[n],Y0(r,n,o),a&&r!==Qf&&Y0(Qf,n,a)},Ox=cy&&Dye(function(){return uy(Y0({},"a",{get:function(){return Y0(this,"a",{value:7}).a}})).a!==7})?uW:Y0,Nx=function(r,n){var o=Pg[r]=uy(pI);return $ye(o,{type:hI,tag:r,description:n}),cy||(o.description=n),o},gI=function(r,n,o){r===Qf&&gI(vS,n,o),Sx(r);var a=bx(n);return Sx(o),wc(Pg,a)?(o.enumerable?(wc(r,Ru)&&r[Ru][a]&&(r[Ru][a]=!1),o=uy(o,{enumerable:Cx(0,!1)})):(wc(r,Ru)||Y0(r,Ru,Cx(1,uy(null))),r[Ru][a]=!0),Ox(r,a,o)):Y0(r,a,o)},Bx=function(r,n){Sx(r);var o=dI(n),a=XK(o).concat(hW(o));return fI(a,function(l){cy&&!wx(AW,o,l)||gI(r,l,o[l])}),r},AW=function(r){var n=bx(r),o=wx(Yye,this,n);return!(this===Qf&&wc(Pg,n)&&!wc(vS,n))&&(!(o||!wc(this,n)||!wc(Pg,n)||wc(this,Ru)&&this[Ru][n])||o)},dW=function(r,n){var o=dI(r),a=bx(n);if(o!==Qf||!wc(Pg,a)||wc(vS,a)){var l=aW(o,a);return!l||!wc(Pg,a)||wc(o,Ru)&&o[Ru][a]||(l.enumerable=!0),l}},fW=function(r){var n=cW(dI(r)),o=[];return fI(n,function(a){wc(Pg,a)||wc(nW,a)||lW(o,a)}),o},hW=function(r){var n=r===Qf,o=cW(n?vS:dI(r)),a=[];return fI(o,function(l){!wc(Pg,l)||n&&!wc(Qf,l)||lW(a,Pg[l])}),a};ly||(q0=function(){if(xye(pI,this))throw new qye("Symbol is not a constructor");var r=arguments.length&&arguments[0]!==void 0?Uye(arguments[0]):void 0,n=iW(r),o=function(a){var l=this===void 0?gS:this;l===Qf&&wx(o,vS,a),wc(l,Ru)&&wc(l[Ru],n)&&(l[Ru][n]=!1);var d=Cx(1,a);try{Ox(l,n,d)}catch(h){if(!(h instanceof zye))throw h;uW(l,n,d)}};return cy&&Ix&&Ox(Qf,n,{configurable:!0,set:o}),Nx(n,r)},rW(pI=q0[mS],"toString",function(){return sW(this).tag}),rW(q0,"withoutSetter",function(r){return Nx(iW(r),r)}),tW.f=AW,eW.f=gI,Vye.f=Bx,ZK.f=dW,Mye.f=JK.f=fW,Fye.f=hW,jye.f=function(r){return Nx(Hye(r),r)},cy&&Qye(pI,"description",{configurable:!0,get:function(){return sW(this).description}})),AI({global:!0,constructor:!0,wrap:!0,forced:!ly,sham:!ly},{Symbol:q0}),fI(XK(Xye),function(r){Kye(r)}),AI({target:hI,stat:!0,forced:!ly},{useSetter:function(){Ix=!0},useSimple:function(){Ix=!1}}),AI({target:"Object",stat:!0,forced:!ly,sham:!cy},{create:function(r,n){return n===void 0?uy(r):Bx(uy(r),n)},defineProperty:gI,defineProperties:Bx,getOwnPropertyDescriptor:dW}),AI({target:"Object",stat:!0,forced:!ly},{getOwnPropertyNames:fW}),Wye(),Gye(q0,hI),nW[Ru]=!0;var pW=rn&&!!Symbol.for&&!!Symbol.keyFor,Jye=Ye,Zye=ar,eEe=Di,tEe=bo,gW=Oa,rEe=pW,Lx=gW("string-to-symbol-registry"),nEe=gW("symbol-to-string-registry");Jye({target:"Symbol",stat:!0,forced:!rEe},{for:function(r){var n=tEe(r);if(eEe(Lx,n))return Lx[n];var o=Zye("Symbol")(n);return Lx[n]=o,nEe[o]=n,o}});var iEe=Ye,oEe=Di,sEe=Qr,aEe=wi,cEe=pW,mW=Oa("symbol-to-string-registry");iEe({target:"Symbol",stat:!0,forced:!cEe},{keyFor:function(r){if(!sEe(r))throw new TypeError(aEe(r)+" is not a symbol");if(oEe(mW,r))return mW[r]}});var vW=mu,lEe=le,_W=fe,uEe=bo,yW=T([].push),AEe=Ye,EW=ar,wW=V,dEe=Me,_S=T,SW=u,bW=le,CW=Qr,TW=Xl,fEe=function(r){if(lEe(r))return r;if(vW(r)){for(var n=r.length,o=[],a=0;a<n;a++){var l=r[a];typeof l=="string"?yW(o,l):typeof l!="number"&&_W(l)!=="Number"&&_W(l)!=="String"||yW(o,uEe(l))}var d=o.length,h=!0;return function(v,_){if(h)return h=!1,_;if(vW(this))return _;for(var y=0;y<d;y++)if(o[y]===v)return _}}},hEe=rn,pEe=String,tv=EW("JSON","stringify"),mI=_S(/./.exec),RW=_S("".charAt),gEe=_S("".charCodeAt),mEe=_S("".replace),vEe=_S(1 .toString),_Ee=/[\uD800-\uDFFF]/g,IW=/^[\uD800-\uDBFF]$/,OW=/^[\uDC00-\uDFFF]$/,NW=!hEe||SW(function(){var r=EW("Symbol")("stringify detection");return tv([r])!=="[null]"||tv({a:r})!=="{}"||tv(Object(r))!=="{}"}),BW=SW(function(){return tv("\uDF06\uD834")!=='"\\udf06\\ud834"'||tv("\uDEAD")!=='"\\udead"'}),yEe=function(r,n){var o=TW(arguments),a=fEe(n);if(bW(a)||r!==void 0&&!CW(r))return o[1]=function(l,d){if(bW(a)&&(d=dEe(a,this,pEe(l),d)),!CW(d))return d},wW(tv,null,o)},EEe=function(r,n,o){var a=RW(o,n-1),l=RW(o,n+1);return mI(IW,r)&&!mI(OW,l)||mI(OW,r)&&!mI(IW,a)?"\\u"+vEe(gEe(r,0),16):r};tv&&AEe({target:"JSON",stat:!0,arity:3,forced:NW||BW},{stringify:function(r,n,o){var a=TW(arguments),l=wW(NW?yEe:tv,null,a);return BW&&typeof l=="string"?mEe(l,_Ee,EEe):l}});var LW=Zh,wEe=Ks;Ye({target:"Object",stat:!0,forced:!rn||u(function(){LW.f(1)})},{getOwnPropertySymbols:function(r){var n=LW.f;return n?n(wEe(r)):[]}}),Bs("asyncIterator"),Bs("hasInstance"),Bs("isConcatSpreadable"),Bs("iterator"),Bs("match"),Bs("matchAll"),Bs("replace"),Bs("search"),Bs("species"),Bs("split");var SEe=zK;Bs("toPrimitive"),SEe();var bEe=ar,CEe=Df;Bs("toStringTag"),CEe(bEe("Symbol"),"Symbol"),Bs("unscopables"),Df(P.JSON,"JSON",!0);var TEe=Nt.Symbol,REe=Bn,IEe=Gs.f,PW=REe("metadata"),kW=Function.prototype;kW[PW]===void 0&&IEe(kW,PW,{value:null}),Bs("asyncDispose"),Bs("dispose"),Bs("metadata");var OEe=TEe,NEe=T,Px=ar("Symbol"),BEe=Px.keyFor,LEe=NEe(Px.prototype.valueOf),DW=Px.isRegisteredSymbol||function(r){try{return BEe(LEe(r))!==void 0}catch{return!1}};Ye({target:"Symbol",stat:!0},{isRegisteredSymbol:DW});for(var PEe=Oa,xW=ar,kEe=T,DEe=Qr,xEe=Bn,vI=xW("Symbol"),UW=vI.isWellKnownSymbol,MW=xW("Object","getOwnPropertyNames"),UEe=kEe(vI.prototype.valueOf),FW=PEe("wks"),kx=0,VW=MW(vI),MEe=VW.length;kx<MEe;kx++)try{var QW=VW[kx];DEe(vI[QW])&&xEe(QW)}catch{}var HW=function(r){if(UW&&UW(r))return!0;try{for(var n=UEe(r),o=0,a=MW(FW),l=a.length;o<l;o++)if(FW[a[o]]==n)return!0}catch{}return!1};Ye({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:HW}),Bs("customMatcher"),Bs("observable"),Ye({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:DW}),Ye({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:HW}),Bs("matcher"),Bs("metadataKey"),Bs("patternMatch"),Bs("replaceAll");var Ay=c(OEe),jW=c(ay.f("iterator"));function yS(r){return yS=typeof Ay=="function"&&typeof jW=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Ay=="function"&&n.constructor===Ay&&n!==Ay.prototype?"symbol":typeof n},yS(r)}var FEe=c(ay.f("toPrimitive"));function VEe(r){var n=function(o,a){if(yS(o)!="object"||!o)return o;var l=o[FEe];if(l!==void 0){var d=l.call(o,a||"default");if(yS(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(o)}(r,"string");return yS(n)=="symbol"?n:n+""}function re(r,n,o){return(n=VEe(n))in r?xK(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}var KW=c(H0e),QEe={isBrowser:!0,classes:{URLSearchParams:KW!==void 0?KW:Ex,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]};const Dx=typeof window<"u"&&typeof document<"u",xx=typeof navigator=="object"&&navigator||void 0,HEe=Dx&&(!xx||["ReactNative","NativeScript","NS"].indexOf(xx.product)<0),jEe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",KEe=Dx&&window.location.href||"http://localhost";function WW(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function GW(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?WW(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):WW(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}var El=GW(GW({},Object.freeze({__proto__:null,hasBrowserEnv:Dx,hasStandardBrowserEnv:HEe,hasStandardBrowserWebWorkerEnv:jEe,navigator:xx,origin:KEe})),QEe),WEe=wo,GEe=Me,$Ee=Di,zEe=N,qEe=function(){var r=WEe(this),n="";return r.hasIndices&&(n+="d"),r.global&&(n+="g"),r.ignoreCase&&(n+="i"),r.multiline&&(n+="m"),r.dotAll&&(n+="s"),r.unicode&&(n+="u"),r.unicodeSets&&(n+="v"),r.sticky&&(n+="y"),n},$W=RegExp.prototype,zW=function(r){var n=r.flags;return n!==void 0||"flags"in $W||$Ee(r,"flags")||!zEe($W,r)?n:GEe(qEe,r)},YEe=wD.charAt,qW=Me,XEe=wo,JEe=le,ZEe=fe,ewe=/./.exec,twe=TypeError,rwe=Ye,YW=Me,XW=Y,nwe=H_,_I=Ig,JW=Ot,ZW=ca,ES=bo,iwe=wo,owe=qt,swe=fe,awe=ff,eG=zW,cwe=_s,lwe=u,uwe=Ua,Awe=function(r,n,o){return n+(o?YEe(r,n).length:1)},dwe=function(r,n){var o=r.exec;if(JEe(o)){var a=qW(o,r,n);return a!==null&&XEe(a),a}if(ZEe(r)==="RegExp")return qW(ewe,r,n);throw new twe("RegExp#exec called on incompatible receiver")},tG=cp,fwe=Bn("matchAll"),rG="RegExp String",nG=rG+" Iterator",hwe=tG.set,pwe=tG.getterFor(nG),gwe=TypeError,Ux=XW("".indexOf),yI=XW("".matchAll),Mx=!!yI&&!lwe(function(){yI("a",/./)}),mwe=nwe(function(r,n,o,a){hwe(this,{type:nG,regexp:r,string:n,global:o,unicode:a,done:!1})},rG,function(){var r=pwe(this);if(r.done)return _I(void 0,!0);var n=r.regexp,o=r.string,a=dwe(n,o);return a===null?(r.done=!0,_I(void 0,!0)):r.global?(ES(a[0])===""&&(n.lastIndex=Awe(o,ZW(n.lastIndex),r.unicode)),_I(a,!1)):(r.done=!0,_I(a,!1))}),iG=function(r){var n,o,a,l=iwe(this),d=ES(r),h=uwe(l,RegExp),v=ES(eG(l));return n=new h(h===RegExp?l.source:l,v),o=!!~Ux(v,"g"),a=!!~Ux(v,"u"),n.lastIndex=ZW(l.lastIndex),new mwe(n,d,o,a)};rwe({target:"String",proto:!0,forced:Mx},{matchAll:function(r){var n,o,a,l,d=JW(this);if(owe(r)){if(awe(r)&&(n=ES(JW(eG(r))),!~Ux(n,"g")))throw new gwe("`.matchAll` does not allow non-global regexes");if(Mx)return yI(d,r);if((a=cwe(r,fwe))===void 0&&swe(r)==="RegExp"&&(a=iG),a)return YW(a,r,d)}else if(Mx)return yI(d,r);return o=ES(d),l=new RegExp(r,"g"),YW(iG,l,o)}});var vwe=Po("String","matchAll"),_we=N,ywe=vwe,Fx=String.prototype,Ewe=function(r){var n=r.matchAll;return typeof r=="string"||r===Fx||_we(Fx,r)&&n===Fx.matchAll?ywe:n},wwe=c(Ewe);function oG(r){function n(o,a,l,d){let h=o[d++];if(h==="__proto__")return!0;const v=Number.isFinite(+h),_=d>=o.length;return h=!h&&kt.isArray(l)?l.length:h,_?(kt.hasOwnProp(l,h)?l[h]=[l[h],a]:l[h]=a,!v):(l[h]&&kt.isObject(l[h])||(l[h]=[]),n(o,a,l[h],d)&&kt.isArray(l[h])&&(l[h]=function(y){const C={},B=Object.keys(y);let L;const x=B.length;let X;for(L=0;L<x;L++)X=B[L],C[X]=y[X];return C}(l[h])),!v)}if(kt.isFormData(r)&&kt.isFunction(r.entries)){const o={};return kt.forEachEntry(r,(a,l)=>{n(function(d){return wwe(kt).call(kt,/\w+|\[(\w*)]/g,d).map(h=>h[0]==="[]"?"":h[1]||h[0])}(a),l,o,0)}),o}return null}const Vx={transitional:LK,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,l=kt.isObject(r);if(l&&kt.isHTMLForm(r)&&(r=new FormData(r)),kt.isFormData(r))return a?JSON.stringify(oG(r)):r;if(kt.isArrayBuffer(r)||kt.isBuffer(r)||kt.isStream(r)||kt.isFile(r)||kt.isBlob(r)||kt.isReadableStream(r))return r;if(kt.isArrayBufferView(r))return r.buffer;if(kt.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let d;if(l){if(o.indexOf("application/x-www-form-urlencoded")>-1)return function(h,v){return uI(h,new El.classes.URLSearchParams,Object.assign({visitor:function(_,y,C,B){return El.isNode&&kt.isBuffer(_)?(this.append(y,_.toString("base64")),!1):B.defaultVisitor.apply(this,arguments)}},v))}(r,this.formSerializer).toString();if((d=kt.isFileList(r))||o.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return uI(d?{"files[]":r}:r,h&&new h,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),function(h,v,_){if(kt.isString(h))try{return(v||JSON.parse)(h),nc(kt).call(kt,h)}catch(y){if(y.name!=="SyntaxError")throw y}return(_||JSON.stringify)(h)}(r)):r}],transformResponse:[function(r){const n=this.transitional||Vx.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(kt.isResponse(r)||kt.isReadableStream(r))return r;if(r&&kt.isString(r)&&(o&&!this.responseType||a)){const l=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(r)}catch(d){if(l)throw d.name==="SyntaxError"?Yn.from(d,Yn.ERR_BAD_RESPONSE,this,null,this.response):d}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:El.classes.FormData,Blob:El.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};kt.forEach(["delete","get","head","post","put","patch"],r=>{Vx.headers[r]={}});var Qx=Vx;const Swe=kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sG=Symbol("internals");function wS(r){var n;return r&&nc(n=String(r)).call(n).toLowerCase()}function EI(r){return r===!1||r==null?r:kt.isArray(r)?r.map(EI):String(r)}function Hx(r,n,o,a,l){return kt.isFunction(a)?a.call(this,n,o):(l&&(n=o),kt.isString(n)?kt.isString(a)?n.indexOf(a)!==-1:kt.isRegExp(a)?a.test(n):void 0:void 0)}class wI{constructor(n){n&&this.set(n)}set(n,o,a){const l=this;function d(_,y,C){const B=wS(y);if(!B)throw new Error("header name must be a non-empty string");const L=kt.findKey(l,B);(!L||l[L]===void 0||C===!0||C===void 0&&l[L]!==!1)&&(l[L||y]=EI(_))}const h=(_,y)=>kt.forEach(_,(C,B)=>d(C,B,y));if(kt.isPlainObject(n)||n instanceof this.constructor)h(n,o);else if(kt.isString(n)&&(n=nc(n).call(n))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(nc(v=n).call(v)))h((_=>{const y={};let C,B,L;return _&&_.split(`
`).forEach(function(x){var X,G;L=x.indexOf(":"),C=nc(X=x.substring(0,L)).call(X).toLowerCase(),B=nc(G=x.substring(L+1)).call(G),!C||y[C]&&Swe[C]||(C==="set-cookie"?y[C]?y[C].push(B):y[C]=[B]:y[C]=y[C]?y[C]+", "+B:B)}),y})(n),o);else if(kt.isObject(n)&&kt.isIterable(n)){let _,y,C={};for(const B of n){if(!kt.isArray(B))throw TypeError("Object iterator must return a key-value pair");C[y=B[0]]=(_=C[y])?kt.isArray(_)?[..._,B[1]]:[_,B[1]]:B[1]}h(C,o)}else n!=null&&d(o,n,a);var v;return this}get(n,o){if(n=wS(n)){const a=kt.findKey(this,n);if(a){const l=this[a];if(!o)return l;if(o===!0)return function(d){const h=Object.create(null),v=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let _;for(;_=v.exec(d);)h[_[1]]=_[2];return h}(l);if(kt.isFunction(o))return o.call(this,l,a);if(kt.isRegExp(o))return o.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,o){if(n=wS(n)){const a=kt.findKey(this,n);return!(!a||this[a]===void 0||o&&!Hx(0,this[a],a,o))}return!1}delete(n,o){const a=this;let l=!1;function d(h){if(h=wS(h)){const v=kt.findKey(a,h);!v||o&&!Hx(0,a[v],v,o)||(delete a[v],l=!0)}}return kt.isArray(n)?n.forEach(d):d(n),l}clear(n){const o=Object.keys(this);let a=o.length,l=!1;for(;a--;){const d=o[a];n&&!Hx(0,this[d],d,n,!0)||(delete this[d],l=!0)}return l}normalize(n){const o=this,a={};return kt.forEach(this,(l,d)=>{var h;const v=kt.findKey(a,d);if(v)return o[v]=EI(l),void delete o[d];const _=n?function(y){return nc(y).call(y).toLowerCase().replace(/([a-z\d])(\w*)/g,(C,B,L)=>B.toUpperCase()+L)}(d):nc(h=String(d)).call(h);_!==d&&delete o[d],o[_]=EI(l),a[_]=!0}),this}concat(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return this.constructor.concat(this,...o)}toJSON(n){const o=Object.create(null);return kt.forEach(this,(a,l)=>{a!=null&&a!==!1&&(o[l]=n&&kt.isArray(a)?a.join(", "):a)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(n=>{let[o,a]=n;return o+": "+a}).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n){const o=new this(n);for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return l.forEach(h=>o.set(h)),o}static accessor(n){const o=(this[sG]=this[sG]={accessors:{}}).accessors,a=this.prototype;function l(d){const h=wS(d);o[h]||(function(v,_){const y=kt.toCamelCase(" "+_);["get","set","has"].forEach(C=>{Object.defineProperty(v,C+y,{value:function(B,L,x){return this[C].call(this,_,B,L,x)},configurable:!0})})}(a,d),o[h]=!0)}return kt.isArray(n)?n.forEach(l):l(n),this}}wI.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),kt.reduceDescriptors(wI.prototype,(r,n)=>{let{value:o}=r,a=n[0].toUpperCase()+n.slice(1);return{get:()=>o,set(l){this[a]=l}}}),kt.freezeMethods(wI);var Hf=wI;function jx(r,n){const o=this||Qx,a=n||o,l=Hf.from(a.headers);let d=a.data;return kt.forEach(r,function(h){d=h.call(o,d,l.normalize(),n?n.status:void 0)}),l.normalize(),d}function aG(r){return!(!r||!r.__CANCEL__)}function dy(r,n,o){Yn.call(this,r??"canceled",Yn.ERR_CANCELED,n,o),this.name="CanceledError"}function cG(r,n,o){const a=o.config.validateStatus;o.status&&a&&!a(o.status)?n(new Yn("Request failed with status code "+o.status,[Yn.ERR_BAD_REQUEST,Yn.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o)):r(o)}kt.inherits(dy,Yn,{__CANCEL__:!0});const SI=function(r,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,a=0;const l=function(d,h){d=d||10;const v=new Array(d),_=new Array(d);let y,C=0,B=0;return h=h!==void 0?h:1e3,function(L){const x=Date.now(),X=_[B];y||(y=x),v[C]=L,_[C]=x;let G=B,q=0;for(;G!==C;)q+=v[G++],G%=d;if(C=(C+1)%d,C===B&&(B=(B+1)%d),x-y<h)return;const Ae=X&&x-X;return Ae?Math.round(1e3*q/Ae):void 0}}(50,250);return function(d,h){let v,_,y=0,C=1e3/h;const B=function(L){y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Date.now(),v=null,_&&(clearTimeout(_),_=null),d.apply(null,L)};return[function(){const L=Date.now(),x=L-y;for(var X=arguments.length,G=new Array(X),q=0;q<X;q++)G[q]=arguments[q];x>=C?B(G,L):(v=G,_||(_=setTimeout(()=>{_=null,B(v)},C-x)))},()=>v&&B(v)]}(d=>{const h=d.loaded,v=d.lengthComputable?d.total:void 0,_=h-a,y=l(_);a=h,r({loaded:h,total:v,progress:v?h/v:void 0,bytes:_,rate:y||void 0,estimated:y&&v&&h<=v?(v-h)/y:void 0,event:d,lengthComputable:v!=null,[n?"download":"upload"]:!0})},o)},lG=(r,n)=>{const o=r!=null;return[a=>n[0]({lengthComputable:o,total:r,loaded:a}),n[1]]},uG=r=>function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return kt.asap(()=>r(...o))};var bwe=El.hasStandardBrowserEnv?((r,n)=>o=>(o=new XR(o,El.origin),r.protocol===o.protocol&&r.host===o.host&&(n||r.port===o.port)))(new XR(El.origin),El.navigator&&/(msie|trident)/i.test(El.navigator.userAgent)):()=>!0,Cwe=El.hasStandardBrowserEnv?{write(r,n,o,a,l,d){const h=[r+"="+encodeURIComponent(n)];kt.isNumber(o)&&h.push("expires="+new Date(o).toGMTString()),kt.isString(a)&&h.push("path="+a),kt.isString(l)&&h.push("domain="+l),d===!0&&h.push("secure"),document.cookie=h.join("; ")},read(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function AG(r,n,o){let a=!function(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}(n);return r&&(a||o==0)?function(l,d){return d?l.replace(/\/?\/$/,"")+"/"+d.replace(/^\/+/,""):l}(r,n):n}function dG(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}const fG=r=>r instanceof Hf?function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?dG(Object(a),!0).forEach(function(l){re(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):dG(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}({},r):r;function X0(r,n){n=n||{};const o={};function a(y,C,B,L){return kt.isPlainObject(y)&&kt.isPlainObject(C)?kt.merge.call({caseless:L},y,C):kt.isPlainObject(C)?kt.merge({},C):kt.isArray(C)?C.slice():C}function l(y,C,B,L){return kt.isUndefined(C)?kt.isUndefined(y)?void 0:a(void 0,y,0,L):a(y,C,0,L)}function d(y,C){if(!kt.isUndefined(C))return a(void 0,C)}function h(y,C){return kt.isUndefined(C)?kt.isUndefined(y)?void 0:a(void 0,y):a(void 0,C)}function v(y,C,B){return B in n?a(y,C):B in r?a(void 0,y):void 0}const _={url:d,method:d,data:d,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:v,headers:(y,C,B)=>l(fG(y),fG(C),0,!0)};return kt.forEach(Object.keys(Object.assign({},r,n)),function(y){const C=_[y]||l,B=C(r[y],n[y],y);kt.isUndefined(B)&&C!==v||(o[y]=B)}),o}var hG=r=>{const n=X0({},r);let o,{data:a,withXSRFToken:l,xsrfHeaderName:d,xsrfCookieName:h,headers:v,auth:_}=n;if(n.headers=v=Hf.from(v),n.url=NK(AG(n.baseURL,n.url,n.allowAbsoluteUrls),r.params,r.paramsSerializer),_&&v.set("Authorization","Basic "+btoa((_.username||"")+":"+(_.password?unescape(encodeURIComponent(_.password)):""))),kt.isFormData(a)){if(El.hasStandardBrowserEnv||El.hasStandardBrowserWebWorkerEnv)v.setContentType(void 0);else if((o=v.getContentType())!==!1){const[y,...C]=o?o.split(";").map(B=>nc(B).call(B)).filter(Boolean):[];v.setContentType([y||"multipart/form-data",...C].join("; "))}}if(El.hasStandardBrowserEnv&&(l&&kt.isFunction(l)&&(l=l(n)),l||l!==!1&&bwe(n.url))){const y=d&&h&&Cwe.read(h);y&&v.set(d,y)}return n},Twe=typeof XMLHttpRequest<"u"&&function(r){return new Mt(function(n,o){const a=hG(r);let l=a.data;const d=Hf.from(a.headers).normalize();let h,v,_,y,C,{responseType:B,onUploadProgress:L,onDownloadProgress:x}=a;function X(){y&&y(),C&&C(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let G=new XMLHttpRequest;function q(){if(!G)return;const ue=Hf.from("getAllResponseHeaders"in G&&G.getAllResponseHeaders());cG(function(_e){n(_e),X()},function(_e){o(_e),X()},{data:B&&B!=="text"&&B!=="json"?G.response:G.responseText,status:G.status,statusText:G.statusText,headers:ue,config:r,request:G}),G=null}G.open(a.method.toUpperCase(),a.url,!0),G.timeout=a.timeout,"onloadend"in G?G.onloadend=q:G.onreadystatechange=function(){G&&G.readyState===4&&(G.status!==0||G.responseURL&&G.responseURL.indexOf("file:")===0)&&setTimeout(q)},G.onabort=function(){G&&(o(new Yn("Request aborted",Yn.ECONNABORTED,r,G)),G=null)},G.onerror=function(){o(new Yn("Network Error",Yn.ERR_NETWORK,r,G)),G=null},G.ontimeout=function(){let ue=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const _e=a.transitional||LK;a.timeoutErrorMessage&&(ue=a.timeoutErrorMessage),o(new Yn(ue,_e.clarifyTimeoutError?Yn.ETIMEDOUT:Yn.ECONNABORTED,r,G)),G=null},l===void 0&&d.setContentType(null),"setRequestHeader"in G&&kt.forEach(d.toJSON(),function(ue,_e){G.setRequestHeader(_e,ue)}),kt.isUndefined(a.withCredentials)||(G.withCredentials=!!a.withCredentials),B&&B!=="json"&&(G.responseType=a.responseType),x&&([_,C]=SI(x,!0),G.addEventListener("progress",_)),L&&G.upload&&([v,y]=SI(L),G.upload.addEventListener("progress",v),G.upload.addEventListener("loadend",y)),(a.cancelToken||a.signal)&&(h=ue=>{G&&(o(!ue||ue.type?new dy(null,r,G):ue),G.abort(),G=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const Ae=function(ue){const _e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(ue);return _e&&_e[1]||""}(a.url);Ae&&El.protocols.indexOf(Ae)===-1?o(new Yn("Unsupported protocol "+Ae+":",Yn.ERR_BAD_REQUEST,r)):G.send(l||null)})},Rwe=(r,n)=>{const{length:o}=r=r?r.filter(Boolean):[];if(n||o){let a,l=new AbortController;const d=function(y){if(!a){a=!0,v();const C=y instanceof Error?y:this.reason;l.abort(C instanceof Yn?C:new dy(C instanceof Error?C.message:C))}};let h=n&&setTimeout(()=>{h=null,d(new Yn("timeout ".concat(n," of ms exceeded"),Yn.ETIMEDOUT))},n);const v=()=>{r&&(h&&clearTimeout(h),h=null,r.forEach(y=>{y.unsubscribe?y.unsubscribe(d):y.removeEventListener("abort",d)}),r=null)};r.forEach(y=>y.addEventListener("abort",d));const{signal:_}=l;return _.unsubscribe=()=>kt.asap(v),_}},Kx=c(t7),pG=ay.f("asyncIterator"),Iwe=c(pG);function Wx(r,n){this.v=r,this.k=n}function _A(r){return function(){return new SS(r.apply(this,arguments))}}function SS(r){var n,o;function a(d,h){try{var v=r[d](h),_=v.value,y=_ instanceof Wx;Kx.resolve(y?_.v:_).then(function(C){if(y){var B=d==="return"?"return":"next";if(!_.k||C.done)return a(B,C);C=r[B](C).value}l(v.done?"return":"normal",C)},function(C){a("throw",C)})}catch(C){l("throw",C)}}function l(d,h){switch(d){case"return":n.resolve({value:h,done:!0});break;case"throw":n.reject(h);break;default:n.resolve({value:h,done:!1})}(n=n.next)?a(n.key,n.arg):o=null}this._invoke=function(d,h){return new Kx(function(v,_){var y={key:d,arg:h,resolve:v,reject:_,next:null};o?o=o.next=y:(n=o=y,a(d,h))})},typeof r.return!="function"&&(this.return=void 0)}function mn(r){return new Wx(r,0)}function bI(r){var n={},o=!1;function a(l,d){return o=!0,d=new Kx(function(h){h(r[l](d))}),{done:!1,value:new Wx(d,1)}}return n[Ay!==void 0&&jW||"@@iterator"]=function(){return this},n.next=function(l){return o?(o=!1,l):a("next",l)},typeof r.throw=="function"&&(n.throw=function(l){if(o)throw o=!1,l;return a("throw",l)}),typeof r.return=="function"&&(n.return=function(l){return o?(o=!1,l):a("return",l)}),n}SS.prototype[typeof Ay=="function"&&Iwe||"@@asyncIterator"]=function(){return this},SS.prototype.next=function(r){return this._invoke("next",r)},SS.prototype.throw=function(r){return this._invoke("throw",r)},SS.prototype.return=function(r){return this._invoke("return",r)};var Gx=c(pG);function $x(r){var n,o,a,l=2;for(typeof Symbol<"u"&&(o=Gx,a=Symbol.iterator);l--;){if(o&&(n=r[o])!=null)return n.call(r);if(a&&(n=r[a])!=null)return new CI(n.call(r));o="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function CI(r){function n(o){if(Object(o)!==o)return Mt.reject(new TypeError(o+" is not an object."));var a=o.done;return Mt.resolve(o.value).then(function(l){return{value:l,done:a}})}return CI=function(o){this.s=o,this.n=o.next},CI.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(o){var a=this.s.return;return a===void 0?Mt.resolve({value:o,done:!0}):n(a.apply(this.s,arguments))},throw:function(o){var a=this.s.return;return a===void 0?Mt.reject(o):n(a.apply(this.s,arguments))}},new CI(r)}const Owe=function*(r,n){let o=r.byteLength;if(!n||o<n)return void(yield r);let a,l=0;for(;l<o;)a=l+n,yield r.slice(l,a),l=a},Nwe=function(){var r=_A(function*(n,o){var a,l=!1,d=!1;try{for(var h,v=$x(Bwe(n));l=!(h=yield mn(v.next())).done;l=!1){const _=h.value;yield*bI($x(Owe(_,o)))}}catch(_){d=!0,a=_}finally{try{l&&v.return!=null&&(yield mn(v.return()))}finally{if(d)throw a}}});return function(n,o){return r.apply(this,arguments)}}(),Bwe=function(){var r=_A(function*(n){if(n[Gx])return void(yield*bI($x(n)));const o=n.getReader();try{for(;;){const{done:a,value:l}=yield mn(o.read());if(a)break;yield l}}finally{yield mn(o.cancel())}});return function(n){return r.apply(this,arguments)}}(),gG=(r,n,o,a)=>{const l=Nwe(r,n);let d,h=0,v=_=>{d||(d=!0,a&&a(_))};return new ReadableStream({async pull(_){try{const{done:y,value:C}=await l.next();if(y)return v(),void _.close();let B=C.byteLength;if(o){let L=h+=B;o(L)}_.enqueue(new Uint8Array(C))}catch(y){throw v(y),y}},cancel:_=>(v(_),l.return())},{highWaterMark:2})};function mG(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function vG(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?mG(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):mG(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const TI=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_G=TI&&typeof ReadableStream=="function",Lwe=TI&&(typeof TextEncoder=="function"?(yG=new TextEncoder,r=>yG.encode(r)):async r=>new Uint8Array(await new Response(r).arrayBuffer()));var yG;const EG=function(r){try{for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return!!r(...o)}catch{return!1}},Pwe=_G&&EG(()=>{let r=!1;const n=new Request(El.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!n}),zx=_G&&EG(()=>kt.isReadableStream(new Response("").body)),RI={stream:zx&&(r=>r.body)};var wG;TI&&(wG=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!RI[r]&&(RI[r]=kt.isFunction(wG[r])?n=>n[r]():(n,o)=>{throw new Yn("Response type '".concat(r,"' is not supported"),Yn.ERR_NOT_SUPPORT,o)})}));const kwe=async(r,n)=>{const o=kt.toFiniteNumber(r.getContentLength());return o??(async a=>a==null?0:kt.isBlob(a)?a.size:kt.isSpecCompliantForm(a)?(await new Request(El.origin,{method:"POST",body:a}).arrayBuffer()).byteLength:kt.isArrayBufferView(a)||kt.isArrayBuffer(a)?a.byteLength:(kt.isURLSearchParams(a)&&(a+=""),kt.isString(a)?(await Lwe(a)).byteLength:void 0))(n)};var Dwe=TI&&(async r=>{let{url:n,method:o,data:a,signal:l,cancelToken:d,timeout:h,onDownloadProgress:v,onUploadProgress:_,responseType:y,headers:C,withCredentials:B="same-origin",fetchOptions:L}=hG(r);y=y?(y+"").toLowerCase():"text";let x,X=Rwe([l,d&&d.toAbortSignal()],h);const G=X&&X.unsubscribe&&(()=>{X.unsubscribe()});let q;try{if(_&&Pwe&&o!=="get"&&o!=="head"&&(q=await kwe(C,a))!==0){let Le,Te=new Request(n,{method:"POST",body:a,duplex:"half"});if(kt.isFormData(a)&&(Le=Te.headers.get("content-type"))&&C.setContentType(Le),Te.body){const[ze,rt]=lG(q,SI(uG(_)));a=gG(Te.body,65536,ze,rt)}}kt.isString(B)||(B=B?"include":"omit");const Ae="credentials"in Request.prototype;x=new Request(n,vG(vG({},L),{},{signal:X,method:o.toUpperCase(),headers:C.normalize().toJSON(),body:a,duplex:"half",credentials:Ae?B:void 0}));let ue=await fetch(x);const _e=zx&&(y==="stream"||y==="response");if(zx&&(v||_e&&G)){const Le={};["status","statusText","headers"].forEach(At=>{Le[At]=ue[At]});const Te=kt.toFiniteNumber(ue.headers.get("content-length")),[ze,rt]=v&&lG(Te,SI(uG(v),!0))||[];ue=new Response(gG(ue.body,65536,ze,()=>{rt&&rt(),G&&G()}),Le)}y=y||"text";let De=await RI[kt.findKey(RI,y)||"text"](ue,r);return!_e&&G&&G(),await new Mt((Le,Te)=>{cG(Le,Te,{data:De,headers:Hf.from(ue.headers),status:ue.status,statusText:ue.statusText,config:r,request:x})})}catch(Ae){throw G&&G(),Ae&&Ae.name==="TypeError"&&/Load failed|fetch/i.test(Ae.message)?Object.assign(new Yn("Network Error",Yn.ERR_NETWORK,r,x),{cause:Ae.cause||Ae}):Yn.from(Ae,Ae&&Ae.code,r,x)}});const qx={http:null,xhr:Twe,fetch:Dwe};kt.forEach(qx,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const SG=r=>"- ".concat(r),xwe=r=>kt.isFunction(r)||r===null||r===!1;var bG={getAdapter:r=>{r=kt.isArray(r)?r:[r];const{length:n}=r;let o,a;const l={};for(let d=0;d<n;d++){let h;if(o=r[d],a=o,!xwe(o)&&(a=qx[(h=String(o)).toLowerCase()],a===void 0))throw new Yn("Unknown adapter '".concat(h,"'"));if(a)break;l[h||"#"+d]=a}if(!a){const d=Object.entries(l).map(h=>{let[v,_]=h;return"adapter ".concat(v," ")+(_===!1?"is not supported by the environment":"is not available in the build")});throw new Yn("There is no suitable adapter to dispatch the request "+(n?d.length>1?`since :
`+d.map(SG).join(`
`):" "+SG(d[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:qx};function Yx(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new dy(null,r)}function CG(r){return Yx(r),r.headers=Hf.from(r.headers),r.data=jx.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),bG.getAdapter(r.adapter||Qx.adapter)(r).then(function(n){return Yx(r),n.data=jx.call(r,r.transformResponse,n),n.headers=Hf.from(n.headers),n},function(n){return aG(n)||(Yx(r),n&&n.response&&(n.response.data=jx.call(r,r.transformResponse,n.response),n.response.headers=Hf.from(n.response.headers))),Mt.reject(n)})}const TG="1.9.0",II={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{II[r]=function(o){return typeof o===r||"a"+(n<1?"n ":" ")+r}});const RG={};II.transitional=function(r,n,o){function a(l,d){return"[Axios v"+TG+"] Transitional option '"+l+"'"+d+(o?". "+o:"")}return(l,d,h)=>{if(r===!1)throw new Yn(a(d," has been removed"+(n?" in "+n:"")),Yn.ERR_DEPRECATED);return n&&!RG[d]&&(RG[d]=!0,console.warn(a(d," has been deprecated since v"+n+" and will be removed in the near future"))),!r||r(l,d,h)}},II.spelling=function(r){return(n,o)=>(console.warn("".concat(o," is likely a misspelling of ").concat(r)),!0)};var OI={assertOptions:function(r,n,o){if(typeof r!="object")throw new Yn("options must be an object",Yn.ERR_BAD_OPTION_VALUE);const a=Object.keys(r);let l=a.length;for(;l-- >0;){const d=a[l],h=n[d];if(h){const v=r[d],_=v===void 0||h(v,d,r);if(_!==!0)throw new Yn("option "+d+" must be "+_,Yn.ERR_BAD_OPTION_VALUE)}else if(o!==!0)throw new Yn("Unknown option "+d,Yn.ERR_BAD_OPTION)}},validators:II};const fp=OI.validators;let NI=class{constructor(r){this.defaults=r||{},this.interceptors={request:new BK,response:new BK}}async request(r,n){try{return await this._request(r,n)}catch(o){if(o instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{o.stack?l&&!String(o.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+l):o.stack=l}catch{}}throw o}}_request(r,n){typeof r=="string"?(n=n||{}).url=r:n=r||{},n=X0(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:l}=n;o!==void 0&&OI.assertOptions(o,{silentJSONParsing:fp.transitional(fp.boolean),forcedJSONParsing:fp.transitional(fp.boolean),clarifyTimeoutError:fp.transitional(fp.boolean)},!1),a!=null&&(kt.isFunction(a)?n.paramsSerializer={serialize:a}:OI.assertOptions(a,{encode:fp.function,serialize:fp.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),OI.assertOptions(n,{baseUrl:fp.spelling("baseURL"),withXsrfToken:fp.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=l&&kt.merge(l.common,l[n.method]);l&&kt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete l[x]}),n.headers=Hf.concat(d,l);const h=[];let v=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(v=v&&x.synchronous,h.unshift(x.fulfilled,x.rejected))});const _=[];let y;this.interceptors.response.forEach(function(x){_.push(x.fulfilled,x.rejected)});let C,B=0;if(!v){const x=[CG.bind(this),void 0];for(x.unshift.apply(x,h),x.push.apply(x,_),C=x.length,y=Mt.resolve(n);B<C;)y=y.then(x[B++],x[B++]);return y}C=h.length;let L=n;for(B=0;B<C;){const x=h[B++],X=h[B++];try{L=x(L)}catch(G){X.call(this,G);break}}try{y=CG.call(this,L)}catch(x){return Mt.reject(x)}for(B=0,C=_.length;B<C;)y=y.then(_[B++],_[B++]);return y}getUri(r){return NK(AG((r=X0(this.defaults,r)).baseURL,r.url,r.allowAbsoluteUrls),r.params,r.paramsSerializer)}};kt.forEach(["delete","get","head","options"],function(r){NI.prototype[r]=function(n,o){return this.request(X0(o||{},{method:r,url:n,data:(o||{}).data}))}}),kt.forEach(["post","put","patch"],function(r){function n(o){return function(a,l,d){return this.request(X0(d||{},{method:r,headers:o?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}NI.prototype[r]=n(),NI.prototype[r+"Form"]=n(!0)});var BI=NI;class Xx{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Mt(function(l){o=l});const a=this;this.promise.then(l=>{if(!a._listeners)return;let d=a._listeners.length;for(;d-- >0;)a._listeners[d](l);a._listeners=null}),this.promise.then=l=>{let d;const h=new Mt(v=>{a.subscribe(v),d=v}).then(l);return h.cancel=function(){a.unsubscribe(d)},h},n(function(l,d,h){a.reason||(a.reason=new dy(l,d,h),o(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const n=new AbortController,o=a=>{n.abort(a)};return this.subscribe(o),n.signal.unsubscribe=()=>this.unsubscribe(o),n.signal}static source(){let n;return{token:new Xx(function(a){n=a}),cancel:n}}}var Uwe=Xx;const Jx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jx).forEach(r=>{let[n,o]=r;Jx[o]=n});var Mwe=Jx;const Ma=function r(n){const o=new BI(n),a=fK(BI.prototype.request,o);return kt.extend(a,BI.prototype,o,{allOwnKeys:!0}),kt.extend(a,o,null,{allOwnKeys:!0}),a.create=function(l){return r(X0(n,l))},a}(Qx);Ma.Axios=BI,Ma.CanceledError=dy,Ma.CancelToken=Uwe,Ma.isCancel=aG,Ma.VERSION=TG,Ma.toFormData=uI,Ma.AxiosError=Yn,Ma.Cancel=Ma.CanceledError,Ma.all=function(r){return Mt.all(r)},Ma.spread=function(r){return function(n){return r.apply(null,n)}},Ma.isAxiosError=function(r){return kt.isObject(r)&&r.isAxiosError===!0},Ma.mergeConfig=X0,Ma.AxiosHeaders=Hf,Ma.formToJSON=r=>oG(kt.isHTMLForm(r)?new FormData(r):r),Ma.getAdapter=bG.getAdapter,Ma.HttpStatusCode=Mwe,Ma.default=Ma;var Yc=Ma;const Fwe=()=>{};function bS(){const r={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:Fwe};return r.promise=new Mt((n,o)=>{r.resolve=a=>{r.isFinished||(r.isResolved=!0,r.isFinished=!0,n(a),r.value=a)},r.reject=a=>{r.isFinished||(r.isRejected=!0,r.isFinished=!0,o(a))}}),r}const LI=new Map,PI=new Map,hp=new Map;let is=function(r){return r.WIN_10="Windows 10",r.WIN_81="Windows 8.1",r.WIN_8="Windows 8",r.WIN_7="Windows 7",r.WIN_VISTA="Windows Vista",r.WIN_SERVER_2003="Windows Server 2003",r.WIN_XP="Windows XP",r.WIN_2000="Windows 2000",r.ANDROID="Android",r.HARMONY_OS="HarmonyOS",r.OPEN_BSD="Open BSD",r.SUN_OS="Sun OS",r.LINUX="Linux",r.IOS="iOS",r.MAC_OS="Mac OS",r.CHROMIUM_OS="Chromium OS",r.QNX="QNX",r.UNIX="UNIX",r.BEOS="BeOS",r.OS_2="OS/2",r.SEARCH_BOT="Search Bot",r}({}),Sn=function(r){return r.CHROME="Chrome",r.SAFARI="Safari",r.EDGE="Edge",r.FIREFOX="Firefox",r.OPERA="OPR",r.QQ="QQBrowser",r.WECHAT="MicroMessenger",r}({});const Zx=new g_e;let jf=Zx.getResult(),e5=null;function hn(r){if(!e5){r&&Zx.setUA(r),jf=Zx.getResult();const n=function(v){if(v.engine.name==="Blink"&&v.browser.name!=="WeChat")return Sn.CHROME;switch(v.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Sn.CHROME;case"Safari":case"Mobile Safari":return Sn.SAFARI;case"Edge":return Sn.EDGE;case"Firefox":return Sn.FIREFOX;case"QQ":case"QQBrowser":return Sn.QQ;case"Opera":return Sn.OPERA;case"WeChat":return Sn.WECHAT;default:return v.browser.name||""}}(jf),o=IG(jf),a=function(v){return v.os.name==="Windows"?v.os.version?v.os.name+" "+v.os.version:v.os.name:v.os.name||""}(jf),l=jf.os.version,d=IG(jf,!1),h=jf.device.type;if(!(n&&o&&a&&l))return{name:n,version:o,os:a,osVersion:l,browserVersion:d,deviceType:h};e5={name:n,version:o,os:a,osVersion:l,browserVersion:d,deviceType:h}}return e5}function IG(r){let n,o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return n=r.engine.name==="Blink"?r.engine.version||"":r.browser.version||"",o?n.split(".")[0]:n}function kI(){return hn().os}function OG(){const r=hn();return"".concat(r.os," ").concat(r.osVersion)}function DI(){const r=hn();return!!(jf.engine.name==="WebKit"&&r.os===is.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&r.name!==Sn.SAFARI||Fa()&&r.name!==Sn.SAFARI)}function kg(){return hn().name===Sn.CHROME}function Js(){return hn().name===Sn.SAFARI}function NG(){const r=hn();if(r.name!==Sn.SAFARI||!r.browserVersion)return!1;const n=r.browserVersion.split(".");return Number(n[0])>15||Number(n[0])===15&&Number(n[1])>=4}function BG(){return hn().name===Sn.EDGE}function Hi(){return hn().name===Sn.FIREFOX}function Fa(){return hn().os===is.IOS}function fy(r){const n=hn();return!(n.name!==Sn.CHROME||!n.osVersion)&&Number(n.version)>=r}function LG(r){const n=hn();return!(n.name!==Sn.CHROME||!n.osVersion)&&Number(n.version)<r}function t5(r,n,o){const a=hn();return!(a.name!==r||!a.osVersion)&&(o?Number(a.version)>=n&&Number(a.version)<=o:Number(a.version)===n)}function r5(r){const n=hn();return!(n.name!==Sn.EDGE||!n.osVersion)&&Number(n.version)>=r}function n5(r){const n=hn();return!(n.name!==Sn.FIREFOX||!n.osVersion)&&Number(n.version)>=r}function PG(r){const n=hn();return!(n.name!==Sn.SAFARI||!n.osVersion)&&Number(n.version)>=r}function kG(r,n,o){const a=hn();if(a.os!==is.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return o?n&&Number(l[0])===r&&Number(l[1])>n||Number(l[0])>r:n?Number(l[0])===r&&Number(l[1])>=n||Number(l[0])>r:Number(l[0])>=r}function DG(r,n,o){const a=hn();if(a.os!==is.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return o?n&&Number(l[0])===r&&Number(l[1])<n||Number(l[0])<r:n?Number(l[0])===r&&Number(l[1])<=n||Number(l[0])<r:Number(l[0])<=r}function i5(r,n,o){const a=hn();if(a.name!==Sn.SAFARI||!a.osVersion||!a.browserVersion)return!1;const l=a.browserVersion.split(".");return o?n&&Number(l[0])===r&&Number(l[1])<n||Number(l[0])<r:n?Number(l[0])===r&&Number(l[1])<=n||Number(l[0])<r:Number(l[0])<=r}function o5(r){const n=hn();return!(n.name!==Sn.OPERA||!n.osVersion)&&Number(n.version)>=r}function xG(){const r=hn();if(r.os!==is.IOS||!r.osVersion)return!1;const n=r.osVersion.split(".");return Number(n[0])<14||Number(n[0])===14&&Number(n[1])<=6}function hy(){const r=hn();if(r.os!==is.IOS||!r.osVersion)return!1;const n=r.osVersion.split(".");return Number(n[0])===15}function s5(){const r=hn();if(r.os!==is.IOS||!r.osVersion)return!1;const n=r.osVersion.split(".");return Number(n[0])===16}function UG(){const r=hn();if(r.os!==is.IOS||!r.osVersion)return!1;const n=r.osVersion.split(".");return Number(n[0])===15&&Number(n[1])>=1}function wd(){return Js()&&navigator.maxTouchPoints>0}function MG(){return hn().name===Sn.WECHAT}function FG(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function a5(){const r=kI();return function(){const{deviceType:n}=hn();return n==="mobile"||n==="tablet"}()||r===is.ANDROID||r===is.IOS||r===is.HARMONY_OS}function Dg(){const r=hn();return r.name!==Sn.EDGE&&r.name!==Sn.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function xI(){return kI()===is.ANDROID}function CS(){const r=hn();return xI()&&(r.name===Sn.CHROME||r.name===Sn.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function Pr(r,n,o){return(n=function(a){var l=function(d,h){if(typeof d!="object"||!d)return d;var v=d[Symbol.toPrimitive];if(v!==void 0){var _=v.call(d,"string");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}(a);return typeof l=="symbol"?l:l+""}(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}function VG(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function St(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?VG(Object(o),!0).forEach(function(a){Pr(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):VG(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}let de=function(r){return r.UNEXPECTED_ERROR="UNEXPECTED_ERROR",r.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",r.TIMEOUT="TIMEOUT",r.INVALID_PARAMS="INVALID_PARAMS",r.NOT_READABLE="NOT_READABLE",r.NOT_SUPPORTED="NOT_SUPPORTED",r.INVALID_OPERATION="INVALID_OPERATION",r.OPERATION_ABORTED="OPERATION_ABORTED",r.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",r.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",r.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",r.DATACHANNEL_FAILED="DATACHANNEL_FAILED",r.NETWORK_ERROR="NETWORK_ERROR",r.NETWORK_TIMEOUT="NETWORK_TIMEOUT",r.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",r.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",r.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",r.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",r.ELECTRON_IS_NULL="ELECTRON_IS_NULL",r.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",r.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",r.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",r.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",r.PERMISSION_DENIED="PERMISSION_DENIED",r.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",r.TRACK_IS_DISABLED="TRACK_IS_DISABLED",r.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",r.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",r.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",r.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",r.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",r.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",r.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",r.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",r.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",r.UID_CONFLICT="UID_CONFLICT",r.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",r.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",r.TOKEN_EXPIRE="TOKEN_EXPIRE",r.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",r.INVALID_TRACK="INVALID_TRACK",r.SENDER_NOT_FOUND="SENDER_NOT_FOUND",r.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",r.SET_ANSWER_FAILED="SET_ANSWER_FAILED",r.ICE_FAILED="ICE_FAILED",r.PC_CLOSED="PC_CLOSED",r.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",r.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",r.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",r.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",r.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",r.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",r.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",r.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",r.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",r.INVALID_REMOTE_USER="INVALID_REMOTE_USER",r.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",r.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",r.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",r.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",r.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",r.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",r.WS_ABORT="WS_ABORT",r.WS_DISCONNECT="WS_DISCONNECT",r.WS_ERR="WS_ERR",r.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",r.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",r.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",r.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",r.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",r.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",r.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",r.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",r.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",r.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",r.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",r.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",r.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",r.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",r.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",r.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",r.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",r.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",r.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",r.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",r.INVALID_PLUGIN="INVALID_PLUGIN",r.DISCONNECT_P2P="DISCONNECT_P2P",r.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",r.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",r.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",r.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",r.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",r.PROHIBITED_OPERATION="PROHIBITED_OPERATION",r.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",r.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",r}({}),tt=class extends Error{constructor(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0;super(n),Pr(this,"code",void 0),Pr(this,"message",void 0),Pr(this,"data",void 0),Pr(this,"name","AgoraRTCException"),this.code=r,this.message="AgoraRTCError ".concat(this.code,": ").concat(n),this.data=o}toString(){return this.data?"".concat(this.message,`
data: `).concat(JSON.stringify(this.data)):this.message}print(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",n=arguments.length>1?arguments[1]:void 0;return r==="error"&&(n||console).error(this.toString()),r==="warning"&&(n||console).warn(this.toString()),this}throw(r){throw this.print("error",r),this}};function Kf(r,n){if(typeof r!="boolean")throw new tt(de.INVALID_PARAMS,"Invalid ".concat(n,": The value is of the boolean type."))}function qo(r,n,o){if(!_t(o).call(o,r))throw new tt(de.INVALID_PARAMS,"".concat(n," can only be set as ").concat(JSON.stringify(o)))}function Xn(r,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(r<o||r>a||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(l){return typeof l=="number"&&l%1==0}(r))throw new tt(de.INVALID_PARAMS,"invalid ".concat(n,": the value range is [").concat(o,", ").concat(a,"]. integer only"))}function c5(r,n){if(typeof r!="number"){if(!(r.min||r.max||r.ideal||r.exact))throw new tt(de.INVALID_PARAMS,"".concat(n," is not a valid ConstrainLong"));r.min!==void 0&&Xn(r.min,"".concat(n,".min"),0,1/0),r.max!==void 0&&Xn(r.max,"".concat(n,".max"),1,1/0),r.exact!==void 0&&Xn(r.exact,"".concat(n,".exact"),1,1/0),r.ideal!==void 0&&Xn(r.ideal,"".concat(n,".ideal"),1,1/0)}else Xn(r,n,1,1/0)}function Ls(r,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(r==null)throw new tt(de.INVALID_PARAMS,"".concat(n||"param"," cannot be empty"));if(!QG(r,o,a,l))throw new tt(de.INVALID_PARAMS,"Invalid ".concat(n||"string param",": Length of the string: [").concat(o,",").concat(a,"].").concat(l?" ASCII characters only.":""))}function xg(r,n){if(!Array.isArray(r))throw new tt(de.INVALID_PARAMS,"".concat(n," should be an array"))}function ji(r){return r==null}function QG(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof r=="string"&&r.length<=o&&r.length>=n&&(!a||function(l){if(typeof l!="string")return!1;for(let d=0;d<l.length;d+=1){const h=l.charCodeAt(d);if(h<0||h>255)return!1}return!0}(r))}var TS=function(r){return r.COVERED="COVERED",r.POSITION="POSITION",r.SIZE="SIZE",r.STYLE="STYLE",r}(TS||{}),l5=function(r){return r.UNMOUNTED="UNMOUNTED",r.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",r}(l5||{});const HG=new class{constructor(){Pr(this,"_clientSize",null),Pr(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),Pr(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),Pr(this,"getStyle",r=>window.getComputedStyle(r,null)),Pr(this,"checkCssVisibleProperty",r=>{var n;let o=!0;const a=this.getStyle(r),{display:l,visibility:d,opacity:h,filter:v}=a;return(l==="none"||_t(n=["hidden","collapse"]).call(n,d)||Number(h)<.1)&&(o=!1),!!o&&(v&&v.split(" ").filter(_=>{var y;const C=_.split("(")[0];return _t(y=["brightness","blur","opacity"]).call(y,C)}).map(_=>{const[y,C]=_.split(/\(|\)/);return[y,Number(C.match(/^[0-9\.]+/))]}).forEach(_=>{const[y,C]=_;switch(y){case"brightness":(C<.1||C>3)&&(o=!1);break;case"blur":C>3&&(o=!1);break;case"opacity":C<.1&&(o=!1)}}),o)}),Pr(this,"checkPropertyUpToAllParentNodes",(r,n)=>{let o=!0,a=!0;const l=h=>n(h);let d=r;for(;d&&a;)l(d)||(o=!1,a=!1),d=d.parentElement,d||(a=!1);return o}),Pr(this,"checkActualCssVisibleIncludeInherit",r=>this.checkPropertyUpToAllParentNodes(r,this.checkCssVisibleProperty)),Pr(this,"getSizeAboutClient",r=>{const{width:n,height:o,left:a,right:l,top:d,bottom:h}=r.getBoundingClientRect(),v=this.getClientWidth(),_=this.getClientHeight();return{width:n,height:o,left:a,right:l,top:d,bottom:h,clientWidth:v,clientHeight:_,clientMin:Math.min(v,_)}}),Pr(this,"checkActualSize",()=>{const{width:r,height:n,clientMin:o}=this._clientSize;return this.checkSizeIsVisible(r,n,o)}),Pr(this,"elementFromPoint",(r,n)=>document.elementFromPoint?document.elementFromPoint(r,n):null),Pr(this,"checkCoverForAPoint",(r,n,o)=>{const a=this.elementFromPoint(r,n);return a!==null&&a!==o}),Pr(this,"getPointPositionList",()=>{const{width:r,height:n,left:o,top:a}=this._clientSize,l=r/6,d=n/6,h=[],v=10**6;for(let _=0;_<5;_++)for(let y=0;y<5;y++){const C=(o*v+(_===0?.1:_===4?(l*_*v-1e5)/v:l*_)*v)/v,B=(a*v+(y===0?.1:y===4?(d*y*v-1e5)/v:d*y)*v)/v;h.push({x:C,y:B})}return[...h]}),Pr(this,"checkElementCover",r=>this.getPointPositionList().map(n=>this.checkCoverForAPoint(n.x,n.y,r)).filter(n=>!!n).length>6),Pr(this,"checkSizeIsVisible",(r,n,o)=>(r>50||o/r<=10)&&(n>50||o/n<=10)),Pr(this,"checkSizeOfPartInClient",()=>{const{left:r,right:n,top:o,bottom:a,clientHeight:l,clientWidth:d,clientMin:h}=this._clientSize;let v,_,y,C;if(r<0)v=0;else{if(!(r<d))return!1;v=r}if(n<0)return!1;if(_=n<d?n:d,o<0)y=0;else{if(!(o<l))return!1;y=o}if(a<0)return!1;C=a<l?a:l;const B=_-v,L=C-y;return this.checkSizeIsVisible(B,L,h)}),Pr(this,"returnHiddenResult",r=>(this._clientSize=null,{visible:!1,reason:r})),Pr(this,"checkOneElementVisible",r=>{if(r instanceof HTMLElement){if(this.checkElementIsMountedOnDom(r)){if(this.checkActualCssVisibleIncludeInherit(r)){if(this._clientSize=this.getSizeAboutClient(r),this.checkElementCover(r))return this.returnHiddenResult(TS.COVERED);{const n=this.checkActualSize(),o=this.checkSizeOfPartInClient();return n&&!o?this.returnHiddenResult(TS.POSITION):n?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(TS.SIZE)}}return this.returnHiddenResult(TS.STYLE)}return this.returnHiddenResult(l5.UNMOUNTED)}return this.returnHiddenResult(l5.INVALID_HTML_ELEMENT)}),Pr(this,"checkElementIsMountedOnDom",r=>this.checkPropertyUpToAllParentNodes(r,n=>n.nodeName.toUpperCase()!=="HTML"?n.parentElement!==null:!!document.documentElement))}};function u5(r){return new TextEncoder().encode(r)}const jG=function(r,n){const o=new Uint8Array(r.byteLength+n.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(n),r.byteLength),o},A5=async r=>function(n,o){let a="";return new Uint8Array(n).forEach(l=>{a+=l.toString(o).padStart(2,"0")}),a}(await crypto.subtle.digest("SHA-256",u5(r)),16);class Mi{constructor(){Pr(this,"_events",{}),Pr(this,"addListener",this.on)}getListeners(n){return this._events[n]?this._events[n].map(o=>o.listener):[]}on(n,o){this._events[n]||(this._events[n]=[]);const a=this._events[n];this._indexOfListener(a,o)===-1&&a.push({listener:o,once:!1})}once(n,o){this._events[n]||(this._events[n]=[]);const a=this._events[n];this._indexOfListener(a,o)===-1&&a.push({listener:o,once:!0})}off(n,o){if(!this._events[n])return;const a=this._events[n],l=this._indexOfListener(a,o);l!==-1&&a.splice(l,1),this._events[n].length===0&&delete this._events[n]}removeAllListeners(n){n?delete this._events[n]:this._events={}}emit(n){this._events[n]||(this._events[n]=[]);const o=this._events[n].map(h=>h);for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];for(let h=0;h<o.length;h+=1){const v=o[h];v.once&&this.off(n,v.listener),v.listener.apply(this,l||[])}}safeEmit(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];[...this._events[n]||[]].forEach(d=>{d.once&&this.off(n,d.listener);try{d.listener.apply(this,a)}catch(h){console.error("safeEmit event:".concat(n," error ").concat(h==null?void 0:h.toString()))}})}_indexOfListener(n,o){let a=n.length;for(;a--;)if(n[a].listener===o)return a;return-1}}let RS=null;function KG(){if(RS)return RS;if(window.electron)return RS=window.electron;if(!window.require)return null;try{return RS=window.require("electron"),RS}catch{return null}}let Ji=function(r){return r.CREATE_CLIENT="createClient",r.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",r.SET_AREA="setArea",r.PRELOAD="PRELOAD",r.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",r.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",r.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",r.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",r.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",r.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",r.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",r.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",r.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",r.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",r.START_PROXY_SERVER="Client.startProxyServer",r.STOP_PROXY_SERVER="Client.stopProxyServer",r.SET_PROXY_SERVER="Client.setProxyServer",r.SET_TURN_SERVER="Client.setTurnServer",r.SET_CLIENT_ROLE="Client.setClientRole",r.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",r.ENABLE_DUAL_STREAM="Client.enableDualStream",r.DISABLE_DUAL_STREAM="Client.disableDualStream",r.JOIN="Client.join",r.LEAVE="Client.leave",r.PUBLISH="Client.publish",r.UNPUBLISH="Client.unpublish",r.SUBSCRIBE="Client.subscribe",r.MASS_SUBSCRIBE="Client.massSubscribe",r.MASS_UNSUBSCRIBE="Client.massUnsubscribe",r.UNSUBSCRIBE="Client.unsubscribe",r.RENEW_TOKEN="Client.renewToken",r.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",r.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",r.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",r.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",r.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",r.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",r.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",r.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",r.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",r.START_LIVE_STREAMING="Client.startLiveStreaming",r.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",r.STOP_LIVE_STREAMING="Client.stopLiveStreaming",r.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",r.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",r.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",r.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",r.SET_CONFIG_DISTRIBUTE="_configDistribute",r.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",r.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",r.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",r.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",r.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",r.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",r.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",r.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",r.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",r.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",r.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",r.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",r.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",r.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",r.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",r.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",r.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",r.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",r.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",r.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",r.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",r.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",r.STREAM_TYPE_CHANGE="streamTypeChange",r.CONNECTION_STATE_CHANGE="connectionStateChange",r.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",r.IMAGE_MODERATION_UPLOAD="imageModerationUpload",r.REPUB_AFTER_PC_CONNECTED="repubAfterPCConnected",r.PRELOAD_MEDIA_FAILED="preloadMediaFailed",r.MISMATCH_DTLS_PARAMETERS="mismatchDtlsParameters",r}({}),Oi=function(r){return r.TRACER="tracer",r}({});function WG(r){return Xn(r.timeout,"config.timeout",0,1e5),Xn(r.timeoutFactor,"config.timeoutFactor",0,100,!1),Xn(r.maxRetryCount,"config.maxRetryConfig",0,1/0),Xn(r.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let Vwe=function(r){return r[r.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",r[r.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",r[r.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",r}({}),Dn=function(r){return r.LEAVE="LEAVE",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.UID_BANNED="UID_BANNED",r.FALLBACK="FALLBACK",r.IP_BANNED="IP_BANNED",r.CHANNEL_BANNED="CHANNEL_BANNED",r.LICENSE_MISSING="LICENSE_MISSING",r.LICENSE_EXPIRED="LICENSE_EXPIRED",r.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",r.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",r.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",r.LICENSE_ILLEGAL="LICENSE_ILLEGAL",r.TOKEN_EXPIRE="TOKEN_EXPIRE",r}({});function IS(r){if(!Array.isArray(r)||r.length<1)return!1;try{r.forEach(n=>{if(!n.urls)throw Error()})}catch{return!1}return!0}function GG(r){return Ls(r.turnServerURL,"turnServerURL"),Ls(r.username,"username"),Ls(r.password,"password"),r.udpport&&Xn(r.udpport,"udpport",1,99999,!0),r.forceturn&&Kf(r.forceturn,"forceturn"),r.security&&Kf(r.security,"security"),r.tcpport&&Xn(r.tcpport,"tcpport",1,99999,!0),!0}function d5(r){return r.level!==void 0&&qo(r.level,"level",[1,2,3]),r.delay!==void 0&&Xn(r.delay,"delay",0,3e3,!0),!0}let un=function(r){return r.PEERCONNECTION_STATE_CHANGE="peerconnection-state-change",r.AUDIO_METADATA="audio-metadata",r.AUDIO_PTS="audio-pts",r.CONNECTION_STATE_CHANGE="connection-state-change",r.MEDIA_RECONNECT_START="media-reconnect-start",r.MEDIA_RECONNECT_END="media-reconnect-end",r.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",r.USER_JOINED="user-joined",r.USER_LEAVED="user-left",r.USER_PUBLISHED="user-published",r.USER_UNPUBLISHED="user-unpublished",r.USER_INFO_UPDATED="user-info-updated",r.CLIENT_BANNED="client-banned",r.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",r.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",r.VOLUME_INDICATOR="volume-indicator",r.CRYPT_ERROR="crypt-error",r.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",r.NETWORK_QUALITY="network-quality",r.STREAM_TYPE_CHANGED="stream-type-changed",r.STREAM_FALLBACK="stream-fallback",r.RECEIVE_METADATA="receive-metadata",r.STREAM_MESSAGE="stream-message",r.LIVE_STREAMING_ERROR="live-streaming-error",r.LIVE_STREAMING_WARNING="live-streaming-warning",r.EXCEPTION="exception",r.ERROR="error",r.P2P_LOST="p2p_lost",r.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",r.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",r.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",r.PUBLISHED_USER_LIST="published-user-list",r.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",r.CONTENT_INSPECT_ERROR="content-inspect-error",r.CONTENT_INSPECT_RESULT="content-inspect-result",r.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",r}({}),Zs=function(r){return r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.MULTI_IP="MULTI_IP",r.TIMEOUT="TIMEOUT",r.OFFLINE="OFFLINE",r.LEAVE="LEAVE",r.P2P_FAILED="P2P_FAILED",r.FALLBACK="FALLBACK",r.REGIONAL_DISTRIBUTION="REGIONAL_DISTRIBUTION",r}({}),tu=function(r){return r.ONLINE="ONLINE",r.OFFLINE="OFFLINE",r}({}),py=function(r){return r.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",r.ONLINE="ONLINE",r.OFFLINE="OFFLINE",r}({});function ea(r,n){for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];return r.getListeners(n).length===0?Mt.reject(new tt(de.UNEXPECTED_ERROR,"can not emit promise")):new Mt((d,h)=>{r.emit(n,...a,d,h)})}function ni(r,n){if(r.getListeners(n).length===0)return Mt.resolve();for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];return ea(r,n,...a)}function Iu(r,n){if(r.getListeners(n).length===0)return null;for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];return OS(r,n,...a)}function OS(r,n){let o=null,a=null;for(var l=arguments.length,d=new Array(l>2?l-2:0),h=2;h<l;h++)d[h-2]=arguments[h];if(r.emit(n,...d,v=>{o=v},v=>{a=v}),a!==null)throw a;if(o===null)throw new tt(de.UNEXPECTED_ERROR,"handler is not sync");return o}const ho=new class extends Mi{set networkState(r){this.emit(py.NETWORK_STATE_CHANGE,r,this._networkState),r===tu.ONLINE?this.emit(py.ONLINE):r===tu.OFFLINE&&(this.onlineWaiter=new Mt(n=>{this.once(py.ONLINE,()=>{this.onlineWaiter=void 0,n(tu.ONLINE)})}),this.emit(py.OFFLINE)),this._networkState=r}get networkState(){return this._networkState}get isOnline(){return this._networkState===tu.ONLINE}constructor(){super(),Pr(this,"_moduleName","network-indicator"),Pr(this,"_networkState",tu.ONLINE),Pr(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=tu.ONLINE}),window.addEventListener("offline",()=>{this.networkState=tu.OFFLINE})}};function UI(r,n){const o=r.indexOf(n);o!==-1&&r.splice(o,1)}function gy(r){const n=[];return r.forEach(o=>{n.indexOf(o)===-1&&n.push(o)}),n}function MI(r){Mt!==void 0?Mt.resolve().then(r):setTimeout(r,0)}function Ni(r){return JSON.parse(JSON.stringify(r))}function J0(r){try{return Ni(r)}catch{return r}}const $G={};function rv(r,n){$G[n]||($G[n]=!0,r())}function Z0(r){const n=window.atob(r),o=new Uint8Array(new ArrayBuffer(n.length));for(let a=0;a<n.length;a+=1)o[a]=n.charCodeAt(a);return o}function nv(r){let n="";for(let o=0;o<r.length;o+=1)n+=String.fromCharCode(r[o]);return window.btoa(n)}function zG(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,o=new TextEncoder().encode(r);if(o.length>n)o=o.slice(0,n);else if(o.length<n){const a=new Uint8Array(n);a.set(o),o=a}return o}function qG(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const a=ka(n).call(n,(h,v)=>h+v.length,0),l=new Uint8Array(new ArrayBuffer(a));let d=0;return n.forEach(h=>{l.set(h,d),d+=h.length}),l}function pp(r){return window.TextEncoder?new TextEncoder().encode(r).length:r.length}function YG(r){let n=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&r.realFormData&&(r=r.realFormData),r.forEach(o=>{n+=typeof o=="string"?pp(o):o.size}),n+138}function Qwe(r){const n=new tt(de.TIMEOUT,"timeout");return new Mt((o,a)=>{window.setTimeout(()=>a(n),r)})}function Ps(r){return new Mt(n=>{window.setTimeout(n,r)})}function ii(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,n=arguments.length>1?arguments[1]:void 0;const o=Math.random().toString(16).substr(2,r).toLowerCase();return o.length===r?"".concat(n).concat(o):"".concat(n).concat(o)+ii(r-o.length,"")}function e1(){return ii(32,"").toUpperCase()}const FI=()=>{},XG=new class{constructor(){Pr(this,"fnMap",new Map)}throttleByKey(r,n,o,a){for(var l=arguments.length,d=new Array(l>4?l-4:0),h=4;h<l;h++)d[h-4]=arguments[h];if(this.fnMap.has(n)){const v=this.fnMap.get(n);if(v.threshold!==o){v.fn(...v.args),clearTimeout(v.timer);const _=window.setTimeout(()=>{const y=this.fnMap.get(n);y&&y.fn(...y.args),this.fnMap.delete(n)},o);this.fnMap.set(n,{fn:r,threshold:o,timer:_,args:d,skipFn:a})}else v.skipFn&&v.skipFn(...v.args),this.fnMap.set(n,St(St({},v),{},{fn:r,args:d,skipFn:a}))}else{const v=window.setTimeout(()=>{const _=this.fnMap.get(n);_&&_.fn(..._.args),this.fnMap.delete(n)},o);this.fnMap.set(n,{fn:r,threshold:o,timer:v,args:d,skipFn:a})}}},JG=XG.throttleByKey.bind(XG);function ZG(r){return typeof r=="object"&&r!==null&&!(r instanceof RegExp)}function f5(r,n){if(!ZG(r)||!ZG(n)||Array.isArray(r)&&!Array.isArray(n)||!Array.isArray(r)&&Array.isArray(n))return n;if(Array.isArray(n)&&Array.isArray(r)){const o=[...r];for(let a=0;a<n.length;a++)o[a]=f5(r[a],n[a]);return o}{const o=St({},r);for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(Object.prototype.hasOwnProperty.call(r,a)?o[a]=f5(r[a],n[a]):o[a]=n[a]);return o}}function e$(r,n){let o=[0];if(n&&(o=new Array(n).fill(0)),r===0)return o;let a=0;for(;r>0&&(o[a]=255&r,r>>=8,a++,!n||a!==n););return o}function my(r){return typeof r=="number"?r:r.exact||r.ideal||r.max||r.min||0}function h5(r){return ka(r).call(r,(n,o)=>n+o,0)}function t$(r){const n="0123456789abcdef";function o(_e){let De,Le="";for(De=0;De<=3;De++)Le+=n.charAt(_e>>8*De+4&15)+n.charAt(_e>>8*De&15);return Le}function a(_e,De){const Le=(65535&_e)+(65535&De);return(_e>>16)+(De>>16)+(Le>>16)<<16|65535&Le}function l(_e,De,Le,Te,ze,rt){return a(function(At,wt){return At<<wt|At>>>32-wt}(a(a(De,_e),a(Te,rt)),ze),Le)}function d(_e,De,Le,Te,ze,rt,At){return l(De&Le|~De&Te,_e,De,ze,rt,At)}function h(_e,De,Le,Te,ze,rt,At){return l(De&Te|Le&~Te,_e,De,ze,rt,At)}function v(_e,De,Le,Te,ze,rt,At){return l(De^Le^Te,_e,De,ze,rt,At)}function _(_e,De,Le,Te,ze,rt,At){return l(Le^(De|~Te),_e,De,ze,rt,At)}const y=function(_e){let De;const Le=1+(_e.length+8>>6),Te=new Array(16*Le);for(De=0;De<16*Le;De++)Te[De]=0;for(De=0;De<_e.length;De++)Te[De>>2]|=_e.charCodeAt(De)<<De%4*8;return Te[De>>2]|=128<<De%4*8,Te[16*Le-2]=8*_e.length,Te}(r);let C,B,L,x,X,G=1732584193,q=-271733879,Ae=-1732584194,ue=271733878;for(C=0;C<y.length;C+=16)B=G,L=q,x=Ae,X=ue,G=d(G,q,Ae,ue,y[C+0],7,-680876936),ue=d(ue,G,q,Ae,y[C+1],12,-389564586),Ae=d(Ae,ue,G,q,y[C+2],17,606105819),q=d(q,Ae,ue,G,y[C+3],22,-1044525330),G=d(G,q,Ae,ue,y[C+4],7,-176418897),ue=d(ue,G,q,Ae,y[C+5],12,1200080426),Ae=d(Ae,ue,G,q,y[C+6],17,-1473231341),q=d(q,Ae,ue,G,y[C+7],22,-45705983),G=d(G,q,Ae,ue,y[C+8],7,1770035416),ue=d(ue,G,q,Ae,y[C+9],12,-1958414417),Ae=d(Ae,ue,G,q,y[C+10],17,-42063),q=d(q,Ae,ue,G,y[C+11],22,-1990404162),G=d(G,q,Ae,ue,y[C+12],7,1804603682),ue=d(ue,G,q,Ae,y[C+13],12,-40341101),Ae=d(Ae,ue,G,q,y[C+14],17,-1502002290),q=d(q,Ae,ue,G,y[C+15],22,1236535329),G=h(G,q,Ae,ue,y[C+1],5,-165796510),ue=h(ue,G,q,Ae,y[C+6],9,-1069501632),Ae=h(Ae,ue,G,q,y[C+11],14,643717713),q=h(q,Ae,ue,G,y[C+0],20,-373897302),G=h(G,q,Ae,ue,y[C+5],5,-701558691),ue=h(ue,G,q,Ae,y[C+10],9,38016083),Ae=h(Ae,ue,G,q,y[C+15],14,-660478335),q=h(q,Ae,ue,G,y[C+4],20,-405537848),G=h(G,q,Ae,ue,y[C+9],5,568446438),ue=h(ue,G,q,Ae,y[C+14],9,-1019803690),Ae=h(Ae,ue,G,q,y[C+3],14,-187363961),q=h(q,Ae,ue,G,y[C+8],20,1163531501),G=h(G,q,Ae,ue,y[C+13],5,-1444681467),ue=h(ue,G,q,Ae,y[C+2],9,-51403784),Ae=h(Ae,ue,G,q,y[C+7],14,1735328473),q=h(q,Ae,ue,G,y[C+12],20,-1926607734),G=v(G,q,Ae,ue,y[C+5],4,-378558),ue=v(ue,G,q,Ae,y[C+8],11,-2022574463),Ae=v(Ae,ue,G,q,y[C+11],16,1839030562),q=v(q,Ae,ue,G,y[C+14],23,-35309556),G=v(G,q,Ae,ue,y[C+1],4,-1530992060),ue=v(ue,G,q,Ae,y[C+4],11,1272893353),Ae=v(Ae,ue,G,q,y[C+7],16,-155497632),q=v(q,Ae,ue,G,y[C+10],23,-1094730640),G=v(G,q,Ae,ue,y[C+13],4,681279174),ue=v(ue,G,q,Ae,y[C+0],11,-358537222),Ae=v(Ae,ue,G,q,y[C+3],16,-722521979),q=v(q,Ae,ue,G,y[C+6],23,76029189),G=v(G,q,Ae,ue,y[C+9],4,-640364487),ue=v(ue,G,q,Ae,y[C+12],11,-421815835),Ae=v(Ae,ue,G,q,y[C+15],16,530742520),q=v(q,Ae,ue,G,y[C+2],23,-995338651),G=_(G,q,Ae,ue,y[C+0],6,-198630844),ue=_(ue,G,q,Ae,y[C+7],10,1126891415),Ae=_(Ae,ue,G,q,y[C+14],15,-1416354905),q=_(q,Ae,ue,G,y[C+5],21,-57434055),G=_(G,q,Ae,ue,y[C+12],6,1700485571),ue=_(ue,G,q,Ae,y[C+3],10,-1894986606),Ae=_(Ae,ue,G,q,y[C+10],15,-1051523),q=_(q,Ae,ue,G,y[C+1],21,-2054922799),G=_(G,q,Ae,ue,y[C+8],6,1873313359),ue=_(ue,G,q,Ae,y[C+15],10,-30611744),Ae=_(Ae,ue,G,q,y[C+6],15,-1560198380),q=_(q,Ae,ue,G,y[C+13],21,1309151649),G=_(G,q,Ae,ue,y[C+4],6,-145523070),ue=_(ue,G,q,Ae,y[C+11],10,-1120210379),Ae=_(Ae,ue,G,q,y[C+2],15,718787259),q=_(q,Ae,ue,G,y[C+9],21,-343485551),G=a(G,B),q=a(q,L),Ae=a(Ae,x),ue=a(ue,X);return o(G)+o(q)+o(Ae)+o(ue)}let Hwe=1,r$=console,ga=class{static setLogger(r){r$=r}constructor(r,n){Pr(this,"id",void 0),Pr(this,"lockingPromise",Mt.resolve()),Pr(this,"locks",0),Pr(this,"name",""),Pr(this,"lockId",void 0),this.lockId=Hwe++,r&&(this.name=r),n&&(this.id=n),this.logger("created")}logger(r,n){const o=(this.id?"[".concat(this.id,"]"):"")+"[lock-".concat(this.name,"-").concat(this.lockId,"]"),a=r==="created"?"is ".concat(r,"."):"is ".concat(r,", current queue ").concat(this.locks,". ").concat(n??"");r$.debug("".concat(o," ").concat(a))}setId(r){this.id=r}get isLocked(){return this.locks>0}lock(r){let n;this.locks+=1,this.logger("locked",r);const o=new Mt(l=>{n=()=>{this.locks-=1,this.logger("unlocked",r),l()}}),a=this.lockingPromise.then(()=>n);return this.lockingPromise=this.lockingPromise.then(()=>o),a}};function vy(r,n){return function(o,a,l){const d=l.value;if(typeof d!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const h=this[n];if(!h)throw new Error("mutex property key ".concat(n," doesn't exist on ").concat(r));const v=await h.lock("From ".concat(r,".").concat(a));try{for(var _=arguments.length,y=new Array(_),C=0;C<_;C++)y[C]=arguments[C];return await d.apply(this,y)}finally{v()}},l}}const Ro={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function p5(r,n){const o=Math.floor(n.timeout*Math.pow(n.timeoutFactor,r));return Math.min(n.maxRetryTimeout,o)}function Wf(r,n,o,a){const l=Object.assign({},Ro,a);let d=l.timeout;const h=async()=>{await function(y){return new Mt(C=>{window.setTimeout(C,y)})}(d),d*=l.timeoutFactor,d=Math.min(l.maxRetryTimeout,d)};let v=!1;const _=new Mt(async(y,C)=>{n=n||(()=>!1),o=o||(()=>!0);for(let B=0;B<l.maxRetryCount;B+=1){if(v)return C(new tt(de.OPERATION_ABORTED));try{const L=await r();if(!n(L,B)||B+1===l.maxRetryCount)return y(L);await h()}catch(L){if(!o(L,B)||B+1===l.maxRetryCount)return C(L);await h()}}});return _.cancel=()=>v=!0,_}let VI,n$=class{constructor(r){Pr(this,"input",[]),Pr(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var r;return this.input.length===0?0:ka(r=this.input).call(r,(n,o)=>n+o)/this.input.length}},QI=0,g5=0;function m5(r,n,o,a){return new Mt((l,d)=>{n.responseType=n.responseType||"json",n.data&&!o?(n.data=JSON.stringify(n.data),QI+=pp(n.data)):o&&(n.data.size?QI+=n.data.size:n.data instanceof FormData?QI+=YG(n.data):QI+=pp(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=r,Yc.request(n).then(h=>{typeof h.data=="string"?g5+=pp(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?g5+=h.data.byteLength:g5+=pp(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{Yc.isCancel(h)?d(new tt(de.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?d(new tt(de.NETWORK_TIMEOUT,h.message)):h.response?d(new tt(de.NETWORK_RESPONSE_ERROR,h.response.status)):d(new tt(de.NETWORK_ERROR,h.message))})})}async function jwe(r,n){const o=new Blob([n.data],{type:"buffer"});return await m5(r,St(St({},n),{},{data:o,headers:{"Content-Type":"application/octet-stream"}}),!0)}const i$=()=>window.isSecureContext!==void 0;function Sd(r){if(Array.isArray(r))return r.map(o=>o);if(!o$(r))return r;const n={};for(const o in r){const a=r[o];o$(a)||Array.isArray(a)?n[o]=Sd(a):n[o]=a}return n}function o$(r){return!(typeof r!="object"||Array.isArray(r)||!r)}let v5=class{constructor(r){Pr(this,"input",[]),Pr(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}};const gp={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},NS={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:gp,remoteCandidate:gp},updateInterval:0},s$={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0,packetsDiscarded:0,framesAssembledFromMultiplePackets:0,totalProcessingDelay:0,avgDecodeMs:0,avgFramesAssembledFromMultiplePacketsMs:0,avgProcessingDelayMs:0,avgInterFrameDelayMs:0,totalAssemblyTime:0},a$={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},c$={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},l$={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0,totalSamplesReceived:0,silentConcealedSamples:0,concealmentEvents:0,freezeMs80:0,freezeMs200:0,freezeSamples80:0,freezeSamples200:0};let _5=class{constructor(r,n){Pr(this,"onFirstVideoReceived",void 0),Pr(this,"onFirstVideoDecoded",void 0),Pr(this,"onFirstAudioReceived",void 0),Pr(this,"onFirstVideoDecodedTimeout",void 0),Pr(this,"onFirstAudioDecoded",void 0),Pr(this,"onSelectedLocalCandidateChanged",void 0),Pr(this,"onSelectedRemoteCandidateChanged",void 0),Pr(this,"videoIsReady",!1),Pr(this,"videoIsReady2",{}),Pr(this,"pc",void 0),Pr(this,"options",void 0),Pr(this,"intervalTimer",void 0),Pr(this,"stats",Sd(NS)),Pr(this,"isFirstVideoReceived",{}),Pr(this,"isFirstVideoDecoded",{}),Pr(this,"isFirstAudioReceived",{}),Pr(this,"isFirstAudioDecoded",{}),Pr(this,"isFirstVideoDecodedTimeout",{}),Pr(this,"lossRateWindowStats",[]),this.pc=r,this.options=n,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Mt(r=>{r({local:St({},gp),remote:St({},gp)})})}setVideoIsReady(r){this.videoIsReady=r}setVideoIsReady2(r,n){this.videoIsReady2[r]=n}getVideoIsReady(r){return this.videoIsReady2[r]||!1}setIsFirstAudioDecoded(r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(r){this.lossRateWindowStats.push(r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const n=this.lossRateWindowStats.length,o=["videoSend","audioSend","videoRecv","audioRecv"];let a=0,l=0,d=0,h=0;for(const v of o)r[v].forEach((_,y)=>{if(!this.lossRateWindowStats[n-1][v][y]||!this.lossRateWindowStats[0][v][y])return;const C=this.lossRateWindowStats[n-1][v][y].packets-this.lossRateWindowStats[0][v][y].packets,B=this.lossRateWindowStats[n-1][v][y].packetsLost-this.lossRateWindowStats[0][v][y].packetsLost;v==="videoSend"||v==="audioSend"?(a+=C,d+=B):(l+=C,h+=B),Number.isNaN(C)||Number.isNaN(C)?_.packetLostRate=0:_.packetLostRate=C<=0||B<=0?0:B/(C+B)});r.sendPacketLossRate=a<=0||d<=0?0:d/(a+d),r.recvPacketLossRate=l<=0||h<=0?0:h/(l+h)}},Kwe=class extends _5{constructor(){super(...arguments),Pr(this,"_stats",NS),Pr(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const r=await this._getStats(),n=this.statsResponsesToObjects(r);this._stats=Sd(NS);const o=n.filter(l=>l.type==="ssrc");this.processSSRCStats(o);const a=n.find(l=>l.type==="VideoBwe");a&&this.processBandwidthStats(a),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(r){this._stats.bitrate={actualEncoded:Number(r.googActualEncBitrate),targetEncoded:Number(r.googTargetEncBitrate),retransmit:Number(r.googRetransmitBitrate),transmit:Number(r.googTransmitBitrate)},this._stats.sendBandwidth=Number(r.googAvailableSendBandwidth)}processSSRCStats(r){r.forEach(n=>{var o;const a=_t(o=n.id).call(o,"send");switch("".concat(n.mediaType,"_").concat(a?"send":"recv")){case"video_send":{const l=Sd(a$);l.codec=n.googCodecName,l.adaptionChangeReason="none",n.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),n.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(n.googAvgEncodeMs),l.inputFrame={width:Number(n.googFrameWidthInput)||Number(n.googFrameWidthSent),height:Number(n.googFrameHeightInput)||Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},l.sentFrame={width:Number(n.googFrameWidthSent),height:Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},l.firsCount=Number(n.googFirReceived),l.nacksCount=Number(n.googNacksReceived),l.plisCount=Number(n.googPlisReceived),l.frameCount=Number(n.framesEncoded),l.bytes=Number(n.bytesSent),l.packets=Number(n.packetsSent),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.rttMs=Number(n.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=Sd(s$),d=this.lastDecodeVideoReceiverStats.get(Number(n.ssrc));if(l.codec=n.googCodecName,l.targetDelayMs=Number(n.googTargetDelayMs),l.renderDelayMs=Number(n.googRenderDelayMs),l.currentDelayMs=Number(n.googCurrentDelayMs),l.minPlayoutDelayMs=Number(n.googMinPlayoutDelayMs),l.decodeMs=Number(n.googDecodeMs),l.maxDecodeMs=Number(n.googMaxDecodeMs),l.receivedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateReceived)},l.decodedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateDecoded)},l.decodeFrameRate=Number(n.googFrameRateDecoded),l.outputFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateOutput)},l.jitterBufferMs=Number(n.googJitterBufferMs),l.firsCount=Number(n.googFirsSent),l.nacksCount=Number(n.googNacksSent),l.plisCount=Number(n.googPlisSent),l.framesDecodeCount=Number(n.framesDecoded),l.bytes=Number(n.bytesReceived),l.packets=Number(n.packetsReceived),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),d){const h=d.stats,v=Date.now()-d.lts;l.framesDecodeFreezeTime=h.framesDecodeFreezeTime,l.framesDecodeInterval=h.framesDecodeInterval,l.framesDecodeCount>h.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(d.lts=Date.now(),l.framesDecodeInterval=v,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(n.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(n.ssrc,10),!0))):l.framesDecodeCount<d.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:St({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=Sd(l$);l.codec=n.googCodecName,l.outputLevel=Math.abs(Number(n.audioOutputLevel))/32767,l.decodingCNG=Number(n.googDecodingCNG),l.decodingCTN=Number(n.googDecodingCTN),l.decodingCTSG=Number(n.googDecodingCTSG),l.decodingNormal=Number(n.googDecodingNormal),l.decodingPLC=Number(n.googDecodingPLC),l.decodingPLCCNG=Number(n.googDecodingPLCCNG),l.expandRate=Number(n.googExpandRate),l.accelerateRate=Number(n.googAccelerateRate),l.preemptiveExpandRate=Number(n.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(n.googSecondaryDecodedRate),l.speechExpandRate=Number(n.googSpeechExpandRate),l.preferredJitterBufferMs=Number(n.googPreferredJitterBufferMs),l.jitterBufferMs=Number(n.googJitterBufferMs),l.jitterMs=Number(n.googJitterReceived),l.bytes=Number(n.bytesReceived),l.packets=Number(n.packetsReceived),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.receivedFrames=Number(n.googDecodingCTN)||Number(n.packetsReceived),l.droppedFrames=Number(n.googDecodingPLC)+Number(n.googDecodingPLCCNG)||Number(n.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=Sd(c$);l.codec=n.googCodecName,l.inputLevel=Math.abs(Number(n.audioInputLevel))/32767,l.aecReturnLoss=Number(n.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(n.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(n.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(n.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(n.bytesSent),l.packets=Number(n.packetsSent),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.rttMs=Number(n.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new Mt((r,n)=>{this.pc.getStats(r,n)})}statsResponsesToObjects(r){const n=[];return r.result().forEach(o=>{const a={id:o.id,timestamp:o.timestamp.valueOf().toString(),type:o.type};o.names().forEach(l=>{a[l]=o.stat(l)}),n.push(a)}),n}},BS=function(r){return r.BANDWIDTH="bandwidth",r.CPU="cpu",r.NONE="none",r.OTHER="other",r}({}),HI=function(r){return r.L1T1="L1T1",r.L1T2="L1T2",r.L1T3="L1T3",r.L1T3_KEY="L1T3_KEY",r.L2T1_KEY="L2T1_KEY",r.L2T2_KEY="L2T2_KEY",r.L2T3_KEY="L2T3_KEY",r.L3T1_KEY="L3T1_KEY",r.L3T2_KEY="L3T2_KEY",r.L3T3_KEY="L3T3_KEY",r}({}),y5=function(r){return r[r.new=0]="new",r[r.connecting=1]="connecting",r[r.connected=2]="connected",r[r.disconnected=3]="disconnected",r[r.failed=4]="failed",r[r.closed=5]="closed",r}({}),Ou=function(r){return r.CERTIFICATE="certificate",r.CODEC="codec",r.CANDIDATE_PAIR="candidate-pair",r.LOCAL_CANDIDATE="local-candidate",r.REMOTE_CANDIDATE="remote-candidate",r.INBOUND="inbound-rtp",r.TRACK="track",r.OUTBOUND="outbound-rtp",r.PC="peer-connection",r.REMOTE_INBOUND="remote-inbound-rtp",r.REMOTE_OUTBOUND="remote-outbound-rtp",r.TRANSPORT="transport",r.CSRC="csrc",r.DATA_CHANNEL="data-channel",r.STREAM="stream",r.SENDER="sender",r.RECEIVER="receiver",r}({});var _y=function(r){return r[r.kNone=1]="kNone",r[r.kMillisecondsFromSeconds=1e3]="kMillisecondsFromSeconds",r[r.kBytesToBits=8]="kBytesToBits",r}(_y||{});function LS(r,n,o,a){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:_y.kNone;if(!n)return;const d=Number(n[o]);if(typeof d!="number")return;const h=Number(n[a]);if(typeof h!="number")return;if(!r)return h?d/h*l:void 0;const v=Number(r[o]);if(typeof v!="number")return;const _=Number(r[a]);if(typeof _!="number")return;const y=h-_;return y?(d-v)/y*l:void 0}let u$=class extends _5{constructor(){super(...arguments),Pr(this,"_stats",NS),Pr(this,"report",void 0),Pr(this,"lastDecodeVideoReceiverStats",new Map),Pr(this,"lastVideoFramesRecv",new Map),Pr(this,"lastVideoFramesSent",new Map),Pr(this,"lastVideoFramesDecode",new Map),Pr(this,"lastVideoFramesOutput",new Map),Pr(this,"lastVideoJBDelay",new Map),Pr(this,"lastAudioJBDelay",new Map),Pr(this,"mediaBytesSent",new Map),Pr(this,"mediaBytesRetransmit",new Map),Pr(this,"mediaBytesTargetEncode",new Map),Pr(this,"lastDecodeAudioReceiverStats",new Map),Pr(this,"lastAudioConcealment",new Map),Pr(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Sd(NS),this.report.forEach(r=>{switch(r.type){case Ou.OUTBOUND:case Ou.INBOUND:{const n=r.mediaType||r.kind,o=!n&&"frameWidth"in r,a=!n&&!("frameWidth"in r);r.type===Ou.OUTBOUND?n==="audio"||a?this.processAudioOutboundStats(r):(n==="video"||o)&&this.processVideoOutboundStats(r):r.type===Ou.INBOUND&&(n==="audio"||a?this.processAudioInboundStats(r):(n==="video"||o)&&this.processVideoInboundStats(r));break}case Ou.TRANSPORT:{const n=this.report.get(r.selectedCandidatePairId);n&&this.processCandidatePairStats(n);break}case Ou.CANDIDATE_PAIR:r.selected&&this.processCandidatePairStats(r)}}),this.updateSendBitrate(),this._stats.updateInterval=Date.now()-this.stats.timestamp,this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const r=await this.pc.getStats(),n={local:St({},gp),remote:St({},gp)};return r.forEach(o=>{let a;if(o.type===Ou.TRANSPORT&&(a=r.get(o.selectedCandidatePairId)),o.type===Ou.CANDIDATE_PAIR&&o.selected&&(a=o),a){const l=(d,h)=>{d.type=h.type,d.id=h.id,h.address&&(d.address=h.address),h.candidateType&&(d.candidateType=h.candidateType),h.port&&(d.port=h.port),h.priority&&(d.priority=h.priority),h.protocol&&(d.protocol=h.protocol),h.relayProtocol&&(d.relayProtocol=h.relayProtocol)};if(a.localCandidateId){const d=r.get(a.localCandidateId);d&&l(n.local,d)}if(a.remoteCandidateId){const d=r.get(a.remoteCandidateId);d&&l(n.remote,d)}}}),n}processCandidatePairStats(r){if(this._stats.sendBandwidth=r.availableOutgoingBitrate||0,r.currentRoundTripTime&&(this._stats.rtt=1e3*r.currentRoundTripTime),this._stats.videoSend.forEach(n=>{r.currentRoundTripTime&&(n.rttMs=1e3*r.currentRoundTripTime)}),this._stats.audioSend.forEach(n=>{r.currentRoundTripTime&&(n.rttMs=1e3*r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=r.id,r.localCandidateId){const n=this.report.get(r.localCandidateId);n&&this.processCandidateStats(n)}if(r.remoteCandidateId){const n=this.report.get(r.remoteCandidateId);n&&this.processCandidateStats(n)}}processCandidateStats(r){let n;r.type===Ou.LOCAL_CANDIDATE&&(n=this._stats.selectedCandidatePair.localCandidate),r.type===Ou.REMOTE_CANDIDATE&&(n=this._stats.selectedCandidatePair.remoteCandidate),n&&(n.type=r.type,n.id=r.id,r.address&&(n.address=r.address),r.candidateType&&(n.candidateType=r.candidateType),r.port&&(n.port=r.port),r.priority&&(n.priority=r.priority),r.protocol&&(n.protocol=r.protocol),r.relayProtocol&&(n.relayProtocol=r.relayProtocol),r.type===Ou.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==n.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(St({},n),St({},this.stats.selectedCandidatePair.localCandidate)),r.type===Ou.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==n.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(St({},n),St({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(r){let n=this._stats.audioRecv.find(a=>a.ssrc===r.ssrc);n||(n=Sd(l$),this._stats.audioRecv.push(n)),n.ssrc=r.ssrc,n.packets=r.packetsReceived,n.packetsLost=r.packetsLost,n.packetsDiscarded=r.packetsDiscarded,n.bytes=r.bytesReceived,n.jitterMs=1e3*r.jitter,n.retransmittedBytesReceived=r.retransmittedBytesReceived,n.retransmittedPacketsReceived=r.retransmittedPacketsReceived,n.totalProcessingDelay=r.totalProcessingDelay,n.jitterBufferEmittedCount=r.jitterBufferEmittedCount;const o=this.lastDecodeAudioReceiverStats.get(n.ssrc);n.avgProcessingDelayMs=LS(o,n,"totalProcessingDelay","jitterBufferEmittedCount",_y.kMillisecondsFromSeconds),this.processAudioTrackReceiverStats(r,r.trackId,n),this.calculateAudioFreeze(n,o,r),r.codecId&&(n.codec=this.getCodecFromCodecStats(r.codecId)),n.receivedFrames||(n.receivedFrames=r.packetsReceived),n.droppedFrames||(n.droppedFrames=r.packetsLost),n.receivedFrames>0&&!this.isFirstAudioReceived[n.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(n.ssrc),this.isFirstAudioReceived[n.ssrc]=!0),n.outputLevel&&n.outputLevel>0&&!this.isFirstAudioDecoded[n.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(n.ssrc),this.isFirstAudioDecoded[n.ssrc]=!0),typeof r.concealedSamples=="number"&&(n.concealedSamples=r.concealedSamples),this.lastDecodeAudioReceiverStats.set(n.ssrc,St({},n))}calculateAudioFreeze(r,n,o){const a=this.lastAudioConcealment.get(r.ssrc);if(n!=null&&a!=null){const l=a.lts,d=o.timestamp,h=d-l;if(h<=0)return;const v=r.concealedSamples-n.concealedSamples-0,_=a.nonSilent+v,y=r.totalSamplesReceived-n.totalSamplesReceived;if(y<=0)return;const C=80*y/h,B=200*y/h,L=h/y;let x=0;r.freezeSamples80=n.freezeSamples80,r.freezeMs80=n.freezeMs80,_>C&&(a.plc80>0?(r.freezeSamples80+=v,r.freezeMs80+=Math.round(v*L)):(r.freezeSamples80+=_,r.freezeMs80+=Math.round(_*L)),x=a.plc80+1);let X=0;r.freezeSamples200=n.freezeSamples200,r.freezeMs200=n.freezeMs200,_>B&&(a.plc200>0?(r.freezeSamples200+=v,r.freezeMs200+=Math.round(v*L)):(r.freezeSamples200+=_,r.freezeMs200+=Math.round(_*L)),X=a.plc200+1),this.lastAudioConcealment.set(r.ssrc,{nonSilent:v,lts:d,plc80:x,plc200:X})}else r.freezeSamples80=0,r.freezeSamples200=0,r.freezeMs80=0,r.freezeMs200=0,this.lastAudioConcealment.set(r.ssrc,{nonSilent:0,lts:o.timestamp,plc80:0,plc200:0})}processVideoInboundStats(r){let n=this._stats.videoRecv.find(h=>h.ssrc===r.ssrc);n||(n=Sd(s$),this._stats.videoRecv.push(n)),n.ssrc=r.ssrc,n.packets=r.packetsReceived,n.packetsLost=r.packetsLost,n.bytes=r.bytesReceived,n.firsCount=r.firCount,n.nacksCount=r.nackCount,n.plisCount=r.pliCount,n.framesDecodeCount=r.framesDecoded,n.framesDroppedCount=r.framesDropped,n.totalInterFrameDelay=r.totalInterFrameDelay,n.totalSquaredInterFrameDelay=r.totalSquaredInterFrameDelay,n.totalFreezesDuration=r.totalFreezesDuration,n.totalProcessingDelay=r.totalProcessingDelay,n.packetsDiscarded=r.packetsDiscarded,n.framesAssembledFromMultiplePackets=r.framesAssembledFromMultiplePackets,n.totalAssemblyTime=r.totalAssemblyTime,n.keyFramesDecoded=r.keyFramesDecoded,n.retransmittedBytesReceived=r.retransmittedBytesReceived,n.retransmittedPacketsReceived=r.retransmittedPacketsReceived;const o=this.lastDecodeVideoReceiverStats.get(n.ssrc),a=this.lastVideoFramesDecode.get(n.ssrc),l=this.lastVideoFramesOutput.get(n.ssrc),d=Date.now();if(n.framesDecodeCount>0&&!this.isFirstVideoDecoded[n.ssrc]){const h=n.decodedFrame?n.decodedFrame.width:0,v=n.decodedFrame?n.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(n.ssrc,h,v),this.isFirstVideoDecoded[n.ssrc]=!0}if(o){const h=o.stats,v=d-o.lts;n.framesDecodeFreezeTime=h.framesDecodeFreezeTime,n.framesDecodeInterval=h.framesDecodeInterval,!this.isFirstVideoDecoded[n.ssrc]&&v>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[n.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(n.ssrc),this.isFirstVideoDecodedTimeout[n.ssrc]=!0),n.framesDecodeCount>h.framesDecodeCount&&this.isFirstVideoDecoded[n.ssrc]?(o.lts=Date.now(),n.framesDecodeInterval=v,n.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(r.ssrc))?n.framesDecodeFreezeTime+=n.framesDecodeInterval:this.setVideoIsReady2(parseInt(r.ssrc,10),!0))):n.framesDecodeCount<h.framesDecodeCount&&(n.framesDecodeInterval=0),r.framesDecoded&&r.qpSum&&(o.stats.framesDecodeCount>r.framesDecoded?n.qpSumPerFrame=r.qpSum/r.framesDecoded:n.qpSumPerFrame=(r.qpSum-o.qpSum)/(r.framesDecoded-o.stats.framesDecodeCount))}r.totalDecodeTime&&(n.decodeMs=1e3*r.totalDecodeTime,n.avgDecodeMs=LS(o==null?void 0:o.stats,n,"decodeMs","framesDecodeCount")),n.avgProcessingDelayMs=LS(o==null?void 0:o.stats,n,"totalProcessingDelay","framesDecodeCount",_y.kMillisecondsFromSeconds),n.avgFramesAssembledFromMultiplePacketsMs=LS(o==null?void 0:o.stats,n,"totalAssemblyTime","framesAssembledFromMultiplePackets",_y.kMillisecondsFromSeconds),n.avgInterFrameDelayMs=LS(o==null?void 0:o.stats,n,"totalInterFrameDelay","framesDecodeCount",_y.kMillisecondsFromSeconds),a&&d-a.lts>=800?(n.decodeFrameRate=Math.round((n.framesDecodeCount-a.count)/((d-a.lts)/1e3)),this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:d,rate:n.decodeFrameRate})):a?n.decodeFrameRate=a.rate:this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:d,rate:0}),n.framesDroppedCount&&r.framesReceived&&(l&&d-l.lts>=800?(n.outputFrameRate=Math.round((r.framesReceived-n.framesDroppedCount-l.count)/((d-l.lts)/1e3)),this.lastVideoFramesOutput.set(n.ssrc,{count:r.framesReceived-n.framesDroppedCount,lts:d,rate:Math.max(n.outputFrameRate,0)})):l?n.outputFrameRate=l.rate:this.lastVideoFramesOutput.set(n.ssrc,{count:r.framesReceived-n.framesDroppedCount,lts:d,rate:0})),this.processVideoTrackReceiverStats(r,r.trackId,n),r.codecId&&(n.codec=this.getCodecFromCodecStats(r.codecId)),r.framerateMean&&(n.framesRateFirefox=r.framerateMean),n.packets>0&&!this.isFirstVideoReceived[n.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(n.ssrc),this.isFirstVideoReceived[n.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(n.ssrc,{stats:St({},n),lts:o?o.lts:Date.now(),qpSum:r.qpSum})}processVideoOutboundStats(r){let n=this._stats.videoSend.find(a=>a.ssrc===r.ssrc);n||(n=Sd(a$),this._stats.videoSend.push(n));const o=this.mediaBytesSent.get(r.ssrc);if(o)o.add(r.bytesSent);else{const a=new v5(10);a.add(r.bytesSent),this.mediaBytesSent.set(r.ssrc,a)}if(r.retransmittedBytesSent!==void 0){const a=this.mediaBytesRetransmit.get(r.ssrc);if(a)a.add(r.retransmittedBytesSent);else{const l=new v5(10);l.add(r.retransmittedBytesSent),this.mediaBytesRetransmit.set(r.ssrc,l)}}if(r.totalEncodedBytesTarget){const a=this.mediaBytesTargetEncode.get(r.ssrc);if(a)a.add(r.totalEncodedBytesTarget);else{const l=new v5(10);l.add(r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(r.ssrc,l)}}if(n.ssrc=r.ssrc,n.bytes=r.bytesSent,n.packets=r.packetsSent,n.firsCount=r.firCount,n.nacksCount=r.nackCount,n.plisCount=r.pliCount,n.frameCount=r.framesEncoded,n.adaptionChangeReason=r.qualityLimitationReason,n.scalabilityMode=r.scalabilityMode,n.retransmittedBytesSent=r.retransmittedBytesSent,n.retransmittedPacketsSent=r.retransmittedPacketsSent,n.hugeFramesSent=r.hugeFramesSent,n.keyFramesEncoded=r.keyFramesEncoded,n.targetBitrate=r.targetBitrate,r.totalEncodeTime&&r.framesEncoded){const a=this.lastEncoderMs.get(r.ssrc);if(!a||a.lastFrameCount>r.framesEncoded)n.avgEncodeMs=1e3*r.totalEncodeTime/r.framesEncoded;else{const l=r.framesEncoded-a.lastFrameCount,d=r.totalEncodeTime-a.lastEncoderTime;n.avgEncodeMs=1e3*d/l}}if(r.framesEncoded&&r.qpSum){const a=this.lastEncoderMs.get(r.ssrc);!a||a.lastFrameCount>r.framesEncoded?n.qpSumPerFrame=r.qpSum/r.framesEncoded:n.qpSumPerFrame=(r.qpSum-a.lastQpSum)/(r.framesEncoded-a.lastFrameCount)}if(this.lastEncoderMs.set(r.ssrc,{lastFrameCount:r.framesEncoded,lastEncoderTime:r.totalEncodeTime,lastQpSum:r.qpSum,lts:Date.now()}),r.codecId&&(n.codec=this.getCodecFromCodecStats(r.codecId)),r.mediaSourceId&&this.processVideoMediaSource(r.mediaSourceId,n),this.processVideoTrackSenderStats(r,r.trackId,n),r.remoteId)this.processRemoteInboundStats(r.remoteId,n);else{const a=this.findRemoteStatsId(r.ssrc,Ou.REMOTE_INBOUND);a&&this.processRemoteInboundStats(a,n)}}processAudioOutboundStats(r){let n=this._stats.audioSend.find(o=>o.ssrc===r.ssrc);if(n||(n=Sd(c$),this._stats.audioSend.push(n)),n.ssrc=r.ssrc,n.packets=r.packetsSent,n.bytes=r.bytesSent,n.retransmittedBytesSent=r.retransmittedBytesSent,n.retransmittedPacketsSent=r.retransmittedPacketsSent,r.mediaSourceId&&this.processAudioMediaSource(r.mediaSourceId,n),r.codecId&&(n.codec=this.getCodecFromCodecStats(r.codecId)),this.processAudioTrackSenderStats(r,r.trackId,n),r.remoteId)this.processRemoteInboundStats(r.remoteId,n);else{const o=this.findRemoteStatsId(r.ssrc,Ou.REMOTE_INBOUND);o&&this.processRemoteInboundStats(o,n)}}findRemoteStatsId(r,n){var o;const a=Array.from(Jl(o=this.report).call(o)).find(l=>l.type===n&&l.ssrc===r);return a?a.id:null}processVideoMediaSource(r,n){const o=this.report.get(r);o&&o.width&&o.height&&o.framesPerSecond&&(n.inputFrame={width:o.width,height:o.height,frameRate:o.framesPerSecond})}processAudioMediaSource(r,n){const o=this.report.get(r);o&&(n.inputLevel=o.audioLevel)}processVideoTrackSenderStats(r,n,o){var a,l,d,h;const v=n?this.report.get(n):void 0,_=(a=v==null?void 0:v.framesSent)!==null&&a!==void 0?a:r.framesSent;if(typeof _!="number")return;let y=(l=v==null?void 0:v.frameWidth)!==null&&l!==void 0?l:r.frameWidth,C=(d=v==null?void 0:v.frameHeight)!==null&&d!==void 0?d:r.frameHeight,B=(h=v==null?void 0:v.framesPerSecond)!==null&&h!==void 0?h:r.framesPerSecond;if(typeof y=="number"&&typeof C=="number"||(y=0,C=0),B==null){const L=Date.now(),x=this.lastVideoFramesSent.get(o.ssrc);x&&L-x.lts>=800?(B=Math.round((_-x.count)/((L-x.lts)/1e3)),this.lastVideoFramesSent.set(o.ssrc,{count:_,lts:L,rate:B})):x?B=x.rate:this.lastVideoFramesSent.set(o.ssrc,{count:_,lts:L,rate:0})}o.sentFrame={width:y,height:C,frameRate:Math.max(0,B)}}processVideoTrackReceiverStats(r,n,o){var a,l,d,h,v;const _=n?this.report.get(n):void 0,y=(a=_==null?void 0:_.framesReceived)!==null&&a!==void 0?a:r.framesReceived,C=(l=_==null?void 0:_.frameWidth)!==null&&l!==void 0?l:r.frameWidth,B=(d=_==null?void 0:_.frameHeight)!==null&&d!==void 0?d:r.frameHeight,L=(h=_==null?void 0:_.jitterBufferDelay)!==null&&h!==void 0?h:r.jitterBufferDelay,x=(v=_==null?void 0:_.jitterBufferEmittedCount)!==null&&v!==void 0?v:r.jitterBufferEmittedCount;if(typeof y=="number"){const X=this.lastVideoFramesRecv.get(o.ssrc),G=Date.now();o.framesReceivedCount=y;let q=0;X&&G-X.lts>=800?(q=Math.round((y-X.count)/((G-X.lts)/1e3)),this.lastVideoFramesRecv.set(o.ssrc,{count:y,lts:G,rate:q})):X?q=X.rate:this.lastVideoFramesRecv.set(o.ssrc,{count:y,lts:G,rate:0}),o.receivedFrame={width:C||0,height:B||0,frameRate:q||0},o.decodedFrame={width:C||0,height:B||0,frameRate:o.decodeFrameRate||0},o.outputFrame={width:C||0,height:B||0,frameRate:o.outputFrameRate||o.decodeFrameRate||0}}if(L&&x){const X=this.lastVideoJBDelay.get(o.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let G=X.jitterBufferMs;const q=x-X.jitterBufferEmittedCount;q>0&&(G=1e3*(L-X.jitterBufferDelay)/q),o.jitterBufferMs=G,o.currentDelayMs=Math.round(G),this.lastVideoJBDelay.set(o.ssrc,{jitterBufferDelay:L,jitterBufferEmittedCount:x,jitterBufferMs:o.currentDelayMs})}}processAudioTrackSenderStats(r,n,o){var a,l,d,h;const v=n?this.report.get(n):void 0,_=(a=(l=v==null?void 0:v.echoReturnLoss)!==null&&l!==void 0?l:r.echoReturnLoss)!==null&&a!==void 0?a:0,y=(d=(h=v==null?void 0:v.echoReturnLossEnhancement)!==null&&h!==void 0?h:r.echoReturnLossEnhancement)!==null&&d!==void 0?d:0;o.aecReturnLoss=_,o.aecReturnLossEnhancement=y}processAudioTrackReceiverStats(r,n,o){var a,l,d,h,v,_,y,C,B;const L=n?this.report.get(n):void 0,x=(a=L==null?void 0:L.removedSamplesForAcceleration)!==null&&a!==void 0?a:r.removedSamplesForAcceleration,X=(l=L==null?void 0:L.totalSamplesReceived)!==null&&l!==void 0?l:r.totalSamplesReceived,G=(d=L==null?void 0:L.jitterBufferDelay)!==null&&d!==void 0?d:r.jitterBufferDelay,q=(h=L==null?void 0:L.jitterBufferEmittedCount)!==null&&h!==void 0?h:r.jitterBufferEmittedCount,Ae=(v=L==null?void 0:L.audioLevel)!==null&&v!==void 0?v:r==null?void 0:r.audioLevel,ue=(_=L==null?void 0:L.totalSamplesDuration)!==null&&_!==void 0?_:r==null?void 0:r.totalSamplesDuration,_e=(y=L==null?void 0:L.concealedSamples)!==null&&y!==void 0?y:r.concealedSamples,De=(C=L==null?void 0:L.silentConcealedSamples)!==null&&C!==void 0?C:r.silentConcealedSamples,Le=(B=L==null?void 0:L.concealmentEvents)!==null&&B!==void 0?B:r.concealmentEvents;if(typeof X=="number"&&(o.totalSamplesReceived=X),typeof De=="number"&&(o.silentConcealedSamples=De),typeof Le=="number"&&(o.concealmentEvents=Le),typeof _e=="number"&&(o.concealedSamples=_e),x&&X&&(o.accelerateRate=x/X),G&&q){const ze=this.lastAudioJBDelay.get(o.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let rt=ze.jitterBufferMs;const At=q-ze.jitterBufferEmittedCount;At>0&&(rt=1e3*(G-ze.jitterBufferDelay)/At),o.jitterBufferMs=Math.round(rt),this.lastAudioJBDelay.set(o.ssrc,{jitterBufferDelay:G,jitterBufferEmittedCount:q,jitterBufferMs:o.jitterBufferMs})}o.outputLevel=Ae;let Te=1920;ue&&X&&(Te=X/ue/50,o.receivedFrames=Math.round(X/Te)),_e&&(o.droppedFrames=Math.round(_e/Te))}processRemoteInboundStats(r,n){const o=this.report.get(r);o&&(n.packetsLost=o.packetsLost,o.roundTripTime&&(n.rttMs=1e3*o.roundTripTime),o.jitter&&(n.jitterMs=1e3*o.jitter),o.timestamp&&(n.timestamp=o.timestamp))}getCodecFromCodecStats(r){const n=this.report.get(r);if(!n)return"";const o=n.mimeType.match(/\/(.*)$/);return o&&o[1]?o[1]:""}updateSendBitrate(){let r=0,n=null,o=null;this.mediaBytesSent.forEach(l=>{r+=l.diffMean()}),this.mediaBytesRetransmit.forEach(l=>{n=n===null?l.diffMean():n+l.diffMean()}),this.mediaBytesTargetEncode.forEach(l=>{o=o===null?l.diffMean():o+l.diffMean()});const a=n!==null?r-n:r;this._stats.bitrate={actualEncoded:8*a/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},n!==null&&(this._stats.bitrate.retransmit=8*n/(this.options.updateInterval/1e3)),o!==null&&(this._stats.bitrate.targetEncoded=8*o/(this.options.updateInterval/1e3))}},Wwe=class extends _5{updateStats(){return Mt.resolve()}};function E5(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const d=function(){const h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return h&&h[0]?Number(h[0].split("/")[1]):null}();return d?d<76?new Kwe(r,{updateInterval:n,lossRateInterval:o,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new u$(r,{updateInterval:n,lossRateInterval:o,freezeRateLimit:a,firstVideoDecodedTimeout:l}):function(h){if(!window.RTCStatsReport)return!1;const v=h.getStats();return!!(v instanceof Mt||function(_){return!!_&&(typeof _=="object"||typeof _=="function")&&typeof _.then=="function"}(v))}(r)?new u$(r,{updateInterval:n,lossRateInterval:o,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new Wwe(r,{updateInterval:n,lossRateInterval:o,freezeRateLimit:a,firstVideoDecodedTimeout:l})}const A$="websdk_ng_install_id";function w5(){try{if(me("INSTALL_ID"))return me("INSTALL_ID");let r=window.localStorage.getItem(A$);return r||(r=e1(),window.localStorage.setItem(A$,r)),zn("INSTALL_ID",r),r}catch{return}}const yA=function(r){if(r.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return r;const n=r.match(/([0-9]+\.[0-9]+\.[0-9]+)\-([0-9]+)/);if(n&&n[1]&&n[2]){const o=n[1],a=n[2];return"".concat(o,".").concat(a)}return"4.0.0.999"}("4.24.0"),S5=function(){try{return JSON.parse("true")===!0}catch{return!0}}();let t1=function(r){return r.Default="default",r.Auto="auto",r.Relay="relay",r.SdRtn="sd-rtn",r}({});const ta=function(){const r="us".concat("erna","me"),n="pa".concat("sswo","rd"),o=["t","s","t"];o.splice(1,0,"e");const a=o.join(""),l=[];for(let v=0;v<6;v++)l.push("1");const d=l.join(""),h={};return h[r]=a,h[n]=d,Object.assign(h,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=ta;const jI={ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!0,FORCE_ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:1,ENABLE_AUT_FEEDBACK:!0,SVC_EXTENDED:["VP9"]},b5={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},C5="v4.24.0-0-gf2267710-dirty(7/31/2025, 7:00:42 PM)",T5={ENABLE_EVENT_REPORT:!0,UPLOAD_LOG:!1,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,ENABLE_PRELOAD:!0,NEW_ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,RESTART_SEQUENCE:["udp_tcp_relay","relay"],FIRST_TCP_CANDIDATE:!1,FIRST_TCP_CANDIDATE_INTERVAL:1e3,TURN_DOMAIN:"edge.agora.io",USE_TURN_IP:!0,NEW_TURN_MODE:4,NEW_FORCE_TURN:!1,USE_NEW_RENDER_FREEZE_TIME:!1,ENCODE_EXCEPTION_TIMES:5,ENABLE_ENCODE_EXCEPTION:!0,ENCODE_EXCEPTION_VALIDATE_CODEC:["h264"],VIDEO_ENCODER_CONFIG_LIST:[{width:240,height:180},{width:320,height:240},{width:400,height:300},{width:480,height:360},{width:560,height:420},{width:640,height:480}],DELETE_NEQ_AFTER_USER_LEAVE:!0},bi=St(St(St(St({},T5),{},{PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,SHOW_REPORT_USER_INVOKER_LOG:!0,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,FIRST_H264_PROFILE_LEVEL_ID:"42001f",FIRST_PACKETIZATION_MODE:"",X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,FINGERPRINT:null,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,ENABLE_AUDIO_TOPN:!1,ENABLE_AUDIO_METADATA:!1,ENABLE_AUDIO_PTS:!1,TOPN_SMOOTH_LEVEL:void 0,TOPN_NEW_SPEAKER_DELAY:void 0,TOPN_SWITCH_HOLD_MS:void 0,TOPN_AUDIO_GAIN:void 0,TOPN_SILENCE_THRESHOLD:250,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ENABLE_AUDIO_RED:!1,OPUS_PTIME:void 0,AUDIO_DUPLICATE_NUM:void 0,ENABLE_ABSSENDTIME_AS_SENTTS:!0,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],UNSUPPORTED_VIDEO_UPLINK_CODEC:[],UNSUPPORTED_VIDEO_DOWNLINK_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:b5,CUSTOM_ADAPTATION_DEFAULT_MODE:"",HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,DISABLE_SCREEN_SHARE_REMB:!1},jI),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1,AP_REQUEST_DETAIL:void 0,ENABLE_ROLE_SELECT_EDGE:!1,CLIENT_ROLE_OPTIONS:void 0,COMPATIBLE_SDP_EXTENSION:["gdpr_forbidden"],LIMIT_BITRATE:void 0,EXPERIMENTS:{},USE_PUB_RTX:!0,USE_SUB_RTX:!0,ENABLE_DATASTREAM_2:!1,USE_XR:!0,ENABLE_PREALLOC_PC:!1,ENABLE_PRE_SUB:!1,ENABLE_SVC:!1,ENABLE_PRE_RENDER:!1,FORCE_DISABLE_AUTO_SUB:!1,ENABLE_PRE_SUB_WITH_PRE_PC:!1,PRE_USE_LOCAL_CODECS:!0},{INSTALL_ID:""}),{},{K_MIN_RENDER_DELAY:66,USE_STANDARD_BITRATE_DEFAULT:!1,VIDEO_NEW_BITRATE_RATIO:void 0,VIDEO_STANDARD_BITRATE_VERSION:2,BASELINE_MORE_H264_BITRATE_RATIO:1.1});function zn(r,n,o){var a,l,d;_t(a=Object.keys(bi)).call(a,r)&&(!o&&_t(l=Object.keys(Gf)).call(l,r)||(bi[r]=n,r!=="ENABLE_VIDEO_SEI"&&r!=="ENABLE_AUDIO_TOPN"&&r!=="ENABLE_AUDIO_METADATA"&&r!=="ENABLE_AUDIO_PTS"||n!==!0||(bi.ENABLE_ENCODED_TRANSFORM=!0),r==="USE_NEW_NETWORK_CONFIG"&&n&&(d=!!n,bi.USE_NEW_NETWORK_CONFIG=d,d&&(bi.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],bi.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],bi.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],bi.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],bi.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",bi.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",bi.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),r==="ENABLE_PRE_SUB"&&n&&(bi.ENABLE_INSTANT_VIDEO=!0,bi.ENABLE_PREALLOC_PC=!0),r==="ENABLE_SVC"&&n&&(bi.ENABLE_AUT_CC=!0),r==="NEW_FORCE_TURN"&&n&&(bi.NEW_TURN_MODE||(bi.NEW_TURN_MODE=4))))}function me(r){return bi[r]}S5||(bi.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],bi.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],bi.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],bi.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],bi.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],bi.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],bi.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",bi.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",bi.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",bi.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",bi.AREAS=["NORTH_AMERICA","OVERSEA"]);let d$=function(r){return r[r.REALTIME=1]="REALTIME",r}({});const Gf={};var Dr=function(r){return r.SET_SESSION_ID="SET_SESSION_ID",r.SET_P2P_ID="SET_P2P_id",r.SET_DC_ID="SET_DC_id",r.SET_UID="SET_UID",r.SET_INT_UID="SET_INT_UID",r.SET_PUB_ID="SET_PUB_ID",r.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",r.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",r.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",r.KEY_METRIC_PRELOAD_START="KEY_METRIC_PRELOAD_START",r.KEY_METRIC_PRELOAD_END="KEY_METRIC_PRELOAD_END",r.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",r.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",r.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",r.KEY_METRIC_REQUEST_SUA_END="KEY_METRIC_REQUEST_SUA_END",r.KEY_METRIC_BEFORE_CONNECT="KEY_METRIC_BEFORE_CONNECT",r.KEY_METRIC_PEER_RECEIVER="KEY_METRIC_PEER_RECEIVER",r.KEY_METRIC_SIGNAL_CONNECTED="KEY_METRIC_SIGNAL_CONNECTED",r.KEY_METRIC_JOIN_REQ="KEY_METRIC_JOIN_REQ",r.KEY_METRIC_JOIN_REP="KEY_METRIC_JOIN_REP",r.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",r.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",r.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",r.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",r.KEY_METRIC_FIRST_VIDEO_FRAME_DECODED="KEY_METRIC_FIRST_VIDEO_FRAME_DECODED",r.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",r.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",r.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",r.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",r.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",r.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",r.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",r.RESET_KEY_METRICS="RESET_KEY_METRICS",r.RESET_FIRST_VIDEO_FRAME_DECODED="RESET_FIRST_VIDEO_FRAME_DECODED",r.SET_USE_P2P="SET_USE_P2P",r.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",r}(Dr||{});let PS=function(r){return r.h264="h264",r.h265="h265",r.vp8="vp8",r.vp9="vp9",r.av1="av1",r}({});(function(r){r.opus="opus",r.pcma="pcma",r.pcmu="pcmu",r.g722="g722"})({});const f$=128,Gwe=96,h$=1e3,yy=10;let $we=0;var p$=(()=>{var r={8:(a,l,d)=>{d.r(l),d.d(l,{Parser:()=>At,Printer:()=>Ln,parse:()=>Ct,print:()=>Xt});const h=`
`,v="".concat("\r").concat(h),_=" ";let y;function C(ft){return ft>="0"&&ft<="9"}function B(ft){return ft>="!"&&ft<="~"}function L(ft){return B(ft)||ft>=""&&ft<=""}function x(ft){return ft==="!"||ft>="#"&&ft<="'"||ft>="*"&&ft<="+"||ft>="-"&&ft<="."||ft>="0"&&ft<="9"||ft>="A"&&ft<="Z"||ft>="^"&&ft<="~"}function X(ft){return ft>="1"&&ft<="9"}function G(ft){return ft>="A"&&ft<="Z"||ft>="a"&&ft<="z"}function q(ft){return ft==="d"||ft==="h"||ft==="m"||ft==="s"}function Ae(ft){return ft>""&&ft<"	"||ft>"\v"&&ft<"\f"||ft>""&&ft<""}function ue(ft){return G(ft)||C(ft)||ft==="+"||ft==="/"}function _e(ft){return C(ft)||G(ft)||ft==="+"||ft==="/"||ft==="-"||ft==="_"}function De(ft){return G(ft)||C(ft)||ft==="+"||ft==="/"}function Le(ft,W){var Se=Object.keys(ft);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(ft);W&&(Ne=Ne.filter(function(bt){return Object.getOwnPropertyDescriptor(ft,bt).enumerable})),Se.push.apply(Se,Ne)}return Se}function Te(ft){for(var W=1;W<arguments.length;W++){var Se=arguments[W]!=null?arguments[W]:{};W%2?Le(Object(Se),!0).forEach(function(Ne){ze(ft,Ne,Se[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(Se)):Le(Object(Se)).forEach(function(Ne){Object.defineProperty(ft,Ne,Object.getOwnPropertyDescriptor(Se,Ne))})}return ft}function ze(ft,W,Se){return W in ft?Object.defineProperty(ft,W,{value:Se,enumerable:!0,configurable:!0,writable:!0}):ft[W]=Se,ft}(function(ft){ft.VERSION="v",ft.ORIGIN="o",ft.SESSION_NAME="s",ft.INFORMATION="i",ft.URI="u",ft.EMAIL="e",ft.PHONE="p",ft.CONNECTION="c",ft.BANDWIDTH="b",ft.TIME="t",ft.REPEAT="r",ft.ZONE_ADJUSTMENTS="z",ft.KEY="k",ft.ATTRIBUTE="a",ft.MEDIA="m"})(y||(y={}));class rt{consumeText(W,Se){let Ne=Se;for(;Ne<W.length;){const bt=W[Ne];if(bt==="\0"||bt==="\r"||bt===h)break;Ne+=1}if(Ne-Se==0)throw new Error("Invalid text, at ".concat(W));return Ne}consumeUnicastAddress(W,Se,Ne){return this.consumeTill(W,Se,_)}consumeOneOrMore(W,Se,Ne){let bt=Se;for(;Ne(W[bt]);)bt++;if(bt-Se==0)throw new Error("Invalid rule at ".concat(Se,"."));return bt}consumeSpace(W,Se){if(W[Se]===_)return Se+1;throw new Error("Invalid space at ".concat(Se,"."))}consumeIP4Address(W,Se){let Ne=Se;for(let bt=0;bt<4;bt++)if(Ne=this.consumeDecimalUChar(W,Ne),bt!==3){if(W[Ne]!==".")throw new Error("Invalid IP4 address.");Ne++}return Ne}consumeDecimalUChar(W,Se){let Ne=Se;for(let Fr=0;Fr<3&&C(W[Ne]);Fr++,Ne++);if(Ne-Se==0)throw new Error("Invalid decimal uchar.");const bt=parseInt(W.slice(Se,Ne));if(bt>=0&&bt<=255)return Ne;throw new Error("Invalid decimal uchar")}consumeIP6Address(W,Se){let Ne=this.consumeHexpart(W,Se);return W[Ne]===":"&&(Ne+=1,Ne=this.consumeIP4Address(W,Ne)),Ne}consumeHexpart(W,Se){let Ne=Se;if(W[Ne]===":"&&W[Ne+1]===":"){Ne+=2;try{Ne=this.consumeHexseq(W,Ne)}catch{}return Ne}if(Ne=this.consumeHexseq(W,Ne),W[Ne]===":"&&W[Ne+1]===":"){Ne+=2;try{Ne=this.consumeHexseq(W,Ne)}catch{}return Ne}return Ne}consumeHexseq(W,Se){let Ne=Se;for(;Ne=this.consumeHex4(W,Ne),W[Ne]===":"&&W[Ne+1]!==":";)Ne+=1;return Ne}consumeHex4(W,Se){let Ne=0;for(;Ne<4;Ne++)if(!((bt=W[Se+Ne])>="0"&&bt<="9"||bt>="a"&&bt<="f"||bt>="A"&&bt<="F")){if(Ne===0)throw new Error("Invalid hex 4");break}var bt;return Se+Ne}consumeFQDN(W,Se){let Ne=Se;for(;C(W[Ne])||G(W[Ne])||W[Ne]==="-"||W[Ne]===".";)Ne+=1;if(Ne-Se<4)throw new Error("Invalid FQDN");return Ne}consumeExtnAddr(W,Se){return this.consumeOneOrMore(W,Se,L)}consumeMulticastAddress(W,Se,Ne){switch(Ne){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(W,Se);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(W,Se);default:try{return this.consumeFQDN(W,Se)}catch{return this.consumeExtnAddr(W,Se)}}}consumeIP6MulticastAddress(W,Se){const Ne=this.consumeHexpart(W,Se);return W[Ne]==="/"?this.consumeInteger(W,Ne+1):Ne}consumeIP4MulticastAddress(W,Se){let Ne=Se+3;const bt=W.slice(Se,Ne),Fr=parseInt(bt);if(Fr<224||Fr>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let si=0;si<3;si++){if(W[Ne]!==".")throw new Error("Invalid IP4 multicast address.");Ne+=1,Ne=this.consumeDecimalUChar(W,Ne)}return W[Ne]==="/"&&(Ne+=1),Ne=this.consumeTTL(W,Ne),W[Ne]==="/"&&(Ne=this.consumeInteger(W,Ne)),Ne}consumeInteger(W,Se){if(!X(W[Se]))throw new Error("Invalid integer.");for(Se+=1;C(W[Se]);)Se+=1;return Se}consumeTTL(W,Se){if(W[Se]==="0")return Se+1;if(!X(W[Se]))throw new Error("Invalid TTL.");Se+=1;for(let Ne=0;Ne<2&&C(W[Se]);Ne++)Se+=1;return Se}consumeToken(W,Se){return this.consumeOneOrMore(W,Se,x)}consumeTime(W,Se){let Ne=Se;if(W[Ne]==="0")return Ne+1;for(X(W[Ne])&&(Ne+=1);C(W[Ne]);)Ne++;if(Ne-Se<10)throw new Error("Invalid time");return Ne}consumeAddress(W,Se){return this.consumeTill(W,Se,_)}consumeTypedTime(W,Se){let Ne=Se;return Ne=this.consumeOneOrMore(W,Ne,C),q(W[Ne])?Ne+1:Ne}consumeRepeatInterval(W,Se){if(!X(W[Se]))throw new Error("Invalid repeat interval");for(Se+=1;C(W[Se]);)Se+=1;return q(W[Se])&&(Se+=1),Se}consumePort(W,Se){return this.consumeOneOrMore(W,Se,C)}consume(W,Se,Ne){for(let bt=0;bt<Ne.length;bt++){if(Se+bt>=W.length)throw new Error("consume exceeding value length");if(W[Se+bt]!==Ne[bt])throw new Error("consume ".concat(Ne," failed at ").concat(bt))}return Se+Ne.length}consumeTill(W,Se,Ne){let bt=Se;for(;bt<W.length&&(typeof Ne!="string"||W[bt]!==Ne)&&(typeof Ne!="function"||!Ne(W[bt]));)bt++;return bt}}class At extends rt{constructor(){super(),ze(this,"records",[]),ze(this,"currentLine",0)}parse(W){const Se=this.probeEOL(W);this.records=W.split(Se).filter(Kg=>!!nc(Kg).call(Kg)).map(this.parseLine),this.currentLine=0;const Ne=this.parseVersion(),bt=this.parseOrigin(),Fr=this.parseSessionName(),si=this.parseInformation(),Fo=this.parseUri(),OA=this.parseEmail(),Dd=this.parsePhone(),vb=this.parseConnection(),E1=this.parseBandWidth(),eE=this.parseTimeFields(),eO=this.parseKey(),tO=this.parseSessionAttribute(),NA=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:Ne,origin:bt,sessionName:Fr,information:si,uri:Fo,emails:OA,phones:Dd,connection:vb,bandwidths:E1,timeFields:eE,key:eO,attributes:tO,mediaDescriptions:NA}}getCurrentRecord(){const W=this.records[this.currentLine];if(!W)throw new Error("Record doesn't exit.");return W}probeEOL(W){for(let Se=0;Se<W.length;Se++)if(W[Se]===h)return W[Se-1]==="\r"?v:h;throw new Error("Invalid newline character.")}parseLine(W,Se){if(W.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const Ne=W[0];if(W[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:Ne,value:W.slice(2),line:Se,cur:0}}parseSessionAttribute(){const W=new Gr;for(;this.currentLine<this.records.length;){const Se=this.getCurrentRecord();if(Se.type!==y.ATTRIBUTE)break;const Ne={attField:this.extractOneOrMore(Se,bt=>x(bt)&&bt!==":"),_cur:0};Se.value[Se.cur]===":"&&(Se.cur+=1,Ne.attValue=this.extractOneOrMore(Se,Ae)),W.parse(Ne),this.currentLine++}return W.digest()}parseMediaAttributes(W){const Se=new en(W);for(;this.currentLine<this.records.length;){const Ne=this.getCurrentRecord();if(Ne.type!==y.ATTRIBUTE)break;const bt={attField:this.extractOneOrMore(Ne,Fr=>x(Fr)&&Fr!==":"),_cur:0};Ne.value[Ne.cur]===":"&&(Ne.cur+=1,bt.attValue=this.extractOneOrMore(Ne,Ae)),Se.parse(bt),this.currentLine++}return Se.digest()}parseKey(){const W=this.getCurrentRecord();if(W.type===y.KEY){if(W.value==="prompt"||W.value==="clear:"||W.value==="base64:"||W.value==="uri:")return W.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const W=this.getCurrentRecord();if(W.type===y.ZONE_ADJUSTMENTS){const Se=[];for(;;)try{const Ne=this.extract(W,this.consumeTime);this.consumeSpaceForRecord(W);let bt=!1;W.value[W.cur]==="-"&&(bt=!0,W.cur+=1);const Fr=this.extract(W,this.consumeTypedTime);Se.push({time:Ne,typedTime:Fr,back:bt})}catch{break}if(Se.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,Se}return[]}parseRepeat(){const W=[];for(;;){const Se=this.getCurrentRecord();if(Se.type!==y.REPEAT)break;{const Ne=this.extract(Se,this.consumeRepeatInterval),bt=this.parseTypedTime(Se);W.push({repeatInterval:Ne,typedTimes:bt}),this.currentLine++}}return W}parseTypedTime(W){const Se=[];for(;;)try{this.consumeSpaceForRecord(W),Se.push(this.extract(W,this.consumeTypedTime))}catch{break}if(Se.length===0)throw new Error("Invalid typed time.");return Se}parseTime(){const W=this.getCurrentRecord(),Se=this.extract(W,this.consumeTime);this.consumeSpaceForRecord(W);const Ne=this.extract(W,this.consumeTime);return this.currentLine++,{startTime:Se,stopTime:Ne}}parseBandWidth(){const W=[];for(;this.currentLine<this.records.length;){const Se=this.getCurrentRecord();if(Se.type!==y.BANDWIDTH)break;{const Ne=this.extractOneOrMore(Se,x);if(Se.value[Se.cur]!==":")throw new Error("Invalid bandwidth field.");Se.cur++;const bt=this.extractOneOrMore(Se,C);W.push({bwtype:Ne,bandwidth:bt}),this.currentLine++}}return W}parseVersion(){const W=this.getCurrentRecord();if(W.type!==y.VERSION)throw new Error("first sdp record must be version");const Se=W.value.slice(0,this.consumeOneOrMore(W.value,0,C));if(Se.length!==W.value.length)throw new Error('invalid proto version, "v='.concat(W.value,'"'));return this.currentLine++,Se}parseOrigin(){const W=this.getCurrentRecord();if(W.type!==y.ORIGIN)throw new Error("second line of sdp must be origin");const Se=this.extractOneOrMore(W,L);this.consumeSpaceForRecord(W);const Ne=this.extractOneOrMore(W,C);this.consumeSpaceForRecord(W);const bt=this.extractOneOrMore(W,C);this.consumeSpaceForRecord(W);const Fr=this.extractOneOrMore(W,x);this.consumeSpaceForRecord(W);const si=this.extractOneOrMore(W,x);this.consumeSpaceForRecord(W);const Fo=this.extract(W,this.consumeUnicastAddress);return this.currentLine++,{username:Se,sessId:Ne,sessVersion:bt,nettype:Fr,addrtype:si,unicastAddress:Fo}}parseSessionName(){const W=this.getCurrentRecord();if(W.type===y.SESSION_NAME){const Se=this.extract(W,this.consumeText);return this.currentLine++,Se}}parseInformation(){const W=this.getCurrentRecord();if(W.type!==y.INFORMATION)return;const Se=this.extract(W,this.consumeText);return this.currentLine++,Se}parseUri(){const W=this.getCurrentRecord();if(W.type===y.URI)return this.currentLine++,W.value}parseEmail(){const W=[];for(;;){const Se=this.getCurrentRecord();if(Se.type!==y.EMAIL)break;W.push(Se.value),this.currentLine++}return W}parsePhone(){const W=[];for(;;){const Se=this.getCurrentRecord();if(Se.type!==y.PHONE)break;W.push(Se.value),this.currentLine++}return W}parseConnection(){const W=this.getCurrentRecord();if(W.type===y.CONNECTION){const Se=this.extractOneOrMore(W,x);this.consumeSpaceForRecord(W);const Ne=this.extractOneOrMore(W,x);this.consumeSpaceForRecord(W);const bt=this.extract(W,this.consumeAddress);return this.currentLine++,{nettype:Se,addrtype:Ne,address:bt}}}parseMedia(){const W=this.getCurrentRecord(),Se=this.extract(W,this.consumeToken);this.consumeSpaceForRecord(W);let Ne=this.extract(W,this.consumePort);W.value[W.cur]==="/"&&(W.cur+=1,Ne+=this.extract(W,this.consumeInteger)),this.consumeSpaceForRecord(W);const bt=[];for(bt.push(this.extract(W,this.consumeToken));W.value[W.cur]==="/";)W.cur+=1,bt.push(this.extract(W,this.consumeToken));if(bt.length===0)throw new Error("Invalid proto");const Fr=this.parseFmt(W);return this.currentLine++,{mediaType:Se,port:Ne,protos:bt,fmts:Fr}}parseTimeFields(){const W=[];for(;this.getCurrentRecord().type===y.TIME;){const Se=this.parseTime(),Ne=this.parseRepeat(),bt=this.parseZone();W.push({time:Se,repeats:Ne,zones:bt})}return W}parseMediaDescription(){const W=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===y.MEDIA;){const Se=this.parseMedia(),Ne=this.parseInformation(),bt=this.parseConnections(),Fr=this.parseBandWidth(),si=this.parseKey(),Fo=this.parseMediaAttributes(Se);W.push({media:Se,information:Ne,connections:bt,bandwidths:Fr,key:si,attributes:Fo})}return W}parseConnections(){const W=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===y.CONNECTION;)W.push(this.parseConnection());return W}parseFmt(W){const Se=[];for(;;)try{this.consumeSpaceForRecord(W),Se.push(this.extract(W,this.consumeToken))}catch{break}if(Se.length===0)throw new Error("Invalid fmts");return Se}extract(W,Se){for(var Ne=arguments.length,bt=new Array(Ne>2?Ne-2:0),Fr=2;Fr<Ne;Fr++)bt[Fr-2]=arguments[Fr];const si=Se.call(this,W.value,W.cur,...bt),Fo=W.value.slice(W.cur,si);return W.cur=si,Fo}extractOneOrMore(W,Se){const Ne=this.consumeOneOrMore(W.value,W.cur,Se),bt=W.value.slice(W.cur,Ne);return W.cur=Ne,bt}consumeSpaceForRecord(W){if(W.value[W.cur]!==_)throw new Error("Invalid space at ".concat(W.cur,"."));W.cur+=1}}class wt extends rt{constructor(){super(...arguments),ze(this,"attributes",void 0),ze(this,"digested",!1)}extractOneOrMore(W,Se,Ne){const bt=this.consumeOneOrMore(W.attValue,W._cur,Se),Fr=W.attValue.slice(W._cur,bt),[si,Fo]=Ne||[];if(typeof si=="number"&&Fr.length<si)throw new Error("error in length, should be more or equal than ".concat(si," characters."));if(typeof Fo=="number"&&Fr.length>Fo)throw new Error("error in length, should be less or equal than ".concat(Fo," characters."));return W._cur=bt,Fr}consumeAttributeSpace(W){if(W.attValue[W._cur]!==_)throw new Error("Invalid space at ".concat(W._cur,"."));W._cur+=1}extract(W,Se){if(!W.attValue)throw new Error("Nothing to extract from attValue.");for(var Ne=arguments.length,bt=new Array(Ne>2?Ne-2:0),Fr=2;Fr<Ne;Fr++)bt[Fr-2]=arguments[Fr];const si=Se.call(this,W.attValue,W._cur,...bt),Fo=W.attValue.slice(W._cur,si);return W._cur=si,Fo}atEnd(W){if(!W.attValue)throw new Error;return W._cur>=W.attValue.length}peekChar(W){if(!W.attValue)throw new Error;return W.attValue[W._cur]}peek(W,Se){if(!W.attValue)throw new Error;for(let Ne=0;Ne<Se.length;Ne++)if(Se[Ne]!==W.attValue[W._cur+Ne])return!1;return!0}parseIceUfrag(W){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(W,ue,[4,256])}parseIcePwd(W){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(W,ue,[22,256])}parseIceOptions(W){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const Se=[];for(;!this.atEnd(W);){Se.push(this.extractOneOrMore(W,ue));try{this.consumeAttributeSpace(W)}catch(Ne){if(this.atEnd(W))break;throw Ne}}this.attributes.iceOptions=Se}parseFingerprint(W){const Se=this.extract(W,this.consumeToken);this.consumeAttributeSpace(W);const Ne=this.extract(W,this.consumeTill);this.attributes.fingerprints.push({hashFunction:Se,fingerprint:Ne})}parseExtmap(W){const Se=this.extractOneOrMore(W,C);let Ne;this.peekChar(W)==="/"&&(this.extract(W,this.consume,"/"),Ne=this.extract(W,this.consumeToken)),this.consumeAttributeSpace(W);const bt=this.extract(W,this.consumeTill,_),Fr=Te(Te({entry:parseInt(Se,10)},Ne&&{direction:Ne}),{},{extensionName:bt});this.peekChar(W)===_&&(this.consumeAttributeSpace(W),Fr.extensionAttributes=this.extract(W,this.consumeTill)),this.attributes.extmaps.push(Fr)}parseSetup(W){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const Se=this.extract(W,this.consumeTill);if(Se!=="active"&&Se!=="passive"&&Se!=="actpass"&&Se!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=Se}}class Gr extends wt{constructor(){super(...arguments),ze(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(W){if(this.digested)throw new Error("already digested");try{switch(W.attField){case"group":this.parseGroup(W);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(W);break;case"ice-pwd":this.parseIcePwd(W);break;case"ice-options":this.parseIceOptions(W);break;case"fingerprint":this.parseFingerprint(W);break;case"setup":this.parseSetup(W);break;case"tls-id":this.parseTlsId(W);break;case"identity":this.parseIdentity(W);break;case"extmap":this.parseExtmap(W);break;case"msid-semantic":this.parseMsidSemantic(W);break;default:W.ignored=!0,this.attributes.unrecognized.push(W)}}catch(Se){throw console.error("parsing session attribute ".concat(W.attField,' error, "a=').concat(W.attField,":").concat(W.attValue,'"')),Se}if(!W.ignored&&W.attValue&&!this.atEnd(W))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(W){const Se=this.extract(W,this.consumeToken),Ne=[];for(;!this.atEnd(W)&&this.peekChar(W)===_;)this.consumeAttributeSpace(W),Ne.push(this.extract(W,this.consumeToken));this.attributes.groups.push({semantic:Se,identificationTag:Ne})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(W){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(W,_e)}parseIdentity(W){const Se=this.extractOneOrMore(W,De),Ne=[];for(;!this.atEnd(W)&&this.peekChar(W)===_;){this.consumeAttributeSpace(W);const bt=this.extract(W,this.consumeToken);this.extract(W,this.consume,"=");const Fr=this.extractOneOrMore(W,si=>si!==_&&Ae(si));Ne.push({name:bt,value:Fr})}this.attributes.identities.push({assertionValue:Se,extensions:Ne})}parseMsidSemantic(W){this.peekChar(W)===_&&this.consumeAttributeSpace(W);const Se={semantic:this.extract(W,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(W)}catch{break}if(this.peekChar(W)==="*"){this.extract(W,this.consume,"*"),Se.applyForAll=!0;break}{const Ne=this.extract(W,this.consumeTill,_);Se.identifierList.push(Ne)}}this.attributes.msidSemantic=Se}}class en extends wt{constructor(W){super(),ze(this,"attributes",void 0),W.protos.indexOf("RTP")!==-1||W.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(W){if(this.digested)throw new Error("already digested");try{switch(W.attField){case"extmap":this.parseExtmap(W);break;case"setup":this.parseSetup(W);break;case"ice-ufrag":this.parseIceUfrag(W);break;case"ice-pwd":this.parseIcePwd(W);break;case"ice-options":this.parseIceOptions(W);break;case"candidate":this.parseCandidate(W);break;case"remote-candidate":this.parseRemoteCandidate(W);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(W);break;case"rtpmap":this.parseRtpmap(W);break;case"ptime":this.parsePtime(W);break;case"maxptime":this.parseMaxPtime(W);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(W);break;case"ssrc":this.parseSSRC(W);break;case"fmtp":this.parseFmtp(W);break;case"rtcp-fb":this.parseRtcpFb(W);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(W);break;case"mid":this.parseMid(W);break;case"msid":this.parseMsid(W);break;case"imageattr":this.parseImageAttr(W);break;case"rid":this.parseRid(W);break;case"simulcast":this.parseSimulcast(W);break;case"sctp-port":this.parseSctpPort(W);break;case"max-message-size":this.parseMaxMessageSize(W);break;case"ssrc-group":this.parseSSRCGroup(W);break;default:W.ignored=!0,this.attributes.unrecognized.push(W)}}catch(Se){throw console.error("parsing media attribute ".concat(W.attField,' error, "a=').concat(W.attField,":").concat(W.attValue,'"')),Se}if(!W.ignored&&W.attValue&&!this.atEnd(W))throw new Error("attribute parsing error")}parseCandidate(W){const Se=this.extractOneOrMore(W,ue,[1,32]);this.consumeAttributeSpace(W);const Ne=this.extractOneOrMore(W,C,[1,5]);this.consumeAttributeSpace(W);const bt=this.extract(W,this.consumeToken);this.consumeAttributeSpace(W);const Fr=this.extractOneOrMore(W,C,[1,10]);this.consumeAttributeSpace(W);const si=this.extract(W,this.consumeAddress);this.consumeAttributeSpace(W);const Fo=this.extract(W,this.consumePort);this.consumeAttributeSpace(W),this.extract(W,this.consume,"typ"),this.consumeAttributeSpace(W);const OA={foundation:Se,componentId:Ne,transport:bt,priority:Fr,connectionAddress:si,port:Fo,type:this.extract(W,this.consumeToken),extension:{}};for(this.peek(W," raddr")&&(this.extract(W,this.consume," raddr"),this.consumeAttributeSpace(W),OA.relAddr=this.extract(W,this.consumeAddress)),this.peek(W," rport")&&(this.extract(W,this.consume," rport"),this.consumeAttributeSpace(W),OA.relPort=this.extract(W,this.consumePort));this.peekChar(W)===_;){this.consumeAttributeSpace(W);const Dd=this.extract(W,this.consumeToken);this.consumeAttributeSpace(W),OA.extension[Dd]=this.extractOneOrMore(W,B)}this.attributes.candidates.push(OA)}parseRemoteCandidate(W){const Se=[];for(;;){const Ne=this.extractOneOrMore(W,C,[1,5]);this.consumeAttributeSpace(W);const bt=this.extract(W,this.consumeAddress);this.consumeAttributeSpace(W);const Fr=this.extract(W,this.consumePort);Se.push({componentId:Ne,connectionAddress:bt,port:Fr});try{this.consumeAttributeSpace(W)}catch{break}}this.attributes.remoteCandidatesList.push(Se)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(W){const Se=this.extract(W,this.consumeToken);this.consumeAttributeSpace(W);const Ne=this.extract(W,this.consumeTill,"/");this.extract(W,this.consume,"/");const bt={encodingName:Ne,clockRate:this.extractOneOrMore(W,C)};this.atEnd(W)||this.peekChar(W)!=="/"||(this.extract(W,this.consume,"/"),bt.encodingParameters=parseInt(this.extract(W,this.consumeTill),10));const Fr=this.attributes.payloads.find(si=>si.payloadType===parseInt(Se,10));Fr?Fr.rtpMap=bt:this.attributes.payloads.push({payloadType:parseInt(Se,10),rtpMap:bt,rtcpFeedbacks:[]})}parsePtime(W){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(W,this.consumeTill)}parseMaxPtime(W){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(W,this.consumeTill)}parseDirection(W){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=W.attField}parseSSRC(W){const Se=this.extractOneOrMore(W,C);this.consumeAttributeSpace(W);const Ne=this.extract(W,this.consumeTill,":");let bt;this.peekChar(W)===":"&&(this.extract(W,this.consume,":"),bt=this.extract(W,this.consumeTill));const Fr=this.attributes.ssrcs.find(si=>si.ssrcId===parseInt(Se,10));Fr?Fr.attributes[Ne]=bt:this.attributes.ssrcs.push({ssrcId:parseInt(Se,10),attributes:{[Ne]:bt}})}parseFmtp(W){const Se=this.extract(W,this.consumeTill,_);this.consumeAttributeSpace(W);const Ne=this.extract(W,this.consumeTill),bt={};Ne.split(";").forEach(si=>{let[Fo,OA]=si.split("=");Fo=nc(Fo).call(Fo);const Dd=typeof OA=="string"?nc(OA).call(OA):null;typeof Fo=="string"&&Fo.length>0&&(bt[Fo]=Dd)});const Fr=this.attributes.payloads.find(si=>si.payloadType===parseInt(Se,10));Fr?Fr.fmtp={parameters:bt}:this.attributes.payloads.push({payloadType:parseInt(Se,10),rtcpFeedbacks:[],fmtp:{parameters:bt}})}parseFmtParameters(W){const Se={},Ne=this.extract(W,this.consumeTill,"=");W._cur++;const bt=this.extract(W,this.consumeTill,";");for(Se[Ne]=bt;W.attValue[W._cur]===";";){const Fr=this.extract(W,this.consumeTill,"=");W._cur++;const si=this.extract(W,this.consumeTill,";");Se[Fr]=si}return Se}parseRtcpFb(W){let Se="";Se=this.peekChar(W)==="*"?this.extract(W,this.consume,"*"):this.extract(W,this.consumeTill,_),this.consumeAttributeSpace(W);const Ne=this.extract(W,this.consumeTill,_);let bt;if(Ne==="trr-int")bt={type:Ne,interval:this.extract(W,this.consumeTill)};else{const Fr={type:Ne};this.peekChar(W)===_&&(this.consumeAttributeSpace(W),Fr.parameter=this.extract(W,this.consumeToken),this.peekChar(W)===_&&(Fr.additional=this.extract(W,this.consumeTill))),bt=Fr}if(Se==="*")this.attributes.rtcpFeedbackWildcards.push(bt);else{const Fr=this.attributes.payloads.find(si=>si.payloadType===parseInt(Se,10));Fr?Fr.rtcpFeedbacks.push(bt):this.attributes.payloads.push({payloadType:parseInt(Se,10),rtcpFeedbacks:[bt]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(W){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const Se={port:this.extract(W,this.consumePort)};this.peekChar(W)===_&&(this.consumeAttributeSpace(W),Se.netType=this.extractOneOrMore(W,x),this.consumeAttributeSpace(W),Se.addressType=this.extractOneOrMore(W,x),this.consumeAttributeSpace(W),Se.address=this.extract(W,this.consumeAddress)),this.attributes.rtcp=Se}parseMsid(W){const Se={id:this.extractOneOrMore(W,x,[1,64])};this.peekChar(W)===_&&(this.consumeAttributeSpace(W),Se.appdata=this.extractOneOrMore(W,x,[1,64])),this.attributes.msids.push(Se)}parseImageAttr(W){this.attributes.imageattr.push(W.attValue)}parseRid(W){const Se=this.extractOneOrMore(W,bt=>G(bt)||C(bt)||bt==="_"||bt==="-");this.consumeAttributeSpace(W);const Ne={id:Se,direction:this.extract(W,this.consumeToken),params:[]};if(this.peekChar(W)===_){if(this.consumeAttributeSpace(W),this.peek(W,"pt=")){this.extract(W,this.consume,"pt=");const bt=[];for(;;){const Fr=this.extract(W,this.consumeToken);bt.push(Fr);try{this.extract(W,this.consume,",")}catch{break}}Ne.payloads=bt,this.peekChar(W)===_&&this.extract(W,this.consume,_)}for(;;){const bt=this.extract(W,this.consumeToken);switch(bt){case"depend":{const Fr={type:bt,rids:this.extract(W,this.consume,"=").split(",")};Ne.params.push(Fr);break}default:{const Fr={type:bt};this.peekChar(W)==="="&&(this.extract(W,this.consume,"="),Fr.val=this.extract(W,this.consumeTill,";")),Ne.params.push(Fr)}}try{this.extract(W,this.consume,";")}catch{break}}}this.attributes.rids.push(Ne)}parseSimulcast(W){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=W.attValue,this.extract(W,this.consumeTill)}parseSctpPort(W){this.attributes.sctpPort=this.extractOneOrMore(W,C,[1,5])}parseMaxMessageSize(W){this.attributes.maxMessageSize=this.extractOneOrMore(W,C,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(W){this.attributes.mid=this.extract(W,this.consumeToken)}parseSSRCGroup(W){const Se=this.extract(W,this.consumeToken),Ne=[];for(;;)try{this.consumeAttributeSpace(W);const bt=this.extract(W,this.consumeInteger);Ne.push(parseInt(bt,10))}catch{break}this.attributes.ssrcGroups.push({semantic:Se,ssrcIds:Ne})}}function Or(ft,W,Se){return W in ft?Object.defineProperty(ft,W,{value:Se,enumerable:!0,configurable:!0,writable:!0}):ft[W]=Se,ft}class Ln{constructor(){Or(this,"eol",v)}print(W,Se){let Ne="";return Se&&(this.eol=Se),Ne+=this.printVersion(W.version),Ne+=this.printOrigin(W.origin),Ne+=this.printSessionName(W.sessionName),Ne+=this.printInformation(W.information),Ne+=this.printUri(W.uri),Ne+=this.printEmail(W.emails),Ne+=this.printPhone(W.phones),Ne+=this.printConnection(W.connection),Ne+=this.printBandwidth(W.bandwidths),Ne+=this.printTimeFields(W.timeFields),Ne+=this.printKey(W.key),Ne+=this.printSessionAttributes(W.attributes),Ne+=this.printMediaDescription(W.mediaDescriptions),Ne}printVersion(W){return"v=".concat(W).concat(this.eol)}printOrigin(W){return"o=".concat(W.username," ").concat(W.sessId," ").concat(W.sessVersion," ").concat(W.nettype," ").concat(W.addrtype," ").concat(W.unicastAddress).concat(this.eol)}printSessionName(W){return W?"s=".concat(W).concat(this.eol):""}printInformation(W){return W?"i=".concat(W).concat(this.eol):""}printUri(W){return W?"u=".concat(W).concat(this.eol):""}printEmail(W){let Se="";for(const Ne of W)Se+="e=".concat(Ne).concat(this.eol);return Se}printPhone(W){let Se="";for(const Ne of W)Se+="e=".concat(Ne).concat(this.eol);return Se}printConnection(W){return W?"c=".concat(W.nettype," ").concat(W.addrtype," ").concat(W.address).concat(this.eol):""}printBandwidth(W){let Se="";for(const Ne of W)Se+="b=".concat(Ne.bwtype,":").concat(Ne.bandwidth).concat(this.eol);return Se}printTimeFields(W){let Se="";for(const Ne of W){Se+="t=".concat(Ne.time.startTime," ").concat(Ne.time.startTime).concat(this.eol);for(const bt of Ne.repeats)Se+="r=".concat(bt.repeatInterval," ").concat(bt.typedTimes.join(" ")).concat(this.eol);Ne.zoneAdjustments&&(Se+="z=",Se+="z=".concat(Ne.zoneAdjustments.map(bt=>"".concat(bt.time," ").concat(bt.back?"-":""," ").concat(bt.typedTime)).join(" ")).concat(this.eol),Se+=this.eol)}return Se}printKey(W){return W?"k=".concat(W).concat(this.eol):""}printAttributes(W){let Se="";for(const Ne of W)Se+="a=".concat(Ne.attField).concat(Ne.attValue?":".concat(Ne.attValue):"").concat(this.eol);return Se}printMediaDescription(W){let Se="";for(const Ne of W)Se+=this.printMedia(Ne.media),Se+=this.printInformation(Ne.information),Se+=this.printConnections(Ne.connections),Se+=this.printBandwidth(Ne.bandwidths),Se+=this.printKey(Ne.key),Se+=this.printMediaAttributes(Ne);return Se}printConnections(W){let Se="";for(const Ne of W)Se+=this.printConnection(Ne);return Se}printMedia(W){return"m=".concat(W.mediaType," ").concat(W.port," ").concat(W.protos.join("/")," ").concat(W.fmts.join(" ")).concat(this.eol)}printSessionAttributes(W){return new Ea(this.eol).print(W)}printMediaAttributes(W){return new ct(this.eol).print(W)}}class Tn{constructor(W){Or(this,"eol",void 0),this.eol=W}printIceUfrag(W){return W===void 0?"":"a=ice-ufrag:".concat(W).concat(this.eol)}printIcePwd(W){return W===void 0?"":"a=ice-pwd:".concat(W).concat(this.eol)}printIceOptions(W){return W===void 0?"":"a=ice-options:".concat(W.join(_)).concat(this.eol)}printFingerprints(W){return W.length>0?W.map(Se=>"a=fingerprint:".concat(Se.hashFunction).concat(_).concat(Se.fingerprint)).join(this.eol)+this.eol:""}printExtmap(W){return W.map(Se=>"a=extmap:".concat(Se.entry).concat(Se.direction?"/".concat(Se.direction):"").concat(_).concat(Se.extensionName).concat(Se.extensionAttributes?"".concat(_).concat(Se.extensionAttributes):"").concat(this.eol)).join("")}printSetup(W){return W===void 0?"":"a=setup:".concat(W).concat(this.eol)}printUnrecognized(W){return W.map(Se=>"a=".concat(Se.attField).concat(Se.attValue?":".concat(Se.attValue):"").concat(this.eol)).join("")}}class Ea extends Tn{print(W){let Se="";return Se+=this.printGroups(W.groups),Se+=this.printMsidSemantic(W.msidSemantic),Se+=this.printIceLite(W.iceLite),Se+=this.printIceUfrag(W.iceUfrag),Se+=this.printIcePwd(W.icePwd),Se+=this.printIceOptions(W.iceOptions),Se+=this.printFingerprints(W.fingerprints),Se+=this.printSetup(W.setup),Se+=this.printTlsId(W.tlsId),Se+=this.printIdentity(W.identities),Se+=this.printExtmap(W.extmaps),Se+=this.printUnrecognized(W.unrecognized),Se}printGroups(W){let Se="";return W.length>0&&(Se+=W.map(Ne=>"a=group:".concat(Ne.semantic).concat(Ne.identificationTag.map(bt=>"".concat(_).concat(bt)).join("")).concat(this.eol)).join("")),Se}printIceLite(W){return W===void 0?"":"a=ice-lite"+this.eol}printTlsId(W){return W?"a=tls-id:".concat(W).concat(this.eol):""}printIdentity(W){return W.length===0?"":W.map(Se=>"a=identity:".concat(Se.assertionValue).concat(Se.extensions.map(Ne=>"".concat(_).concat(Ne.name).concat(Ne.value?"=".concat(Ne.value):"")))).join(this.eol)+this.eol}printMsidSemantic(W){if(!W)return"";let Se="a=msid-semantic:".concat(W.semantic);return W.applyForAll?Se+="".concat(_,"*"):W.identifierList.length>0&&(Se+=W.identifierList.map(Ne=>"".concat(_).concat(Ne))),Se+this.eol}}class ct extends Tn{print(W){const Se=W.attributes;let Ne="";return Ne+=this.printRTCP(Se.rtcp),Ne+=this.printIceUfrag(Se.iceUfrag),Ne+=this.printIcePwd(Se.icePwd),Ne+=this.printIceOptions(Se.iceOptions),Ne+=this.printCandidates(Se.candidates),Ne+=this.printRemoteCandidatesList(Se.remoteCandidatesList),Ne+=this.printEndOfCandidates(Se.endOfCandidates),Ne+=this.printFingerprints(Se.fingerprints),Ne+=this.printSetup(Se.setup),Ne+=this.printMid(Se.mid),Ne+=this.printExtmap(Se.extmaps),Ne+=this.printRTPRelated(Se),Ne+=this.printPtime(Se.ptime),Ne+=this.printMaxPtime(Se.maxPtime),Ne+=this.printDirection(Se.direction),Ne+=this.printSSRCGroups(Se.ssrcGroups),Ne+=this.printSSRC(Se.ssrcs),Ne+=this.printRTCPMux(Se.rtcpMux),Ne+=this.printRTCPMuxOnly(Se.rtcpMuxOnly),Ne+=this.printRTCPRsize(Se.rtcpRsize),Ne+=this.printMSId(Se.msids),Ne+=this.printImageattr(Se.imageattr),Ne+=this.printRid(Se.rids),Ne+=this.printSimulcast(Se.simulcast),Ne+=this.printSCTPPort(Se.sctpPort),Ne+=this.printMaxMessageSize(Se.maxMessageSize),Ne+=this.printUnrecognized(Se.unrecognized),Ne}printCandidates(W){return W.map(Se=>"a=candidate:".concat(Se.foundation).concat(_).concat(Se.componentId).concat(_).concat(Se.transport).concat(_).concat(Se.priority).concat(_).concat(Se.connectionAddress).concat(_).concat(Se.port).concat(_,"typ").concat(_).concat(Se.type).concat(Se.relAddr?"".concat(_,"raddr").concat(_).concat(Se.relAddr):"").concat(Se.relPort?"".concat(_,"rport").concat(_).concat(Se.relPort):"").concat(Object.keys(Se.extension).map(Ne=>"".concat(_).concat(Ne).concat(_).concat(Se.extension[Ne])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(W){return W.map(Se=>"a=remote-candidates:".concat(Se.join(_)).concat(this.eol)).join("")}printEndOfCandidates(W){return W===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(W){if(!W.payloads)return"";const Se=W.payloads;let Ne="";Ne+=W.rtcpFeedbackWildcards.map(bt=>this.printRTCPFeedback("*",bt)).join("");for(const bt of Se)Ne+=this.printRtpMap(bt.payloadType,bt.rtpMap),Ne+=this.printFmtp(bt.payloadType,bt.fmtp),Ne+=bt.rtcpFeedbacks.map(Fr=>this.printRTCPFeedback(bt.payloadType,Fr)).join("");return Ne}printFmtp(W,Se){if(!Se)return"";const Ne=Object.keys(Se.parameters);return Ne.length===1&&Se.parameters[Ne[0]]===null?"a=fmtp:".concat(W).concat(_).concat(Ne[0]).concat(this.eol):"a=fmtp:".concat(W).concat(_).concat(Object.keys(Se.parameters).map(bt=>"".concat(bt,"=").concat(Se.parameters[bt])).join(";")).concat(this.eol)}printRtpMap(W,Se){return Se?"a=rtpmap:".concat(W).concat(_).concat(Se.encodingName,"/").concat(Se.clockRate).concat(Se.encodingParameters?"/".concat(Se.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(W,Se){let Ne="a=rtcp-fb:".concat(W).concat(_),bt=Se;return bt.type==="trr-int"?Ne+="ttr-int".concat(_).concat(bt.interval):(Ne+="".concat(bt.type),bt.parameter&&(Ne+="".concat(_).concat(bt.parameter),bt.additional&&(Ne+="".concat(_).concat(bt.additional)))),Ne+this.eol}printPtime(W){return W===void 0?"":"a=ptime:".concat(W).concat(this.eol)}printMaxPtime(W){return W===void 0?"":"a=maxptime:".concat(W).concat(this.eol)}printDirection(W){return W===void 0?"":"a=".concat(W).concat(this.eol)}printSSRC(W){return W.map(Se=>Object.keys(Se.attributes).map(Ne=>"a=ssrc:".concat(Se.ssrcId.toString(10)).concat(_).concat(Ne).concat(Se.attributes[Ne]?":".concat(Se.attributes[Ne]):"").concat(this.eol)).join("")).join("")}printRTCPMux(W){return W===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(W){return W===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(W){return W===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(W){if(W===void 0)return"";let Se="a=rtcp:".concat(W.port);return W.netType&&(Se+="".concat(_).concat(W.netType)),W.addressType&&(Se+="".concat(_).concat(W.addressType)),W.address&&(Se+="".concat(_).concat(W.address)),Se+this.eol}printMSId(W){return W.map(Se=>"a=msid:".concat(Se.id).concat(Se.appdata?"".concat(_).concat(Se.appdata):"").concat(this.eol)).join("")}printImageattr(W){return W.map(Se=>"a=imageattr:".concat(Se).concat(this.eol)).join("")}printRid(W){return W.map(Se=>{let Ne="a=rid:".concat(Se.id).concat(_).concat(Se.direction);return Se.payloads&&(Ne+="".concat(_,"pt=").concat(Se.payloads.join(","))),Se.params.length>0&&(Ne+="".concat(_).concat(Se.params.map(bt=>bt.type==="depend"?"depend=".concat(bt.rids.join(",")):"".concat(bt.type,"=").concat(bt.val)).join(";"))),Ne+this.eol}).join("")}printSimulcast(W){return W===void 0?"":"a=simulcast:".concat(W).concat(this.eol)}printSCTPPort(W){return W===void 0?"":"a=sctp-port:".concat(W).concat(this.eol)}printMaxMessageSize(W){return W===void 0?"":"a=max-message-size:".concat(W).concat(this.eol)}printMid(W){return W===void 0?"":"a=mid:".concat(W).concat(this.eol)}printSSRCGroups(W){return W.map(Se=>"a=ssrc-group:".concat(Se.semantic).concat(Se.ssrcIds.map(Ne=>"".concat(_).concat(Ne.toString(10))).join("")).concat(this.eol)).join("")}}function Ct(ft){return new At().parse(ft)}function Xt(ft,W){return new Ln().print(ft,W)}}},n={};function o(a){if(n[a])return n[a].exports;var l=n[a]={exports:{}};return r[a](l,l.exports,o),l.exports}return o.d=(a,l)=>{for(var d in l)o.o(l,d)&&!o.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:l[d]})},o.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),o.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o(8)})();function wl(r){return p$.parse(r)}function iv(r,n){return p$.print(r,n)}var zwe=Po("Array","keys"),qwe=fo,Ywe=Di,Xwe=N,Jwe=zwe,R5=Array.prototype,Zwe={DOMTokenList:!0,NodeList:!0},eSe=function(r){var n=r.keys;return r===R5||Xwe(R5,r)&&n===R5.keys||Ywe(Zwe,qwe(r))?Jwe:n},Sl=c(eSe);function Ki(r,n,o){return(n=function(a){var l=function(d,h){if(typeof d!="object"||!d)return d;var v=d[Symbol.toPrimitive];if(v!==void 0){var _=v.call(d,"string");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}(a);return typeof l=="symbol"?l:l+""}(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}function g$(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Wr(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?g$(Object(o),!0).forEach(function(a){Ki(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):g$(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const m$=new class extends Mi{constructor(){super(...arguments),Ki(this,"currentUploadLogID",0)}reportLogUploadError(r){const{errorRange:n}=r;n[n.length-1]&&n[n.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=n[n.length-1],this.emit("REPORT_LOG_UPLOAD",r))}};class tSe{constructor(n){Ki(this,"logger",void 0),Ki(this,"prefixLists",[]),this.logger=n}debug(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];this.logger.debug(...this.prefixLists,...o)}info(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];this.logger.info(...this.prefixLists,...o)}warning(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];this.logger.warning(...this.prefixLists,...o)}error(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];this.logger.error(...this.prefixLists,...o)}prefix(n){return this.prefixLists.push(n),this}popPrefix(){return this.prefixLists.pop(),this}}function I5(){const r=new Date;return r.toTimeString().split(" ")[0]+":"+r.getMilliseconds()}function v$(){const r=new Date,n=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return n?(n==null?void 0:n[0])+":"+r.getUTCMilliseconds():r.toTimeString().split(" ")[0]+":"+r.getMilliseconds()}const EA={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},KI=Date.now(),kS=r=>{for(const n in EA)if(Object.prototype.hasOwnProperty.call(EA,n)&&EA[n]===r)return n;return"DEFAULT"},H=new class{constructor(){Ki(this,"proxyServerURL",void 0),Ki(this,"logLevel",EA.DEBUG),Ki(this,"uploadState","collecting"),Ki(this,"uploadLogWaitingList",[]),Ki(this,"uploadLogUploadingList",[]),Ki(this,"uploadErrorCount",0),Ki(this,"currentLogID",0),Ki(this,"url",void 0),Ki(this,"extLog",(r,n)=>{this.appendLogToWaitingList(r,...n)})}debug(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const a=[EA.DEBUG].concat(n);this.log.apply(this,a)}info(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const a=[EA.INFO].concat(n);this.log.apply(this,a)}warning(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const a=[EA.WARNING].concat(n);this.log.apply(this,a)}warn(){this.warning(...arguments)}error(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const a=[EA.ERROR].concat(n);this.log.apply(this,a)}upload(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const a=[EA.DEBUG].concat(n);this.uploadLog.apply(this,a)}setLogLevel(r){r=Math.min(Math.max(0,r),4),this.logLevel=r}enableLogUpload(){zn("UPLOAD_LOG",!0)}disableLogUpload(){zn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(r){this.proxyServerURL=r}prefix(r){return new tSe(this).prefix(r)}log(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(Date.now()-KI<100)return void setTimeout(()=>{this.log(...n)},Date.now()-KI);const a=Math.max(0,Math.min(4,n[0]));if(n[0]=I5()+" Agora-SDK [".concat(kS(a),"]:"),this.appendLogToWaitingList(a,...n),a<this.logLevel)return;const l=I5()+" %cAgora-SDK [".concat(kS(a),"]:");let d=[];if(!me("USE_NEW_LOG"))switch(a){case EA.DEBUG:d=[l,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,d);break;case EA.INFO:d=[l,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,d);break;case EA.WARNING:d=[l,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,d);break;case EA.ERROR:d=[l,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,d)}}uploadLog(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(Date.now()-KI<100)return void setTimeout(()=>{this.uploadLog(...n)},Date.now()-KI);const a=Math.max(0,Math.min(4,n[0]));n[0]=I5()+" Agora-SDK [".concat(kS(a),"]:"),this.appendLogToWaitingList(a,...n)}appendLogToWaitingList(r){if(!me("UPLOAD_LOG"))return;for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];Array.isArray(o[0])?o[0][0]=v$()+" Agora-SDK [".concat(kS(r),"]:"):o[0]=v$()+" Agora-SDK [".concat(kS(r),"]:");let l="";o.forEach(d=>{typeof d=="object"&&(d=JSON.stringify(d)),l+="".concat(d," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:r,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const r=this.uploadLogUploadingList,n={sdk_version:yA,process_id:me("PROCESS_ID"),payload:JSON.stringify(r)};return Wf(async()=>{const o=await Yc.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(me("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(me("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});if(o.data!=="OK"){const a=new Error("unexpected upload log response");throw a.response=o,a}},()=>(this.uploadLogUploadingList=[],!1),o=>{const a={status:-1,message:o.message,errorRange:r.map(l=>l.log_item_id)};return o.response?(a.status=o.response.status,a.data=o.response.data,a.headers=o.response.headers):o.request&&(a.status=o.request.status),m$.reportLogUploadError(a),!0},{timeout:me("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:me("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,me("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),me("UPLOAD_LOG_INTERVAL"))}).catch(r=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),me("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),me("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}};var _$;function rSe(r){return Ls(r.reportId,"params.reportId",0,100,!1),Ls(r.category,"params.category",0,100,!1),Ls(r.event,"params.event",0,100,!1),Ls(r.label,"params.label",0,100,!1),Xn(r.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(_$={}).FREE="free",_$.UPLOADING="uploading",function(r){r[r.MISC=0]="MISC",r[r.INTERNAL_EVENT=1]="INTERNAL_EVENT",r[r.PUBLIC_EVENT=2]="PUBLIC_EVENT",r[r.WEB_EVENT=3]="WEB_EVENT",r[r.INTERNAL_API=4]="INTERNAL_API",r[r.WEB_API=5]="WEB_API",r[r.PUBLIC_API=6]="PUBLIC_API"}({});const nSe={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Yo=function(r){return r.PUBLISH="publish",r.SUBSCRIBE="subscribe",r.WS_COMPRESSOR_INIT="ws_compressor_init",r.SESSION_INIT="session_init",r.JOIN_CHOOSE_SERVER="join_choose_server",r.REQ_USER_ACCOUNT="req_user_account",r.JOIN_GATEWAY="join_gateway",r.REJOIN_GATEWAY="rejoin_gateway",r.STREAM_SWITCH="stream_switch",r.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",r.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",r.FIRST_VIDEO_RECEIVED="first_video_received",r.FIRST_AUDIO_RECEIVED="first_audio_received",r.FIRST_VIDEO_DECODE="first_video_decode",r.FIRST_AUDIO_DECODE="first_audio_decode",r.XLA_PEER_FIRST_VIDEO_FRAME="xla_peer_first_video_frame",r.ON_ADD_AUDIO_STREAM="on_add_audio_stream",r.ON_ADD_VIDEO_STREAM="on_add_video_stream",r.ON_UPDATE_STREAM="on_update_stream",r.ON_REMOVE_STREAM="on_remove_stream",r.USER_ANALYTICS="req_user_analytics",r.PC_STATS="pc_stats",r.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",r.AB_TEST="ab_test",r}({}),Ci=function(r){return r.SESSION="io.agora.pb.Wrtc.Session",r.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",r.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",r.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",r.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",r.PUBLISH="io.agora.pb.Wrtc.Publish",r.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",r.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",r.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",r.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",r.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",r.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",r.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",r.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",r.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",r.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",r.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",r.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",r.XLA_PEER_FIRST_VIDEO_FRAME="io.agora.pb.Wrtc.XLAPeerFirstVideoFrame",r.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",r.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",r.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",r.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",r.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",r.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",r.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",r.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",r.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",r.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",r.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",r.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",r.PC_STATS="io.agora.pb.Wrtc.PCStats",r.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",r.AB_TEST="io.agora.pb.Wrtc.ABTest",r}({});(function(r){r[r.WORKER_EVENT=156]="WORKER_EVENT",r[r.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});let iSe=function(r){return r[r.SESSION=26]="SESSION",r[r.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",r[r.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",r[r.JOIN_GATEWAY=28]="JOIN_GATEWAY",r[r.PUBLISH=30]="PUBLISH",r[r.SUBSCRIBE=29]="SUBSCRIBE",r[r.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",r[r.STREAM_SWITCH=32]="STREAM_SWITCH",r[r.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",r[r.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",r[r.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",r[r.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",r[r.API_INVOKE=41]="API_INVOKE",r[r.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",r[r.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",r[r.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",r[r.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",r[r.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",r[r.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",r[r.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",r[r.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",r[r.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",r[r.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",r[r.WORKER_EVENT=156]="WORKER_EVENT",r[r.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",r[r.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",r[r.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",r[r.USER_ANALYTICS=1e4]="USER_ANALYTICS",r[r.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",r}({});function gr(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(n,o,a){const l=a.value;if(typeof l=="function"){const d=r.className||n.__className__||(n.constructor.name==="AgoraRTCClient"?"Client":n.constructor.name);a.value=function(){for(var h,v=arguments.length,_=new Array(v),y=0;y<v;y++)_[y]=arguments[y];let C=_;if(r.argsMap)try{C=r.argsMap(this,..._)}catch(L){H.warning(L),C=[]}try{JSON.stringify(C)}catch{H.warning("arguments for method ".concat(d,".").concat(String(o)," not serializable for apiInvoke.")),C=[]}const B=(r.report||rr).reportApiInvoke(this._sessionId||null,{id:this._clientId||((h=this.store)===null||h===void 0?void 0:h.clientId)||this._ID,name:"".concat(d,".").concat(String(o)),options:C,tag:Oi.TRACER,reportResult:r.reportResult},r.throttleTime);try{const L=l.apply(this,_);return L instanceof Mt?L.then(x=>(B.onSuccess(r.reportResult&&x),x)).catch(x=>{throw B.onError(x),x}):(B.onSuccess(r.reportResult&&L),L)}catch(L){throw B.onError(L),L}}}return a}}const rr=new class{constructor(){Ki(this,"baseInfoMap",new Map),Ki(this,"proxyServer",void 0),Ki(this,"eventUploadTimer",void 0),Ki(this,"setSessionIdTimer",void 0),Ki(this,"url",void 0),Ki(this,"sids",new Set),Ki(this,"backupUrl",void 0),Ki(this,"_appId",void 0),Ki(this,"_aid",0),Ki(this,"keyEventUploadPendingItems",[]),Ki(this,"normalEventUploadPendingItems",[]),Ki(this,"apiInvokeUploadPendingItems",[]),Ki(this,"apiInvokeCount",0),Ki(this,"apiInvokeLoggedCount",0),Ki(this,"ltsList",[]),Ki(this,"lastSendNormalEventTime",Date.now()),Ki(this,"customReportCounterTimer",void 0),Ki(this,"customReportCount",0),Ki(this,"extApiInvoke",async r=>{for(const n of r){const o=Wr(Wr({},n),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Oi.TRACER});this.sendApiInvoke(o)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),me("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),me("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(r){return this.baseInfoMap.get(r)}setAppId(r){this._appId=r,this._aid=parseInt(r.replace(/[a-fA-F0-9]{8}/g,n=>{let[o,a]=n;return o+a}),16)||0}reportApiInvoke(r,n,o){n.timeout=n.timeout||6e4,n.reportResult=n.reportResult===void 0||n.reportResult;const a=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,d=!!me("SHOW_REPORT_INVOKER_LOG"),h=!!me("SHOW_REPORT_USER_INVOKER_LOG"),v=d||h&&n.id;v&&(this.apiInvokeLoggedCount+=1);const _=this.apiInvokeLoggedCount;function y(x,X){if(v){let G="[apiInvoke-".concat(_,"]");if(n.id&&(G+="[".concat(n.id,"]")),n.name&&(G+="[".concat(n.name,"]"),n.name===Ji.JOIN))return H.info("".concat(G," ").concat(x));H.info("".concat(G," ").concat(x),x==="start"?n.options:X||"")}}const C=()=>({tag:n.tag,invokeId:l,sid:r,name:n.name,apiInvokeTime:a,options:n.options,states:n.states||null});y("start");let B=!1;Ps(n.timeout).then(()=>{B||(this.sendApiInvoke(Wr(Wr({},C()),{},{error:de.API_INVOKE_TIMEOUT,success:!1})),y("timeout"))});const L=new tt(de.UNEXPECTED_ERROR,"".concat(n.name,": this api invoke is end"));return{onSuccess:x=>{const X=()=>{if(B)throw L;return B=!0,this.sendApiInvoke(Wr(Wr({},C()),{},{success:!0},n.reportResult&&{result:x})),y("onSuccess"),x};return o?JG(X,n.name+"Success",o,()=>B=!0):X()},onError:x=>{const X=()=>{if(B)throw x;B=!0,this.sendApiInvoke(Wr(Wr({},C()),{},{success:!1,error:x})),y("onFailure",x.toString())};return o?JG(X,n.name+"Error",o,()=>B=!0):X()}}}sessionInit(r,n){if(this.baseInfoMap.has(r))return;const o=Date.now(),a=this.createBaseInfo(r,o);a.cname=n.cname;const l=Object.assign({},{willUploadConsoleLog:me("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:S5?"global":"oversea",areas:me("AREAS")&&me("AREAS").join(",")},n.extend),{stringUid:d,channelProfile:h,channelMode:v,isABTestSuccess:_,lsid:y,clientRole:C}=n,B=Date.now(),L=Wr(Wr({},a),{},{eventType:Yo.SESSION_INIT,appid:n.appid,browser:navigator.userAgent,buildFormat:n.buildFormat,build:C5,lts:B,elapse:B-o,extend:JSON.stringify(l),mode:n.mode,process:me("PROCESS_ID"),appType:me("APP_TYPE"),success:!0,version:yA,stringUid:d,channelProfile:h,channelMode:v,isABTestSuccess:_,lsid:y,clientType:_t(x=window.navigator.userAgent).call(x,"AgoraWebView")?42:20,clientRole:C,serviceId:me("PROCESS_ID"),extensionID:me("PLUGIN_INFO").join(",")||""});var x;this.send({type:Ci.SESSION,data:L},!0)}joinChooseServer(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr({},a),{},{role:n.role,eventType:Yo.JOIN_CHOOSE_SERVER,lts:l,eventElapse:n.elapse||l-n.lts,chooseServerAddr:n.csAddr,errorCode:n.ec,elapse:l-o.startTime,success:n.succ,chooseServerAddrList:JSON.stringify(n.serverList),uid:n.uid?parseInt(n.uid):null,cid:n.cid?parseInt(n.cid):null,chooseServerIp:n.csIp||"",opid:n.opid,unilbsServerIds:n.unilbsServerIds,extend:n.extend||void 0,isHttp3:n.isHttp3,corssRegionTagReq:n.corssRegionTagReq||void 0,corssRegionTagRes:n.corssRegionTagRes||void 0,resourceTimingInfo:n.resourceTimingInfo||void 0});this.send({type:Ci.JOIN_CHOOSE_SERVER,data:d},!0)}reqUserAccount(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr({},a),{},{eventType:Yo.REQ_USER_ACCOUNT,lts:l,success:n.success,serverAddress:n.serverAddr,stringUid:n.stringUid,uid:n.uid,errorCode:n.errorCode,elapse:n.elapse||l-o.startTime,eventElapse:l-n.lts,extend:JSON.stringify(n.extend)});this.send({type:Ci.REQ_USER_ACCOUNT,data:d},!0)}joinGateway(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info;n.vid&&(a.vid=n.vid),a.uid=n.uid,a.cid=n.cid;const l=Date.now(),{firstSuccess:d,addr:h,isProxy:v}=n,_=l-o.startTime,y=Wr(Wr({},a),{},{eventType:Yo.JOIN_GATEWAY,lts:l,gatewayAddr:n.addr,success:n.succ,errorCode:n.ec,errorMsg:n.errorMsg||"",elapse:_,eventElapse:l-n.lts,firstSuccess:d,signalChannel:n.signalChannel,preload:n.preload?1:0,installId:w5(),isABTestSuccess:n.isABTestSuccess?1:0}),C=y.success?1:0;if(n.succ&&(o.lastJoinSuccessTime=l),d)this.send({type:Ci.JOIN_GATEWAY,data:y},!0);else{let B;if(h)if(v){const x=h.match(/h=(\d{1,3}-){3}\d{1,3}/g),X=h.match(/p=[0-9]{1,6}/g);B={isSuccess:C,gatewayIp:x&&x.length?x[0].split("=")[1].replace(/-/g,"."):"",port:X&&X.length?X[0].split("=")[1]:"",isProxy:v?1:0}}else{const x=h.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),X=h.match(/(:|p=)[0-9]{1,6}/g);B={isSuccess:C,gatewayIp:x&&x.length?x[0].split("//")[1].replace(/-/g,"."):"",port:X&&X.length?X[0].split(/:|p=/g)[1]:"",isProxy:v?1:0}}else B={isSuccess:C,gatewayIp:"",port:"",isProxy:v?1:0};delete y.success,delete y.eventType,delete y.firstSuccess,y.vid=Number(y.vid);const L=Object.assign({},y,B,{eventType:Yo.REJOIN_GATEWAY});this.send({type:Ci.RE_JOIN_GATEWAY,data:L},!0)}}joinChannelTimeout(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=Date.now(),l=Wr(Wr({},o.info),{},{lts:a,timeout:n,elapse:a-o.startTime});this.send({type:Ci.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr({},a),{},{eventType:Yo.PUBLISH,lts:l,eventElapse:n.eventElapse,elapse:l-o.startTime,success:n.succ,errorCode:n.ec,videoName:n.videoName,audioName:n.audioName,screenName:n.screenName,screenshare:n.screenshare,audio:n.audio,video:n.video,p2pid:n.p2pid,publishRequestid:n.publishRequestid});this.send({type:Ci.PUBLISH,data:d},!0)}subscribe(r,n,o){const a=this.baseInfoMap.get(r);if(!a)return;const l=a.info,d=Date.now(),h=Wr(Wr({},l),{},{eventType:Yo.SUBSCRIBE,lts:d,eventElapse:n.eventElapse,elapse:d-a.startTime,success:n.succ,errorCode:n.ec,video:n.video,audio:n.audio,subscribeRequestid:n.subscribeRequestid,p2pid:n.p2pid,preSsrc:n.preSsrc?1:0},o&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof n.peerid=="string"?h.peerSuid=n.peerid:h.peer=n.peerid,this.send({type:Ci.SUBSCRIBE,data:h},!0)}wsCompressorInit(r){var n;const o=[...Sl(n=this.baseInfoMap).call(n)],a=o.length?o[0]:"UnableToGetSid",l=this.baseInfoMap.get(a);if(!l)return;const d=l.info,h=Date.now(),v=Wr(Wr({},d),{},{eventType:Yo.WS_COMPRESSOR_INIT,lts:h,eventElapse:r.eventElapse,elapse:h-l.startTime,status:r.status?1:2});this.send({type:Ci.WS_COMPRESSOR_INIT,data:v},!0)}firstXLAPeerFirstVideoFrame(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=n.peerPubStatusMs-(o.lastJoinSuccessTime||l),h=Wr(Wr({},a),{},{elapse:l-o.startTime,eventType:Yo.XLA_PEER_FIRST_VIDEO_FRAME,lts:l,peer:n.peer,width:n.width,height:n.height,ssrc:n.ssrc,p2pid:n.p2pid,peerPublishDuration:n.peerPublishDuration,joinChannelSuccessElapse:d,peerPubStatusMs:n.peerPubStatusMs-n.joinChannelStart,availablePublish:n.peerPublishDuration>d?1:0,preloadStart:Math.max(n.preloadStart-n.joinChannelStart,0),preloadEnd:Math.max(n.preloadEnd-n.joinChannelStart,0),encrypt:Math.max(n.apStart-n.joinChannelStart,0),ap:Math.max(n.apEnd-n.joinChannelStart,0),sua:Math.max(n.suaEnd-n.joinChannelStart,0),beforeConnect:Math.max(n.beforeConnect-n.joinChannelStart,0),peerRecevier:Math.max(n.peerReceiver-n.joinChannelStart,0),ice:Math.max(n.ice-n.joinChannelStart,0),pc:Math.max(n.pc-n.joinChannelStart,0),signalConnected:Math.max(n.signalConnected-n.joinChannelStart,0),joinReq:Math.max(n.joinReq-n.joinChannelStart,0),joinRes:Math.max(n.joinRes-n.joinChannelStart,0),userJoinNotify:Math.max(n.userJoinNotify-n.joinChannelStart,0),videoSsrcNotify:Math.max(n.videoAddNotify-n.joinChannelStart,0),subscribeDelayMs:Math.max(n.subscribeStart-n.videoAddNotify,0),subscribeStart:Math.max(n.subscribeStart-n.joinChannelStart,0),subscribeEnd:Math.max(n.subscribeEnd-n.joinChannelStart,0),firstReceived:Math.max(n.firstReceived-n.joinChannelStart,0),firstDecoded:Math.max(n.firstDecoded-n.joinChannelStart,0),firstPreRender:Math.max(n.firstPreRender-n.joinChannelStart,0),firstRender:Math.max(n.firstRender-n.joinChannelStart,0),playDelayMs:Math.max(n.playStart-n.subscribeEnd,0),playStart:Math.max(n.playStart-n.joinChannelStart,0),playEnd:Math.max(n.playEnd-n.joinChannelStart,0),isPreSub:n.isPreSub?1:0,isPrePc:n.isPrePc?1:0,isPreInstantVideo:n.isPreInstantVideo?1:0});this.send({type:Ci.XLA_PEER_FIRST_VIDEO_FRAME,data:h},!0)}firstRemoteVideoDecode(r,n,o,a){const l=this.baseInfoMap.get(r);if(!l)return;const d=l.info,h=Date.now(),v=Wr(Wr(Wr({},d),a),{},{elapse:h-l.startTime,eventType:n,lts:h,firstDecodeFrame:Math.max((a.firstFrame||h)-l.startTime,0),apEnd:Math.max(a.apEnd-l.startTime,0),apStart:Math.max(a.apStart-l.startTime,0),joinGwEnd:Math.max(a.joinGwEnd-l.startTime,0),joinGwStart:Math.max(a.joinGwStart-l.startTime,0),pcEnd:Math.max(a.pcEnd-l.startTime,0),pcStart:Math.max(a.pcStart-l.startTime,0),subscriberEnd:Math.max(a.subscriberEnd-l.startTime,0),subscriberStart:Math.max(a.subscriberStart-l.startTime,0),videoAddNotify:Math.max(a.videoAddNotify-l.startTime,0)});this.send({type:o,data:v},!0)}firstRemoteFrame(r,n,o,a){const l=this.baseInfoMap.get(r);if(!l)return;const d=l.info,h=Date.now(),v=Wr(Wr(Wr({},d),a),{},{elapse:h-l.startTime,eventType:n,lts:h});this.send({type:o,data:v},!0)}abTest(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr(Wr({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),elapse:l-o.startTime,eventType:Yo.AB_TEST,lts:l});this.send({type:Ci.AB_TEST,data:d},!0)}pcStats(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr(Wr({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),elapse:l-o.startTime,eventType:Yo.PC_STATS,lts:l,preallocation:n.preallocation?1:0});this.send({type:Ci.PC_STATS,data:d},!0)}updateRemoteRTPCapabilities(r,n){if(r){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr(Wr({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),eventType:Yo.UPDATE_REMOTE_RTPCAPABILITIES,lts:l});this.send({type:Ci.UPDATE_REMOTE_RTPCAPABILITIES,data:d},!0)}}onGatewayStream(r,n,o,a){const l=this.baseInfoMap.get(r);if(!l)return;const d=l.info,h=Date.now(),v=Wr(Wr(Wr({},d),a),{},{eventType:n,lts:h});this.send({type:o,data:v},!0)}streamSwitch(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr({},a),{},{eventType:Yo.STREAM_SWITCH,lts:l,isDual:n.isdual,elapse:l-o.startTime,success:n.succ});this.send({type:Ci.STREAM_SWITCH,data:d},!0)}requestProxyAppCenter(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr({},a),{},{eventType:Yo.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-n.lts,elapse:l-o.startTime,APAddr:n.APAddr,workerManagerList:n.workerManagerList,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:Ci.REQUEST_PROXY_APPCENTER,data:d},!0)}requestProxyWorkerManager(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr({},a),{},{eventType:Yo.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-n.lts,elapse:l-o.startTime,workerManagerAddr:n.workerManagerAddr,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:Ci.REQUEST_PROXY_WORKER_MANAGER,data:d},!0)}setProxyServer(r){this.proxyServer=r,r?H.debug("reportProxyServerurl: ".concat(r)):H.debug("disable reportProxyServerurl: ".concat(r))}peerPublishStatus(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr({},a),{},{subscribeElapse:n.subscribeElapse,peer:n.peer,peerPublishDuration:Math.max(n.audioPublishDuration,n.videoPublishDuration),audiotag:n.audioPublishDuration>0?1:-1,videotag:n.videoPublishDuration>0?1:-1,lts:l,elapse:l-o.startTime,joinChannelSuccessElapse:l-(o.lastJoinSuccessTime||l),peerPublishDurationVideo:n.videoPublishDuration,peerPublishDurationAudio:n.audioPublishDuration});this.send({type:Ci.PEER_PUBLISH_STATUS,data:d},!0)}workerEvent(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now();(function(d,h,v){const _=d[h];if(!_||typeof _!="string")return[d];d[h]="";const y=pp(JSON.stringify(d));let C=0;const B=[];let L=0;for(let x=0;x<_.length;x++)L+=_.charCodeAt(x)<=127?1:3,L<=v-y||(B[B.length]=St(St({},d),{},{[h]:_.substring(C,x)}),C=x,L=_.charCodeAt(x)<=127?1:3);return C!==_.length-1&&(B[B.length]=St(St({},d),{},{[h]:_.substring(C)})),B})(Wr(Wr(Wr({},a),n),{},{elapse:l-o.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(d=>this.send({type:Ci.WORKER_EVENT,data:d},!0))}apworkerEvent(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr(Wr({},a),n),{},{elapse:l-o.startTime,lts:l});this.send({type:Ci.AP_WORKER_EVENT,data:d},!0)}joinWebProxyAP(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr(Wr({},a),n),{},{elapse:l-o.startTime,lts:l,extend:n.extend||void 0});this.send({type:Ci.JOIN_WEB_PROXY_AP,data:d},!0)}WebSocketQuit(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const a=o.info,l=Date.now(),d=Wr(Wr(Wr({},a),n),{},{elapse:l-o.startTime,lts:l});this.send({type:Ci.WEBSOCKET_QUIT,data:d},!0)}async sendCustomReportMessage(r,n){if(this.customReportCount+=n.length,this.customReportCount>me("CUSTOM_REPORT_LIMIT"))throw new tt(de.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const o=Date.now(),a=n.map(l=>({type:Ci.USER_ANALYTICS,data:Wr(Wr({sid:r},l),{},{lts:o})}));try{me("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(a):await this.postDataToStatsCollector(a)}catch(l){throw H.error("send custom report message failed",l.toString()),new tt(de.CUSTOM_REPORT_SEND_FAILED,l.message)}}sendApiInvoke(r){const n=me("NOT_REPORT_EVENT");if(r.tag&&_t(n)&&_t(n).call(n,r.tag))return!1;if(r.sid===null)return this.apiInvokeUploadPendingItems.push(r),!1;const o=this.baseInfoMap.get(r.sid);if(!o)return this.apiInvokeUploadPendingItems.push(r),!1;const{cname:a,uid:l,cid:d}=o.info;let h;if(r.lts=r.lts||Date.now(),r.error)if(r.error instanceof tt){const{code:_,message:y}=r.error;h=_||y||r.error.toString()}else h=r.error.toString();const v={invokeId:r.invokeId,sid:r.sid,cname:a,cid:d,uid:l,lts:r.lts,success:r.success,elapse:r.lts-o.startTime,execElapse:r.lts-r.apiInvokeTime,apiName:r.name,options:r.options?JSON.stringify(r.options):void 0,execStates:r.states?JSON.stringify(r.states):void 0,execResult:r.result?JSON.stringify(r.result):void 0,errorCode:r.error?h:void 0,errorMsg:r.error?JSON.stringify(r.error):void 0};return this.send({type:Ci.API_INVOKE,data:v},!1),!0}addSid(r){this.sids.add(r)}removeSid(r){this.sids.delete(r)}appendSessionId(){const r=this.apiInvokeUploadPendingItems;if(r.length===0)return;const n=Array.from(this.sids).find(o=>o!==null);n&&r.forEach(o=>{o&&(o.sid=n,this.sendApiInvoke(Object.assign({},o)))}),r.length=0}send(r,n){if(n)return this.keyEventUploadPendingItems.push(r),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(r),this.normalEventUploadPendingItems.length>me("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(r,n){const o=[],a=[];for(;r.length;){const d=r.shift();o.length<20?o.push(d):a.push(d)}r.push(...a);for(const d of[...o]){var l;this.ltsList.indexOf(d.data.lts)!==-1?(d.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(d.data.lts)):(this.ltsList.push(d.data.lts),j0(l=this.ltsList).call(l,(h,v)=>h-v))}return n||(this.lastSendNormalEventTime=Date.now()),me("ENABLE_EVENT_REPORT")&&o.length&&(me("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(o):this.postDataToStatsCollector(o)).catch((d=>h=>{me("EVENT_REPORT_RETRY")&&(n?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(d):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(d),this.normalEventUploadPendingItems.length>me("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-me("NORMAL_EVENT_QUEUE_CAPACITY")),H.warning("report: drop normal events"))))})(o)),r}async postDataToStatsCollector2(r){ho.networkState===tu.OFFLINE&&await Mt.race([ho.onlineWaiter,Ps(2*Ro.maxRetryTimeout)]);const n=l=>{let d=new Uint8Array;return l.forEach(h=>{const v=u5(JSON.stringify(h.data)),_=new ArrayBuffer(5),y=(B=>{let L=0;return Object.entries(Ci).forEach(x=>{let[X,G]=x;G===B.type&&(L=iSe[X])}),L})(h),C=new DataView(_);C.setUint16(0,v.byteLength,!0),C.setUint8(2,255&y),C.setUint8(3,y>>>8&255),C.setUint8(4,y>>>16&255),d=jG(d,new Uint8Array(_)),d=jG(d,v)}),d},o="event";let a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(me("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(o):"https://".concat(me("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(o);for(let l=0;l<2;l+=1){l===1&&(a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(me("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(o):"https://".concat(me("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(o));try{await m5(a,{timeout:1e4,data:n(r),headers:Wr(Wr({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(d){if(l===1)throw d;continue}return}}async postDataToStatsCollector(r){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=(v=>{const _=v&&v.data.sid&&this.baseInfoMap.get(v.data.sid);return _&&_.info.vid&&+_.info.vid||0})(r[0]),a=o?void 0:this._aid,l={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:r.map(v=>JSON.stringify(v)),vid:o,aid:a};ho.networkState===tu.OFFLINE&&await Mt.race([ho.onlineWaiter,Ps(2*Ro.maxRetryTimeout)]);const d=n?"/events/proto-raws":"/events/messages";let h=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(me("EVENT_REPORT_DOMAIN"),"&p=").concat(me("STATS_COLLECTOR_PORT"),"&d=").concat(d):"https://".concat(me("EVENT_REPORT_DOMAIN"),":").concat(me("STATS_COLLECTOR_PORT")).concat(d));for(let v=0;v<2;v+=1){v===1&&(h=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(me("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(me("STATS_COLLECTOR_PORT"),"&d=").concat(d):"https://".concat(me("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(me("STATS_COLLECTOR_PORT")).concat(d)));try{n?await jwe(h,{timeout:1e4,data:l}):await m5(h,{timeout:1e4,data:l})}catch(_){if(v===1)throw _;continue}return}}createBaseInfo(r,n){const o=Object.assign({},nSe);return o.sid=r,this.baseInfoMap.set(r,{info:o,startTime:n}),o}reportResourceTiming(r,n){const o=performance.getEntriesByName(r),a=o[o.length-1];a&&this.reportApiInvoke(n,{name:"Client.resourceTiming",options:a,tag:Oi.TRACER}).onSuccess()}};m$.on("REPORT_LOG_UPLOAD",r=>{r.networkState=ho.networkState,rr.reportApiInvoke(null,{name:"logUploadError",options:r,tag:Oi.TRACER}).onSuccess("logUploadError")});class Je extends tt{constructor(n){super(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),Ki(this,"name","AgoraRTCException")}print(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(n,H)}throw(){super.throw(H)}}const ks={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function vn(){return ks}function y$(){return"setSinkId"in HTMLAudioElement.prototype&&(!me("RESTRICTION_SET_PLAYBACK_DEVICE")||(kg()||BG())&&!a5())}function WI(){return!ks.supportUnifiedPlan||me("CHROME_FORCE_PLAN_B")&&Dg()}function O5(r){return!(Hi()||LG(87)||WI()||!me("ENABLE_PRE_SUB")&&(r==null||!r.autoSubscribe||me("FORCE_DISABLE_AUTO_SUB")))}function E$(r){return!!me("ENABLE_INSTANT_VIDEO")||!(r==null||!r.autoSubscribe||me("FORCE_DISABLE_AUTO_SUB"))}let Ds=function(r){return r.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",r.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",r.IOS_INTERRUPTION_START="ios-interruption-start",r.IOS_INTERRUPTION_END="ios-interruption-end",r.STATE_CHANGE="state-change",r}({});function Ey(r,n,o){return{sampleRate:r,stereo:n,bitrate:o}}function _n(r,n,o,a,l){return{width:r,height:n,frameRate:o,bitrateMin:a,bitrateMax:l}}function bd(r,n,o,a,l){return{width:{max:r},height:{max:n},frameRate:o,bitrateMin:a,bitrateMax:l}}function N5(r,n){return{numSpatialLayers:r,numTemporalLayers:n}}const oSe={"90p":_n(160,90),"90p_1":_n(160,90),"120p":_n(160,120,15,30,65),"120p_1":_n(160,120,15,30,65),"120p_3":_n(120,120,15,30,50),"120p_4":_n(212,120),"180p":_n(320,180,15,30,140),"180p_1":_n(320,180,15,30,140),"180p_3":_n(180,180,15,30,100),"180p_4":_n(240,180,15,30,120),"240p":_n(320,240,15,40,200),"240p_1":_n(320,240,15,40,200),"240p_3":_n(240,240,15,40,140),"240p_4":_n(424,240,15,40,220),"360p":_n(640,360,15,80,400),"360p_1":_n(640,360,15,80,400),"360p_3":_n(360,360,15,80,260),"360p_4":_n(640,360,30,80,600),"360p_6":_n(360,360,30,80,400),"360p_7":_n(480,360,15,80,320),"360p_8":_n(480,360,30,80,490),"360p_9":_n(640,360,15,80,800),"360p_10":_n(640,360,24,80,800),"360p_11":_n(640,360,24,80,1e3),"480p":_n(640,480,15,100,500),"480p_1":_n(640,480,15,100,500),"480p_2":_n(640,480,30,100,1e3),"480p_3":_n(480,480,15,100,400),"480p_4":_n(640,480,30,100,750),"480p_6":_n(480,480,30,100,600),"480p_8":_n(848,480,15,100,610),"480p_9":_n(848,480,30,100,930),"480p_10":_n(640,480,10,100,400),"720p":_n(1280,720,15,120,1130),"720p_auto":_n(1280,720,30,900,3e3),"720p_1":_n(1280,720,15,120,1130),"720p_2":_n(1280,720,30,120,2e3),"720p_3":_n(1280,720,30,120,1710),"720p_5":_n(960,720,15,120,910),"720p_6":_n(960,720,30,120,1380),"1080p":_n(1920,1080,15,120,2080),"1080p_1":_n(1920,1080,15,120,2080),"1080p_2":_n(1920,1080,30,120,3e3),"1080p_3":_n(1920,1080,30,120,3150),"1080p_5":_n(1920,1080,60,120,4780),"1440p":_n(2560,1440,30,120,4850),"1440p_1":_n(2560,1440,30,120,4850),"1440p_2":_n(2560,1440,60,120,7350),"4k":_n(3840,2160,30,120,8910),"4k_1":_n(3840,2160,30,120,8910),"4k_3":_n(3840,2160,60,120,13500)},sSe={"480p":bd(640,480,5),"480p_1":bd(640,480,5),"480p_2":bd(640,480,30),"480p_3":bd(640,480,15),"720p":bd(1280,720,5),"720p_auto":_n(1280,720,30,900,3e3),"720p_1":bd(1280,720,5),"720p_2":bd(1280,720,30),"720p_3":bd(1280,720,15),"1080p":bd(1920,1080,5),"1080p_1":bd(1920,1080,5),"1080p_2":bd(1920,1080,30),"1080p_3":bd(1920,1080,15)},aSe={"1SL1TL":N5(1,1),"3SL3TL":N5(3,3),"2SL3TL":N5(2,3)};function Cd(r){return r||(r="480p_1"),typeof r=="string"?Object.assign({},oSe[r]):r}function B5(r){return typeof r=="string"?Object.assign({},sSe[r]):r}function GI(r){return typeof r=="string"?Object.assign({},aSe[r]):r}const cSe={speech_low_quality:Ey(16e3,!1),speech_standard:Ey(32e3,!1,18),music_standard:Ey(48e3,!1),standard_stereo:Ey(48e3,!0,56),high_quality:Ey(48e3,!1,128),high_quality_stereo:Ey(48e3,!0,192)};function $I(r){return typeof r=="string"?Object.assign({},cSe[r]):r}const wy=[];function w$(r){return qo(r,"mediaSource",["screen","window","application"]),!0}let Zt=function(r){return r.NEED_RENEGOTIATE="@need_renegotiate",r.NEED_REPLACE_TRACK="@need_replace_track",r.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",r.NEED_CLOSE="@need_close",r.NEED_ENABLE_TRACK="@need_enable_track",r.NEED_DISABLE_TRACK="@need_disable_track",r.NEED_SESSION_ID="@need_sid",r.SET_OPTIMIZATION_MODE="@set_optimization_mode",r.GET_STATS="@get_stats",r.GET_RTC_STATS="@get_rtc_stats",r.GET_LOW_VIDEO_TRACK="@get_low_video_track",r.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",r.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",r.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",r.NEED_MUTE_TRACK="@need_mute_track",r.NEED_UNMUTE_TRACK="@need_unmute_track",r}({}),Jn=function(r){return r.SCREEN_TRACK="screen_track",r.CUSTOM_TRACK="custome_track",r.LOW_STREAM="low_stream",r.SCREEN_LOW_TRACK="screen_low_track",r}({}),Sy=function(r){return r[r.HIGH_STREAM=0]="HIGH_STREAM",r[r.LOW_STREAM=1]="LOW_STREAM",r}({}),lSe=function(r){return r[r.HIGH_STREAM=0]="HIGH_STREAM",r[r.LOW_STREAM=1]="LOW_STREAM",r[r.HIGH_STREAM_LAYER1=4]="HIGH_STREAM_LAYER1",r[r.HIGH_STREAM_LAYER2=5]="HIGH_STREAM_LAYER2",r[r.HIGH_STREAM_LAYER3=6]="HIGH_STREAM_LAYER3",r[r.HIGH_STREAM_LAYER4=7]="HIGH_STREAM_LAYER4",r[r.HIGH_STREAM_LAYER5=8]="HIGH_STREAM_LAYER5",r[r.HIGH_STREAM_LAYER6=9]="HIGH_STREAM_LAYER6",r}({}),uSe=function(r){return r[r.DISABLE=0]="DISABLE",r[r.LOW_STREAM=1]="LOW_STREAM",r[r.AUDIO_ONLY=2]="AUDIO_ONLY",r[r.HIGH_STREAM_LAYER1=3]="HIGH_STREAM_LAYER1",r[r.HIGH_STREAM_LAYER2=4]="HIGH_STREAM_LAYER2",r[r.HIGH_STREAM_LAYER3=5]="HIGH_STREAM_LAYER3",r[r.HIGH_STREAM_LAYER4=6]="HIGH_STREAM_LAYER4",r[r.HIGH_STREAM_LAYER5=7]="HIGH_STREAM_LAYER5",r[r.HIGH_STREAM_LAYER6=8]="HIGH_STREAM_LAYER6",r}({}),r1=function(r){return r.TRANSCEIVER_UPDATED="transceiver-updated",r.SEI_TO_SEND="sei-to-send",r.SEI_RECEIVED="sei-received",r.TRACK_UPDATED="track-updated",r}({}),by=function(r){return r.SOURCE_STATE_CHANGE="source-state-change",r.TRACK_ENDED="track-ended",r.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",r.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",r.CLOSED="closed",r}({}),wA=function(r){return r.FIRST_FRAME_DECODED="first-frame-decoded",r.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",r.VIDEO_STATE_CHANGED="video-state-changed",r.PLAY_START="play-start",r.PLAY_END="play-end",r.FIRST_FRAME_RENDER="first-frame-render",r}({}),Cy=function(r){return r.AUDIO="audio",r.VIDEO="video",r.DATA="data",r}({}),Nu=function(r){return r.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",r.RECEIVE_TRACK_BUFFER="receive_track_buffer",r.ON_AUDIO_BUFFER="on_audio_buffer",r.UPDATE_SOURCE="update_source",r}({});(function(r){r.UPDATE_TRACK_SOURCE="update-track-source"})({});const L5={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},P5={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},S$={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},ASe={uplinkNetworkQuality:0,downlinkNetworkQuality:0},b$={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Sc=function(r){return r.ON_TRACK="on_track",r.ON_NODE="on_node",r}({}),Bu=function(r){return r.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",r.REQUEST_CONSTRAINTS="request_constraints",r}({}),DS=function(r){return r.IDLE="IDLE",r.INITING="INITING",r.INITEND="INITEND",r}({}),n1=function(r){return r.STATE_CHANGE="state_change",r.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",r.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",r.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",r}({}),ma=function(r){return r.NONE="none",r.INIT="init",r.CANPLAY="canplay",r.PLAYING="playing",r.PAUSED="paused",r.SUSPEND="suspend",r.STALLED="stalled",r.WAITING="waiting",r.ERROR="error",r.DESTROYED="destroyed",r.ABORT="abort",r.ENDED="ended",r.EMPTIED="emptied",r.LOADEDDATA="loadeddata",r}({}),mp=function(r){return r[r.VideoStateStopped=0]="VideoStateStopped",r[r.VideoStateStarting=1]="VideoStateStarting",r[r.VideoStateDecoding=2]="VideoStateDecoding",r[r.VideoStateFrozen=3]="VideoStateFrozen",r}({});const k5={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let zI=function(r){return r.OPEN="open",r.MESSAGE="message",r.CLOSE="close",r.CLOSING="closing",r.ERROR="error",r}({});function fn(r,n,o,a,l){var d,h,v={};return Object.keys(a).forEach(function(_){v[_]=a[_]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=ka(d=ud(h=o.slice()).call(h)).call(d,function(_,y){return y(r,n,_)||_},v),l&&v.initializer!==void 0&&(v.value=v.initializer?v.initializer.call(l):void 0,v.initializer=void 0),v.initializer===void 0?(Object.defineProperty(r,n,v),null):v}function Xe(r,n,o){return(n=function(a){var l=function(d,h){if(typeof d!="object"||!d)return d;var v=d[Symbol.toPrimitive];if(v!==void 0){var _=v.call(d,"string");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}(a);return typeof l=="symbol"?l:l+""}(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}function C$(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function ui(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?C$(Object(o),!0).forEach(function(a){Xe(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):C$(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}class T$ extends Mi{set _mediaStreamTrack(n){n!==this.mediaStreamTrack&&(this.safeEmit(r1.TRACK_UPDATED,n),this.mediaStreamTrack=n)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(n,o){super(),Xe(this,"trackMediaType",void 0),Xe(this,"_ID",void 0),Xe(this,"_rtpTransceiver",void 0),Xe(this,"_lowRtpTransceiver",void 0),Xe(this,"_hints",[]),Xe(this,"_isClosed",!1),Xe(this,"_originMediaStreamTrack",void 0),Xe(this,"mediaStreamTrack",void 0),Xe(this,"_external",{}),this._ID=o||ii(8,"track-"),this._originMediaStreamTrack=n,this.mediaStreamTrack=n,function(a){_t(wy).call(wy,a)||wy.push(a)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(n){return n||rv(()=>{var o;rr.reportApiInvoke(null,{name:Ji.GET_MEDIA_STREAM_TRACK,options:[],tag:Oi.TRACER}).onSuccess(((o=this._mediaStreamTrack)===null||o===void 0?void 0:o.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(n){return n===Sy.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(n){const o=wy.indexOf(n);o!==-1&&wy.splice(o,1)}(this),this.emit(by.CLOSED),this.removeAllListeners(r1.SEI_RECEIVED)}_updateRtpTransceiver(n,o){if(o===Sy.LOW_STREAM){if(this._lowRtpTransceiver===n)return;this._lowRtpTransceiver=n}else{if(this._rtpTransceiver===n)return;this._rtpTransceiver=n}this.emit(r1.TRANSCEIVER_UPDATED,n,o)}}class Ty extends T${get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(n,o){super(n,o),Xe(this,"_enabled",!0),Xe(this,"_muted",!1),Xe(this,"_isExternalTrack",!1),Xe(this,"_isClosed",!1),Xe(this,"_enabledMutex",void 0),Xe(this,"processor",void 0),Xe(this,"_processorContext",void 0),Xe(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new ga("".concat(this.getTrackId())),n.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var n,o;return(n=(o=this._originMediaStreamTrack)===null||o===void 0?void 0:o.label)!==null&&n!==void 0?n:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,H.debug("[".concat(this.getTrackId(),"] close")),this.emit(Zt.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(n,o){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=a,n!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),o&&this._originMediaStreamTrack.stop()),n.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await ni(this,Zt.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){H.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(by.TRACK_ENDED)}stateCheck(n,o){if(H.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(n,": ").concat(o,"]")),Kf(o,n),this._enabled&&this._muted&&n==="enabled"&&o===!1)throw new tt(de.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",H);if(!this._enabled&&!this._muted&&n==="muted"&&o===!0)throw new tt(de.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",H)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():Mt.resolve([])}}const R$=window.AudioContext||window.webkitAudioContext;let Lu=null;const qn=new class extends Mi{constructor(){super(...arguments),Xe(this,"prevState",void 0),Xe(this,"curState",void 0),Xe(this,"currentTime",void 0),Xe(this,"currentTimeStuckAt",void 0),Xe(this,"interruptDetectorTrack",void 0),Xe(this,"onLocalAudioTrackMute",()=>{H.info("ios15-interruption-start"),this.emit(Ds.IOS_15_16_INTERRUPTION_START)}),Xe(this,"onLocalAudioTrackUnmute",async()=>{H.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?H.info("ios15-interruption-end-canceled"):(Lu&&await Lu.suspend(),this.emit(Ds.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(r){H.debug("webaudio bindInterruptDetectorTrack ".concat(r.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=r,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(r){H.debug("webaudio unbindInterruptDetectorTrack ".concat(r.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===r&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Ry(){if(!Lu){if(function(){if(!R$)return void H.error("your browser is not support web audio");H.info("create audio context");const r=ui({},me("WEBAUDIO_INIT_OPTIONS"));H.debug("audio context init option:",JSON.stringify(r)),Lu=new R$(r),qn.curState=Lu.state,Lu.onstatechange=()=>{qn.prevState=qn.curState,qn.curState=Lu?Lu.state:void 0;const{prevState:n,curState:o}=qn,a=o==="running",l=o==="interrupted",d=n==="running",h=n==="suspended",v=n==="interrupted",_=hn().osVersion;(Fa()||wd())&&d&&l&&(H.info("ios".concat(_,"-interruption-start")),qn.emit(Ds.IOS_INTERRUPTION_START)),(Fa()||wd())&&(h||v)&&a&&(H.info("ios".concat(_,"-interruption-end")),qn.emit(Ds.IOS_INTERRUPTION_END)),n!==o&&qn.emit(Ds.STATE_CHANGE,o,n)},setInterval(()=>{var n;const o=(n=Lu)===null||n===void 0?void 0:n.currentTime;qn.currentTime!==o?(qn.currentTimeStuckAt&&(H.debug("AudioContext current time resume at ".concat(o)),qn.currentTimeStuckAt=void 0),qn.currentTime=o):(o!==qn.currentTimeStuckAt&&(rr.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:o},tag:Oi.TRACER}).onSuccess(),H.warning("AudioContext current time stuck at ".concat(o))),qn.currentTimeStuckAt=o)},5e3),async function(n){const o=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let a,l=!1,d=!1,h=!1;function v(G){n.state==="running"?_(!1):Fa()||wd()?n.state==="suspended"&&(_(!0),G&&n.resume().then(y,y)):n.state!=="closed"&&(_(!0),G&&n.resume().then(y,y))}function _(G){if(l!==G){l=G;for(let q=0,Ae=o;q<Ae.length;q+=1){const ue=Ae[q];G?window.addEventListener(ue,C,{capture:!0,passive:!0}):window.removeEventListener(ue,C,{capture:!0,passive:!0})}}}function y(){v(!1)}function C(){v(!0)}function B(G){if(!h)if(a.paused)if(G){let q;L(!1),h=!0;try{q=a.play(),q?q.then(x,x):(a.addEventListener("playing",x),a.addEventListener("abort",x),a.addEventListener("error",x))}catch{x()}}else L(!0);else L(!1)}function L(G){if(d!==G){d=G;for(let q=0,Ae=o;q<Ae.length;q++){const ue=Ae[q];G?window.addEventListener(ue,X,{capture:!0,passive:!0}):window.removeEventListener(ue,X,{capture:!0,passive:!0})}}}function x(){a.removeEventListener("playing",x),a.removeEventListener("abort",x),a.removeEventListener("error",x),h=!1,B(!1)}function X(){B(!0)}if(Fa()){const G=n.createMediaStreamDestination(),q=document.createElement("div");q.innerHTML="<audio x-webkit-airplay='deny'></audio>",a=q.children.item(0),a.controls=!1,a.disableRemotePlayback=!0,a.preload="auto",a.srcObject=G.stream,B(!0)}qn.on(Ds.STATE_CHANGE,function(){v(!0)}),v(!1)}(Lu)}(),!Lu)throw new tt(de.NOT_SUPPORTED,"can not create audio context");return Lu}return Lu}function i1(r){if(function(){if(D5!==null)return D5;const a=Ry(),l=a.createBufferSource(),d=a.createGain(),h=a.createGain();l.connect(d),l.connect(h),l.disconnect(d);let v=!1;try{l.disconnect(d)}catch{v=!0}return l.disconnect(),D5=v,v}())return;const n=r.connect,o=r.disconnect;r.connect=(a,l,d)=>{var h;return r._inputNodes||(r._inputNodes=[]),_t(h=r._inputNodes).call(h,a)||(a instanceof AudioNode?(r._inputNodes.push(a),n.call(r,a,l,d)):n.call(r,a,l)),r},r.disconnect=(a,l,d)=>{o.call(r),a?UI(r._inputNodes,a):r._inputNodes=[];for(const h of r._inputNodes)n.call(r,h)}}let D5=null;function x5(r,n){let o=!1;const a=1/n;if(me("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{o?window.clearInterval(l):r(performance.now()/1e3)},1e3*a)}else{const l=Ry();let d=l.createGain();d.gain.value=0,d.connect(l.destination);const h=()=>{if(o)return void(d=null);const v=l.createOscillator();v.onended=h,v.connect(d),v.start(0),v.stop(l.currentTime+a),r(l.currentTime)};h()}return()=>{o=!0}}class I${constructor(){Xe(this,"context",void 0),Xe(this,"analyserNode",void 0),Xe(this,"sourceNode",void 0),this.context=Ry(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(n){if(n!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=n,n==null||n.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Fa()||wd()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const n=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(n);else{const a=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(a);for(let l=0;l<n.length;++l)n[l]=a[l]/128-1}const o=ka(n).call(n,(a,l)=>a+l*l,0)/n.length;return Math.max(10*Math.log10(o)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var n,o;(n=this.sourceNode)===null||n===void 0||n.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(o=this.sourceNode)===null||o===void 0||o.connect(this.analyserNode)}catch{H.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class O$ extends Mi{get processSourceNode(){return this.sourceNode}set processedNode(n){var o;if(!this.isDestroyed&&this._processedNode!==n){try{var a;(a=this.sourceNode)===null||a===void 0||a.disconnect(this.outputNode)}catch{}(o=this._processedNode)===null||o===void 0||o.disconnect(),this._processedNode=n,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),Xe(this,"outputNode",void 0),Xe(this,"outputTrack",void 0),Xe(this,"isPlayed",!1),Xe(this,"sourceNode",void 0),Xe(this,"context",void 0),Xe(this,"audioBufferNode",void 0),Xe(this,"destNode",void 0),Xe(this,"audioOutputLevel",0),Xe(this,"volumeLevelAnalyser",void 0),Xe(this,"_processedNode",void 0),Xe(this,"playNode",void 0),Xe(this,"isDestroyed",!1),Xe(this,"onNoAudioInput",void 0),Xe(this,"isNoAudioInput",!1),Xe(this,"_noAudioInputCount",0),this.context=Ry(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),i1(this.outputNode),this.volumeLevelAnalyser=new I$}startGetAudioBuffer(n){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(n),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=o=>{this.emit(Nu.ON_AUDIO_BUFFER,function(a){for(let l=0;l<a.outputBuffer.numberOfChannels;l+=1){const d=a.outputBuffer.getChannelData(l);for(let h=0;h<d.length;h+=1)d[h]=0}return a.inputBuffer}(o))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!vn().webAudioMediaStreamDest)throw new tt(de.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(n){this.context.state!=="running"&&MI(()=>{qn.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=n||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(n>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Fa()||wd()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const o=this.volumeLevelAnalyser.getAnalyserNode();let a;o.getFloatTimeDomainData?(a=new Float32Array(o.fftSize),o.getFloatTimeDomainData(a)):(a=new Uint8Array(o.fftSize),o.getByteTimeDomainData(a));let l=!1;for(let d=0;d<a.length;d++)a[d]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await Ps(200),await this.checkHasAudioInput(n?n+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(n){this.outputNode.gain.setValueAtTime(n,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var n,o;(n=this.processedNode)===null||n===void 0||n.disconnect(),(o=this.sourceNode)===null||o===void 0||o.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var n;this.processedNode?(n=this.processedNode)===null||n===void 0||n.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class N$ extends O${get isFreeze(){return!1}constructor(n,o,a){var l;if(super(),Xe(this,"sourceNode",void 0),Xe(this,"track",void 0),Xe(this,"clonedTrack",void 0),Xe(this,"audioElement",void 0),Xe(this,"isCurrentTrackCloned",!1),Xe(this,"isRemoteTrack",!1),Xe(this,"originVolumeLevelAnalyser",void 0),Xe(this,"rebuildWebAudio",async()=>{if(H.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void H.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>H.info("resume success")),H.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const v=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?v.stop():this.isCurrentTrackCloned=!0;const _=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(_),i1(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const y=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(y,this.context.currentTime),i1(this.outputNode),this.emit(Nu.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=_,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),n.kind!=="audio")throw new tt(de.UNEXPECTED_ERROR);this.track=n;const d=new MediaStream([this.track]);if(this.isRemoteTrack=!!o,this.sourceNode=this.context.createMediaStreamSource(d),i1(this.sourceNode),a){const v=a.clone();v.enabled=!0,this.clonedTrack=v,H.debug("create an unmuted track ".concat(v.id," from the original track ").concat(a.id," to get the volume"));const _=this.context.createMediaStreamSource(new MediaStream([v]));i1(_),this.originVolumeLevelAnalyser=new I$,this.originVolumeLevelAnalyser.updateSource(_)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=d;const h=hn();o&&h.os===is.IOS&&Number((l=h.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(qn.on(Ds.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(v=>{v||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(n){this.sourceNode.disconnect(),this.track=n,this.isCurrentTrackCloned=!1;const o=new MediaStream([n]);this.sourceNode=this.context.createMediaStreamSource(o),i1(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Nu.UPDATE_SOURCE),this.audioElement.srcObject=o}destroy(){var n;this.audioElement.srcObject=null,this.audioElement.remove(),qn.off("state-change",this.rebuildWebAudio),(n=this.originVolumeLevelAnalyser)===null||n===void 0||n.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(n){return this.context.createMediaStreamSource(new MediaStream([n]))}updateOriginTrack(n){const o=n.clone();o.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=o),H.debug("create an unmuted track ".concat(o.id," from the original track ").concat(n.id," to get the volume"));const a=this.context.createMediaStreamSource(new MediaStream([o]));i1(a),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(a)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function B$(r,n,o){const a=(d,h)=>d?typeof d!="number"?d.max||d.exact||d.ideal||d.min||h:d:h,l={audio:!!o&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxHeight:a(n.height,1080),maxWidth:a(n.width,1920)}}};return n.frameRate&&typeof n.frameRate!="number"?(l.video.mandatory.maxFrameRate=n.frameRate.max,l.video.mandatory.minFrameRate=n.frameRate.min):typeof n.frameRate=="number"&&(l.video.mandatory.maxFrameRate=n.frameRate),await navigator.mediaDevices.getUserMedia(l)}async function dSe(r,n){const o=await L$(r.mediaSource),{sourceId:a,audio:l}=await function(d){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Mt((v,_)=>{const y=document.createElement("div");y.innerText="share screen",y.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const C=document.createElement("div");C.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const B=document.createElement("div");B.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",B.setAttribute("style","height: 12%;");const L=document.createElement("div");L.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const x=document.createElement("div");x.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const X=document.createElement("button");X.innerHTML="cancel",X.setAttribute("style","width: 85px;"),X.onclick=()=>{document.body.removeChild(Ae);const ue=new Error("NotAllowedError");ue.name="NotAllowedError",_(ue)};let G=h;const q=document.createElement("div");if(h){const ue=document.createElement("input");ue.setAttribute("type","checkbox");const _e=document.createElement("span");ue.setAttribute("style","margin-right: 6px;"),_e.innerText="Share audio",ue.checked=G,ue.onchange=()=>{G=ue.checked},q.appendChild(ue),q.appendChild(_e)}x.appendChild(q),x.appendChild(X),C.appendChild(B),C.appendChild(L),C.appendChild(x);const Ae=document.createElement("div");Ae.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),Ae.appendChild(y),Ae.appendChild(C),document.body.appendChild(Ae),d.map(ue=>{if(ue.id){const _e=document.createElement("div");_e.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let De=ue.thumbnail;try{const{width:Le}=De.getSize();Le>1920&&(De=De.resize({width:1920}))}catch(Le){throw Le&&Le.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),Le}_e.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+De.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+ue.name.replace(/[\u00A0-\u9999<>\&]/g,function(Le){return"&#"+Le.charCodeAt(0)+";"})+"</span>",_e.onclick=()=>{document.body.removeChild(Ae),v({sourceId:ue.id,audio:G})},L.appendChild(_e)}})})}(o,n);return await B$(a,r,l)}async function L$(r){let n=["window","screen"];r!=="application"&&r!=="window"||(n=["window"]),r==="screen"&&(n=["screen"]);const o=KG();if(!o)throw console.error("failed to fetch electron, please mount it to window"),new tt(de.ELECTRON_IS_NULL);let a=null;try{var l;a=((l=o.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:n}))||o.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch{a=null}a&&a.then||(a=new Mt((d,h)=>{o.desktopCapturer.getSources({types:n},(v,_)=>{v?h(v):d(_)})}));try{return await a}catch(d){throw new tt(de.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,d.toString())}}const U5=new ga("safari");let P$=!1,k$=!1;async function Pu(r,n){let o=0,a=null;for(;o<2;)try{a=await fSe(r,n,o>0);break}catch(l){if(l instanceof tt)throw H.error("[".concat(n,"] ").concat(l.toString())),l;const d=qI(l.name||l.code||l,l.message);if(d.code===de.MEDIA_OPTION_INVALID){H.debug("[".concat(n,"] detect media option invalid, retry")),o+=1,await Ps(500);continue}throw H.error("[".concat(n,"] ").concat(d.toString())),d}if(!a)throw new tt(de.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return a}async function fSe(r,n,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new tt(de.NOT_SUPPORTED,"can not find getUserMedia");o&&(r.video&&(delete r.video.width,delete r.video.height),r.screen&&(delete r.screen.width,delete r.screen.height));const a=vn(),l=new MediaStream;if(r.audioSource&&l.addTrack(r.audioSource),r.videoSource&&l.addTrack(r.videoSource),!r.audio&&!r.video&&!r.screen)return H.debug("Using Video Source/ Audio Source"),l;if(r.screen)if(KG())r.screen.sourceId?Iy(l,await B$(r.screen.sourceId,r.screen,!!r.screenAudio)):Iy(l,await dSe(r.screen,!!r.screenAudio));else if(kg()&&r.screen.extensionId&&r.screen.mandatory){if(!a.getStreamFromExtension)throw new tt(de.NOT_SUPPORTED,"This browser does not support screen sharing");H.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"'));const L=await(h=r.screen.extensionId,v=n,new Mt((x,X)=>{try{chrome.runtime.sendMessage(h,{getStream:!0},G=>{if(!G||!G.streamId)return H.error("[".concat(v,"] No response from Chrome Plugin. Plugin not installed properly"),G),void X(new tt(de.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));x(G.streamId)})}catch(G){H.error("[".concat(v,"] AgoraRTC screensharing plugin is not accessible(").concat(h,")"),G.toString()),X(new tt(de.CHROME_PLUGIN_NOT_INSTALL))}}));r.screen.mandatory.chromeMediaSourceId=L,Iy(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:r.screen.mandatory}}))}else if(a.getDisplayMedia){var d;r.screen.mediaSource&&w$(r.screen.mediaSource);const L={width:r.screen.width,height:r.screen.height,frameRate:r.screen.frameRate,displaySurface:(d=r.screen.displaySurface)!==null&&d!==void 0?d:r.screen.mediaSource==="screen"?"monitor":r.screen.mediaSource},{selfBrowserSurface:x,surfaceSwitching:X,systemAudio:G,preferCurrentTab:q}=r.screen,Ae={selfBrowserSurface:x,surfaceSwitching:X,systemAudio:G,preferCurrentTab:q};!x&&delete Ae.selfBrowserSurface,!X&&delete Ae.surfaceSwitching,!G&&delete Ae.systemAudio,!q&&delete Ae.preferCurrentTab,H.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:L,audio:r.screenAudio,controls:Ae})),Iy(l,await navigator.mediaDevices.getDisplayMedia(ui({video:L,audio:r.screenAudio},Ae)))}else{if(!Hi())throw H.error("[".concat(n,"] This browser does not support screenSharing")),new tt(de.NOT_SUPPORTED,"This browser does not support screen sharing");{r.screen.mediaSource&&w$(r.screen.mediaSource);const L={video:{mediaSource:r.screen.mediaSource,width:r.screen.width,height:r.screen.height,frameRate:r.screen.frameRate}};H.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(L))),Iy(l,await navigator.mediaDevices.getUserMedia(L))}}var h,v;if(!r.video&&!r.audio)return l;let _={video:r.video,audio:r.audio},y=me("MEDIA_DEVICE_CONSTRAINTS");if(y)try{typeof y=="string"&&(y=JSON.parse(y)),_=f5(_,y)}catch{}H.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(_)),hn();let C,B=null;(Js()||Fa()||DI())&&(B=await U5.lock());try{C=await navigator.mediaDevices.getUserMedia(_)}catch(L){throw B&&B(),L}return _.audio&&(P$=!0),_.video&&(k$=!0),Iy(l,C),B&&B(),l}function qI(r,n){switch(r){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new tt(de.MEDIA_OPTION_INVALID,"".concat(r,": ").concat(n));case"NotFoundError":case"DevicesNotFoundError":return new tt(de.DEVICE_NOT_FOUND,"".concat(r,": ").concat(n));case"NotSupportedError":return new tt(de.NOT_SUPPORTED,"".concat(r,": ").concat(n));case"NotReadableError":return new tt(de.NOT_READABLE,"".concat(r,": ").concat(n));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new tt(de.PERMISSION_DENIED,"".concat(r,": ").concat(n));case"ConstraintNotSatisfiedError":return new tt(de.CONSTRAINT_NOT_SATISFIED,"".concat(r,": ").concat(n));default:return H.error("getUserMedia unexpected error",r),new tt(de.UNEXPECTED_ERROR,"".concat(r,": ").concat(n))}}function Iy(r,n){const o=r.getVideoTracks()[0],a=r.getAudioTracks()[0],l=n.getVideoTracks()[0],d=n.getAudioTracks()[0];d&&(a&&r.removeTrack(a),r.addTrack(d)),l&&(o&&r.removeTrack(o),r.addTrack(l))}const ku=new class extends Mi{get state(){return this._state}set state(r){r!==this._state&&(this.emit(n1.STATE_CHANGE,r),this._state=r)}constructor(){super(),Xe(this,"_state",DS.IDLE),Xe(this,"isAccessMicrophonePermission",!1),Xe(this,"isAccessCameraPermission",!1),Xe(this,"lastAccessMicrophonePermission",!1),Xe(this,"lastAccessCameraPermission",!1),Xe(this,"checkdeviceMatched",!1),Xe(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(me("ENUMERATE_DEVICES_INTERVAL")||(xI()||kI()===is.HARMONY_OS)&&Dg())&&this.updateDevicesInfo()},me("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(r=>H.error(r.toString()))}async enumerateDevices(r,n){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new tt(de.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const a=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(a);let d=!this.isAccessMicrophonePermission&&r,h=!this.isAccessCameraPermission&&n;l.audio&&(d=!1),l.video&&(h=!1);let v=null,_=null,y=null;if(!o&&(d||h)){if(U5.isLocked&&(H.debug("[device manager] wait GUM lock"),(await U5.lock())(),H.debug("[device manager] GUM unlock")),P$&&(d=!1,this.isAccessMicrophonePermission=!0),k$&&(h=!1,this.isAccessCameraPermission=!0),H.debug("[device manager] check media device permissions",r,n,d,h),d&&h){try{y=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(C){const B=qI(C.name||C.code||C,C.message);if(B.code===de.PERMISSION_DENIED)throw B;H.warning("getUserMedia failed in getDevices",B)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(d){try{v=await navigator.mediaDevices.getUserMedia({audio:r})}catch(C){const B=qI(C.name||C.code||C,C.message);if(B.code===de.PERMISSION_DENIED)throw B;H.warning("getUserMedia failed in getDevices",B)}this.isAccessMicrophonePermission=!0}else if(h){try{_=await navigator.mediaDevices.getUserMedia({video:n})}catch(C){const B=qI(C.name||C.code||C,C.message);if(B.code===de.PERMISSION_DENIED)throw B;H.warning("getUserMedia failed in getDevices",B)}this.isAccessCameraPermission=!0}H.debug("[device manager] mic permission",r,"cam permission",n)}try{const C=await navigator.mediaDevices.enumerateDevices();return v&&v.getTracks().forEach(B=>B.stop()),_&&_.getTracks().forEach(B=>B.stop()),y&&y.getTracks().forEach(B=>B.stop()),v=null,_=null,y=null,C}catch(C){return v&&v.getTracks().forEach(B=>B.stop()),_&&_.getTracks().forEach(B=>B.stop()),y&&y.getTracks().forEach(B=>B.stop()),v=null,_=null,y=null,new tt(de.ENUMERATE_DEVICES_FAILED,C.toString()).throw()}}async getRecordingDevices(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,r)).filter(n=>n.kind==="audioinput")}async getCamerasDevices(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,r)).filter(n=>n.kind==="videoinput")}async getSpeakers(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,r)).filter(n=>n.kind==="audiooutput")}searchDeviceIdByName(r){let n=null;return this.deviceInfoMap.forEach(o=>{o.device.label===r&&(n=o.device.deviceId)}),n}async getDeviceById(r){const n=(await this.enumerateDevices(!0,!0,!0)).find(o=>o.deviceId===r);if(!n)throw new tt(de.DEVICE_NOT_FOUND,"deviceId: ".concat(r));return n}async init(){this.state=DS.INITING;try{await this.updateDevicesInfo(),this.state=DS.INITEND}catch(r){throw H.warning("Device Detection functionality cannot start properly.",r.toString()),this.state=DS.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new tt(de.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),r}}async updateDevicesInfo(){const r=await this.enumerateDevices(!0,!0,!0),n=Date.now(),o=[];if(r[0]&&r[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=r.find(h=>h.kind==="audioinput"&&h.deviceId==="default"),d=r.find(h=>h.kind==="audiooutput"&&h.deviceId==="default");l&&d?d.groupId===l.groupId?H.debug("[device-check] default input ".concat(l.label," and output ").concat(d.label," is the same group")):H.debug("[device-check] default input ".concat(l.label," and output ").concat(d.label," is not the same group")):H.debug("[device-check] default input or output not found")}const a=this.checkMediaDeviceInfoIsOk(r);if(r.forEach(l=>{if(!l.deviceId)return;const d=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((d?d.state:"INACTIVE")!=="ACTIVE"){const h={initAt:n,updateAt:n,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),h),o.push(h)}d&&(d.updateAt=n)}),this.deviceInfoMap.forEach((l,d)=>{l.state==="ACTIVE"&&l.updateAt!==n&&(l.state="INACTIVE",o.push(l))}),this.state!==DS.INITEND)return a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));o.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(n1.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(n1.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(n1.PLAYOUT_DEVICE_CHANGED,l)}}),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(r){const n=r.filter(l=>l.kind==="audioinput"),o=r.filter(l=>l.kind==="videoinput"),a={audio:!1,video:!1};for(const l of n)if(l.label&&l.deviceId){a.audio=!0;break}for(const l of o)if(l.label&&l.deviceId){a.video=!0;break}return a}};let M5=!1;const Du=new class extends Mi{constructor(){super(...arguments),Xe(this,"onAutoplayFailed",void 0),Xe(this,"onAudioAutoplayFailed",void 0)}};function D$(){if(hn(),!M5){const r=n=>{n.preventDefault(),M5=!1,CS()?document.body.removeEventListener("click",r,!0):(document.body.removeEventListener("touchstart",r,!0),document.body.removeEventListener("mousedown",r,!0))};M5=!0,CS()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)),H.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Du.onAutoplayFailed?Du.onAutoplayFailed():Du.onAudioAutoplayFailed?H.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):H.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Du.emit("autoplay-failed")}}function x$(r,n,o,a){if(!r)return;const l=rr.getBaseInfoBySessionId(r);if(!l)return;const d=l.info,h=Date.now(),v=ui(ui({},d),{},{vid:d.vid===void 0?0:Number(d.vid),lts:h,elapse:h-l.startTime,cbRegistered:Du.onAutoplayFailed||Du.onAudioAutoplayFailed?1:-1,errorMsg:o,mediaType:n,trackId:a,extend:void 0});rr.send({type:Ci.AUTOPLAY_FAILED,data:v},!0)}const hSe=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Xc=new class{constructor(){Xe(this,"onAutoplayFailed",void 0),Xe(this,"elementMap",new Map),Xe(this,"elementStateMap",new Map),Xe(this,"elementsNeedToResume",[]),Xe(this,"sinkIdMap",new Map),Xe(this,"autoResumeAfterInterruption",r=>{Array.from(this.elementMap.entries()).forEach(n=>{let[o,a]=n;const l=this.elementStateMap.get(o),d=a.srcObject.getAudioTracks()[0],h=d&&d.readyState;if(H.debug("resume after interrupted, ele: ".concat(l," audio: ").concat(h," ").concat(r)),h==="live"){if(r)return a.pause(),void a.play();if(qn.curState==="running")return hy()?(a.pause(),void a.play()):void(l&&l==="paused"&&a.play())}})}),Xe(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(r=>{let[n,o]=r;const a=o.srcObject.getAudioTracks()[0];a&&a.readyState==="live"&&(H.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),o.pause(),o.play())})}),this.autoResumeAudioElement(),qn.on(Ds.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),qn.on(Ds.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),qn.on(Ds.STATE_CHANGE,()=>{Fa()&&qn.prevState==="suspended"&&qn.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(r,n){const o=this.elementMap.get(r);if(this.sinkIdMap.set(r,n),o)try{await o.setSinkId(n)}catch(a){throw new tt(de.PERMISSION_DENIED,"can not set sink id: "+a.toString())}}play(r,n,o,a){if(this.elementMap.has(n))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([r]),this.bindAudioElementEvents(n,l),this.elementMap.set(n,l),this.elementStateMap.set(n,ma.INIT),this.setVolume(n,o);const d=this.sinkIdMap.get(n);if(d)try{l.setSinkId(d).catch(v=>{H.warning("[".concat(n,"] set sink id failed"),v.toString())})}catch(v){H.warning("[".concat(n,"] set sink id failed"),v.toString())}const h=l.play();h&&h.then&&h.catch(v=>{a&&x$(a,"audio",v.message,n),H.warning("audio element play warning",v.toString()),this.elementMap.has(n)&&v.name==="NotAllowedError"&&(H.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),MI(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),D$()}))})}updateTrack(r,n){const o=this.elementMap.get(r);o&&(o.srcObject=new MediaStream([n]))}isPlaying(r){return this.elementMap.has(r)&&this.elementStateMap.get(r)==="playing"}setVolume(r,n){const o=this.elementMap.get(r);o&&(n=Math.max(0,Math.min(100,n)),o.volume=n/100)}stop(r){const n=this.elementMap.get(r);if(this.sinkIdMap.delete(r),!n)return;const o=this.elementsNeedToResume.indexOf(n);this.elementsNeedToResume.splice(o,1),n.srcObject=null,n.remove(),this.elementMap.delete(r),this.elementStateMap.delete(r)}bindAudioElementEvents(r,n){hSe.forEach(o=>{n.addEventListener(o,a=>{const l=this.elementStateMap.get(r),d=a.type==="pause"?"paused":a.type;if(H.debug("[".concat(r,"] audio-element-status change ").concat(l," => ").concat(d)),a.type==="error"){const h=n==null?void 0:n.error;h&&H.error("[".concat(r,"] media error, code: ").concat(h.code,", message: ").concat(h.message))}this.elementStateMap.set(r,d)})})}getPlayerState(r){return this.elementStateMap.get(r)||"uninit"}autoResumeAudioElement(){const r=()=>{this.elementsNeedToResume.forEach(n=>{n.play().then(o=>{H.debug("Auto resume audio element success")}).catch(o=>{H.warning("Auto resume audio element failed!",o)})}),this.elementsNeedToResume=[]};new Mt(n=>{document.body?n():window.addEventListener("load",()=>n())}).then(()=>{CS()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0))})}};function qi(){return function(r,n,o){const a=o.value;return typeof a=="function"&&(o.value=function(){this._isClosed&&new tt(de.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",H);for(var l=arguments.length,d=new Array(l),h=0;h<l;h++)d[h]=arguments[h];const v=a.apply(this,d);return v instanceof Mt?new Mt((_,y)=>{v.then(_).catch(y)}):v}),o}}class U$ extends Mi{constructor(n){super(),Xe(this,"name","VideoProcessorDestination"),Xe(this,"ID","0"),Xe(this,"_source",void 0),Xe(this,"videoContext",void 0),Xe(this,"inputTrack",void 0),this.videoContext=n}get kind(){return"video"}get enabled(){return!0}pipe(){throw new tt(de.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new tt(de.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(n){if(n.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);n.track&&n.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=n.track,this.emit(Sc.ON_TRACK,n.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Sc.ON_TRACK,void 0)}}class M$ extends Mi{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,o){super(),Xe(this,"constraintsMap",new Map),Xe(this,"statsRegistry",[]),Xe(this,"usageRegistry",[]),Xe(this,"trackId",void 0),Xe(this,"direction",void 0),Xe(this,"_chained",!1),this.trackId=n,this.direction=o}async getConstraints(){return await ea(this,Bu.REQUEST_CONSTRAINTS)}async requestApplyConstraints(n,o){var a;return H.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(o,n),ni(this,Bu.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jl(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var o;if(this.constraintsMap.has(n))return H.info("processor ".concat(n.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(n),ni(this,Bu.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jl(o=this.constraintsMap).call(o)))}registerStats(n,o,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===o)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:o,cb:a})}unregisterStats(n,o){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===o);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:o,processorName:a,type:l,cb:d}of this.statsRegistry)try{const h=d();n.push({processorID:o,processorName:a,type:l,stats:h})}catch(h){H.error(new tt(de.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,o){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:o})}unregisterUsage(n){const o=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let a=o();a instanceof Mt&&(a=await a),n.push(ui(ui({},a),{},{direction:this.direction}))}catch(a){H.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class F$ extends Mi{constructor(n){super(),Xe(this,"name","AudioProcessorDestination"),Xe(this,"ID","0"),Xe(this,"inputTrack",void 0),Xe(this,"inputNode",void 0),Xe(this,"audioProcessorContext",void 0),Xe(this,"_source",void 0),this.audioProcessorContext=n}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new tt(de.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new tt(de.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Sc.ON_TRACK,void 0),this.emit(Sc.ON_NODE,void 0)}updateInput(n){if(n.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);n.track&&this.inputTrack!==n.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=n.track,this.emit(Sc.ON_TRACK,this.inputTrack)),n.node&&this.inputNode!==n.node&&(this.audioProcessorContext.chained=!0,this.inputNode=n.node,this.emit(Sc.ON_NODE,this.inputNode))}}class V$ extends Mi{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,o,a){super(),Xe(this,"constraintsMap",new Map),Xe(this,"statsRegistry",[]),Xe(this,"audioContext",void 0),Xe(this,"trackId",void 0),Xe(this,"direction",void 0),Xe(this,"usageRegistry",[]),Xe(this,"_chained",!1),this.audioContext=n,this.trackId=o,this.direction=a}async getConstraints(){return ea(this,Bu.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(n,o){var a;return H.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(o,n),ni(this,Bu.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jl(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var o;if(this.constraintsMap.has(n))return this.constraintsMap.delete(n),ni(this,Bu.REQUEST_UPDATE_CONSTRAINTS,Array.from(Jl(o=this.constraintsMap).call(o)))}registerStats(n,o,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===o)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:o,cb:a})}unregisterStats(n,o){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===o);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:o,processorName:a,type:l,cb:d}of this.statsRegistry)try{const h=d();n.push({processorID:o,processorName:a,type:l,stats:h})}catch(h){H.error(new tt(de.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,o){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:o})}unregisterUsage(n){const o=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let a=o();a instanceof Mt&&(a=await a),n.push(ui(ui({},a),{},{direction:this.direction}))}catch(a){H.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class F5 extends Mi{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),Xe(this,"context",void 0),Xe(this,"processSourceNode",void 0),Xe(this,"outputTrack",void 0),Xe(this,"processedNode",void 0),Xe(this,"clonedTrack",void 0),Xe(this,"outputNode",void 0),this.outputNode=new pSe}setVolume(){}createOutputTrack(){throw new tt(de.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class pSe{disconnect(){}connect(){}}function Q$(r){return new Mt((n,o)=>{let a=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const d=Fa()?"canplay":"playing";l.addEventListener(d,()=>{const h=l.videoWidth,v=l.videoHeight;!h&&Hi()||(a=!0,l.srcObject=null,l.remove(),n([h,v]))}),l.srcObject=new MediaStream([r]),l.play().catch(FI),setTimeout(()=>{a||(l.srcObject=null,l.remove(),n([l.videoWidth,l.videoHeight]))},4e3)})}function YI(r){const n={};r.facingMode&&(n.facingMode=r.facingMode),r.cameraId&&(n.deviceId={exact:r.cameraId});const o=Cd(r.encoderConfig);return o.width!=null&&(n.width=o.width),o.height!=null&&(n.height=o.height),!FG()&&o.frameRate&&(n.frameRate=o.frameRate),BG()&&typeof n.frameRate=="object"&&(n.frameRate.max=60),Hi()&&(n.frameRate={ideal:30,max:30}),n}function H$(r){const n={};return FG()||(r.AGC!==void 0&&(n.autoGainControl=r.AGC),r.AEC!==void 0&&(n.echoCancellation=r.AEC),r.ANS!==void 0&&(n.noiseSuppression=r.ANS,kg()&&r.ANS&&(n.googHighpassFilter=r.ANS))),n}function j$(r){const n=H$(r);if(r.encoderConfig){const o=$I(r.encoderConfig);n.channelCount=o.stereo?2:1,n.sampleRate=o.sampleRate,n.sampleSize=o.sampleSize}return r.microphoneId&&(n.deviceId={exact:r.microphoneId}),xI()&&(n.sampleRate=void 0),n}const gSe=r=>{const n=r._encoderConfig;if(!n)return;const{frameRate:o,width:a,height:l}=r.getMediaStreamTrackSettings();let{frameRate:d=o,width:h=a,height:v=l}=n;if(!d||!h||!v)return;h=my(h),v=my(v),d=my(d);const{max:_,min:y}=function(x,X,G){const q=200*Math.pow(G/15,.6)*Math.pow(x*X/640/360,.75);return{min:Math.floor(q),max:Math.floor(4*q)}}(h,v,d),{bitrateMax:C,bitrateMin:B}=n||{};C||H.debug("calculate bitrate: [w: ".concat(h,", h: ").concat(v,", fps: ").concat(d,"] => [brMax: ").concat(C,", brMin: ").concat(B,"]"));const{maxFramerate:L}=me("ENCODER_CONFIG_LIMIT");return L&&typeof L=="number"&&(d=Math.min(d,L)),{frameRate:d,bitrateMax:C||_,bitrateMin:B||y,scaleResolutionDownBy:1,scale:0}},K$=async(r,n,o)=>await(async(a,l,d)=>{const h=function(y){const C=[];for(let B=0;B<y.length;B+=2)C.push(parseInt(y.slice(B,B+2),16));return Uint8Array.from(C)}(t$(""+l+d)).slice(0,16),v=h.slice(0,12),_=await window.crypto.subtle.importKey("raw",h,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:v},_,a))})(r.buffer,n,o),V5=r=>{const n=document.createElement("canvas");return n.width=2,n.height=2,new Mt((o,a)=>{n.toBlob(async l=>{if(n.remove(),l){const d=await W$(l);o({buffer:d,width:n.width,height:n.height})}else a(new tt(de.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},r,1)})},W$=async r=>{const n=await r.arrayBuffer();return new Uint8Array(n)};var G$,$$,z$,q$,Y$,X$,J$,Z$,ez,tz,rz,nz,iz,oz,sz,az,cz,lz,Fi,uz,Az,dz,fz,hz,pz,vp,gz,mz,vz,_z,yz,Ez,wz,Sz,bz,Cz,Tz,Rz,Iz,ra;let Yi=(G$=gr({argsMap:(r,n)=>[r.getTrackId(),n],throttleTime:300}),$$=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),z$=qi(),q$=vy("LocalAudioTrack","_enabledMutex"),Y$=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),X$=qi(),J$=vy("LocalAudioTrack","_enabledMutex"),Z$=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),ez=qi(),tz=qi(),rz=qi(),nz=gr({argsMap:r=>[r.getTrackId()]}),iz=qi(),oz=gr({argsMap:r=>[r.getTrackId()]}),sz=qi(),az=gr({argsMap:r=>[r.getTrackId()]}),cz=gr({argsMap:(r,n)=>[r.getTrackId(),n.name]}),lz=gr({argsMap:r=>[r.getTrackId()]}),fn((Fi=class extends Ty{get _source(){return this.initWebAudio()}set _source(r){this._trackSource=r}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Xc.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(r,n,o,a){super(r,o),Xe(this,"trackMediaType",Cy.AUDIO),Xe(this,"_encoderConfig",void 0),Xe(this,"_trackSource",void 0),Xe(this,"metadata",[]),Xe(this,"_enabled",!0),Xe(this,"_volume",100),Xe(this,"_useAudioElement",!0),Xe(this,"_bypassWebAudio",!1),Xe(this,"processor",void 0),Xe(this,"_processorContext",void 0),Xe(this,"_processorDestination",void 0),Xe(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=n,this._getOriginVolumeLevel=!!a,this._trackSource=new F5,me("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),me("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Js()&&!Lu?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(r){Xn(r,"volume",0,1e3),this._volume=r,this._source.setVolume(r/100),this._useAudioElement&&Xc.setVolume(this.getTrackId(),r);try{if(this._bypassWebAudio)return void H.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,ni(this,Zt.NEED_REPLACE_TRACK,this).then(()=>{H.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(o=>{H.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),o)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(r){if(!this._useAudioElement||!y$())throw new tt(de.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Xc.setSinkID(this.getTrackId(),r)}async setEnabled(r,n,o){return this._setEnabled(r,n,o)}async _setEnabled(r,n,o){if(!o){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(H.info("[".concat(this.getTrackId(),"] start setEnabled"),r),r){this._originMediaStreamTrack.enabled=!0;try{o||(this._enabled=!0),await ni(this,Zt.NEED_ENABLE_TRACK,this),H.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(r," success"))}catch(a){throw o||(this._enabled=!1),H.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}}else{this._originMediaStreamTrack.enabled=!1,o||(this._enabled=!1);try{await ni(this,Zt.NEED_DISABLE_TRACK,this)}catch(a){throw o||(this._enabled=!0),H.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}}}async setMuted(r){r!==this._muted&&(this.stateCheck("muted",r),this._muted=r,this._originMediaStreamTrack.enabled=!r,H.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(r)),r?await ni(this,Zt.NEED_MUTE_TRACK,this):await ni(this,Zt.NEED_UNMUTE_TRACK,this))}getStats(){return rv(()=>{H.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Iu(this,Zt.GET_STATS)||ui({},L5)}setAudioFrameCallback(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!r)return this._source.removeAllListeners(Nu.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(Nu.ON_AUDIO_BUFFER),this._source.on(Nu.ON_AUDIO_BUFFER,o=>r(o))}play(){H.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(H.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Xc.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){H.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Xc.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];H.debug("[".concat(this.getTrackId(),"] update player source track")),r&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Xc.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(r,n){this._originMediaStreamTrack!==r&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop()),r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:r,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await ni(this,Zt.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(r))}renewMediaStreamTrack(r){return Mt.resolve(void 0)}pipe(r){if(this._bypassWebAudio)throw new tt(de.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===r)return r;if(r._source)throw new tt(de.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),r}unpipe(){var r;if(!this.processor)return;const n=this.processor;(r=this._source.processSourceNode)===null||r===void 0||r.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(r){r.on(Sc.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await ni(this,Zt.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await ni(this,Zt.NEED_REPLACE_TRACK,this))}),r.on(Sc.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(r){r.removeAllListeners(Sc.ON_TRACK),r.removeAllListeners(Sc.ON_NODE)}bindProcessorContextEvents(r){r.on(Bu.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(r){r.removeAllListeners(Bu.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof F5&&(this._trackSource=new N$(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const r=new V$(this._source.context,this.getTrackId(),"local"),n=new F$(r);return this._processorContext=r,this._processorDestination=n,this.bindProcessorContextEvents(r),this.bindProcessorDestinationEvents(n),this._source.on(Nu.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:r})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Xc.stop(this.getTrackId()),this._source.play()),ni(this,Zt.NEED_REPLACE_MIXING_TRACK,this).then(()=>{H.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(o=>{H.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),o)})),{processorContext:r,processorDestination:n}}}).prototype,"setVolume",[G$],Object.getOwnPropertyDescriptor(Fi.prototype,"setVolume"),Fi.prototype),fn(Fi.prototype,"setPlaybackDevice",[$$,z$],Object.getOwnPropertyDescriptor(Fi.prototype,"setPlaybackDevice"),Fi.prototype),fn(Fi.prototype,"setEnabled",[q$,Y$,X$],Object.getOwnPropertyDescriptor(Fi.prototype,"setEnabled"),Fi.prototype),fn(Fi.prototype,"setMuted",[J$,Z$,ez],Object.getOwnPropertyDescriptor(Fi.prototype,"setMuted"),Fi.prototype),fn(Fi.prototype,"getStats",[tz],Object.getOwnPropertyDescriptor(Fi.prototype,"getStats"),Fi.prototype),fn(Fi.prototype,"setAudioFrameCallback",[rz],Object.getOwnPropertyDescriptor(Fi.prototype,"setAudioFrameCallback"),Fi.prototype),fn(Fi.prototype,"play",[nz,iz],Object.getOwnPropertyDescriptor(Fi.prototype,"play"),Fi.prototype),fn(Fi.prototype,"stop",[oz,sz],Object.getOwnPropertyDescriptor(Fi.prototype,"stop"),Fi.prototype),fn(Fi.prototype,"close",[az],Object.getOwnPropertyDescriptor(Fi.prototype,"close"),Fi.prototype),fn(Fi.prototype,"pipe",[cz],Object.getOwnPropertyDescriptor(Fi.prototype,"pipe"),Fi.prototype),fn(Fi.prototype,"unpipe",[lz],Object.getOwnPropertyDescriptor(Fi.prototype,"unpipe"),Fi.prototype),Fi),xS=(uz=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),Az=qi(),dz=vy("MicrophoneAudioTrack","_enabledMutex"),fz=gr({argsMap:(r,n,o)=>[r.getTrackId(),n,o]}),hz=qi(),pz=gr({argsMap:r=>[r.getTrackId()]}),fn((vp=class extends Yi{get __className__(){return"MicrophoneAudioTrack"}constructor(r,n,o,a){super(r,n.encoderConfig?$I(n.encoderConfig):{},a,me("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),Xe(this,"_config",void 0),Xe(this,"_deviceName","default"),Xe(this,"_constraints",void 0),Xe(this,"_originalConstraints",void 0),Xe(this,"_enabled",!0),this._config=n,this._constraints=o,this._originalConstraints=o,this._deviceName=r.label,typeof n.bypassWebAudio=="boolean"&&(this._bypassWebAudio=n.bypassWebAudio),(hy()||s5())&&qn.bindInterruptDetectorTrack(this)}async setDevice(r){if(H.info("[".concat(this.getTrackId(),"] start set device to ").concat(r)),this._enabled)try{const n=await ku.getDeviceById(r),o={};o.audio=ui({},this._constraints),o.audio.deviceId={exact:r},this._originMediaStreamTrack.stop();let a=null;try{a=await Pu(o,this.getTrackId())}catch(l){throw H.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),a=await Pu({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=r,this._constraints.deviceId={exact:r}}catch(n){throw H.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}else try{const n=await ku.getDeviceById(r);this._deviceName=n.label,this._config.microphoneId=r,this._constraints.deviceId={exact:r}}catch(n){throw H.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}H.info("[".concat(this.getTrackId(),"] set device to ").concat(r," success"))}async setEnabled(r,n,o){if(n)return H.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(r);if(!o){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(H.info("[".concat(this.getTrackId(),"] start setEnabled"),r),me("AUTO_RESET_AUDIO_ROUTE")&&(Fa()||wd())){const h=navigator.audioSession;h&&(r||(h.type="playback"),h.type="auto")}if(!r){var a;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(a=this._source.clonedTrack)===null||a===void 0||a.stop(),o||(this._enabled=!1);try{await ni(this,Zt.NEED_DISABLE_TRACK,this)}catch(h){throw H.error("[".concat(this.getTrackId(),"] setEnabled false failed"),h.toString()),h}return}const l=ui({},this._constraints),d=ku.searchDeviceIdByName(this._deviceName);d&&!l.deviceId&&(l.deviceId=d);try{o||(this._enabled=!0);const h=await Pu({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!1),await ni(this,Zt.NEED_ENABLE_TRACK,this)}catch(h){throw o||(this._enabled=!1),H.error("[".concat(this.getTrackId(),"] setEnabled true failed"),h.toString()),h}H.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(hy()||s5())&&qn.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Fa()||wd())&&this._enabled&&!this._isClosed&&qn.duringInterruption){const r=async()=>{qn.off(Ds.IOS_INTERRUPTION_END,r),this._enabled&&!this._isClosed&&(H.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};qn.on(Ds.IOS_INTERRUPTION_END,r)}else H.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(by.TRACK_ENDED)}async renewMediaStreamTrack(r){const n=r||this._constraints,o=ku.searchDeviceIdByName(this._deviceName);if(o&&!n.deviceId&&(n.deviceId=o),this._constraints=n,this._enabled){this._originMediaStreamTrack.stop();const a=await Pu({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!0)}}bindProcessorContextEvents(r){super.bindProcessorContextEvents(r),r.on(Bu.REQUEST_UPDATE_CONSTRAINTS,async(n,o,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),o()}catch(l){a(l)}})}unbindProcessorContextEvents(r){super.unbindProcessorContextEvents(r),r.removeAllListeners(Bu.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[uz,Az],Object.getOwnPropertyDescriptor(vp.prototype,"setDevice"),vp.prototype),fn(vp.prototype,"setEnabled",[dz,fz,hz],Object.getOwnPropertyDescriptor(vp.prototype,"setEnabled"),vp.prototype),fn(vp.prototype,"close",[pz],Object.getOwnPropertyDescriptor(vp.prototype,"close"),vp.prototype),vp),mSe=(gz=gr({argsMap:(r,n)=>[r.getTrackId(),n,r.duration]}),mz=qi(),vz=gr({argsMap:r=>[r.getTrackId()]}),_z=qi(),yz=gr({argsMap:r=>[r.getTrackId()]}),Ez=qi(),wz=gr({argsMap:r=>[r.getTrackId()]}),Sz=qi(),bz=gr({argsMap:r=>[r.getTrackId()]}),Cz=qi(),Tz=gr({argsMap:r=>[r.getTrackId()]}),Rz=gr({argsMap:r=>[r.getTrackId()]}),Iz=qi(),fn((ra=class extends Yi{get __className__(){return"BufferSourceAudioTrack"}constructor(r,n,o,a){super(n.createOutputTrack(),o,a),Xe(this,"source",void 0),Xe(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=r,this._bufferSource=n,this._bufferSource.on(Nu.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(by.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(r){r&&this._bufferSource.updateOptions(r),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(r){this._bufferSource.seekAudioBuffer(r)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(r){Xn(r,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(r)}}).prototype,"startProcessAudioBuffer",[gz,mz],Object.getOwnPropertyDescriptor(ra.prototype,"startProcessAudioBuffer"),ra.prototype),fn(ra.prototype,"pauseProcessAudioBuffer",[vz,_z],Object.getOwnPropertyDescriptor(ra.prototype,"pauseProcessAudioBuffer"),ra.prototype),fn(ra.prototype,"seekAudioBuffer",[yz,Ez],Object.getOwnPropertyDescriptor(ra.prototype,"seekAudioBuffer"),ra.prototype),fn(ra.prototype,"resumeProcessAudioBuffer",[wz,Sz],Object.getOwnPropertyDescriptor(ra.prototype,"resumeProcessAudioBuffer"),ra.prototype),fn(ra.prototype,"stopProcessAudioBuffer",[bz,Cz],Object.getOwnPropertyDescriptor(ra.prototype,"stopProcessAudioBuffer"),ra.prototype),fn(ra.prototype,"close",[Tz],Object.getOwnPropertyDescriptor(ra.prototype,"close"),ra.prototype),fn(ra.prototype,"setAudioBufferPlaybackSpeed",[Rz,Iz],Object.getOwnPropertyDescriptor(ra.prototype,"setAudioBufferPlaybackSpeed"),ra.prototype),ra);class Uo extends Yi{get __className__(){return"MixingAudioTrack"}get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=Ry().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,ii(8,"track-mix-")),Xe(this,"trackList",void 0),Xe(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return this.trackList.indexOf(n)!==-1}addAudioTrack(n){this.trackList.indexOf(n)===-1?(H.debug("add ".concat(n.getTrackId()," to mixing track")),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()):H.debug("track ".concat(n.getTrackId()," is already added"))}removeAudioTrack(n){if(this.trackList.indexOf(n)!==-1){H.debug("remove ".concat(n.getTrackId()," from mixing track"));try{n._source.outputNode.disconnect(this.destNode)}catch{}UI(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(o=>{o._encoderConfig&&((o._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=o._encoderConfig.bitrate),(o._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=o._encoderConfig.sampleRate),(o._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=o._encoderConfig.sampleSize),o._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}_updateRtpTransceiver(n){this._rtpTransceiver!==n&&(this._rtpTransceiver=n,this.trackList.forEach(o=>{o instanceof Uo?o.emit(r1.TRANSCEIVER_UPDATED,n):o._updateRtpTransceiver(n)}))}}class vSe extends O${set currentState(n){n!==this._currentState&&(this._currentState=n,this.safeEmit(Nu.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Xe(this,"audioBuffer",void 0),Xe(this,"sourceNode",void 0),Xe(this,"startPlayTime",0),Xe(this,"startPlayOffset",0),Xe(this,"pausePlayTime",0),Xe(this,"options",void 0),Xe(this,"currentLoopCount",0),Xe(this,"currentPlaybackSpeed",100),Xe(this,"_currentState","stopped"),this.audioBuffer=n,this.options=o,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(n){this.currentState==="stopped"?(this.options=n,this.startPlayOffset=this.options.startPlayTime||0):H.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(n){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=n,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=n))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(n){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=n/100),this.currentPlaybackSpeed=n}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const n=this.context.createBufferSource();return n.buffer=this.audioBuffer,n.loop=!!this.options.loop,n.connect(this.outputNode),n.playbackRate.value=this.currentPlaybackSpeed/100,n}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const Oz=new Map;function Nz(r,n){if(r.length===0||n.length===0)return 1/0;const o=h5(r),a=h5(n);return Math.floor(a/o)}class Q5{get rendFrameRate(){const n=Math.max(1,Nz(this._render_interframe_delays_sizes,this._render_interframe_delays));return Math.floor(1e3/n)}get videoElementStatus(){return this._isInPage?this._videoElementStatus:ma.DESTROYED}set videoElementStatus(n){n!==this._videoElementStatus&&(H.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}get videoState(){return this._videoState}set videoState(n){var o;n!==this._videoState&&(this._videoState=n,(o=this.onVideoStateChanged)===null||o===void 0||o.call(this,this.videoState))}constructor(n){Xe(this,"trackId",void 0),Xe(this,"config",void 0),Xe(this,"onFirstVideoFrameDecoded",void 0),Xe(this,"onFirstVideoFrameRender",void 0),Xe(this,"onVideoStateChanged",void 0),Xe(this,"freezeTimeCounterList",[]),Xe(this,"renderFreezeAccTime",0),Xe(this,"renderFreezeAccTime2",0),Xe(this,"isKeepLastFrame",!1),Xe(this,"isDestroyed",!1),Xe(this,"timeUpdatedCount",0),Xe(this,"freezeTime",0),Xe(this,"playbackTime",0),Xe(this,"lastTimeUpdatedTime",0),Xe(this,"autoplayFailed",!1),Xe(this,"videoTrack",void 0),Xe(this,"videoElement",void 0),Xe(this,"cacheVideoElement",void 0),Xe(this,"internal",!1),Xe(this,"_render_interframe_delays",[]),Xe(this,"_render_interframe_delays_sizes",[]),Xe(this,"_videoState",mp.VideoStateStopped),Xe(this,"videoElementCheckInterval",void 0),Xe(this,"videoElementFreezeTimeout",void 0),Xe(this,"_videoElementStatus",ma.NONE),Xe(this,"_isInPage",!0),Xe(this,"isGettingVideoDimensions",!1),Xe(this,"startGetVideoDimensions",()=>{const o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return H.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(o,500)};!this.isGettingVideoDimensions&&o()}),Xe(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&qn.curState==="running"&&(H.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(OG())),UG()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),Xe(this,"handleVideoEvents",o=>{switch(o.type){case"play":case"playing":o.type==="play"&&H.debug("[".concat(this.trackId,"] video element status: play")),this.startGetVideoDimensions(),this.videoElementStatus=ma.PLAYING;break;case"loadeddata":if(this.videoState=mp.VideoStateStarting,this.onFirstVideoFrameRender&&this.onFirstVideoFrameRender(),this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=ma.CANPLAY;break;case"stalled":this.videoElementStatus=ma.STALLED;break;case"suspend":this.videoElementStatus=ma.SUSPEND;break;case"pause":this.videoElementStatus=ma.PAUSED,Fa()||wd()||Js()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(H.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=ma.WAITING;break;case"abort":this.videoElementStatus=ma.ABORT;break;case"ended":this.videoElementStatus=ma.ENDED;break;case"emptied":this.videoElementStatus=ma.EMPTIED;break;case"error":{const a=this.videoElement.error;a&&(this.videoElementStatus=ma.ERROR,H.error("[".concat(this.trackId,"] media error: ").concat(a.message," (").concat(a.code,")")));break}case"timeupdate":{const a=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=a);const l=a-this.lastTimeUpdatedTime,d=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=a,_p.lastVisibleTime<_p.lastHiddenTime||d<_p.lastHiddenTime||d<_p.lastVisibleTime||this.isSkipCalcRenderFreezeTime())return;for(l>me("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const h=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(h),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),Xe(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(H.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(OG())),UG()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=n.trackId,this.config=n,n.element instanceof HTMLVideoElement?this.videoElement=n.element:this.videoElement=document.createElement("video"),qn.on(Ds.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),qn.on(Ds.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var n;return(n=this.videoElement.parentElement)!==null&&n!==void 0?n:void 0}updateConfig(n){this.config=n,this.trackId=n.trackId,n.element!==this.videoElement&&(this.destroy(),this.videoElement=n.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.initVideoElement())}play(n){const o=this.videoElement.play();o&&o.catch&&o.catch(l=>{n&&x$(n,"video",l.message,this.trackId),l.name==="NotAllowedError"?(H.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):H.warning("[".concat(this.trackId,"] play warning: "),l)});const a=hn();if((a.name==="Safari"&&Number(a.version)===15||hy())&&o&&o.then){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};o.then(l).catch(l)}}getCurrentFrame(){const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const o=n.getContext("2d");if(!o)return H.error("create canvas context failed!"),new ImageData(2,2);o.drawImage(this.videoElement,0,0,n.width,n.height);const a=o.getImageData(0,0,n.width,n.height);return n.remove(),a}async getCurrentFrameToUint8Array(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=document.createElement("canvas");a.width=this.videoElement.videoWidth,a.height=this.videoElement.videoHeight;const l=a.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,a.width,a.height),new Mt((d,h)=>{a.toBlob(async v=>{if(a.remove(),v){const _=await W$(v);d({buffer:_,width:a.width,height:a.height})}else h(new tt(de.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,o<0?.1:o>1?1:o)})):await V5(n)}destroy(){this.isDestroyed=!0,qn.off(Ds.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),qn.off(Ds.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=mp.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=ma.INIT,!this.videoElementCheckInterval&&(Bz.forEach(d=>{this.videoElement.addEventListener(d,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{this._isInPage=function(d){return d!==document.body&&document.body.contains(d)}(this.videoElement)},1e3),me("ENABLE_VIDEO_FRAME_CALLBACK"))){var n,o;let d;const h=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",h),this.videoElementFreezeTimeout=window.setTimeout(v,me("VIDEO_FREEZE_DURATION")))},v=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===mp.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=mp.VideoStateFrozen:document.addEventListener("visibilitychange",h))},_=(y,C)=>{if(this.videoElementStatus===ma.PLAYING){if(d){const x=C.presentationTime-d.presentationTime,X=C.presentedFrames-d.presentedFrames;this._render_interframe_delays_sizes.push(X),this._render_interframe_delays.push(x);const G=h5(this._render_interframe_delays_sizes),q=G-this._render_interframe_delays_sizes[0];if(G>30&&q>5&&(this._render_interframe_delays_sizes.shift(),this._render_interframe_delays.shift()),this.videoState===mp.VideoStateStarting&&(this.videoState=mp.VideoStateDecoding),this.videoState===mp.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(v,me("VIDEO_FREEZE_DURATION"))),x<me("VIDEO_FREEZE_DURATION")&&this.videoState===mp.VideoStateFrozen&&(this.videoState=mp.VideoStateDecoding),x>me("VIDEO_FREEZE_DURATION")&&_p.lastVisibleTime>=_p.lastHiddenTime&&d.timestamp>_p.lastVisibleTime&&d.timestamp>_p.lastHiddenTime){const Ae=Math.min(66,Nz(this._render_interframe_delays_sizes,this._render_interframe_delays)),ue=Math.max(0,x-(X-1)*Ae);this.renderFreezeAccTime2+=ue>Ae?ue:0,this.renderFreezeAccTime+=x}}d=ui(ui({},C),{},{timestamp:y})}else this.isSkipCalcRenderFreezeTime()&&(d=ui(ui({},C),{},{timestamp:y}));var B,L;me("ENABLE_VIDEO_FRAME_CALLBACK")&&((B=(L=this.videoElement).requestVideoFrameCallback)===null||B===void 0||B.call(L,_))};(n=(o=this.videoElement).requestVideoFrameCallback)===null||n===void 0||n.call(o,_)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),xI()&&!me("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const a=hn();a.name==="Safari"&&Number(a.version)===15||hy()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Hi()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Hi()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(d=>{H.debug("[".concat(this.trackId,"] playback interrupted"),d.toString())})}resetVideoElement(){Bz.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=ma.NONE}isSkipCalcRenderFreezeTime(){return this.videoElementStatus===ma.DESTROYED||this.internal}handleAutoPlayFailed(){const n=o=>{o.preventDefault(),this.videoElement.play().then(()=>{H.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(a=>{H.error(a)}),this.autoplayFailed=!1,CS()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};CS()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),D$()}}const Bz=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class H5 extends Q5{constructor(n){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];super(n),Xe(this,"container",void 0),Xe(this,"slot",void 0),this.slot=n.element,this.internal=o,this.updateConfig(n)}updateConfig(n){this.config=n,this.trackId=n.trackId;const o=n.element;var a;!this.internal||this.slot?(o!==this.slot&&(this.destroy(),this.slot=o),this.createElements()):(this.slot=o,o&&this.container?(this.internal=!1,this.container.id="agora-video-player-".concat(this.trackId),this.videoElement.id="video_".concat(this.trackId),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",(a=this.slot)===null||a===void 0||a.appendChild(this.container)):this.createElements())}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){var o;(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)&&super.play(n)}getCurrentFrame(){var n;return(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(n){var o;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(n,a):await V5(n)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{var n;this.container.remove(),(n=this.slot)===null||n===void 0||n.removeChild(this.container)}catch{}this.container=void 0}}createElements(){var n;this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",me("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),(n=this.slot)===null||n===void 0||n.appendChild(this.container)}mountedVideoElement(){var n;!this.container||(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var n;if((n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var n;(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var Lz,Pz,kz,Dz,xz,Uz,Mz,Fz,Vz,Qz,Hz,jz,Kz,Wz,Gz,$z,zz,qz,Yz,Xz,Jz,Zz,eq,tq,rq,nq,iq,oq,cn,sq,aq,cq,lq,uq,Aq,dq,fq,xu;let hi=(Lz=gr({argsMap:(r,n,o)=>[r.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),Pz=qi(),kz=gr({argsMap:r=>[r.getTrackId()]}),Dz=vy("LocalVideoTrack","_enabledMutex"),xz=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),Uz=qi(),Mz=vy("LocalVideoTrack","_enabledMutex"),Fz=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),Vz=qi(),Qz=gr({argsMap:(r,n)=>[r.getTrackId(),n,r._saveEncodeBitrateRatio]}),Hz=qi(),jz=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),Kz=qi(),Wz=qi(),Gz=gr({argsMap:(r,n,o)=>[r.getTrackId(),n,o]}),$z=qi(),zz=qi(),qz=qi(),Yz=gr({argsMap:r=>[r.getTrackId()]}),Xz=qi(),Jz=qi(),Zz=qi(),eq=qi(),tq=qi(),rq=gr({argsMap:(r,n)=>[r.getTrackId(),n.name]}),nq=gr({argsMap:r=>[r.getTrackId()]}),iq=gr({argsMap:r=>[r.getTrackId()]}),oq=gr({argsMap:(r,n,o)=>[r.getTrackId(),n.label,o]}),cn=class KAe extends Ty{get videoHeight(){if(Js()){const{height:n}=this._mediaStreamTrack.getSettings();return this._videoHeight=n,this._videoHeight}return this._videoHeight}get videoWidth(){if(Js()){const{width:n}=this._mediaStreamTrack.getSettings();return this._videoWidth=n,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ma.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get __className__(){return"LocalVideoTrack"}constructor(n,o,a,l,d,h){if(super(n,d),Xe(this,"trackMediaType",Cy.VIDEO),Xe(this,"_player",void 0),Xe(this,"isUseScaleResolutionDownBy",!1),Xe(this,"_videoVisibleTimer",null),Xe(this,"_previousVideoVisibleStatus",void 0),Xe(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Xe(this,"_encoderConfig",void 0),Xe(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),Xe(this,"_optimizationMode",void 0),Xe(this,"_saveEncodeBitrateRatio",1),Xe(this,"_videoHeight",void 0),Xe(this,"_videoWidth",void 0),Xe(this,"_forceBitrateLimit",void 0),Xe(this,"_enabled",!0),Xe(this,"_processorDestination",void 0),Xe(this,"_processorContext",void 0),Js()){const{width:v,height:_}=n.getSettings();this._videoWidth=v,this._videoHeight=_}else this.updateMediaStreamTrackResolution();if(this._scalabilityMode=a,this._optimizationMode=l,this._hints=h||[],o&&this._hints.indexOf(Jn.CUSTOM_TRACK)!==-1?this._encoderConfig=Ni(o):this._encoderConfig=o,this._hints.indexOf(Jn.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(t5(Sn.CHROME,115)&&kI().indexOf("Windows")!==-1){const v=function(_,y){if("VideoFrame"in window&&"TransformStream"in window&&vn().supportWebRTCInsertableStream){const C=new MediaStreamTrackProcessor(_),B=new MediaStreamTrackGenerator({kind:"video"});let L,x,X=Date.now();const G=()=>{q&&(clearInterval(q),q=void 0),L&&(L.close(),L=void 0),_.stop(),x=void 0,B.removeEventListener("ended",G)};let q=window.setInterval(()=>{if(x&&L&&Date.now()-X>(y??1e3))try{B.readyState==="live"?x.enqueue(L.clone()):G()}catch{G()}},y??1e3);const Ae=new TransformStream({transform:(ue,_e)=>{B.readyState==="live"?(x=_e,X=Date.now(),L===void 0?(L=ue,_e.enqueue(ue.clone())):(_e.enqueue(L),L=ue)):ue.close()}});return B.addEventListener("ended",G),C.readable.pipeThrough(Ae).pipeTo(B.writable),B}}(n);v&&(H.info("local screen video track begin to inject frame"),this._mediaStreamTrack=v)}o&&this._hints.indexOf(Jn.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(o),this._processorContext=new M$(this.getTrackId(),"local"),this._processorDestination=new U$(this.processorContext),this.bindProcessorDestinationEvents()}play(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const l=document.getElementById(n);l?n=l:(H.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}H.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(o));const a=ui(ui(ui({},this._getDefaultPlayerConfig()),o),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(a):(n instanceof HTMLVideoElement?this._player=new Q5(a):this._player=new H5(a),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(by.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},me("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,H.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(n,o){if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(H.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){this._originMediaStreamTrack.enabled=!1;try{await ni(this,Zt.NEED_DISABLE_TRACK,this)}catch(a){throw H.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}return o||(this._enabled=!1),void H.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await ni(this,Zt.NEED_ENABLE_TRACK,this)}catch(a){throw H.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}H.info("[".concat(this.getTrackId(),"] setEnabled to true success")),o||(this._enabled=!0)}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,H.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await ni(this,Zt.NEED_MUTE_TRACK,this):await ni(this,Zt.NEED_UNMUTE_TRACK,this))}async setSaveEncodeBitrateRatio(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._saveEncodeBitrateRatio;if(this._saveEncodeBitrateRatio!==1&&this._encoderConfig&&this._encoderConfig.bitrateMax&&this._encoderConfig.bitrateMin){this._encoderConfig.bitrateMin=Math.floor(this._encoderConfig.bitrateMin*n),this._encoderConfig.bitrateMax=Math.floor(this._encoderConfig.bitrateMax*n),H.debug("[".concat(this.getTrackId(),"] set save encode bitrate ratio, ").concat(n)),this._saveEncodeBitrateRatio=1;try{await ni(this,Zt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw(H)}}}async setEncoderConfiguration(n,o){if(!this._enabled)throw new tt(de.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(n=Cd(n),me("USE_STANDARD_BITRATE_DEFAULT")&&(delete n.bitrateMax,delete n.bitrateMin),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),n.width||n.height||n.frameRate){const a=YI({encoderConfig:n});(Js()||Fa()||wd())&&(a.deviceId=void 0),H.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(a));try{await this._originMediaStreamTrack.applyConstraints(a),this.updateMediaStreamTrackResolution()}catch(l){const d=new tt(de.UNEXPECTED_ERROR,l.toString());throw H.error("[".concat(this.getTrackId(),"] applyConstraints error"),d.toString()),d}}this._encoderConfig=n,this._hints.indexOf(Jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await ni(this,Zt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(a){return a.throw(H)}}getStats(){return rv(()=>{H.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Iu(this,Zt.GET_STATS)||ui({},P5)}async setBeautyEffect(n){H.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(n,o):await V5(n)}async findClosestProfile(){const{width:n,height:o,frameRate:a}=this.getMediaStreamTrackSettings(),{width:l,height:d,frameRate:h}=this._encoderConfig||{},v=my(this._videoWidth||n||l||0),_=my(this._videoHeight||o||d||0),y=function(C,B,L){if(!Array.isArray(me("VIDEO_ENCODER_CONFIG_LIST"))||me("VIDEO_ENCODER_CONFIG_LIST").length===0)return!1;const x=Math.min(C,B);return!(x>=480)&&ui(ui({},me("VIDEO_ENCODER_CONFIG_LIST").find(X=>X.height>x)),{},{frameRate:L})}(v,_,my(a||h||15));if(y)return H.debug("[".concat(this.getTrackId(),"] find closest profile, ").concat(v,"x").concat(_," => ").concat(JSON.stringify(y))),this.setEncoderConfiguration(y)}async setBitrateLimit(n){H.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(n))),n&&(this._forceBitrateLimit=n,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<n.max_bitrate?this._encoderConfig.bitrateMax:n.max_bitrate:this._encoderConfig.bitrateMax=n.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=n.min_bitrate))}async setOptimizationMode(n){if(n!=="motion"&&n!=="detail"&&n!=="balanced")return void H.error(de.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const o=this._optimizationMode;try{this._optimizationMode=n,await ni(this,Zt.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(a){throw this._optimizationMode=o,H.error("[".concat(this.getTrackId(),"] set optimization mode failed"),a.toString()),a}H.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(n,")"))}setScalabiltyMode(n){if(n.numSpatialLayers===1&&n.numTemporalLayers!==1)return H.error(de.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=n,H.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(n,")"))}updateMediaStreamTrackResolution(){Q$(this._originMediaStreamTrack).then(n=>{let[o,a]=n;this._videoHeight=a,this._videoWidth=o}).catch(FI)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(n){if(!this._enabled)throw new tt(de.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");H.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(n)),n=Cd(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),this._encoderConfig=n,this._hints.indexOf(Jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await ni(this,Zt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw(H)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:n,height:o,frameRate:a}=this.getMediaStreamTrackSettings();if(!n||!o||!a)return;const{bitrateMax:l,bitrateMin:d}=this._encoderConfig;if(d==null||l==null){const{max:h,min:v}=function(_,y,C,B,L){const x=me("BITRATE_ADAPTER_TYPE");if(x==="DEFAULT_BITRATE")return{min:B,max:L};if(L===void 0){const X=Math.floor(200*Math.pow(C/15,.6)*Math.pow(_*y/640/360,.75));L=x==="STANDARD_BITRATE"?4*X:2*X,B=B??X}else B=B??Math.floor(L/10);return{min:B,max:L}}(n,o,a,d,l);if(this._encoderConfig.bitrateMin=v,this._encoderConfig.bitrateMax=h,me("VIDEO_STANDARD_BITRATE_VERSION")&&d==null&&l==null){const[_,y]=function(C,B,L){const x=4*Math.floor(2e5*Math.pow(L/15,.6)*Math.pow(C*B/230400,.75)),X=C*B,G=new Map([[19200,.9],[230400,.85],[518400,.75],[921600,.7],[2073600,.6],[3686400,.5]]),q=new Map([[230400,.95],[518400,.9],[921600,.85],[2073600,.8]]);let Ae=Jl(G).call(G).next().value,ue=1;if(G.has(X))Ae=G.get(X);else{var _e;const wt=j0(_e=Array.from(G.entries())).call(_e,(en,Or)=>{let[Ln]=en,[Tn]=Or;return Ln-Tn}),Gr=wt.find(en=>{let[Or]=en;return Or>X});if(Gr){const en=wt.indexOf(Gr);if(en>0){const Or=wt[en-1],Ln=(X-Or[0])/(Gr[0]-Or[0]);Ae=Or[1]+Ln*(Gr[1]-Or[1])}else Ae=Gr[1]}else Ae=wt[wt.length-1][1]}if(q.has(X))ue=q.get(X);else{var De;const wt=j0(De=Array.from(q.entries())).call(De,(en,Or)=>{let[Ln]=en,[Tn]=Or;return Ln-Tn}),Gr=wt.find(en=>{let[Or]=en;return Or>X});if(Gr){const en=wt.indexOf(Gr);if(en>0){const Or=wt[en-1],Ln=(X-Or[0])/(Gr[0]-Or[0]);ue=Or[1]+Ln*(Gr[1]-Or[1])}else ue=Gr[1]}else ue=wt[wt.length-1][1]}const Le=me("VIDEO_NEW_BITRATE_RATIO");Le&&Le>0&&(Ae=Le/100);const Te=Math.floor(x*Ae),ze=Math.floor(65e4*Math.pow(C*B/230400,.5)*Math.pow(L/15,.69));let rt=Te;const At=me("VIDEO_STANDARD_BITRATE_VERSION");return At&&At>0&&(At===1?rt=x:At===2?rt=Te:At===3&&(rt=ze)),[Math.floor(rt/1e3),ue]}(n,o,a);this._encoderConfig.bitrateMax=_,this._encoderConfig.bitrateMin=v?Math.min(v,_):_,this._saveEncodeBitrateRatio=y,H.debug("[".concat(this.getTrackId(),"] update new bitrate from profile, [w: ").concat(n,", h: ").concat(o,", fps: ").concat(a,"] => [brMax: ").concat(this._encoderConfig.bitrateMax,", brMin: ").concat(this._encoderConfig.bitrateMin,", save_bitrate_ratio: ").concat(this._saveEncodeBitrateRatio,"]"))}else H.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(n,", h: ").concat(o,", fps: ").concat(a,"] => [brMax: ").concat(h,", brMin: ").concat(v,"]")),this._saveEncodeBitrateRatio=1}}getVideoElementVisibleStatus(){try{var n,o;const a=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),l={track:this,element:this==null||(o=this._player)===null||o===void 0?void 0:o.getVideoElement(),slot:a==null?void 0:a.parentElement},{element:d,slot:h}=l;if(this.isPlaying&&d instanceof HTMLVideoElement&&h instanceof HTMLElement){const v=HG.checkOneElementVisible(d),_=Object.assign({},v);if(_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=_.visible;const y=rr.reportApiInvoke(null,{tag:Oi.TRACER,name:Ji.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});_.visible?y.onSuccess("Video is visible"):y.onSuccess("Invisible because of ".concat(_.reason))}return _}return}catch(a){throw new tt(de.GET_VIDEO_ELEMENT_VISIBLE_ERROR,a.message)}}async renewMediaStreamTrack(n){}pipe(n){if(this.processor===n)return n;if(n._source)throw new tt(de.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(n){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=ui(ui({},a),Cd(n))),a=J0(a);const l=ii(8,"track-video-cloned-"),d=new KAe(o?this._mediaStreamTrack.clone():this._mediaStreamTrack,a,J0(this._scalabilityMode),this._optimizationMode,l,J0(this._hints));return n&&a&&d.setEncoderConfiguration(a),H.debug("clone video track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(o)),d}async replaceTrack(n,o){if(!(n instanceof MediaStreamTrack))throw new tt(de.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(n.kind!=="video")throw new tt(de.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(n,o,!0),this.updateMediaStreamTrackResolution()}sendSeiData(n){if(rv(()=>{rr.reportApiInvoke(null,{name:Ji.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Oi.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!me("ENABLE_VIDEO_SEI")||!me("ENABLE_ENCODED_TRANSFORM"))return void H.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(n instanceof Uint8Array==0)return new tt(de.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const o=this.getRTCRtpTransceiver();if(!o)return void H.warning("Video track is not published, SEI can not be send");const a=o.sender.getParameters();if(a.codecs.length===0)return;const l=a.codecs[0].mimeType.toLocaleLowerCase();l==="video/h264"||l==="video/h265"?this.safeEmit("sei-to-send",n):H.warning("SEI is not supported by ".concat(l))}bindProcessorDestinationEvents(){this.processorDestination.on(Sc.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(),await ni(this,Zt.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await ni(this,Zt.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Sc.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Bu.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Bu.REQUEST_CONSTRAINTS)}},fn(cn.prototype,"play",[Lz,Pz],Object.getOwnPropertyDescriptor(cn.prototype,"play"),cn.prototype),fn(cn.prototype,"stop",[kz],Object.getOwnPropertyDescriptor(cn.prototype,"stop"),cn.prototype),fn(cn.prototype,"setEnabled",[Dz,xz,Uz],Object.getOwnPropertyDescriptor(cn.prototype,"setEnabled"),cn.prototype),fn(cn.prototype,"setMuted",[Mz,Fz,Vz],Object.getOwnPropertyDescriptor(cn.prototype,"setMuted"),cn.prototype),fn(cn.prototype,"setSaveEncodeBitrateRatio",[Qz,Hz],Object.getOwnPropertyDescriptor(cn.prototype,"setSaveEncodeBitrateRatio"),cn.prototype),fn(cn.prototype,"setEncoderConfiguration",[jz,Kz],Object.getOwnPropertyDescriptor(cn.prototype,"setEncoderConfiguration"),cn.prototype),fn(cn.prototype,"getStats",[Wz],Object.getOwnPropertyDescriptor(cn.prototype,"getStats"),cn.prototype),fn(cn.prototype,"setBeautyEffect",[Gz,$z],Object.getOwnPropertyDescriptor(cn.prototype,"setBeautyEffect"),cn.prototype),fn(cn.prototype,"getCurrentFrameData",[zz],Object.getOwnPropertyDescriptor(cn.prototype,"getCurrentFrameData"),cn.prototype),fn(cn.prototype,"getCurrentFrameImage",[qz],Object.getOwnPropertyDescriptor(cn.prototype,"getCurrentFrameImage"),cn.prototype),fn(cn.prototype,"findClosestProfile",[Yz,Xz],Object.getOwnPropertyDescriptor(cn.prototype,"findClosestProfile"),cn.prototype),fn(cn.prototype,"setBitrateLimit",[Jz],Object.getOwnPropertyDescriptor(cn.prototype,"setBitrateLimit"),cn.prototype),fn(cn.prototype,"setOptimizationMode",[Zz],Object.getOwnPropertyDescriptor(cn.prototype,"setOptimizationMode"),cn.prototype),fn(cn.prototype,"setScalabiltyMode",[eq],Object.getOwnPropertyDescriptor(cn.prototype,"setScalabiltyMode"),cn.prototype),fn(cn.prototype,"updateMediaStreamTrackResolution",[tq],Object.getOwnPropertyDescriptor(cn.prototype,"updateMediaStreamTrackResolution"),cn.prototype),fn(cn.prototype,"pipe",[rq],Object.getOwnPropertyDescriptor(cn.prototype,"pipe"),cn.prototype),fn(cn.prototype,"unpipe",[nq],Object.getOwnPropertyDescriptor(cn.prototype,"unpipe"),cn.prototype),fn(cn.prototype,"close",[iq],Object.getOwnPropertyDescriptor(cn.prototype,"close"),cn.prototype),fn(cn.prototype,"replaceTrack",[oq],Object.getOwnPropertyDescriptor(cn.prototype,"replaceTrack"),cn.prototype),cn),XI=(sq=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),aq=qi(),cq=vy("CameraVideoTrack","_enabledMutex"),lq=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),uq=qi(),Aq=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),dq=qi(),fq=gr({argsMap:r=>[r.getTrackId()]}),xu=class WAe extends hi{get __className__(){return"CameraVideoTrack"}constructor(n,o,a,l,d,h){super(n,Cd(o.encoderConfig),l,d,h),Xe(this,"_config",void 0),Xe(this,"_originalConstraints",void 0),Xe(this,"_constraints",void 0),Xe(this,"_enabled",!0),Xe(this,"_deviceName","default"),Xe(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(hy()||s5())&&!function(){const v=hn();if(v.os!==is.IOS||!v.osVersion)return!1;const _=v.osVersion.split(".");return Number(_[0])===15&&Number(_[1])>=2}()&&MG()&&this._enabled&&!this._isClosed&&(H.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=o,this._originalConstraints=a,this._constraints=a,this._deviceName=n.label,this._encoderConfig=Cd(this._config.encoderConfig),qn.on(Ds.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),qn.on(Ds.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){return typeof n=="string"?this._setDeviceById(n):n.deviceId?this._setDeviceById(n.deviceId):n.facingMode?this._setDeviceByFacingModel(n.facingMode):void 0}async _setDeviceById(n){if(H.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const o=await ku.getDeviceById(n),a={};a.video=ui({},this._constraints),a.video.deviceId={exact:n},a.video.facingMode=void 0,this._originMediaStreamTrack.stop();let l=null;try{l=await Pu(a,this.getTrackId())}catch(d){throw H.error("[".concat(this.getTrackId(),"] setDevice failed"),d.toString()),l=await Pu({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),d}await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=o.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(o){throw H.error("[".concat(this.getTrackId(),"] setDevice error"),o.toString()),o}else try{const o=await ku.getDeviceById(n);this._deviceName=o.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(o){throw H.error("[".concat(this.getTrackId(),"] setDevice error"),o.toString()),o}H.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(n){H.info("[".concat(this.getTrackId(),"] set facingMode ").concat(n));const o={video:ui(ui({},this._constraints),{},{deviceId:void 0,facingMode:{exact:n}})};if(this._enabled){this._originMediaStreamTrack.stop();let a=null;try{a=await Pu(o,this.getTrackId())}catch(l){throw H.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),l.toString()),a=await Pu({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=n,this._config.cameraId=void 0,this._constraints=ui({},o.video),H.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(n,o){if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(H.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const a=await Pu({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1)}await ni(this,Zt.NEED_ENABLE_TRACK,this)}catch(a){throw H.error("[".concat(this.getTrackId(),"] setEnabled true error"),a.toString()),a}this.updateMediaStreamTrackResolution(),H.info("[".concat(this.getTrackId(),"] setEnabled to true success")),o||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),o||(this._enabled=!1);try{await ni(this,Zt.NEED_DISABLE_TRACK,this)}catch(a){throw H.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}H.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,o){if(!this._enabled)throw new tt(de.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=Cd(n),me("USE_STANDARD_BITRATE_DEFAULT")&&(delete n.bitrateMax,delete n.bitrateMin),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate||n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate||n.bitrateMin);const a=Ni(this._config);a.encoderConfig=n;const l=YI(a);(Js()||Fa()||wd())&&(l.deviceId=void 0),H.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(l));try{await this._originMediaStreamTrack.applyConstraints(l),this.updateMediaStreamTrackResolution()}catch(d){const h=new tt(de.UNEXPECTED_ERROR,d.toString());throw H.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}this._config=a,this._constraints=l,this._originalConstraints=l,this._encoderConfig=n,this._hints.indexOf(Jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await ni(this,Zt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(d){return d.throw(H)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Fa()||wd())&&this._enabled&&!this._isClosed&&qn.duringInterruption){const n=async()=>{qn.off(Ds.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(H.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};qn.on(Ds.IOS_INTERRUPTION_END,n)}else H.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(by.TRACK_ENDED)}async renewMediaStreamTrack(n){const o=n||this._constraints,a=ku.searchDeviceIdByName(this._deviceName);if(a&&!o.deviceId&&(o.deviceId={exact:a}),this._enabled){const l=await Pu({video:o},this.getTrackId());this._constraints=o,await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),qn.off(Ds.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),qn.off(Ds.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(n){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=ui(ui({},a),Cd(n))),a=J0(a);const l=ii(8,"track-cam-cloned-"),d=new WAe(o?this._mediaStreamTrack.clone():this._mediaStreamTrack,J0(ui(ui({},this._config),{},{encoderConfig:a})),J0(this._constraints),J0(this._scalabilityMode),this._optimizationMode,l);return n&&a&&d.setEncoderConfiguration(a),H.debug("clone track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(o)),d}bindProcessorContextEvents(){this.processorContext.on(Bu.REQUEST_UPDATE_CONSTRAINTS,async(n,o,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),o()}catch(l){a(l)}}),this.processorContext.on(Bu.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}},fn(xu.prototype,"setDevice",[sq,aq],Object.getOwnPropertyDescriptor(xu.prototype,"setDevice"),xu.prototype),fn(xu.prototype,"setEnabled",[cq,lq,uq],Object.getOwnPropertyDescriptor(xu.prototype,"setEnabled"),xu.prototype),fn(xu.prototype,"setEncoderConfiguration",[Aq,dq],Object.getOwnPropertyDescriptor(xu.prototype,"setEncoderConfiguration"),xu.prototype),fn(xu.prototype,"close",[fq],Object.getOwnPropertyDescriptor(xu.prototype,"close"),xu.prototype),xu);function j5(r,n,o,a){o.optimizationMode&&(a&&a.width&&a.height?(o.encoderConfig=ui(ui({},a),{},{bitrateMin:a.bitrateMin,bitrateMax:a.bitrateMax}),o.optimizationMode!=="motion"&&o.optimizationMode!=="detail"||(n.contentHint=o.optimizationMode,n.contentHint===o.optimizationMode?H.debug("[".concat(r,"] set content hint to"),o.optimizationMode):H.debug("[".concat(r,"] set content hint failed")))):H.warning("[".concat(r,"] can not apply optimization mode bitrate config, no encoderConfig")))}var hq,pq,gq,mq,SA,vq,_q,yq,Eq,wq,Sq,ic;class bq extends T${getUserId(){return this._userId}constructor(n,o,a,l){super(n,"track-".concat(n.kind,"-").concat(o,"-").concat(l.clientId,"_").concat(ii(5,""))),Xe(this,"_userId",void 0),Xe(this,"_uintId",void 0),Xe(this,"_isDestroyed",!1),Xe(this,"store",void 0),Xe(this,"processor",void 0),Xe(this,"processorContext",void 0),this._userId=o,this._uintId=a,this.store=l}_updateOriginMediaStreamTrack(n){this._originMediaStreamTrack=n,this._mediaStreamTrack=n,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,H.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let Oy=(hq=gr({argsMap:(r,n,o)=>[r.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),pq=gr({argsMap:r=>[r.getTrackId()]}),gq=gr({argsMap:(r,n)=>[r.getTrackId(),n.name]}),mq=gr({argsMap:r=>[r.getTrackId()]}),fn((SA=class extends bq{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ma.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(r,n,o,a,l){super(r,n,o,a),Xe(this,"_videoVisibleTimer",null),Xe(this,"_previousVideoVisibleStatus",void 0),Xe(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Xe(this,"trackMediaType",Cy.VIDEO),Xe(this,"_videoWidth",void 0),Xe(this,"_videoHeight",void 0),Xe(this,"_player",void 0),Xe(this,"_prePlayer",void 0),Xe(this,"processorDestination",void 0),Xe(this,"processorContext",void 0),this._prePlayer=l,this.updateMediaStreamTrackResolution(),this.processorContext=new M$(this.getTrackId(),"remote"),this.processorDestination=new U$(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return rv(()=>{H.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Iu(this,Zt.GET_STATS)||ui({},b$)}play(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.safeEmit(wA.PLAY_START),typeof r=="string"){const a=document.getElementById(r);a?r=a:(H.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),r=document.body)}H.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));const o=ui(ui({fit:"cover"},n),{},{trackId:this.getTrackId(),element:r});if(this._player)this._player.updateConfig(o);else{let a=!1,l=!1;r instanceof HTMLVideoElement?(this._player=new Q5(o),this._prePlayer&&(this._prePlayer.destroy(),this._prePlayer=void 0,l=!0)):this._prePlayer&&!this._prePlayer.isDestroyed?(this._player=this._prePlayer,this._prePlayer=void 0,a=this._player.videoState>0,this._player.updateConfig(o)):this._player=new H5(o),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(wA.FIRST_FRAME_DECODED),l&&this.safeEmit(wA.FIRST_FRAME_RENDER)},this._player.onVideoStateChanged=d=>{this.safeEmit(wA.VIDEO_STATE_CHANGED,d)},a&&(this._player.onFirstVideoFrameDecoded(),this._player.onVideoStateChanged(this._player.videoState))}this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const a=this.getVideoElementVisibleStatus();this.safeEmit(wA.VIDEO_ELEMENT_VISIBLE_STATUS,a)}catch{}},me("CHECK_VIDEO_VISIBLE_INTERVAL")),this.safeEmit(wA.PLAY_END)}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,H.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Q$(this._originMediaStreamTrack).then(r=>{let[n,o]=r;this._videoHeight=o,this._videoWidth=n}).catch(FI)}_updatePlayerSource(){H.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var r,n;const o=this==null||(r=this._player)===null||r===void 0?void 0:r.getContainerElement(),a={track:this,element:this==null||(n=this._player)===null||n===void 0?void 0:n.getVideoElement(),slot:o==null?void 0:o.parentElement},{element:l,slot:d}=a;if(this.isPlaying&&l instanceof HTMLVideoElement&&d instanceof HTMLElement){const h=HG.checkOneElementVisible(l),v=Object.assign({},h);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;const _=rr.reportApiInvoke(null,{tag:Oi.TRACER,name:Ji.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});v.visible?_.onSuccess("Video is visible"):_.onSuccess("Invisible because of ".concat(v.reason))}return v}return}catch(o){throw new tt(de.GET_VIDEO_ELEMENT_VISIBLE_ERROR,o.message)}}pipe(r){if(this.processor===r)return r;if(r._source)throw new tt(de.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),r}unpipe(){if(!this.processor)return;const r=this.processor;this.processor._source=void 0,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Sc.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Sc.ON_TRACK)}_destroy(){this._prePlayer&&(this._prePlayer.destroy(),this._prePlayer=void 0),super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(r){this.emit(r1.SEI_RECEIVED,r)}}).prototype,"play",[hq],Object.getOwnPropertyDescriptor(SA.prototype,"play"),SA.prototype),fn(SA.prototype,"stop",[pq],Object.getOwnPropertyDescriptor(SA.prototype,"stop"),SA.prototype),fn(SA.prototype,"pipe",[gq],Object.getOwnPropertyDescriptor(SA.prototype,"pipe"),SA.prototype),fn(SA.prototype,"unpipe",[mq],Object.getOwnPropertyDescriptor(SA.prototype,"unpipe"),SA.prototype),SA),Ny=(vq=gr({argsMap:(r,n)=>[r.getTrackId(),n],throttleTime:300}),_q=gr({argsMap:(r,n)=>[r.getTrackId(),n]}),yq=gr({argsMap:r=>[r.getTrackId()]}),Eq=gr({argsMap:r=>[r.getTrackId()]}),wq=gr({argsMap:(r,n)=>[r.getTrackId(),n.name]}),Sq=gr({argsMap:r=>[r.getTrackId()]}),fn((ic=class extends bq{get isPlaying(){return this._useAudioElement?Xc.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(r,n,o,a){super(r,n,o,a),Xe(this,"trackMediaType",Cy.AUDIO),Xe(this,"_source",void 0),Xe(this,"_useAudioElement",!0),Xe(this,"_volume",100),Xe(this,"processorContext",void 0),Xe(this,"processorDestination",void 0),Xe(this,"_played",!1),Xe(this,"_bypassWebAudio",!1),me("DISABLE_WEBAUDIO")?(this._source=new F5,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new N$(r,!0),me("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Nu.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(wA.FIRST_FRAME_DECODED)}),this.processorContext=new V$(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new F$(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Nu.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!r)return this._source.removeAllListeners(Nu.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(Nu.ON_AUDIO_BUFFER),this._source.on(Nu.ON_AUDIO_BUFFER,o=>r(o))}setVolume(r){this._volume=r,this._useAudioElement?Xc.setVolume(this.getTrackId(),r):this._source.setVolume(r/100)}async setPlaybackDevice(r){if(!this._useAudioElement||!y$())throw new tt(de.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Xc.setSinkID(this.getTrackId(),r)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return rv(()=>{H.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Iu(this,Zt.GET_STATS)||ui({},S$)}play(){H.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(H.debug("[".concat(this.getTrackId(),"] use audio element to play")),Xc.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){H.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Xc.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];H.debug("[".concat(this.getTrackId(),"] update player source track")),r&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Xc.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(r){if(this._bypassWebAudio)throw new tt(de.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===r)return r;if(r._source)throw new tt(de.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),r}unpipe(){var r;if(this._bypassWebAudio)throw new tt(de.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const n=this.processor;(r=this._source.processSourceNode)===null||r===void 0||r.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Sc.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(r)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Sc.ON_NODE,r=>{this._source.processedNode=r;const n=!r;this._useAudioElement!==n&&(this._played?(this.stop(),this._useAudioElement=n,this.play()):this._useAudioElement=n)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Sc.ON_TRACK),this.processorDestination.removeAllListeners(Sc.ON_NODE)}}).prototype,"setVolume",[vq],Object.getOwnPropertyDescriptor(ic.prototype,"setVolume"),ic.prototype),fn(ic.prototype,"setPlaybackDevice",[_q],Object.getOwnPropertyDescriptor(ic.prototype,"setPlaybackDevice"),ic.prototype),fn(ic.prototype,"play",[yq],Object.getOwnPropertyDescriptor(ic.prototype,"play"),ic.prototype),fn(ic.prototype,"stop",[Eq],Object.getOwnPropertyDescriptor(ic.prototype,"stop"),ic.prototype),fn(ic.prototype,"pipe",[wq],Object.getOwnPropertyDescriptor(ic.prototype,"pipe"),ic.prototype),fn(ic.prototype,"unpipe",[Sq],Object.getOwnPropertyDescriptor(ic.prototype,"unpipe"),ic.prototype),ic);const _p=new class extends Mi{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),Xe(this,"_lastHiddenTime",0),Xe(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),H.debug("current web page is ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};class Cq extends Mi{constructor(n,o){super(),Xe(this,"trackMediaType",Cy.DATA),Xe(this,"_version",1),Xe(this,"_type",3),Xe(this,"_config",void 0),Xe(this,"_originDataChannel",void 0),Xe(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),Xe(this,"_dataStreamPacketHandler",{serialize:a=>a,deserialize:a=>a}),Xe(this,"_datachannelEventMap",new Map),this._config=n,o&&(this._originDataChannel=o,this._bandDataChannelEvents(o)),this._initPacketHeader()}useDataStream(n){this._dataStreamPacketHandler=n}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return me("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var n,o;return(n=(o=this._originDataChannel)===null||o===void 0?void 0:o.readyState)!==null&&n!==void 0?n:"connecting"}get _originDataChannelId(){var n,o;return(n=(o=this._originDataChannel)===null||o===void 0?void 0:o.id)!==null&&n!==void 0?n:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new Mt((n,o)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&n();const a=setTimeout(()=>{var l;o(new tt(de.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((l=this._originDataChannel)===null||l===void 0?void 0:l.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(a),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),n()},this._originDataChannel.onerror=()=>{throw clearTimeout(a),new tt(de.DATACHANNEL_CONNECTION_TIMEOUT)}}else o(new tt(de.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(n){this._originDataChannel=n,this._bandDataChannelEvents(n)}_initPacketHeader(){const n=new DataView(this._dataStreamPacketHeader);n.setUint16(0,this._version),n.setUint8(2,this._type),n.setUint8(3,this._config.id)}_bandDataChannelEvents(n){this._unbindDataChannelEvents(n),[zI.OPEN,zI.CLOSE,zI.ERROR].forEach(o=>{const a=()=>{this.emit(o)};this._datachannelEventMap.set(o,a),n.addEventListener(o,a)})}_unbindDataChannelEvents(n){Array.from(this._datachannelEventMap.entries()).forEach(o=>{let[a,l]=o;n.removeEventListener(a,l)}),this._datachannelEventMap.clear()}}class _Se extends Cq{constructor(n){super(n),Xe(this,"_messageListener",void 0),this._messageListener=o=>{if(o.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const a=o.data.slice(0,this._dataStreamPacketHeader.byteLength),l=new DataView(a).getUint8(3);if(l!==this.id)return void(me("SHOW_DATASTREAM2_LOG")&&H.debug("invalid datachannel id: ".concat(l," !== ").concat(this.id)));let d=o.data.slice(this._dataStreamPacketHeader.byteLength);d=this._dataStreamPacketHandler.deserialize(d),this.emit(zI.MESSAGE,d)}}_updateOriginDataChannel(n){super._updateOriginDataChannel(n),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class ySe extends Cq{send(n){if(this._originDataChannel){let o=n;o=this._dataStreamPacketHandler.serialize(n);const a=new Uint8Array(this._dataStreamPacketHeader.byteLength+o.byteLength);a.set(new Uint8Array(this._dataStreamPacketHeader),0),a.set(new Uint8Array(o),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(a.buffer)}}}function JI(){const r=new Blob([atob("Y29uc3QgdD0idmlkZW8vaDI2NCIsZT0idmlkZW8vaDI2NSI7ZnVuY3Rpb24gbih0LGUsbil7bGV0IGE9bmV3IFVpbnQ4QXJyYXkodCxlLG4pLHI9W10sbz0wO2Zvcig7ci5sZW5ndGg8bjspbyszPG4mJjA9PT1hW29dJiYwPT09YVtvKzFdJiYzPT09YVtvKzJdJiYoMD09PWFbbyszXXx8MT09PWFbbyszXXx8Mj09PWFbbyszXXx8Mz09PWFbbyszXSk/KHIucHVzaChhW29dLGFbbysxXSxhW28rM10pLG8rPTQpOihyLnB1c2goYVtvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkocil9ZnVuY3Rpb24gYShhLHIpe3N3aXRjaChyKXtjYXNlIHQ6cmV0dXJuIGZ1bmN0aW9uKHQpe2NvbnN0IGU9bmV3IERhdGFWaWV3KHQuZGF0YSk7bGV0IGE9MDtmb3IoO2ErNDx0LmRhdGEuYnl0ZUxlbmd0aDspe2lmKDA9PT1lLmdldFVpbnQ4KGErMCkmJjA9PT1lLmdldFVpbnQ4KGErMSkmJjA9PT1lLmdldFVpbnQ4KGErMikmJjE9PT1lLmdldFVpbnQ4KGErMykmJjY9PT1lLmdldFVpbnQ4KGErNCkpe2xldCByPWErNixvPTAsaT0wO2Zvcig7MjU1PT09KGk9ZS5nZXRVaW50OChyKyspKTspbys9MjU1O28rPWk7Y29uc3Qgcz1uKHQuZGF0YSxyLG8pO3JldHVybiBuZXcgVWludDhBcnJheShzKX1hKyt9cmV0dXJuIG51bGx9KGEpO2Nhc2UgZTpyZXR1cm4gZnVuY3Rpb24odCl7Y29uc3QgZT1uZXcgRGF0YVZpZXcodC5kYXRhKTtsZXQgYT0wO2Zvcig7YSs1PHQuZGF0YS5ieXRlTGVuZ3RoOyl7aWYoMD09PWUuZ2V0VWludDgoYSswKSYmMD09PWUuZ2V0VWludDgoYSsxKSYmMD09PWUuZ2V0VWludDgoYSsyKSYmMT09PWUuZ2V0VWludDgoYSszKSYmNzg9PT1lLmdldFVpbnQ4KGErNCkmJjE9PT1lLmdldFVpbnQ4KGErNSkmJjEwMT09PWUuZ2V0VWludDgoYSs2KSl7bGV0IHI9YSs3LG89MCxpPTA7Zm9yKDsyNTU9PT0oaT1lLmdldFVpbnQ4KHIrKykpOylvKz0yNTU7bys9aTtjb25zdCBzPW4odC5kYXRhLHIsbyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KHMpfWErK31yZXR1cm4gbnVsbH0oYSk7ZGVmYXVsdDpyZXR1cm4gbnVsbH19ZnVuY3Rpb24gcih0KXtjb25zdCBlPXQubGVuZ3RoO2xldCBuPVtdLGE9MDtmb3IoO2E8ZTspYSsyPGUmJjA9PT10W2FdJiYwPT09dFthKzFdJiYoMD09PXRbYSsyXXx8MT09PXRbYSsyXXx8Mj09PXRbYSsyXXx8Mz09PXRbYSsyXSk/KG4ucHVzaCh0W2FdLHRbYSsxXSwzLHRbYSsyXSksYSs9Myk6KG4ucHVzaCh0W2FdKSxhKyspO3JldHVybiBuZXcgVWludDhBcnJheShuKX1mdW5jdGlvbiBvKG4sYSxvKXtzd2l0Y2gobyl7Y2FzZSB0OnJldHVybiBmdW5jdGlvbih0LGUpe2NvbnN0IG49cihlKSxhPW4ubGVuZ3RoLG89TWF0aC5mbG9vcihhLzI1NSksaT1hJTI1NSxzPW5ldyBVaW50OEFycmF5KDYrbysxK2ErdC5ieXRlTGVuZ3RoKTtzWzBdPTAsc1sxXT0wLHNbMl09MCxzWzNdPTEsc1s0XT02LHNbNV09MTAxO2xldCBmPTA7Zm9yKDtmPG87KXNbNitmXT0yNTUsZisrO3JldHVybiBzWzYrZl09aSxmKysscy5zZXQobiw2K2YpLHMuc2V0KG5ldyBVaW50OEFycmF5KHQpLDYrZithKSxzLmJ1ZmZlcn0obixhKTtjYXNlIGU6cmV0dXJuIGZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1yKGUpLGE9bi5sZW5ndGgsbz1NYXRoLmZsb29yKGEvMjU1KSxpPWElMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNytvKzErYSsxK3QuYnl0ZUxlbmd0aCk7c1swXT0wLHNbMV09MCxzWzJdPTAsc1szXT0xLHNbNF09Nzgsc1s1XT0xLHNbNl09MTAxO2xldCBmPTA7Zm9yKDtmPG87KXNbNytmXT0yNTUsZisrO3JldHVybiBzWzcrZl09aSxmKysscy5zZXQobiw3K2YpLGYrPWEsc1s3K2ZdPTEyOCxmKysscy5zZXQobmV3IFVpbnQ4QXJyYXkodCksNytmKSxzLmJ1ZmZlcn0obixhKTtkZWZhdWx0OnJldHVybiBudWxsfX1mdW5jdGlvbiBpKG4pe2lmKG4ubGVuZ3RoPDUpcmV0dXJuIiI7bGV0IGE9LTE7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aC0zO3QrKyl7aWYoMD09PW5bdF0mJjA9PT1uW3QrMV0mJjE9PT1uW3QrMl0pe2E9dDticmVha31pZih0PG4ubGVuZ3RoLTQmJjA9PT1uW3RdJiYwPT09blt0KzFdJiYwPT09blt0KzJdJiYxPT09blt0KzNdKXthPXQ7YnJlYWt9fWlmKC0xPT09YSlyZXR1cm4iIjtjb25zdCByPWErKDA9PT1uW2ErMl0/NDozKTtpZihyPj1uLmxlbmd0aClyZXR1cm4iIjtjb25zdCBvPW5bcl07aWYoMTI4Jm8pcmV0dXJuIiI7aWYoKG8+PjEmNjMpPj0zMilyZXR1cm4gZTtpZihyKzE8bi5sZW5ndGgpe2lmKDA9PSgyNDgmbltyKzFdKSlyZXR1cm4gZX1yZXR1cm4oMzEmbyk8PTMxP3Q6IiJ9Y29uc3Qgcz03MSxmPTEsbD0yLHU9MSxnPTI7dmFyIGM7ZnVuY3Rpb24gZCh0LGU9ITEpe2NvbnN0IG49dC5nZXRVaW50OCgwKTtpZihuIT09cylyZXR1cm47Y29uc3QgYT10LmdldFVpbnQxNigxKSxyPWYrbCthLG89bmV3IFVpbnQ4QXJyYXkodC5ieXRlTGVuZ3RoLXIpO28uc2V0KG5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHIsdC5ieXRlTGVuZ3RoLXIpKTtjb25zdCBpPXttOm4sdGx2TGVuOmEsdGx2OltdLGZyYW1lOm99O2xldCBkPWYrbDtmb3IoO2Q8cjspe2NvbnN0IG49dC5nZXRVaW50OChkKSxhPXQuZ2V0VWludDE2KGQrdSkscj11K2c7aWYobj09PWMuQVVESU9fTEVWRUwpe2xldCBvPXQuZ2V0VWludDgoZCtyKTtmb3IobGV0IGU9MTtlPGE7ZSsrKW89bzw8OHx0LmdldFVpbnQ4KGQrcitlKTtpLnRsdi5wdXNoKHt0YWc6bixsZW5ndGg6YSx2YWx1ZTplPzEyN15vPj4xOjEyNyZvfSl9ZWxzZSBpZihuPT09Yy5NRVRBREFUQXx8bj09PWMuQVVESU9fNjRfQklUX1BUUyl7Y29uc3QgZT1uZXcgVWludDhBcnJheShhKTtmb3IobGV0IG49MDtuPGE7bisrKWVbbl09dC5nZXRVaW50OChkK3Irbik7aS50bHYucHVzaCh7dGFnOm4sbGVuZ3RoOmEsdmFsdWU6ZX0pfWQrPXIrYX1yZXR1cm4gaX0hZnVuY3Rpb24odCl7dFt0LkFVRElPX0xFVkVMPTFdPSJBVURJT19MRVZFTCIsdFt0Lk1FVEFEQVRBPTJdPSJNRVRBREFUQSIsdFt0LkFVRElPXzY0X0JJVF9QVFM9M109IkFVRElPXzY0X0JJVF9QVFMifShjfHwoYz17fSkpLHNlbGYub25ydGN0cmFuc2Zvcm09dD0+e2NvbnN0IGU9dC50cmFuc2Zvcm1lcjtsZXQgbj1bXSxyPVtdO2Uub3B0aW9ucy5wb3J0Lm9ubWVzc2FnZT10PT57dC5kYXRhLnNlaSYmbi5wdXNoKHQuZGF0YS5zZWkpLHQuZGF0YS5tZXRhZGF0YSYmci5wdXNoKHQuZGF0YS5tZXRhZGF0YSl9LHNlbGYucG9zdE1lc3NhZ2UoInN0YXJ0ZWQiKTtjb25zdCBoPWUucmVhZGFibGUuZ2V0UmVhZGVyKCksVT1lLndyaXRhYmxlLmdldFdyaXRlcigpOyJzZWktcngiPT09ZS5vcHRpb25zLm5hbWU/ZnVuY3Rpb24gdChlKXtoLnJlYWQoKS50aGVuKChuPT57aWYoIW4uZG9uZSl7aWYobi52YWx1ZSBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCB0PWkobmV3IFVpbnQ4QXJyYXkobi52YWx1ZS5kYXRhKSkscj1hKG4udmFsdWUsdCk7ciYmZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3NlaTpyfSl9VS53cml0ZShuLnZhbHVlKSxlLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSx0KGUpfX0pKX0oZSk6InNlaS10eCI9PT1lLm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KGUpe2gucmVhZCgpLnRoZW4oKGE9PntpZighYS5kb25lKXtpZihhLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9aShuZXcgVWludDhBcnJheShhLnZhbHVlLmRhdGEpKSxlPW4uc2hpZnQoKTtpZihlKXtjb25zdCBuPW8oYS52YWx1ZS5kYXRhLGUsdCk7biYmKGEudmFsdWUuZGF0YT1uKX19VS53cml0ZShhLnZhbHVlKSxlLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSx0KGUpfX0pKX0oZSk6ImF1ZGlvLW1ldGFkYXRhLXJ4Ij09PWUub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQoZSl7aC5yZWFkKCkudGhlbigobj0+e2lmKCFuLmRvbmUpe2lmKG4udmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkQXVkaW9GcmFtZSl7Y29uc3QgdD1uZXcgRGF0YVZpZXcobi52YWx1ZS5kYXRhKSxhPXQuZ2V0VWludDgoMCk7bGV0IHI7aWYoMCE9KDEyOCZhKSYmNzEhPT1hKXtsZXQgZT1mdW5jdGlvbih0KXtpZih0LmJ5dGVMZW5ndGg8PTApcmV0dXJuW107Y29uc3QgZT1bXTtsZXQgbj0wO2Zvcig7bjx0LmJ5dGVMZW5ndGg7KXtjb25zdCBhPSgxMjgmdC5nZXRVaW50OChuKSk+Pjcscj0xMjcmdC5nZXRVaW50OChuKTtpZighKGEmJm4rNDw9dC5ieXRlTGVuZ3RoKSl7bisrO2JyZWFrfXtjb25zdCBhPXQuZ2V0VWludDMyKG4sITEpLG89KDE2Nzc2MTkyJmEpPj4xMCxpPTEwMjMmYTtlLnB1c2goe3B0OnIsdHNfb2Zmc2V0Om8sbGVuZ3RoOmksZGF0YTpuZXcgVWludDhBcnJheX0pLG4rPTR9fWxldCBhPXQuYnl0ZUxlbmd0aC1uO2Zvcihjb25zdCByIG9mIGUpe2lmKHIubGVuZ3RoPmEpcmV0dXJuIGNvbnNvbGUud2FybigiQnJva2VuIHJlZCBwYXlsb2FkIiksW107ci5sZW5ndGg+MCYmKHIuZGF0YT1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbixyLmxlbmd0aCksbis9ci5sZW5ndGgsYS09ci5sZW5ndGgpfWlmKGE+MCl7Y29uc3Qgcj17cHQ6ZS5sZW5ndGg+MD9lW2UubGVuZ3RoLTFdLnB0OjAsdHNfb2Zmc2V0OjAsbGVuZ3RoOmEsZGF0YTpuZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbixhKX07ZS5wdXNoKHIpfXJldHVybiBlfSh0KTtpZihlLmxlbmd0aD4wKXtjb25zdCB0PWZ1bmN0aW9uKHQpe2xldCBlPTA7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspZSs9bjx0Lmxlbmd0aC0xPzQ6MSxlKz10W25dLmxlbmd0aDtjb25zdCBuPW5ldyBVaW50OEFycmF5KGUpO2xldCBhPTA7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoZTx0Lmxlbmd0aC0xKXtjb25zdCByPSgyMTQ3NDgzNjQ4fCgxMjcmdFtlXS5wdCk8PDI0fCgyNjIxNDMmdFtlXS50c19vZmZzZXQpPDwxMHwxMDIzJnRbZV0ubGVuZ3RoKT4+PjA7blthKytdPXI+PjI0JjI1NSxuW2ErK109cj4+MTYmMjU1LG5bYSsrXT1yPj44JjI1NSxuW2ErK109MjU1JnJ9ZWxzZSBuW2ErK109MTI3JnRbZV0ucHQ7Zm9yKGNvbnN0IGUgb2YgdCluLnNldChlLmRhdGEsYSksYSs9ZS5sZW5ndGg7cmV0dXJuIG59KGUubWFwKCh0PT57bGV0IGU9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO2Uuc2V0KHQuZGF0YSk7Y29uc3Qgbj1kKG5ldyBEYXRhVmlldyhlLmJ1ZmZlcikpO3JldHVybiBuPy5mcmFtZSYmKHQuZGF0YT1uPy5mcmFtZSkscj1uLHR9KSkpO24udmFsdWUuZGF0YT10LmJ1ZmZlcn19ZWxzZSByPWQodCksciYmKG4udmFsdWUuZGF0YT1yLmZyYW1lLmJ1ZmZlcik7aWYocil7bGV0IHQ9ci50bHYuZmluZCgodD0+dC50YWc9PT1jLk1FVEFEQVRBKSk7aWYodCYmdC52YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJmUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHttZXRhZGF0YTp0LnZhbHVlfSksdD1yLnRsdi5maW5kKCh0PT50LnRhZz09PWMuQVVESU9fNjRfQklUX1BUUykpLHQmJnQudmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5JiY4PT10LnZhbHVlLmxlbmd0aCl7Y29uc3Qgbj1uZXcgRGF0YVZpZXcodC52YWx1ZS5idWZmZXIpLmdldEJpZ1VpbnQ2NCgwLCEwKTt0JiZ0LnZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSYmZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3B0czpufSl9fX1VLndyaXRlKG4udmFsdWUpLGUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQoZSl9fSkpfShlKToiYXVkaW8tbWV0YWRhdGEtdHgiPT09ZS5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIHQoZSl7aC5yZWFkKCkudGhlbigobj0+e2lmKCFuLmRvbmUpe2lmKGUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHtnZXRNZXRhZGF0YTohMH0pLG4udmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkQXVkaW9GcmFtZSl7Y29uc3QgdD1yLnNoaWZ0KCk7dCYmKG4udmFsdWUuZGF0YT1mdW5jdGlvbih0LGUsbil7Y29uc3QgYT1uLmJ5dGVMZW5ndGgscj1hK3UrZyxvPWYrbCtyLGk9bmV3IEFycmF5QnVmZmVyKHQuYnl0ZUxlbmd0aCtvKSxjPW5ldyBEYXRhVmlldyhpKTtjLnNldFVpbnQ4KDAscyksYy5zZXRVaW50MTYoMSxyKSxjLnNldFVpbnQ4KDMsZSksYy5zZXRVaW50MTYoNCxhKTtmb3IobGV0IHQ9MDt0PGE7dCsrKWMuc2V0VWludDgoNit0LG5bdF0pO2NvbnN0IGQ9bmV3IFVpbnQ4QXJyYXkoYy5idWZmZXIpO3JldHVybiBkLnNldChuZXcgVWludDhBcnJheSh0KSxvKSxkLmJ1ZmZlcn0obi52YWx1ZS5kYXRhLGMuQVVESU9fNjRfQklUX1BUUyx0KSl9VS53cml0ZShuLnZhbHVlKSxlLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSx0KGUpfX0pKX0oZSl9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKTsK")],{type:"text/javascript"});return setTimeout(()=>XR.revokeObjectURL(r),0),new Worker(XR.createObjectURL(r))}const Tq=71,K5=1,W5=2,G5=1,Rq=2;var ov=function(r){return r[r.AUDIO_LEVEL=1]="AUDIO_LEVEL",r[r.METADATA=2]="METADATA",r[r.AUDIO_64_BIT_PTS=3]="AUDIO_64_BIT_PTS",r}(ov||{});function $5(r){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=r.getUint8(0);if(o!==Tq)return;const a=r.getUint16(1),l=K5+W5+a,d=new Uint8Array(r.byteLength-l);d.set(new Uint8Array(r.buffer,l,r.byteLength-l));const h={m:o,tlvLen:a,tlv:[],frame:d};let v=K5+W5;for(;v<l;){const _=r.getUint8(v),y=r.getUint16(v+G5),C=G5+Rq;if(_===ov.AUDIO_LEVEL){let B=r.getUint8(v+C);for(let L=1;L<y;L++)B=B<<8|r.getUint8(v+C+L);h.tlv.push({tag:_,length:y,value:n?127^B>>1:127&B})}else if(_===ov.METADATA||_===ov.AUDIO_64_BIT_PTS){const B=new Uint8Array(y);for(let L=0;L<y;L++)B[L]=r.getUint8(v+C+L);h.tlv.push({tag:_,length:y,value:B})}v+=C+y}return h}const ZI=new Map,e2=127,o1=1e-10,z5=139/13,t2=new Map;function q5(r,n,o){const a="".concat(r,"-").concat(n,"-").concat(o);let l=0;return t2.has(a)?l=t2.get(a):(l=Math.log(function(h,v){const _=h-v;v<_&&(v=_);let y=1;for(let C=h,B=1;C>v;C--,B++)y=y*C/B;return y}(n,r))+r*Math.log(.5)+(n-r)*Math.log(1-.5)-Math.log(o)+o*r,t2.set(a,l)),l<o1&&(l=o1),l}function Iq(r,n,o){const a=n.length,l=r.length/a;let d=!1;for(let h=0,v=0;h<a;h++){let _=0;for(let y=v+l;v<y;v++)r[v]>o&&_++;n[h]!==_&&(n[h]=_,d=!0)}return d}window.cache=t2;let ESe=0;class Oq{constructor(n){Xe(this,"id",void 0),Xe(this,"immediates",[]),Xe(this,"lastNonSilence",-1),Xe(this,"immediateSpeechActivityScore",o1),Xe(this,"lastLevelChangedTime",Date.now()),Xe(this,"levels",[]),Xe(this,"longs",[]),Xe(this,"longSpeechActivityScore",o1),Xe(this,"mediums",[]),Xe(this,"mediumSpeechActivityScore",o1),Xe(this,"minLevel",0),Xe(this,"nextMinLevel",0),Xe(this,"nextMinLevelWindowLength",0),Xe(this,"energyScore",0),this.id=n||"".concat(ESe++),this.immediates.length=50,this.mediums.length=10,this.longs.length=1,this.levels.length=this.immediates.length}computeImmediates(){const n=this.immediates,o=this.levels,a=this.minLevel+z5;let l=!1;for(let d=0;d<n.length;++d){let h=o[d];h<a&&(h=0);const v=Math.floor(h/z5);n[d]!==v&&(n[d]=v,l=!0)}return l}computeLongs(){return Iq(this.mediums,this.longs,4)}computeMediums(){return Iq(this.immediates,this.mediums,7)}evaluateImmediateSpeechActivityScore(){this.immediateSpeechActivityScore=q5(this.immediates[0],13,.78)}evaluateLongSpeechActivityScore(n){this.longSpeechActivityScore=q5(this.longs[0],10,47),this.longSpeechActivityScore>o1&&(this.lastNonSilence=n)}evaluateMediumSpeechActivityScore(){this.mediumSpeechActivityScore=q5(this.mediums[0],5,24)}evaluateSpeechActivityScores(n){this.computeImmediates()&&(this.evaluateImmediateSpeechActivityScore(),this.computeMediums()&&(this.evaluateMediumSpeechActivityScore(),this.computeLongs()&&this.evaluateLongSpeechActivityScore(n)))}getLastLevelChangedTime(){return this.lastLevelChangedTime}getLevels(){var n;return"[".concat(ud(n=[...this.levels]).call(n).join(),"]")}getSpeechActivityScore(n){switch(n){case 0:return this.immediateSpeechActivityScore;case 1:return this.mediumSpeechActivityScore;case 2:return this.longSpeechActivityScore;default:throw new Error("interval "+n)}}levelChanged(n,o){if(this.lastLevelChangedTime<=o){this.lastLevelChangedTime=o;let a=n;return n<0&&(a=0),n>e2&&(a=e2),this.levels.unshift(a),this.levels.length>this.immediates.length&&this.levels.pop(),this.updateMinLevel(a),a>=this.minLevel+z5?a:a/2}return-1}levelTimedOut(){this.levelChanged(0,this.lastLevelChangedTime)}updateMinLevel(n){if(n!==0){if(this.minLevel===0||this.minLevel>n)return this.minLevel=n,this.nextMinLevel=0,void(this.nextMinLevelWindowLength=0);if(this.nextMinLevel===0)return this.nextMinLevel=n,void(this.nextMinLevelWindowLength=1);if(this.nextMinLevel>n&&(this.nextMinLevel=n),this.nextMinLevelWindowLength++,this.nextMinLevelWindowLength>=750){let o=Math.sqrt(this.minLevel*this.nextMinLevel);o<0?o=0:o>e2&&(o=e2),this.minLevel=o,this.nextMinLevel=0,this.nextMinLevelWindowLength=0}}}}class wSe{constructor(n){Xe(this,"algorithm",void 0),this.algorithm=n}execute(){let n=!this.algorithm;if(!n)try{const o=this.algorithm.runInDecisionMaker(this);o<=0?n=!0:setTimeout(this.execute.bind(this),o)}catch{n=!0}n&&this.algorithm&&this.algorithm.decisionMakerExited(this)}}class Y5{constructor(n,o,a){Xe(this,"isDominant",void 0),Xe(this,"energyRanking",void 0),Xe(this,"energyScore",void 0),this.isDominant=n,this.energyRanking=o,this.energyScore=a}}class SSe extends Mi{constructor(n){super(),Xe(this,"dominantId",null),Xe(this,"lastDecisionTime",0),Xe(this,"lastLevelChangedTime",0),Xe(this,"lastLevelIdleTime",0),Xe(this,"relativeSpeechActivities",[]),Xe(this,"speakers",new Map),Xe(this,"enableSilence",!1),Xe(this,"timeoutToSilenceInterval",0),Xe(this,"decisionMaker",null),Xe(this,"loudest",[]),Xe(this,"numLoudestToTrack",3),Xe(this,"energyExpireTimeMs",250),Xe(this,"energyAlphaPct",50),this.timeoutToSilenceInterval=n,this.enableSilence=n>0,this.relativeSpeechActivities.length=3}setLoudestConfig(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;this.numLoudestToTrack=n,o!=null&&(this.energyExpireTimeMs=o),a!=null&&(this.energyAlphaPct=a),this.loudest.length>n&&this.loudest.splice(n)}getDominantSpeaker(){return this.dominantId}isAmongLoudest(n){return this.loudest.some(o=>o.id===n)}levelChanged(n,o){const a=Date.now(),l=this.getOrCreateSpeaker(n);this.lastLevelChangedTime<a&&(this.lastLevelChangedTime=a,this.maybeStartDecisionMaker());const d=l.levelChanged(o,a);return this.updateLoudestList(l,d,a)}runInDecisionMaker(n){return this.decisionMaker!==n||this.lastDecisionTime>0&&this.lastDecisionTime-this.lastLevelChangedTime>=15e3?-1:this._runInDecisionMaker()}decisionMakerExited(n){this.decisionMaker===n&&(this.decisionMaker=null)}destroy(){this.decisionMaker=null,this.loudest.length=0,this.speakers.clear(),this.removeAllListeners()}addSpeakers(n){n.forEach(o=>{this.speakers.has(o.id)||this.speakers.set(o.id,o)})}removeSpeakers(n){n.forEach(o=>{this.speakers.delete(o.id)})}getOrCreateSpeaker(n){let o=this.speakers.get(n);return o||(o=new Oq(n),this.speakers.set(n,o),this.maybeStartDecisionMaker()),o}updateLoudestList(n,o,a){const l=n.id===this.dominantId;if(o<0){let _=0;for(;_<this.loudest.length&&this.loudest[_]!==n;)++_;return new Y5(l,_,n.energyScore)}if(n.energyScore=Math.floor((this.energyAlphaPct*o+(100-this.energyAlphaPct)*n.energyScore+50)/100),this.numLoudestToTrack===0)return new Y5(l,0,n.energyScore);const d=a-this.energyExpireTimeMs;let h=0;for(;h<this.loudest.length;){const _=this.loudest[h];if(_.getLastLevelChangedTime()<d&&this.loudest.length>=this.numLoudestToTrack)this.loudest.splice(h,1);else if(_.id!==n.id)++h;else if(this.loudest.splice(h,1),this.loudest.length<this.numLoudestToTrack)break}let v=0;for(;v<this.loudest.length&&!(this.loudest[v].energyScore<n.energyScore);)++v;return v<this.numLoudestToTrack&&(this.loudest.splice(v,0,n),this.loudest.length>this.numLoudestToTrack&&this.loudest.splice(this.numLoudestToTrack,1)),new Y5(l,v,n.energyScore)}maybeStartDecisionMaker(){!this.decisionMaker&&this.speakers.size>0&&(this.decisionMaker=new wSe(this),this.decisionMaker.execute())}makeDecision(n){let o=null,a=null;const l=this.speakers.size;let d=null;if(l===0)d=null;else if(l===1){var h;const v=Jl(h=this.speakers).call(h).next().value;this.enableSilence&&v&&(d=v.id,v.evaluateSpeechActivityScores(n),n-v.lastNonSilence>this.timeoutToSilenceInterval&&(d=null))}else{let v=this.dominantId==null?null:this.speakers.get(this.dominantId);if(v==null){const C=this.speakers.entries().next();C.value&&(d=C.value[0],v=C.value[1])}else d=v.id;v!=null&&v.evaluateSpeechActivityScores(n);const _=this.relativeSpeechActivities;let y=2;for(const C of this.speakers.entries()){const[B,L]=C;if(L===v)continue;L.evaluateSpeechActivityScores(n);for(let q=0;q<_.length;++q){const Ae=v==null?o1:v.getSpeechActivityScore(q);_[q]=Math.log(L.getSpeechActivityScore(q)/Ae)}const x=_[0],X=_[1],G=_[2];x>3&&X>2&&G>0&&X>y&&(y=X,d=B)}this.enableSilence&&v!=null&&d===v.id&&n-v.lastNonSilence>this.timeoutToSilenceInterval&&(d=null)}d==null&&!this.enableSilence||d===this.dominantId||(o=this.dominantId,this.dominantId=d,a=this.dominantId),a==null&&!this.enableSilence||a===o||this.emit("ActiveSpeakerChanged",a)}_runInDecisionMaker(){const n=Date.now(),o=300-(n-this.lastLevelIdleTime);let a=0;o<=0?(this.lastLevelIdleTime!==0&&this.timeoutIdleLevels(n),this.lastLevelIdleTime=n):a=o;let l=300-(n-this.lastDecisionTime);return l<=0&&(this.lastDecisionTime=n,this.makeDecision(n),l=300-(Date.now()-n)),l>0&&a>l&&(a=l),a}timeoutIdleLevels(n){const o=[];for(const l of Jl(a=this.speakers).call(a)){var a;const d=n-l.getLastLevelChangedTime();36e5<d&&(this.dominantId==null||l.id!==this.dominantId)?o.push(l.id):300<d&&l.levelTimedOut()}o.forEach(l=>this.speakers.delete(l))}}const By=new Map;let $f=null,r2=null;const Nq=3;let s1=[];const zf=new Map,n2=new Map;class bSe{get samples(){return this.actives+this.inactives}get activeRate(){return this.actives/this.samples}constructor(n,o){Xe(this,"id",void 0),Xe(this,"track",void 0),Xe(this,"score",0),Xe(this,"active",!0),Xe(this,"muted",!1),Xe(this,"timer",0),Xe(this,"actives",0),Xe(this,"inactives",0),this.id=n,this.track=o,this.setActive(zf.size<3)}autoCheckActive(){this.autoSetActive(),this.autoAdjustActive(),this.resetTimer(),this.actives=0,this.inactives=0}autoSetActive(){const n=this.active;this.active=this.activeRate>=.8;const{actives:o,inactives:a}=function(){const l=[],d=[];return Array.from(Jl(zf).call(zf)).forEach(h=>{h.active?l.push(h):d.push(h)}),{actives:l,inactives:d}}();if(o.length>3){let l;o.forEach(d=>{(!l||l.score>d.score)&&(l=d)}),l&&l.setActive(!1)}if(o.length<3&&a.length>0){let l;a.forEach(d=>{(!l||l.score<d.score)&&d.id!==this.id&&(l=d)}),l&&n&&!this.active&&(l.samples>40&&l.activeRate-this.activeRate>.4?l.setActive(!0):this.active=!0)}this.setMuted(!this.active)}setActive(n){this.active=n,this.resetTimer(),this.setMuted(!n)}autoAdjustActive(){this.active?this.autoSwitchToInactive():this.autoSwitchToActive()}autoSwitchToActive(){const n=function(o){let a;return Array.from(Jl(zf).call(zf)).forEach(l=>{!l.active||l.id===o||l.samples<40||(!a||l.score<a.score)&&(a=l)}),a}(this.id);n&&this.activeRate-n.activeRate>.4&&(n.setActive(!1),this.setActive(!0))}autoSwitchToInactive(){const n=function(o){let a;return Array.from(Jl(zf).call(zf)).forEach(l=>{l.active||l.id===o||l.samples<40||(!a||l.score>a.score)&&(a=l)}),a}(this.id);n&&n.activeRate-this.activeRate>.4&&(n.setActive(!0),this.setActive(!1))}addSample(n){n?this.actives+=1:this.inactives+=1,this.samples>66.66666666666667&&this.autoCheckActive()}setMuted(n){this.track&&(this.track.enabled=!n,this.muted=n)}resetTimer(){this.clearTimer(),this.timer=window.setTimeout(()=>{if(this.samples!==0)return this.samples<50?this.resetTimer():void this.autoCheckActive()},1e3)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=0)}}let i2;function Bq(r){const n=zf.get(r);n&&(zf.delete(r),n.clearTimer())}const o2=new Map,CSe=new Map,X5="video/h264",J5="video/h265";function Lq(r,n,o){let a=new Uint8Array(r,n,o),l=[],d=0;for(;l.length<o;)d+3<o&&a[d]===0&&a[d+1]===0&&a[d+2]===3&&(a[d+3]===0||a[d+3]===1||a[d+3]===2||a[d+3]===3)?(l.push(a[d],a[d+1],a[d+3]),d+=4):(l.push(a[d]),d++);return new Uint8Array(l)}function Pq(r){const n=r.length;let o=[],a=0;for(;a<n;)a+2<n&&r[a]===0&&r[a+1]===0&&(r[a+2]===0||r[a+2]===1||r[a+2]===2||r[a+2]===3)?(o.push(r[a],r[a+1],3,r[a+2]),a+=3):(o.push(r[a]),a++);return new Uint8Array(o)}function kq(r){if(r.length<5)return"";let n=-1;for(let l=0;l<r.length-3;l++){if(r[l]===0&&r[l+1]===0&&r[l+2]===1){n=l;break}if(l<r.length-4&&r[l]===0&&r[l+1]===0&&r[l+2]===0&&r[l+3]===1){n=l;break}}if(n===-1)return"";const o=n+(r[n+2]===0?4:3);if(o>=r.length)return"";const a=r[o];return 128&a?"":(a>>1&63)>=32||o+1<r.length&&!(248&r[o+1])?J5:(31&a)<=31?X5:""}const s2=new Map,US=new Map;(function(){const r=hn();ks.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),ks.getStreamFromExtension=r.name===Sn.CHROME&&Number(r.version)>34,ks.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const n=new RTCPeerConnection;let o=!1;try{n.addTransceiver("audio"),o=!0}catch{}return n.close(),o}(),ks.supportMinBitrate=r.name===Sn.CHROME||r.name===Sn.EDGE,ks.supportSetRtpSenderParameters=function(){const n=hn();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Dg()||!(!Js()&&!DI())||n.name===Sn.FIREFOX&&Number(n.version)>=64)}(),r.name===Sn.SAFARI&&(Number(r.version)>=14?ks.supportDualStream=!0:ks.supportDualStream=!1),ks.webAudioMediaStreamDest=function(){const n=hn();return!(n.name===Sn.SAFARI&&Number(n.version)<12)}(),ks.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",ks.supportWebGL=typeof WebGLRenderingContext<"u",ks.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Dg()||(ks.webAudioWithAEC=!0),ks.supportShareAudio=function(){const n=hn();return(n.os===is.WIN_10||n.os===is.WIN_81||n.os===is.WIN_7||n.os===is.LINUX||n.os===is.MAC_OS||n.os===is.CHROMIUM_OS)&&n.name===Sn.CHROME&&Number(n.version)>=74}(),ks.supportDataChannel=!!(fy(76)||n5(68)||PG(14)),ks.supportPCSetConfiguration=function(){const n=window.RTCPeerConnection;return!Hi()&&!!n&&n.prototype.setConfiguration instanceof Function}(),ks.supportWebRTCEncodedTransform=fy(87)||NG()||n5(117),ks.supportWebRTCInsertableStream=function(){const n=hn();return(n.name===Sn.CHROME||n.name===Sn.EDGE)&&Number(n.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),ks.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,ks.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,MI(()=>{ks.supportDualStreamEncoding=function(){const n=hn();return!!me("DISABLE_WEBAUDIO")||n.name==="Safari"&&Number(n.version)>=14||!!(n.name==="Chrome"&&/Windows/i.test(n.os||"")&&Number(n.version)>=100&&me("CHROME_DUAL_STREAM_USE_ENCODING"))}(),H.debug("browser ua: ",navigator.userAgent),H.info("browser info: ",r),H.info("browser compatibility: ",ks)})})();const TSe=["CHINA","GLOBAL"],Dq=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],a1=[],Ly=[];function c1(r,n){return!!n&&a1.some(o=>o.uid===r&&o.channelName===n)}function Z5(){return Ly.length>0}var RSe=YK.forEach,xq=Cs("forEach")?[].forEach:function(r){return RSe(this,r,arguments.length>1?arguments[1]:void 0)};Ye({target:"Array",proto:!0,forced:[].forEach!==xq},{forEach:xq});var ISe=Po("Array","forEach"),OSe=fo,NSe=Di,BSe=N,LSe=ISe,eU=Array.prototype,PSe={DOMTokenList:!0,NodeList:!0},kSe=function(r){var n=r.forEach;return r===eU||BSe(eU,r)&&n===eU.forEach||NSe(PSe,OSe(r))?LSe:n},DSe=c(kSe),xSe=Ks,Uq=Ie;Ye({target:"Object",stat:!0,forced:u(function(){Uq(1)})},{keys:function(r){return Uq(xSe(r))}});var USe=c(Nt.Object.keys),MSe=c(lA),FSe=c(O0),VSe=Ye,Mq=mu,QSe=mA,HSe=qt,Fq=Ao,jSe=Ss,KSe=He,WSe=xD,GSe=Bn,$Se=Xl,zSe=VK("slice"),qSe=GSe("species"),tU=Array,YSe=Math.max;VSe({target:"Array",proto:!0,forced:!zSe},{slice:function(r,n){var o,a,l,d=KSe(this),h=jSe(d),v=Fq(r,h),_=Fq(n===void 0?h:n,h);if(Mq(d)&&(o=d.constructor,(QSe(o)&&(o===tU||Mq(o.prototype))||HSe(o)&&(o=o[qSe])===null)&&(o=void 0),o===tU||o===void 0))return $Se(d,v,_);for(a=new(o===void 0?tU:o)(YSe(_-v,0)),l=0;v<_;v++,l++)v in d&&WSe(a,l,d[v]);return a.length=l,a}});var XSe=Po("Array","slice"),JSe=N,ZSe=XSe,rU=Array.prototype,ebe=function(r){var n=r.slice;return r===rU||JSe(rU,r)&&n===rU.slice?ZSe:n},tbe=c(ebe);function tr(r,n,o,a,l){var d,h,v,_={};return DSe(d=USe(a)).call(d,function(y){_[y]=a[y]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=MSe(h=FSe(v=tbe(o).call(o)).call(v)).call(h,function(y,C){return C(r,n,y)||y},_),l&&_.initializer!==void 0&&(_.value=_.initializer?_.initializer.call(l):void 0,_.initializer=void 0),_.initializer===void 0?(xK(r,n,_),null):_}let a2=function(r){return r[r.ACCESS_POINT=101]="ACCESS_POINT",r[r.UNILBS=201]="UNILBS",r[r.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",r}({}),nU=function(r){return r[r.IIIEGAL_APPID=1]="IIIEGAL_APPID",r[r.IIIEGAL_UID=2]="IIIEGAL_UID",r[r.INTERNAL_ERROR=3]="INTERNAL_ERROR",r}({}),Td=function(r){return r[r.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",r[r.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",r[r.INTERNAL_ERROR=8]="INTERNAL_ERROR",r[r.NO_AUTHORIZED=9]="NO_AUTHORIZED",r[r.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",r[r.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",r[r.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",r[r.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",r[r.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",r[r.USER_OVERLOAD=16]="USER_OVERLOAD",r[r.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",r[r.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",r}({}),bc=function(r){return r[r.NO_FLAG_SET=100]="NO_FLAG_SET",r[r.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",r[r.INVALID_FALG_SET=102]="INVALID_FALG_SET",r[r.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",r[r.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",r[r.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",r[r.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",r[r.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",r[r.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",r[r.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",r[r.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",r[r.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",r[r.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",r[r.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",r[r.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",r[r.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",r[r.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",r[r.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",r[r.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",r}({}),fr=function(r){return r[r.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",r[r.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",r[r.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",r[r.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",r[r.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",r[r.K_TICKET_INVALID=7]="K_TICKET_INVALID",r[r.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",r[r.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",r[r.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",r[r.K_UID_BANNED=14]="K_UID_BANNED",r[r.K_IP_BANNED=15]="K_IP_BANNED",r[r.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",r[r.DATASTREAM2_NOT_AVAILABLE=27]="DATASTREAM2_NOT_AVAILABLE",r[r.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",r[r.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",r[r.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",r[r.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",r[r.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",r[r.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",r[r.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",r[r.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",r[r.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",r[r.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",r[r.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",r[r.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",r[r.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",r[r.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",r[r.ERR_INVALID_UID=117]="ERR_INVALID_UID",r[r.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",r[r.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",r[r.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",r[r.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",r[r.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",r[r.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",r[r.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",r[r.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",r[r.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",r[r.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",r[r.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",r[r.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",r[r.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",r[r.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",r[r.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",r[r.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",r[r.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",r[r.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",r[r.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",r[r.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",r[r.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",r[r.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",r[r.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",r[r.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",r[r.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",r[r.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",r[r.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",r[r.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",r[r.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",r[r.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",r[r.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",r[r.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",r[r.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",r[r.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",r[r.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",r[r.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",r[r.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",r}({}),Ai=function(r){return r.CONNECTING="connecting",r.CONNECTED="connected",r.RECONNECTING="reconnecting",r.CLOSED="closed",r}({}),Br=function(r){return r.WS_CONNECTED="ws_connected",r.WS_RECONNECTING="ws_reconnecting",r.WS_CLOSED="ws_closed",r.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",r.ON_BINARY_DATA="on_binary_data",r.REQUEST_RECOVER="request_recover",r.REQUEST_JOIN_INFO="request_join_info",r.REQUEST_REJOIN_INFO="req_rejoin_info",r.IS_P2P_DISCONNECTED="is_p2p_dis",r.DISCONNECT_P2P="dis_p2p",r.ABORT_P2P_EXECUTION="abort_p2p_execution",r.NEED_RENEW_SESSION="need-sid",r.REPORT_JOIN_GATEWAY="report_join_gateway",r.REQUEST_TIMEOUT="request_timeout",r.REQUEST_SUCCESS="request_success",r.JOIN_RESPONSE="join_response",r.PRE_CONNECT_PC="pre_connect_pc",r.P2P_CONNECTION="p2p_connection",r.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",r.P2P_SUBSCRIBE="p2p_subscribe",r.P2P_UNSUBSCRIBE="p2p_unsubscribe",r.P2P_EXCHANGE_SDP="p2p_exchange_sdp",r.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",r.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",r.RECOVER_NOTIFICATION="recover_notification",r}({}),Cr=function(r){return r.PING="ping",r.PING_BACK="ping_back",r.JOIN="join_v3",r.REJOIN="rejoin_v3",r.LEAVE="leave",r.SET_CLIENT_ROLE="set_client_role",r.PUBLISH="publish",r.PUBLISH_DATASTREAM="publish_datastream",r.UNPUBLISH="unpublish",r.UNPUBLISH_DATASTREAM="unpublish_datastream",r.SUBSCRIBE="subscribe",r.PRE_SUBSCRIBE="pre_subscribe",r.SUBSCRIBE_DATASTREAM="subscribe_datastream",r.SUBSCRIBE_STREAMS="subscribe_streams",r.UNSUBSCRIBE="unsubscribe",r.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",r.UNSUBSCRIBE_STREAMS="unsubscribe_streams",r.SUBSCRIBE_CHANGE="subscribe_change",r.TRAFFIC_STATS="traffic_stats",r.RENEW_TOKEN="renew_token",r.SWITCH_VIDEO_STREAM="switch_video_stream",r.DEFAULT_VIDEO_STREAM="default_video_stream",r.SET_FALLBACK_OPTION="set_fallback_option",r.GATEWAY_INFO="gateway_info",r.CONTROL="control",r.SEND_METADATA="send_metadata",r.DATA_STREAM="data_stream",r.PICK_SVC_LAYER="pick_svc_layer",r.RESTART_ICE="restart_ice",r.CONNECT_PC="connect_pc",r.SET_VIDEO_PROFILE="set_video_profile",r.SET_PARAMETER="set_parameter",r.SET_RTM2_FLAG="set_rtm2_flag",r.DOWNGRADE_CODEC="downgrade_codec",r}({}),MS=function(r){return r.WRTC_STATS="wrtc_stats",r.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",r.DENOISER_STATS="denoiser_stats",r.EXTENSION_USAGE_STATS="extension_usage_stats",r}({}),An=function(r){return r.ON_USER_ONLINE="on_user_online",r.ON_USER_OFFLINE="on_user_offline",r.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",r.ON_PUBLISH_STREAM="on_publish_stream",r.ON_UPLINK_STATS="on_uplink_stats",r.ON_P2P_LOST="on_p2p_lost",r.ON_REMOVE_STREAM="on_remove_stream",r.ON_ADD_AUDIO_STREAM="on_add_audio_stream",r.ON_ADD_VIDEO_STREAM="on_add_video_stream",r.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",r.ON_USER_BANNED="on_user_banned",r.ON_USER_LICENSE_BANNED="on_user_license_banned",r.ON_NOTIFICATION="on_notification",r.ON_CRYPT_ERROR="on_crypt_error",r.MUTE_AUDIO="mute_audio",r.MUTE_VIDEO="mute_video",r.UNMUTE_AUDIO="unmute_audio",r.UNMUTE_VIDEO="unmute_video",r.ON_P2P_OK="on_p2p_ok",r.RECEIVE_METADATA="receive_metadata",r.ON_DATA_STREAM="on_data_stream",r.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",r.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",r.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",r.ENABLE_LOCAL_VIDEO="enable_local_video",r.DISABLE_LOCAL_VIDEO="disable_local_video",r.ENABLE_LOCAL_AUDIO="enable_local_audio",r.DISABLE_LOCAL_AUDIO="disable_local_audio",r.ON_PUBLISHED_USER_LIST="on_published_user_list",r}({}),Cc=function(r){return r.SEND_ONLY="SEND_ONLY",r.RECEIVE_ONLY="RECEIVE_ONLY",r}({}),jr=function(r){return r.CONNECTED="websocket:connected",r.RECONNECTING="websocket:reconnecting",r.WILL_RECONNECT="websocket:will_reconnect",r.CLOSED="websocket:closed",r.FAILED="websocket:failed",r.ON_MESSAGE="websocket:on_message",r.REQUEST_NEW_URLS="websocket:request_new_urls",r.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",r}({});function c2(r){if(typeof r!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(r))throw H.error("Invalid Channel Name ".concat(r)),new Je(de.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function l2(r){if(n=r,!(typeof n=="number"&&Math.floor(n)===n&&0<=n&&n<=4294967295||QG(r,1,255)))throw new Je(de.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var n;typeof r=="string"&&H.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let yp=function(r){return r.TRANSCODE="mix_streaming",r.RAW="raw_streaming",r}({});const rbe={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},iU={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function oU(r,n){Ls(r.url,"".concat(n,".url"),1,1e3,!1),ji(r.x)||Xn(r.x,"".concat(n,".x"),0,1e4),ji(r.y)||Xn(r.y,"".concat(n,".y"),0,1e4),ji(r.width)||Xn(r.width,"".concat(n,".width"),0,1e4),ji(r.height)||Xn(r.height,"".concat(n,".height"),0,1e4),ji(r.zOrder)||Xn(r.zOrder,"".concat(n,".zOrder"),0,255),ji(r.alpha)||Xn(r.alpha,"".concat(n,".alpha"),0,1,!1)}const nbe={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let sv=function(r){return r.WARNING="@live_uap-warning",r.ERROR="@line_uap-error",r.PUBLISH_STREAM_STATUS="@live_uap-publish-status",r.WORKER_STATUS="@live_uap-worker-status",r.REQUEST_NEW_ADDRESS="@live_uap-request-address",r}({}),sU=function(r){return r.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",r}({}),Mo=function(r){return r[r.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",r[r.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",r[r.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",r[r.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",r[r.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",r[r.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",r[r.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",r[r.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",r[r.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",r[r.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",r[r.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",r[r.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",r[r.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",r[r.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",r[r.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",r[r.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",r[r.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",r[r.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",r}({});function Vq(r){if(!r.channelName)throw new Je(de.INVALID_PARAMS,"invalid channelName in info");if(typeof r.uid!="number")throw new Je(de.INVALID_PARAMS,"invalid uid in info, uid must be a number");return r.token&&Ls(r.token,"info.token",1,2047),l2(r.uid),c2(r.channelName),!0}let Tc=function(r){return r[r.SetSdkProfile=0]="SetSdkProfile",r[r.SetSourceChannel=1]="SetSourceChannel",r[r.SetSourceUserId=2]="SetSourceUserId",r[r.SetDestChannel=3]="SetDestChannel",r[r.StartPacketTransfer=4]="StartPacketTransfer",r[r.StopPacketTransfer=5]="StopPacketTransfer",r[r.UpdateDestChannel=6]="UpdateDestChannel",r[r.Reconnect=7]="Reconnect",r[r.SetVideoProfile=8]="SetVideoProfile",r}({}),Ug=function(r){return r.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",r.NETWORK_CONNECTED="NETWORK_CONNECTED",r.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",r.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",r.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",r.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",r.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",r.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",r.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",r.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",r}({}),bl=function(r){return r.RELAY_STATE_IDLE="RELAY_STATE_IDLE",r.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",r.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",r.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",r}({}),Py=function(r){return r.RELAY_OK="RELAY_OK",r.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",r.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",r.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",r}({}),Fn=function(r){return r.High="high",r.Low="low",r.Audio="audio",r.Screen="screen",r.ScreenLow="screen_low",r}({}),fs=function(r){return r.DISCONNECT="disconnect",r.CONNECTION_STATE_CHANGE="connection-state-change",r.NETWORK_QUALITY="network-quality",r.STREAM_TYPE_CHANGE="stream-type-change",r.IS_P2P_DISCONNECTED="is-p2p-dis",r.DISCONNECT_P2P="dis-p2p",r.REQUEST_NEW_GATEWAY_LIST="req-gate-url",r.NEED_RENEW_SESSION="need-sid",r.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",r.JOIN_RESPONSE="join-response",r.RESET_CONNECTION_EVENTS="reset-connection-events",r.PRE_CONNECT_PC="pre-connect_pc",r.UPDATE_GATEWAY_CONFIG="update-gateway-config",r}({}),u2=function(r){return r.P2P_DISCONNECTED="P2P_DISCONNECTED",r.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",r.TIMEOUT="TIMEOUT",r.UNKNOWN_REASON="UNKNOWN_REASON",r}({}),os=function(r){return r[r.Nothing=0]="Nothing",r[r.Audio=1]="Audio",r[r.LwoVideo=2]="LwoVideo",r[r.Video=4]="Video",r[r.Data=8]="Data",r[r.DataStream0=256]="DataStream0",r[r.DataStream1=512]="DataStream1",r[r.DataStream2=1024]="DataStream2",r[r.DataStream3=2048]="DataStream3",r[r.DataStream4=4096]="DataStream4",r[r.DataStream5=8192]="DataStream5",r[r.DataStream6=16384]="DataStream6",r[r.DataStream7=32768]="DataStream7",r}({}),Nn=function(r){return r.CHINA="CHINA",r.ASIA="ASIA",r.NORTH_AMERICA="NORTH_AMERICA",r.EUROPE="EUROPE",r.JAPAN="JAPAN",r.INDIA="INDIA",r.KOREA="KOREA",r.HKMC="HKMC",r.US="US",r.OCEANIA="OCEANIA",r.SOUTH_AMERICA="SOUTH_AMERICA",r.AFRICA="AFRICA",r.OVERSEA="OVERSEA",r.GLOBAL="GLOBAL",r.EXTENSIONS="EXTENSIONS",r}({});const Qq=[Nn.AFRICA,Nn.ASIA,Nn.CHINA,Nn.EUROPE,Nn.GLOBAL,Nn.INDIA,Nn.JAPAN,Nn.NORTH_AMERICA,Nn.OCEANIA,Nn.OVERSEA,Nn.SOUTH_AMERICA];let va=function(r){return r.CHINA="CN",r.ASIA="AS",r.NORTH_AMERICA="NA",r.EUROPE="EU",r.JAPAN="JP",r.INDIA="IN",r.KOREA="KR",r.HKMC="HK",r.US="US",r.OCEANIA="OC",r.SOUTH_AMERICA="SA",r.AFRICA="AF",r.OVERSEA="OVERSEA",r.GLOBAL="GLOBAL",r.EXTENSIONS="GLOBAL",r}({});const A2={CHINA:{},ASIA:{CODE:va.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:va.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:va.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:va.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:va.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:va.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:va.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:va.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:va.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:va.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:va.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:va.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:va.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};S5&&(A2.CHINA={CODE:va.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let FS=function(r){return r.UPDATE_BITRATE_LIMIT="update_bitrate_limit",r.UPDATE_CLIENT_ROLE_OPTIONS="update_client_role_options",r}({});function Hq(r){return!!r&&!(!r.uplink||!r.id)&&r.uplink.max_bitrate!==void 0&&r.uplink.min_bitrate!==void 0}class jq extends Mi{constructor(n,o){super(),re(this,"onICEConnectionStateChange",void 0),re(this,"onConnectionStateChange",void 0),re(this,"onDTLSTransportStateChange",void 0),re(this,"onDTLSTransportError",void 0),re(this,"onICETransportStateChange",void 0),re(this,"onFirstAudioReceived",void 0),re(this,"onFirstVideoReceived",void 0),re(this,"onFirstAudioDecoded",void 0),re(this,"onFirstVideoDecoded",void 0),re(this,"onFirstVideoRender",void 0),re(this,"onFirstVideoDecodedTimeout",void 0),re(this,"onSelectedLocalCandidateChanged",void 0),re(this,"onSelectedRemoteCandidateChanged",void 0),re(this,"onICECandidateError",void 0),re(this,"getLocalVideoStats",void 0)}}class Kq extends jq{constructor(n,o){super(n,o),re(this,"establishPromise",void 0)}}let jt=function(r){return r.VIDEO="video",r.AUDIO="audio",r}({}),_a=function(r){return r.UDP_RELAY="udp_relay",r.UDP_TCP_RELAY="udp_tcp_relay",r.TCP_RELAY="tcp_relay",r.RELAY="relay",r}({}),Mg=function(r){return r[r.FIRST_CONNECTION=0]="FIRST_CONNECTION",r[r.UDP_TCP_RESTART=1]="UDP_TCP_RESTART",r[r.RELAY_RESTART=2]="RELAY_RESTART",r[r.TCP_RESTART=3]="TCP_RESTART",r[r.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",r[r.OLD_RESTART=11]="OLD_RESTART",r[r.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",r}({});const Wq=["disconnected","failed"];let mt=function(r){return r.LocalVideoTrack="videoTrack",r.LocalAudioTrack="audioTrack",r.LocalVideoLowTrack="videoLowTrack",r}({}),xn=function(r){return r.New="new",r.Connected="connected",r.Reconnecting="reconnecting",r.Disconnected="disconnected",r}({}),cr=function(r){return r.AudioMetadata="audioMetadata",r.AudioPts="audioPts",r.StateChange="stateChange",r.IceConnectionStateChange="iceConnectionStateChange",r.RequestMuteLocal="requestMuteLocal",r.RequestUnmuteLocal="requestUnmuteLocal",r.RequestRePublish="requestRePublish",r.RequestRePublishDataChannel="requestRePublishDataChannel",r.RequestReSubscribe="requestReSubscribe",r.RequestUploadStats="requestUploadStats",r.RequestUpload="requestUpload",r.MediaReconnectStart="MediaReconnectStart",r.MediaReconnectEnd="MediaReconnectEnd",r.NeedSignalRTT="NeedSignalRTT",r.RequestRestartICE="RequestRestartIce",r.PeerConnectionStateChange="PeerConnectionStateChange",r.RequestReconnect="RequestReconnect",r.RequestReconnectPC="RequestReconnectPC",r.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",r.P2PLost="P2PLost",r.UpdateVideoEncoder="UpdateVideoEncoder",r.ConnectionTypeChange="ConnectionTypeChange",r.RequestLowStreamParameter="RequestLowStreamParameter",r.QueryClientConnectionState="QueryClientConnectionState",r.LocalCandidate="LocalCandidate",r.RequestP2PMuteLocal="requestP2PMuteLocal",r.RequestP2PUnPublish="RequestP2PUnPublish",r.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",r.RequestP2PMuteRemote="RequestP2PMuteRemote",r.RequestP2PRestartICE="RequestP2PRestartICE",r}({}),Rd=function(r){return r.CONNECTING="CONNECTING",r.RECONNECTING="RECONNECTING",r.CONNECTED="CONNECTED",r.CLOSED="CLOSED",r}({}),Id=function(r){return r[r.CONNECT_AP=0]="CONNECT_AP",r[r.AP_CONNECTED=1]="AP_CONNECTED",r[r.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",r[r.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",r[r.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",r[r.CONNECT_WORKER=5]="CONNECT_WORKER",r[r.WORKER_CONNECTED=6]="WORKER_CONNECTED",r[r.CLOSED=7]="CLOSED",r}({}),hs=function(r){return r.CONNECTION_STATE_CHANGE="connection-state-change",r.STATE_CHANGE="state-change",r.INSPECT_RESULT="inspect-result",r.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",r.REQUEST_NEW_WORKER_URL="request-new-worker-url",r}({}),Gq=function(r){return r.CONNECTED="transmitter:connected",r.RECONNECTING="transmitter:reconnecting",r.WILL_RECONNECT="transmitter:will_reconnect",r.CLOSED="transmitter:closed",r.FAILED="transmitter:failed",r.ON_MESSAGE="transmitter:on_message",r.REQUEST_NEW_URLS="transmitter:request_new_urls",r.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",r.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",r.FAILBACK="transmitter:failback",r.PRE_CONNECT_PC="transmitter:pre_connect_pc",r}({}),Ep=function(r){return r.CAMERA_CHANGED="camera-changed",r.MICROPHONE_CHANGED="microphone-changed",r.PLAYBACK_DEVICE_CHANGED="playback-device-changed",r.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",r.AUTOPLAY_FAILED="autoplay-failed",r.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",r.SECURITY_POLICY_VIOLATION="security-policy-violation",r}({}),bA=function(r){return r.CONNECTING="CONNECTING",r.RECONNECTING="RECONNECTING",r.CONNECTED="CONNECTED",r.CLOSED="CLOSED",r}({}),qf=function(r){return r.CONNECTION_STATE_CHANGE="connection-state-change",r.STATE_CHANGE="state-change",r.INSPECT_RESULT="inspect-result",r.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",r.REQUEST_NEW_WORKER_URL="request-new-worker-url",r}({}),ky=function(r){return r[r.CONNECT_AP=0]="CONNECT_AP",r[r.AP_CONNECTED=1]="AP_CONNECTED",r[r.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",r[r.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",r[r.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",r[r.CONNECT_WORKER=5]="CONNECT_WORKER",r[r.WORKER_CONNECTED=6]="WORKER_CONNECTED",r[r.CLOSED=7]="CLOSED",r}({}),ao=function(r){return r.CALL="call",r.CANDIDATE="candidate",r.PUBLISH="publish",r.UNPUBLISH="unpublish",r.CONTROL="control",r.RESTART_ICE="restart_ice",r.ACK="ack",r.RESPONSE="response",r.JOIN="join",r.CHECK="check",r}({}),Dy=function(r){return r.ABORT="abort",r}({}),av=function(r){return r.MUTE_LOCAL_AUDIO="mute_local_audio",r.MUTE_LOCAL_VIDEO="mute_local_video",r.UNMUTE_LOCAL_AUDIO="unmute_local_audio",r.UNMUTE_LOCAL_VIDEO="unmute_local_video",r}({}),ibe=function(r){return r.P2P_TOKEN_TIMEOUT="p2p_token_timeout",r.P2P_TOKEN_CHANGED="p2p_token_changed",r}({});const obe={[a2.ACCESS_POINT]:{[bc.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[bc.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[bc.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[bc.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[bc.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[bc.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[bc.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[a2.UNILBS]:{[Td.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Td.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Td.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Td.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Td.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Td.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Td.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Td.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Td.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Td.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Td.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Td.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[a2.STRING_UID_ALLOCATOR]:{[nU.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[nU.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[nU.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function xy(r){const n=obe[Math.floor(r/1e4)];if(!n)return{desc:"unknown error",retry:!1};const o=n[r%1e4];if(!o){if(Math.floor(r/1e4)===a2.ACCESS_POINT){const a=r%1e4;if(a.toString()[0]==="1")return{desc:r.toString(),retry:!1};if(a.toString()[0]==="2")return{desc:r.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return o}const sbe={[fr.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[fr.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[fr.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[fr.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[fr.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[fr.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[fr.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[fr.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[fr.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[fr.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[fr.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[fr.DATASTREAM2_NOT_AVAILABLE]:{desc:"DATASTREAM2_NOT_AVAILABLE",action:"quit"},[fr.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[fr.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[fr.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[fr.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[fr.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[fr.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[fr.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[fr.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[fr.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[fr.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[fr.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[fr.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[fr.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[fr.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[fr.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[fr.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[fr.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[fr.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[fr.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[fr.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[fr.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[fr.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[fr.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[fr.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[fr.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[fr.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[fr.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[fr.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[fr.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[fr.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[fr.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[fr.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[fr.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[fr.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[fr.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[fr.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[fr.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[fr.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[fr.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[fr.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[fr.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[fr.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[fr.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[fr.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[fr.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[fr.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[fr.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[fr.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[fr.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[fr.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[fr.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[fr.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function VS(r){return sbe[r]||{desc:"UNKNOWN_ERROR_".concat(r),action:"failed"}}function $q(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function aU(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?$q(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):$q(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}function cU(r,n){if(typeof r=="string")return r;const{proxy:o,host:a,port:l}=r;if(n){const d=me("JOIN_GATEWAY_FALLBACK_PORT")||443;return d===443?"wss://".concat(a,"/ws/?p=").concat(Number(l)+150):"wss://".concat(a,":").concat(d,"/ws/?p=").concat(Number(l)+150)}return o?"wss://".concat(o,"/ws/?h=").concat(a,"&p=").concat(l):"wss://".concat(a,":").concat(l)}const abe=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,cbe=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,lbe=/wss:\/\/(.+):([0-9]+)\/?/,ube=/wss:\/\/(.[^\/]+)\/?/;let Abe=0;class dbe{constructor(n,o){re(this,"id",0),re(this,"store",void 0),re(this,"recordIndex",void 0),re(this,"websockets",[]),re(this,"try443PortDuration",2e3),re(this,"forceCloseWSDuration",5e3),re(this,"try443PortTimeout",null),re(this,"forceCloseTimeout",null),re(this,"isTry443PortFailed",!1),re(this,"isNormalPortFailed",!1),re(this,"useDoubleDomain",!1),re(this,"useProxy",!1),re(this,"startTime",Date.now()),this.id=++Abe,this.try443PortDuration=me("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=n||5e3,this.store=o}closeAllWebsockets(){this.websockets.forEach(n=>{n.onopen=null,n.onclose=null,n.onmessage=null,n.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout),this.forceCloseTimeout=null,this.try443PortTimeout=null}logger(){var n;const o=Date.now()-this.startTime;for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];H.debug("[choose-best-ws ".concat((n=this.store)===null||n===void 0?void 0:n.clientId," ").concat(this.id,"] ").concat(o,"ms:"),...l)}createWebSocket(n,o,a){this.logger("createWebSocket:",n,{isTry443Port:o,hasTimeoutDetection:a});const l=me("GATEWAY_DOMAINS"),d=Date.now(),h=[],v=l.find(L=>{var x;return _t(x=n.host).call(x,L)});v||(this.useDoubleDomain=!1);const _=[];if(this.useDoubleDomain)l.forEach(L=>{_.push(cU(aU(aU({},n),{},{host:n.host.replace(v,L)}),o))});else{const L=aU({},n);if(o&&v){const x=l.find(X=>X!==v);x&&(L.host=L.host.replace(v,x))}_.push(cU(L,o))}try{_.forEach(L=>{const x=new WebSocket(L);x.binaryType="arraybuffer",h.push(x),this.logger("ws is connecting:",x.url)})}catch(L){if(this.logger("ws create failed"),h.forEach(x=>x.close()),h.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(n,o,a);if(!o&&Number(n.port)!==443)return this.createWebSocket(n,!0,a);throw new Je(de.WS_ERR,"init websocket failed! Error: ".concat(L.toString()))}const y=bS();this.store&&this.store.recordJoinChannelService({urls:h.map(L=>L.url),service:"gateway"},this.recordIndex),h.forEach(L=>{L.onopen=()=>{this.logger("onopen: ws ".concat(L.url," open cost ").concat(Date.now()-d,"ms")),this.websockets.forEach(x=>{x!==L&&(x.onopen=null,x.onclose=null,x.onmessage=null,x.close(),this.logger("close backup websocket: ".concat(x.url)))}),this.websockets.length=0,y.resolve(L)},L.onclose=x=>{this.logger("onclose: ws ".concat(L.url," closed cost ").concat(Date.now()-d,"ms state: ").concat(L.readyState));const X=h.every(G=>G.readyState===WebSocket.CLOSED||G.readyState===WebSocket.CLOSING);this.logger("".concat(o?"443":"47xx"," websocket closed, all failed: ").concat(X)),X&&(o||this.isTry443PortFailed||this.useProxy)?(this.logger("onclose: all websocket is closed, ".concat(x.reason)),y.reject({code:x.code,reason:u2.A_ROUND_WS_FAILED})):!o&&X&&!this.isNormalPortFailed&&this.try443PortTimeout&&(this.logger("all 47xx websocket is closed, try 443 port"),this.clearTimeout(),B()),o?this.isTry443PortFailed=X:this.isNormalPortFailed=X},L.onmessage=x=>this.logger("".concat(L.url," onmessage: ").concat(x.data))}),this.websockets.push(...h);const C=()=>{this.websockets.forEach(L=>L.readyState!==WebSocket.OPEN&&L.close())},B=()=>{if(y.isResolved)return C();hn().os===is.MAC_OS&&Hi()&&C(),this.createWebSocket(n,!0,!0).then(L=>{y.resolve(L)}).catch(L=>{this.isNormalPortFailed&&y.reject(L),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",y.isResolved),this.forceCloseTimeout=null,C()},this.forceCloseWSDuration)};return a||(()=>{if(o||this.useProxy)return this.logger("add 5s timeout at ".concat(o?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(()=>{this.forceCloseTimeout=null,C()},this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{this.logger("2s timeout, isWebsocket created: ",y.isResolved),this.try443PortTimeout=null,B()},this.try443PortDuration)})(),y.promise}chooseBestWebsocket(n,o,a,l){return this.useDoubleDomain=!!o,typeof n=="string"&&(n=function(d){let h,v,_;return[,h,v,_]=d.match(abe)||[],h||([,v,_]=d.match(cbe)||[]),v&&_||([,v,_]=d.match(lbe)||[]),v&&_||([,v]=d.match(ube)||[]),v||H.warning("un-destructible url: ",d),{proxy:h,host:v,port:_||"443"}}(n)),this.recordIndex=l,this.useProxy=!!n.proxy,a&&this.useProxy&&(H.warn("cannot use 443 only when use proxy"),a=!1),this.createWebSocket(n,!!a,!1).finally(()=>this.clearTimeout())}}function zq(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}class qq extends Mi{get url(){return this.websocket&&this.websocket.url||this._websocketUrl}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){var o;_t(o=["tryNext","recover"]).call(o,n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,this._state==="reconnecting"?this.emit(jr.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(jr.CONNECTED):this._state==="closed"?this.emit(jr.CLOSED):this._state==="failed"&&this.emit(jr.FAILED))}resetReconnectCount(n){H.debug("websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,o){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=arguments.length>5?arguments[5]:void 0;super(),re(this,"_websocketUrl",null),re(this,"connectionID",0),re(this,"currentURLIndex",0),re(this,"urls",[]),re(this,"_reconnectMode","tryNext"),re(this,"reconnectReason",void 0),re(this,"_initMutex",void 0),re(this,"name",void 0),re(this,"_state","closed"),re(this,"reconnectInterrupter",void 0),re(this,"websocket",void 0),re(this,"retryConfig",void 0),re(this,"reconnectCount",0),re(this,"forceCloseTimeout",5e3),re(this,"onlineReconnectListener",void 0),re(this,"useCompress",void 0),re(this,"tryDoubleDomain",!1),re(this,"use443PortOnly",!1),re(this,"wsInflateLength",0),re(this,"wsDeflateLength",0),re(this,"closeEstablishingWs",()=>{}),re(this,"store",void 0),re(this,"joinGatewayRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(B){for(var L=1;L<arguments.length;L++){var x=arguments[L]!=null?arguments[L]:{};L%2?zq(Object(x),!0).forEach(function(X){re(B,X,x[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(x)):zq(Object(x)).forEach(function(X){Object.defineProperty(B,X,Object.getOwnPropertyDescriptor(x,X))})}return B}({},o),this.useCompress=a,this.tryDoubleDomain=l,this.use443PortOnly=d,this._initMutex=new ga("websocket",h?h.clientId:void 0);const{timeout:v,timeoutFactor:_}=o,y=Math.max(300,Math.floor(3*v/5)),C=Math.max(1.2,Math.floor(8*_)/10);tu.ONLINE&&(this.retryConfig.timeout=y,this.retryConfig.timeoutFactor=C),ho.on(py.NETWORK_STATE_CHANGE,(B,L)=>{B!==L&&(this.resetReconnectCount("network state change: ".concat(L," -> ").concat(B)),B===tu.ONLINE?(this.retryConfig.timeout=y,this.retryConfig.timeoutFactor=C):(this.retryConfig.timeout=v,this.retryConfig.timeoutFactor=_))})}getConnection(){return this.websocket||void 0}async init(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const a=await this._initMutex.lock();this._reconnectMode="tryNext",this.forceCloseTimeout=o,this.urls=n,this.state="connecting";try{var l;const d=bS(),h=this.urls[this.currentURLIndex];(l=this.store)===null||l===void 0||l.beforeConnect(),function(v){return!(WI()||me("USE_NEW_TOKEN")||!me("ENABLE_PREALLOC_PC")&&(v==null||!v.autoSubscribe||me("FORCE_DISABLE_AUTO_SUB")))}(this.store)&&this.emit(Gq.PRE_CONNECT_PC),this.createWebSocketConnection(h).then(d.resolve).catch(d.reject),this.once(jr.CLOSED,()=>{d.reject(new tt(de.WS_DISCONNECT))}),this.once(jr.CONNECTED,d.resolve),await d.promise}catch{}finally{a()}}close(n,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const a=this.websocket;o?setTimeout(()=>a.close(),500):a.close(),this.websocket=void 0,this._websocketUrl=null}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,o){if(!this.websocket)return void H.warning("[".concat(this.name,"] can not reconnect, no websocket"));n!==void 0&&(this.reconnectMode=n),H.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(o)]},this.joinGatewayRecordIndex);const a=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),a&&a.bind(this.websocket)({code:9999,reason:o})}sendMessage(n){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new tt(de.WS_ABORT,"websocket is not ready");try{o||(n=JSON.stringify(n)),this.websocket.send(n)}catch(a){throw new tt(de.WS_ERR,"send websocket message error"+a.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(n){var o;const a=bS();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const l=C=>{var B;(B=this.store)===null||B===void 0||B.signalChannelOpen(),H.debug("[".concat(this.name,"] websocket opened:"),C),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),a.resolve()},d=async C=>{var B;if(H.debug("[".concat(this.name,"] websocket close ").concat((B=this.websocket)===null||B===void 0?void 0:B.url,", code: ").concat(C.code,", reason: ").concat(C.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)a.reject(new tt(de.WS_DISCONNECT,"websocket close: ".concat(C.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=C.reason,this.state="reconnecting");const L=Iu(this,jr.WILL_RECONNECT,this.reconnectMode,C.reason)||this.reconnectMode,x=await this.reconnectWithAction(L);if(this.state==="closed")return void H.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!x)return a.reject(new tt(de.WS_DISCONNECT,"websocket reconnect failed: ".concat(C.code))),this.close(!0);a.resolve()}},h=C=>{this.emit(jr.ON_MESSAGE,C)},v=C=>{H.warn("[".concat(this.connectionID,"] ws open error ").concat(C))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),me("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(n=me("GATEWAY_WSS_ADDRESS")),H.debug("[".concat(this.name,"] start connect, url:"),n);const _=(o=this.store)===null||o===void 0?void 0:o.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var y;this._websocketUrl=cU(n);const C=await this.chooseBestWebsocketConnection(n);this.websocket=C,l&&l(this.websocket.url),this.websocket.onclose=d,this.websocket.onmessage=h,this.websocket.onerror=v,(y=this.store)===null||y===void 0||y.recordJoinChannelService({endTs:Date.now(),status:"success"},_),this.joinGatewayRecordIndex=_}catch(C){const B=this.state==="closed",L=C instanceof tt,x=L&&C.code===de.WS_ABORT,X=L&&C.code===de.WS_ERR,G=L?C.message:C&&(C.reason||C.toString());H.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(G)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:x?"aborted":"error",errors:[C]},_),B||X?(a.reject(B?new tt(de.WS_DISCONNECT,"websocket is closed: ".concat(G)):new tt(de.WS_ERR,"init websocket failed: ".concat(G))),X&&H.error("[".concat(this.name,"] init websocket failed: ").concat(G))):d&&d(C)}return a.promise}async reconnectWithAction(n){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;H.warning("[choose-best-ws] action: =>",n),this.onlineReconnectListener||ho.isOnline||!ho.onlineWaiter||(this.onlineReconnectListener=ho.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let a=!0;if(this.reconnectInterrupter=()=>a=!1,o){const h=p5(this.reconnectCount,this.retryConfig);H.debug("[".concat(this.name,"] wait ").concat(h,"ms to reconnect websocket, mode: ").concat(n)),await Mt.race([Ps(h),this.onlineReconnectListener||new Mt(()=>{})])}if(this._state==="closed"||!a)return!1;this.reconnectCount+=1;const l=async(h,v)=>{this.emit(jr.RECONNECT_CREATE_CONNECTION,v),await this.createWebSocketConnection(h)};try{if(n==="retry")await l(this.urls[this.currentURLIndex],n);else if(n==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);H.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),await l(this.urls[this.currentURLIndex],n)}else n==="recover"&&(H.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.urls=await ea(this,jr.REQUEST_NEW_URLS),this.currentURLIndex=0,await l(this.urls[this.currentURLIndex],n))}catch(h){var d;H.error("[".concat(this.name,"] reconnect failed ").concat(h&&h.toString()));const v=h==null||(d=h.data)===null||d===void 0?void 0:d.desc;return Array.isArray(v)&&_t(v).call(v,"dynamic key expired")?(this.emit(jr.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(n,o)}return!0}}class lU extends qq{constructor(n,o){super(n,o,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,o){const a=bS(),l=function(h,v){return new dbe(h,v)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{H.debug("[choose-best-ws] close establishing websockets"),l.closeAllWebsockets(),a.reject(new tt(de.WS_ABORT,"choose best websocket aborted"))};const d=me("GATEWAY_DOMAINS");return H.debug("[choose-best-ws] currentDomain: ",n,", domains: ",d,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),l.chooseBestWebsocket(n,this.tryDoubleDomain,this.use443PortOnly,o).then(a.resolve).catch(a.reject),a.promise.finally(()=>{this.closeEstablishingWs=void 0})}}class QS extends qq{constructor(n,o){super(n,o,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,o){return new Mt((a,l)=>{let d=!1;const h=[];this.closeEstablishingWs=()=>{H.debug("[choose-best-ws] close establishing websockets"),h.forEach(X=>{X.onclose=null,X.onopen=null,X.onmessage=null,X.close()}),l(new tt(de.WS_ABORT,"choose best websocket aborted"))};const v=me("GATEWAY_DOMAINS");let _;const y=n.indexOf("?h="),C=v.find(X=>y!==-1?_t(n).call(n,X,y):_t(n).call(n,X));H.debug("[choose-best-ws] currentDomain: ",C,", domains: ",v);let B=!this.tryDoubleDomain||!C;if(!B&&C){var L;const X=Date.now();try{v.forEach(G=>{const q=y===-1?n.replace(C,G):n.substr(0,y)+n.substr(y).replace(C,G),Ae=new WebSocket(q);Ae.binaryType="arraybuffer",h.push(Ae),H.debug("[choose-best-ws] ws is connecting:",Ae.url)})}catch{for(H.debug("[choose-best-ws] ws create failed, fallback to single url"),h.forEach(q=>q.close());h.length;)h.pop();B=!0}(L=this.store)===null||L===void 0||L.recordJoinChannelService({urls:h.map(G=>G.url),service:"gateway"},o),h.forEach(G=>{G.onopen=()=>{if(d)return;const q=Date.now()-X;H.debug("[choose-best-ws] ws open cost ".concat(q,"ms")),h.filter(Ae=>Ae!==G).forEach(Ae=>{H.debug("[choose-best-ws]close backup websocket: ".concat(Ae.url)),Ae.close()}),d=!0,a(G)},G.onclose=q=>{_=q,!d&&(h.find(Ae=>!(Ae.readyState===WebSocket.CLOSED||Ae.readyState===WebSocket.CLOSING))||(H.debug("[choose-best-ws] all websocket is closed"),d=!0,l(_)))},G.onmessage=q=>{H.debug("[choose-best-ws]".concat(G.url," onmessage: ").concat(q.data))}}),Ps(this.forceCloseTimeout).then(()=>{h.forEach(G=>{G.readyState!==WebSocket.OPEN&&G.close()})})}if(B){var x;let X;H.debug("[choose-best-ws] use single url: ",n),(x=this.store)===null||x===void 0||x.recordJoinChannelService({urls:[n],service:"gateway"},o);try{X=new WebSocket(n),h.push(X),X.binaryType="arraybuffer"}catch(G){const q=new tt(de.WS_ERR,"init websocket failed! Error: ".concat(G.toString()));return H.error("[".concat(this.name,"]").concat(q)),void l(q)}X.onopen=()=>{a(X)},X.onclose=G=>{l(G)},X.onmessage=G=>{H.debug("[choose-best-ws]".concat(X.url," onmessage: ").concat(G.data))},Ps(this.forceCloseTimeout).then(()=>{X&&X.readyState!==WebSocket.OPEN&&X.close()})}}).then(a=>(this.closeEstablishingWs=void 0,a)).catch(a=>{throw this.closeEstablishingWs=void 0,a})}}class fbe extends Mi{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===Ai.CONNECTED?this.emit(Br.WS_CONNECTED):n===Ai.RECONNECTING?this.emit(Br.WS_RECONNECTING,this._websocketReconnectReason):n===Ai.CLOSED&&this.emit(Br.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,o){super(),re(this,"_disconnectedReason",void 0),re(this,"_websocketReconnectReason",void 0),re(this,"_connectionState",Ai.CLOSED),re(this,"reconnectToken",void 0),re(this,"websocket",void 0),re(this,"openConnectionTime",void 0),re(this,"clientId",void 0),re(this,"lastMsgTime",Date.now()),re(this,"uploadCache",[]),re(this,"uploadCacheInterval",void 0),re(this,"rttRolling",new n$(5)),re(this,"pingpongTimer",void 0),re(this,"wsInflateDataTimer",void 0),re(this,"pingpongTimeoutCount",0),re(this,"ortc",void 0),re(this,"joinResponse",void 0),re(this,"multiIpOption",void 0),re(this,"initError",void 0),re(this,"spec",void 0),re(this,"store",void 0),re(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(Br.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===An.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===An.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Dn.UID_BANNED);break;case 15:this.close(Dn.IP_BANNED);break;case 16:this.close(Dn.CHANNEL_BANNED)}if(l._type===An.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case fr.ERR_LICENSE_MISSING:this.close(Dn.LICENSE_MISSING);break;case fr.ERR_LICENSE_EXPIRED:this.close(Dn.LICENSE_EXPIRED);break;case fr.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Dn.LICENSE_MINUTES_EXCEEDED);break;case fr.ERR_LICENSE_PERIOD_INVALID:this.close(Dn.LICENSE_PERIOD_INVALID);break;case fr.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Dn.LICENSE_MULTIPLE_SDK_SERVICE);break;case fr.ERR_LICENSE_ILLEGAL:this.close(Dn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=o,this.websocket=new lU("gateway-".concat(this.clientId),this.spec.retryConfig,!0,me("JOIN_GATEWAY_USE_DUAL_DOMAIN"),me("JOIN_GATEWAY_USE_443PORT_ONLY"),o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Ai.CONNECTED&&this.reconnect("retry",Zs.OFFLINE)})}async request(n,o,a,l){const d=ii(6,""),h={_id:d,_type:n,_message:o},v=this.websocket.connectionID,_=()=>new Mt((X,G)=>{if(this.connectionState===Ai.CONNECTED)return X();const q=()=>{this.off(Br.WS_CLOSED,Ae),X()},Ae=()=>{this.off(Br.WS_CONNECTED,q),G(new Je(de.WS_ABORT))};this.once(Br.WS_CONNECTED,q),this.once(Br.WS_CLOSED,Ae),n!==Cr.PUBLISH&&n!==Cr.PUBLISH_DATASTREAM&&n!==Cr.SUBSCRIBE&&n!==Cr.SUBSCRIBE_DATASTREAM&&n!==Cr.UNSUBSCRIBE&&n!==Cr.UNSUBSCRIBE_DATASTREAM&&n!==Cr.UNPUBLISH&&n!==Cr.UNPUBLISH_DATASTREAM&&n!==Cr.CONTROL&&n!==Cr.RESTART_ICE||this.once(Br.DISCONNECT_P2P,()=>{G(new Je(de.DISCONNECT_P2P))}),n!==Cr.PUBLISH&&n!==Cr.RESTART_ICE||this.once(Br.ABORT_P2P_EXECUTION,()=>{G(new Je(de.DISCONNECT_P2P))})});if(this.connectionState!==Ai.CONNECTING&&this.connectionState!==Ai.RECONNECTING||n===Cr.JOIN||n===Cr.REJOIN||await _(),this.websocket.sendMessage(h,!0),l)return;const y=new Mt((X,G)=>{let q=!1;const Ae=(_e,De)=>{q=!0,X({isSuccess:_e==="success",message:De||{}}),this.off(Br.WS_CLOSED,ue),this.off(Br.WS_RECONNECTING,ue),this.emit(Br.REQUEST_SUCCESS,n,o)};this.once("res-@".concat(d),Ae);const ue=()=>{G(new Je(de.WS_ABORT,"type: ".concat(n))),this.off(Br.WS_CLOSED,ue),this.off(Br.WS_RECONNECTING,ue),this.off("res-@".concat(d),Ae)};this.once(Br.WS_CLOSED,ue),this.once(Br.WS_RECONNECTING,ue),Ps(me("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||q||(H.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(Br.REQUEST_TIMEOUT,n,o))})});let C=null;try{C=await y}catch(X){if(this.connectionState===Ai.CLOSED||n===Cr.LEAVE)throw new Je(de.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?X.throw():n===Cr.JOIN||n===Cr.REJOIN?null:(await _(),await this.request(n,o))}if(C.isSuccess)return C.message;const B=Number(C.message.error_code||C.message.code),L=VS(B),x=new Je(de.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(C.message.error_str),{code:B,data:C.message,desc:L.desc});return L.action==="success"?C.message:(H.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(B,", message: ").concat(L.desc,", action: ").concat(L.action)),B===fr.ERR_TOO_MANY_BROADCASTERS?((n===Cr.JOIN||n===Cr.REJOIN)&&(this.initError=x,this.close()),x.throw()):L.action==="failed"?x.throw():L.action==="quit"?(this.initError=x,this.close(),x.throw()):(B===fr.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=C.message.option,H.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Zs.MULTI_IP)):this.reconnect(L.action,Zs.SERVER_ERROR),n===Cr.JOIN||n===Cr.REJOIN?null:await this.request(n,o)))}waitMessage(n,o){return new Mt(a=>{const l=d=>{(!o||o(d))&&(this.off(n,l),a(d))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void H.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const o={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(MS.WRTC_STATS,o)}upload(n,o){const a={_type:n,_message:o};try{this.websocket.sendMessage(a)}catch{const d=me("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Ai.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},me("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,o){const a={_type:n,_message:o};this.websocket.sendMessage(a)}init(n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Mt((o,a)=>{this.once(Br.WS_CONNECTED,()=>o(this.joinResponse)),this.once(Br.WS_CLOSED,l=>a(this.initError||new Je(de.WS_ABORT,l))),this.connectionState=Ai.CONNECTING,this.websocket.init(n).catch(a),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||Dn.LEAVE,this.connectionState=Ai.CLOSED,H.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(Br.ABORT_P2P_EXECUTION),this.store.signalConnected();const n=await ea(this,Br.REQUEST_JOIN_INFO);this.store.joinReq();const o=await this.request(Cr.JOIN,n);if(this.ortc=n==null?void 0:n.ortc,this.store.joinRep(),!o)return this.emit(Br.REPORT_JOIN_GATEWAY,u2.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(Br.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Ai.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Je(de.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=OS(this,Br.REQUEST_REJOIN_INFO);n.token=this.reconnectToken;const o=await this.request(Cr.REJOIN,n);return!!o&&(this.connectionState=Ai.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),o.peers&&o.peers.forEach(a=>{this.emit(An.ON_USER_ONLINE,{uid:a.uid}),a.audio&&this.emit(An.ON_ADD_AUDIO_STREAM,{uid:a.uid,uint_id:a.uint_id,audio:!0,ssrcId:a.audio_ssrc}),a.video&&this.emit(An.ON_ADD_VIDEO_STREAM,{uid:a.uid,uint_id:a.uint_id,video:!0,ssrcId:a.video_ssrc}),a.audio_mute?this.emit(An.MUTE_AUDIO,{uid:a.uid}):this.emit(An.UNMUTE_AUDIO,{uid:a.uid}),a.video_mute?this.emit(An.MUTE_VIDEO,{uid:a.uid}):this.emit(An.UNMUTE_VIDEO,{uid:a.uid}),a.audio_enable_local?this.emit(An.ENABLE_LOCAL_AUDIO,{uid:a.uid}):this.emit(An.DISABLE_LOCAL_AUDIO,{uid:a.uid}),a.video_enable_local?this.emit(An.ENABLE_LOCAL_VIDEO,{uid:a.uid}):this.emit(An.DISABLE_LOCAL_VIDEO,{uid:a.uid}),a.audio||a.video||this.emit(An.ON_REMOVE_STREAM,{uid:a.uid,uint_id:a.uint_id})}),!0)}reconnect(n,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,o)}async downgradeCodec(n){if(!this.ortc)return!1;const o={downgrade_codec:n,ortc:this.ortc};return!!await this.request(Cr.DOWNGRADE_CODEC,o)}handleNotification(n){H.debug("[".concat(this.clientId,"] receive notification: "),n);const o=VS(n.code);if(n.code===28&&"detail"in n&&(H.info("[".concat(this.clientId,"] receive recover notification: "),n.detail),this.emit(Br.RECOVER_NOTIFICATION,n.detail)),o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Dn.UID_BANNED),void this.close()):void this.reconnect(o.action,Zs.SERVER_ERROR);H.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=me("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=n&&(H.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>me("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Zs.TIMEOUT):this.request(Cr.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-o;this.rttRolling.add(a),me("REPORT_STATS")&&this.send(Cr.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:o}=this.websocket.getWsInflateData();n!==0&&o!==0&&this.upload(MS.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(jr.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Br.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(jr.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(jr.CLOSED,()=>{this.connectionState=Ai.CLOSED}),this.websocket.on(jr.FAILED,()=>{this._disconnectedReason=Dn.NETWORK_ERROR,this.connectionState=Ai.CLOSED}),this.websocket.on(jr.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===Ai.CONNECTED?this.connectionState=Ai.RECONNECTING:this.connectionState=Ai.CONNECTING}),this.websocket.on(jr.WILL_RECONNECT,(n,o,a)=>{const l=OS(this,Br.IS_P2P_DISCONNECTED),d=l||n!=="retry";l&&n==="retry"&&(H.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),n="tryNext",o=u2.P2P_DISCONNECTED),d&&(H.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(n)),this.emit(Br.REPORT_JOIN_GATEWAY,o||u2.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(Br.DISCONNECT_P2P)),a(n)}),this.websocket.on(jr.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{H.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),this.reconnect("tryNext",Zs.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(Br.REPORT_JOIN_GATEWAY,n,this.url||""),n instanceof Je){if(n.code===de.UNEXPECTED_RESPONSE&&n.data.code===fr.ERR_NO_AUTHORIZED)return this.initError=new Je(de.TOKEN_EXPIRE,"dynamic key expired"),void this.close(Dn.TOKEN_EXPIRE);H.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Zs.SERVER_ERROR):(this.initError=n,this.close())}})}),this.websocket.on(jr.REQUEST_NEW_URLS,(n,o)=>{ea(this,Br.REQUEST_RECOVER,this.multiIpOption).then(n).catch(o)}),this.websocket.on(jr.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(An.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(Gq.PRE_CONNECT_PC,()=>{this.emit(Br.PRE_CONNECT_PC)})}}let hbe=function(r){return r.NATIVE_RTC="native_rtc",r.NATIVE_RTM="native_rtm",r.WEB_RTC="web_rtc",r.WEB_RTM="web_rtm",r}({}),po=function(r){return r[r.CHOOSE_SERVER=11]="CHOOSE_SERVER",r[r.CLOUD_PROXY=18]="CLOUD_PROXY",r[r.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",r[r.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",r}({});function Yq(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function d2(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?Yq(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Yq(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}function cv(r){return r.match(/^[\.\:\d]+$/)?"".concat(r.replace(/[^\d]/g,"-"),".").concat(me("TURN_DOMAIN")):(H.debug("Cannot recognized as ip address: ".concat(r,", use as host2")),r)}function f2(r){try{const n=me("GATEWAY_DOMAINS").concat(me("TURN_DOMAIN")).find(o=>_t(r).call(r,o));return n?r.split(".".concat(n))[0].replace(/-/g,"."):r}catch{return H.debug("serverUrlToIp error, fallback to url",r),r}}function uU(r,n){r.addresses||(r.addresses=[]);const o=function(v,_){if(me("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return v.map(B=>{let{ip:L,port:x}=B;return{address:"".concat(L,":").concat(x)}});const y=me("GATEWAY_DOMAINS");let C=y[1]&&_t(_).call(_,y[1])?1:0;return v.map(B=>{let{domain_prefix:L,port:x,ip:X}=B;if(L)return{address:"".concat(L,".").concat(y[C++%y.length],":").concat(x)};const G=/^[\.\:\d]+$/.test(X),q=G?"".concat(X.replace(/[^\d]/g,"-"),".").concat(y[C++%y.length],":").concat(x):"".concat(X,":").concat(x);return G||H.debug("Cannot recognized as ip address: ".concat(X,", use as host3")),{ip:X,port:x,address:q}})}(r.addresses,n),a=Array.isArray(r.detail)&&r.detail[18];if(a&&typeof a=="string"){const v=a.split(";");for(let _=0;_<v.length;_++){var l;const y=nc(l=v[_]).call(l);o[_]&&y&&(o[_].ip6=y)}}const d=r.detail&&r.detail.candidate;let h;if(d){const[v,_]=d.split(":");v&&_&&(h={port:Number(_),ip:v,address:"".concat(v,":").concat(_)})}return{gatewayAddrs:o,apGatewayAddress:h,uid:r.uid,cid:r.cid,cert:r.cert,vid:r.detail&&r.detail[8],uni_lbs_ip:r.detail&&r.detail[1],res:r,csIp:r.detail&&r.detail[502]}}function ru(r){return typeof r=="number"?r:r.exact||r.ideal||r.max||r.min||0}function Xq(r){const n=r._encoderConfig;if(!n)return{};const o={resolution:n.width&&n.height?"".concat(ru(n.width),"x").concat(ru(n.height)):void 0,maxVideoBW:n.bitrateMax,minVideoBW:n.bitrateMin};return typeof n.frameRate=="number"?(o.maxFrameRate=n.frameRate,o.minFrameRate=n.frameRate):n.frameRate&&(o.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||n.frameRate.min,o.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||n.frameRate.max),o}function Jq(r){return r>=0&&r<.17?1:r>=.17&&r<.36?2:r>=.36&&r<.59?3:r>=.59&&r<=1?4:r>1?5:0}function HS(r,n){let o,a,l;switch(n){case po.CHOOSE_SERVER:a=4096,l="choose server";break;case po.CLOUD_PROXY:a=1048576,l="proxy";break;case po.CLOUD_PROXY_5:a=4194304,l="proxy5";break;case po.CLOUD_PROXY_FALLBACK:a=4194310,l="proxy fallback";break;default:throw new Je(de.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:r.detail&&r.detail[502],retry:!1})}if(r.response_body.forEach(d=>{d.buffer&&d.buffer.flag===a&&(o={code:d.buffer.code,addresses:(d.buffer.edges_services||[]).map(h=>d2(d2({},h),{},{ticket:d.buffer.cert})),server_ts:r.enter_ts,uid:d.buffer.uid,cid:d.buffer.cid,cname:d.buffer.cname,detail:d2(d2({},d.buffer.detail),r.detail),flag:d.buffer.flag,opid:r.opid,cert:d.buffer.cert})}),!o)throw new Je(de.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(l," from multi unilbs response"),{csIp:r.detail&&r.detail[502]});return o}async function Zq(r,n){return await Mt.all(r.addresses.map(async o=>({address:cv(o.ip),tcpport:o.port,udpport:o.port,username:n&&me("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():ta.username,password:n&&me("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await A5(n.toString()):ta.password})))}function AU(r,n){const o=n.getMediaStreamTrack(!0).getSettings(),a=n.videoHeight||o.height,l=n.videoWidth||o.width;return a&&l?Math.max(Math.min(a,l)/Math.min(ru(r.height),ru(r.width)),1):(H.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function lv(r){let{candidateType:n,relayProtocol:o,type:a,address:l,port:d,protocol:h}=r;const v={candidateType:n,relayProtocol:o,protocol:h};if(a!=="local-candidate"){const _=l.split(".");_.length>=4&&(_[1]="*",_[2]="*"),v.address=_.join("."),v.port=d}return v}function l1(r){const n=r.split(":"),o=r.split(/[-.]/),a=_t(r).call(r,"-")?"-":".";let l=r;return n.length>1?o.length>1?(o[1]="**",l=o[0]+a+"**:"+n[n.length-1]):l=n.length>2?n[0]+a+"**:"+n[n.length-1]:"**:"+n[n.length-1]:o.length>1&&(l=o[0]+a+"**"),l}function h2(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:me("SVC_MODE");if(me("ENABLE_SVC"))return function(n){return n in HI}(r)?r:HI.L1T3}const eY={[jt.VIDEO]:[{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"},{key:"video-orientation",extensionName:"urn:3gpp:video-orientation"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"playout-delay",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"},{key:"video-content-type",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type"},{key:"color-space",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/color-space"},{key:"video-timing",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing"}],[jt.AUDIO]:[{key:"ssrc-audio-level",extensionName:"urn:ietf:params:rtp-hdrext:ssrc-audio-level"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}]};function p2(r,n,o){n.forEach(a=>{var l;const d=eY[r].find(v=>{var _;let{key:y}=v;return _t(_=a.extensionName).call(_,y)});if(!d)return;const h=o.find(v=>{let{extensionName:_}=v;return _t(_).call(_,d.key)});h&&_t(l=h.extensionName).call(l,"gdpr_forbidden")&&(a.extensionName=h.extensionName)})}function Uy(r,n){n.forEach(o=>{var a;const l=eY[r].find(d=>{var h;let{key:v}=d;return _t(h=o.extensionName).call(h,v)});_t(a=o.extensionName).call(a,"gdpr_forbidden")&&l&&(o.extensionName=l.extensionName)})}function tY(r){return r==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"||_t(r).call(r,"abs-send-time")}function g2(r){return r==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"||_t(r).call(r,"draft-holmer-rmcat-transport-wide-cc-extensions-01")}function rY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function nY(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?rY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):rY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}function jS(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;const{filterRTX:l,filterVideoFec:d,filterAudioFec:h,filterAudioCodec:v,filterVideoCodec:_,unsupportedVideoUplinkCodec:y,unsupportedVideoDownlinkCodec:C}=n,{useXR:B}=o;let L=[],x=[],X=[],G=[],q=!1,Ae=!1;if(wl(r).mediaDescriptions.forEach(_e=>{a&&a!==_e.attributes.direction||(_e.media.mediaType!=="video"||q||(x=_e.attributes.payloads,G=_e.attributes.extmaps,q=!0),_e.media.mediaType!=="audio"||Ae||(L=_e.attributes.payloads,X=_e.attributes.extmaps,Ae=!0))}),!G||x.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!X||L.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(x.forEach(_e=>{var De;(De=_e.rtpMap)!==null&&De!==void 0&&De.clockRate&&(_e.rtpMap.clockRate=parseInt(_e.rtpMap.clockRate)),B&&_e.rtcpFeedbacks.push({type:"rrtr"})}),L.forEach(_e=>{var De;(De=_e.rtpMap)!==null&&De!==void 0&&De.clockRate&&(_e.rtpMap.clockRate=parseInt(_e.rtpMap.clockRate)),B&&_e.rtcpFeedbacks.push({type:"rrtr"})}),l&&(L=L.filter(_e=>{var De;return((De=_e.rtpMap)===null||De===void 0?void 0:De.encodingName.toLowerCase())!=="rtx"}),x=x.filter(_e=>{var De;return((De=_e.rtpMap)===null||De===void 0?void 0:De.encodingName.toLowerCase())!=="rtx"})),d){const _e=x.filter(Te=>{var ze;return/(red)|(ulpfec)|(flexfec)/i.test(((ze=Te.rtpMap)===null||ze===void 0?void 0:ze.encodingName)||"")}),De=Av(_e,x).map(Te=>Te.payloadType),Le=[..._e.map(Te=>Te.payloadType),...De];x=x.filter(Te=>!_t(Le).call(Le,Te.payloadType))}if(h&&(L=L.filter(_e=>{var De;return!/(red)|(ulpfec)|(flexfec)/i.test(((De=_e.rtpMap)===null||De===void 0?void 0:De.encodingName)||"")})),v&&(v==null?void 0:v.length)>0&&(L=L.filter(_e=>{var De;return _t(v).call(v,((De=_e.rtpMap)===null||De===void 0?void 0:De.encodingName.toLowerCase())||"")})),_&&(_==null?void 0:_.length)>0){const _e=x.filter(De=>{var Le;return _t(_).call(_,((Le=De.rtpMap)===null||Le===void 0?void 0:Le.encodingName.toLowerCase())||"")});x=_e.concat(l?[]:Av(_e,x))}const ue=me("UNSUPPORTED_VIDEO_CODEC");if(ue&&ue.length>0){const _e=x.filter(Te=>Te.rtpMap&&_t(ue).call(ue,Te.rtpMap.encodingName.toLowerCase())),De=Av(_e,x),Le=_e.concat(De).map(Te=>Te.payloadType);x=x.filter(Te=>!_t(Le).call(Le,Te.payloadType)),H.debug("unsupportedVideoCodec: ".concat(ue,", toBeRemoved: ").concat(Le))}if(y&&y.length>0&&a==="sendonly"){const _e=x.filter(Te=>Te.rtpMap&&_t(y).call(y,Te.rtpMap.encodingName.toLowerCase())),De=Av(_e,x),Le=_e.concat(De).map(Te=>Te.payloadType);x=x.filter(Te=>!_t(Le).call(Le,Te.payloadType)),H.debug("unsupportedVideoUplinkCodec: ".concat(y,", toBeRemoved: ").concat(Le))}if(C&&C.length>0&&a==="recvonly"){const _e=x.filter(Te=>Te.rtpMap&&_t(C).call(C,Te.rtpMap.encodingName.toLowerCase())),De=Av(_e,x),Le=_e.concat(De).map(Te=>Te.payloadType);x=x.filter(Te=>!_t(Le).call(Le,Te.payloadType)),H.debug("unsupportedVideoDownlinkCodec: ".concat(C,", toBeRemoved: ").concat(Le))}return{audioCodecs:L,videoCodecs:x,audioExtensions:X,videoExtensions:G}}function uv(r){const n=wl(r);let o,a;for(const l of n.mediaDescriptions){if(!o){const d=l.attributes.iceUfrag,h=l.attributes.icePwd;if(!d||!h)throw new Error("Cannot get iceUfrag or icePwd from SDP.");o={iceUfrag:d,icePwd:h}}if(!a){const d=l.attributes.fingerprints;d.length>0&&(a={fingerprints:d})}}if(!a&&n.attributes.fingerprints.length>0&&(a={fingerprints:n.attributes.fingerprints}),!a||!o)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:o,dtlsParameters:a}}function iY(r,n){const o=[],a=r.attributes.ssrcGroups.filter(h=>h.semantic==="FID"),l=r.attributes.ssrcGroups.find(h=>h.semantic==="SIM"),d=r.attributes.ssrcs;if(l)l.ssrcIds.forEach(h=>{var v;const _=(v=a.find(y=>y.ssrcIds[0]===h))===null||v===void 0?void 0:v.ssrcIds[1];o.push({ssrcId:h,rtx:n?_:void 0})});else if(a.length>0){const h=a[0].ssrcIds[0],v=a[0].ssrcIds[1];o.push({ssrcId:h,rtx:n?v:void 0})}else{if(d.length===0)throw new Error("No ssrcs found on local media description.");o.push({ssrcId:d[0].ssrcId})}return o}function oY(r,n,o){const{cname:a}=r;let l=[];n&&(l=sY(n)),l.length===0&&(l=r.iceParameters.candidates.map(C=>({foundation:C.foundation,componentId:"1",transport:C.protocol,priority:C.priority.toString(),connectionAddress:C.ip,port:C.port.toString(),type:C.type,extension:{}})),H.debug("Using candidates from gateway."));const d={fingerprints:r.dtlsParameters.fingerprints.map(C=>({hashFunction:C.algorithm,fingerprint:C.fingerprint}))},h={iceUfrag:r.iceParameters.iceUfrag,icePwd:r.iceParameters.icePwd};let v;switch(r.dtlsParameters.role){case"server":v="passive";break;case"client":v="active";break;case"auto":v="actpass"}const _=v2(r.rtpCapabilities),y=[];return Array.isArray(o)&&o.length>0&&o.forEach(C=>{y.push({kind:jt.VIDEO,ssrcMsg:[{ssrcId:C.v,rtx:C.v_rtx}],mslabel:"".concat(C.v,"_").concat(C.a)},{kind:jt.AUDIO,ssrcMsg:[{ssrcId:C.a}],mslabel:"".concat(C.v,"_").concat(C.a)})}),{dtlsParameters:d,iceParameters:h,candidates:l,rtpCapabilities:_,setup:v,cname:a,preSSRCs:y}}function sY(r){let n=[];return r.ip&&typeof r.port=="number"&&(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip,port:r.port.toString(),type:"host",extension:{}}],H.debug("Using remote candidate from AP ".concat(l1(r.ip),":").concat(r.port)),r.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip6,port:r.port.toString(),type:"host",extension:{}}),H.debug("Using IPV6 remote candidate from AP ".concat(l1(r.ip6),":").concat(r.port)))),n}function KS(r,n,o){const a=[],l=[];return r.forEach(d=>{let{ssrcId:h,rtx:v}=d;const _=ii(8,"track-"),y={ssrcId:h,attributes:nY({label:_,mslabel:o=o||ii(10,""),msid:"".concat(o," ").concat(_)},n&&{cname:n})};if(a.push(y),v!==void 0){const C={ssrcId:v,attributes:nY({label:_,mslabel:o,msid:"".concat(o," ").concat(_)},n&&{cname:n})};a.push(C),l.push({semantic:"FID",ssrcIds:[h,v]})}}),r.length>1&&l.push({semantic:"SIM",ssrcIds:r.map(d=>{let{ssrcId:h}=d;return h})}),{ssrcs:a,ssrcGroups:l}}function My(r,n){n instanceof Yi&&r.attributes.payloads.forEach(o=>{var a;const l=(a=o.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;o.fmtp||(o.fmtp={parameters:{}}),l==="opus"&&typeof me("OPUS_PTIME")=="number"?o.fmtp.parameters.ptime=me("OPUS_PTIME"):o.fmtp.parameters.minptime="10",o.fmtp.parameters.useinbandfec="1";const d=n._encoderConfig;d&&(l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(d.bitrate&&!Hi()&&(o.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*d.bitrate))),d.sampleRate&&(o.fmtp.parameters.maxplaybackrate="".concat(d.sampleRate),o.fmtp.parameters["sprop-maxcapturerate"]="".concat(d.sampleRate)),d.stereo&&(o.fmtp.parameters.stereo="1",o.fmtp.parameters["sprop-stereo"]="1")),n instanceof xS&&l==="opus"&&n._config.DTX&&(o.fmtp.parameters.usedtx="1"))})}function dU(r){const n=r.attributes.unrecognized.findIndex(o=>o.attField==="x-google-flag"&&o.attValue==="conference");n!==-1&&r.attributes.unrecognized.splice(n,1)}function fU(r,n){var o;if(!(n instanceof hi&&n._encoderConfig&&n._hints.indexOf(Jn.SCREEN_TRACK)===-1))return;const a=n._encoderConfig;vn().supportMinBitrate&&a.bitrateMin&&r.attributes.payloads.forEach(l=>{var d,h;_t(d=["h264","h265","vp8","vp9","av1"]).call(d,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-min-bitrate"]="".concat(a.bitrateMin))}),vn().supportMinBitrate&&!_t(o=n._hints).call(o,Jn.LOW_STREAM)&&a.bitrateMax&&r.attributes.payloads.forEach(l=>{var d,h;_t(d=["h264","h265","vp8","vp9","av1"]).call(d,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-start-bitrate"]="".concat(me("X_GOOGLE_START_BITRATE")||Math.floor(a.bitrateMax)))})}function aY(r){if(r.media.mediaType!=="video")return;const n=hn();if(n.name!==Sn.SAFARI&&n.os!==is.IOS)return;const o=r.attributes.extmaps.findIndex(a=>/video-orientation/g.test(a.extensionName));o!==-1&&r.attributes.extmaps.splice(o,1)}function m2(r,n,o){if(!n)return;let a,l;if(r.media.mediaType==="video"?(a=o.videoExtensions,l=o.videoCodecs):(a=o.audioExtensions,l=o.audioCodecs),n.twcc===!0){const d=a.find(h=>g2(h.extensionName));if(d){const h=d.extensionName;r.attributes.extmaps.find(_=>g2(_.extensionName))||r.attributes.extmaps.push({entry:d.entry,extensionName:h}),function(_,y){return y.filter(C=>!!_.find(B=>B.payloadType===C.payloadType&&!!B.rtcpFeedbacks.find(L=>L.type==="transport-cc")))}(l,r.attributes.payloads).forEach(_=>{_.rtcpFeedbacks.find(y=>y.type==="transport-cc")||_.rtcpFeedbacks.push({type:"transport-cc"})})}}else if(n.twcc===!1){const d=r.attributes.extmaps.findIndex(h=>g2(h.extensionName));d!==-1&&r.attributes.extmaps.splice(d,1),r.attributes.payloads.forEach(h=>{const v=h.rtcpFeedbacks.findIndex(_=>_.type==="transport-cc");v!==-1&&h.rtcpFeedbacks.splice(v,1)})}if(n.remb===!0){const d=a.find(h=>tY(h.extensionName));if(d){const h=d.extensionName;r.attributes.extmaps.find(_=>_.extensionName===h)||r.attributes.extmaps.push({entry:d.entry,extensionName:h}),function(_,y){return y.filter(C=>!!_.find(B=>B.payloadType===C.payloadType&&!!B.rtcpFeedbacks.find(L=>L.type==="goog-remb")))}(l,r.attributes.payloads).forEach(_=>{_.rtcpFeedbacks.find(y=>y.type==="goog-remb")||_.rtcpFeedbacks.push({type:"goog-remb"})})}}else if(n.remb===!1){const d=r.attributes.extmaps.findIndex(h=>tY(h.extensionName));d!==-1&&r.attributes.extmaps.splice(d,1),r.attributes.payloads.forEach(h=>{const v=h.rtcpFeedbacks.findIndex(_=>_.type==="goog-remb");v!==-1&&h.rtcpFeedbacks.splice(v,1)})}}function cY(r,n,o){if(Hi()||r.media.mediaType!=="video"||!(n instanceof hi)||o!=="vp9"&&o!=="vp8"||o==="vp8"&&!me("SIMULCAST")||o==="vp9"&&me("ENABLE_SVC")||n._scalabilityMode===void 0||n._scalabilityMode.numSpatialLayers<=1)return;const a=o==="vp8"?2:n._scalabilityMode.numSpatialLayers,l=r.attributes.ssrcs[0],d=r.attributes.ssrcGroups.find(v=>v.semantic==="FID"&&v.ssrcIds[0]===l.ssrcId),h={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let v=1;v<a;v++)r.attributes.ssrcs.push({ssrcId:l.ssrcId+v,attributes:Ni(l.attributes)}),h.ssrcIds.push(l.ssrcId+v),d&&(r.attributes.ssrcs.push({ssrcId:d.ssrcIds[1]+v,attributes:Ni(l.attributes)}),r.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+v,d.ssrcIds[1]+v]}));r.attributes.ssrcGroups.unshift(h)}async function lY(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new RTCPeerConnection;o.addTransceiver("video",{direction:"sendonly"}),o.addTransceiver("audio",{direction:"sendonly"}),o.addTransceiver("video",{direction:"recvonly"}),o.addTransceiver("audio",{direction:"recvonly"});const a=(await o.createOffer()).sdp,{send:l,recv:d,sendrecv:h}=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=arguments.length>2?arguments[2]:void 0;const C=jS(y,v,_,"sendonly"),B=jS(y,v,_,"recvonly"),L={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},x={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},X={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Od(C,B,"videoExtensions",L,x,X),Od(C,B,"videoCodecs",L,x,X),Od(C,B,"audioExtensions",L,x,X),Od(C,B,"audioCodecs",L,x,X),me("RAISE_H264_BASELINE_PRIORITY")){const G=[],q=[];if(X.videoCodecs.forEach((Ae,ue)=>{var _e;if(((_e=Ae.rtpMap)===null||_e===void 0?void 0:_e.encodingName.toLocaleLowerCase())==="h264"){var De,Le;const Te=X.videoCodecs[ue+1],ze=Te&&hY(Ae,Te),rt=(De=Ae.fmtp)===null||De===void 0?void 0:De.parameters["profile-level-id"],At=(Le=Ae.fmtp)===null||Le===void 0?void 0:Le.parameters["packetization-mode"];!rt||rt!==me("FIRST_H264_PROFILE_LEVEL_ID")||me("FIRST_PACKETIZATION_MODE")&&At!==me("FIRST_PACKETIZATION_MODE")?ze?q.push([Ae,Te]):q.push([Ae]):ze?G.push([Ae,Te]):G.push([Ae])}}),G.length>0&&q.length>0){H.debug("raising H264 baseline profile priority"),X.videoCodecs.forEach((ue,_e)=>{var De;if(((De=ue.rtpMap)===null||De===void 0?void 0:De.encodingName.toLocaleLowerCase())==="h264"){const Le=hY(ue,X.videoCodecs[_e+1]),Te=G.shift()||q.shift()||[];Te.length>0&&(Le?X.videoCodecs.splice(_e,2,...Te):X.videoCodecs.splice(_e,1,...Te))}});const Ae=x.videoCodecs.filter(ue=>{var _e,De;return((_e=ue.rtpMap)===null||_e===void 0?void 0:_e.encodingName.toLocaleLowerCase())==="h264"&&((De=ue.fmtp)===null||De===void 0?void 0:De.parameters["profile-level-id"])!==me("FIRST_H264_PROFILE_LEVEL_ID")});if(Ae.length>0){const ue=Av(Ae,x.videoCodecs).map(De=>De.payloadType),_e=[...Ae.map(De=>De.payloadType),...ue];x.videoCodecs=x.videoCodecs.filter(De=>!_t(_e).call(_e,De.payloadType))}me("FILTER_SEND_H264_BASELINE")&&(L.videoCodecs=L.videoCodecs.filter(ue=>{var _e,De;return!(((_e=ue.rtpMap)===null||_e===void 0?void 0:_e.encodingName.toLocaleLowerCase())==="h264"&&((De=ue.fmtp)===null||De===void 0?void 0:De.parameters["profile-level-id"])!==me("FIRST_H264_PROFILE_LEVEL_ID"))}))}return{send:L,recv:x,sendrecv:X}}return{send:L,recv:x,sendrecv:X}}(r,n,a);try{o.close()}catch{}return{send:l,recv:d,sendrecv:h}}function uY(){const r={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},n=jS(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Od(r,n,"videoExtensions",o,a,l),Od(r,n,"videoCodecs",o,a,l),Od(r,n,"audioExtensions",o,a,l),Od(r,n,"audioCodecs",o,a,l),me("RAISE_H264_BASELINE_PRIORITY")){const d=l.videoCodecs.findIndex(h=>h.rtpMap&&h.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&h.fmtp&&h.fmtp.parameters["profile-level-id"]==="42001f");if(d!==-1){const h=l.videoCodecs.findIndex(v=>v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(h<d){H.debug("raising H264 baseline profile priority");const v=l.videoCodecs[d];l.videoCodecs.splice(d,1),l.videoCodecs.splice(h,0,v)}h!==-1&&(a.videoCodecs=a.videoCodecs.filter(v=>!(v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&v.fmtp&&v.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:o,recv:a,sendrecv:l}}function Od(r,n,o,a,l,d){if(o==="videoExtensions"||o==="audioExtensions"){const h=[];return r[o].forEach(v=>{n[o].some((_,y)=>{if(v.entry===_.entry&&v.extensionName===_.extensionName)return h.push(y),!0})?d[o].push(v):a[o].push(v)}),void n[o].forEach((v,_)=>{h.indexOf(_)===-1&&l[o].push(v)})}if(o==="videoCodecs"||o==="audioCodecs"){const h=[];return r[o].forEach(v=>{n[o].some((_,y)=>{if(v.payloadType===_.payloadType&&JSON.stringify(v)===JSON.stringify(_))return h.push(y),!0})?d[o].push(v):a[o].push(v)}),void n[o].forEach((v,_)=>{h.indexOf(_)===-1&&l[o].push(v)})}}function v2(r){const{send:n,recv:o,sendrecv:a}=r;if(!a){if(!n||!o)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:n,recv:o}}let l,d;return n?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...n.audioCodecs,...a.audioCodecs],l.videoCodecs=[...n.videoCodecs,...a.videoCodecs],l.audioExtensions=[...n.audioExtensions,...a.audioExtensions],l.videoExtensions=[...n.videoExtensions,...a.videoExtensions]):l=a,o?(d={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},d.audioCodecs=[...o.audioCodecs,...a.audioCodecs],d.videoCodecs=[...o.videoCodecs,...a.videoCodecs],d.audioExtensions=[...o.audioExtensions,...a.audioExtensions],d.videoExtensions=[...o.videoExtensions,...a.videoExtensions]):d=a,{send:l,recv:d}}function Fy(r){r.media.mediaType==="audio"&&r.attributes.payloads.filter(n=>{var o;return((o=n.rtpMap)===null||o===void 0?void 0:o.encodingName.toLowerCase())==="opus"}).forEach(n=>{n.fmtp||(n.fmtp={parameters:{}}),n.fmtp.parameters.stereo="1",n.fmtp.parameters["sprop-stereo"]="1"})}function WS(r,n,o,a){let l=[];if(r===jt.VIDEO){if(me("H264_PROFILE_LEVEL_ID")&&a==="h264"&&(l=n.videoCodecs.filter(d=>{var h;return _t(h=d.rtpMap&&d.rtpMap.encodingName.toLowerCase()||"").call(h,a)&&d&&d.fmtp&&d.fmtp.parameters["profile-level-id"]===me("H264_PROFILE_LEVEL_ID")})),!Array.isArray(l)||l.length===0){let d=[];const h=[],v=[],_=[];if(o.videoCodecs.forEach(y=>{const C=y.rtpMap&&y.rtpMap.encodingName.toLowerCase()||"";_t(C).call(C,a)?d.push(y):_t(C).call(C,"vp9")?h.push(y):_t(C).call(C,"vp8")?v.push(y):_t(C).call(C,"h264")&&_.push(y)}),d.length===0){let y="";h.length!==0?(d=h,y="vp9"):v.length!==0?(d=v,y="vp8"):_.length!==0&&(d=_,y="h264"),H.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(y))}d.length!==0&&(l=n.videoCodecs.filter(y=>d.some(C=>C.payloadType===y.payloadType)))}if(l.length===0&&(H.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(n.videoCodecs[0].rtpMap&&n.videoCodecs[0].rtpMap.encodingName)),l=n.videoCodecs),me("USE_PUB_RTX")||me("USE_SUB_RTX")){const d=Av(l,n.videoCodecs);l=[...l,...d]}}else{l=n.audioCodecs.filter(h=>{var v;return _t(v=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(v,a)});const d=n.audioCodecs.filter(h=>{var v;return _t(v=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(v,"red")});l.length===0&&(H.warning("codec ".concat(a," not included in rtpCapabilities, fallback to opus")),l=n.audioCodecs.filter(h=>{var v;return _t(v=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(v,"opus")})),me("ENABLE_AUDIO_RED")&&d.length!==0&&(l=[...d,...l])}return l}function Av(r,n){const o=r.map(a=>a.payloadType.toString());return n.filter(a=>a.rtpMap&&a.rtpMap.encodingName==="rtx"&&a.fmtp&&a.fmtp.parameters.apt&&_t(o).call(o,a.fmtp&&a.fmtp.parameters.apt))}async function dv(r,n,o){const a=n.toString(),l=dY(a,"offer","remote","exchangeSDP");await r.setRemoteDescription({type:"offer",sdp:a});const d=await r.createAnswer();if(!d.sdp)throw new Error("cannot get answer sdp");let h=d.sdp;h=AY(h,o||{}),l==null||l(h||""),await r.setLocalDescription({type:"answer",sdp:h})}function AY(r,n,o){const a=wl(r),{useXR:l}=n;return a.mediaDescriptions.forEach(d=>{var h;d.attributes.mid&&(Array.isArray(o)&&!_t(o).call(o,d.attributes.mid)||(d.media.mediaType==="audio"&&Fy(d),l&&_t(h=["audio","video"]).call(h,d.media.mediaType)&&d.attributes.payloads.forEach(v=>{v.rtcpFeedbacks.findIndex(_=>_.type==="rrtr")===-1&&v.rtcpFeedbacks.push({type:"rrtr"})})))}),iv(a)}function dY(r,n,o,a){if(me("SDP_LOGGING"))return H.upload("exchanging ".concat(o," ").concat(n," SDP during P2PConnection.").concat(a,`
`),r),n==="offer"?l=>{dY(l,"answer",o==="local"?"remote":"local",a)}:void 0}function fY(r){const n=me("COMPATIBLE_SDP_EXTENSION");return!!(Array.isArray(n)&&n.length>0)&&n.some(o=>_t(r).call(r,o))}function hY(r,n){try{var o;return((o=r.fmtp)===null||o===void 0?void 0:o.parameters.apt)===n.payloadType.toString()}catch{return!1}}function pY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Uu(r,n){return typeof me(r)===n?me(r):void 0}function pbe(){try{const r=me("EXPERIMENTS")||{};return typeof r=="string"||Array.isArray(r)?{}:function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?pY(Object(a),!0).forEach(function(l){re(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):pY(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}({},r)}catch(r){return H.debug("handle gateway attributes failed: ",r),{}}}const gY={};function fv(r){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&H.debug("install service ".concat(r.name)),gY[r.name]=r}function Fg(r){const n=gY[r];if(!n)throw new tt(de.INVALID_OPERATION,"".concat(r," not found, please use AgoraRTC.use(").concat(r,"Service) to load it first"));return n}function mY(r,n){return Fg("DataStream").create(r,n)}function _2(){return Fg("InterceptFrame").create()}function vY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Va(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?vY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):vY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const hU=new Map;class gbe extends Mi{get state(){return this._state}set state(n){if(n===this._state)return;const o=this._state;this._state=n,n==="DISCONNECTED"&&this._disconnectedReason?this.emit(fs.CONNECTION_STATE_CHANGE,n,o,this._disconnectedReason):this.emit(fs.CONNECTION_STATE_CHANGE,n,o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){H.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,o){var a,l,d;super(),re(this,"store",void 0),re(this,"joinInfo",void 0),re(this,"key",void 0),re(this,"ntpOffset",0),re(this,"signal",void 0),re(this,"role",void 0),re(this,"isPreallocation",void 0),re(this,"isPreSub",void 0),re(this,"inChannelInfo",{joinAt:null,duration:0}),re(this,"spec",void 0),re(this,"_state","DISCONNECTED"),re(this,"_statsCollector",void 0),re(this,"_disconnectedReason",void 0),re(this,"isSignalRecover",!1),re(this,"hasChangeBGPAddress",!1),re(this,"trafficStatsInterval",void 0),re(this,"networkQualityInterval",void 0),re(this,"_joinGatewayStartTime",0),re(this,"_signalTimeout",!1),re(this,"_clientRoleOptions",void 0),re(this,"_isProactiveJoin",!1),this.store=n,this.spec=o,this.signal=this.store.useP2P?(a={spec:Va(Va({},o),{},{retryConfig:o.websocketRetryConfig}),store:n},(l=(d=Fg("P2PChannel")).createSubmodule)===null||l===void 0?void 0:l.call(d,a)):new fbe(Va(Va({},o),{},{retryConfig:o.websocketRetryConfig}),n),this._statsCollector=o.statsCollector,this.role=o.role||"audience",this._clientRoleOptions=o.clientRoleOptions,this.handleSignalEvents()}async join(n,o,a){this.store.joinGatewayStart(),n.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let d=hU.get(n.cname);if(d||(d=new Map,hU.set(n.cname,d)),this._isProactiveJoin=!0,d.has(n.uid)){const y=new Je(de.UID_CONFLICT);throw rr.joinGateway(n.sid,{lts:l,succ:!1,ec:y.code,addr:null,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,isProxy:!!n.proxyServer,signalChannel:"0",preload:n.preload}),y}d.set(n.uid,!0),this.joinInfo=n,this.key=o;let h=0;this.joinGatewayStartTime=l;const v=n.proxyServer;try{H.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(h));const y=n.gatewayAddrs.map(C=>{let{address:B}=C;const[L,x]=B.split(":"),X={host:L,port:x};return n.proxyServer&&(X.proxy=n.proxyServer),X});h=(await this.signal.init(y)).uid,H.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(h," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(y){var _;throw H.error("[".concat(this.store.clientId,"] User join failed"),y.toString()),rr.joinGateway(n.sid,{lts:l,succ:!1,ec:((_=y.data)===null||_===void 0?void 0:_.desc)||y.code,errorMsg:y.message,addr:this.signal.url,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,isProxy:!!v,signalChannel:"0",preload:n.preload}),d.delete(n.uid),this.signal.close(),y}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),H.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(y=>{H.warning("[".concat(this.store.clientId,"] get traffic stats error"),y.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(fs.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(fs.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(fs.NETWORK_QUALITY,{uplinkNetworkQuality:Jq(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:Jq(this._statsCollector.trafficStats.B_dnq)}):this.emit(fs.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),h}async leave(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){o!==Dn.FALLBACK&&(this.state="DISCONNECTING");try{n||this.signal.connectionState!==Ai.CONNECTED||await function(a,l){return l===1/0?a:Mt.race([a,Qwe(l)])}(this.signal.request(Cr.LEAVE,void 0,!0),3e3)}catch(a){H.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),a)}this.signal.close(o),o!==Dn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(n,o,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:o,mode:this.spec.mode,extend:me("PUB_EXTEND"),twcc:!!me("PUBLISH_TWCC"),rtx:!!me("USE_PUB_RTX")};try{return(await this.signal.request(Cr.PUBLISH,l,!0))._message}catch(d){if(a&&d.data&&d.data.code===fr.ERR_PUBLISH_REQUEST_INVALID)return H.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),d.toString()),await this.tryUnpubBeforeRepub(n,o),this.publish(n,o,!1);throw d}}async publishDataChannel(n,o,a){var l;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const d={stream_id:o.streamId,ordered:o.ordered?1:0,max_retrans_times:(l=o.maxRetransmits)!==null&&l!==void 0?l:10,channel_id:o.channelId,metadata:o.metadata};try{await this.signal.request(Cr.PUBLISH_DATASTREAM,d,!0)}catch(h){if(a&&h.data&&h.data.code===fr.ERR_PUBLISH_REQUEST_INVALID)return H.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),h.toString()),await this.tryUnpubDataChannelBeforeRepub(n,o),this.publishDataChannel(n,o,!1);throw h}}async unpublish(n,o){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Cr.UNPUBLISH,{stream_id:o,ortc:n},!0)}catch(a){H.warning("[".concat(this.store.clientId,"] unpublish warning: "),a)}}async unpublishDataChannel(n){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await Mt.all(n.map(o=>this.signal.request(Cr.UNPUBLISH_DATASTREAM,{channel_id:o},!0)))}catch(o){H.warning("unpublish datachannels warning: ",o)}}async presubscribe(n,o,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:o,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!me("SUBSCRIBE_TWCC"),rtx:!!me("USE_SUB_RTX")||void 0,extend:me("SUB_EXTEND"),svc:Array.isArray(me("SVC"))&&me("SVC").length!==0?me("SVC"):void 0};try{return await this.signal.request(Cr.PRE_SUBSCRIBE,l,!0)}catch(d){if(a&&d.data&&d.data.code===fr.ERR_SUBSCRIBE_REQUEST_INVALID)return H.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),d.toString()),this.presubscribe(n,o,!1);throw d}}async subscribe(n,o,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:o.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!me("SUBSCRIBE_TWCC"),rtx:!!me("USE_SUB_RTX"),extend:me("SUB_EXTEND"),ssrcId:o.ssrcId,svc:Array.isArray(me("SVC"))&&me("SVC").length!==0?me("SVC"):void 0};try{return(await this.signal.request(Cr.SUBSCRIBE,l,!0))._message}catch(d){if(a&&d.data&&d.data.code===fr.ERR_SUBSCRIBE_REQUEST_INVALID)return H.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),d.toString()),await this.tryUnsubBeforeResub(n,o),await this.subscribe(n,o,!1);throw d}}async subscribeDataChannel(n,o,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const l={uid:n,stream_id:o.id,channel_id:o.datachannelId};try{return void await this.signal.request(Cr.SUBSCRIBE_DATASTREAM,l,!0)}catch(d){if(a&&d.data&&d.data.code===fr.ERR_SUBSCRIBE_REQUEST_INVALID)return H.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),d.toString()),await this.tryUnsubDataChannelBeforeResub(n,o),await this.subscribeDataChannel(n,o,!1);throw d}}async subscribeAll(n,o){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const a={p2p_id:this.store.p2pId,users:n,dtx:!1,rtx:!!me("USE_SUB_RTX"),twcc:!!me("SUBSCRIBE_TWCC"),svc:Array.isArray(me("SVC"))&&me("SVC").length!==0?me("SVC"):void 0};try{return await this.signal.request(Cr.SUBSCRIBE_STREAMS,a,!0)}catch(l){if(o&&l.data&&l.data.code===fr.ERR_SUBSCRIBE_REQUEST_INVALID)return H.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(n),await this.subscribeAll(n,!1);throw l}}async setVideoProfile(n){const o=function(a){if(!(a.bitrateMax&&a.bitrateMin&&a.frameRate&&a.height&&a.width))return;let l=a.frameRate,d=a.width,h=a.height,v=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(v=!1)),typeof d!="number"&&(d=d.exact||d.ideal||d.max||d.min||0,d||(v=!1)),typeof h!="number"&&(h=h.exact||h.ideal||h.max||h.min||0,l||(v=!1)),v?{stream_type:0,width:d,height:h,fps:l,start_bps:1e3*a.bitrateMax,min_bps:1e3*a.bitrateMin,target_bps:1e3*a.bitrateMax}:void 0}(n);if(o)return this.signal.request(Cr.SET_VIDEO_PROFILE,o);H.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(n,o){try{await this.signal.request(Cr.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:n,stream_id:o},!0)}catch(a){H.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),a)}}async unsubscribeDataChannel(n,o){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await Mt.all(n.map(a=>this.signal.request(Cr.UNSUBSCRIBE_DATASTREAM,{stream_id:a,uid:o},!0)))}catch(a){H.warning("unsubscribeDataChannel warning: ",a)}}async massUnsubscribe(n){try{await this.signal.request(Cr.UNSUBSCRIBE_STREAMS,n,!0)}catch(o){H.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),o)}}async reconnectPC(n){const{iceParameters:o,dtlsParameters:a,rtpCapabilities:l}=n;return{gatewayEstablishParams:await this.signal.request(Cr.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:o,dtlsParameters:a,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Cr.GATEWAY_INFO)}async renewToken(n){await this.signal.request(Cr.RENEW_TOKEN,n),this.key=n.token}updateClientRole(n,o){o&&(this._clientRoleOptions=Object.assign({},o)),me("CLIENT_ROLE_OPTIONS")&&(H.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(me("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," ")),this._clientRoleOptions=Object.assign({},me("CLIENT_ROLE_OPTIONS"))),this.role=n}async setClientRole(n,o){if(o&&(this._clientRoleOptions=Object.assign({},o)),me("CLIENT_ROLE_OPTIONS")&&(this._clientRoleOptions=Object.assign({},me("CLIENT_ROLE_OPTIONS")),H.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(me("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," "))),this.state!=="CONNECTED")return void(this.role=n);let a,l=0;n==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(a=this._clientRoleOptions.delay,l=1):l=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:l=0;const d=Object.assign({},o);delete d.delay,delete d.level,await this.signal.request(Cr.SET_CLIENT_ROLE,Va(Va({role:n,level:l,delay:a},d),{},{client_ts:Date.now()})),this.role=n}async setRemoteVideoStreamType(n,o){await this.signal.request(Cr.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:o})}async setDefaultRemoteVideoStreamType(n){await this.signal.request(Cr.DEFAULT_VIDEO_STREAM,{stream_type:n})}async setStreamFallbackOption(n,o){await this.signal.request(Cr.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:o})}async pickSVCLayer(n,o){await this.signal.request(Cr.PICK_SVC_LAYER,{stream_id:n,spatial_layer:o.spatialLayer,temporal_layer:o.temporalLayer})}async setRTM2Flag(n){await this.signal.request(Cr.SET_RTM2_FLAG,{rtm2_flag:n})}async sendExtensionMessage(n,o,a){if(this.store.useP2P)return this.signal.sendExtensionMessage(n,o,a)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Va({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Cr.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=hU.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(o){let a;return a=o.startsWith("dc")?o.match(/(dc\:\/\/)?([^:]+):(\d+)/):o.match(/(wss\:\/\/)?([^:]+):(\d+)/),a?{username:ta.username,password:ta.password,turnServerURL:a[2],tcpport:parseInt(a[3])+30,udpport:parseInt(a[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Va(Va({},ta),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const n=await this.signal.request(Cr.TRAFFIC_STATS,void 0,!0);n.timestamp=Date.now(),n.ntp_offset!=null&&(this.ntpOffset=n.ntp_offset),n.peer_delay.forEach(o=>{const a=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===o.peer_uid);a&&a.B_st!==o.B_st&&MI(()=>{this.emit(fs.STREAM_TYPE_CHANGE,o.peer_uid,o.B_st)})}),this._statsCollector.updateTrafficStats(n)}getJoinMessage(n){var o,a;if(!this.joinInfo||!this.key)throw new Je(de.UNEXPECTED_ERROR,"can not generate join message, no join info");const l=Object.assign({},this.joinInfo.apResponse);let d=me("REPORT_APP_SCENARIO");if(typeof d!="string")try{d=JSON.stringify(d)}catch{d=void 0}var h;d&&d.length>128&&(d=void 0),this.store.hasStartJoinChannel=!0,this.store.isABTestSuccess||this.emit(fs.UPDATE_GATEWAY_CONFIG),h=this.store.clientId,_t(Ly).call(Ly,h)||Ly.push(h);const v=O5(this.store),_=!((o=this.isPreallocation)===null||o===void 0||!o.call(this)),y=E$(this.store),C=pbe(),B=fy(87)||NG()||n5(117),L=(function(){const X=hn();if(X.name!==Sn.SAFARI||!X.browserVersion)return!1;const G=X.browserVersion.split(".");return Number(G[0])>18||Number(G[0])===18&&Number(G[1])>=4}()||kG(18,4,!1))&&i5(18,6,!0)&&this.spec.codec==="h264"&&me("ENABLE_ABSSENDTIME_AS_SENTTS"),x=Va({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:yA,browser:navigator.userAgent,process_id:me("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:l,extend:me("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:d,attributes:{userAttributes:Va(Va({enableEncodedTransform:(!!me("ENABLE_AUDIO_METADATA")||!!me("ENABLE_AUDIO_PTS"))&&B||!!me("ENABLE_AUDIO_TOPN")&&t5(Sn.CHROME,87,116)||void 0,enableAudioMetadata:!!me("ENABLE_AUDIO_METADATA")&&B,enableAudioPts:!!me("ENABLE_AUDIO_PTS")&&B,topnSmoothLevel:me("TOPN_SMOOTH_LEVEL"),topnNewSpeakerDelay:me("TOPN_NEW_SPEAKER_DELAY"),topnSwitchHoldMs:me("TOPN_SWITCH_HOLD_MS"),topnAudioGain:me("TOPN_AUDIO_GAIN"),enablePublishedUserList:me("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:me("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:Uu("SUBSCRIBE_AUDIO_FILTER_TOPN","number"),enablePublishAudioFilter:Uu("ENABLE_PUBLISH_AUDIO_FILTER","boolean"),enableUserLicenseCheck:Uu("ENABLE_USER_LICENSE_CHECK","boolean"),enableRTX:me("USE_PUB_RTX")===!0||me("USE_SUB_RTX")===!0||void 0,disableFEC:me("DISABLE_FEC"),enableNTPReport:!!me("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:y,enableFulllinkAvSync:!!me("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:Uu("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!me("FORCE_ENABLE_AUT_CC")||!WI()&&(!!me("ENABLE_AUT_FEEDBACK")||void 0),rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!me("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:Uu("USE_XR","boolean"),enableLossbasedBwe:Uu("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!me("FORCE_ENABLE_AUT_CC")||!WI()&&(!!me("ENABLE_AUT_CC")||void 0),enableCCFallback:Uu("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:_,preSubNum:v?Uu("PRE_SUB_NUM","number"):void 0,enablePubTWCC:Uu("PUBLISH_TWCC","boolean"),enableSubTWCC:Uu("SUBSCRIBE_TWCC","boolean"),enablePubRTX:Uu("USE_PUB_RTX","boolean"),enableSubRTX:Uu("USE_SUB_RTX","boolean"),enableSubSVC:me("ENABLE_SVC")?me("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(me("SVC"))&&me("SVC").length!==0?me("SVC"):void 0,enableSvcExtended:me("ENABLE_SVC")&&Array.isArray(me("SVC_EXTENDED"))&&me("SVC_EXTENDED").length!==0?me("SVC_EXTENDED"):void 0},C),{},{audioDuplicate:Uu("ENABLE_AUDIO_RED","boolean")?(a=Uu("AUDIO_DUPLICATE_NUM","number"))!==null&&a!==void 0?a:2:void 0,senttsUsesAbsSendTime:!!L||void 0})},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(x.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(x.aes_mode=this.joinInfo.aesmode,me("ENCRYPT_AES")?(x.aes_secret=this.joinInfo.aespassword,x.aes_encrypt=!0):x.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(x.aes_salt=this.joinInfo.aessalt)),l.addresses[this.signal.websocket.currentURLIndex]&&(x.ap_response.ticket=l.addresses[this.signal.websocket.currentURLIndex].ticket,delete l.addresses),this.joinInfo.defaultVideoStream!==void 0&&(x.default_video_stream=this.joinInfo.defaultVideoStream),x}getRejoinMessage(){if(!this.joinInfo)throw new Je(de.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Br.WS_RECONNECT_CREATE_CONNECTION,n=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Br.WS_RECONNECTING,n=>{this.joinInfo&&rr.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:n||Zs.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",rr.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Br.WS_CLOSED,n=>{let o;switch(n){case Dn.LEAVE:o=Zs.LEAVE;break;case Dn.UID_BANNED:case Dn.IP_BANNED:case Dn.CHANNEL_BANNED:case Dn.SERVER_ERROR:o=Zs.SERVER_ERROR;break;case Dn.FALLBACK:o=Zs.FALLBACK;break;case Dn.LICENSE_MISSING:case Dn.LICENSE_EXPIRED:case Dn.LICENSE_MINUTES_EXCEEDED:case Dn.LICENSE_PERIOD_INVALID:case Dn.LICENSE_MULTIPLE_SDK_SERVICE:case Dn.LICENSE_ILLEGAL:case Dn.TOKEN_EXPIRE:o=n;break;default:o=Zs.NETWORK_ERROR}H.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(o||"undefined -> "+Zs.NETWORK_ERROR)),this.joinInfo&&rr.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:n===Dn.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o}),this._disconnectedReason=n,n!==Dn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Br.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo){if(this.role==="audience"){const n=me("CLIENT_ROLE_OPTIONS")||this._clientRoleOptions;n&&(n.level||n.delay)&&(H.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(n.level,", delay: ").concat(n.delay)),this.setClientRole(this.role,n))}if(rr.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload,isABTestSuccess:this.store.isABTestSuccess}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1){const n=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!n)return void H.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(n));zn("EVENT_REPORT_DOMAIN",n[1]),zn("EVENT_REPORT_BACKUP_DOMAIN",n[1]),zn("LOG_UPLOAD_SERVER","".concat(n[1],":6444"))}}}),this.signal.on(An.ON_UPLINK_STATS,n=>{this._statsCollector.updateUplinkStats(n)}),this.signal.on(Br.REQUEST_RECOVER,(n,o,a)=>{if(!this.joinInfo)return a(new Je(de.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));n&&(this.joinInfo.multiIP=n,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,ea(this,fs.REQUEST_NEW_GATEWAY_LIST).then(o).catch(a)}),this.signal.on(Br.REQUEST_JOIN_INFO,async(n,o,a)=>{var l,d,h;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void n(this.getJoinMessage({ortc:{}}));const v=Ni((l=this.joinInfo)===null||l===void 0?void 0:l.turnServer);if(me("NEW_TURN_MODE")&&v&&((d=this.joinInfo)===null||d===void 0?void 0:d.cloudProxyServer)==="disabled"){var _;let L=v.servers.map(G=>"turnServerURL"in G&&me("USE_TURN_IP")?Va(Va({},G),{},{turnServerURL:f2(G.turnServerURL)}):G),x=(_=v.serversFromGateway)===null||_===void 0?void 0:_.map(G=>me("USE_TURN_IP")?Va(Va({},G),{},{turnServerURL:f2(G.turnServerURL)}):G);const X=this.signal.currentURLIndex;L.length>0&&(L=[L[X%L.length]],v.servers=L),Array.isArray(x)&&x.length>0&&(x=[x[0]],v.serversFromGateway=x),H.debug("[".concat(this.store.clientId,"] use single turn, use turn server index: ").concat(X))}const{iceParameters:y,dtlsParameters:C,rtpCapabilities:B}=await ea(this,fs.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:v,cloudProxyServer:(h=this.joinInfo)===null||h===void 0?void 0:h.cloudProxyServer});try{n(this.getJoinMessage({ortc:{iceParameters:y,dtlsParameters:C,rtpCapabilities:B,version:"2"}}))}catch(L){o(L)}}),this.signal.on(Br.REQUEST_REJOIN_INFO,n=>{n(this.getRejoinMessage())}),this.signal.on(Br.REPORT_JOIN_GATEWAY,(n,o)=>{if(!this.joinInfo)return;let a,l="";var d;n instanceof Je?(a=((d=n.data)===null||d===void 0?void 0:d.desc)||n.code,l=n.message):a=n,rr.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:a,errorMsg:l,addr:o,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload})}),this.signal.on(Br.IS_P2P_DISCONNECTED,n=>{n(OS(this,fs.IS_P2P_DISCONNECTED))}),this.signal.on(Br.DISCONNECT_P2P,()=>{this.emit(fs.DISCONNECT_P2P)}),this.signal.on(Br.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Br.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Br.JOIN_RESPONSE,n=>{const o=this.getCurrentGatewayAddress();this.emit(fs.JOIN_RESPONSE,n,o)}),this.signal.on(Br.PRE_CONNECT_PC,async()=>{if(this.joinInfo){var n,o;this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress(),d=Ni((n=this.joinInfo)===null||n===void 0?void 0:n.turnServer);if(me("NEW_TURN_MODE")&&d&&((o=this.joinInfo)===null||o===void 0?void 0:o.cloudProxyServer)==="disabled"){var a;let v=d.servers.map(C=>"turnServerURL"in C&&me("USE_TURN_IP")?Va(Va({},C),{},{turnServerURL:f2(C.turnServerURL)}):C),_=(a=d.serversFromGateway)===null||a===void 0?void 0:a.map(C=>me("USE_TURN_IP")?Va(Va({},C),{},{turnServerURL:f2(C.turnServerURL)}):C);const y=this.signal.currentURLIndex;v.length>0&&(v=[v[y%v.length]],d.servers=v),Array.isArray(_)&&_.length>0&&(_=[_[0]],d.serversFromGateway=_),H.debug("[".concat(this.store.clientId,"] use single turn, use turn server index: ").concat(y,",in pre pc"))}const h=me("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(l&&h){const v=sY(l);this.emit(fs.PRE_CONNECT_PC,{candidates:v,fingerprint:h,turnServer:d})}}}),this.signal.on(Br.RECOVER_NOTIFICATION,n=>{this.joinInfo&&typeof me("AP_REQUEST_DETAIL")=="string"&&(this.joinInfo.apRequestDetail="".concat(me("AP_REQUEST_DETAIL"),";").concat(n))})}async tryUnsubBeforeResub(n,o){try{await this.signal.request(Cr.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:n,ortc:[o]},!0)}catch(a){throw H.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),a),a}}async tryUnsubDataChannelBeforeResub(n,o){try{await this.signal.request(Cr.UNSUBSCRIBE,{stream_id:o.id},!0)}catch(a){throw H.warning("unsubscribe datachannel warning",a),a}}async tryUnpubBeforeRepub(n,o){try{await this.signal.request(Cr.UNPUBLISH,{stream_id:n,ortc:o},!0)}catch(a){throw H.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),a),a}}async tryUnpubDataChannelBeforeRepub(n,o){try{await this.signal.request(Cr.UNPUBLISH_DATASTREAM,{channnel_id:o.channelId},!0)}catch(a){throw H.warning("unpublish datastream warning: ",a),a}}async tryMassUnsubBeforeResub(n){const o={users:n.map(a=>({stream_id:a.stream_id,stream_type:a.stream_type}))};try{await this.signal.request(Cr.UNSUBSCRIBE_STREAMS,o,!0)}catch(a){throw H.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),a),a}}async muteLocal(n,o){const a={action:n.find(l=>l.stream_type===Fn.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:o};try{await this.signal.request(Cr.CONTROL,a,!0,!0)}catch(l){throw H.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(n,o){const a={action:n.find(l=>l.stream_type===Fn.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:o};try{await this.signal.request(Cr.CONTROL,a,!0,!0)}catch(l){throw H.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}async muteRemote(n,o){const a={action:n===jt.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:o};try{await this.signal.request(Cr.CONTROL,a,!0,!0)}catch(l){throw H.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),l),l}}async unmuteRemote(n,o){const a={action:n===jt.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:o};try{await this.signal.request(Cr.CONTROL,a,!0,!0)}catch(l){throw H.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),l),l}}uploadWRTCStats(n){this.signal.uploadWRTCStats(n)}upload(n,o){this.signal.upload(n,o)}getSignalRTT(){return this.signal.rtt}async restartICE(n){const o={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:n};try{return await this.signal.request(Cr.RESTART_ICE,o,!0)}catch(a){throw H.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),a),a}}reconnect(n,o){this.state==="CONNECTED"&&this.signal.reconnect(n||void 0,o||Zs.P2P_FAILED)}getCurrentGatewayAddress(){var n,o;if(!me("GATEWAY_WSS_ADDRESS"))return me("USE_CANDIDATE_FROM_AP_DETAIL")&&(n=this.joinInfo)!==null&&n!==void 0&&n.apGatewayAddress?(H.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(o=this.joinInfo)!==null&&o!==void 0&&o.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(n){await this.signal.request(Cr.SET_PARAMETER,{enablePublishAudioFilter:n})}downgradeCodec(n){this.signal.downgradeCodec(n)}}let y2=0,pU=0;function Yf(r,n,o,a){return new Mt((l,d)=>{n.timeout=n.timeout||me("HTTP_CONNECT_TIMEOUT"),n.responseType=n.responseType||"json",n.data&&!o?(n.data=JSON.stringify(n.data),y2+=pp(n.data)):o&&(n.data.size?y2+=n.data.size:n.data instanceof FormData?y2+=YG(n.data):y2+=pp(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=r,Yc.request(n).then(h=>{typeof h.data=="string"?pU+=pp(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?pU+=h.data.byteLength:pU+=pp(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{Yc.isCancel(h)?d(new Je(de.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?d(new Je(de.NETWORK_TIMEOUT,h.message)):h.response?d(new Je(de.NETWORK_RESPONSE_ERROR,h.response.status)):d(new Je(de.NETWORK_ERROR,h.message))})})}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var r;function n(ct){var Ct=0;return function(){return Ct<ct.length?{done:!1,value:ct[Ct++]}:{done:!0}}}var o=typeof Object.defineProperties=="function"?Object.defineProperty:function(ct,Ct,Xt){return ct==Array.prototype||ct==Object.prototype||(ct[Ct]=Xt.value),ct},a,l=function(ct){ct=[typeof globalThis=="object"&&globalThis,ct,typeof window=="object"&&window,typeof self=="object"&&self,typeof s=="object"&&s];for(var Ct=0;Ct<ct.length;++Ct){var Xt=ct[Ct];if(Xt&&Xt.Math==Math)return Xt}throw Error("Cannot find global object")}(this);function d(ct,Ct){if(Ct)e:{var Xt=l;ct=ct.split(".");for(var ft=0;ft<ct.length-1;ft++){var W=ct[ft];if(!(W in Xt))break e;Xt=Xt[W]}(Ct=Ct(ft=Xt[ct=ct[ct.length-1]]))!=ft&&Ct!=null&&o(Xt,ct,{configurable:!0,writable:!0,value:Ct})}}function h(ct){return(ct={next:ct})[Symbol.iterator]=function(){return this},ct}function v(ct){var Ct=typeof Symbol<"u"&&Symbol.iterator&&ct[Symbol.iterator];return Ct?Ct.call(ct):{next:n(ct)}}if(d("Symbol",function(ct){function Ct(W,Se){this.A=W,o(this,"description",{configurable:!0,writable:!0,value:Se})}if(ct)return ct;Ct.prototype.toString=function(){return this.A};var Xt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",ft=0;return function W(Se){if(this instanceof W)throw new TypeError("Symbol is not a constructor");return new Ct(Xt+(Se||"")+"_"+ft++,Se)}}),d("Symbol.iterator",function(ct){if(ct)return ct;ct=Symbol("Symbol.iterator");for(var Ct="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Xt=0;Xt<Ct.length;Xt++){var ft=l[Ct[Xt]];typeof ft=="function"&&typeof ft.prototype[ct]!="function"&&o(ft.prototype,ct,{configurable:!0,writable:!0,value:function(){return h(n(this))}})}return ct}),typeof Object.setPrototypeOf=="function")a=Object.setPrototypeOf;else{var _;e:{var y={};try{y.__proto__={a:!0},_=y.a;break e}catch{}_=!1}a=_?function(ct,Ct){if(ct.__proto__=Ct,ct.__proto__!==Ct)throw new TypeError(ct+" is not extensible");return ct}:null}var C=a;function B(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function L(ct){if(ct.m)throw new TypeError("Generator is already running");ct.m=!0}function x(ct,Ct){return ct.h=3,{value:Ct}}function X(ct){this.g=new B,this.G=ct}function G(ct,Ct,Xt,ft){try{var W=Ct.call(ct.g.j,Xt);if(!(W instanceof Object))throw new TypeError("Iterator result "+W+" is not an object");if(!W.done)return ct.g.m=!1,W;var Se=W.value}catch(Ne){return ct.g.j=null,ct.g.s(Ne),q(ct)}return ct.g.j=null,ft.call(ct.g,Se),q(ct)}function q(ct){for(;ct.g.h;)try{var Ct=ct.G(ct.g);if(Ct)return ct.g.m=!1,{value:Ct.value,done:!1}}catch(Xt){ct.g.v=void 0,ct.g.s(Xt)}if(ct.g.m=!1,ct.g.l){if(Ct=ct.g.l,ct.g.l=null,Ct.F)throw Ct.D;return{value:Ct.return,done:!0}}return{value:void 0,done:!0}}function Ae(ct){this.next=function(Ct){return ct.o(Ct)},this.throw=function(Ct){return ct.s(Ct)},this.return=function(Ct){return function(Xt,ft){L(Xt.g);var W=Xt.g.j;return W?G(Xt,"return"in W?W.return:function(Se){return{value:Se,done:!0}},ft,Xt.g.return):(Xt.g.return(ft),q(Xt))}(ct,Ct)},this[Symbol.iterator]=function(){return this}}function ue(ct,Ct){return Ct=new Ae(new X(Ct)),C&&ct.prototype&&C(Ct,ct.prototype),Ct}if(B.prototype.o=function(ct){this.v=ct},B.prototype.s=function(ct){this.l={D:ct,F:!0},this.h=this.C||this.u},B.prototype.return=function(ct){this.l={return:ct},this.h=this.u},X.prototype.o=function(ct){return L(this.g),this.g.j?G(this,this.g.j.next,ct,this.g.o):(this.g.o(ct),q(this))},X.prototype.s=function(ct){return L(this.g),this.g.j?G(this,this.g.j.throw,ct,this.g.o):(this.g.s(ct),q(this))},d("Array.prototype.entries",function(ct){return ct||function(){return function(Ct,Xt){Ct instanceof String&&(Ct+="");var ft=0,W=!1,Se={next:function(){if(!W&&ft<Ct.length){var Ne=ft++;return{value:Xt(Ne,Ct[Ne]),done:!1}}return W=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}(this,function(Ct,Xt){return[Ct,Xt]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var _e=function(ct,Ct){for(var Xt=0;Xt<ct.length;Xt++)Ct(ct[Xt])},De=function(ct){return ct.replace(/\r?\n|\r/g,`\r
`)},Le=function(ct,Ct,Xt){return Ct instanceof Blob?(Xt=Xt!==void 0?Xt+"":typeof Ct.name=="string"?Ct.name:"blob",Ct.name===Xt&&Object.prototype.toString.call(Ct)!=="[object Blob]"||(Ct=new File([Ct],Xt)),[String(ct),Ct]):[String(ct),String(Ct)]},Te=function(ct,Ct){if(ct.length<Ct)throw new TypeError(Ct+" argument required, but only "+ct.length+" present.")},ze=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,rt=ze.FormData,At=ze.XMLHttpRequest&&ze.XMLHttpRequest.prototype.send,wt=ze.Request&&ze.fetch,Gr=ze.navigator&&ze.navigator.sendBeacon,en=ze.Element&&ze.Element.prototype,Or=ze.Symbol&&Symbol.toStringTag;Or&&(Blob.prototype[Or]||(Blob.prototype[Or]="Blob"),"File"in ze&&!File.prototype[Or]&&(File.prototype[Or]="File"));try{new File([],"")}catch{ze.File=function(Ct,Xt,ft){return Ct=new Blob(Ct,ft||{}),Object.defineProperties(Ct,{name:{value:Xt},lastModified:{value:+(ft&&ft.lastModified!==void 0?new Date(ft.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Or&&Object.defineProperty(Ct,Or,{value:"File"}),Ct}}var Ln=function(ct){return ct.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Tn=function(ct){this.i=[];var Ct=this;ct&&_e(ct.elements,function(Xt){if(Xt.name&&!Xt.disabled&&Xt.type!=="submit"&&Xt.type!=="button"&&!Xt.matches("form fieldset[disabled] *"))if(Xt.type==="file"){var ft=Xt.files&&Xt.files.length?Xt.files:[new File([],"",{type:"application/octet-stream"})];_e(ft,function(W){Ct.append(Xt.name,W)})}else Xt.type==="select-multiple"||Xt.type==="select-one"?_e(Xt.options,function(W){!W.disabled&&W.selected&&Ct.append(Xt.name,W.value)}):Xt.type==="checkbox"||Xt.type==="radio"?Xt.checked&&Ct.append(Xt.name,Xt.value):(ft=Xt.type==="textarea"?De(Xt.value):Xt.value,Ct.append(Xt.name,ft))})};if((r=Tn.prototype).append=function(ct,Ct,Xt){Te(arguments,2),this.i.push(Le(ct,Ct,Xt))},r.delete=function(ct){Te(arguments,1);var Ct=[];ct=String(ct),_e(this.i,function(Xt){Xt[0]!==ct&&Ct.push(Xt)}),this.i=Ct},r.entries=function ct(){var Ct,Xt=this;return ue(ct,function(ft){if(ft.h==1&&(Ct=0),ft.h!=3)return Ct<Xt.i.length?ft=x(ft,Xt.i[Ct]):(ft.h=0,ft=void 0),ft;Ct++,ft.h=2})},r.forEach=function(ct,Ct){Te(arguments,1);for(var Xt=v(this),ft=Xt.next();!ft.done;ft=Xt.next()){var W=v(ft.value);ft=W.next().value,W=W.next().value,ct.call(Ct,W,ft,this)}},r.get=function(ct){Te(arguments,1);var Ct=this.i;ct=String(ct);for(var Xt=0;Xt<Ct.length;Xt++)if(Ct[Xt][0]===ct)return Ct[Xt][1];return null},r.getAll=function(ct){Te(arguments,1);var Ct=[];return ct=String(ct),_e(this.i,function(Xt){Xt[0]===ct&&Ct.push(Xt[1])}),Ct},r.has=function(ct){Te(arguments,1),ct=String(ct);for(var Ct=0;Ct<this.i.length;Ct++)if(this.i[Ct][0]===ct)return!0;return!1},r.keys=function ct(){var Ct,Xt,ft,W,Se=this;return ue(ct,function(Ne){if(Ne.h==1&&(Ct=v(Se),Xt=Ct.next()),Ne.h!=3)return Xt.done?void(Ne.h=0):(ft=Xt.value,W=v(ft),x(Ne,W.next().value));Xt=Ct.next(),Ne.h=2})},r.set=function(ct,Ct,Xt){Te(arguments,2),ct=String(ct);var ft=[],W=Le(ct,Ct,Xt),Se=!0;_e(this.i,function(Ne){Ne[0]===ct?Se&&(Se=!ft.push(W)):ft.push(Ne)}),Se&&ft.push(W),this.i=ft},r.values=function ct(){var Ct,Xt,ft,W,Se=this;return ue(ct,function(Ne){if(Ne.h==1&&(Ct=v(Se),Xt=Ct.next()),Ne.h!=3)return Xt.done?void(Ne.h=0):(ft=Xt.value,(W=v(ft)).next(),x(Ne,W.next().value));Xt=Ct.next(),Ne.h=2})},Tn.prototype._asNative=function(){for(var ct=new rt,Ct=v(this),Xt=Ct.next();!Xt.done;Xt=Ct.next()){var ft=v(Xt.value);Xt=ft.next().value,ft=ft.next().value,ct.append(Xt,ft)}return ct},Tn.prototype._blob=function(){var ct="----formdata-polyfill-"+Math.random(),Ct=[],Xt="--"+ct+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(ft,W){return typeof ft=="string"?Ct.push(Xt+Ln(De(W))+`"\r
\r
`+De(ft)+`\r
`):Ct.push(Xt+Ln(De(W))+'"; filename="'+Ln(ft.name)+`"\r
Content-Type: `+(ft.type||"application/octet-stream")+`\r
\r
`,ft,`\r
`)}),Ct.push("--"+ct+"--"),new Blob(Ct,{type:"multipart/form-data; boundary="+ct})},Tn.prototype[Symbol.iterator]=function(){return this.entries()},Tn.prototype.toString=function(){return"[object FormData]"},en&&!en.matches&&(en.matches=en.matchesSelector||en.mozMatchesSelector||en.msMatchesSelector||en.oMatchesSelector||en.webkitMatchesSelector||function(ct){for(var Ct=(ct=(this.document||this.ownerDocument).querySelectorAll(ct)).length;0<=--Ct&&ct.item(Ct)!==this;);return-1<Ct}),Or&&(Tn.prototype[Or]="FormData"),At){var Ea=ze.XMLHttpRequest.prototype.setRequestHeader;ze.XMLHttpRequest.prototype.setRequestHeader=function(ct,Ct){Ea.call(this,ct,Ct),ct.toLowerCase()==="content-type"&&(this.B=!0)},ze.XMLHttpRequest.prototype.send=function(ct){ct instanceof Tn?(ct=ct._blob(),this.B||this.setRequestHeader("Content-Type",ct.type),At.call(this,ct)):At.call(this,ct)}}wt&&(ze.fetch=function(ct,Ct){return Ct&&Ct.body&&Ct.body instanceof Tn&&(Ct.body=Ct.body._blob()),wt.call(this,ct,Ct)}),Gr&&(ze.navigator.sendBeacon=function(ct,Ct){return Ct instanceof Tn&&(Ct=Ct._asNative()),Gr.call(this,ct,Ct)}),ze.FormData=Tn}})();const GS=()=>{const r=me("AREAS");return r.length===0&&r.push(Nn.GLOBAL),ka(r).call(r,(n,o,a)=>{const l=_Y(o);return l?a===0?l:"".concat(n,",").concat(l):n},"")},_Y=r=>r===Nn.OVERSEA?"".concat(va.ASIA,",").concat(va.EUROPE,",").concat(va.AFRICA,",").concat(va.NORTH_AMERICA,",").concat(va.SOUTH_AMERICA,",").concat(va.OCEANIA):va[r],mbe=r=>{const n={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return r.map(o=>{const a=A2[o],l=Object.keys(a);l&&l.map(d=>{d!=="CODE"&&(n[d]=n[d].concat(a[d]))})}),n},E2={GLOBAL:{ASIA:[Nn.CHINA,Nn.JAPAN,Nn.INDIA,Nn.KOREA,Nn.HKMC],EUROPE:[],NORTH_AMERICA:[Nn.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},w2=Object.keys(E2[Nn.GLOBAL]),gU=[Nn.CHINA,Nn.NORTH_AMERICA,Nn.EUROPE,Nn.ASIA,Nn.JAPAN,Nn.INDIA,Nn.OCEANIA,Nn.SOUTH_AMERICA,Nn.AFRICA,Nn.KOREA,Nn.HKMC,Nn.US],vbe=function(r,n){let o=[];if(_t(r).call(r,Nn.GLOBAL)){const d=[Nn.GLOBAL,Nn.OVERSEA],h=Object.keys(A2);if(n===Nn.GLOBAL)throw new Je(de.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(n===Nn.CHINA)o=[Nn.OVERSEA];else if(l=n,_t(w2).call(w2,l)){const v=(a=n,E2[Nn.GLOBAL][a]||[]),_=[...d,n,...v];o=h.filter(y=>!_t(_).call(_,y))}else if(function(v){let _=!1;return w2.forEach(y=>{var C;_t(C=E2[Nn.GLOBAL][y]).call(C,v)&&(_=!0)}),_}(n)){const v=function(y){let C;return w2.forEach(B=>{var L;_t(L=E2[Nn.GLOBAL][B]).call(L,y)&&(C=B)}),C}(n),_=[...d,v,n];o=h.filter(y=>!_t(_).call(_,y))}else o=r;o=function(v){const _=[];return gU.forEach(y=>{_t(v).call(v,y)&&_.push(y)}),_.concat(v.filter(y=>!_t(gU).call(gU,y)))}(o)}else o=r;var a,l;return o};function yY(r){var n,o;if(!r&&_t(n=me("AREAS")).call(n,Nn.EXTENSIONS))return H.debug("update area from ap : reset"),void mU(TSe,!0);if(!_t(o=me("AREAS")).call(o,Nn.GLOBAL)||!r)return;let a=A2.EXTENSIONS;a&&(a={CODE:_Y(Nn.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(r,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(r,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(r,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(r,".agora.io"),"cds-ap-web-2-".concat(r,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(r,".agora.io"),"sua-ap-web-2-".concat(r,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(r,".agora.io"),"uap-ap-web-2-".concat(r,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(r,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(r,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(r,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(r,".agora.io")]},H.debug("update area from ap success: ".concat(r,",config is "),a),zn("AREAS",[Nn.EXTENSIONS],!0),Object.keys(a).map(l=>{l==="LOG_UPLOAD_SERVER"||l==="EVENT_REPORT_DOMAIN"||l==="EVENT_REPORT_BACKUP_DOMAIN"||l==="PROXY_SERVER_TYPE3"?zn(l,a[l][0]):zn(l,a[l])}))}function mU(r){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=rr.reportApiInvoke(null,{name:Ji.SET_AREA,options:r,tag:Oi.TRACER});try{let a=[];if(typeof r=="string"&&(a=[r]),Array.isArray(r)&&(r.forEach(d=>{if(!_t(Qq).call(Qq,d))throw new Je(de.INVALID_PARAMS,"invalid area code")}),a=r),Object.prototype.toString.call(r)==="[object Object]"){const{areaCode:d,excludedArea:h}=r;if(!d)throw new Je(de.INVALID_PARAMS,"area code is needed");let v=d;typeof d=="string"&&(v=[d]),a=h?vbe(v,h):v}if(!n){if(Gf.AREAS){const d=new Je(de.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return o.onError(d),void H.warning("setArea is prohibited because of config-distribute")}if(_t(a).call(a,Nn.GLOBAL)&&me("AREAS")===Nn.EXTENSIONS){const d=new Je(de.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return o.onError(d),void H.warning("setArea is prohibited because of ap extensions")}}zn("AREAS",a,n);const l=mbe(a);Object.keys(l).map(d=>{d==="LOG_UPLOAD_SERVER"||d==="EVENT_REPORT_DOMAIN"||d==="EVENT_REPORT_BACKUP_DOMAIN"||d==="PROXY_SERVER_TYPE3"?zn(d,l[d][0]):zn(d,l[d])}),H.debug("set area success:",a.join(","))}catch(a){throw o.onError(a),a}o.onSuccess()}function EY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function wp(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?EY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):EY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}let vU=1;function _be(r,n,o,a,l){vU+=1;const d={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:vU,requestId:vU,version:yA,cname:o.cname},h={service_name:n,json_body:JSON.stringify(d)};let v,_,y=r[0];return Wf(async()=>{v=Date.now();const C=await Yf(y,{data:h,cancelToken:a,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(_=Date.now()-v,C.code!==0){const x=new Je(de.UNEXPECTED_RESPONSE,"live streaming ap error, code"+C.code,{retry:!0,responseTime:_});throw H.error(x.toString()),x}const B=JSON.parse(C.json_body);if(B.code!==200){const x=new Je(de.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(B.code,", reason: ").concat(B.reason),{code:B.code,responseTime:_});throw H.error(x.toString()),x}if(!B.servers||B.servers.length===0){const x=new Je(de.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:B.code,responseTime:_});throw H.error(x.toString()),x}const L=function(x,X){return{addressList:x.servers.map(G=>"wss://".concat(G.address.replace(/\./g,"-"),".").concat(me("WORKER_DOMAIN"),":").concat(G.wss,"?serviceName=").concat(encodeURIComponent(X))),workerToken:x.workerToken,vid:x.vid}}(B,n);return me("LIVE_STREAMING_ADDRESS")&&(L.addressList=me("LIVE_STREAMING_ADDRESS")instanceof Array?me("LIVE_STREAMING_ADDRESS"):[me("LIVE_STREAMING_ADDRESS")]),wp(wp({},L),{},{responseTime:_})},(C,B)=>(rr.apworkerEvent(o.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(C.addressList),firstSuccess:B===0,responseTime:_,serverIp:r[B%r.length]}),!1),(C,B)=>(rr.apworkerEvent(o.sid,{success:!1,sc:C.data&&C.data.code||200,serviceName:n,responseTime:_,serverIp:r[B%r.length]}),!!(C.code!==de.OPERATION_ABORTED&&C.code!==de.UNEXPECTED_RESPONSE||C.data&&C.data.retry)&&(y=r[(B+1)%r.length],!0)),l)}let _U=1;function wY(r,n,o,a){let{url:l,areaCode:d}=r;const{clientId:h,sid:v}=n,_=Date.now();let y;const C=n.role,[B,L]=EU(n,d,[po.CHOOSE_SERVER]);let x=ho.networkState;return Wf(async()=>{x&&ho.networkState===tu.OFFLINE&&ho.onlineWaiter&&await Mt.race([ho.onlineWaiter,Ps(a&&a.maxRetryTimeout||Ro.maxRetryTimeout)]),x=ho.networkState;const{data:X,headers:G}=await Yf(l,{data:B,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);y=G.http3==="1"?1:-1,rr.reportResourceTiming(l,v),bY(X,l,n,_,[po.CHOOSE_SERVER],y);const q=HS(X,po.CHOOSE_SERVER);return yU(q),uU(q,l)},X=>(X&&rr.joinChooseServer(v,{role:C,lts:_,succ:!0,csAddr:l,opid:L,serverList:X.gatewayAddrs.map(G=>G.address),ec:null,cid:X.cid.toString(),uid:X.uid.toString(),csIp:X.csIp,unilbsServerIds:[po.CHOOSE_SERVER].toString(),isHttp3:y,corssRegionTagReq:n.apRequestDetail,corssRegionTagRes:X.res.detail&&X.res.detail[38]}),!1),X=>X.code!==de.OPERATION_ABORTED&&(X.code===de.CAN_NOT_GET_GATEWAY_SERVER?X.data.retry:(rr.joinChooseServer(v,{role:C,lts:_,succ:!1,csAddr:l,serverList:null,opid:L,ec:X.code,csIp:X.data&&X.data.csIp,unilbsServerIds:[po.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:x}),isHttp3:y,corssRegionTagReq:n.apRequestDetail}),H.warning("[".concat(h||"sid-".concat(v.slice(0,6)),"] Choose server network error, retry"),X),!0)),a)}function SY(r,n,o,a){let l,{url:d,areaCode:h,serviceIds:v}=r;const _=Date.now(),y=n.role,[C,B]=EU(n,h,v);let L;return Wf(async()=>{L&&ho.networkState===tu.OFFLINE&&ho.onlineWaiter&&await Mt.race([ho.onlineWaiter,Ps(a&&a.maxRetryTimeout||Ro.maxRetryTimeout)]),L=ho.networkState;const{data:x,headers:X}=await Yf(d,{data:C,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=X.http3==="1"?1:-1,rr.reportResourceTiming(d,n.sid),bY(x,d,n,_,v,l);const G=HS(x,po.CHOOSE_SERVER),q=HS(x,n.cloudProxyServer==="proxy5"?po.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?po.CLOUD_PROXY:po.CLOUD_PROXY_FALLBACK),Ae=performance.getEntriesByName(d),ue=Ae[Ae.length-1];let _e;return ue&&(_e={name:ue.name,protocol:"nextHopProtocol"in ue?ue.nextHopProtocol:"",dnscost:"domainLookupEnd"in ue&&"domainLookupStart"in ue&&typeof ue.domainLookupEnd=="number"&&typeof ue.domainLookupStart=="number"?ue.domainLookupEnd-ue.domainLookupStart:-1,tcpTlsCost:"connectEnd"in ue&&"connectStart"in ue&&typeof ue.connectEnd=="number"&&typeof ue.connectStart=="number"?ue.connectEnd-ue.connectStart:-1,reqCost:"requestStart"in ue&&typeof ue.requestStart=="number"&&"responseEnd"in ue&&typeof ue.responseEnd=="number"?ue.responseEnd-ue.requestStart:-1,handleCost:"leave_ts"in x&&"enter_ts"in x&&typeof x.leave_ts=="number"&&typeof x.enter_ts=="number"?x.leave_ts-x.enter_ts:-1}),yU(G),{gatewayInfo:uU(G,d),proxyInfo:q,url:d,resourceTimingInfo:_e}},x=>(x.gatewayInfo&&rr.joinChooseServer(n.sid,{role:y,lts:_,succ:!0,csAddr:d,serverList:x.gatewayInfo.gatewayAddrs.map(X=>X.address),ec:null,opid:B,cid:x.gatewayInfo.cid.toString(),uid:x.gatewayInfo.uid.toString(),csIp:x.gatewayInfo.csIp,unilbsServerIds:v.toString(),isHttp3:l,corssRegionTagReq:n.apRequestDetail,corssRegionTagRes:x.gatewayInfo.res.detail&&x.gatewayInfo.res.detail[38],resourceTimingInfo:x.resourceTimingInfo?JSON.stringify(x.resourceTimingInfo):void 0}),x.proxyInfo&&rr.joinWebProxyAP(n.sid,{lts:_,sucess:1,apServerAddr:d,turnServerAddrList:x.proxyInfo.addresses.map(X=>X.ip).join(","),errorCode:null,eventType:n.cloudProxyServer,unilbsServerIds:v.toString()}),!1),x=>x.code!==de.OPERATION_ABORTED&&(x.code===de.CAN_NOT_GET_GATEWAY_SERVER?x.data.retry:(rr.joinWebProxyAP(n.sid,{lts:_,sucess:0,apServerAddr:d,turnServerAddrList:null,errorCode:x.code,eventType:n.cloudProxyServer,unilbsServerIds:v.toString(),extend:JSON.stringify({networkState:L})}),H.warning("[".concat(n.clientId,"] multi unilbs network error, retry"),x),!0)),a)}const bY=(r,n,o,a,l,d)=>{const{sid:h,clientId:v,cloudProxyServer:_}=o,y=[],C=B=>{B.flag===4096?rr.joinChooseServer(h,{role:o.role,lts:a,succ:!1,csAddr:n,opid:r.opid,serverList:null,ec:B.error.message,csIp:B.error.data&&B.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:d,corssRegionTagReq:o.apRequestDetail}):B.flag!==1048576&&B.flag!==4194304&&B.flag!==4194310||rr.joinWebProxyAP(h,{lts:a,sucess:0,apServerAddr:n,turnServerAddrList:null,errorCode:B.error.code,eventType:_,unilbsServerIds:l.toString()})};if(r.response_body.forEach(B=>{const L=B.buffer.code;if(B.uri===23&&L===0&&!B.buffer.edges_services)if(B.buffer.flag===4194310)H.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),B.buffer.edges_services=[];else{const x={error:new Je(de.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:r.detail[502]}),flag:B.buffer.flag};y.push(x),C(x)}if(L!==0){const x=xy(L),X={error:new Je(de.CAN_NOT_GET_GATEWAY_SERVER,x.desc,{desc:x.desc,retry:x.retry,csIp:r.detail[502]}),flag:B.buffer.flag};B.buffer.flag===4194310?H.warning(X.error.toString()):y.push(X),C(X)}}),y.length)throw H.warning("[".concat(v||"sid-".concat(h.slice(0,6)),"] multi unilbs ").concat(n," failed, ").concat(y.map(B=>"flag: ".concat(B.flag,", message: ").concat(B.error.message,", retry: ").concat(B.error.data.retry)).join(" | "))),new Je(de.CAN_NOT_GET_GATEWAY_SERVER,y.map(B=>"flag: ".concat(B.flag,", message: ").concat(B.error.message)).join(" | "),{retry:!!y.find(B=>B.error.data.retry),csIp:r.detail[502],desc:[...new Set(y.map(B=>{var L;return B==null||(L=B.error)===null||L===void 0||(L=L.data)===null||L===void 0?void 0:L.desc}).filter(B=>!!B))]})},yU=r=>{var n,o,a,l;if(r.addresses&&r.addresses.length===0&&r.code===0)throw new Je(de.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:r.detail&&r.detail[502]});if(me("AP_AREA")&&((a=r.detail)!==null&&a!==void 0&&a[23]&&typeof((l=r.detail)===null||l===void 0?void 0:l[23])=="string"?yY(r.detail[23].toLowerCase()):yY()),(n=r.detail)!==null&&n!==void 0&&n[19]&&typeof((o=r.detail)===null||o===void 0?void 0:o[19])=="string"){const h=r.detail[19],v=h==null?void 0:h.split(";");for(let _=0;_<v.length;_++){var d;const y=nc(d=v[_]).call(d);r.addresses[_]&&v&&(r.addresses[_].fingerprint=y)}}if(me("GATEWAY_ADDRESS")&&me("GATEWAY_ADDRESS").length>0){H.debug("assign gateway address to",me("GATEWAY_ADDRESS"));const h=me("GATEWAY_ADDRESS").map(v=>{var _,y;const C=(_=(y=r.addresses.find(B=>B.ip===v.ip&&B.port===v.port))===null||y===void 0?void 0:y.fingerprint)!==null&&_!==void 0?_:"";return{ip:v.ip,port:v.port,ticket:r.addresses[0]&&r.addresses[0].ticket,fingerprint:C}});r.addresses=h}},ybe=(r,n)=>{if(r.response_body&&r.response_body.length){const o=r.response_body[0];if(o.buffer.code!==0){const a=xy(o.buffer.code);throw new Je(de.UPDATE_TICKET_FAILED,"[".concat(o.buffer.code,"]: ").concat(a.desc),{retry:a.retry})}return o.buffer.ticket}throw H.debug("update ticket request received ap response without response body:",n),new Je(de.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},EU=(r,n,o)=>{const a=Math.floor(Math.random()*1e12),l=r.role==="host"?"1":r.role==="audience"?"2":void 0,d={appid:r.appId,client_ts:Date.now(),opid:a,sid:r.sid,request_bodies:[{uri:22,buffer:{cname:r.cname,detail:wp(wp(wp({6:r.stringUid,11:n,12:me("USE_NEW_TOKEN")?"1":void 0},l?{17:l}:{}),{},{22:n},r.apRequestDetail?{33:r.apRequestDetail}:{}),r.apRTM?{26:"RTM2"}:{}),key:r.token,service_ids:o,uid:r.uid||0}}]};d.request_bodies.forEach(v=>{r.multiIP&&r.multiIP.gateway_ip&&(v.buffer.detail[5]=JSON.stringify({vocs_ip:[r.multiIP.uni_lbs_ip],vos_ip:[r.multiIP.gateway_ip]}))});const h=new FormData;return h.append("request",JSON.stringify(d)),[h,a]},Ebe=(r,n)=>{const o=Math.floor(Math.random()*1e12),a={appid:r.appId,client_ts:Date.now(),opid:o,sid:r.sid,request_bodies:[{uri:28,buffer:{cname:r.cname,detail:{1:"",6:r.stringUid,12:"1"},token:r.token,service_ids:n,uid:r.uid||0,edges_services:r.apResponse.addresses.map(d=>({ip:d.ip,port:d.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(a)),[l,o]};let Vy=0;function Qy(r){return Mt.all(r.map(n=>n.then(o=>{throw o},o=>o))).then(n=>{throw n},n=>n)}const $S=async r=>{let{fragementLength:n,referenceList:o,asyncMapHandler:a,allFailedhandler:l,promisesCollector:d}=r,h=0;const v=n;let _,y=0;const C=async()=>{const B=(()=>{const L=h*v,x=L+v;return o.slice(L,x).map(a)})();d&&d.push(...B);try{_=await Qy(B)}catch(L){if(y+=v,h++,!(y>=o.length))return void await C();l(L)}B.forEach(L=>L.cancel())};return await C(),_},CY=async r=>{let{referenceList:n,asyncMapHandler:o,closeFn:a}=r;const l=n.length;let d=0;const h=async()=>{const v=o(n.shift());try{return await v}catch(_){if(d++,d>=l||a!=null&&a(_))throw _;return h()}};return h()};async function wbe(){if(typeof VideoDecoder>"u")return!0;let r;const n=[18,0,10,13,0,0,0,3,180,253,144,6,136,8,8,8,32,50,85,16,66,128,2,8,32,132,0,8,0,180,90,204,169,166,242,109,241,190,143,149,160,133,4,144,43,122,168,159,120,159,205,39,82,131,57,52,87,187,68,23,248,134,204,226,97,17,49,183,55,236,219,249,221,98,208,215,190,59,179,167,213,47,1,246,150,14,194,245,159,83,35,64,103,218,38,21,82,3,135,21,185,84,248,134],o=[18,0,10,13,0,0,0,3,180,253,144,6,136,8,8,8,32,50,87,16,66,128,2,8,32,132,0,8,0,180,90,204,169,166,242,109,241,190,143,148,62,134,140,92,172,141,77,35,94,181,164,65,169,65,156,154,43,221,162,11,252,67,102,113,48,136,137,219,62,43,113,239,23,126,250,186,252,10,138,218,25,193,244,74,68,194,209,107,23,52,206,199,78,72,98,103,151,71,96,62,51,210,158,72,231,158],a=[18,0,10,13,0,0,0,3,180,253,144,6,136,8,8,8,32,50,87,16,66,128,2,8,32,132,0,8,0,180,90,204,169,166,242,109,241,190,143,143,233,163,51,196,98,95,151,224,22,134,33,240,150,248,67,18,34,196,142,81,238,173,140,80,205,232,132,144,67,12,131,157,4,171,243,86,122,35,6,166,184,243,85,126,13,206,103,152,62,168,160,187,2,241,138,52,211,72,121,128,151,63,147,128,19,42],l=[18,0,50,138,1,48,192,64,253,248,65,17,67,192,32,0,16,0,0,0,0,0,0,0,195,12,48,144,64,32,0,209,75,61,9,204,25,115,79,226,115,63,63,208,70,210,220,153,126,241,237,37,107,195,153,1,99,112,230,189,209,169,130,10,11,22,167,215,159,205,197,7,183,162,26,48,254,141,134,103,32,16,235,45,1,15,18,119,169,110,206,251,51,115,202,60,148,1,46,39,109,25,28,86,168,15,77,211,239,2,58,43,146,26,230,184,81,48,140,226,226,250,222,146,171,133,164,13,188,180,64,122,142,146,32,208,238,170,193,35,53,44,225],d=[18,0,50,107,48,0,133,125,248,65,26,195,64,62,32,31,16,0,0,0,0,0,1,4,16,64,144,64,32,0,204,24,122,65,56,165,18,52,206,218,4,187,51,97,9,29,191,90,253,106,185,31,197,155,52,205,245,185,203,131,20,226,25,124,95,113,220,113,141,15,15,104,211,144,152,237,150,157,127,51,143,24,231,218,171,255,176,241,128,229,149,150,148,66,245,228,91,27,182,228,136,61,182,237,133,45,220,24,103,214,152],h=[18,0,50,122,48,1,9,253,248,65,26,67,64,62,32,31,16,0,0,0,0,0,1,4,16,64,144,64,32,0,198,182,231,242,220,235,163,140,12,36,36,166,46,132,210,4,71,23,218,132,27,30,17,45,244,79,31,243,195,136,100,169,76,88,142,85,204,217,121,168,29,163,198,17,251,223,73,12,212,244,139,123,151,179,75,216,96,208,136,40,229,42,59,149,10,116,228,85,99,93,221,108,255,140,248,20,30,167,122,109,206,164,108,197,110,251,23,243,133,160,63,13,207,177,12,128];return await new Mt((_,y)=>{let C;(async function(){r&&r.state!=="closed"||await async function(){r=new VideoDecoder({output:L=>{L.close(),clearTimeout(C),_(!0)},error:L=>{clearTimeout(C),_(!1)}}),await r.configure({codec:"av01.0.05M.08",width:160,height:90})}();const B=[n,o,a,l,d,h];for(let L=0;L<B.length;L++){const x=new EncodedVideoChunk({type:L==0?"key":"delta",timestamp:33333*L,duration:33333,data:new Uint8Array(B[L])});try{await r.decode(x)}catch{return void _(!1)}}})(),C=setTimeout(()=>{_(!1)},5e3)})}async function wU(r,n,o,a){return{gatewayInfo:await async function(d,h,v,_){let y=null;const C=[],B=async()=>{const x=me("WEBCS_DOMAIN").slice(0,me("AJAX_REQUEST_CONCURRENT")).map(q=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(q+"/api/v2/transpond/webrtc?v=2"):"https://".concat(q,"/api/v2/transpond/webrtc?v=2"),areaCode:GS()})),X=_.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:x.map(q=>q.url)}),G=await $S({fragementLength:me("FRAGEMENT_LENGTH"),referenceList:x,asyncMapHandler:q=>(H.debug("[".concat(d.clientId,"] Connect to choose_server:"),q.url),wY(q,d,h,v)),allFailedhandler:q=>{throw _.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},X),q[0]},promisesCollector:C});return _.recordJoinChannelService({endTs:Date.now(),status:"success"},X),G},L=async()=>{if(await Ps(1e3),y!==null)return y;const x=me("WEBCS_DOMAIN_BACKUP_LIST").map(q=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(q+"/api/v2/transpond/webrtc?v=2"):"https://".concat(q,"/api/v2/transpond/webrtc?v=2"),areaCode:GS()})),X=_.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:x.map(q=>q.url)}),G=await $S({fragementLength:me("FRAGEMENT_LENGTH"),referenceList:x,asyncMapHandler:q=>(H.debug("[".concat(d.clientId,"] Connect to backup choose_server:"),q.url),wY(q,d,h,v)),allFailedhandler:q=>{throw _.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},X),q[0]},promisesCollector:C});return _.recordJoinChannelService({endTs:Date.now(),status:"success"},X),G};try{return y=await Qy([B(),L()]),C.length&&C.forEach(x=>x.cancel&&typeof x.cancel=="function"&&x.cancel()),y}catch(x){throw x[0]}}(r,n,o,a)}}async function TY(r,n,o,a,l){const d=r.cloudProxyServer;if(d==="disabled"){if(!a)return;if(r.useLocalAccessPoint)return await wU(r,n,o,l);if(me("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:L,proxyInfo:x}=await OY(r,n,o,l);if(r.turnServer&&r.turnServer.mode!=="auto")return{gatewayInfo:L};const X=x.map(G=>({turnServerURL:G.address,tcpport:G.tcpport||ta.tcpport,udpport:G.udpport||ta.udpport,username:G.username||ta.username,password:G.password||ta.password,forceturn:!1,security:!0}));if(l.useP2P){var h;const G=(h=r.uid)!==null&&h!==void 0?h:L.uid,q="glb:".concat(G.toString()),Ae=await A5(q),ue=x.map(_e=>({turnServerURL:_e.address,tcpport:_e.tcpport||ta.tcpport,udpport:_e.udpport||ta.udpport,username:q,password:Ae,forceturn:!1,security:!0}));X.push(...ue)}return r.turnServer={mode:"manual",servers:X},{gatewayInfo:L}}return await wU(r,n,o,l)}const{proxyInfo:v,gatewayInfo:_}=await OY(r,n,o,l),y={gatewayInfo:_},C=v.map(L=>({turnServerURL:L.address,tcpport:d==="proxy3"?void 0:L.tcpport?L.tcpport:ta.tcpport,udpport:d==="proxy4"?void 0:L.udpport?L.udpport:ta.udpport,username:L.username||ta.username,password:L.password||ta.password,forceturn:d!=="proxy4",security:d==="proxy5"}));if(l.useP2P){var B;const L=(B=r.uid)!==null&&B!==void 0?B:_.uid,x="glb:".concat(L.toString()),X=await A5(x),G=v.map(q=>({turnServerURL:q.address,tcpport:d==="proxy3"?void 0:q.tcpport||ta.tcpport,udpport:d==="proxy4"?void 0:q.udpport||ta.udpport,username:x,password:X,forceturn:d!=="proxy4",security:d==="proxy5"}));C.push(...G)}return r.turnServer={mode:"manual",servers:C},H.debug("[".concat(r.clientId,"] set proxy server: ").concat(r.proxyServer,", mode: ").concat(d)),y}async function RY(r,n,o,a,l){const d=me("ACCOUNT_REGISTER").slice(0,me("AJAX_REQUEST_CONCURRENT"));let h=[];h=n.proxyServer?d.map(_=>"https://".concat(n.proxyServer,"/ap/?url=").concat(_+"/api/v1")):d.map(_=>"https://".concat(_,"/api/v1"));const v=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:h});try{const _=await async function(y,C,B,L,x){const X=Date.now(),G={sid:B.sid,opid:10,appid:B.appId,string_uid:C};let q=y[0];const Ae=await Wf(()=>Yf(q+"".concat(q.indexOf("?")===-1?"?":"&","action=stringuid"),{data:G,cancelToken:L,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(ue,_e)=>{if(ue.code===0){if(ue.uid<=0||ue.uid>=Math.pow(2,32))throw H.error("Invalid Uint Uid ".concat(C," => ").concat(ue.uid),ue),rr.reqUserAccount(G.sid,{lts:X,success:!1,serverAddr:q,stringUid:G.string_uid,uid:ue.uid,errorCode:de.INVALID_UINT_UID_FROM_STRING_UID,extend:G}),new Je(de.INVALID_UINT_UID_FROM_STRING_UID);return rr.reqUserAccount(G.sid,{lts:X,success:!0,serverAddr:q,stringUid:G.string_uid,uid:ue.uid,errorCode:null,extend:G}),!1}const De=xy(ue.code);return De.retry&&(q=y[(_e+1)%y.length]),rr.reqUserAccount(G.sid,{lts:X,success:!1,serverAddr:q,stringUid:G.string_uid,uid:ue.uid,errorCode:De.desc,extend:G}),De.retry},(ue,_e)=>ue.code!==de.OPERATION_ABORTED&&(rr.reqUserAccount(G.sid,{lts:X,success:!1,serverAddr:q,stringUid:G.string_uid,uid:null,errorCode:ue.code,extend:G}),q=y[(_e+1)%y.length],!0),x);if(Ae.code!==0){const ue=xy(Ae.code);throw new Je(de.UNEXPECTED_RESPONSE,ue.desc)}return Ae}(h,r,n,o,a);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},v),_.uid}catch(_){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[_]},v),_}}async function Sbe(r,n,o){const a=me("ACCOUNT_REGISTER");let l=[];l=n.proxyServer?a.map(d=>"https://".concat(n.proxyServer,"/ap/?url=").concat(d+"/api/v1")):a.map(d=>"https://".concat(d,"/api/v1"));try{return await CY({referenceList:l,asyncMapHandler:h=>async function(v,_,y,C){const B=Date.now(),L={sid:y.sid,opid:10,appid:y.appId,string_uid:_};try{const x=await Yf(v+"".concat(v.indexOf("?")===-1?"?":"&","action=stringuid"),{data:L,cancelToken:C,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(x.code!==0){const X=xy(x.code);throw new Je(de.UNEXPECTED_RESPONSE,"preload sua error:".concat(X.desc),X)}if(x.uid<=0||x.uid>=Math.pow(2,32))throw new Je(de.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:B,url:v,req:L,uid:x.uid,elapse:Date.now()-B}}catch(x){throw x}}(h,r,n,o),closeFn:h=>h.code===de.OPERATION_ABORTED||h.code===de.UNEXPECTED_RESPONSE&&!h.data.retry})}catch(d){throw d}}async function bbe(r,n,o){const a=me("CDS_AP").slice(0,me("AJAX_REQUEST_CONCURRENT")).map(_=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(_+"/api/v1"):"https://".concat(_,"/api/v1?action=config")),l=a.map(_=>function(y,C,B,L){const x=hn(),X={flag:64,cipher_method:0,features:wp(wp(wp(wp(wp({install_id:w5(),device:x.name,system:x.os,system_general:navigator.userAgent,vendor:C.appId,version:yA,cname:C.cname,session_id:C.sid,proxyServer:C.proxyServer,sdk_type:hbe.WEB_RTC,browser_name:x.name,browser_version:x.version,user_agent:navigator.userAgent,channel_name:C.cname},C.stringUid&&{string_uid:C.stringUid}),C.uid&&{uid:C.uid+""}),x.os&&{os_name:x.os}),x.osVersion&&{os_version:x.osVersion}),{},{detail:""})};return Wf(()=>Yf(y,{data:X,timeout:1e3,cancelToken:B,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,G=>G.code!==de.OPERATION_ABORTED,L)}(_,r,n,o));let d=null,h=null,v={};try{d=await Qy(l)}catch(_){if(_.code===de.OPERATION_ABORTED)throw _;h=_}if(l.forEach(_=>_.cancel()),rr.reportApiInvoke(r.sid,{name:Ji.REQUEST_CONFIG_DISTRIBUTE,options:{error:h,res:d}}).onSuccess(),d&&d.test_tags)try{v=function(_){if(!_.test_tags)return{};const y=_.test_tags,C=Object.keys(y),B={};return C.forEach(L=>{var x;const X=nc(x=L.slice(4)).call(x),G=JSON.parse(y[L]),q=G[1];B[X]={tag:G[0]||"",value:q}}),B}(d)}catch{}return v}async function IY(r,n){const o=me("WEBCS_DOMAIN").concat(me("WEBCS_DOMAIN_BACKUP_LIST")).map(a=>({url:"https://".concat(a,"/api/v2/transpond/webrtc?v=2"),areaCode:GS(),serviceIds:[po.CHOOSE_SERVER,po.CLOUD_PROXY_FALLBACK]}));try{return await CY({referenceList:o,asyncMapHandler:l=>async function(d,h,v){let _,{url:y,areaCode:C,serviceIds:B}=d;const L=Date.now(),[x,X]=EU(h,C,B);let G=ho.networkState;try{G&&ho.networkState===tu.OFFLINE&&ho.onlineWaiter&&await Mt.race([ho.onlineWaiter,Ps(Ro.maxRetryTimeout)]),G=ho.networkState;const{data:q,headers:Ae}=await Yf(y,{data:x,cancelToken:v,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);_=Ae.http3==="1"?1:-1,(Le=>{const Te=[];if(Le.response_body.forEach(ze=>{const rt=ze.buffer.code;if(ze.uri===23&&rt===0&&!ze.buffer.edges_services)if(ze.buffer.flag===4194310)ze.buffer.edges_services=[];else{const At={error:new Je(de.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:Le.detail[502]}),flag:ze.buffer.flag};Te.push(At)}if(rt!==0){const At=xy(rt),wt={error:new Je(de.CAN_NOT_GET_GATEWAY_SERVER,At.desc,{desc:At.desc,retry:At.retry,csIp:Le.detail[502]}),flag:ze.buffer.flag};ze.buffer.flag===4194310?H.warning(wt.error.toString()):Te.push(wt)}}),Te.length)throw new Je(de.CAN_NOT_GET_GATEWAY_SERVER,Te.map(ze=>"flag: ".concat(ze.flag,", message: ").concat(ze.error.message)).join(" | "),{retry:!!Te.find(ze=>ze.error.data.retry),csIp:Le.detail[502],desc:[...new Set(Te.map(ze=>{var rt;return ze==null||(rt=ze.error)===null||rt===void 0||(rt=rt.data)===null||rt===void 0?void 0:rt.desc}).filter(ze=>!!ze))]})})(q);const _e=HS(q,po.CHOOSE_SERVER),De=HS(q,po.CLOUD_PROXY_FALLBACK);return yU(_e),{gatewayInfo:uU(_e,y),proxyInfo:De,opid:X,requestTime:L,url:y,isHttp3:_,elapse:Date.now()-L}}catch(q){throw q}}(l,r,n),closeFn:l=>l.code===de.OPERATION_ABORTED||l.code===de.CAN_NOT_GET_GATEWAY_SERVER&&!l.data.retry})}catch(a){throw a}}async function OY(r,n,o,a){const l=me("PROXY_SERVER_TYPE3"),d=(x,X,G)=>{let q=G||l;return Array.isArray(q)&&(q=X%2==0&&l[1]||l[0]),"https://".concat(q,"/ap/?url=").concat(x)};let h=null;const v=[],_=async()=>{const x=me("WEBCS_DOMAIN").slice(0,me("AJAX_REQUEST_CONCURRENT")).map((q,Ae)=>{let ue;return ue=r.cloudProxyServer==="disabled"&&r.proxyServer?d("".concat(q,"/api/v2/transpond/webrtc?v=2"),Ae,r.proxyServer):r.cloudProxyServer==="disabled"||r.cloudProxyServer==="fallback"?"https://".concat(q,"/api/v2/transpond/webrtc?v=2"):d("".concat(q,"/api/v2/transpond/webrtc?v=2"),Ae),{url:ue,areaCode:GS(),serviceIds:[po.CHOOSE_SERVER,r.cloudProxyServer==="proxy5"?po.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?po.CLOUD_PROXY:po.CLOUD_PROXY_FALLBACK]}}),X=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:x.map(q=>q.url)}),G=await $S({fragementLength:me("FRAGEMENT_LENGTH"),referenceList:x,asyncMapHandler:q=>(H.debug("[".concat(r.clientId,"] Connect to choose_server:"),q.url),SY(q,r,n,o)),allFailedhandler:q=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},X),q[0]},promisesCollector:v});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},X),G},y=async()=>{if(await Ps(1e3),h!==null)return h;const x=me("WEBCS_DOMAIN_BACKUP_LIST").map((q,Ae)=>{let ue;return ue=r.cloudProxyServer==="disabled"&&r.proxyServer?d("".concat(q,"/api/v2/transpond/webrtc?v=2"),Ae,r.proxyServer):r.cloudProxyServer==="disabled"||r.cloudProxyServer==="fallback"?"https://".concat(q,"/api/v2/transpond/webrtc?v=2"):d("".concat(q,"/api/v2/transpond/webrtc?v=2"),Ae),{url:ue,areaCode:GS(),serviceIds:[po.CHOOSE_SERVER,r.cloudProxyServer==="proxy5"?po.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?po.CLOUD_PROXY:po.CLOUD_PROXY_FALLBACK]}}),X=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:x.map(q=>q.url)}),G=await $S({fragementLength:me("FRAGEMENT_LENGTH"),referenceList:x,asyncMapHandler:q=>(H.debug("[".concat(r.clientId,"] Connect to backup choose_server:"),q.url),SY(q,r,n,o)),allFailedhandler:q=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},X),q[0]},promisesCollector:v});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},X),G};let C,B,L;try{({gatewayInfo:C,proxyInfo:B,url:L}=await Qy([_(),y()]))}catch(x){throw x[0]}if(v.length&&v.forEach(x=>x.cancel&&typeof x.cancel=="function"&&x.cancel()),!C||!B)throw new Je(de.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(r.apUrl=L,r.cloudProxyServer!=="disabled"&&Array.isArray(l)&&L){const x=/^https?:\/\/(.+?)(\/.*)?$/.exec(L)[1];_t(l).call(l,x)&&(r.proxyServer=x,H.setProxyServer(x),rr.setProxyServer(x))}return h={gatewayInfo:C,proxyInfo:await Zq(B,C.uid)},h}async function Cbe(r,n,o){const a=me("UAP_AP").slice(0,me("AJAX_REQUEST_CONCURRENT")).map(d=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(d+"/api/v1?action=uap"):"https://".concat(d,"/api/v1?action=uap")),l=a.map(d=>function(h,v,_,y){const C={command:"convergeAllocateEdge",sid:v.sid,appId:v.appId,token:v.token,ts:Date.now(),version:yA,cname:v.cname,uid:v.uid.toString(),requestId:_U,seq:_U};_U+=1;const B={service_name:"tele_channel",json_body:JSON.stringify(C)};return Wf(async()=>{const L=await Yf(h,{data:B,cancelToken:_,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(L.code!==0){const X=new Je(de.UNEXPECTED_RESPONSE,"cross channel ap error, code"+L.code,{retry:!0});throw H.error(X.toString()),X}const x=JSON.parse(L.json_body);if(x.code!==200){const X=new Je(de.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(x.code,", reason: ").concat(x.reason));throw H.error(X.toString()),X}if(!x.servers||x.servers.length===0){const X=new Je(de.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw H.error(X.toString()),X}return{vid:x.vid,workerToken:x.workerToken,addressList:(me("CHANNEL_MEDIA_RELAY_SERVERS")||x.servers).map(X=>"wss://".concat(X.address.replace(/\./g,"-"),".").concat(me("WORKER_DOMAIN"),":").concat(X.wss))}},void 0,L=>!!(L.code!==de.OPERATION_ABORTED&&L.code!==de.UNEXPECTED_RESPONSE||L.data&&L.data.retry),y)}(d,r,n,o));try{const d=await Qy(l);return l.forEach(h=>h.cancel()),d}catch(d){throw d[0]}}async function Tbe(r,n,o){let a=null;const l=[],d=async h=>{const v=me(h?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(_=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(_+"/api/v2/transpond/webrtc?v=2"):"https://".concat(_,"/api/v2/transpond/webrtc?v=2"));return h&&(await Ps(1e3),a!==null)?a:await $S({fragementLength:me("FRAGEMENT_LENGTH"),referenceList:v,asyncMapHandler:_=>(H.debug("[".concat(r.clientId,"] update ticket, Connect to ").concat(h?"backup":""," choose_server:"),_),function(y,C,B,L){const[x]=Ebe(C,[po.CHOOSE_SERVER]);let X=ho.networkState;return Wf(async()=>{X&&ho.networkState===tu.OFFLINE&&ho.onlineWaiter&&await Mt.race([ho.onlineWaiter,Ps(L&&L.maxRetryTimeout||Ro.maxRetryTimeout)]),X=ho.networkState;const G=await Yf(y,{data:x,cancelToken:B,headers:{"Content-Type":"multipart/form-data;"}},!0);return ybe(G,y)},()=>!1,G=>G.code!==de.OPERATION_ABORTED&&(G.code===de.UPDATE_TICKET_FAILED?G.data.retry:(H.warning("[".concat(C.clientId,"] update ticket network error, retry"),G),!0)),L)}(_,r,n,o)),allFailedhandler:_=>{throw _[0]},promisesCollector:l})};try{return a=await Qy([d(!1),d(!0)]),l.length&&l.forEach(h=>h.cancel&&typeof h.cancel=="function"&&h.cancel()),a}catch(h){throw h[0]}}function NY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function SU(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?NY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):NY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}class Rbe extends Mi{get isSuccess(){return!!this.configs}constructor(n,o){super(),re(this,"configs",void 0),re(this,"store",void 0),re(this,"joinInfo",void 0),re(this,"cancelToken",void 0),re(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),re(this,"interval",void 0),re(this,"mutex",void 0),re(this,"mutableParamsRead",!1),re(this,"configCache",{}),re(this,"limit_bitrate",void 0),this.mutex=new ga("config-distribute",n),this.store=o}startGetConfigDistribute(n,o){this.joinInfo=n,this.cancelToken=o,this.interval&&this.stopGetConfigDistribute(),me("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},me("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0,this.configs=void 0,this.limit_bitrate=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,rr.reportApiInvoke(null,{options:void 0,name:Ji.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Oi.TRACER}).onSuccess(JSON.stringify(Gf))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void H.debug("[config-distribute] get config distribute interrupted have no joininfo");let n;const o=await this.mutex.lock();try{n=await bbe(this.joinInfo,this.cancelToken,this.retryConfig),H.debug("[config-distribute] get config distribute",JSON.stringify(n));const a=function(l){var d;const h=j0(d=Object.keys(l).filter(y=>/^webrtc_ng_global_parameter/.test(y))).call(d);for(let y=0;y<h.length;y++)for(let C=h.length-1;C>y;C--){const B=h[C],L=l[B].value;if(typeof L.__priority=="number"){const x=L.__priority,X=h[C-1],G=l[X].value;if(typeof G.__priority=="number"){if(!(x>G.__priority))continue;{const q=B;h[C]=h[C-1],h[C-1]=q}}else{const q=B;h[C]=h[C-1],h[C-1]=q}}}const v=Date.now();let _={};return h.forEach(y=>{const C=l[y].value.__expires;C&&C<=v||(_[y]=l[y])}),_}(n);this.cacheGlobalParameterConfig(a),this.store.hasStartJoinChannel||(this.store.isABTestSuccess=!0),this.configs=a}catch(a){const l=new Je(de.NETWORK_RESPONSE_ERROR,a);H.warning("[config-distribute] ".concat(l.toString()))}finally{o()}}getBitrateLimit(){return this.limit_bitrate||void 0}handleBitrateLimit(n){Hq(n)&&(this.limit_bitrate?this.limit_bitrate&&this.limit_bitrate.id!==n.id&&this.emit(FS.UPDATE_BITRATE_LIMIT,n):this.emit(FS.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.limit_bitrate&&SU({},this.limit_bitrate.low_stream_uplink)}handleABTestConfigDistribute(n){try{const o={},a=Object.keys(n),l=[];a.forEach(d=>{const h=n[d].value;o[d]=h;const v=h.__id;if(v&&this.configCache[d]&&this.configCache[d].__id===v)return;const _=h.__type,y=n[d].value,C=n[d].tag;let B=0;_?_===d$.REALTIME&&(B=1):Object.keys(y).some(L=>Object.prototype.hasOwnProperty.call(T5,L)||!Z5()&&Object.prototype.hasOwnProperty.call(jI,L)?(B=1,!0):void 0),l.push({tag:C,isApplied:B,feature:d,params:JSON.stringify(h)})}),l.forEach(d=>{let{tag:h,feature:v,params:_,isApplied:y}=d;this.store.sessionId&&rr.abTest(this.store.sessionId,{intSucc:1,isApplied:y,tag:h,feature:v,params:_,cid:this.store.cid,uid:this.store.intUid})}),this.configCache=o}catch(o){H.debug("handleABTestConfigDistribute error",o)}}cacheGlobalParameterConfig(n){const o=function(l){const d={};return Object.keys(l).forEach(h=>{const v=l[h].value,_=v.__expires,y=v.__type;Object.keys(v).forEach(C=>{C==="__id"||C==="__type"||C==="__priority"||C==="__expires"||Object.prototype.hasOwnProperty.call(d,C)||(d[C]=SU(SU({value:v[C]},_&&{expires:_}),y&&{type:y}))})}),d}(n);try{var a;const l=(a=o.LIMIT_BITRATE)===null||a===void 0?void 0:a.value;delete o.LIMIT_BITRATE,l&&Hq(l)&&this.handleBitrateLimit(l),this.limit_bitrate=l,this.handleGlobalParameterConfig(o),this.handleABTestConfigDistribute(n),function(v){try{const _=Date.now();Object.keys(v).forEach(y=>{const{value:C,type:B,expires:L}=v[y];L&&L<=_||((B===d$.REALTIME||Object.prototype.hasOwnProperty.call(T5,y))&&(Gf[y]=C,bi[y]=C,H.debug("Update realtime parameters from config distribute",y,C)),B||Z5()||!Object.prototype.hasOwnProperty.call(jI,y)||(Gf[y]=C,bi[y]=C,H.debug("Update gateway parameters from config distribute",y,C)))})}catch(_){H.error("Error update config immediately: ".concat(v),_.message)}}(o);const d=JSON.stringify(o),h=window.btoa(d);window.localStorage.setItem("websdk_ng_global_parameter",h),H.debug("Caching global parameters ".concat(d))}catch(l){H.error("Error caching global parameters:",l.message)}}handleGlobalParameterConfig(n){try{const o=Date.now();Object.keys(n).forEach(a=>{if(a==="CLIENT_ROLE_OPTIONS"&&Object.prototype.hasOwnProperty.call(bi,a)){const{value:l,expires:d}=n[a];if(d&&d<=o)return;(function(h,v){try{return typeof h=="object"&&typeof v=="object"&&JSON.stringify(h)===JSON.stringify(v)}catch{return!1}})(bi[a],l)||(Gf[a]=l,bi[a]=l,this.emit(FS.UPDATE_CLIENT_ROLE_OPTIONS,l),H.debug("Updating client role options: ".concat(JSON.stringify(l))))}})}catch(o){H.error("Error handling global parameter config:",o.message)}}}class Ibe extends Mi{constructor(){super(...arguments),re(this,"resultStorage",new Map)}setLocalAudioStats(n,o,a){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",n,this.checkAudioInputLevel(a,o)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",n,this.checkSendAudioBitrate(a,o))}setLocalVideoStats(n,o,a){this.record("SEND_VIDEO_BITRATE_TOO_LOW",n,this.checkSendVideoBitrate(a,o)),this.record("FRAMERATE_INPUT_TOO_LOW",n,this.checkFramerateInput(a,o)),this.record("FRAMERATE_SENT_TOO_LOW",n,this.checkFramerateSent(a)),!o.muted&&this.record("VIDEO_ENCODE_FAILED",n,this.checResolutionSent(a))}setRemoteAudioStats(n,o){const a=n.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",a,this.checkAudioOutputLevel(o))}setRemoteVideoStats(n,o){const a=n.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",a,this.checkVideoDecode(o))}record(n,o,a){if(me("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(n)||this.resultStorage.set(n,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(n);if(!l)return;l.result.push(a);const d=n==="VIDEO_ENCODE_FAILED"?me("ENCODE_EXCEPTION_TIMES"):5;if(l.result.length>=d){var h;const v=_t(h=l.result).call(h,!0);l.isPrevNormal&&!v&&this.emit("exception",bU[n],n,o),!l.isPrevNormal&&v&&this.emit("exception",bU[n]+2e3,n+"_RECOVER",o),l.isPrevNormal=v,l.result=[]}}checkAudioOutputLevel(n){return!(n.receiveBitrate>0&&n.receiveLevel===0)}checkAudioInputLevel(n,o){return o instanceof Uo&&!o.isActive||!!o.muted||n.sendVolumeLevel!==0}checkFramerateInput(n,o){let a=null;o._encoderConfig&&o._encoderConfig.frameRate&&(a=ru(o._encoderConfig.frameRate));const l=n.captureFrameRate;return!a||!l||!(a>10&&l<5||a<10&&a>=5&&l<=1)}checkFramerateSent(n){return!(n.captureFrameRate&&n.sendFrameRate&&n.captureFrameRate>5&&n.sendFrameRate<=1)}checResolutionSent(n){var o;return!(!n.codecType||_t(o=me("ENCODE_EXCEPTION_VALIDATE_CODEC")).call(o,n.codecType.toLocaleLowerCase()))||!n.captureFrameRate||n.sendFrameRate!==0||n.sendResolutionWidth!==0||n.sendResolutionHeight!==0}checkSendVideoBitrate(n,o){return!!o.muted||n.sendBitrate!==0}checkSendAudioBitrate(n,o){return o instanceof Uo&&!o.isActive||!!o.muted||n.sendBitrate!==0}checkVideoDecode(n){return n.receiveBitrate===0||n.decodeFrameRate!==0}}const bU={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003,VIDEO_ENCODE_FAILED:2004},ya=new class{markSubscribeStart(r,n){performance.mark("agora-web-sdk/".concat(r,"/subscribe-").concat(n))}markPublishStart(r,n){performance.mark("agora-web-sdk/".concat(r,"/publish-").concat(n))}measureFromSubscribeStart(r,n){const o=performance.getEntriesByName("agora-web-sdk/".concat(r,"/subscribe-").concat(n));if(o.length>0){const a=o[o.length-1];return Math.round(performance.now()-a.startTime)}return 0}measureFromPublishStart(r,n){const o=performance.getEntriesByName("agora-web-sdk/".concat(r,"/publish-").concat(n));if(o.length>0){const a=o[o.length-1];return Math.round(performance.now()-a.startTime)}return 0}};function BY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function u1(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?BY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):BY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}class zS{constructor(n){re(this,"store",void 0),re(this,"onStatsException",void 0),re(this,"onUploadPublishDuration",void 0),re(this,"onStatsChanged",void 0),re(this,"onVideoCodecChanged",void 0),re(this,"localStats",new Map),re(this,"remoteStats",new Map),re(this,"updateStatsInterval",void 0),re(this,"trafficStats",void 0),re(this,"trafficStatsPeerList",[]),re(this,"uplinkStats",void 0),re(this,"exceptionMonitor",void 0),re(this,"p2pChannel",void 0),re(this,"scalabilityMode",HI.L1T1),re(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=n,this.exceptionMonitor=new Ibe,this.exceptionMonitor.on("exception",(o,a,l)=>{this.onStatsException&&this.onStatsException(o,a,l)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(mt.LocalAudioTrack)||u1({},L5)}getLocalVideoTrackStats(){return this.localStats.get(mt.LocalVideoTrack)||u1({},P5)}getRemoteAudioTrackStats(n){const o=(d,h)=>{if(!this.trafficStats)return h;const v=this.trafficStats.peer_delay.find(_=>_.peer_uid===d);return v&&(h.publishDuration=v.B_ppad+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const d=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.audioStats;d&&(a[n]=o(n,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[h,{audioStats:v}]=d;v&&(a[h]=o(h,v))});return a}getRemoteNetworkQualityStats(n){const o={};if(n){var a;const l=(a=this.remoteStats.get(n))===null||a===void 0?void 0:a.networkStats;l&&(o[n]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[d,{networkStats:h}]=l;h&&(o[d]=h)});return o}getRemoteVideoTrackStats(n){const o=(d,h)=>{if(!this.trafficStats)return h;const v=this.trafficStats.peer_delay.find(_=>_.peer_uid===d);return v&&(h.publishDuration=v.B_ppvd+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const d=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.videoStats;d&&(a[n]=o(n,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[h,{videoStats:v}]=d;v&&(a[h]=o(h,v))});return a}getRTCStats(){let n=0,o=0,a=0,l=0;const d=this.localStats.get(mt.LocalAudioTrack);d&&(n+=d.sendBytes,o+=d.sendBitrate);const h=this.localStats.get(mt.LocalVideoTrack);h&&(n+=h.sendBytes,o+=h.sendBitrate);const v=this.localStats.get(mt.LocalVideoLowTrack);v&&(n+=v.sendBytes,o+=v.sendBitrate),this.remoteStats.forEach(y=>{let{audioStats:C,videoStats:B}=y;C&&(a+=C.receiveBytes,l+=C.receiveBitrate),B&&(a+=B.receiveBytes,l+=B.receiveBitrate)});let _=1;return this.trafficStats&&(_+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:_,SendBitrate:o,SendBytes:n,RecvBytes:a,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(n){this.localStats.set(n,void 0)}removeLocalStats(n){n?this.localStats.delete(n):this.localStats.clear()}addRemoteStats(n){this.remoteStats.set(n,{})}removeRemoteStats(n){n?this.remoteStats.delete(n):this.remoteStats.clear()}addP2PChannel(n){this.p2pChannel=n}updateTrafficStats(n){n.peer_delay=n.peer_delay.filter(o=>o.B_ppad!==void 0||o.B_ppvd!==void 0),n.peer_delay.filter(o=>this.trafficStatsPeerList.indexOf(o.peer_uid)===-1).forEach(o=>{var a;const l=(a=this.p2pChannel)===null||a===void 0?void 0:a.getRemoteMedia(o.peer_uid),d=l!=null&&l.videoSSRC?ya.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,h=l!=null&&l.audioSSRC?ya.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;o.B_ppad!==void 0&&o.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(o.peer_uid,o.B_ppad,o.B_ppvd,d>h?d:h),this.trafficStatsPeerList.push(o.peer_uid))}),this.trafficStats=n}updateUplinkStats(n){this.uplinkStats&&this.uplinkStats.B_fir!==n.B_fir&&H.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(n.B_fir)),this.uplinkStats=n}static isRemoteVideoFreeze(n,o,a){if(!n)return!1;const l=!!a&&o.framesDecodeFreezeTime>a.framesDecodeFreezeTime,d=!a||o.framesDecodeCount>a.framesDecodeCount;return l||!d}static isRemoteAudioFreeze(n){return!!n&&n._isFreeze()}isLocalVideoFreeze(n){return!(!n.inputFrame||!n.sentFrame)&&n.inputFrame.frameRate>5&&n.sentFrame.frameRate<3}updateLocalStats(n){Array.from(this.localStats.entries()).forEach(o=>{let[a,l]=o;switch(a){case mt.LocalVideoTrack:case mt.LocalVideoLowTrack:{const v=l,_=u1({},P5),y=n.getStats(),C=n.getLocalMedia(a);if(y){const B=y.videoSend.find(L=>L.ssrc===(C==null?void 0:C.ssrcs[0].ssrcId));if(B){const L=n.getLocalVideoSize(),x=n.getEncoderConfig(mt.LocalVideoTrack);var d;(B.codec==="H264"||B.codec==="H265"||B.codec==="VP8"||B.codec==="VP9"||B.codec==="AV1X"||B.codec==="AV1")&&(_.codecType=B.codec,(v==null?void 0:v.codecType)!==B.codec&&((d=this.onVideoCodecChanged)===null||d===void 0||d.call(this,B.codec.toLocaleLowerCase()))),_.sendBytes=B.bytes,_.sendBitrate=v?8*Math.max(0,_.sendBytes-v.sendBytes):0,B.inputFrame?(_.captureFrameRate=B.inputFrame.frameRate,_.captureResolutionHeight=B.inputFrame.height,_.captureResolutionWidth=B.inputFrame.width):L&&(_.captureResolutionWidth=L.width,_.captureResolutionHeight=L.height),B.sentFrame?(_.sendFrameRate=B.sentFrame.frameRate,_.sendResolutionHeight=B.sentFrame.height,_.sendResolutionWidth=B.sentFrame.width):L&&(_.sendResolutionWidth=L.width,_.sendResolutionHeight=L.height),B.avgEncodeMs&&(_.encodeDelay=B.avgEncodeMs),x&&x.bitrateMax?_.targetSendBitrate=1e3*x.bitrateMax:B.targetBitrate&&(_.targetSendBitrate=B.targetBitrate),_.sendPackets=B.packets,_.sendPacketsLost=B.packetsLost,_.sendJitterMs=B.jitterMs,_.sendRttMs=B.rttMs,_.totalDuration=v?v.totalDuration+1:1,_.totalFreezeTime=v?v.totalFreezeTime:0,this.isLocalVideoFreeze(B)&&(_.totalFreezeTime+=1),B.scalabilityMode&&this.scalabilityMode!==B.scalabilityMode&&(H.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(B.scalabilityMode)),this.scalabilityMode=B.scalabilityMode)}this.trafficStats&&(_.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var h;this.localStats.set(a,_),((v==null?void 0:v.sendResolutionWidth)!==_.sendResolutionWidth||(v==null?void 0:v.sendResolutionHeight)!==_.sendResolutionHeight)&&((h=this.onStatsChanged)===null||h===void 0||h.call(this,"resolution",{width:_.sendResolutionWidth,height:_.sendResolutionHeight})),_&&C&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,C.track,_);break}case mt.LocalAudioTrack:{const v=l,_=u1({},L5),y=n.getStats(),C=n.getLocalMedia(a);if(y){const B=y.audioSend.find(L=>L.ssrc===(C==null?void 0:C.ssrcs[0].ssrcId));if(B){if(B.codec!=="opus"&&B.codec!=="aac"&&B.codec!=="PCMU"&&B.codec!=="PCMA"&&B.codec!=="G722"||(_.codecType=B.codec),B.inputLevel)_.sendVolumeLevel=Math.round(32767*B.inputLevel);else{const L=n.getLocalAudioVolume();L&&(_.sendVolumeLevel=Math.round(32767*L))}_.sendBytes=B.bytes,_.sendPackets=B.packets,_.sendPacketsLost=B.packetsLost,_.sendJitterMs=B.jitterMs,_.sendRttMs=B.rttMs,_.sendBitrate=v?8*Math.max(0,_.sendBytes-v.sendBytes):0}}this.trafficStats&&(_.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(mt.LocalAudioTrack,_),_&&C&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,C.track,_);break}}})}updateRemoteStats(n){Array.from(this.remoteStats.entries()).forEach(o=>{var a,l;let[d,{videoStats:h,audioStats:v,videoPcStats:_}]=o;const y=v,C=h,B=_,L=u1({},S$),x=u1({},b$),X=u1({},ASe),{audioTrack:G,videoTrack:q,audioSSRC:Ae,videoSSRC:ue}=n.getRemoteMedia(d);let _e;_e=this.store.useP2P?n.getStats(!0):n.getStats();const De=(a=_e)===null||a===void 0?void 0:a.audioRecv.find(rt=>rt.ssrc===Ae),Le=(l=_e)===null||l===void 0?void 0:l.videoRecv.find(rt=>rt.ssrc===ue),Te=this.trafficStats&&this.trafficStats.peer_delay.find(rt=>rt.peer_uid===d);if(De&&(De.codec!=="opus"&&De.codec!=="aac"&&De.codec!=="PCMU"&&De.codec!=="PCMA"&&De.codec!=="G722"||(L.codecType=De.codec),De.outputLevel?L.receiveLevel=Math.round(32767*De.outputLevel):G&&(L.receiveLevel=Math.round(32767*G.getVolumeLevel())),L.receiveBytes=De.bytes,L.receivePackets=De.packets,L.receivePacketsLost=De.packetsLost,L.receivePacketsDiscarded=De.packetsDiscarded,L.packetLossRate=L.receivePacketsLost/(L.receivePackets+L.receivePacketsLost),L.receiveBitrate=y?8*Math.max(0,L.receiveBytes-y.receiveBytes):0,L.totalDuration=y?y.totalDuration+1:1,L.totalFreezeTime=y?y.totalFreezeTime:0,L.freezeRate=L.totalFreezeTime/L.totalDuration,L.receiveDelay=De.jitterBufferMs,L.totalDuration>10&&zS.isRemoteAudioFreeze(G)&&(L.totalFreezeTime+=1)),Le){var ze;Le.codec!=="H264"&&Le.codec!=="H265"&&Le.codec!=="VP8"&&Le.codec!=="VP9"&&Le.codec!=="AV1X"&&Le.codec!=="AV1"||(x.codecType=Le.codec),x.receiveBytes=Le.bytes,x.receiveBitrate=C?8*Math.max(0,x.receiveBytes-C.receiveBytes):0,x.decodeFrameRate=Le.decodeFrameRate<0?0:Le.decodeFrameRate,x.renderFrameRate=Le.decodeFrameRate<0?0:Le.decodeFrameRate,Le.outputFrame&&(x.renderFrameRate=Le.outputFrame.frameRate),Le.receivedFrame?(x.receiveFrameRate=Le.receivedFrame.frameRate,x.receiveResolutionHeight=Le.receivedFrame.height,x.receiveResolutionWidth=Le.receivedFrame.width):q&&(x.receiveResolutionHeight=q._videoHeight||0,x.receiveResolutionWidth=q._videoWidth||0),Le.framesRateFirefox!==void 0&&(x.receiveFrameRate=Math.round(Le.framesRateFirefox)),x.receivePackets=Le.packets,x.receivePacketsLost=Le.packetsLost,x.packetLossRate=x.receivePacketsLost/(x.receivePackets+x.receivePacketsLost);const rt=C?C.totalFreezeTime:0,At=C?C.totalDuration:0;x.totalDuration=C?C.totalDuration+1:1,x.totalFreezeTime=(ze=Le.totalFreezesDuration)!==null&&ze!==void 0?ze:rt||0,x.receiveDelay=Le.jitterBufferMs||0;const wt=!!ue&&n.getRemoteVideoIsReady(ue);Le.totalFreezesDuration===void 0&&q&&wt&&zS.isRemoteVideoFreeze(q,Le,B)&&(x.totalFreezeTime+=1),x.freezeRate=Math.max(0,Math.min((x.totalFreezeTime-rt)/(x.totalDuration-At),1))}Te&&(L.end2EndDelay=Te.B_ad,x.end2EndDelay=Te.B_vd,L.transportDelay=Te.B_ed,x.transportDelay=Te.B_ed,L.currentPacketLossRate=Te.B_ealr4/100,x.currentPacketLossRate=Te.B_evlr4/100,X.uplinkNetworkQuality=Te.B_punq?Te.B_punq:0,X.downlinkNetworkQuality=Te.B_pdnq?Te.B_pdnq:0),this.remoteStats.set(d,{audioStats:L,videoStats:x,videoPcStats:Le,networkStats:X}),G&&this.exceptionMonitor.setRemoteAudioStats(G,L),q&&this.exceptionMonitor.setRemoteVideoStats(q,x)})}}class LY{constructor(){re(this,"destChannelMediaInfos",new Map),re(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(n){Vq(n),this.srcChannelMediaInfo=n}addDestChannelInfo(n){Vq(n),this.destChannelMediaInfos.set(n.channelName,n)}removeDestChannelInfo(n){c2(n),this.destChannelMediaInfos.delete(n)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function PY(r){if(!(r instanceof LY))return new Je(de.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const n=r.getSrcChannelMediaInfo(),o=r.getDestChannelMediaInfo();if(!n)return new Je(de.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(o.size===0)return new Je(de.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class hv{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(n,o){re(this,"uid",void 0),re(this,"_uintid",void 0),re(this,"_trust_in_room_",!0),re(this,"_trust_audio_enabled_state_",!0),re(this,"_trust_video_enabled_state_",!0),re(this,"_trust_audio_mute_state_",!0),re(this,"_trust_video_mute_state_",!0),re(this,"_audio_muted_",!1),re(this,"_video_muted_",!1),re(this,"_audio_enabled_",!0),re(this,"_video_enabled_",!0),re(this,"_audio_added_",!1),re(this,"_video_added_",!1),re(this,"_is_pre_created",!1),re(this,"_video_pre_subscribed",!1),re(this,"_audio_pre_subscribed",!1),re(this,"_trust_video_stream_added_state_",!0),re(this,"_trust_audio_stream_added_state_",!0),re(this,"_audioTrack",void 0),re(this,"_videoTrack",void 0),re(this,"_dataChannels",[]),re(this,"_audioSSRC",void 0),re(this,"_videoSSRC",void 0),re(this,"_audioOrtc",void 0),re(this,"_videoOrtc",void 0),re(this,"_cname",void 0),re(this,"_rtxSsrcId",void 0),re(this,"_videoMid",void 0),re(this,"_audioMid",void 0),this.uid=n,this._uintid=o}}function kY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function CU(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?kY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):kY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const S2="9",TU=2e4,b2=4e4;function DY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Vg(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?DY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):DY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}var Hy=function(r){return r[r.DOWN=0]="DOWN",r[r.UP=1]="UP",r}(Hy||{});const C2=new Map;function xY(r,n,o,a){let{scale:l}=r;if(l===0&&a===Hy.UP||l>=n.length-1&&a===Hy.DOWN)return r;let d=Vg(Vg({},r),{},{scale:a===Hy.DOWN?++l:--l});switch(o){case"maintain-framerate":d=Vg(Vg({},d),n[l].motion);break;case"maintain-resolution":d=Vg(Vg({},d),n[l].detail);break;case"balanced":d=Vg(Vg({},d),n[l].balanced)}return d}function UY(r,n){if(n){const o={overUse:0,underUse:0,adaptationList:MY(n)};C2.set(r,o)}else C2.delete(r)}function MY(r){const n=Vg({},r),{bitrateMax:o,frameRate:a,scaleResolutionDownBy:l,bitrateMin:d}=n,{MIN_FRAME_RATE:h,MAX_THRESHOLD_FRAMERATE:v,MAX_SCALE:_,BITRATE_MIN_THRESHOLD:y,BITRATE_MAX_THRESHOLD:C,BWE_SCALE_UP_THRESHOLD:B,BWE_SCALE_DOWN_THRESHOLD:L,PERF_SCALE_DOWN_THRESHOLD:x,PERF_SCALE_UP_THRESHOLD:X,BALANCE_BITRATE_FACTOR:G,BALANCE_FRAMERATE_FACTOR:q,BALANCE_RESOLUTION_FACTOR:Ae,MOTION_RESOLUTION_FACTOR:ue,MOTION_BITRATE_FACTOR:_e,DETAIL_FRAMERATE_FACTOR:De,DETAIL_BITRATE_FACTOR:Le}=b5,Te=Math.min(n.frameRate,v),ze=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(L,1)*o),bwe_up:o,fps_down:Math.round(Math.pow(x,1)*Te),fps_up:a},balanced:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:o,bitrateMin:d},motion:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:o,bitrateMin:d},detail:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:o,bitrateMin:d}}];for(let rt=1;rt<=_;rt++){const At={bwe_up:Math.round(Math.pow(B,rt)*o),bwe_down:Math.round(Math.pow(L,rt+1)*o),fps_up:Math.round(Math.pow(X,rt)*Te),fps_down:Math.round(Math.pow(x,rt+1)*Te)},wt={scaleResolutionDownBy:l/Math.pow(Ae,rt),frameRate:Math.max(Math.round(Math.pow(q,rt)*a),h),bitrateMax:Math.max(Math.round(Math.pow(G,rt)*o),C),bitrateMin:Math.max(Math.round(Math.pow(G,rt)*d),y)},Gr={scaleResolutionDownBy:l/Math.pow(ue,rt),frameRate:a,bitrateMax:Math.max(Math.round(Math.pow(_e,rt)*o),C),bitrateMin:Math.max(Math.round(Math.pow(_e,rt)*d),y)},en={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(De,rt)*a),h),bitrateMax:Math.max(Math.round(Math.pow(Le,rt)*o),C),bitrateMin:Math.max(Math.round(Math.pow(Le,rt)*d),y)};ze.push({scale:rt,threshold:At,balanced:wt,motion:Gr,detail:en})}return ze}function Obe(r,n,o,a,l,d){const h=C2.get(r)||{overUse:0,underUse:0,adaptationList:MY(l)},{adaptationList:v}=h;C2.set(r,h);const{OVERUSE_TIMES_THRESHOLD:_,UNDERUSE_TIMES_THRESHOLD:y}=b5,{scale:C}=a;let B,L;return typeof n=="number"&&n>0&&function(x,X,G,q){if(X>=G.length)return!1;let{threshold:{fps_down:Ae}}=G[X];return me("FORCE_AG_HIGH_FRAMERATE")&&q==="maintain-framerate"&&(Ae=G[0].threshold.fps_down),x<Ae}(n,C,v,d)&&(h.overUse++,L=BS.CPU,h.overUse>_)||typeof o=="number"&&o>0&&function(x,X,G){if(X>=G.length)return!1;const{threshold:{bwe_down:q}}=G[X];return x<q}(o,C,v)&&(h.overUse++,L=BS.BANDWIDTH,h.overUse>_)?(h.overUse=0,h.underUse=0,B=xY(a,v,d,Hy.DOWN),[B,L]):(typeof n=="number"&&n>0&&typeof o=="number"&&o>0&&function(x,X,G,q){if(X===0)return;let{threshold:{fps_up:Ae}}=G[X];return me("FORCE_AG_HIGH_FRAMERATE")&&q==="maintain-framerate"&&(Ae=G[1].threshold.fps_up),x>Ae}(n,C,v,d)&&function(x,X,G){if(X===0)return;const{threshold:{bwe_up:q}}=G[X];return x>q}(o,C,v)&&(h.underUse++,h.underUse>y&&(h.overUse=0,h.underUse=0,B=xY(a,v,d,Hy.UP),B.scale===0&&(L=BS.NONE))),[B,L])}function FY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function RU(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?FY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):FY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const T2=new Map;function R2(r,n){const o=T2.get(r);if(o){const{timer:a}=o;window.clearTimeout(a),T2.delete(r)}n.qualityLimitationReason=BS.NONE,UY(r)}function Nbe(r,n){var o;let a;switch(n){case mt.LocalAudioTrack:a=Fn.Audio;break;case mt.LocalVideoTrack:a=_t(o=r._hints).call(o,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalVideoLowTrack:a=Fn.Low}return a}function IU(r){const n=vn();if(r.some(o=>o._bypassWebAudio))throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!n.webAudioMediaStreamDest)throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function OU(r,n){IU(r);const o=n||new Uo;return r.forEach(a=>o.addAudioTrack(a)),o}const Bbe=!vn().supportUnifiedPlan||me("CHROME_FORCE_PLAN_B")&&Dg();function I2(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var o;return Bbe?(o={spec:n,store:r},Fg("PlanBConnection").create(o)):new CA(n,r)}function NU(r){return r&&(r.iceConnectionState==="disconnected"||r.iceConnectionState==="checking"||r.iceConnectionState==="failed")}function VY(r){try{if(r.iceServers)return!1;if(r.turnServer&&r.turnServer.mode!=="off"){if(IS(r.turnServer.servers))return!1;if(me("FORCE_TURN_TCP")||r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).some(n=>n.forceturn))return!0}return!1}catch{return!1}}var pn;function QY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Xf(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?QY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):QY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}let CA=(pn=class B1 extends Kq{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,o;return(n=(o=this.peerConnection.getReceivers()[0])===null||o===void 0||(o=o.transport)===null||o===void 0?void 0:o.state)!==null&&n!==void 0?n:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var o;return _t(o=Object.keys(PS)).call(o,n)}))]}constructor(n,o){super(n,o),re(this,"id",ii(5,"connection-")),re(this,"store",void 0),re(this,"peerConnection",void 0),re(this,"forceTurn",!1),re(this,"remoteSDP",void 0),re(this,"initialOffer",void 0),re(this,"transportEventReceiver",void 0),re(this,"statsFilter",void 0),re(this,"extension",{useXR:me("USE_XR")}),re(this,"localCapabilities",void 0),re(this,"remoteCodecs",void 0),re(this,"localCandidateCount",0),re(this,"allCandidatesReceived",!1),re(this,"isPreallocation",!1),re(this,"preMediaMap",new Map),re(this,"dataStreamChannelMap",new Map),re(this,"establishPromise",void 0),re(this,"recoveredDataChannelIds",[]),re(this,"currentDataChannelId",1),re(this,"supportAV1RtpSpec",!1),re(this,"mutex",void 0),re(this,"qualityLimitationReason",BS.NONE),re(this,"isFirstConnected",!1),this.store=o,this.forceTurn=VY(n),this.mutex=new ga("P2PConnection-mutex",o.clientId),this.peerConnection=new RTCPeerConnection(B1.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.isFirstConnected=!1,this.statsFilter=E5(this.peerConnection,me("STATS_UPDATE_INTERVAL"),void 0,Hi()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,n.isPreallocation&&(this.isPreallocation=!0),this.establishPromise=this.establish()}getPreMedia(n){return this.preMediaMap.get(n)}isPreSub(){return this.preMediaMap.size>0}async updateRemoteRTPCapabilities(n,o){if(this.remoteCodecs=o,!this.remoteSDP)return void H.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(o));if(this.remoteSDP.updateRemoteCodec(n,o,this.store.codec)){const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}else H.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const a=await this.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const l=uv(a.sdp),d=await lY({filterRTX:!me("USE_PUB_RTX")&&!me("USE_SUB_RTX"),filterVideoFec:me("FILTER_VIDEO_FEC"),filterAudioFec:me("FILTER_AUDIO_FEC"),filterVideoCodec:me("FILTER_VIDEO_CODEC"),unsupportedVideoUplinkCodec:me("UNSUPPORTED_VIDEO_UPLINK_CODEC"),unsupportedVideoDownlinkCodec:me("UNSUPPORTED_VIDEO_DOWNLINK_CODEC")},this.extension);if(this.localCapabilities=v2(d),this.initialOffer=a,me("ENABLE_SVC")&&this.store.codec=="av1"){const v=await async function(){try{const _=new RTCPeerConnection;_.addTransceiver("video",{direction:"sendonly",sendEncodings:[{scalabilityMode:HI.L1T3}]});const y=await _.createOffer();if(!y.sdp)return void _.close();const C=wl(y.sdp).mediaDescriptions[0];if(!C)return;const B=C.attributes.extmaps.find(L=>L.extensionName==="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension");return _.close(),B}catch{return}}();var n;v&&(this.supportAV1RtpSpec=!0,(n=d.send)===null||n===void 0||n.videoExtensions.push(v))}let h;return a.sdp&&fY(a.sdp)&&(h=Ni(d),(o=h).send&&(Uy(jt.VIDEO,o.send.videoExtensions),Uy(jt.AUDIO,o.send.audioExtensions)),o.recv&&(Uy(jt.VIDEO,o.recv.videoExtensions),Uy(jt.AUDIO,o.recv.audioExtensions)),o.sendrecv&&(Uy(jt.VIDEO,o.sendrecv.videoExtensions),Uy(jt.AUDIO,o.sendrecv.audioExtensions))),Xf(Xf({},l),{},{rtpCapabilities:h||d,offerSDP:a.sdp})}catch(a){throw new tt(de.GET_LOCAL_CONNECTION_PARAMS_FAILED,a.toString())}var o}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.initialOffer.sdp&&fY(this.initialOffer.sdp)&&(o=n.rtpCapabilities,a=this.localCapabilities,o.send&&(p2(jt.VIDEO,o.send.videoExtensions,a.send.videoExtensions),p2(jt.AUDIO,o.send.audioExtensions,a.send.audioExtensions)),o.recv&&(p2(jt.VIDEO,o.recv.videoExtensions,a.recv.videoExtensions),p2(jt.AUDIO,o.recv.audioExtensions,a.recv.audioExtensions))),this.remoteSDP=new class{get localCapabilities(){return Ni(this._localCapabilities)}get rtpCapabilities(){return Ni(this._rtpCapabilities)}get candidates(){return Ni(this._candidates)}get iceParameters(){return Ni(this._iceParameters)}get dtlsParameters(){return Ni(this._dtlsParameters)}constructor(_){let y=arguments.length>1&&arguments[1]!==void 0&&arguments[1],C=arguments.length>2&&arguments[2]!==void 0&&arguments[2];re(this,"sessionDesc",void 0),re(this,"_localCapabilities",void 0),re(this,"_rtpCapabilities",void 0),re(this,"_candidates",void 0),re(this,"_originCandidates",void 0),re(this,"_iceParameters",void 0),re(this,"_isUseExtmapAllowMixed",void 0),re(this,"_isUseLocalCodecs",void 0),re(this,"_dtlsParameters",void 0),re(this,"setup",void 0),re(this,"currentMidIndex",void 0),re(this,"cname",void 0),re(this,"useLocalCodecsMids",[]),re(this,"preloadSsrcs",[]),re(this,"firefoxSsrcMidMap",new Map),this._isUseExtmapAllowMixed=y,this._isUseLocalCodecs=C,_=Ni(_);const{iceParameters:B,dtlsParameters:L,candidates:x,rtpCapabilities:X,setup:G,localCapabilities:q,cname:Ae}=_;this._rtpCapabilities=X,this._candidates=x,this._originCandidates=Ni(x),this._iceParameters=B,this._dtlsParameters=L,this._localCapabilities=q,this.setup=G,this.cname=Ae,[this.sessionDesc]=this.updateRemoteRTPCapabilities(X),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}checkPreloadSsrcs(_){return _.length===this.preloadSsrcs.length&&_.every(y=>{var C;return _t(C=this.preloadSsrcs).call(C,y)})}preloadRemoteMedia(_){let y=0;const C=[],B=[];for(;_>0;){const L=[CU({ssrcId:b2+y},me("USE_SUB_RTX")?{rtx:b2+y+1}:{})],x="".concat(b2+y,"_").concat(TU+y),{ssrcs:X,ssrcGroups:G}=KS(L,this.cname,me("SYNC_GROUP")?x:void 0),q=this.preCreateOrRecycleSendMedia("video",X,G,void 0),Ae=[{ssrcId:TU+y}],ue="".concat(b2+y,"_").concat(TU+y),{ssrcs:_e,ssrcGroups:De}=KS(Ae,this.cname,me("SYNC_GROUP")?ue:void 0),Le=this.preCreateOrRecycleSendMedia("audio",_e,De,void 0);_--,y+=2,C.push(q,Le),B.push(X[0].ssrcId,_e[0].ssrcId)}return this.useLocalCodecsMids.push(...C),this.preloadSsrcs=B,{mids:C,preSSRCs:B,isAvailable:!0}}preCreateOrRecycleSendMedia(_,y,C,B){const L=this.rtpCapabilities.send.videoCodecs,x=this._isUseLocalCodecs||L.length===0?this.localCapabilities.recv:this.rtpCapabilities.send;H.debug("create or recycle send media without remote rtp capabilities, ssrcs ",y[0].ssrcId);const X=_===jt.VIDEO?x.videoCodecs:x.audioCodecs,G=_===jt.VIDEO?x.videoExtensions:x.audioExtensions;this.currentMidIndex+=1;const q="".concat(this.currentMidIndex);let Ae={media:{mediaType:_,port:S2,protos:["UDP","TLS","RTP","SAVPF"],fmts:X.map(ue=>ue.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:G,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:y,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:X,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(q)}};return Ae=this.mungSendMediaDesc(Ae,B),this.sessionDesc.mediaDescriptions.push(Ae),this.updateBundleMids(),q}toString(){return iv(this.sessionDesc)}send(_,y,C,B){const{ssrcs:L,ssrcGroups:x}=KS(y,this.cname,me("SYNC_GROUP")?C:void 0),X=this.findPreloadMediaDesc(L);if(X){if(Hi()&&this.firefoxSsrcMidMap.set(L[0].ssrcId,X.attributes.mid),B&&(B.twcc||B.remb)){const G=this.sessionDesc.mediaDescriptions.indexOf(X);return this.sessionDesc.mediaDescriptions[G]=this.mungSendMediaDesc(X,B),{mid:X.attributes.mid,needExchangeSDP:!0}}return{mid:X.attributes.mid,needExchangeSDP:!1}}{const G=this.findAvailableMediaIndex(_,L);let q;return G===-1||G===1&&(Js()||function(){const Ae=hn();return!(Ae.name!==Sn.CHROME||!Ae.osVersion)&&Number(Ae.version)<=90}()||me("ENABLE_ENCODED_TRANSFORM")&&kg())||G===0&&!function(Ae){const ue=hn();return!(ue.name!==Sn.FIREFOX||!ue.osVersion)&&Number(ue.version)===Ae}(138)&&me("USE_SUB_RTX")||xG()?(q=this.createOrRecycleSendMedia(_,L,x,"sendonly",B),this.updateBundleMids()):(q=Ni(this.sessionDesc.mediaDescriptions[G]),q.attributes.direction="sendonly",q.attributes.ssrcs=L,q.attributes.ssrcGroups=x,this.sessionDesc.mediaDescriptions[G]=this.mungSendMediaDesc(q,B)),Hi()&&this.firefoxSsrcMidMap.set(L[0].ssrcId,q.attributes.mid),{mid:q.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:_,needExchangeSDP:y}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:_.attributes.mid,needExchangeSDP:y}}batchSend(_){const y=_.map(L=>{let{kind:x,ssrcMsg:X,mslabel:G}=L;return this.send(x,X,G)}),C=[];let B=!1;return y.forEach(L=>{let{mid:x,needExchangeSDP:X}=L;X&&(B=!0),C.push(x)}),{mids:C,needExchangeSDP:B}}stopSending(_){const y=this.sessionDesc.mediaDescriptions.filter(C=>C.attributes.mid&&_.indexOf(C.attributes.mid)!==-1);if(y.length!==_.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");y.forEach(C=>{C.attributes.mid==="0"||Hi()||xG()?C.attributes.ssrcs=[]:(C.attributes.ssrcs=[],C.attributes.direction="inactive",C.media.port="0")}),this.updateBundleMids()}mute(_){const y=this.sessionDesc.mediaDescriptions.find(C=>C.attributes.mid===_);if(!y)throw new Error("mediaDescription not found with ".concat(_," in remote SDP when calling RemoteSDP.mute."));y.attributes.direction="inactive"}unmute(_){const y=this.sessionDesc.mediaDescriptions.find(C=>C.attributes.mid===_);if(!y)throw new Error("mediaDescription not found with ".concat(_," in remote SDP when calling RemoteSDP.unmute."));y.attributes.direction="sendonly"}muteRemote(_){const y=this.sessionDesc.mediaDescriptions.filter(C=>_t(_).call(_,C.attributes.mid||""));if(y.length!==_.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");y.forEach(C=>{C.attributes.direction="inactive"})}unmuteRemote(_){const y=this.sessionDesc.mediaDescriptions.filter(C=>_t(_).call(_,C.attributes.mid||""));if(y.length!==_.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");y.forEach(C=>{C.attributes.direction="recvonly"})}receive(_,y,C,B){_.forEach((L,x)=>{this.createOrRecycleRecvMedia(L,[],"recvonly",y,C,B[x])}),this.updateBundleMids()}stopReceiving(_){const y=this.sessionDesc.mediaDescriptions.filter(C=>_.indexOf(C.attributes.mid)!==-1);if(y.length!==_.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");y.forEach(C=>{C.media.port="0",C.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(_){const y=this.sessionDesc||wl((C=this._isUseExtmapAllowMixed,`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite`.concat(C?`
a=extmap-allow-mixed`:"",`
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`)));var C;this._rtpCapabilities=_;let B=!1;const L=this.rtpCapabilities.send,x=this.localCapabilities.send,X=this.localCapabilities.recv,G=X.videoCodecs,q=X.audioCodecs,Ae=X.videoExtensions,ue=X.audioExtensions;for(const Te of y.mediaDescriptions){var _e;if(Te.attributes.direction!=="sendonly"||typeof Te.attributes.mid!="string"||!_t(_e=this.useLocalCodecsMids).call(_e,Te.attributes.mid)){if(B=!0,Te.attributes.iceUfrag=this._iceParameters.iceUfrag,Te.attributes.icePwd=this._iceParameters.icePwd,Te.attributes.fingerprints=this._dtlsParameters.fingerprints,Te.attributes.candidates=this._candidates,Te.attributes.setup=this.setup,Te.media.mediaType==="application"&&(Te.attributes.sctpPort="5000"),Te.media.mediaType==="video")if(this._isUseLocalCodecs&&Te.attributes.direction==="sendonly"){var De;Te.media.fmts=G.map(rt=>rt.payloadType.toString(10)),Te.attributes.payloads=G,Te.attributes.extmaps=Ae;const ze=Te.attributes.mid;typeof ze!="string"||_t(De=this.useLocalCodecsMids).call(De,ze)||this.useLocalCodecsMids.push(ze)}else if(L.videoCodecs.length===0){const ze=x.videoCodecs.filter(rt=>{var At,wt;return(At=rt.rtpMap)===null||At===void 0?void 0:_t(wt=At.encodingName.toLowerCase()).call(wt,"vp8")})||[x.videoCodecs[0]];Te.media.fmts=ze.map(rt=>rt.payloadType.toString(10)),Te.attributes.payloads=ze,Te.attributes.extmaps=[]}else Te.media.fmts=L.videoCodecs.map(ze=>ze.payloadType.toString(10)),Te.attributes.payloads=L.videoCodecs,Te.attributes.extmaps=L.videoExtensions;if(Te.media.mediaType==="audio")if(this._isUseLocalCodecs&&Te.attributes.direction==="sendonly"){var Le;Te.media.fmts=q.map(rt=>rt.payloadType.toString(10)),Te.attributes.payloads=q,Te.attributes.extmaps=ue;const ze=Te.attributes.mid;typeof ze!="string"||_t(Le=this.useLocalCodecsMids).call(Le,ze)||this.useLocalCodecsMids.push(ze)}else if(L.audioCodecs.length===0){const ze=x.audioCodecs.filter(rt=>{var At,wt;return(At=rt.rtpMap)===null||At===void 0?void 0:_t(wt=At.encodingName.toLowerCase()).call(wt,"opus")})||[x.audioCodecs[0]];Te.media.fmts=ze.map(rt=>rt.payloadType.toString(10)),Te.attributes.payloads=ze,Te.attributes.extmaps=[]}else Te.media.fmts=L.audioCodecs.map(ze=>ze.payloadType.toString(10)),Te.attributes.payloads=L.audioCodecs,Te.attributes.extmaps=L.audioExtensions,Fy(Te)}}return this.sessionDesc=y,this.currentMidIndex=y.mediaDescriptions.length-1,[this.sessionDesc,B]}updateCandidates(_){const y=this._originCandidates.filter(B=>B.transport==="udp"),C=[];if(y.forEach(B=>{C.push(CU(CU({},B),{},{foundation:"tcpcandidate",priority:Number(B.priority)-1+"",transport:"tcp",port:Number(B.port)+90+""}))}),y.length!==0){switch(_){case _a.TCP_RELAY:this._candidates=C;break;case _a.UDP_TCP_RELAY:case _a.RELAY:this._candidates=[...y,...C];break;default:this._candidates=y}for(const B of this.sessionDesc.mediaDescriptions)B.attributes.candidates=this.candidates}}restartICE(_){_=Ni(_),this._iceParameters=_,this.sessionDesc.mediaDescriptions.forEach(y=>{y.attributes.iceUfrag=_.iceUfrag,y.attributes.icePwd=_.icePwd})}predictReceivingMids(_){const y=[];for(let C=0;C<_;C++)y.push((this.currentMidIndex+C+1).toString(10));return y}findAvailableMediaIndex(_,y){return this.sessionDesc.mediaDescriptions.findIndex(C=>{const B=C.media.mediaType===_&&C.media.port!=="0"&&(C.attributes.direction==="sendonly"||C.attributes.direction==="sendrecv")&&C.attributes.ssrcs.length===0;if(Hi()){if(B){const L=this.firefoxSsrcMidMap.get(y[0].ssrcId);return!(L||C.attributes.mid!=="0"&&C.attributes.mid!=="1")||!(!L||L!==C.attributes.mid)}return!1}return B})}createOrRecycleDataChannel(){for(const C of this.sessionDesc.mediaDescriptions)if(C.media.mediaType==="application")return{mediaDesc:C,needExchangeSDP:!1};this.currentMidIndex+=1;const _="".concat(this.currentMidIndex),y={media:{mediaType:"application",port:S2,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(_),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(y),{mediaDesc:y,needExchangeSDP:!0}}createOrRecycleRecvMedia(_,y,C,B,L,x){const X=_._mediaStreamTrack.kind,G=this.rtpCapabilities.recv,q=WS(X,G,this.localCapabilities.send,X===jt.VIDEO?B:L),Ae=X===jt.VIDEO?G.videoExtensions:G.audioExtensions;this.currentMidIndex+=1;const ue="".concat(this.currentMidIndex);let _e={media:{mediaType:X,port:S2,protos:["UDP","TLS","RTP","SAVPF"],fmts:q.map(Le=>Le.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:Ae,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:y,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:q,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:C,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(ue)}};_e=this.mungRecvMediaDsec(_e,_,x);const De=this.findFirstClosedMedia(X);if(De){const Le=this.sessionDesc.mediaDescriptions.indexOf(De);this.sessionDesc.mediaDescriptions[Le]=_e}else this.sessionDesc.mediaDescriptions.push(_e);return _e}updateRemoteDtlsParameters(_){const y=new Set(this._dtlsParameters.fingerprints.map(L=>L.fingerprint)),C=new Set(_.map(L=>L.fingerprint));let B=!1;y.size!==C.size&&(B=!0);for(const L of y)C.has(L)||(B=!0);return B}updateRemoteCodec(_,y,C){const B=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(_e=>_e.rtpMap&&_e.rtpMap.encodingName.toLowerCase()||"").filter(_e=>{var De;return _t(De=Object.keys(PS)).call(De,_e)}))],L=new Set(y);if(B.every(_e=>L.has(_e)))return H.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(y)),!1;const x=this._rtpCapabilities.recv.videoCodecs.filter(_e=>y.some(De=>{var Le;return _t(Le=_e.rtpMap&&_e.rtpMap.encodingName.toLowerCase()||"").call(Le,De)}));if(x.length===0)return H.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(B," codecs: ").concat(y)),!1;const X=[...new Set(x.map(_e=>_e.rtpMap&&_e.rtpMap.encodingName.toLowerCase()||""))];let G;if(H.debug("updateRemoteCodec, from ".concat(B," to ").concat(X)),_.length===0)G=this.sessionDesc.mediaDescriptions.filter(_e=>_e.media.mediaType==="video"&&_e.attributes.direction==="recvonly");else if(G=this.sessionDesc.mediaDescriptions.filter(_e=>_e.attributes.mid&&_e.media.mediaType==="video"&&_t(_).call(_,_e.attributes.mid)&&_e.attributes.direction==="recvonly"),G.length!==_.length)return H.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(_,", codecs: ").concat(y)),!1;if(me("USE_PUB_RTX")||me("USE_SUB_RTX")){const _e=Av(x,this.rtpCapabilities.recv.videoCodecs);x.push(..._e)}this._rtpCapabilities.recv.videoCodecs=x;const q=this.localCapabilities.send,Ae=this.rtpCapabilities.recv,ue=WS(jt.VIDEO,Ae,q,C);return G.forEach(_e=>{const De=ue.map(Le=>Le.payloadType.toString(10));H.debug("updateRemoteCodec mid: ".concat(_e.attributes.mid,", from"),_e.attributes.payloads,"to",ue),_e.attributes.payloads=ue,_e.media.fmts=De}),!0}createOrRecycleSendMedia(_,y,C,B,L){const x=this.rtpCapabilities.send.videoCodecs,X=this._isUseLocalCodecs||x.length===0?this.localCapabilities.recv:this.rtpCapabilities.send,G=_===jt.VIDEO?X.videoCodecs:X.audioCodecs,q=_===jt.VIDEO?X.videoExtensions:X.audioExtensions;this.currentMidIndex+=1;const Ae="".concat(this.currentMidIndex);let ue={media:{mediaType:_,port:S2,protos:["UDP","TLS","RTP","SAVPF"],fmts:G.map(De=>De.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:q,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:y,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:G,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:B,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Ae)}};ue=this.mungSendMediaDesc(ue,L);const _e=this.findFirstClosedMedia(_);if(_e){const De=this.sessionDesc.mediaDescriptions.indexOf(_e);this.sessionDesc.mediaDescriptions[De]=ue}else this.sessionDesc.mediaDescriptions.push(ue);return ue}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(_=>_.media.port!=="0").map(_=>_.attributes.mid)}mungRecvMediaDsec(_,y,C){const B=Ni(_);return dU(B),My(B,y),fU(B,y),aY(B),m2(B,C,this.localCapabilities.send),B}mungSendMediaDesc(_,y){const C=Ni(_);return m2(C,y,this.localCapabilities.recv),Fy(C),C}updateRecvMedia(_,y){const C=this.sessionDesc.mediaDescriptions.findIndex(B=>B.attributes.mid===_);if(C!==-1){const B=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[C],y);this.sessionDesc.mediaDescriptions[C]=B}}bumpMid(_){this.currentMidIndex+=_}findFirstClosedMedia(_){return this.sessionDesc.mediaDescriptions.find(y=>Hi()?y.media.port==="0"&&y.media.mediaType===_:y.media.port==="0")}findPreloadMediaDesc(_){return this.sessionDesc.mediaDescriptions.find(y=>{var C;return((C=y.attributes)===null||C===void 0||(C=C.ssrcs[0])===null||C===void 0?void 0:C.ssrcId)===_[0].ssrcId})}getSSRC(_){var y;return(y=this.sessionDesc.mediaDescriptions.find(C=>C.attributes.mid===_))===null||y===void 0?void 0:y.attributes.ssrcs}}(Xf(Xf({},n),{},{localCapabilities:this.localCapabilities}),this.supportAV1RtpSpec,!(!me("ENABLE_PRE_SUB_WITH_PRE_PC")||!me("PRE_USE_LOCAL_CODECS"))&&O5(this.store)),n.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const l=this.remoteSDP.toString(),d=AY(this.initialOffer.sdp,this.extension),h=this.logSDPExchange(d||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:d}),h==null||h(l),await this.peerConnection.setRemoteDescription({type:"answer",sdp:l});const v=this.peerConnection.getTransceivers()[0];if(v!=null&&v.receiver&&this.tryBindTransportEvents(v.receiver),O5(this.store))if(n.preallocation&&me("ENABLE_PRE_SUB_WITH_PRE_PC")){const _=me("PRE_SUB_NUM"),{mids:y,preSSRCs:C}=this.remoteSDP.preloadRemoteMedia(_);await dv(this.peerConnection,this.remoteSDP,this.extension),H.debug("[".concat(this.store.clientId,"] [P2PConnection] preload media, in pre pc,add preload ssrcs ").concat(C)),this.presetMedia(y,C)}else{const{preSSRCs:_=[]}=n,y=_.map(B=>B.ssrcMsg[0].ssrcId);if(_.length===0)return;const{mids:C}=this.remoteSDP.batchSend(_.map(B=>Object.assign({},B)));await dv(this.peerConnection,this.remoteSDP,this.extension),H.debug("[P2PConnection.connect] preload media, after join, add preload ssrcs ".concat(y)),this.presetMedia(C,y)}}catch(l){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(l.toString()))}var o,a}presetMedia(n,o){n.forEach((a,l)=>{this.peerConnection.getTransceivers().forEach(d=>{if(d.mid!=null&&a===d.mid&&d.receiver.track){const h=d.receiver.track;let v;h.kind==="video"&&me("ENABLE_PRE_RENDER")&&(v=new H5({trackId:"track-".concat(h.kind,"-unknown-").concat(this.store.clientId,"_").concat(ii(5,""))},!0),v.updateVideoTrack(h),v.onFirstVideoFrameRender=()=>{var _;const y=this.preMediaMap.get(o[l]);y&&(y.firstVideoRender=Date.now()),(_=this.onFirstVideoRender)===null||_===void 0||_.call(this,o[l])},v.play(this.store.sessionId||void 0)),this.preMediaMap.set(o[l],{mid:a,track:h,player:v,transceiver:d})}}),this.store.peerReceiver()})}checkDtlsParameters(n){return!!this.remoteSDP&&n.length>0&&this.remoteSDP.updateRemoteDtlsParameters(n)}async updateRemoteConnect(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");let o=!1;const{rtpCapabilities:a}=n;if([,o]=this.remoteSDP.updateRemoteRTPCapabilities(a),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0){const h=this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);o=o||h}const{preSSRCs:l=[]}=n,d=l.map(h=>h.ssrcMsg[0].ssrcId);if(!this.remoteSDP.checkPreloadSsrcs(d)){const h=[],v=[];if(Array.from(this.preMediaMap.entries()).every(_=>{let[y,{mid:C,player:B,track:L}]=_;return h.push(C),v.push(y),this.preMediaMap.delete(y),B&&B.destroy(),!0}),h.length>0&&(this.remoteSDP.stopSending(h),await dv(this.peerConnection,this.remoteSDP,this.extension),H.warn("[P2PConnection.updateRemoteConnect] preload media, failed, del preload ssrcs ".concat(v)),rr.reportApiInvoke(this.store.sessionId,{name:Ji.PRELOAD_MEDIA_FAILED,options:[l,v],tag:Oi.TRACER}).onSuccess()),l.length>0){const{mids:_}=this.remoteSDP.batchSend(l.map(y=>Object.assign({},y)));await dv(this.peerConnection,this.remoteSDP,this.extension),H.debug("[P2PConnection.updateRemoteConnect] preload media, after join, add preload ssrcs ".concat(d)),this.presetMedia(_,d)}}o?(await dv(this.peerConnection,this.remoteSDP,this.extension),H.debug("[P2PConnection] updateRemoteConnect by exchanging SDP.")):H.debug("[P2PConnection] updateRemoteConnect no need to exchange SDP, because no need to update remote codecs (use local codecs)")}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(o.toString()))}}send(n,o,a){var l=this;return _A(function*(){const d=yield mn(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[],v=h2();n.forEach(q=>{const Ae=l.peerConnection.addTransceiver(q._mediaStreamTrack,Xf({direction:"sendonly"},q.trackMediaType==="video"&&l.supportAV1RtpSpec&&v?{sendEncodings:[{scalabilityMode:v}]}:{}));h.push(Ae),q._updateRtpTransceiver(Ae)}),Hi()&&me("SIMULCAST")===!0&&(yield mn(l.applySimulcastForFirefox(h,n)));const _=yield mn(l.peerConnection.createOffer()),y=l.remoteSDP.predictReceivingMids(n.length),C=l.mungSendOfferSDP(_.sdp,n,y),B=wl(C),L=y.map(q=>{const Ae=B.mediaDescriptions.find(ue=>ue.attributes.mid===q);if(!Ae)throw new Error("Cannot extract ssrc from mediaDescription.");return iY(Ae,me("USE_PUB_RTX"))});let x;try{x=yield L}catch(q){x=[],l.remoteSDP.receive(n,o,a,x);const Ae=l.remoteSDP.toString();throw yield mn(l.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield mn(l.peerConnection.setRemoteDescription({type:"answer",sdp:Ae})),yield mn(l.stopSending(y,!0)),q}l.remoteSDP.receive(n,o,a,x);const X=l.remoteSDP.toString(),G=l.logSDPExchange(C,"offer","local","send");return yield mn(l.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield mn(l.applySimulcastEncodings(h,n)),yield mn(l.applySendEncodings(h,n)),G==null||G(X),yield mn(l.peerConnection.setRemoteDescription({type:"answer",sdp:X})),h.map((q,Ae)=>{const ue=y[Ae];return{localSSRC:L[Ae],id:ue,transceiver:q}})}catch(h){throw h instanceof tt?h:new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{d()}})()}async createDataChannels(n,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let a=this.dataStreamChannelMap.get(n);if(a&&a.readyState==="open")H.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const d=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof d!="number")throw new Error("create DataChannel error, because cannot get dc id");a=this.peerConnection.createDataChannel("datastream-channel",{id:d,negotiated:!0,ordered:!1,maxRetransmits:me("DATASTREAM_MAX_RETRANSMITS")}),a.binaryType="arraybuffer",this.dataStreamChannelMap.set(n,a)}o.forEach(d=>{d._updateOriginDataChannel(a)});const{needExchangeSDP:l}=this.remoteSDP.sendDataChannel();if(l){const d=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:d});const h=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(h),H.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else H.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(a){throw a instanceof tt?a:new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(a.toString()))}}async stopDataChannels(n){try{const o=this.dataStreamChannelMap.get(n);return o&&(o.id&&this.recoveredDataChannelIds.push(o.id),o.close()),void this.dataStreamChannelMap.delete(n)}catch(o){throw o instanceof tt?o:new tt(de.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(o.toString()))}}async stopSending(n,o){const a=o?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(_=>n.indexOf(_.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(_=>{var y;R2(this.id+_.mid,this),_.direction="inactive",(y=_.stop)===null||y===void 0||y.call(_)});const d=await this.peerConnection.createOffer(),h=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(n);const v=this.remoteSDP.toString();h==null||h(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,o,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:d,needExchangeSDP:h}=this.remoteSDP.send(n,o,a,l);h&&(await dv(this.peerConnection,this.remoteSDP,this.extension),H.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP.")));const v=this.peerConnection.getTransceivers().find(_=>_.mid===d);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:d,transceiver:v}}catch(d){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:o,needExchangeSDP:a}=this.remoteSDP.batchSend(n);return a&&(await dv(this.peerConnection,this.remoteSDP,this.extension),H.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),o.map(l=>{const d=this.peerConnection.getTransceivers().find(h=>h.mid===l);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:l,transceiver:d}})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");n.forEach(d=>{Array.from(this.preMediaMap.entries()).some(h=>{let[v,{mid:_,player:y}]=h;if(_===d)return this.preMediaMap.delete(v),y&&y.destroy(),!0})}),this.remoteSDP.stopSending(n);const o=this.remoteSDP.toString(),a=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.mute(n);const o=this.remoteSDP.toString(),a=this.logSDPExchange(o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(o.toString()))}}async unmuteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.unmute(n);const o=this.remoteSDP.toString(),a=this.logSDPExchange(o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(o.toString()))}}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(o.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(o.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async(h,v)=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec(n,this.remoteCodecs,this.store.codec);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(n){var o=this;return _A(function*(){const a=yield mn(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const l=vn().supportPCSetConfiguration,d=me("FORCE_TURN_TCP")||o.forceTurn;if(n===_a.RELAY&&!l)return;if(l&&!d){const B=n===_a.RELAY?"relay":"all",L=o.peerConnection.getConfiguration();L.iceTransportPolicy!==B&&(H.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(L.iceTransportPolicy,"] to [").concat(B,"]")),L.iceTransportPolicy=B,o.peerConnection.setConfiguration(L))}o.remoteSDP.updateCandidates(n);const h=yield mn(o.peerConnection.createOffer({iceRestart:!0}));if(!h.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const v=uv(h.sdp),{remoteIceParameters:_}=yield v.iceParameters;o.remoteSDP.restartICE(_);const y=o.remoteSDP.toString(),C=o.logSDPExchange(h.sdp||"","offer","local","restartICE");o.store.descriptionStart(),yield mn(o.peerConnection.setLocalDescription(h)),C==null||C(y),yield mn(o.peerConnection.setRemoteDescription({type:"answer",sdp:y}))}catch(l){H.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}async extendCandidate(){if(!this.remoteSDP||this.isFirstConnected)return;const n=await this.mutex.lock("From P2PConnection.extendCandidate");try{this.remoteSDP.updateCandidates(_a.TCP_RELAY),await dv(this.peerConnection,this.remoteSDP,this.extension)}catch(o){H.warning("[".concat(this.store.clientId,"] extend candidate failed, abort operation"),o)}finally{n()}}close(){var n;this.peerConnection.getTransceivers().forEach(o=>{R2(this.id+o.mid,this)}),this.preMediaMap.forEach(o=>{let{player:a}=o;a&&a.destroy()}),this.preMediaMap.clear(),this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return Xf(Xf({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[o],[n]);this.remoteSDP.updateRecvMedia(n,o);const d=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(a){throw new tt(de.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,o){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(o)?Hi()||await this.applySimulcastEncodings(a,[o]):await this.applySendEncodings(a,[o]))}setStatsRemoteVideoIsReady(n,o){this.statsFilter.setVideoIsReady2(n,o)}async replaceTrack(n,o){const a=this.peerConnection.getTransceivers().find(l=>l.mid===o);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const o=n[0].transport.iceTransport,{local:a,remote:l}=o.getSelectedCandidatePair();return{local:Xf(Xf({},gp),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:Xf(Xf({},gp),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;this.peerConnection.connectionState==="connected"&&(this.isFirstConnected=!0),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidateerror=n=>{if(n&&(n.errorCode||n.errorText)){var o;const a="code: ".concat(n.errorCode,", message: ").concat(n.errorText),l=n.port?"local: ".concat(n.port):"",d=l1(n.url||"");H.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICECandidateError(").concat(a,"), url: ").concat(d||"",", host_candidate:").concat(l)),(o=this.onICECandidateError)===null||o===void 0||o.call(this,a)}},this.peerConnection.onicegatheringstatechange=n=>{n&&n.target&&"iceGatheringState"in n.target&&H.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] RTCPeerConnection.onicegatheringstatechange(").concat(n.target.iceGatheringState,")"))},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,H.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,H.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},me("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const o={iceServers:[]},a=n.cloudProxyServer||"disabled";return n.iceServers?o.iceServers=n.iceServers:n.turnServer&&(IS(n.turnServer.servers)?o.iceServers=n.turnServer.servers:me("NEW_TURN_MODE")&&o.iceServers&&a==="disabled"?(me("USE_TURN_SERVER_OF_GATEWAY")?n.turnServer.serversFromGateway&&o.iceServers.push(...B1.newTurnServerConfigToIceServers(n.turnServer.serversFromGateway)):o.iceServers.push(...B1.newTurnServerConfigToIceServers(n.turnServer.servers)),me("NEW_FORCE_TURN")&&(o.iceTransportPolicy="relay")):n.turnServer.mode!=="off"&&(o.iceServers&&o.iceServers.push(...B1.turnServerConfigToIceServers(n.turnServer.servers)),me("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&n.turnServer.serversFromGateway&&o.iceServers.push(...B1.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),me("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(l=>{l.forceturn&&(o.iceTransportPolicy="relay")}))),me("ENABLE_ENCODED_TRANSFORM")&&vn().supportWebRTCEncodedTransform&&(o.encodedInsertableStreams=!0),o}static turnServerConfigToIceServers(n){const o=[];return n.forEach(a=>{a.security?a.tcpport&&o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(cv(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!me("FORCE_TURN_TCP")&&o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),o}static newTurnServerConfigToIceServers(n){const o=[];return n.forEach(a=>{const l=me("NEW_TURN_MODE");l===1?o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=udp")}):l===2?o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=tcp")}):l===3?o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(cv(a.turnServerURL),":443?transport=tcp")}):l===4&&(o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=udp")}),o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=tcp")}),o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(cv(a.turnServerURL),":443?transport=tcp")}))}),o}tryBindTransportEvents(n){const o=n.transport;if(o){this.transportEventReceiver=n,o.onstatechange=()=>{var l;o!=null&&o.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,o.state))},o.onerror=l=>{var d;(d=this.onDTLSTransportError)===null||d===void 0||d.call(this,"error"in l?l.error:l)};const a=o.iceTransport;a&&(a.onstatechange=()=>{const l=o==null?void 0:o.iceTransport.state;var d;l&&((d=this.onICETransportStateChange)===null||d===void 0||d.call(this,l))},a.getSelectedCandidatePair&&(a.onselectedcandidatepairchange=()=>{if(a.getSelectedCandidatePair()){const{local:l,remote:d}=a.getSelectedCandidatePair()||{};if(l&&d){const h=l.address+":"+l.port,v=d.address+":"+d.port;H.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify(l1(h)),", remote ").concat(JSON.stringify(l1(v))))}}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,o){var a,l;if(o||(o=this.peerConnection.getSenders().find(q=>q.track===n._mediaStreamTrack)),!o)return H.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return H.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!vn().supportSetRtpSenderParameters)return H.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const d={},h={};switch(n._optimizationMode){case"motion":d.degradationPreference="maintain-framerate";break;case"detail":d.degradationPreference="maintain-resolution";break;case"balanced":d.degradationPreference="balanced"}const v=function(G,q){return G.getTransceivers().find(Ae=>Ae.sender.track===q||Ae.receiver.track===q)}(this.peerConnection,n._mediaStreamTrack),_=gSe(n);if(function(G){var q;return!(!me("ENABLE_AG_ADAPTATION")||!(G instanceof XI||_t(q=G._hints).call(q,Jn.CUSTOM_TRACK))||!me("FORCE_SUPPORT_AG_ADAPTATION")&&!(kG(14,0,!1)&&DG(17,4,!0)||PG(14)&&i5(17,4,!0)))}(n)&&v&&o&&_&&this.getLocalVideoStats&&_t(a=["vp8","vp9"]).call(a,this.store.codec)){var y;const G=d.degradationPreference||(_t(y=n._hints).call(y,Jn.CUSTOM_TRACK)?me("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(q,Ae,ue,_e,De,Le){if(R2(q,ue),De(Ae),_e!=="balanced"&&_e!=="maintain-framerate"&&_e!=="maintain-resolution")return;let Te=-1;UY(q,Ae);const ze=window.setInterval(()=>{const At=T2.get(q);if(!me("ENABLE_AG_ADAPTATION")||!At)return R2(q,ue),void De(Ae);const wt=Le();if(wt.sendPackets>0&&wt.OutgoingAvailableBandwidth>0){if(Te===-1)return void(Te=Date.now());if(Date.now()-Te<1e3)return;const Gr=wt.sendFrameRate,en=wt.OutgoingAvailableBandwidth,[Or,Ln]=Obe(q,Gr,en,At.adaptationConfig,Ae,_e);Ln&&(ue.qualityLimitationReason=Ln),Or&&At.adaptationConfig.scale!==Or.scale&&(H.debug("[".concat(q,"] applyAdaptation: ").concat(ue.qualityLimitationReason,`
           sendFps `).concat(Gr,", bwe ").concat(en,", switch from ").concat(At.adaptationConfig.scale," to ").concat(Or.scale," ")),At.adaptationConfig=RU(RU({},At.adaptationConfig),Or),De(Or))}},me("CHECK_LOCAL_STATS_INTERVAL")),rt=RU({},Ae);T2.set(q,{timer:ze,adaptationConfig:rt,originConfig:Ae,adaptationFunc:De}),H.debug("[".concat(q,"] start adaptation, originConfig: ").concat(JSON.stringify(Ae),", degradationPreference: ").concat(_e))})(this.id+v.mid,_,this,G,q=>{o&&this.updateAdaptation(o,q)},this.getLocalVideoStats.bind(this))}if(n._encoderConfig){var C;const{bitrateMax:G,frameRate:q,scaleResolutionDownBy:Ae}=n._encoderConfig;G&&(h.maxBitrate=1e3*G),(_t(C=n._hints).call(C,Jn.LOW_STREAM)||n.isUseScaleResolutionDownBy)&&(q&&(h.maxFramerate=ru(q)),Ae&&Ae>=1&&(h.scaleResolutionDownBy=Ae))}const{maxFramerate:B}=me("ENCODER_CONFIG_LIMIT");if(B&&typeof B=="number"&&(h.maxFramerate=h.maxFramerate?Math.min(h.maxFramerate,B):B),me("DSCP_TYPE")&&Dg()){var L;const G=me("DSCP_TYPE");_t(L=["very-low","low","medium","high"]).call(L,G)&&(h.networkPriority=G)}const x=o.getParameters(),X=(l=x.encodings)===null||l===void 0?void 0:l[0];Hi()&&!X&&(d.encodings=[h]),X&&Object.assign(X,h),Object.assign(x,d),H.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(x.encodings))),await o.setParameters(x),await async function(G,q,Ae){try{var ue;if(!vn().supportSetRtpSenderParameters||!function(ze){return ze==="vp9"||ze==="av1"}(G)||!me("ENABLE_SVC"))return;const _e={},De={},Le=q.getParameters(),Te=(ue=Le.encodings)===null||ue===void 0?void 0:ue[0];De.scalabilityMode=h2(Ae),Te&&Object.assign(Te,De),Object.assign(Le,_e),await q.setParameters(Le),H.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(Le.encodings)))}catch(_e){H.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",_e)}}(this.store.codec,o,me("SVC_MODE"))}async updateAdaptation(n,o){var a,l;if(!n)return H.debug("[updateAdaptation] no rtpSender found");if(!vn().supportSetRtpSenderParameters)return H.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const d={},{bitrateMax:h,frameRate:v,scaleResolutionDownBy:_}=o;h&&(d.maxBitrate=1e3*h),v&&(d.maxFramerate=ru(v)),_&&_>=1&&_t(a=["vp8","vp9"]).call(a,this.store.codec)&&(d.scaleResolutionDownBy=_);const y=n.getParameters(),C=(l=y.encodings)===null||l===void 0?void 0:l[0];C&&Object.assign(C,d),Object.assign(y,{});try{await n.setParameters(y),H.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(y.encodings)))}catch(B){!("transport"in n)||n.transport&&n.transport.state==="connected"?this.peerConnectionState!=="connected"?H.debug("[updateAdaptation] peerConnection not connected}"):H.debug("[updateAdaptation] updateRtpSenderEncodings failed",B):H.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(n,o){try{if(!vn().supportSetRtpSenderParameters||n.length!==o.length)return;for(let a=0;a<n.length;a++){const l=n[a],d=o[a];d instanceof hi&&!this.isVP8Simulcast(d)&&await this.updateRtpSenderEncodings(d,l.sender)}}catch{H.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,o,a){const l=wl(n);return o.forEach((d,h)=>{const v=a[h],_=l.mediaDescriptions.find(y=>y.attributes.mid===v);_&&(My(_,d),cY(_,d,this.store.codec))}),iv(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,o,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,o,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,o)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,o)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,o)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,o){if(n.length===o.length)for(let _=0;_<n.length;_++){var a,l,d,h,v;const y=n[_],C=o[_];if(C instanceof hi&&!_t(a=C._hints).call(a,Jn.LOW_STREAM)&&(l=C._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((d=C._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)>200&&(h=C._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((v=C._scalabilityMode)===null||v===void 0?void 0:v.numSpatialLayers)>1&&this.store.codec==="vp8"){const B={},L={high:1e3*(C._encoderConfig.bitrateMax-50),medium:5e4};B.encodings=[{rid:"m",active:!0,maxBitrate:L.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:L.high}];const x=y.sender.getParameters();await y.sender.setParameters(Object.assign(x,B))}}}async applySimulcastEncodings(n,o){if(!Hi()&&n.length===o.length)for(let a=0;a<n.length;a++){const l=o[a];if(l instanceof hi&&this.isVP8Simulcast(l)){const d=n[a],h={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const _=d.sender.getParameters();await d.sender.setParameters(Object.assign(_,h))}}}isVP8Simulcast(n){var o,a,l,d,h;return!!(n instanceof hi&&me("SIMULCAST")&&this.store.codec==="vp8"&&!_t(o=n._hints).call(o,Jn.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=n._scalabilityMode)!==null&&d!==void 0&&d.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,o,a,l){if(me("SDP_LOGGING"))return H.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(o," SDP during P2PConnection.").concat(l,`
`),n),o==="offer"?d=>{this.logSDPExchange(d,"answer",a==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(n){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(n);return o&&o.length!==0?o[0].ssrcId:void 0}setConfiguration(n){if(vn().supportPCSetConfiguration){const o=B1.resolvePCConfiguration(n);this.peerConnection.setConfiguration(o)}n.isPreallocation&&(this.isPreallocation=!0)}},tr(pn.prototype,"updateRemoteRTPCapabilities",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"updateRemoteRTPCapabilities"),pn.prototype),tr(pn.prototype,"connect",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"connect"),pn.prototype),tr(pn.prototype,"updateRemoteConnect",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"updateRemoteConnect"),pn.prototype),tr(pn.prototype,"createDataChannels",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"createDataChannels"),pn.prototype),tr(pn.prototype,"receive",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"receive"),pn.prototype),tr(pn.prototype,"batchReceive",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"batchReceive"),pn.prototype),tr(pn.prototype,"stopReceiving",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"stopReceiving"),pn.prototype),tr(pn.prototype,"muteRemote",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"muteRemote"),pn.prototype),tr(pn.prototype,"unmuteRemote",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"unmuteRemote"),pn.prototype),tr(pn.prototype,"muteLocal",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"muteLocal"),pn.prototype),tr(pn.prototype,"unmuteLocal",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"unmuteLocal"),pn.prototype),tr(pn.prototype,"close",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"close"),pn.prototype),tr(pn.prototype,"updateEncoderConfig",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"updateEncoderConfig"),pn.prototype),tr(pn.prototype,"updateSendParameters",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"updateSendParameters"),pn.prototype),tr(pn.prototype,"replaceTrack",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"replaceTrack"),pn.prototype),tr(pn.prototype,"updateAdaptation",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"updateAdaptation"),pn.prototype),tr(pn.prototype,"getRemoteSSRC",[Jc],Object.getOwnPropertyDescriptor(pn.prototype,"getRemoteSSRC"),pn.prototype),pn);function Jc(r,n,o){const a=r[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,v=new Array(h),_=0;_<h;_++)v[_]=arguments[_];return await a.apply(this,v)}finally{d()}},o}function BU(r,n){let o=document.createElement("video"),a=document.createElement("canvas");o.setAttribute("style","display:none"),a.setAttribute("style","display:none"),o.setAttribute("muted",""),o.muted=!0,o.setAttribute("autoplay",""),o.autoplay=!0,o.setAttribute("playsinline",""),a.width=ru(n.width),a.height=ru(n.height);const l=ru(n.framerate||15);document.body.append(o),document.body.append(a);let d=r._mediaStreamTrack;o.srcObject=new MediaStream([d]),o.play();const h=a.getContext("2d");if(!h)throw new Je(de.UNEXPECTED_ERROR,"can not get canvas context");const v=vn(),_=a.captureStream(v.supportRequestFrame?0:l).getVideoTracks()[0];_.canvas||(_.canvas=a),a.startCapture=()=>{if(!o)return a.stopCapture&&a.stopCapture();if(o.paused&&o.play(),o.videoHeight>2&&o.videoWidth>2){const C=o.videoWidth,B=o.videoHeight/C,L=a.width*B;Math.abs(L-a.height)>=2&&(H.debug("adjust low stream resolution","".concat(a.width,"x").concat(a.height," -> ").concat(a.width,"x").concat(L)),a.height=L)}h.drawImage(o,0,0,a.width,a.height),_.requestFrame&&_.requestFrame(),d!==r._mediaStreamTrack&&(d=r._mediaStreamTrack,o.srcObject=new MediaStream([d]))},a.stopCapture=x5(()=>a.startCapture&&a.startCapture(),l);const y=_.stop;return _.stop=()=>{y.call(_),o&&(o.remove(),o.srcObject=null,o=null),a&&(a.width=0,a.remove(),a.stopCapture&&a.stopCapture(),a.startCapture=void 0,a.stopCapture=void 0,a=null),H.debug("clean low stream renderer")},_}var HY=function(r){return r[r.Video_Send_Type=190]="Video_Send_Type",r}(HY||{}),Jf=function(r){return r[r.Video_Send_Qp_Sum=2143]="Video_Send_Qp_Sum",r[r.Video_Send_Freeze=2082]="Video_Send_Freeze",r[r.Video_Recv_Qp_Sum=2144]="Video_Recv_Qp_Sum",r[r.Video_Recv_Freeze=2084]="Video_Recv_Freeze",r[r.Video_Render_Freeze_Time=2109]="Video_Render_Freeze_Time",r[r.Video_Render_Freeze_Time_Render=2147]="Video_Render_Freeze_Time_Render",r[r.Video_Render_Freeze_Time_Render2=2223]="Video_Render_Freeze_Time_Render2",r[r.Audio_Recv_Freeze=2083]="Audio_Recv_Freeze",r}(Jf||{}),xr=function(r){return r[r.Video_Send_Retransmit=2062]="Video_Send_Retransmit",r[r.Video_Send_Target_Encoded=2064]="Video_Send_Target_Encoded",r[r.Video_Send_Actual_Encoded=2060]="Video_Send_Actual_Encoded",r[r.Video_Send_Transmit=2066]="Video_Send_Transmit",r[r.Video_Send_Bandwidth=2061]="Video_Send_Bandwidth",r[r.Video_Capture_Height=2033]="Video_Capture_Height",r[r.Video_Capture_Width=2035]="Video_Capture_Width",r[r.Video_Capture_Frame_Rate=2034]="Video_Capture_Frame_Rate",r[r.Video_Send_Low_Height=2073]="Video_Send_Low_Height",r[r.Video_Send_Low_Frame_Rate=2075]="Video_Send_Low_Frame_Rate",r[r.Video_Send_Low_Width=2077]="Video_Send_Low_Width",r[r.Video_Send_Low_Bitrate=2069]="Video_Send_Low_Bitrate",r[r.Video_Send_Low_Package_Lost=2070]="Video_Send_Low_Package_Lost",r[r.Video_Send_Low_Package_Rate=2071]="Video_Send_Low_Package_Rate",r[r.Video_Send_Frame_Rate=2002]="Video_Send_Frame_Rate",r[r.Video_Send_Width=2003]="Video_Send_Width",r[r.Video_Send_Height=2004]="Video_Send_Height",r[r.Video_Send_Disabled=2095]="Video_Send_Disabled",r[r.Video_Send_Adaptation=2032]="Video_Send_Adaptation",r[r.Video_Send_Player_Status=2128]="Video_Send_Player_Status",r[r.Video_Send_Nacks=2009]="Video_Send_Nacks",r[r.Video_Send_Plis=2010]="Video_Send_Plis",r[r.Video_Send_Firs=2011]="Video_Send_Firs",r[r.Video_Send_Avg_Encode=2007]="Video_Send_Avg_Encode",r[r.Video_Send_Huge_Frame_Sent=2174]="Video_Send_Huge_Frame_Sent",r[r.Video_Send_Bytes_Retransmit=2173]="Video_Send_Bytes_Retransmit",r[r.Video_Send_Packages_Retransmit=2172]="Video_Send_Packages_Retransmit",r[r.Video_Send_Key_Frames_Encoded=2207]="Video_Send_Key_Frames_Encoded",r[r.Video_Send_Bitrate=2012]="Video_Send_Bitrate",r[r.Video_Send_Package_Rate=2031]="Video_Send_Package_Rate",r[r.Video_Send_Package_Lost=2005]="Video_Send_Package_Lost",r[r.Audio_Capture_PCM_Level=2104]="Audio_Capture_PCM_Level",r[r.Audio_Send_Level=2038]="Audio_Send_Level",r[r.Audio_Send_Bitrate=2039]="Audio_Send_Bitrate",r[r.Audio_Send_Package_Rate=2040]="Audio_Send_Package_Rate",r[r.Audio_Send_AEC_Return_Loss=2041]="Audio_Send_AEC_Return_Loss",r[r.Audio_Send_AEC_Return_Loss_Enhancement=2042]="Audio_Send_AEC_Return_Loss_Enhancement",r[r.Audio_Send_Freeze=2081]="Audio_Send_Freeze",r[r.Audio_Send_Disabled=2096]="Audio_Send_Disabled",r[r.Audio_Send_Bytes_Retransmit=2179]="Audio_Send_Bytes_Retransmit",r[r.Audio_Send_Packages_Retransmit=2180]="Audio_Send_Packages_Retransmit",r[r.Video_Recv_Height=2019]="Video_Recv_Height",r[r.Video_Recv_Width=2018]="Video_Recv_Width",r[r.Video_Recv_Frame_Rate_Output=2155]="Video_Recv_Frame_Rate_Output",r[r.Video_Recv_Jitter_Buffer=2023]="Video_Recv_Jitter_Buffer",r[r.Video_Recv_Current_Delay=2024]="Video_Recv_Current_Delay",r[r.Video_Recv_Nacks=2026]="Video_Recv_Nacks",r[r.Video_Recv_Plis=2027]="Video_Recv_Plis",r[r.Video_Recv_Firs=2028]="Video_Recv_Firs",r[r.Video_Recv_Disabled=2101]="Video_Recv_Disabled",r[r.Video_Recv_Player_Status=2129]="Video_Recv_Player_Status",r[r.Video_Recv_I_Frame_Delay=2149]="Video_Recv_I_Frame_Delay",r[r.Video_Render_Frame_Rate_Render=2022]="Video_Render_Frame_Rate_Render",r[r.Video_Render_Freeze_Duration=2156]="Video_Render_Freeze_Duration",r[r.Audio_Render_Level=2043]="Audio_Render_Level",r[r.Audio_Render_Freeze_Time_80ms=2226]="Audio_Render_Freeze_Time_80ms",r[r.Audio_Render_Freeze_Time_200ms=2227]="Audio_Render_Freeze_Time_200ms",r[r.Audio_Render_Freeze_Samples_80ms=2228]="Audio_Render_Freeze_Samples_80ms",r[r.Audio_Render_Freeze_Samples_200ms=2229]="Audio_Render_Freeze_Samples_200ms",r[r.Audio_Recv_PCM_Level=2105]="Audio_Recv_PCM_Level",r[r.Audio_Recv_Disabled=2102]="Audio_Recv_Disabled",r[r.Audio_Recv_Jitter_Buffer=2054]="Audio_Recv_Jitter_Buffer",r[r.Audio_Recv_Current_Delay=2047]="Audio_Recv_Current_Delay",r[r.Audio_Recv_Player_Status=2130]="Audio_Recv_Player_Status",r[r.Audio_Recv_Bitrate=2044]="Audio_Recv_Bitrate",r[r.Audio_Recv_Concealed_Samples=2148]="Audio_Recv_Concealed_Samples",r[r.Audio_Recv_Total_Samples_Received=2224]="Audio_Recv_Total_Samples_Received",r}(xr||{}),xs=function(r){return r[r.Video_Render_Frame_Rate_Decode=2021]="Video_Render_Frame_Rate_Decode",r[r.Video_Recv_Frame_Rate=2020]="Video_Recv_Frame_Rate",r[r.Video_Recv_Frame_Dropped=2181]="Video_Recv_Frame_Dropped",r[r.Video_Recv_Bytes_Retransmit=2175]="Video_Recv_Bytes_Retransmit",r[r.Video_Recv_Packages_Retransmit=2176]="Video_Recv_Packages_Retransmit",r[r.Video_Recv_Packages_Discarded=2198]="Video_Recv_Packages_Discarded",r[r.Video_Recv_Avg_Decode=2200]="Video_Recv_Avg_Decode",r[r.Video_Recv_Avg_Processing_Delay=2202]="Video_Recv_Avg_Processing_Delay",r[r.Video_Recv_Avg_Assembly_Time=2203]="Video_Recv_Avg_Assembly_Time",r[r.Video_Recv_Avg_Inter_Frame_Delay=2204]="Video_Recv_Avg_Inter_Frame_Delay",r[r.Video_Recv_Key_Frames_Decoded=2206]="Video_Recv_Key_Frames_Decoded",r[r.Video_Recv_Package_Lost=2014]="Video_Recv_Package_Lost",r[r.Video_Recv_Bitrate=2029]="Video_Recv_Bitrate",r[r.Video_Recv_Package_Rate=2078]="Video_Recv_Package_Rate",r[r.Audio_Recv_Jitter=2055]="Audio_Recv_Jitter",r[r.Audio_Recv_Bytes_Retransmit=2178]="Audio_Recv_Bytes_Retransmit",r[r.Audio_Recv_Packages_Retransmit=2177]="Audio_Recv_Packages_Retransmit",r[r.Audio_Recv_Packages_Discarded=2199]="Audio_Recv_Packages_Discarded",r[r.Audio_Recv_Avg_Processing_Delay=2201]="Audio_Recv_Avg_Processing_Delay",r[r.Audio_Recv_Package_Rate=2046]="Audio_Recv_Package_Rate",r[r.Audio_Recv_Package_Lost=2045]="Audio_Recv_Package_Lost",r}(xs||{}),Zc=function(r){return r[r.RTT=2006]="RTT",r[r.CONN_TYPE=801]="CONN_TYPE",r[r.STATS_UPDATE_INTERVAL=2205]="STATS_UPDATE_INTERVAL",r}(Zc||{}),O2=function(r){return r[r.RTC_PEER_CONNECTION_STATE=2219]="RTC_PEER_CONNECTION_STATE",r}(O2||{});const A1=1e3,N2=6,qS=3,Lbe=Math.max(N2,qS,60);function hr(r,n,o){o!=null&&Number.isFinite(o)&&(r[n]=Math.round(Math.max(0,o)))}function jY(r){const n={[Zc.CONN_TYPE]:0,[Zc.RTT]:r.rtt,[Zc.STATS_UPDATE_INTERVAL]:r.updateInterval?Math.round(Math.max(0,r.updateInterval)):void 0};switch(r.selectedCandidatePair.localCandidate.candidateType){case"relay":{const o=r.selectedCandidatePair.localCandidate.relayProtocol;o==="udp"&&(n[Zc.CONN_TYPE]=1),o==="tcp"&&(n[Zc.CONN_TYPE]=3),o==="tls"&&(n[Zc.CONN_TYPE]=4);break}case"srflx":n[Zc.CONN_TYPE]=2;break;case"unknown":n[Zc.CONN_TYPE]=5;break;default:n[Zc.CONN_TYPE]=0}return n}function KY(r){let n=0;switch(r){case"none":n=0;break;case"cpu":n=1;break;case"bandwidth":n=2;break;case"other":n=3}return n}class WY extends Mi{constructor(n){super(),re(this,"store",void 0),re(this,"uploadWRTCStatsTimer",void 0),re(this,"uploadOutboundDenoiserStatsTimer",void 0),re(this,"uploadExtStatsTimer",void 0),re(this,"uploadExtUsageStatsTimer",void 0),re(this,"uploadInboundExtStatsTimer",void 0),re(this,"requestStats",void 0),re(this,"requestTransportStats",void 0),re(this,"requestLocalMedia",void 0),re(this,"requestRemoteMedia",void 0),re(this,"requestAllTracks",void 0),re(this,"requestVideoIsReady",void 0),re(this,"requestUploadStats",void 0),re(this,"requestUpload",void 0),re(this,"uploadOutboundStarted",!1),re(this,"uploadInboundStarted",!1),re(this,"uploadTransportStarted",!1),re(this,"uploadBaseStatsStarted",!1),re(this,"uploadExtensionUsageStarted",!1),re(this,"lastRecvStats",void 0),re(this,"lastSendStats",void 0),re(this,"lastRefRecvStats",void 0),re(this,"lastRefSendStats",void 0),re(this,"lastNormalRecvStats",void 0),re(this,"lastNormalSendStats",void 0),re(this,"lastExtendStats",{}),re(this,"needUploadStats",{}),re(this,"needUploadRenderFreezeTime",!0),re(this,"lastUploadCompensateTime",-1),re(this,"uploadCompensateDeltaTime",0),this.store=n}uploadWRTCStats(n){if(!this.requestStats||!this.requestUploadStats)return;const o=n%qS==0,a=n%N2==0,l=n%60==0;let d,h;if(this.uploadTransportStarted&&(d=this.requestStats(),this.store.useP2P&&(h=this.requestStats(!0))),!d&&this.uploadOutboundStarted&&(d=this.requestStats()),!h&&this.uploadInboundStarted&&(h=this.requestStats(!0)),d||h){var v;const _={};if(this.uploadTransportStarted&&d){const C=this.getTransportStats(d,h,o);C&&(_.misc=[C])}if(this.uploadOutboundStarted&&d){const C=this.getOutboundStats(d,a?this.lastNormalSendStats:void 0,o?this.lastRefSendStats:void 0,this.lastSendStats,l);C&&(_.outbound=[C])}if(this.uploadInboundStarted&&h){this.uploadCompensateStats(n);const C=this.getInboundStats(h,a?this.lastNormalRecvStats:void 0,o?this.lastRefRecvStats:void 0,this.lastRecvStats);C&&(_.inbound=C)}const y=(v=this.requestTransportStats)===null||v===void 0?void 0:v.call(this).connectState;y&&(Array.isArray(_.misc)?_.misc[0]&&_.misc[0].addition&&(_.misc[0].addition[O2.RTC_PEER_CONNECTION_STATE]=y5[y]):_.misc=[{addition:{[O2.RTC_PEER_CONNECTION_STATE]:y5[y]}}]),this.needUploadStats.sendType&&(Array.isArray(_.outbound)&&_.outbound[0]&&_.outbound[0].high&&(_.outbound[0].high[HY.Video_Send_Type]=this.needUploadStats.sendType),this.needUploadStats.sendType=void 0),this.requestUploadStats(_)}this.lastRecvStats=h,this.lastSendStats=d,a&&(this.lastNormalRecvStats=h,this.lastNormalSendStats=d),o&&(this.lastRefRecvStats=h,this.lastRefSendStats=d)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;this.uploadBaseStatsStarted=!0;let n=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted){if(this.uploadBaseStatsStarted){var o,a;const l=(o=this.requestTransportStats)===null||o===void 0?void 0:o.call(this);return void(l&&((a=this.requestUploadStats)===null||a===void 0||a.call(this,{misc:[{addition:{[O2.RTC_PEER_CONNECTION_STATE]:y5[l.connectState]}}]})))}return this.stopUploadWRTCStats()}this.uploadWRTCStats(n),++n===Lbe+1&&(n=1)},A1)}uploadCompensateStats(n){if(!this.requestStats||!this.requestUploadStats||!this.requestRemoteMedia)return;const o=n%qS==0&&this.needUploadRenderFreezeTime;if(!this.uploadInboundStarted||!o)return;if(this.lastUploadCompensateTime===-1)return void(this.lastUploadCompensateTime=Date.now());const a=Math.max(-6e3,Date.now()-this.lastUploadCompensateTime-6e3);if(this.uploadCompensateDeltaTime+=a,this.lastUploadCompensateTime=Date.now(),this.uploadCompensateDeltaTime<6e3)return;const l=Math.min(Math.floor(this.uploadCompensateDeltaTime/6e3),10);this.uploadCompensateDeltaTime-=6e3*l;const d=this.requestStats(!0);new Array(l).fill(0).forEach(()=>{if(!this.requestStats||!this.requestUploadStats||!this.requestRemoteMedia)return;const h={};if(this.uploadInboundStarted&&d){const v=this.requestRemoteMedia()||[],_=[];v.forEach(y=>{let[C,B]=y;const L={peer:C.uid};if(C._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(C._videoSSRC)&&B.has(jt.VIDEO)&&C.videoTrack){const x=function(X,G,q){if(!G.videoRecv.find(ue=>ue.ssrc===X))return;const Ae={};if(q&&q._player){const ue=q._player,{renderFreezeAccTime2:_e,videoElementStatus:De}=ue;if(_p.visibility==="visible"&&De===ma.PLAYING&&vn().supportRequestVideoFrameCallback){const Le=Math.min(6e3,_e);ue.renderFreezeAccTime2=Math.max(0,_e-Le),hr(Ae,Jf.Video_Render_Freeze_Time_Render2,Le),me("USE_NEW_RENDER_FREEZE_TIME")&&hr(Ae,Jf.Video_Render_Freeze_Time_Render,Le)}}return Ae}(C._videoSSRC,d,C.videoTrack);x&&(L.video=x)}L.video&&_.push(L)}),_.length>0&&(h.inbound=_,this.requestUploadStats(h))}})}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0),this.lastRefSendStats&&(this.lastRefSendStats.videoSend=[],this.lastRefSendStats.audioSend=[],this.lastRefSendStats=void 0),this.lastRefRecvStats&&(this.lastRefRecvStats.videoRecv=[],this.lastRefRecvStats.audioRecv=[],this.lastRefRecvStats=void 0),this.lastNormalSendStats&&(this.lastNormalSendStats.videoSend=[],this.lastNormalSendStats.audioSend=[],this.lastNormalSendStats=void 0),this.lastNormalRecvStats&&(this.lastNormalRecvStats.videoRecv=[],this.lastNormalRecvStats.audioRecv=[],this.lastNormalRecvStats=void 0),this.lastExtendStats={},this.needUploadStats={},this.lastUploadCompensateTime=-1,this.uploadCompensateDeltaTime=0,this.needUploadRenderFreezeTime=!0}getTransportStats(n,o,a){if(!this.requestStats)return;if(!a)return n.rtt==null?void 0:{addition:{[Zc.RTT]:n.rtt,[Zc.CONN_TYPE]:void 0,[Zc.STATS_UPDATE_INTERVAL]:n.updateInterval||void 0}};const l=jY(n);if(this.store.useP2P){if(o){const d=jY(o);l[Zc.CONN_TYPE]+=d[Zc.CONN_TYPE]<<3}l[Zc.CONN_TYPE]+=110}else l[Zc.CONN_TYPE]+=100;return{addition:l}}getOutboundStats(n,o,a,l,d){if(!this.requestUploadStats||!this.requestLocalMedia)return;const h=this.requestLocalMedia();if(!h||h.length===0)return;let v,_,y;return h.forEach(C=>{let[B,{track:L,ssrcs:x}]=C;switch(B){case mt.LocalVideoLowTrack:case mt.LocalVideoTrack:if(B===mt.LocalVideoTrack){var X;const G=function(_e,De,Le,Te,ze,rt){const At=De.videoSend.find(Or=>Or.ssrc===_e);if(!At)return;const wt={},{sentFrame:Gr,inputFrame:en}=At;if(Te&&(hr(wt,Jf.Video_Send_Qp_Sum,At.qpSumPerFrame),en&&Gr)){const Or=en.frameRate,Ln=Gr.frameRate;wt[Jf.Video_Send_Freeze]=function(Tn,Ea){let ct=!0;return ct=!(Tn<=5)&&(Tn<=10?Ea<3:Tn<=20?Ea<4:Ea<5),ct}(Or,Ln)?1:0}if(ze){switch(Gr&&(hr(wt,xr.Video_Send_Height,Gr.height),hr(wt,xr.Video_Send_Width,Gr.width),hr(wt,xr.Video_Send_Frame_Rate,Gr.frameRate)),wt[xr.Video_Send_Disabled]=Le._originMediaStreamTrack&&!Le._originMediaStreamTrack.enabled||Le._mediaStreamTrack&&!Le._mediaStreamTrack.enabled?1:0,At.adaptionChangeReason){case"none":wt[xr.Video_Send_Adaptation]=0;break;case"cpu":wt[xr.Video_Send_Adaptation]=1;break;case"bandwidth":wt[xr.Video_Send_Adaptation]=2;break;case"other":wt[xr.Video_Send_Adaptation]=3}let Or=0;At.adaptionChangeReason&&(Or+=KY(At.adaptionChangeReason)),De.qualityLimitationReason&&(Or+=KY(De.qualityLimitationReason)<<3),wt[xr.Video_Send_Adaptation]=Or,wt[xr.Video_Send_Player_Status]=k5[Le._player?Le._player.videoElementStatus:"uninit"],hr(wt,xr.Video_Send_Nacks,At.nacksCount),hr(wt,xr.Video_Send_Plis,At.plisCount),hr(wt,xr.Video_Send_Firs,At.firsCount),hr(wt,xr.Video_Send_Avg_Encode,At.avgEncodeMs),hr(wt,xr.Video_Send_Huge_Frame_Sent,At.hugeFramesSent),hr(wt,xr.Video_Send_Bytes_Retransmit,At.retransmittedBytesSent),hr(wt,xr.Video_Send_Packages_Retransmit,At.retransmittedPacketsSent),hr(wt,xr.Video_Send_Key_Frames_Encoded,At.keyFramesEncoded);const Ln=ze.videoSend.find(Tn=>Tn.ssrc===_e);if(Ln){let Tn=A1*qS;Ln.timestamp&&At.timestamp&&(Tn=At.timestamp-Ln.timestamp),Ln.packets!=null&&At.packets!=null&&hr(wt,xr.Video_Send_Package_Rate,1e3*(At.packets-Ln.packets)/Tn),At.packetsLost!=null&&Ln.packetsLost!=null&&hr(wt,xr.Video_Send_Package_Lost,At.packetsLost-Ln.packetsLost),Ln.bytes!=null&&At.bytes!=null&&hr(wt,xr.Video_Send_Bitrate,8*(At.bytes-Ln.bytes)/Tn)}}return wt}(x[0].ssrcId,n,L,o,a),q=L.__className__==="CameraVideoTrack"?3:_t(X=L._hints).call(X,Jn.SCREEN_TRACK)?7:10;(this.lastExtendStats.sendType!==q||d)&&(this.needUploadStats={sendType:q},this.lastExtendStats.sendType=q);const Ae=L&&function(_e,De,Le,Te){const ze=De.videoSend.find(At=>At.ssrc===_e);if(!ze)return null;const rt={};if(Te){const At=ze.inputFrame,wt=At&&At.height||Le.videoHeight||0,Gr=At&&At.width||Le.videoWidth||0,en=At&&At.frameRate||0;hr(rt,xr.Video_Capture_Height,wt),hr(rt,xr.Video_Capture_Width,Gr),hr(rt,xr.Video_Capture_Frame_Rate,en)}return rt}(x[0].ssrcId,n,L,!!a),ue=function(_e,De){const Le={};return De&&(hr(Le,xr.Video_Send_Retransmit,_e.bitrate.retransmit),hr(Le,xr.Video_Send_Target_Encoded,_e.bitrate.targetEncoded),hr(Le,xr.Video_Send_Actual_Encoded,_e.bitrate.actualEncoded),hr(Le,xr.Video_Send_Transmit,_e.bitrate.transmit),hr(Le,xr.Video_Send_Bandwidth,_e.sendBandwidth)),Le}(n,!!a);_=Object.assign({},G,Ae,ue)}else y=function(G,q,Ae,ue,_e){const De=q.videoSend.find(Te=>Te.ssrc===G);if(!De)return;const Le={};if(ue){const Te=De.sentFrame;Te&&(hr(Le,xr.Video_Send_Low_Height,Te.height),hr(Le,xr.Video_Send_Low_Width,Te.width),hr(Le,xr.Video_Send_Low_Frame_Rate,Te.frameRate));const ze=ue.videoSend.find(rt=>rt.ssrc===G);if(ze){let rt=A1*N2;ze.timestamp&&De.timestamp&&(rt=De.timestamp-ze.timestamp),ze.packets!=null&&De.packets!=null&&hr(Le,xr.Video_Send_Low_Package_Rate,1e3*(De.packets-ze.packets)/rt),De.packetsLost!=null&&ze.packetsLost!=null&&hr(Le,xr.Video_Send_Low_Package_Lost,De.packetsLost-ze.packetsLost),ze.bytes!=null&&De.bytes!=null&&hr(Le,xr.Video_Send_Low_Bitrate,8*(De.bytes-ze.bytes)/rt)}}return Le}(x[0].ssrcId,n,0,a);break;case mt.LocalAudioTrack:v=L&&function(G,q,Ae,ue,_e,De){const Le=q.audioSend.find(ze=>ze.ssrc===G);if(!Le)return;const Te={};if(_e){Te[xr.Audio_Send_Disabled]=Ae._originMediaStreamTrack&&!Ae._originMediaStreamTrack.enabled||Ae._mediaStreamTrack&&!Ae._mediaStreamTrack.enabled?1:0;const ze=100*Ae._source.getAccurateVolumeLevel(),rt=Le.inputLevel;if(rt!=null){const wt=Math.ceil(50*Math.log10(100*rt+1));hr(Te,xr.Audio_Send_Level,wt)}hr(Te,xr.Audio_Capture_PCM_Level,ze),hr(Te,xr.Audio_Send_AEC_Return_Loss,Le.aecReturnLoss),hr(Te,xr.Audio_Send_AEC_Return_Loss_Enhancement,Le.aecReturnLossEnhancement),hr(Te,xr.Audio_Send_Bytes_Retransmit,Le.retransmittedBytesSent),hr(Te,xr.Audio_Send_Packages_Retransmit,Le.retransmittedPacketsSent),Te[xr.Audio_Send_Freeze]=0;const At=_e.audioSend.find(wt=>wt.ssrc===G);if(At){let wt=A1*N2;At.timestamp&&Le.timestamp&&(wt=Le.timestamp-At.timestamp),At.bytes!=null&&Le.bytes!=null&&hr(Te,xr.Audio_Send_Bitrate,8*(Le.bytes-At.bytes)/wt),At.packets!=null&&Le.packets!=null&&hr(Te,xr.Audio_Send_Package_Rate,1e3*(Le.packets-At.packets)/wt)}}return Te}(x[0].ssrcId,n,L,0,a)}}),{high:_,low:y,audio:v}}getInboundStats(n,o,a,l){if(!this.requestRemoteMedia)return;const d=this.requestRemoteMedia()||[],h=[];return d.forEach(v=>{let[_,y]=v;const C={peer:_.uid};if(y.has(jt.VIDEO)&&_.videoTrack){const B=_._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(_._videoSSRC)||!1,L=_.videoTrack?function(x,X,G,q,Ae,ue,_e,De){const Le=X.videoRecv.find(Or=>Or.ssrc===x);if(!Le)return;const Te={},{receivedFrame:ze,outputFrame:rt,decodeFrameRate:At}=Le;hr(Te,xs.Video_Render_Frame_Rate_Decode,At),Le.framesRateFirefox&&hr(Te,xs.Video_Recv_Frame_Rate,Le.framesRateFirefox),ze&&hr(Te,xs.Video_Recv_Frame_Rate,ze.frameRate),hr(Te,xs.Video_Recv_Frame_Dropped,Le.framesDroppedCount),hr(Te,xs.Video_Recv_Bytes_Retransmit,Le.retransmittedBytesReceived),hr(Te,xs.Video_Recv_Packages_Retransmit,Le.retransmittedPacketsReceived),hr(Te,xs.Video_Recv_Packages_Discarded,Le.packetsDiscarded),hr(Te,xs.Video_Recv_Avg_Decode,Le.avgDecodeMs),hr(Te,xs.Video_Recv_Avg_Processing_Delay,Le.avgProcessingDelayMs),hr(Te,xs.Video_Recv_Avg_Assembly_Time,Le.avgFramesAssembledFromMultiplePacketsMs),hr(Te,xs.Video_Recv_Avg_Inter_Frame_Delay,Le.avgInterFrameDelayMs),hr(Te,xs.Video_Recv_Key_Frames_Decoded,Le.keyFramesDecoded);const wt=De&&De.videoRecv.find(Or=>Or.ssrc===x);if(wt){const Or=X.timestamp-De.timestamp||A1;Le.packetsLost!=null&&wt.packetsLost!=null&&hr(Te,xs.Video_Recv_Package_Lost,Le.packetsLost-wt.packetsLost),wt.bytes!=null&&Le.bytes!=null&&hr(Te,xs.Video_Recv_Bitrate,8*(Le.bytes-wt.bytes)/Or),wt.packets!=null&&Le.packets!=null&&hr(Te,xs.Video_Recv_Package_Rate,1e3*(Le.packets-wt.packets)/Or)}const Gr=ue&&ue.videoRecv.find(Or=>Or.ssrc===x);if(Gr&&(hr(Te,Jf.Video_Recv_Qp_Sum,Le.qpSumPerFrame),Te[Jf.Video_Recv_Freeze]=q&&zS.isRemoteVideoFreeze(G,Le,Gr)?1:0),_e){var en;const Or=_e.videoRecv.find(Tn=>Tn.ssrc===x);ze?(hr(Te,xr.Video_Recv_Height,ze.height),hr(Te,xr.Video_Recv_Width,ze.width)):G&&(hr(Te,xr.Video_Recv_Height,G._videoHeight||0),hr(Te,xr.Video_Recv_Width,G._videoWidth||0)),rt&&hr(Te,xr.Video_Recv_Frame_Rate_Output,rt.frameRate);const Ln=(en=G._player)===null||en===void 0?void 0:en.rendFrameRate.toFixed(0);if(Ln&&hr(Te,xr.Video_Render_Frame_Rate_Render,+Ln),hr(Te,xr.Video_Recv_Jitter_Buffer,Le.jitterBufferMs),hr(Te,xr.Video_Recv_Current_Delay,Le.currentDelayMs),hr(Te,xr.Video_Recv_Firs,Le.firsCount),hr(Te,xr.Video_Recv_Nacks,Le.nacksCount),hr(Te,xr.Video_Recv_Plis,Le.plisCount),G){Te[xr.Video_Recv_Disabled]=G._originMediaStreamTrack.enabled&&G._mediaStreamTrack.enabled?0:1;const Tn=G._player;if(Tn){const{freezeTimeCounterList:Ea,renderFreezeAccTime:ct,renderFreezeAccTime2:Ct,videoElementStatus:Xt}=Tn;if(Ea&&Ea.length>0&&hr(Te,Jf.Video_Render_Freeze_Time,Ea.splice(0,1)[0]),Ae&&_p.visibility==="visible"&&Xt===ma.PLAYING&&vn().supportRequestVideoFrameCallback){const ft=Math.min(6e3,Ct);Tn.renderFreezeAccTime2=Math.max(0,Ct-ft),hr(Te,Jf.Video_Render_Freeze_Time_Render2,ft);const W=Math.min(6e3,ct);Tn.renderFreezeAccTime=Math.max(0,ct-W),hr(Te,Jf.Video_Render_Freeze_Time_Render,me("USE_NEW_RENDER_FREEZE_TIME")?ft:W)}if(typeof Le.totalFreezesDuration=="number"){const ft=Or&&Or.totalFreezesDuration?Le.totalFreezesDuration-Or.totalFreezesDuration:Le.totalFreezesDuration;hr(Te,xr.Video_Render_Freeze_Duration,1e3*ft)}}}if(Te[xr.Video_Recv_Player_Status]=k5[G._player?G._player.videoElementStatus:"uninit"],Or&&Le.totalInterFrameDelay!==void 0&&Le.totalSquaredInterFrameDelay!==void 0&&Or.totalInterFrameDelay!==void 0&&Or.totalSquaredInterFrameDelay!==void 0){const Tn=Le.totalInterFrameDelay-Or.totalInterFrameDelay,Ea=Le.totalSquaredInterFrameDelay-Or.totalSquaredInterFrameDelay,ct=Le.framesDecodeCount-Or.framesDecodeCount,Ct=Tn/ct*1e3,Xt=Math.round(1e3*Math.sqrt((Ea-Math.pow(Tn,2)/ct)/ct));!isNaN(Xt)&&Ct+Xt>Math.max(3*Ct,Ct+150)&&(Te[xr.Video_Recv_I_Frame_Delay]=Xt)}}return Te}(_._videoSSRC,n,_.videoTrack,B===!0,this.needUploadRenderFreezeTime,o,a,l):void 0;L&&(C.video=L)}if(y.has(jt.AUDIO)&&_.audioTrack){const B=_.audioTrack?function(L,x,X,G,q,Ae){const ue=x.audioRecv.find(Te=>Te.ssrc===L);if(!ue)return;const _e={};hr(_e,xs.Audio_Recv_Jitter,ue.jitterMs),hr(_e,xs.Audio_Recv_Bytes_Retransmit,ue.retransmittedBytesReceived),hr(_e,xs.Audio_Recv_Packages_Retransmit,ue.retransmittedPacketsReceived),hr(_e,xs.Audio_Recv_Packages_Discarded,ue.packetsDiscarded),hr(_e,xs.Audio_Recv_Avg_Processing_Delay,ue.avgProcessingDelayMs);const De=Ae&&Ae.audioRecv.find(Te=>Te.ssrc===L);if(De){const Te=A1;ue.packets!=null&&De.packets!=null&&hr(_e,xs.Audio_Recv_Package_Rate,1e3*(ue.packets-De.packets)/Te),ue.packetsLost!=null&&De.packetsLost!=null&&hr(_e,xs.Audio_Recv_Package_Lost,ue.packetsLost-De.packetsLost)}if(G){const{receivedFrames:Te,droppedFrames:ze}=ue;Te!=null&&ze!=null&&(_e[Jf.Audio_Recv_Freeze]=(Le=Te)===0||100*ze/Le>20?1:0)}var Le;if(q){const Te=100*X._source.getAccurateVolumeLevel(),ze=ue.outputLevel;if(ze!=null){const At=Math.ceil(50*Math.log10(100*ze+1));hr(_e,xr.Audio_Render_Level,At)}hr(_e,xr.Audio_Recv_PCM_Level,Te),X&&(_e[xr.Audio_Recv_Disabled]=X._originMediaStreamTrack.enabled&&X._mediaStreamTrack.enabled?0:1),hr(_e,xr.Audio_Recv_Jitter_Buffer,ue.jitterBufferMs),hr(_e,xr.Audio_Recv_Current_Delay,ue.jitterBufferMs),_e[xr.Audio_Recv_Player_Status]=k5[Xc.getPlayerState(X.getTrackId())];const rt=q.audioRecv.find(At=>At.ssrc===L);if(rt){rt.bytes!=null&&ue.bytes!=null&&hr(_e,xr.Audio_Recv_Bitrate,8*(ue.bytes-rt.bytes)/(A1*qS));const At=ue.concealedSamples-rt.concealedSamples;At>0&&hr(_e,xr.Audio_Recv_Concealed_Samples,At);const wt=ue.totalSamplesReceived-rt.totalSamplesReceived;wt>0&&hr(_e,xr.Audio_Recv_Total_Samples_Received,wt);const Gr=ue.freezeSamples80-rt.freezeSamples80;Gr>0&&hr(_e,xr.Audio_Render_Freeze_Samples_80ms,Gr);const en=ue.freezeSamples200-rt.freezeSamples200;en>0&&hr(_e,xr.Audio_Render_Freeze_Samples_200ms,en);const Or=ue.freezeMs80-rt.freezeMs80;hr(_e,xr.Audio_Render_Freeze_Time_80ms,Or<0?0:Or);const Ln=ue.freezeMs200-rt.freezeMs200;hr(_e,xr.Audio_Render_Freeze_Time_200ms,Ln<0?0:Ln)}}return _e}(_._audioSSRC,n,_.audioTrack,o,a,l):void 0;B&&(C.audio=B)}(C.video||C.audio)&&h.push(C)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,h}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;const n=(this.requestAllTracks()||[]).find(o=>o instanceof xS);if(n&&n._external.getDenoiserStats){const o=n._external.getDenoiserStats();o&&this.requestUpload(MS.DENOISER_STATS,o)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(n=>{n.getProcessorStats().forEach(o=>{this.requestUpload&&this.requestUpload(o.type,o.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRefSendStats&&(this.lastRefSendStats.videoSend=[],this.lastRefSendStats.audioSend=[],this.lastRefSendStats=void 0),this.lastNormalSendStats&&(this.lastNormalSendStats.videoSend=[],this.lastNormalSendStats.audioSend=[],this.lastNormalSendStats=void 0),this.lastExtendStats={},this.needUploadStats={},this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0,this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(n=>{let[o,a]=n;a.has(jt.VIDEO)&&o.videoTrack&&o.videoTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)}),a.has(jt.AUDIO)&&o.audioTrack&&o.audioTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0),this.lastRefRecvStats&&(this.lastRefRecvStats.videoRecv=[],this.lastRefRecvStats.audioRecv=[],this.lastRefRecvStats=void 0),this.lastNormalRecvStats&&(this.lastNormalRecvStats.videoRecv=[],this.lastNormalRecvStats.audioRecv=[],this.lastNormalRecvStats=void 0),this.lastUploadCompensateTime=-1,this.uploadCompensateDeltaTime=0,this.needUploadRenderFreezeTime=!0,this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=void 0)}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const n=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{const o=Date.now(),a={connectionInterval:me("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:o};let l=[];const d=this.requestAllTracks&&this.requestAllTracks()||[];for(const y of d)!y.muted&&y.enabled&&(l=l.concat(await y.getProcessorUsage()));const h=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[y,C]of h)C.has(jt.VIDEO)&&y.videoTrack&&(l=l.concat(await y.videoTrack.getProcessorUsage())),C.has(jt.AUDIO)&&y.audioTrack&&(l=l.concat(await y.audioTrack.getProcessorUsage()));if(l.length===0)return;a.details=function(y,C){const B={};for(const{id:G,value:q,level:Ae,direction:ue}of y){var L;const _e=(L=C.get(G))!==null&&L!==void 0?L:0,De=q===2?_e+me("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:_e;var x,X;C.set(G,De),B[G]?(q===2&&(B[G].value=q),Ae>B[G].level&&(B[G].level=Ae),ue==="remote"&&(B[G].remoteUidCount+=1),B[G].totalTs=(x=C.get(G))!==null&&x!==void 0?x:0):B[G]={value:q,level:Ae,remoteUidCount:ue==="local"?0:1,totalTs:(X=C.get(G))!==null&&X!==void 0?X:0}}return Object.keys(B).map(G=>{const{level:q,value:Ae,totalTs:ue}=B[G];return{id:G,level:q,value:Ae,totalTs:ue}})}(l,n);const v=Date.now(),_=v>o?v:o+1;this.requestUpload&&this.requestUpload(MS.EXTENSION_USAGE_STATS,{usageStats:a,sendTs:_})},me("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}stopUploadBaseStats(){this.uploadBaseStatsStarted=!1}}const Pbe=me("ICE_RESTART_INTERVAL");let B2=new Map,jy=new Map,pv=[_a.UDP_TCP_RELAY,_a.TCP_RELAY,_a.RELAY],LU=me("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&vn().supportPCSetConfiguration;function GY(r){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=B2.get(r.id);o&&(window.clearTimeout(o),B2.delete(r.id));const a=jy.get(r.id);n&&a&&a.index===pv.length-1&&(H.debug("[".concat(r.id,"] reset ICE restart policy")),jy.delete(r.id))}function $Y(r,n,o){if(B2.size===0&&jy.size===0&&(Array.isArray(me("RESTART_SEQUENCE"))&&me("RESTART_SEQUENCE").length>0&&!function(v,_){if(v.length!==_.length)return!1;for(let y=0;y<v.length;y+=1){const C=v[y];if(v.filter(B=>B===C).length!==_.filter(B=>B===C).length)return!1}return!0}(pv,me("RESTART_SEQUENCE"))&&(pv=me("RESTART_SEQUENCE").filter(v=>{var _;if(_t(_=Object.values(_a)).call(_,v))return!0}),H.debug("use reconnection policy from config distribution, queues: ".concat(pv.join(" => ")))),LU=me("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&vn().supportPCSetConfiguration),pv.length===0)return void o();let a,{index:l=0,type:d}=jy.get(r.id)||{};if(LU&&d===_a.RELAY)return void o();let h=d&&l>=pv.length-1;if(LU)d=_a.RELAY;else{if(h)return void o();d?(l++,d=pv[l]):(d=pv[0],l=0)}H.debug("[".concat(r.id,"] choose ICE restart policy: ").concat(d,", index: ").concat(l)),n(d),jy.set(r.id,{index:l,type:d}),a=window.setTimeout(()=>$Y(r,n,o),Pbe),B2.set(r.id,a)}var ln;function zY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Sp(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?zY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):zY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}function qY(r){var n,o,a,l=2;for(typeof Symbol<"u"&&(o=Gx,a=Symbol.iterator);l--;){if(o&&(n=r[o])!=null)return n.call(r);if(a&&(n=r[a])!=null)return new L2(n.call(r));o="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function L2(r){function n(o){if(Object(o)!==o)return Mt.reject(new TypeError(o+" is not an object."));var a=o.done;return Mt.resolve(o.value).then(function(l){return{value:l,done:a}})}return L2=function(o){this.s=o,this.n=o.next},L2.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(o){var a=this.s.return;return a===void 0?Mt.resolve({value:o,done:!0}):n(a.apply(this.s,arguments))},throw:function(o){var a=this.s.return;return a===void 0?Mt.reject(o):n(a.apply(this.s,arguments))}},new L2(r)}let YS=(ln=class extends Mi{get state(){return this._state}set state(r){const n=this._state;this._state=r,this.emit(cr.StateChange,n,this._state)}constructor(r,n){super(),re(this,"isPlanB",void 0),re(this,"store",void 0),re(this,"statsUploader",void 0),re(this,"connection",void 0),re(this,"localTrackMap",new Map),re(this,"remoteUserMap",new Map),re(this,"localDataChannels",[]),re(this,"remoteDataChannelMap",new Map),re(this,"pendingLocalTracks",[]),re(this,"pendingRemoteTracks",[]),re(this,"pendingLocalDataChannels",[]),re(this,"pendingRemoteDataChannels",[]),re(this,"statsCollector",void 0),re(this,"shouldForwardP2PCreation",void 0),re(this,"iceFailedCount",0),re(this,"dtlsFailedCount",0),re(this,"mutex",void 0),re(this,"_state",xn.Disconnected),re(this,"_pcStatsUploadType",me("NEW_ICE_RESTART")?Mg.FIRST_CONNECTION:Mg.OLD_FIRST_CONNECTION),re(this,"_isStartRestartIce",!1),re(this,"_restartTimer",void 0),re(this,"_isTryConnecting",!1),re(this,"_iceError",null),re(this,"_forceTurn",!1),re(this,"_isWaitPcToRePub",!1),re(this,"handleMuteLocalTrack",async(o,a,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==xn.Connected)return void l(new tt(de.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const h=this.filterTobeMutedTracks(o);if(h.length===0)return void a();const v=h.find(y=>y[0]==="videoLowTrack");if(v){const y=v[1];this.store.enableInstantMuteRestore?(y.track._originMediaStreamTrack.enabled=!1,H.info("[".concat(this.store.clientId,"] P2PChannel muteLocalLowTrack without close sender because enableInstantMuteRestore is true"))):y.track._originMediaStreamTrack.stop()}this.store.enableInstantMuteRestore?H.info("[".concat(this.store.clientId,"] P2PChannel muteLocalTrack without close sender because enableInstantMuteRestore is true")):await this.connection.muteLocal(h.map(y=>{let[,{id:C}]=y;return C}));const _=this.createMuteMessage(h);await ni(this,cr.RequestMuteLocal,_),a()}catch(h){l(h)}finally{d()}}),re(this,"handleUnmuteLocalTrack",async(o,a,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==xn.Connected)return void l(new tt(de.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const h=this.filterTobeUnmutedTracks(o);if(h.length===0)return void a();const v=h.find(y=>y[0]==="videoLowTrack");if(v){const y=v[1];if(this.store.enableInstantMuteRestore)y.track._originMediaStreamTrack.enabled=!0,H.info("[".concat(this.store.clientId,"] P2PChannel unmuteLocalLowTrack without close sender because enableInstantMuteRestore is true"));else{if(y.track._originMediaStreamTrack.stop(),!me("DISABLE_DUAL_STREAM_USE_ENCODING")&&vn().supportDualStreamEncoding){const C=o._mediaStreamTrack.clone();y.track._mediaStreamTrack=C,y.track._originMediaStreamTrack=C}else{const C=BU(o,OS(this,cr.RequestLowStreamParameter));y.track._mediaStreamTrack=C,y.track._originMediaStreamTrack=C}await new Mt((C,B)=>{this.handleReplaceTrack(y.track,C,B,!0)})}}this.store.enableInstantMuteRestore?H.info("[".concat(this.store.clientId,"] P2PChannel unmuteLocalTrack without close sender because enableInstantMuteRestore is true")):await this.connection.unmuteLocal(h.map(y=>{let[,{id:C}]=y;return C}));const _=this.createUnmuteMessage(h);await ni(this,cr.RequestUnmuteLocal,_),a()}catch(h){l(h)}finally{d()}}),re(this,"handleUpdateVideoEncoder",async(o,a,l,d)=>{let h;d||(h=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoEncoder"));try{const _=this.localTrackMap.get(mt.LocalVideoTrack);if(!this.connection||!_||_.track!==o||this.state!==xn.Connected)return void a();const{id:y,track:C}=_;await this.connection.updateSendParameters(y,C),await this.connection.updateEncoderConfig(y,C),this.emit(cr.UpdateVideoEncoder,C),a()}catch(_){l(_)}finally{var v;(v=h)===null||v===void 0||v()}}),re(this,"handleUpdateVideoSendParameters",async(o,a,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(mt.LocalVideoTrack);if(!this.connection||!h||h.track!==o||this.state!==xn.Connected)return void a();const{id:v,track:_}=h;await this.connection.updateSendParameters(v,_),a()}catch(h){l(h)}finally{d()}}),re(this,"handleReplaceMixingTrack",async(o,a,l,d)=>{if(!this.connection||this.state!==xn.Connected)return void a();const h=OU([o]);let v;H.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(h.getTrackId(),"]")),typeof d=="boolean"&&d||(v=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(o,h),a()}catch(y){l(y)}finally{var _;(_=v)===null||_===void 0||_()}}),re(this,"handleReplaceTrack",async(o,a,l,d)=>{let h;H.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(o.getTrackId(),"]")),typeof d=="boolean"&&d||(h=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var v;const y=Array.from(this.localTrackMap.entries()).find(C=>{let[,{track:B}]=C;return o===B});if(!this.connection||!y||this.state!==xn.Connected)return void a();if(await((v=this.connection)===null||v===void 0?void 0:v.replaceTrack(o,y[1].id)),this.isPlanB){const C=y[1];C.id=o._mediaStreamTrack.id,this.localTrackMap.set(y[0],C)}if(y[0]===mt.LocalVideoTrack&&!me("DISABLE_DUAL_STREAM_USE_ENCODING")&&vn().supportDualStreamEncoding){const C=this.localTrackMap.get(mt.LocalVideoLowTrack);if(C){const B=o._mediaStreamTrack.clone();C.track._originMediaStreamTrack.stop(),C.track._mediaStreamTrack=B,C.track._originMediaStreamTrack=B,await new Mt((L,x)=>{this.handleReplaceTrack(C.track,L,x,!0)})}}a()}catch(y){l(y)}finally{var _;(_=h)===null||_===void 0||_()}}),re(this,"handleGetRTCStats",o=>{o(this.statsCollector.getRTCStats())}),re(this,"handleGetLocalVideoStats",o=>{o(this.statsCollector.getLocalVideoTrackStats())}),re(this,"handleGetLocalAudioStats",o=>{o(this.statsCollector.getLocalAudioTrackStats())}),re(this,"handleGetRemoteVideoStats",o=>this.statsCollector.getRemoteVideoTrackStats(o.uid)[o.uid]),re(this,"handleGetRemoteAudioStats",o=>this.statsCollector.getRemoteAudioTrackStats(o.uid)[o.uid]),this.store=r,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new WY(this.store),this.bindStatsUploaderEvents(),this.mutex=new ga("P2PChannel-mutex",this.store.clientId),this.isPlanB=!vn().supportUnifiedPlan||me("CHROME_FORCE_PLAN_B")&&Dg(),this.shouldForwardP2PCreation=me("FORWARD_P2P_CREATION")&&vn().supportPCSetConfiguration&&a5(),this.shouldForwardP2PCreation&&(this.connection=I2(this.store),this.emit(cr.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection))}async startP2PConnection(r,n){var o;this.state=xn.New,this._forceTurn=VY(r),H.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] forceTurn: ").concat(this._forceTurn));const a=this.shouldForwardP2PCreation&&((o=this.connection)===null||o===void 0?void 0:o.peerConnectionState)==="closed";if((!this.shouldForwardP2PCreation||a||n)&&((a||n)&&this.connection&&(H.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.resetConnection(this.connection)),this.connection=I2(this.store,r),this.emit(cr.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),!this.connection)throw new tt(de.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=me("NEW_ICE_RESTART")?Mg.FIRST_CONNECTION:Mg.OLD_FIRST_CONNECTION,this._isTryConnecting=!0,this._isStartRestartIce=!1,this._iceError=null,this.connection.setConfiguration(r),this.connection.establishPromise}async connect(r){if(!this.connection)throw new tt(de.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");if(this.isPreallocation()&&this.state===xn.Connected){if(this.connection instanceof CA&&this.connection.checkDtlsParameters(r.dtlsParameters.fingerprints))return H.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] dtls parameters mismatch, try next.")),rr.reportApiInvoke(this.store.sessionId,{name:Ji.MISMATCH_DTLS_PARAMETERS,options:[r.dtlsParameters.fingerprints],tag:Oi.TRACER}).onSuccess(),void setTimeout(()=>{this.emit(cr.RequestReconnect)});await this.connection.updateRemoteConnect(r)}else this.store.peerConnectionStart(),await this.connection.connect(r),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=xn.Connected}updateRemoteRTPCapabilities(r){const n=Array.from(this.localTrackMap.entries()).filter(l=>{var d;let[h]=l;return _t(d=[mt.LocalVideoLowTrack,mt.LocalVideoTrack]).call(d,h)}),o=n.map(l=>{let[,{id:d}]=l;return d}),a=n.map(l=>{let[d]=l;return d});if(this.connection instanceof CA){if(rr.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(a),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(r)}),!_t(r).call(r,this.store.codec)){const l=["vp9","vp8","h264"].find(d=>_t(r).call(r,d));l&&(this.store.codec=l,H.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(l,".")))}this.connection.updateRemoteRTPCapabilities(o,r)}}async getEstablishParams(){var r;if(this.connection instanceof CA&&this.connection.peerConnectionState!=="closed"&&_t(r=[xn.New,xn.Connected]).call(r,this.state))return this.connection.establishPromise}async publishDataChannel(r){if(!this.connection||this.state!==xn.Connected){if(this.state===xn.Disconnected)throw new tt(de.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return r.forEach(o=>{var a;_t(a=this.pendingLocalDataChannels).call(a,o)||this.pendingLocalDataChannels.push(o)}),[]}const n=this.filterTobePublishedDataChannels(r);return n.length===0?[]:(n.forEach(o=>{const a=Date.now();this.store.publish(o.id.toString(),"datachannel",a)}),await this.connection.createDataChannels(this.store.uid,n),n.forEach(o=>{this.localDataChannels.push(o);const a=Date.now();this.store.publish(o.id+"","datachannel",void 0,a)}),r.map(o=>({streamId:o.id,ordered:o.ordered,maxRetransmits:o.maxRetransmits,metadata:o.metadata,channelId:o._originDataChannelId})))}publish(r,n,o){var a=this;return _A(function*(){const l=yield mn(a.mutex.lock("From P2PChannel.publish"));try{var d;const h=a.connection&&_t(d=["disconnected","failed"]).call(d,a.connection.peerConnectionState);if(!a.connection||a.state!==xn.Connected||h){if(a.state===xn.Disconnected)throw new tt(de.UNEXPECTED_ERROR,"PeerConnection already disconnected.");a.throwIfTrackTypeNotMatch(r);const _=r.filter(y=>a.pendingLocalTracks.indexOf(y)===-1);return a.pendingLocalTracks=a.pendingLocalTracks.concat(_),void(h&&(a._isWaitPcToRePub=!0))}a.store.pubId=a.store.pubId+1,ya.markPublishStart(a.store.clientId,a.store.pubId);const v=a.filterTobePublishedTracks(r,n,o);if(v.length===0)return void(yield mn(a.tryToUnmuteAudio(r)));yield*bI(qY(a.doPublish(a.connection,v)))}finally{l()}})()}doPublish(r,n){var o=this;return _A(function*(){n.forEach(L=>{let{track:x,type:X}=L;const G=Date.now();o.store.publish(x.getTrackId(),X===mt.LocalAudioTrack?"audio":"video",G)}),o.bindLocalTrackEvents(n);const a=n.map(L=>{let{track:x}=L;return x}),l=yield mn(r.send(a,o.store.codec,o.store.audioCodec)),d=(yield mn(l.next())).value,h=o.createGatewayPublishMessage(n,d);let v;try{v=yield h}catch(L){throw l.throw(L),(L==null?void 0:L.code)===de.WS_ABORT&&n.forEach(x=>{let{track:X}=x;o.pendingLocalTracks.indexOf(X)===-1&&o.pendingLocalTracks.push(X)}),o.unbindLocalTrackEvents(n),L}const _=o.mapPubResToRemoteConfig(h,v,a),y=(yield mn(l.next(_))).value;if(o.state===xn.Disconnected)throw new tt(de.UNEXPECTED_ERROR,"PeerConnection already disconnected.");me("ENABLE_VIDEO_SEI");const C=me("ENABLE_ENCODED_TRANSFORM"),B=me("ENABLE_AUDIO_METADATA");a.forEach(async L=>{const x=L.getRTCRtpTransceiver();if(!x||!C)return;const{interceptLocalVideoFrame:X,interceptLocalAudioFrame:G}=_2();L.trackMediaType===jt.VIDEO?await X(x.sender,L):L.trackMediaType===jt.AUDIO&&await G(x.sender,{metadata:B?()=>{const q=L.metadata.shift();return q&&q.value}:void 0})}),n.forEach(L=>{let{type:x}=L;o.statsCollector.addLocalStats(x)}),o.assignLocalTracks(n,y),o.statsUploader.startUploadOutboundStats(),n.forEach(L=>{let{track:x,type:X}=L;const G=Date.now();o.store.publish(x.getTrackId(),X===mt.LocalAudioTrack?"audio":"video",void 0,G)})})()}async updateVideoStreamParameter(r,n){const o=this.localTrackMap.get(n);if(!o||!this.connection)return;if(!(o.track instanceof hi))return H.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");const{track:a}=o,l=function(d,h){const v={};return d.height&&d.width&&(v.scaleResolutionDownBy=AU(d,h)),v.maxFramerate=d.framerate?ru(d.framerate):void 0,v.maxBitrate=d.bitrate?1e3*d.bitrate:void 0,v}(r,a);if(a._encoderConfig||(a._encoderConfig={}),n!==mt.LocalVideoLowTrack||!me("DISABLE_DUAL_STREAM_USE_ENCODING")&&vn().supportDualStreamEncoding)l.scaleResolutionDownBy!=null&&(a._encoderConfig.scaleResolutionDownBy=l.scaleResolutionDownBy);else{const d=a._originMediaStreamTrack;if(!d.canvas)return H.warn("[".concat(a.getTrackId(),"] no canvas on track"));(function(h,v){const _=h.canvas;v.width&&(_.width=ru(v.width)),v.height&&(_.height=ru(v.height)),v.framerate&&(_.stopCapture&&_.stopCapture(),_.stopCapture=x5(()=>{!_.startCapture&&_.stopCapture&&_.stopCapture(),_.startCapture&&_.startCapture()},ru(v.framerate)))})(d,r)}l.maxBitrate!=null&&(a._encoderConfig.bitrateMax=l.maxBitrate/1e3),l.maxFramerate!=null&&(a._encoderConfig.frameRate&&typeof a._encoderConfig.frameRate=="object"?a._encoderConfig.frameRate.max=l.maxFramerate:a._encoderConfig.frameRate={max:l.maxFramerate}),H.debug("[".concat(a.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(a._encoderConfig))),await this.connection.updateRtpSenderEncodings(a)}publishLowStream(r){var n=this;return _A(function*(){if(!n.connection||n.state!==xn.Connected)return;const o=yield mn(n.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=n.localTrackMap.get(mt.LocalVideoTrack);if(!l)throw new tt(de.UNEXPECTED_ERROR,"Could not find high stream");if(n.localTrackMap.has(mt.LocalVideoLowTrack))throw new tt(de.UNEXPECTED_ERROR,"[".concat(n.store.clientId,"] Can't publish low stream when stream already publish"));const d=[{track:n.getLowVideoTrack(l.track,r),type:mt.LocalVideoLowTrack}];if(yield*bI(qY(n.doPublish(n.connection,d))),l.track.muted||!l.track.enabled){var a;const h=(a=n.localTrackMap.get(mt.LocalVideoLowTrack))===null||a===void 0?void 0:a.id;h!==void 0&&(yield mn(n.connection.muteLocal([h])))}}finally{o()}})()}async republish(){this.pendingLocalTracks.length>0&&(H.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ea(this,cr.RequestRePublish,this.pendingLocalTracks),this.emit(cr.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(H.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await ea(this,cr.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[]),this._isWaitPcToRePub=!1}async reSubscribe(r){for(let n=this.pendingRemoteTracks.length-1;n>=0;n--){const{user:o,kind:a}=this.pendingRemoteTracks[n];(a!==jt.AUDIO||o._audio_added_&&o._audioSSRC)&&(a!==jt.VIDEO||o._video_added_&&o._videoSSRC)||this.pendingRemoteTracks.splice(n,1)}if(r)await ea(this,cr.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:n,kind:o}of this.pendingRemoteTracks)await this.subscribe(n,o,o===jt.VIDEO?n._videoSSRC:n._audioSSRC);this.pendingRemoteTracks.forEach(n=>{let{user:o}=n;this.emit(cr.MediaReconnectEnd,o.uid)}),this.pendingRemoteTracks=[]}async unpublish(r){if(!this.connection||this.state!==xn.Connected)return void r.forEach(a=>{const l=this.pendingLocalTracks.indexOf(a);l!==-1&&this.pendingLocalTracks.splice(l,1)});const n=this.filterTobeUnpublishedTracks(r);if(n.length===0)return;const o=n.find(a=>a[0]==="videoLowTrack");return o&&o[1].track.close(),this.doUnpublish(this.connection,n)}async unpublishDataChannel(r){if(!this.connection||this.state!==xn.Connected)return void r.forEach(o=>{const a=this.pendingLocalDataChannels.indexOf(o);a!==-1&&this.pendingLocalDataChannels.splice(a,1)});const n=this.filterTobeUnpublishedDataChannels(r);return n.length!==0?(n.forEach(o=>{const a=this.localDataChannels.indexOf(o);a!==-1&&this.localDataChannels.splice(a,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),n.map(o=>o.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==xn.Connected)return;const r=this.localTrackMap.get(mt.LocalVideoLowTrack);if(!r)return;r.track.close();const n=[[mt.LocalVideoLowTrack,r]];return this.doUnpublish(this.connection,n)}async doUnpublish(r,n){const o=this.createGatewayUnpublishMessage(n);return await r.stopSending(n.map(a=>{let[,{id:l}]=a;return l})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(a=>{let[l,{track:d}]=a;return{type:l,track:d}})),n.forEach(a=>{let[l]=a;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),o}async subscribeDataChannel(r,n){if(!this.connection||this.state!==xn.Connected)throw new tt(de.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const o=n.filter(a=>{var l;return!((l=this.remoteDataChannelMap.get(r))!==null&&l!==void 0&&l.get(a.id))});if(o.length!==0)return await this.connection.createDataChannels(r.uid,o),o.forEach(a=>{var l;this.remoteDataChannelMap.has(r)?(l=this.remoteDataChannelMap.get(r))===null||l===void 0||l.set(a.id,a):this.remoteDataChannelMap.set(r,new Map([[a.id,a]]));const d=this.pendingRemoteDataChannels.findIndex(h=>{let{user:v,id:_}=h;return v.uid===r.uid&&_===a.id});d!==-1&&this.pendingRemoteDataChannels.splice(d,1)}),o.map(a=>a.id)}async subscribe(r,n,o,a,l){var d;if(!this.connection||this.state!==xn.Connected)throw new tt(de.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((d=this.remoteUserMap.get(r))!==null&&d!==void 0&&d.has(n))return;let h,v,_,y;const C=this.connection.getPreMedia(o);if(C)H.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(o,", no need to send sub to gateway.")),_=C.transceiver,h=C.track,v=C.mid,y=C.player,C.firstVideoRender&&this.store.firstVideoFrameDecoded(r.uid,{firstPreRender:C.firstVideoRender});else if(l){const x=l.find(G=>{let{stream_type:q}=G;return q===n});if(!x)throw new tt(de.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(r.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));const X=await this.connection.receive(n,x.ssrcs,String(r._uintid),x.attributes);this.connection instanceof CA&&(_=X.transceiver),h=X.track,v=X.id}else{const x=await this.connection.receive(n,[{ssrcId:o,rtx:a}],String(r._uintid),void 0);this.connection instanceof CA&&(_=x.transceiver),h=x.track,v=x.id}if(n===jt.AUDIO?(r._audioTrack?r._audioTrack._updateOriginMediaStreamTrack(h):(r._audioTrack=new Ny(h,r.uid,r._uintid,this.store),H.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(r._audioTrack.getTrackId()))),_&&r._audioTrack._updateRtpTransceiver(_),this.bindRemoteTrackEvents(r,r._audioTrack)):(r._videoTrack?r._videoTrack._updateOriginMediaStreamTrack(h):(r._videoTrack=new Oy(h,r.uid,r._uintid,this.store,y),H.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(r._videoTrack.getTrackId())),r._videoTrack.once(wA.PLAY_START,()=>{this.store.firstVideoFrameDecoded(r.uid,{playStart:Date.now()})}),r._videoTrack.once(wA.PLAY_END,()=>{this.store.firstVideoFrameDecoded(r.uid,{playEnd:Date.now()}),this.reportVideoFirstFrameRender(r)}),y?r._videoTrack.once(wA.FIRST_FRAME_RENDER,()=>{this.store.firstVideoFrameDecoded(r.uid,{firstRender:Date.now()}),this.reportVideoFirstFrameRender(r)}):r._videoTrack.once(wA.FIRST_FRAME_DECODED,()=>{this.store.firstVideoFrameDecoded(r.uid,{firstRender:Date.now()}),this.reportVideoFirstFrameRender(r)})),_&&r._videoTrack._updateRtpTransceiver(_),this.bindRemoteTrackEvents(r,r._videoTrack)),_&&me("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:x,interceptRemoteAudioFrame:X}=_2();n==jt.VIDEO?await x(_.receiver,{onSei:me("ENABLE_VIDEO_SEI")&&(G=>{var q;return(q=r._videoTrack)===null||q===void 0?void 0:q._onSei(G)})}):n==jt.AUDIO&&await X(_.receiver,{enableTopn:!!me("ENABLE_AUDIO_TOPN"),enableMetadata:!!me("ENABLE_AUDIO_METADATA"),enablePts:!!me("ENABLE_AUDIO_PTS"),onMetadata:G=>{this.safeEmit(cr.AudioMetadata,G)},onPts:G=>{this.safeEmit(cr.AudioPts,G)}})}const B=this.remoteUserMap.get(r);B?B.set(n,v):this.remoteUserMap.set(r,new Map([[n,v]])),this.statsCollector.addRemoteStats(r.uid),this.statsUploader.startUploadInboundStats();const L=this.pendingRemoteTracks.findIndex(x=>{let{user:X,kind:G}=x;return X.uid===r.uid&&n===G});L!==-1&&(this.pendingRemoteTracks.splice(L,1),this.emit(cr.MediaReconnectEnd,r.uid))}async massSubscribe(r){return this.massSubscribeNoLock(r)}async massSubscribeNoLock(r){if(!this.connection||this.state!==xn.Connected)throw new tt(de.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");r=r.filter(l=>{var d;let{user:h,mediaType:v}=l;return!((d=this.remoteUserMap.get(h))!==null&&d!==void 0&&d.has(v))});const n=[],o=new Map;r.forEach(l=>{if(!this.connection)return;const d=this.connection.getPreMedia(l.ssrcId);if(d){const{track:h,mid:v,transceiver:_,player:y}=d;o.set(l.ssrcId,{track:h,id:v,transceiver:_,player:y})}else n.push(l)});const a=await this.connection.batchReceive(n.map(l=>{let{user:d,mediaType:h,ssrcId:v,rtxSsrcId:_}=l;return{kind:h,ssrcMsg:[{ssrcId:v,rtx:_}],mslabel:String(d._uintid)}}));n.forEach((l,d)=>{o.set(l.ssrcId,a[d])});for(const{user:l,mediaType:d,ssrcId:h}of r){const v=o.get(h);if(!v)return void H.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(l.uid," subscribe data,").concat(d,", ").concat(h));const{track:_,id:y,transceiver:C,player:B}=v;if(C&&me("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:X,interceptRemoteAudioFrame:G}=_2();d==jt.VIDEO?await X(C.receiver,{onSei:me("ENABLE_VIDEO_SEI")&&(q=>{var Ae;return(Ae=l._videoTrack)===null||Ae===void 0?void 0:Ae._onSei(q)})}):d==jt.AUDIO&&await G(C.receiver,{enableTopn:!!me("ENABLE_AUDIO_TOPN"),enableMetadata:!!me("ENABLE_AUDIO_METADATA"),enablePts:!!me("ENABLE_AUDIO_PTS"),onMetadata:q=>{this.safeEmit(cr.AudioMetadata,q)},onPts:q=>{this.safeEmit(cr.AudioPts,q)}})}if(d===jt.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(_):(l._audioTrack=new Ny(_,l.uid,l._uintid,this.store),H.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),C&&l._audioTrack._updateRtpTransceiver(C),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(_):(l._videoTrack=new Oy(_,l.uid,l._uintid,this.store,B),H.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),C&&l._videoTrack._updateRtpTransceiver(C),this.bindRemoteTrackEvents(l,l._videoTrack)),me("ENABLE_VIDEO_SEI")&&C){const{interceptRemoteVideoFrame:X,interceptRemoteAudioFrame:G}=_2();d==jt.VIDEO?await X(C.receiver,{onSei:q=>{var Ae;(Ae=l._videoTrack)===null||Ae===void 0||Ae._onSei(q)}}):d==jt.AUDIO&&await G(C.receiver)}const L=this.remoteUserMap.get(l);L?L.set(d,y):this.remoteUserMap.set(l,new Map([[d,y]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadInboundStats();const x=this.pendingRemoteTracks.findIndex(X=>{let{user:G,kind:q}=X;return G.uid===l.uid&&d===q});x!==-1&&(this.pendingRemoteTracks.splice(x,1),this.emit(cr.MediaReconnectEnd,l.uid))}}async unsubscribe(r,n,o){const a=this.pendingRemoteTracks.filter(h=>{let{user:v,kind:_}=h;return n!==void 0?v.uid===r.uid&&n===_:v.uid===r.uid});if(a.forEach(h=>{const v=this.pendingRemoteTracks.indexOf(h);this.pendingRemoteTracks.splice(v,1)}),this.connection&&this.state===xn.Connected||o||a.forEach(h=>{let{kind:v}=h;var _;if(v===jt.AUDIO)(_=r._audioTrack)===null||_===void 0||_._destroy(),r._audioTrack=void 0;else if(v===jt.VIDEO){var y;(y=r._videoTrack)===null||y===void 0||y._destroy(),r._videoTrack=void 0}}),!this.connection||this.state!==xn.Connected)return;const l=this.filterTobeUnSubscribedTracks(r,n);if(l.length===0)return;await this.connection.stopReceiving(l.map(h=>{let[,{id:v}]=h;return v}));const d=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),l.forEach(h=>{let[v,{kind:_}]=h;var y,C;if(_===jt.VIDEO&&v._videoSSRC&&((y=this.connection)===null||y===void 0||y.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),_===jt.VIDEO)this.unbindRemoteTrackEvents(v._videoTrack),o||((C=v._videoTrack)===null||C===void 0||C._destroy(),v._videoTrack=void 0);else if(_===jt.AUDIO){var B;this.unbindRemoteTrackEvents(v._audioTrack),!o&&((B=v._audioTrack)===null||B===void 0||B._destroy(),v._audioTrack=void 0)}}),d}async unsubscribeDataChannel(r,n){if(n.forEach(l=>{const d=this.pendingRemoteDataChannels.findIndex(h=>h.id===l.id);d!==-1&&this.pendingRemoteDataChannels.splice(d,1)}),!this.connection)return;const o=this.filterTobeUnSubscribedDataChannels(r,n);if(o.length===0)return;n.forEach(l=>{l._close()});const a=this.remoteDataChannelMap.get(r);return o.forEach(l=>{a&&a.delete(l.id)}),a&&a.size===0&&(this.remoteDataChannelMap.delete(r),await this.connection.stopDataChannels(r.uid)),o.map(l=>l.id)}async massUnsubscribe(r){return this.massUnsubscribeNoLock(r)}async massUnsubscribeNoLock(r){let n=[];for(const{user:l,mediaType:d}of r){const h=this.pendingRemoteTracks.filter(v=>{let{user:_,kind:y}=v;return d!==void 0?_.uid===l.uid&&d===y:_.uid===l.uid});h.forEach(v=>{const _=this.pendingRemoteTracks.indexOf(v);this.pendingRemoteTracks.splice(_,1)}),n=n.concat(h)}if(!this.connection||this.state!==xn.Connected)return void n.forEach(l=>{let{user:d,kind:h}=l;var v;if(h===jt.AUDIO)(v=d._audioTrack)===null||v===void 0||v._destroy(),d._audioTrack=void 0;else if(h===jt.VIDEO){var _;(_=d._videoTrack)===null||_===void 0||_._destroy(),d._videoTrack=void 0}});const o=ka(r).call(r,(l,d)=>{let{user:h,mediaType:v}=d;const _=this.filterTobeUnSubscribedTracks(h,v);return l.concat(_)},[]);if(o.length===0)return;await this.connection.stopReceiving(o.map(l=>{let[,{id:d}]=l;return d}));const a=this.createUnsubscribeAllMessage(o);return this.withdrawRemoteTracks(o),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),o.forEach(l=>{let[d,{kind:h}]=l;var v,_;if(h===jt.VIDEO&&d._videoSSRC&&((v=this.connection)===null||v===void 0||v.setStatsRemoteVideoIsReady(d._videoSSRC,!1)),h===jt.VIDEO)this.unbindRemoteTrackEvents(d._videoTrack),(_=d._videoTrack)===null||_===void 0||_._destroy(),d._videoTrack=void 0;else if(h===jt.AUDIO){var y;this.unbindRemoteTrackEvents(d._audioTrack),(y=d._audioTrack)===null||y===void 0||y._destroy(),d._audioTrack=void 0}}),a}isPreSubScribe(r){return!this.connection||this.state!==xn.Connected?!1:!!this.connection.getPreMedia(r)}async muteRemote(r,n){if(!this.connection)return;const o=this.remoteUserMap.get(r);if(!o)return void H.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(r.uid,"."));if(!o.get(n))return void H.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(r.uid," media type ").concat(n,"."));const a=n===jt.VIDEO?r._videoSSRC:r._audioSSRC;a!==void 0&&this.connection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(r,n){return this.unmuteRemoteNoLock(r,n)}async unmuteRemoteNoLock(r,n){if(!this.connection)return;const o=this.remoteUserMap.get(r);if(!o)return void H.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(r.uid,"."));o.get(n)||H.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(r.uid," media type ").concat(n,"."))}addAudioMetadata(r){const n=this.localTrackMap.get(mt.LocalAudioTrack),o=n&&n.track;o&&o.metadata.push(r)}getAllTracks(r){const n=this.localTrackMap.get(mt.LocalAudioTrack);if((n==null?void 0:n.track)instanceof Uo){const o=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==mt.LocalAudioTrack}).filter(a=>{let[l]=a;return!(r&&l===mt.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(o.trackList)}return Array.from(this.localTrackMap.entries()).filter(o=>{let[a]=o;return!(r&&a===mt.LocalVideoLowTrack)}).map(o=>{let[,{track:a}]=o;return a})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(r,n,o,a,l){if(r){const h=this.localTrackMap.get(mt.LocalAudioTrack),v=a?this.localTrackMap.get(mt.LocalVideoLowTrack):this.localTrackMap.get(mt.LocalVideoTrack);rr.publish(this.store.sessionId,{eventElapse:ya.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:v==null?void 0:v.track.getTrackLabel(),screenshare:(v==null?void 0:v.track._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var d;o||(o=[]);const h=o.find(_=>_ instanceof Yi),v=a?(d=this.localTrackMap.get(mt.LocalVideoTrack))===null||d===void 0?void 0:d.track:o.find(_=>_ instanceof hi);rr.publish(this.store.sessionId,{eventElapse:ya.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:v==null?void 0:v.getTrackLabel(),screenshare:(v==null?void 0:v._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(r,n,o,a){const l=a===jt.VIDEO?o._videoSSRC:o._audioSSRC;l&&rr.subscribe(this.store.sessionId,{succ:r,ec:n,video:a===jt.VIDEO,audio:a===jt.AUDIO,peerid:o.uid,subscribeRequestid:l,p2pid:this.store.p2pId,eventElapse:ya.measureFromSubscribeStart(this.store.clientId,l),preSsrc:this.isPreSubScribe(l)})}reset(){H.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new ga("P2PChannel-mutex",this.store.clientId),this.connection&&(this.resetConnection(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=I2(this.store),this.emit(cr.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.statsUploader.stopUploadBaseStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const r=this.localTrackMap.get(mt.LocalAudioTrack);if((r==null?void 0:r.track)instanceof Uo){if(r.track.trackList.length>0){const n=r.track;r.track.trackList.forEach(o=>{n.removeAudioTrack(o)})}r.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=xn.Disconnected}getStats(){var r;return(r=this.connection)===null||r===void 0?void 0:r.getStats()}getRemoteVideoIsReady(r){var n;return((n=this.connection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(r))||!1}getLocalAudioVolume(){const r=this.localTrackMap.get(mt.LocalAudioTrack);if(r)return r.track.getVolumeLevel()}getLocalVideoSize(){const r=this.localTrackMap.get(mt.LocalVideoTrack);if(r)return{width:r.track.videoWidth||0,height:r.track.videoHeight||0}}getEncoderConfig(r){const n=this.localTrackMap.get(r);return n&&n.track instanceof hi||n&&n.track instanceof Yi?n.track._encoderConfig:void 0}getLocalMedia(r){return this.localTrackMap.get(r)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(r,n){if(!r)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(r);return!!o&&(!n||o.has(n))}async hasRemoteMediaWithLock(r,n){if(!r)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(r);return!!o&&(!n||o.has(n))}getRemoteMedia(r){var n;const o=Array.from(Sl(n=this.remoteUserMap).call(n)).find(a=>a.uid===r);return o?{audioTrack:o.audioTrack,audioSSRC:o._audioSSRC,videoTrack:o.videoTrack,videoSSRC:o._videoSSRC}:{}}getAudioLevels(){let r=Array.from(this.remoteUserMap.entries()).map(o=>{let[a]=o;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(mt.LocalAudioTrack);return n&&r.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),r=j0(r).call(r,(o,a)=>o.level-a.level),r}async disconnectForReconnect(){this.connection&&(H.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=xn.Reconnecting,me("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r;var o;n._videoTrack&&n._videoTrack._player&&((o=n._videoTrack._player.getVideoElement())===null||o===void 0||o.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.resetConnection(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=I2(this.store),this.emit(cr.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(r=>{var n;let[o,{track:a}]=r;switch(o){case mt.LocalVideoTrack:_t(n=a._hints).call(n,Jn.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case mt.LocalAudioTrack:a instanceof Uo?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case mt.LocalVideoLowTrack:}}),this.emit(cr.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n,o]=r;Array.from(Sl(o).call(o)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(cr.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(r=>{this.pendingLocalDataChannels.push(r)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(r=>{let[n,o]=r;Array.from(Sl(o).call(o)).forEach(a=>{this.setPendingRemoteDataChannel(n,a)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),H.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(r,n){for(const o of this.pendingRemoteDataChannels){const{user:a,id:l}=o;if((r instanceof hv?r.uid:r)===a.uid&&l===n)return!0}return!1}setPendingRemoteDataChannel(r,n){this.hasPendingRemoteDataChannel(r,n)||this.pendingRemoteDataChannels.push({user:r,id:n})}hasPendingRemoteMedia(r,n){for(const o of this.pendingRemoteTracks){const{user:a,kind:l}=o;if((r instanceof hv?r.uid:r)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(r,n){this.hasPendingRemoteMedia(r,n)||this.pendingRemoteTracks.push({user:r,kind:n})}restartICE(r){var n=this;return _A(function*(){if(!n.connection||n.state!==xn.Connected)return;const o=yield mn(n.mutex.lock("From P2PChannel.restartICE"));let a;try{a=yield mn(n.connection.restartICE(r));const d=yield mn(a.next());if(d.done)return;const h=d.value,v=yield h;switch(NU(n.connection)&&n.reportPCStats(Date.now(),!1,n._pcStatsUploadType),r){case _a.UDP_TCP_RELAY:n._pcStatsUploadType=Mg.UDP_TCP_RESTART;break;case _a.TCP_RELAY:n._pcStatsUploadType=Mg.TCP_RESTART;break;case _a.RELAY:n._pcStatsUploadType=Mg.RELAY_RESTART;break;default:n._pcStatsUploadType=Mg.OLD_RESTART}n._isTryConnecting=!0,a.next(v)}catch(d){var l;(l=a)===null||l===void 0||l.throw(d)}finally{o()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const r=this.connection.getStats(),n=this.localTrackMap.get(mt.LocalVideoTrack),o=this.localTrackMap.get(mt.LocalAudioTrack),a=r.videoSend.find(x=>x.ssrc===(n==null?void 0:n.ssrcs[0].ssrcId)),l=r.audioSend.find(x=>x.ssrc===(o==null?void 0:o.ssrcs[0].ssrcId));if(!a||!l)return 1;const d=Iu(this,cr.NeedSignalRTT),h=a?a.rttMs:void 0,v=l?l.rttMs:void 0,_=h&&v?(h+v)/2:h||v,y=(_&&d?(_+d)/2:_||d)||0,C=100*r.sendPacketLossRate*.7/50+.3*y/1500,B=C<.17?1:C<.36?2:C<.59?3:C<.1?4:5,L=n==null?void 0:n.track;if(L&&L._encoderConfig&&L._hints.indexOf(Jn.SCREEN_TRACK)===-1){const x=L._encoderConfig.bitrateMax,X=r.bitrate.actualEncoded;if(x&&X){const G=(1e3*x-X)/(1e3*x);return Dq[G<.15?0:G<.3?1:G<.45?2:G<.6?3:4][B]}}return B}getDownlinkNetworkQuality(){if(!this.connection)return 0;const r=this.connection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(o=>{let[a]=o;const l=a._audioSSRC,d=a._videoSSRC,h=r.audioRecv.find(X=>X.ssrc===l),v=r.videoRecv.find(X=>X.ssrc===d);if(!h&&!v)return void(n+=1);const _=Iu(this,cr.NeedSignalRTT),y=r.rtt,C=(y&&_?(y+_)/2:y||_)||0,B=h?h.jitterMs:void 0,L=r.recvPacketLossRate;let x=.7*L*100/50+.3*C/1500;B&&(x=.6*L*100/50+.2*C/1500+.2*B/400),n+=x<.1?1:x<.17?2:x<.36?3:x<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(r){return new Mt((n,o)=>{this.handleMuteLocalTrack(r,n,o)})}async replaceTrack(r,n){var o;if(H.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(r.getTrackId(),"] to [").concat(n.getTrackId(),"]")),!this.connection||this.state!==xn.Connected)return;const a=Array.from(this.localTrackMap.entries()).find(d=>{let[,{track:h}]=d;return r===h});if(!a)return;const l=a[0];if(r!==n&&(this.unbindLocalTrackEvents([{track:r,type:l}]),this.bindLocalTrackEvents([{track:n,type:l}]),a[1].track=n),await((o=this.connection)===null||o===void 0?void 0:o.replaceTrack(n,a[1].id)),this.isPlanB){const d=a[1];d.id=n._mediaStreamTrack.id,this.localTrackMap.set(l,d)}if(l===mt.LocalVideoTrack&&!me("DISABLE_DUAL_STREAM_USE_ENCODING")&&vn().supportDualStreamEncoding){const d=this.localTrackMap.get(mt.LocalVideoLowTrack);if(d){const h=r._mediaStreamTrack.clone();d.track._originMediaStreamTrack.stop(),d.track._mediaStreamTrack=h,d.track._originMediaStreamTrack=h,await new Mt((v,_)=>{this.handleReplaceTrack(d.track,v,_,!0)})}}}filterTobePublishedTracks(r,n,o){const a=[],l=this.getAllTracks();r=gy(r=r.filter(_=>l.indexOf(_)===-1));let d,h=!1;const v=this.localTrackMap.get(mt.LocalAudioTrack);for(const _ of r){if(_ instanceof hi&&(this.localTrackMap.has(mt.LocalVideoTrack)||h?new tt(de.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:_,type:mt.LocalVideoTrack}),h=!0),n)){const y=this.getLowVideoTrack(_,o);a.push({track:y,type:mt.LocalVideoLowTrack})}if(_ instanceof Yi)if(v){const y=v.track;if(y instanceof Uo)IU([_]),y.addAudioTrack(_),this.bindLocalAudioTrackEvents(_,!0);else{const C=OU([y,_]);H.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(C.getTrackId(),"]")),this.replaceTrack(y,C)}}else d instanceof Uo?(IU([_]),d.addAudioTrack(_)):d||!_._useAudioElement&&vn().webAudioMediaStreamDest&&!_._bypassWebAudio?d=OU(d?[_,d]:[_]):d=_}return d&&(H.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(d.getTrackId(),"]")),a.push({track:d,type:mt.LocalAudioTrack})),a}filterTobeUnpublishedTracks(r){const n=[],o=this.getAllTracks();r=gy(r=r.filter(a=>o.indexOf(a)!==-1));for(const a of r){if(a instanceof Yi){const l=this.localTrackMap.get(mt.LocalAudioTrack);if(!l)continue;l.track instanceof Uo?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([mt.LocalAudioTrack,l]),l.track.close())):n.push([mt.LocalAudioTrack,l])}if(a instanceof hi){const l=this.localTrackMap.get(mt.LocalVideoTrack);if(!l)continue;n.push([mt.LocalVideoTrack,l]);const d=this.localTrackMap.get(mt.LocalVideoLowTrack);d&&n.push([mt.LocalVideoLowTrack,d])}}return n}filterTobePublishedDataChannels(r){return r=(r=gy(r)).filter(n=>this.localDataChannels.findIndex(o=>o.id===n.id)===-1)}filterTobeUnpublishedDataChannels(r){return r=(r=(r=gy(r)).filter(n=>this.localDataChannels.indexOf(n)!==-1)).filter(n=>n._originDataChannel)}bindLocalTrackEvents(r){r.forEach(n=>{let{track:o,type:a}=n;switch(a){case mt.LocalVideoTrack:o.addListener(Zt.GET_STATS,this.handleGetLocalVideoStats),o.addListener(Zt.GET_RTC_STATS,this.handleGetRTCStats),o.addListener(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Zt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.addListener(Zt.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),o.addListener(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.addListener(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case mt.LocalAudioTrack:this.bindLocalAudioTrackEvents(o);case mt.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(r,n){r instanceof Uo?r.trackList.forEach(o=>{o.addListener(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Zt.GET_STATS,this.handleGetLocalAudioStats),o.addListener(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.addListener(Zt.GET_STATS,this.handleGetLocalAudioStats),r.addListener(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||(r.addListener(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(Zt.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(r){r||(r=Array.from(this.localTrackMap.entries()).map(n=>{let[o,{track:a}]=n;return{track:a,type:o}})),r.forEach(n=>{let{track:o,type:a}=n;switch(a){case mt.LocalVideoTrack:o.off(Zt.GET_STATS,this.handleGetLocalVideoStats),o.off(Zt.GET_RTC_STATS,this.handleGetRTCStats),o.off(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(Zt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.off(Zt.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),o.off(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.off(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case mt.LocalAudioTrack:this.unbindLocalAudioTrackEvents(o);case mt.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(r){r instanceof Uo?r.trackList.forEach(n=>{n.off(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Zt.GET_STATS,this.handleGetLocalAudioStats),n.off(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.off(Zt.GET_STATS,this.handleGetLocalAudioStats),r.off(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(Zt.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),r.off(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(r,n){n instanceof Oy&&n.addListener(Zt.GET_STATS,o=>{o(this.handleGetRemoteVideoStats(r))}),n instanceof Ny&&n.addListener(Zt.GET_STATS,o=>{o(this.handleGetRemoteAudioStats(r))})}unbindRemoteTrackEvents(r){r&&r.removeAllListeners(Zt.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n,o]=r;o.has(jt.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),o.has(jt.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(r,n){return r.map((o,a)=>{var l;let d,h,{track:v,type:_}=o;switch(_){case mt.LocalAudioTrack:d=Fn.Audio,h={dtx:v instanceof xS&&v._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case mt.LocalVideoTrack:d=_t(l=v._hints).call(l,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High,h=Sp(Sp({},Xq(v)),{},{codec:this.store.codec,svc_mode:h2()});break;case mt.LocalVideoLowTrack:d=Fn.Low,h=Sp(Sp({},Xq(v)),{},{codec:this.store.codec,svc_mode:h2()})}return{stream_type:d,attributes:h,ssrcs:n[a]}})}createGatewayUnpublishMessage(r){return r.map(n=>{var o;let a,[l,{track:d,ssrcs:h,id:v}]=n;switch(l){case mt.LocalVideoTrack:a=_t(o=d._hints).call(o,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalAudioTrack:a=Fn.Audio;break;case mt.LocalVideoLowTrack:a=Fn.Low}return{stream_type:a,ssrcs:h,mid:v}})}assignLocalTracks(r,n){r.forEach((o,a)=>{let{track:l,type:d}=o;this.localTrackMap.set(d,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(r){r.forEach(n=>{let[o]=n;this.localTrackMap.delete(o)})}bindConnectionEvents(r){r.onConnectionStateChange=async n=>{if(H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(n,")")),this.emit(cr.PeerConnectionStateChange,n),n==="connecting"&&r instanceof CA&&!Hi()&&me("FIRST_TCP_CANDIDATE")&&window.setTimeout(()=>{n==="connecting"&&r.extendCandidate()},me("FIRST_TCP_CANDIDATE_INTERVAL")),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(this._restartTimer&&(window.clearTimeout(this._restartTimer),this._restartTimer=void 0),r instanceof CA&&GY(r,!0),this._isTryConnecting&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isTryConnecting=!1,this._isStartRestartIce=!1,this._pcStatsUploadType=Mg.DISCONNECTED_OR_FAILED,Iu(this,cr.QueryClientConnectionState)==="CONNECTED"&&this._isWaitPcToRePub)){const o=this.pendingLocalTracks.map(l=>l.getTrackId()),a=this.pendingLocalDataChannels.map(l=>"dc_".concat(l.id));rr.reportApiInvoke(this.store.sessionId,{name:Ji.REPUB_AFTER_PC_CONNECTED,options:o.concat(a),tag:Oi.TRACER}).onSuccess(),this.republish()}if(me("NEW_ICE_RESTART")&&r instanceof CA&&!Hi()&&!this._forceTurn){if(_t(Wq).call(Wq,n)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const o=l=>{NU(r)&&(H.debug("[".concat(this.store.clientId,"] [P2PChannel] try to restartICE, type is ").concat(l)),Iu(this,cr.QueryClientConnectionState)==="CONNECTED"&&this.emit(cr.RequestRestartICE,l))},a=()=>{NU(r)&&(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),H.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(cr.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())};return void(this._restartTimer=window.setTimeout(()=>{$Y(r,o,a)},800))}}else{if(n==="disconnected"&&r.iceConnectionState==="disconnected")return setTimeout(()=>{r.iceConnectionState==="disconnected"&&me("ICE_RESTART")&&Iu(this,cr.QueryClientConnectionState)==="CONNECTED"&&this.emit(cr.RequestRestartICE)},800),void setTimeout(()=>{r.peerConnectionState==="disconnected"&&(H.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isTryConnecting=!1,setTimeout(()=>this.emit(cr.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);n==="failed"&&(H.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),setTimeout(()=>this.emit(cr.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},r.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),rr.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:Oi.TRACER}).onSuccess(),this.emit(cr.IceConnectionStateChange,n)},r.onICETransportStateChange=n=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},r.onDTLSTransportStateChange=n=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},r.onDTLSTransportError=n=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},r.onFirstAudioDecoded=n=>{var o;const a=Array.from(Sl(o=this.remoteUserMap).call(o)).find(d=>d._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(wA.FIRST_FRAME_DECODED),rr.firstRemoteFrame(this.store.sessionId,Yo.FIRST_AUDIO_DECODE,Ci.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},r.onFirstAudioReceived=n=>{var o;const a=Array.from(Sl(o=this.remoteUserMap).call(o)).find(l=>l._audioSSRC===n);a&&rr.firstRemoteFrame(this.store.sessionId,Yo.FIRST_AUDIO_RECEIVED,Ci.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},r.onFirstVideoDecoded=(n,o,a)=>{var l;const d=Array.from(Sl(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===n);d&&this.store.firstVideoFrameDecoded(d.uid,{firstDecoded:Date.now()}),this.reportVideoFirstFrameDecoded(n,o,a)},r.onFirstVideoRender=n=>{var o;const a=Array.from(Sl(o=this.remoteUserMap).call(o)).find(l=>l._videoSSRC===n);a&&(this.store.firstVideoFrameDecoded(a.uid,{firstPreRender:Date.now()}),this.reportVideoFirstFrameRender(a))},r.onFirstVideoReceived=n=>{var o;const a=Array.from(Sl(o=this.remoteUserMap).call(o)).find(l=>l._videoSSRC===n);a&&(this.store.firstVideoFrameDecoded(a.uid,{firstReceived:Date.now()}),rr.firstRemoteFrame(this.store.sessionId,Yo.FIRST_VIDEO_RECEIVED,Ci.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},r.onSelectedLocalCandidateChanged=(n,o)=>{const a=n.candidateType==="relay",l=o.candidateType==="relay";o.candidateType!=="unknown"&&a===l||this.emit(cr.ConnectionTypeChange,a),H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(lv(o))," -> ").concat(JSON.stringify(lv(n)),")"))},r.onSelectedRemoteCandidateChanged=(n,o)=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(lv(o))," -> ").concat(JSON.stringify(lv(n)),")"))},r.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},r.getLocalVideoStats=()=>{const n=this.statsCollector.getLocalVideoTrackStats(),o=this.statsCollector.getRTCStats();return Sp(Sp({},n),o)},r.onICECandidateError=n=>{this._iceError=n}}resetConnection(r){r instanceof CA&&function(n){jy.delete(n.id),GY(n)}(r),r.close(),this.emit(cr.PeerConnectionStateChange,"closed"),function(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0,n.getLocalVideoStats=void 0}(r),this._isWaitPcToRePub=!1}filterTobeMutedTracks(r){const n=[];if(this.getAllTracks().indexOf(r)===-1)return n;const o=this.localTrackMap.get(mt.LocalAudioTrack);if(r instanceof Yi&&(o==null?void 0:o.track)instanceof Uo)return o.track.isActive||n.push([mt.LocalAudioTrack,o]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return r===d});if(a&&(n.push(a),a[0]===mt.LocalVideoTrack)){const l=this.localTrackMap.get(mt.LocalVideoLowTrack);l&&n.push([mt.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(r){const n=[],o=this.localTrackMap.get(mt.LocalAudioTrack);if(r instanceof Yi&&(o==null?void 0:o.track)instanceof Uo)return o.track.isActive&&n.push([mt.LocalAudioTrack,o]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return r===d});if(a)if(a[0]===mt.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(mt.LocalVideoLowTrack);l&&n.push([mt.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(r){return r.map(n=>{var o;let a,[l,{track:d,ssrcs:h,id:v}]=n;switch(l){case mt.LocalAudioTrack:a=Fn.Audio;break;case mt.LocalVideoTrack:a=_t(o=d._hints).call(o,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalVideoLowTrack:a=Fn.Low}return{stream_type:a,ssrcs:h,mid:v}})}createUnmuteMessage(r){return r.map(n=>{var o;let a,[l,{track:d,ssrcs:h,id:v}]=n;switch(l){case mt.LocalAudioTrack:a=Fn.Audio;break;case mt.LocalVideoTrack:a=_t(o=d._hints).call(o,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalVideoLowTrack:a=Fn.Low}return{stream_type:a,ssrcs:h,mid:v}})}filterTobeUnSubscribedTracks(r,n){const o=[],a=this.remoteUserMap.get(r);if(!a)return o;if(n){const l=a.get(n);if(!l)return o;o.push([r,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[d,h]=l;o.push([r,{kind:d,id:h}])});return o}filterTobeUnSubscribedDataChannels(r,n){const o=[];return n.forEach(a=>{var l;(l=this.remoteDataChannelMap.get(r))!==null&&l!==void 0&&l.has(a.id)&&o.push(a)}),o}createUnsubscribeMessage(r){const n=[];return r.forEach(o=>{let[a,{kind:l,id:d}]=o;switch(l){case jt.VIDEO:return void(a._videoSSRC&&n.push({stream_type:jt.VIDEO,ssrcId:a._videoSSRC}));case jt.AUDIO:return void(a._audioSSRC&&n.push({stream_type:jt.AUDIO,ssrcId:a._audioSSRC}))}}),n}createUnsubscribeAllMessage(r){const n=new Map;return r.forEach(o=>{let[a,{kind:l}]=o;if(n.has(a)){let d=n.get(a);l===jt.VIDEO?d|=os.Video:d|=os.Audio,n.set(a,d)}else l===jt.VIDEO?n.set(a,os.Video):n.set(a,os.Audio)}),{users:Array.from(n.entries()).map(o=>{let[a,l]=o;return{stream_id:a.uid,stream_type:l}})}}withdrawRemoteTracks(r){r.forEach(n=>{let[o,{kind:a}]=n;const l=this.remoteUserMap.get(o);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(o))})}async updateBitrateLimit(r){const n=this.localTrackMap.get(mt.LocalVideoTrack),o=this.localTrackMap.get(mt.LocalVideoLowTrack);n&&(await n.track.setBitrateLimit(r.uplink),await new Mt((a,l)=>{this.handleUpdateVideoEncoder(n.track,a,l,!0)})),o&&r.low_stream_uplink&&(await o.track.setBitrateLimit({max_bitrate:r.low_stream_uplink.bitrate,min_bitrate:r.low_stream_uplink.bitrate||0}),await new Mt((a,l)=>{this.handleUpdateVideoEncoder(o.track,a,l,!0)}))}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}isPreallocation(){return this.connection instanceof CA&&this.connection.isPreallocation}isPreSub(){return this.connection instanceof CA&&this.connection.isPreSub()}mapPubResToRemoteConfig(r,n,o){return r.map((a,l)=>{var d;let{stream_type:h}=a;const v=(d=n.find(_=>{let{stream_type:y}=_;return h===y}))===null||d===void 0?void 0:d.attributes;if(v&&me("DISABLE_SCREEN_SHARE_REMB")){const _=o[l]._hints;(_t(_).call(_,Jn.SCREEN_TRACK)||_t(_).call(_,Jn.SCREEN_LOW_TRACK))&&(v.remb=!1,H.debug("disable remb for screen share, hints:",_))}return v})}async tryToUnmuteAudio(r){for(let o=0;o<r.length;o++)if(r[o]instanceof Yi){var n;const a=this.filterTobeUnmutedTracks(r[o]);if(a.length===0)continue;await((n=this.connection)===null||n===void 0?void 0:n.unmuteLocal(a.map(d=>{let[,{id:h}]=d;return h})));const l=this.createUnmuteMessage(a);return void await ni(this,cr.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=r=>{var n;return!((n=this.connection)===null||n===void 0||!n.getRemoteVideoIsReady(r))},this.statsUploader.requestUpload=(r,n)=>this.emit(cr.RequestUpload,r,n),this.statsUploader.requestUploadStats=r=>this.emit(cr.RequestUploadStats,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks(),this.statsUploader.requestTransportStats=()=>{var r;return{connectState:((r=this.connection)===null||r===void 0?void 0:r.peerConnectionState)||"closed"}}}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ps(p5(this.dtlsFailedCount,Ro)),this.emit(cr.RequestReconnect)}async reconnectP2P(){const r=Array.from(this.localTrackMap.entries()),n=this.createGatewayUnpublishMessage(r);Array.from(this.remoteUserMap.entries()),n.length>0&&await ea(this,cr.RequestUnpublishForReconnectPC,n),this.disconnectForReconnect(),this.emit(cr.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(mt.LocalVideoTrack)||this.pendingLocalTracks.some(r=>r instanceof hi)}throwIfTrackTypeNotMatch(r){if(r.filter(n=>n instanceof hi).length>1)throw new tt(de.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r.filter(n=>n instanceof Yi).length>1&&(r.some(n=>n instanceof Yi&&n._bypassWebAudio)||!vn().webAudioMediaStreamDest))throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of r){if(n instanceof hi&&this.pendingLocalTracks.some(o=>o instanceof hi))throw new tt(de.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Yi&&this.pendingLocalTracks.some(o=>o instanceof Yi)&&(!vn().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(o=>o instanceof Yi&&o._bypassWebAudio)))throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(r,n){var o;const a=!me("DISABLE_DUAL_STREAM_USE_ENCODING")&&vn().supportDualStreamEncoding,l=Sp(Sp({},{width:160,height:120,framerate:15,bitrate:50}),n);let d;d=a?r._mediaStreamTrack.clone():BU(r,l);const h=ii(8,"track-low-"),v=new hi(d,Sp(Sp({},a&&{scaleResolutionDownBy:AU(l,r)}),{},{frameRate:l.framerate,bitrateMax:l.bitrate,bitrateMin:l.bitrate}),void 0,void 0,h);return v.on(r1.TRANSCEIVER_UPDATED,_=>{r._updateRtpTransceiver(_,Sy.LOW_STREAM)}),v._hints.push(Jn.LOW_STREAM),_t(o=r._hints).call(o,Jn.SCREEN_TRACK)&&v._hints.push(Jn.SCREEN_LOW_TRACK),r.on("sei-to-send",_=>{v.emit("sei-to-send",_)}),r.addListener(Zt.NEED_CLOSE,()=>{v.close()}),v}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(r,n,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof CA){var l,d,h,v;const _=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:y,dtlsTransportState:C,peerConnectionState:B}=this.connection,{local:L,remote:x}=await this.connection.getSelectedCandidatePair();rr.pcStats(this.store.sessionId,{startTime:_,eventElapse:r-_||0,iceconnectionsate:y,dtlsstate:C,connectionstate:B,intSucc:n?1:2,error:this._iceError||a||"",selectedLocalCandidateProtocol:(l=L==null?void 0:L.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(d=L.candidateType)!==null&&d!==void 0?d:"",selectedLocalCandidateAddress:"".concat(L.address,":").concat(L.port),selectedRemoteCandidateProtocol:(h=x.protocol)!==null&&h!==void 0?h:"",selectedRemoteCandidateType:(v=x.candidateType)!==null&&v!==void 0?v:"",selectedRemoteCandidateAddress:"".concat(x.address,":").concat(x.port),restartCnt:o,preallocation:this.connection.isPreallocation}),this._iceError=null}}reportVideoFirstFrameRender(r){const n=this.store.keyMetrics,o=n.firstVideoFrameDecoded.find(C=>C.userId===r.uid);if(!o)return;const{isInternalUpload:a,isExternalUpload:l}=o;if(a&&l)return;const{subscribeEnd:d,firstPreRender:h,peerPublishDuration:v,peerPubStatusMs:_}=o;let{firstRender:y=0}=o;if(d&&(y||h)&&v&&_){o.isInternalUpload=!0;const{playEnd:C}=o;C&&(o.isExternalUpload=!0);const{firstPreRender:B=0}=o;y=B||y;const L=r.videoTrack,x={peer:r._uintid,width:(L==null?void 0:L._videoWidth)||0,height:(L==null?void 0:L._videoHeight)||0,ssrc:r._videoSSRC||0,p2pid:this.store.p2pId,peerPublishDuration:v,peerPubStatusMs:_,joinChannelStart:n.joinStart||0,preloadStart:n.preloadStart||0,preloadEnd:n.preloadEnd||0,apStart:n.requestAPStart||0,apEnd:n.requestAPEnd||0,suaEnd:n.requestSUAEnd||0,beforeConnect:n.beforeConnect||0,peerReceiver:n.peerReceiver||0,ice:n.iceConnectionEnd||0,pc:n.peerConnectionEnd||0,signalConnected:n.signalConnected||0,joinReq:n.joinReq||0,joinRes:n.joinRep||0,userJoinNotify:o.userJoinNotify||0,videoAddNotify:o.videoAddNotify||0,subscribeStart:o.subscribeStart||0,subscribeEnd:o.subscribeEnd||0,firstReceived:o.firstReceived||0,firstDecoded:o.firstDecoded||0,firstPreRender:B||0,firstRender:C?Math.max(y,C):Math.max(y,d),playStart:o.playStart||0,playEnd:o.playEnd||0,isPreSub:!(!r._videoSSRC||!this.isPreSubScribe(r._videoSSRC)),isPrePc:this.isPreallocation(),isPreInstantVideo:E$(this.store)};rr.firstXLAPeerFirstVideoFrame(this.store.sessionId,x)}}reportVideoFirstFrameDecoded(r,n,o,a){var l;const d=Array.from(Sl(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===r);if(d){a||this.store.subscribe(d.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,v=h.subscribe.find(_=>_.userId===d.uid&&_.type==="video");rr.firstRemoteVideoDecode(this.store.sessionId,Yo.FIRST_VIDEO_DECODE,Ci.FIRST_VIDEO_DECODE,{peer:d._uintid,videowidth:n,videoheight:o,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(v==null?void 0:v.subscribeEnd)||0,subscriberStart:(v==null?void 0:v.subscribeStart)||0,videoAddNotify:(v==null?void 0:v.streamAdded)||0,state:a?1:0,firstFrame:(v==null?void 0:v.firstFrame)||0})}}async remoteMediaSsrcChanged(r,n,o){if(!this.connection)return!1;const a=this.remoteUserMap.get(r);if(!a)return!1;const l=a.get(n);if(!l)return!1;const d=await this.connection.getRemoteSSRC(l);return d!==void 0&&d!==o}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(r=>{let[n,{track:o}]=r;n===mt.LocalVideoLowTrack?o._updateRtpTransceiver(void 0,Sy.LOW_STREAM):o._updateRtpTransceiver(void 0)})}},tr(ln.prototype,"startP2PConnection",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"startP2PConnection"),ln.prototype),tr(ln.prototype,"connect",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"connect"),ln.prototype),tr(ln.prototype,"updateRemoteRTPCapabilities",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"updateRemoteRTPCapabilities"),ln.prototype),tr(ln.prototype,"publishDataChannel",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"publishDataChannel"),ln.prototype),tr(ln.prototype,"unpublish",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"unpublish"),ln.prototype),tr(ln.prototype,"unpublishDataChannel",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"unpublishDataChannel"),ln.prototype),tr(ln.prototype,"unpublishLowStream",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"unpublishLowStream"),ln.prototype),tr(ln.prototype,"subscribeDataChannel",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"subscribeDataChannel"),ln.prototype),tr(ln.prototype,"subscribe",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"subscribe"),ln.prototype),tr(ln.prototype,"massSubscribe",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"massSubscribe"),ln.prototype),tr(ln.prototype,"unsubscribe",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"unsubscribe"),ln.prototype),tr(ln.prototype,"unsubscribeDataChannel",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"unsubscribeDataChannel"),ln.prototype),tr(ln.prototype,"massUnsubscribe",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"massUnsubscribe"),ln.prototype),tr(ln.prototype,"muteRemote",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"muteRemote"),ln.prototype),tr(ln.prototype,"unmuteRemote",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"unmuteRemote"),ln.prototype),tr(ln.prototype,"hasRemoteMediaWithLock",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"hasRemoteMediaWithLock"),ln.prototype),tr(ln.prototype,"disconnectForReconnect",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"disconnectForReconnect"),ln.prototype),tr(ln.prototype,"updateBitrateLimit",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"updateBitrateLimit"),ln.prototype),tr(ln.prototype,"remoteMediaSsrcChanged",[oc],Object.getOwnPropertyDescriptor(ln.prototype,"remoteMediaSsrcChanged"),ln.prototype),ln);function oc(r,n,o){const a=r[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("From P2PChannel.".concat(n));try{for(var h=arguments.length,v=new Array(h),_=0;_<h;_++)v[_]=arguments[_];return await a.apply(this,v)}finally{d()}},o}function YY(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function XY(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?YY(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):YY(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const kbe=Date.now(),Dbe=20,PU=new Map,P2=new Map;async function JY(r){const n=PU.get(r),o=Array.isArray(n)&&n[n.length-1],a=P2.get(r);if(!o)return void(a.isSyncing=!1);const l={uid:o.uid,payload:o.payload};a.firstRecvTs===0&&(a.firstRecvTs=o.recvTs,a.firstSendTs=o.sendTs);const d=o.sendTs-a.firstSendTs,h=d-(Date.now()-a.firstRecvTs);h>0&&(a.firstRecvTs=Date.now()-d);let v=o.mediaDelay+h;v<=0?(n.pop(),ZY(o.context,l),v=0):v=Math.min(v,Dbe),setTimeout(()=>n.length&&JY(r),v)}function ZY(r,n){r.safeEmit(un.STREAM_MESSAGE,n.uid,n.payload),r.onStreamMessage&&r.onStreamMessage(n)}function xbe(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;if(!r.syncWithAudio)return ZY(o,{uid:r.uid,payload:r.payload});const a="".concat(o.id,"-").concat(r.uid),l=PU.get(a)||[],d=l.findIndex(y=>r.sendTs>=y.sendTs),h=XY(XY({},r),{},{context:o,mediaDelay:n,recvTs:Date.now()});d===-1?l.push(h):l.splice(d,0,h),PU.set(a,l);let v=!1;var _;P2.has(a)?v=!((_=P2.get(a))===null||_===void 0||!_.isSyncing):P2.set(a,{isSyncing:v,firstRecvTs:0,firstSendTs:0}),v||JY(a)}const Ube=hn().name;function eX(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function tX(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?eX(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):eX(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const Ky="websdk_ng_cache_parameter",Mbe=me("MAX_PRELOAD_ASYNC_LENGTH"),Fbe=1e4,d1=new Map,f1=[];let kU=null,DU=0,xU=0;const k2=new Map,Vbe=function(r,n){const o=[];let a=0;const l=async()=>{const d=o.shift();d&&await d(),o.length>0&&a<n?l():a--};return async function(){for(var d=arguments.length,h=new Array(d),v=0;v<d;v++)h[v]=arguments[v];return new Mt(async(_,y)=>{o.push(async()=>{try{const C=await r(...h);_(C)}catch(C){y(C)}}),a<n&&(a++,l())})}}(rX,Mbe),UU=Yc.CancelToken.source();async function rX(r,n,o,a,l,d){try{if(!me("ENABLE_PRELOAD"))return;if(!vn().supportWebCrypto)return void rv(()=>{H.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!o&&o!==null)throw new tt(de.INVALID_PARAMS,"Invalid token: ".concat(o,". If you don not use token, set it to null"));o&&Ls(o,"token",1,2047),Ls(r,"appid",1,2047),c2(n),a&&l2(a);const h=e1();H.debug("preload channel ".concat(n,", uid is ").concat(a));const v={appId:r,cname:n,token:o||r,uid:typeof a!="string"?a:null,sid:h,proxyServer:l};let _,y;typeof a=="string"?(v.stringUid=a,[y,_]=await Mt.all([Sbe(a,{sid:h,appId:r},UU.token),IY(tX(tX({},v),{},{token:o||r,uid:0}),UU.token)]),v.uid=y.uid,_.gatewayInfo.uid=v.uid,_.gatewayInfo.res.uid=v.uid):(d&&(v.stringUid=d),_=await IY(v,UU.token));const C={sid:h,appId:r,cname:n,token:o||r,uid:v.stringUid||a,intUid:v.uid||_.gatewayInfo.uid,stringUid:v.stringUid,ts:Date.now(),sua:y,ap:_};await async function(B){let L;try{B.uid&&iX({appId:B.appId,cname:B.cname,token:B.token,uid:B.uid,stringUid:B.stringUid});const x=cX(B),X=await async function(q,Ae){try{const ue=await window.crypto.subtle.importKey("raw",zG(Ae),"AES-GCM",!1,["encrypt"]),_e=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},ue,Z0(window.btoa(JSON.stringify(q))));return nv(new Uint8Array(_e))}catch{return}}(B,B.token||B.appId);if(!X)return;L=aX(Ky);const G=L?JSON.parse(L):[];G.push({[x]:X}),G.length>me("AP_CACHE_NUM")&&G.shift(),D2(Ky,JSON.stringify(G))}catch(x){H.warn("Error caching server parameters:",x.message),D2(Ky,"")}}(C),DU++}catch(h){throw xU++,function(v){kU||(kU=window.setTimeout(()=>{let y="";k2.forEach((C,B)=>{y+="".concat(B,": ").concat(C," ;")}),rr.reportApiInvoke(null,{name:Ji.PRELOAD,options:{success:DU,failed:xU,err:y}}).onError(v),DU=0,xU=0,k2.clear(),kU=null},Fbe));const _=k2.get(v.code)||0;k2.set(v.code,_+1)}(h),h}}async function nX(r){try{if(me("AP_REQUEST_DETAIL")||me("ENABLE_ROLE_SELECT_EDGE"))return;const n=iX(r);if(!n||r.cloudProxyServer!=="disabled")return;const o=await async function(a,l){try{const d=await window.crypto.subtle.importKey("raw",zG(l),"AES-GCM",!1,["decrypt"]),h=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},d,Z0(a));return JSON.parse(window.atob(nv(new Uint8Array(h))))}catch{return}}(n,r.token||r.appId);if(!o||!function(a,l){return a.cname===l.cname&&a.appId===l.appId&&a.token===l.token?l.stringUid?a.stringUid===l.stringUid:typeof l.uid=="number"?a.uid===l.uid:a.uid==l.uid:!1}(o,r))return;if(o&&Date.now()-o.ts<me("AP_CACHE_LIFETIME"))return o}catch(n){H.warn("Error get preloadInfo",n.message)}}function iX(r){let n;try{if(n=aX(Ky),!n)return;const o=JSON.parse(n),a=cX(r),l=function(h,v){for(let _=h.length-1;_>=0;_--)if(v(h[_]))return _;return-1}(o,h=>a in h);if(l===-1)return;const d=o.splice(l,1)[0];return D2(Ky,JSON.stringify(o)),d[a]}catch(o){H.warn("Error delete preload info: ".concat(n),o.message),D2(Ky,"")}}function MU(r){if(r){let n=d1.get(r);n&&(window.clearTimeout(n),n=null,d1.delete(r)),_t(f1).call(f1,r)||r.cloudProxyServer!=="disabled"||f1.push(r)}if(d1.size<me("AP_CACHE_NUM")&&f1.length>0){const n=f1.shift();d1.set(n,window.setTimeout(async()=>{const{appId:o,cname:a,token:l,stringUid:d,uid:h,proxyServer:v}=n;try{await Vbe(o,a,l,h,v,d),d1.has(n)&&MU(n)}catch(_){H.warn("update preload failed",_.message),oX(n)}},me("AP_UPDATE_INTERVAL")))}}function oX(r){const n=f1.indexOf(r);n!==-1&&f1.splice(n,1);let o=d1.get(r);o&&(window.clearTimeout(o),o=null,d1.delete(r),MU())}function sX(r,n){const o=r.sua,a=r.ap;n&&o&&rr.reqUserAccount(r.sid,{lts:o.requestTime,elapse:o.elapse,success:!0,serverAddr:o.url,stringUid:n,uid:r.intUid,errorCode:null,extend:o.req}),rr.reportResourceTiming(r.ap.url,r.sid),rr.joinWebProxyAP(r.sid,{lts:a.requestTime,elapse:a.elapse,sucess:1,apServerAddr:a.url,turnServerAddrList:a.proxyInfo.addresses.map(l=>l.ip).join(","),eventType:"disabled",unilbsServerIds:[po.CHOOSE_SERVER,po.CLOUD_PROXY_FALLBACK].toString()}),rr.joinChooseServer(r.sid,{lts:a.requestTime,elapse:a.elapse,succ:!0,csAddr:a.url,opid:a.opid,serverList:a.gatewayInfo.gatewayAddrs.map(l=>l.address),ec:null,cid:a.gatewayInfo.cid.toString(),uid:a.gatewayInfo.uid.toString(),csIp:a.gatewayInfo.csIp,unilbsServerIds:[po.CHOOSE_SERVER].toString(),isHttp3:a.isHttp3})}function aX(r){return window.atob(window.localStorage.getItem(r)||"")}function D2(r,n){window.localStorage.setItem(r,window.btoa(n))}function cX(r){let n="".concat(r.appId,"_").concat(r.cname);return typeof r.uid=="string"&&(n+="_s_".concat(r.uid)),typeof r.uid=="number"&&(n+="_".concat(r.uid)),r.token&&(n+="_".concat(r.token)),t$(n)}function Qbe(r){let n=function(){const o=Kbe.pop();return o?(o.offset=o.limit=0,o):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(o,a){let l=o.appId;l!==void 0&&(go(a,10),gv(a,l));let d=o.cid;d!==void 0&&(go(a,16),go(a,d));let h=o.cname;h!==void 0&&(go(a,26),gv(a,h));let v=o.deviceId;v!==void 0&&(go(a,34),gv(a,v));let _=o.elapse;_!==void 0&&(go(a,40),mv(a,_));let y=o.fileSize;y!==void 0&&(go(a,48),mv(a,Wy(y)));let C=o.height;C!==void 0&&(go(a,56),mv(a,Wy(C)));let B=o.jpg;B!==void 0&&(go(a,66),go(a,B.length),uX(a,B));let L=o.networkType;L!==void 0&&(go(a,72),mv(a,Wy(L)));let x=o.osType;x!==void 0&&(go(a,80),mv(a,Wy(x)));let X=o.requestId;X!==void 0&&(go(a,90),gv(a,X));let G=o.sdkVersion;G!==void 0&&(go(a,98),gv(a,G));let q=o.sequence;q!==void 0&&(go(a,104),mv(a,Wy(q)));let Ae=o.sid;Ae!==void 0&&(go(a,114),gv(a,Ae));let ue=o.timestamp;ue!==void 0&&(go(a,120),mv(a,ue));let _e=o.uid;_e!==void 0&&(go(a,128),go(a,_e));let De=o.vid;De!==void 0&&(go(a,136),go(a,De));let Le=o.width;Le!==void 0&&(go(a,144),mv(a,Wy(Le)));let Te=o.service;Te!==void 0&&(go(a,152),go(a,Te));let ze=o.callbackData;ze!==void 0&&(go(a,162),go(a,ze.length),uX(a,ze));let rt=o.ticket;rt!==void 0&&(go(a,170),gv(a,rt));let At=o.vendorConfigs;At!==void 0&&(go(a,178),gv(a,At))}(r,n),function(o){let a=o.bytes,l=o.limit;return a.length===l?a:a.subarray(0,l)}(n)}function Hbe(r){return function(o){let a={};e:for(;!Wbe(o);){let l=XS(o);switch(l>>>3){case 0:break e;case 1:a.code=XS(o);break;case 2:a.msg=AX(o,XS(o));break;case 3:a.requestId=AX(o,XS(o));break;case 4:a.timestamp=Gbe(o,!1);break;default:jbe(o,7&l)}}return a}({bytes:n=r,offset:0,limit:n.length});var n}function jbe(r,n){switch(n){case 0:for(;128&Nd(r););break;case 2:FU(r,XS(r));break;case 5:FU(r,4);break;case 1:FU(r,8);break;default:throw new Error("Unimplemented type: "+n)}}function Wy(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}let Kbe=[];function FU(r,n){if(r.offset+n>r.limit)throw new Error("Skip past limit");r.offset+=n}function Wbe(r){return r.offset>=r.limit}function x2(r,n){let o=r.bytes,a=r.offset,l=r.limit,d=a+n;if(d>o.length){let h=new Uint8Array(2*d);h.set(o),r.bytes=h}return r.offset=d,d>l&&(r.limit=d),a}function lX(r,n){let o=r.offset;if(o+n>r.limit)throw new Error("Read past limit");return r.offset+=n,o}function uX(r,n){let o=x2(r,n.length);r.bytes.set(n,o)}function AX(r,n){let o=lX(r,n),a=String.fromCharCode,l=r.bytes,d="",h="";for(let v=0;v<n;v++){let _,y,C,B,L=l[v+o];128&L?(224&L)==192?v+1>=n?h+=d:(_=l[v+o+1],(192&_)!=128?h+=d:(B=(31&L)<<6|63&_,B<128?h+=d:(h+=a(B),v++))):(240&L)==224?v+2>=n?h+=d:(_=l[v+o+1],y=l[v+o+2],(49344&(_|y<<8))!=32896?h+=d:(B=(15&L)<<12|(63&_)<<6|63&y,B<2048||B>=55296&&B<=57343?h+=d:(h+=a(B),v+=2))):(248&L)==240?v+3>=n?h+=d:(_=l[v+o+1],y=l[v+o+2],C=l[v+o+3],(12632256&(_|y<<8|C<<16))!=8421504?h+=d:(B=(7&L)<<18|(63&_)<<12|(63&y)<<6|63&C,B<65536||B>1114111?h+=d:(B-=65536,h+=a(55296+(B>>10),56320+(1023&B)),v+=3))):h+=d:h+=a(L)}return h}function gv(r,n){let o=n.length,a=0;for(let h=0;h<o;h++){let v=n.charCodeAt(h);v>=55296&&v<=56319&&h+1<o&&(v=(v<<10)+n.charCodeAt(++h)-56613888),a+=v<128?1:v<2048?2:v<65536?3:4}go(r,a);let l=x2(r,a),d=r.bytes;for(let h=0;h<o;h++){let v=n.charCodeAt(h);v>=55296&&v<=56319&&h+1<o&&(v=(v<<10)+n.charCodeAt(++h)-56613888),v<128?d[l++]=v:(v<2048?d[l++]=v>>6&31|192:(v<65536?d[l++]=v>>12&15|224:(d[l++]=v>>18&7|240,d[l++]=v>>12&63|128),d[l++]=v>>6&63|128),d[l++]=63&v|128)}}function Nd(r){return r.bytes[lX(r,1)]}function dX(r,n){let o=x2(r,1);r.bytes[o]=n}function XS(r){let n,o=0,a=0;do n=Nd(r),o<32&&(a|=(127&n)<<o),o+=7;while(128&n);return a}function go(r,n){for(n>>>=0;n>=128;)dX(r,127&n|128),n>>>=7;dX(r,n)}function Gbe(r,n){let o,a=0,l=0,d=0;return o=Nd(r),a=127&o,128&o&&(o=Nd(r),a|=(127&o)<<7,128&o&&(o=Nd(r),a|=(127&o)<<14,128&o&&(o=Nd(r),a|=(127&o)<<21,128&o&&(o=Nd(r),l=127&o,128&o&&(o=Nd(r),l|=(127&o)<<7,128&o&&(o=Nd(r),l|=(127&o)<<14,128&o&&(o=Nd(r),l|=(127&o)<<21,128&o&&(o=Nd(r),d=127&o,128&o&&(o=Nd(r),d|=(127&o)<<7))))))))),{low:a|l<<28,high:l>>>4|d<<24,unsigned:n}}function mv(r,n){let o=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,d=l===0?a===0?o<16384?o<128?1:2:o<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=x2(r,d),v=r.bytes;switch(d){case 10:v[h+9]=l>>>7&1;case 9:v[h+8]=d!==9?128|l:127&l;case 8:v[h+7]=d!==8?a>>>21|128:a>>>21&127;case 7:v[h+6]=d!==7?a>>>14|128:a>>>14&127;case 6:v[h+5]=d!==6?a>>>7|128:a>>>7&127;case 5:v[h+4]=d!==5?128|a:127&a;case 4:v[h+3]=d!==4?o>>>21|128:o>>>21&127;case 3:v[h+2]=d!==3?o>>>14|128:o>>>14&127;case 2:v[h+1]=d!==2?o>>>7|128:o>>>7&127;case 1:v[h]=d!==1?128|o:127&o}}const fX={},hX={},U2=4294967296,pX=U2*U2,gX=pX/2,VU=vX(0,!0),mX=vX(0),$be=Gy(0,-2147483648,!1),zbe=Gy(-1,2147483647,!1),qbe=Gy(-1,-1,!0);function vX(r,n){let o,a,l;return n?(l=0<=(r>>>=0)&&r<256)&&(a=hX[r],a)?a:(o=Gy(r,0,!0),l&&(hX[r]=o),o):(l=-128<=(r|=0)&&r<128)&&(a=fX[r],a)?a:(o=Gy(r,r<0?-1:0,!1),l&&(fX[r]=o),o)}function Gy(r,n,o){return{low:0|r,high:0|n,unsigned:!!o}}function _X(r,n){if(isNaN(r))return n?VU:mX;if(n){if(r<0)return VU;if(r>=pX)return qbe}else{if(r<=-gX)return $be;if(r+1>=gX)return zbe}return r<0?n?VU:mX:Gy(r%U2|0,r/U2|0,n)}function yX(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}class QU extends Mi{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const o=this._connectionState;this._connectionState=n,this.emit(qf.CONNECTION_STATE_CHANGE,n,o)}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(n){var o;super(),re(this,"name","AgoraRTCImageModeration"),re(this,"_connectionState",bA.CONNECTING),re(this,"_sequence",0),re(this,"_moderationStartTime",void 0),re(this,"_workerConnection",void 0),re(this,"_workerMessageLengthLimit",void 0),re(this,"_qualityRatio",void 0),re(this,"_connectInfo",void 0),re(this,"_cancelTokenSource",Yc.CancelToken.source()),re(this,"_retryConfig",void 0),re(this,"_moderationInterval",void 0),re(this,"_moderationTimer",null),re(this,"_moderationMode",1),re(this,"_quality",1),re(this,"_qualityTimer",null),re(this,"_ticket",void 0),re(this,"_moderationIntervalMinimum",void 0),re(this,"_uploadFailedNum",0),re(this,"_uploadNum",0),re(this,"_uploadTimer",null),re(this,"_extraInfo",void 0),re(this,"_vendor",""),re(this,"_encoder",new TextEncoder),re(this,"_moderationId",void 0),re(this,"inspectImage",()=>{if(this.connectionState!==bA.CONNECTED)throw new Je(de.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===bA.CONNECTED?this.requestToInspectImage():H.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=ii(5,"image-moderation-"),this._workerMessageLengthLimit=me("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=me("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(o=n.interval)!==null&&o!==void 0?o:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),this._qualityRatio=me("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new QS("worker-"+this._moderationId,Ro),this.on(qf.STATE_CHANGE,(a,l)=>{H.debug("[".concat(this._moderationId,"] Moderation operation :").concat(ky[a]," ").concat(l||""))}),this.handleWorkerEvents()}async init(n,o){this.emit(qf.STATE_CHANGE,ky.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=o,new Mt((l,d)=>{this.on(qf.CONNECTION_STATE_CHANGE,(h,v)=>{h===bA.CONNECTED&&l()}),this.requestAP(n,a,o).then(h=>{this.connectWorker(h)}).catch(h=>{d(h)})})}updateConfig(n){var o;this._moderationInterval=(o=n.interval)!==null&&o!==void 0?o:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),H.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(n))),this.connectionState===bA.CONNECTED&&this.inspectImage()}async requestAP(n,o,a){const l=me("WEBCS_DOMAIN").map(_=>"https://".concat(_,"/api/v1")),d=await function(_,y,C,B){let{appId:L,areaCode:x,cname:X,sid:G,token:q,uid:Ae}=y;Vy++;const ue="moderation_plugin",_e={service_name:ue,json_body:JSON.stringify({appId:L,areaCode:x,cname:X,command:"allocateEdge",requestId:Vy,seq:Vy,sid:G,appToken:q,ts:Date.now(),uid:Ae+""})};let De,Le,Te=_[0];return Wf(async()=>{De=Date.now();const ze=await Yf(Te,{data:_e,cancelToken:C,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Le=Date.now()-De,ze.code!==0){const wt=new Je(de.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+ze.code,{retry:!0,responseTime:Le});throw H.error(wt.toString()),wt}const rt=JSON.parse(ze.json_body);if(rt.code!==200){const wt=new Je(de.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(rt.code,", reason: ").concat(rt.reason),{code:rt.code,responseTime:Le});throw H.error(wt.toString()),wt}if(!rt.servers||!Array.isArray(rt.servers)||rt.servers.length===0){const wt=new Je(de.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:rt.code,responseTime:Le});throw H.error(wt.toString()),wt}if(!rt.servers.some(wt=>!!wt.wss)){const wt=new Je(de.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:rt.code,responseTime:Le});throw H.error(wt.toString()),wt}const At=me("IMAGE_MODERATION_WORKER_HOST");return{addressList:rt.servers.map(wt=>{let{address:Gr,wss:en}=wt;if(Gr&&en)return"wss://".concat(Gr.replace(/\./g,"-"),".").concat(At,":").concat(en,"/moderation")}).filter(wt=>!!wt),workerToken:rt.workerToken,vid:rt.vid,ticket:rt.appTicket,responseTime:Le}},(ze,rt)=>(rr.apworkerEvent(G,{success:!0,sc:200,serviceName:ue,responseDetail:JSON.stringify(ze.addressList),firstSuccess:rt===0,responseTime:Le,serverIp:_[rt%_.length]}),!1),(ze,rt)=>(rr.apworkerEvent(G,{success:!1,sc:ze.data&&ze.data.code||200,serviceName:ue,responseTime:Le,serverIp:_[rt%_.length]}),!!(ze.code!==de.OPERATION_ABORTED&&ze.code!==de.UNEXPECTED_RESPONSE||ze.data&&ze.data.retry)&&(Te=_[(rt+1)%_.length],!0)),B)}(l,n,o,a);this.emit(qf.STATE_CHANGE,ky.AP_CONNECTED);const{addressList:h,ticket:v}=d;return this._ticket=v,h}async connectWorker(n){this.emit(qf.STATE_CHANGE,ky.CONNECT_WORKER),await this._workerConnection.init(n,1e4)}handleWorkerEvents(){this._workerConnection.on(jr.CONNECTED,async()=>{this.emit(qf.STATE_CHANGE,ky.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=bA.CONNECTED}),this._workerConnection.on(jr.CLOSED,()=>{this.connectionState=bA.CLOSED}),this._workerConnection.on(jr.FAILED,()=>{this.connectionState=bA.CLOSED}),this._workerConnection.on(jr.RECONNECTING,()=>{this.connectionState=this.connectionState===bA.CONNECTED?bA.RECONNECTING:bA.CONNECTING}),this._workerConnection.on(jr.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const o=Hbe(new Uint8Array(n.data));me("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&H.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(o)),this._uploadNum++,o.code===void 0||o.code===0||(this._uploadFailedNum++,H.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(o.code,", msg is ").concat(o.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{rr.reportApiInvoke(this._connectInfo.sid||null,{name:Ji.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,o.code],tag:Oi.TRACER}).onError(new Je(de.IMAGE_MODERATION_UPLOAD_FAILED,o.msg)),this._uploadTimer=null},me("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else H.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(jr.WILL_RECONNECT,(n,o,a)=>{n==="recover"&&a(n),a("tryNext")}),this._workerConnection.on(jr.REQUEST_NEW_URLS,(n,o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(o)})}static intToLong(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}async requestToInspectImage(){const n=Iu(this,qf.CLIENT_LOCAL_VIDEO_TRACK),o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void(me("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&H.debug("Only the track being played can be inspected"));this._sequence++;const a=await this.generateRequestData(n,o);this._workerConnection.sendMessage(a,!0,!0)}else me("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&H.debug("Only the track being published can be inspected")}async generateRequestData(n,o){let{appId:a,cname:l,cid:d,vid:h,sid:v,uid:_}=o;const y=Date.now(),C=await n.getCurrentFrameImage("image/jpeg",this.quality),B=await K$(C,a,l),L=this._sequence+"-"+d+"-"+_+"-"+y+"-"+ii(12,""),x={appId:a,cid:d,cname:l,deviceId:"",elapse:QU.intToLong(Number(y-this._moderationStartTime)),fileSize:C.buffer.byteLength,height:C.height,width:C.width,jpg:B,networkType:6,osType:7,requestId:L,sdkVersion:"4.24.0",sequence:this._sequence,sid:v,timestamp:_X(y),uid:_,vid:h,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete x.callbackData;const X=Qbe(x);if(X.byteLength<this._workerMessageLengthLimit){if(me("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const G=function(q){for(var Ae=1;Ae<arguments.length;Ae++){var ue=arguments[Ae]!=null?arguments[Ae]:{};Ae%2?yX(Object(ue),!0).forEach(function(_e){re(q,_e,ue[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(ue)):yX(Object(ue)).forEach(function(_e){Object.defineProperty(q,_e,Object.getOwnPropertyDescriptor(ue,_e))})}return q}({},x);delete G.jpg,H.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(G))}return X}{const G=this.quality*this._qualityRatio;return this.quality=G,await this.generateRequestData(n,{appId:a,cname:l,cid:d,vid:h,sid:v,uid:_})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Yc.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=bA.CLOSED,this.emit(qf.STATE_CHANGE,ky.CLOSED)}}function EX(r){if(Xn(r.interval,"interval",1e3,1/0),r&&r.extraInfo&&r.extraInfo.length>1024)throw new Je(de.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(r&&r.vendor&&r.vendor.length>1024)throw new Je(de.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const Ybe={name:"ImageModeration",create:function(r){let{config:n}=r;return EX(n),new QU(n)}};var wX,SX,bX,CX,TX,RX,IX,OX,NX,BX,LX,PX,kX,DX,xX,UX,MX,FX,VX,QX,HX,jX,KX,WX,GX,$X,zX,qX,YX,XX,JX,ZX,eJ,tJ,rJ,nJ,iJ,oJ,sJ,aJ,cJ,Qt;function lJ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Bd(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?lJ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):lJ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}ga.setLogger(H);let Xbe=(wX=gr(),SX=gr({argsMap:(r,n)=>{if(!Array.isArray(n)){if(!(n instanceof Ty))return[n];n=[n]}return n.map(o=>o?Object(o).toString():"null")}}),bX=gr({argsMap:(r,n)=>(n||(n=[]),Array.isArray(n)||n.trackMediaType!==Cy.DATA?(Array.isArray(n)||(n=[n]),n.map(o=>o.getTrackId())):[n.getChannelId()])}),CX=gr({argsMap:(r,n,o,a)=>[typeof n=="object"?n.uid:n,o,a]}),TX=gr({argsMap:(r,n,o)=>[n,o]}),RX=gr({argsMap:(r,n)=>n.map(o=>{let{user:a,mediaType:l}=o;return[a==null?void 0:a.uid,l]})}),IX=gr({argsMap:(r,n,o,a)=>[typeof n=="object"?n.uid:n,o,a]}),OX=gr({argsMap:(r,n)=>n.map(o=>{let{user:a,mediaType:l}=o;return{uid:a==null?void 0:a.uid,mediaType:l}})}),NX=gr(),BX=gr(),LX=gr(),PX=gr(),kX=gr(),DX=gr(),xX=gr(),UX=gr(),MX=gr(),FX=gr(),VX=gr(),QX=gr(),HX=gr(),jX=gr(),KX=gr(),WX=gr({argsMap:(r,n)=>[n]}),GX=gr(),$X=gr(),zX=gr(),qX=gr(),YX=gr(),XX=gr(),JX=gr(),ZX=gr(),eJ=gr({argsMap:(r,n)=>(Array.isArray(n)||(n=[n]),[JSON.stringify(n)])}),tJ=gr(),rJ=gr(),nJ=gr(),iJ=gr(),oJ=gr(),sJ=gr(),aJ=gr({reportResult:!0}),cJ=gr(),Qt=class extends Mi{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var r;return((r=this._config)===null||r===void 0?void 0:r.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(r,n){let o;if(super(),re(this,"store",void 0),re(this,"_uid",void 0),re(this,"_channelName",void 0),re(this,"_uintUid",void 0),re(this,"_users",[]),re(this,"_config",void 0),re(this,"_clientId",void 0),re(this,"_appId",void 0),re(this,"_sessionId",null),re(this,"_key",void 0),re(this,"_rtmConfig",{}),re(this,"_joinInfo",void 0),re(this,"_gateway",void 0),re(this,"_statsCollector",void 0),re(this,"_configDistribute",void 0),re(this,"_leaveMutex",void 0),re(this,"_publishMutex",void 0),re(this,"_renewTokenMutex",void 0),re(this,"_subscribeMutex",void 0),re(this,"_encryptionMode","none"),re(this,"_encryptionSecret",null),re(this,"_encryptionSalt",null),re(this,"_encryptDataStream",!1),re(this,"_encryptDataStreamKey",null),re(this,"_encryptDataStreamIv",null),re(this,"_proxyServer",void 0),re(this,"_turnServer",{servers:[],mode:"auto"}),re(this,"_cloudProxyServerMode","disabled"),re(this,"_isDualStreamEnabled",!1),re(this,"_defaultStreamFallbackType",void 0),re(this,"_lowStreamParameter",void 0),re(this,"_streamFallbackTypeCacheMap",new Map),re(this,"_remoteStreamTypeCacheMap",new Map),re(this,"_axiosCancelSource",Yc.CancelToken.source()),re(this,"_audioVolumeIndicationInterval",void 0),re(this,"_networkQualityInterval",void 0),re(this,"_userOfflineTimeout",void 0),re(this,"_streamRemovedTimeout",void 0),re(this,"_liveTranscodeStreamingClient",void 0),re(this,"_liveRawStreamingClient",void 0),re(this,"_channelMediaRelayClient",void 0),re(this,"_networkQualitySensitivity","normal"),re(this,"_p2pChannel",void 0),re(this,"_useLocalAccessPoint",!1),re(this,"_setLocalAPVersion",void 0),re(this,"_joinAndNotLeaveYet",!1),re(this,"_numberOfJoinCount",0),re(this,"_joinResponse",null),re(this,"_remoteDefaultVideoStreamType",void 0),re(this,"_inspect",void 0),re(this,"_moderation",void 0),re(this,"_license",void 0),re(this,"_pendingPublishedUsers",[]),re(this,"ntpAlignErrorCount",0),re(this,"remoteInboundOffset",0),re(this,"_peerConnectionState",void 0),re(this,"_handleLocalTrackEnable",(l,d,h)=>{this.publish(l,!1).then(d).catch(h)}),re(this,"_handleLocalTrackDisable",(l,d,h)=>{this.unpublish(l).then(d).catch(h)}),re(this,"_handleUserOnline",l=>{if(me("BLOCK_LOCAL_CLIENT")&&c1(l.uid,this.channelName))return void H.debug("[".concat(l.uid,"] will be ignored in local"));this.isStringUID&&typeof l.uid!="string"&&H.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const d=this._users.find(h=>h.uid===l.uid);if(d)d._trust_in_room_=!0,d._is_pre_created&&(d._is_pre_created=!1,this.safeEmit(un.USER_JOINED,d));else{const h=new hv(l.uid,l.uint_id||l.uid);this._users.push(h),H.debug("[".concat(this._clientId,"] user online"),l.uid),this.store.firstVideoFrameDecoded(h.uid,{userJoinNotify:Date.now()}),this.safeEmit(un.USER_JOINED,h)}}),re(this,"_handleUserOffline",l=>{if(me("BLOCK_LOCAL_CLIENT")&&c1(l.uid,this.channelName))return;const d=this._users.find(h=>h.uid===l.uid);d&&(this._handleRemoveStream(l),this._handleRemoveDataChannels(l),d._audio_pre_subscribed||d._video_pre_subscribed?d._is_pre_created=!0:UI(this._users,d),this._remoteStreamTypeCacheMap.delete(d.uid),this._streamFallbackTypeCacheMap.delete(d.uid),H.debug("[".concat(this._clientId,"] user offline"),l.uid,"reason:",l.reason),this.safeEmit(un.USER_LEAVED,d,l.reason))}),re(this,"_handleAddAudioOrVideoStream",(l,d,h,v,_,y,C,B)=>{if(me("BLOCK_LOCAL_CLIENT")&&c1(d,this.channelName))return;const L=this._users.find(X=>X.uid===d);if(!L)return void H.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));H.debug("[".concat(this._clientId,"] stream added with uid ").concat(d,", type ").concat(l)),this.store.subscribe(L.uid,l,void 0,void 0,void 0,Date.now()),l==="video"&&this.store.firstVideoFrameDecoded(L.uid,{videoAddNotify:Date.now()});const x=l==="audio"?L.hasAudio:L.hasVideo;if(L._uintid||(L._uintid=y||d),l==="audio"?L._trust_audio_stream_added_state_=!0:L._trust_video_stream_added_state_=!0,l==="audio"?(L._audio_added_=!0,h!==void 0&&(L._audioSSRC=h),v!==void 0&&(L._cname=v),C&&(L._audioOrtc=C)):(L._video_added_=!0,h!==void 0&&(L._videoSSRC=h),v!==void 0&&(L._cname=v),B!==void 0&&(L._rtxSsrcId=B),C&&(L._videoOrtc=C)),(l==="audio"?L.hasAudio:L.hasVideo)&&!x&&(H.info("[".concat(this._clientId,"] remote user ").concat(L.uid," published ").concat(l)),this.safeEmit(un.USER_PUBLISHED,L,l)),l==="video"?rr.onGatewayStream(this._sessionId,Yo.ON_ADD_VIDEO_STREAM,Ci.ON_ADD_VIDEO_STREAM,{peer:y||d,ssrc:L._videoSSRC}):rr.onGatewayStream(this._sessionId,Yo.ON_ADD_AUDIO_STREAM,Ci.ON_ADD_AUDIO_STREAM,{peer:y||d,ssrc:L._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(L,l,h).then(X=>{if(X&&(H.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(L.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof YS))return this._p2pChannel.unsubscribe(L,l,!0).then(()=>this._subscribe(L,l,!0).catch(G=>{H.error("[".concat(this._clientId,"] resubscribe error"),G.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(L,l)&&(H.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(L.uid," after reconnect.")),this._subscribe(L,l,!0).catch(X=>{H.error("[".concat(this._clientId,"] resubscribe error"),X.toString())})),l==="video"&&!Js()&&!Fa()){const X=this._getEncodingName(_);(X==null?void 0:X.toLocaleLowerCase())==PS.av1&&wbe().then(G=>{G||this._gateway.downgradeCodec(X)})}}),re(this,"_handleRemoveStream",l=>{if(me("BLOCK_LOCAL_CLIENT")&&c1(l.uid,this.channelName))return;const d=this._users.find(v=>v.uid===l.uid);if(!d)return void H.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));H.debug("[".concat(this._clientId,"] stream removed with uid ").concat(l.uid));let h=()=>{};d.hasAudio&&d.hasVideo?h=()=>{H.info("[".concat(this._clientId,"] remote user ").concat(d.uid," unpublished audio track")),this.safeEmit(un.USER_UNPUBLISHED,d,"audio"),H.info("[".concat(this._clientId,"] remote user ").concat(d.uid," unpublished video track")),this.safeEmit(un.USER_UNPUBLISHED,d,"video")}:d.hasVideo?h=()=>{H.info("[".concat(this._clientId,"] remote user ").concat(d.uid," unpublished video track")),this.safeEmit(un.USER_UNPUBLISHED,d,"video")}:d.hasAudio&&(h=()=>{H.info("[".concat(this._clientId,"] remote user ").concat(d.uid," unpublished audio track")),this.safeEmit(un.USER_UNPUBLISHED,d,"audio")}),d._video_pre_subscribed||d._audio_pre_subscribed||(d._trust_audio_stream_added_state_=!0,d._trust_video_stream_added_state_=!0,d._audio_added_=!1,d._video_added_=!1,this._p2pChannel instanceof YS&&this._p2pChannel.unsubscribe(d).then(v=>{if(v)return this._gateway.unsubscribe(v,d.uid)}),d._audioSSRC=void 0,d._videoSSRC=void 0,d._audioOrtc=void 0,d._videoOrtc=void 0,d._rtxSsrcId=void 0),rr.onGatewayStream(this._sessionId,Yo.ON_REMOVE_STREAM,Ci.ON_REMOVE_STREAM,{peer:l.uint_id||l.uid}),h()}),re(this,"_handleSetStreamLocalEnable",(l,d,h)=>{if(me("BLOCK_LOCAL_CLIENT")&&c1(d,this.channelName))return;const v=this._users.find(C=>C.uid===d);if(!v)return void H.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));H.debug("[".concat(this._clientId,"] local ").concat(l," ").concat(h?"enabled":"disabled"," with uid ").concat(d));const _=l==="audio"?v.hasAudio:v.hasVideo;if(l==="audio"){v._trust_audio_enabled_state_=!0;const C=v._audio_enabled_;if(v._audio_enabled_=h,v._audio_enabled_===C)return;{const B=v._audio_enabled_?"enable-local-audio":"disable-local-audio";H.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(d,", msg: ").concat(B)),this.safeEmit(un.USER_INFO_UPDATED,d,B)}}else{v._trust_video_enabled_state_=!0;const C=v._video_enabled_;if(v._video_enabled_=h,v._video_enabled_===C)return;{const B=v._video_enabled_?"enable-local-video":"disable-local-video";H.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(d,", msg: ").concat(B)),this.safeEmit(un.USER_INFO_UPDATED,d,B)}}const y=l==="audio"?v.hasAudio:v.hasVideo;return _!==y?!_&&y?(H.info("[".concat(this._clientId,"] remote user ").concat(d," published ").concat(l)),void this.safeEmit(un.USER_PUBLISHED,v,l)):(l==="video"&&v._videoTrack&&v._videoTrack._destroy(),l==="audio"&&v._audioTrack,this._p2pChannel.muteRemote(v,l),H.info("[".concat(this._clientId,"] remote user ").concat(d," unpublished ").concat(l)),void this.safeEmit(un.USER_UNPUBLISHED,v,l)):void 0}),re(this,"_handleMuteStream",(l,d,h)=>{if(me("BLOCK_LOCAL_CLIENT")&&c1(l,this.channelName))return;H.debug("[".concat(this._clientId,"] receive mute message"),l,d,h);const v=this._users.find(C=>C.uid===l);if(!v)return void H.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(l));const _=d==="audio"?v.hasAudio:v.hasVideo;if(d==="audio"){v._trust_audio_mute_state_=!0;const C=v._audio_muted_;if(v._audio_muted_=h,v._audio_muted_===C)return;{const B=v._audio_muted_?"mute-audio":"unmute-audio";H.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(l,", msg: ").concat(B)),this.safeEmit(un.USER_INFO_UPDATED,l,B)}}else{v._trust_video_mute_state_=!0;const C=v._video_muted_;if(v._video_muted_=h,v._video_muted_===C)return;{const B=v._video_muted_?"mute-video":"unmute-video";H.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(l,", msg: ").concat(B)),this.safeEmit(un.USER_INFO_UPDATED,l,B)}}const y=d==="audio"?v.hasAudio:v.hasVideo;if(_!==y){if(!_&&y)return(d==="audio"?v._audioSSRC:v._videoSSRC)?(H.info("[".concat(this._clientId,"] remote user ").concat(l," published ").concat(d)),void this.safeEmit(un.USER_PUBLISHED,v,d)):void H.warning("[".concat(this._clientId,"] remote user ").concat(l," receive ").concat(d," unmute message  before add stream message, ").concat(d," SSRC doesn't exist yet."));d==="video"&&v._videoTrack&&!v._video_pre_subscribed&&v._videoTrack._destroy(),d==="audio"&&v._audioTrack,this._p2pChannel.muteRemote(v,d),H.info("[".concat(this._clientId,"] remote user ").concat(l," unpublished ").concat(d)),this.safeEmit(un.USER_UNPUBLISHED,v,d)}}),re(this,"_handleP2PLost",async l=>{H.debug("[".concat(this._clientId,"] receive p2p lost"),l),parseInt(l.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():H.warning("[".concat(this._clientId,"] P2PLost stream not found"),l)}),re(this,"_handleTokenWillExpire",()=>{H.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(un.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),re(this,"_handleBeforeUnload",l=>{l.type==="beforeunload"&&l.returnValue!==void 0&&l.returnValue!==""||(this.leave(),H.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),re(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(un.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const l={downlinkNetworkQuality:0,uplinkNetworkQuality:0};l.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),l.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(un.NETWORK_QUALITY,l)}),re(this,"_handleP2PAddAudioOrVideoStream",(l,d,h,v)=>{const _=this._users.find(C=>C.uid===d);if(!_)return void H.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));H.debug("[".concat(this._clientId,"] stream added with uid ").concat(d,", type ").concat(l)),this.store.subscribe(_.uid,l,void 0,void 0,void 0,Date.now());const y=l==="audio"?_.hasAudio:_.hasVideo;l==="audio"?_._trust_audio_stream_added_state_=!0:_._trust_video_stream_added_state_=!0,l==="audio"?(_._audio_added_=!0,h!==void 0&&(_._audioSSRC=h),v!==void 0&&(_._audioMid=v)):(_._video_added_=!0,h!==void 0&&(_._videoSSRC=h),v!==void 0&&(_._videoMid=v)),(l==="audio"?_.hasAudio:_.hasVideo)&&!y&&(H.info("[".concat(this._clientId,"] remote user ").concat(_.uid," published ").concat(l)),this.safeEmit(un.USER_PUBLISHED,_,l)),this._p2pChannel.hasPendingRemoteMedia(_,l)&&(H.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(_.uid," after reconnect.")),this._subscribe(_,l,!0).catch(C=>{H.error("[".concat(this._clientId,"] resubscribe error"),C.toString())}))}),this._config=r,this._clientId=n||ii(5,"client-"),this.store=new class{constructor(l,d,h,v){Pr(this,"state",void 0),this.state={codec:l,audioCodec:d,mode:h,clientId:v,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,keyMetrics:{publish:[],subscribe:[],firstVideoFrameDecoded:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:t1.Default,hasStartJoinChannel:!1,isABTestSuccess:!1,autoSubscribe:!1,enableInstantMuteRestore:!1}}dispatch(l){this.state=function(d,h){switch(h.type){case Dr.SET_SESSION_ID:return St(St({},d),{},{sessionId:h.sessionId});case Dr.SET_P2P_ID:return St(St({},d),{},{p2pId:h.p2pId});case Dr.SET_UID:return St(St({},d),{},{uid:h.uid});case Dr.SET_INT_UID:return St(St({},d),{},{intUid:h.intUid});case Dr.SET_PUB_ID:return St(St({},d),{},{pubId:h.pubId});case Dr.KEY_METRIC_CLIENT_CREATED:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{clientCreated:h.metric})});case Dr.KEY_METRIC_JOIN_START:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{joinStart:h.metric})});case Dr.KEY_METRIC_PRELOAD_START:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{preloadStart:h.metric})});case Dr.KEY_METRIC_PRELOAD_END:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{preloadEnd:h.metric})});case Dr.KEY_METRIC_JOIN_END:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{joinEnd:h.metric})});case Dr.KEY_METRIC_REQUEST_AP_START:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{requestAPStart:h.metric})});case Dr.KEY_METRIC_REQUEST_AP_END:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{requestAPEnd:h.metric})});case Dr.KEY_METRIC_REQUEST_SUA_END:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{requestSUAEnd:h.metric})});case Dr.KEY_METRIC_BEFORE_CONNECT:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{beforeConnect:h.metric})});case Dr.KEY_METRIC_PEER_RECEIVER:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{peerReceiver:h.metric})});case Dr.KEY_METRIC_SIGNAL_CONNECTED:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{signalConnected:h.metric})});case Dr.KEY_METRIC_JOIN_REQ:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{joinReq:h.metric})});case Dr.KEY_METRIC_JOIN_REP:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{joinRep:h.metric})});case Dr.KEY_METRIC_JOIN_GATEWAY_START:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{joinGatewayStart:h.metric})});case Dr.KEY_METRIC_JOIN_GATEWAY_END:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{joinGatewayEnd:h.metric})});case Dr.KEY_METRIC_PEER_CONNECTION_START:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{peerConnectionStart:h.metric})});case Dr.KEY_METRIC_PEER_CONNECTION_END:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{peerConnectionEnd:h.metric})});case Dr.KEY_METRIC_DESCRIPTION_START:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{descriptionStart:h.metric})});case Dr.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{signalChannelOpen:h.metric})});case Dr.KEY_METRIC_ICE_CONNECTION_END:return St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{iceConnectionEnd:h.metric})});case Dr.KEY_METRIC_PUBLISH:{const v=d.keyMetrics.publish,_=v.findIndex(y=>y.trackId===h.metric.trackId);return _!==-1?(v[_]=St(St({},v[_]),h.metric),St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{publish:[...v]})})):St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{publish:[...d.keyMetrics.publish,h.metric]})})}case Dr.KEY_METRIC_SUBSCRIBE:{const v=d.keyMetrics.subscribe,_=v.findIndex(y=>y.userId===h.metric.userId&&y.type===h.metric.type);return _!==-1?(v[_]=St(St({},v[_]),h.metric),St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{subscribe:[...v]})})):St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{subscribe:[...d.keyMetrics.subscribe,h.metric]})})}case Dr.KEY_METRIC_FIRST_VIDEO_FRAME_DECODED:{const v=d.keyMetrics.firstVideoFrameDecoded,_=v.findIndex(y=>y.userId===h.metric.userId);return _!==-1?(v[_]=St(St({},v[_]),h.metric),St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{firstVideoFrameDecoded:[...v]})})):St(St({},d),{},{keyMetrics:St(St({},d.keyMetrics),{},{firstVideoFrameDecoded:[...d.keyMetrics.firstVideoFrameDecoded,h.metric]})})}case Dr.RESET_FIRST_VIDEO_FRAME_DECODED:return d.keyMetrics.firstVideoFrameDecoded=[],d;case Dr.SET_CLOUD_PROXY_SERVER_MODE:return d.cloudProxyServerMode=h.mode,d;case Dr.RECORD_JOIN_CHANNEL_SERVICE:return typeof h.index!="number"?d.joinChannelServiceRecords=[...d.joinChannelServiceRecords,h.record]:(d.joinChannelServiceRecords[h.index]=St(St({},d.joinChannelServiceRecords[h.index]),h.record),d.joinChannelServiceRecords=[...d.joinChannelServiceRecords]),d;case Dr.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return d.joinChannelServiceRecords=[],d;case Dr.RESET_KEY_METRICS:return d.keyMetrics={publish:[],subscribe:[],firstVideoFrameDecoded:[]},d;case Dr.SET_USE_P2P:return St(St({},d),{},{useP2P:h.val});case Dr.SET_TRANSPORT_TYPE:return St(St({},d),{},{p2pTransport:h.val});default:return d}}(this.state,l)}set autoSubscribe(l){this.state.autoSubscribe=l}get autoSubscribe(){return this.state.autoSubscribe}set enableInstantMuteRestore(l){this.state.enableInstantMuteRestore=l}get enableInstantMuteRestore(){return this.state.enableInstantMuteRestore}set sessionId(l){this.dispatch({type:Dr.SET_SESSION_ID,sessionId:l})}get sessionId(){return this.state.sessionId}set cid(l){this.state.cid=l}get cid(){return this.state.cid}set codec(l){this.state.codec=l}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(l){this.dispatch({type:Dr.SET_P2P_ID,p2pId:l})}get p2pId(){return this.state.p2pId}set dcId(l){this.dispatch({type:Dr.SET_DC_ID,dcId:l})}get dcId(){return this.state.dcId}set uid(l){this.dispatch({type:Dr.SET_UID,uid:l})}get uid(){return this.state.uid}set intUid(l){this.dispatch({type:Dr.SET_INT_UID,intUid:l})}get intUid(){return this.state.intUid}set pubId(l){this.dispatch({type:Dr.SET_PUB_ID,pubId:l})}get pubId(){return this.state.pubId}set cloudProxyServerMode(l){this.dispatch({type:Dr.SET_CLOUD_PROXY_SERVER_MODE,mode:l})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(l){this.dispatch({type:Dr.SET_USE_P2P,val:l})}get useP2P(){return this.state.useP2P}set p2pTransport(l){this.dispatch({type:Dr.SET_TRANSPORT_TYPE,val:l})}get p2pTransport(){return this.state.p2pTransport}set hasStartJoinChannel(l){this.state.hasStartJoinChannel=l}get hasStartJoinChannel(){return this.state.hasStartJoinChannel}set isABTestSuccess(l){this.state.isABTestSuccess=l}get isABTestSuccess(){return this.state.isABTestSuccess}clientCreated(){this.dispatch({type:Dr.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Dr.KEY_METRIC_JOIN_START,metric:Date.now()})}preloadStart(){this.dispatch({type:Dr.KEY_METRIC_PRELOAD_START,metric:Date.now()})}preloadEnd(){this.dispatch({type:Dr.KEY_METRIC_PRELOAD_END,metric:Date.now()})}joinEnd(){this.dispatch({type:Dr.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Dr.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Dr.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}requestSUAEnd(){this.dispatch({type:Dr.KEY_METRIC_REQUEST_SUA_END,metric:Date.now()})}beforeConnect(){this.dispatch({type:Dr.KEY_METRIC_BEFORE_CONNECT,metric:Date.now()})}peerReceiver(){this.dispatch({type:Dr.KEY_METRIC_PEER_RECEIVER,metric:Date.now()})}signalConnected(){this.dispatch({type:Dr.KEY_METRIC_SIGNAL_CONNECTED,metric:Date.now()})}joinReq(){this.dispatch({type:Dr.KEY_METRIC_JOIN_REQ,metric:Date.now()})}joinRep(){this.dispatch({type:Dr.KEY_METRIC_JOIN_REP,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Dr.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Dr.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Dr.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Dr.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}firstVideoFrameDecoded(l,d){this.dispatch({type:Dr.KEY_METRIC_FIRST_VIDEO_FRAME_DECODED,metric:St({userId:l},d)})}descriptionStart(){this.dispatch({type:Dr.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Dr.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Dr.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(l,d,h,v){this.dispatch({type:Dr.KEY_METRIC_PUBLISH,metric:St(St({trackId:l,type:d},h&&{publishStart:h}),v&&{publishEnd:v})})}subscribe(l,d,h,v,_,y,C){this.dispatch({type:Dr.KEY_METRIC_SUBSCRIBE,metric:St(St(St(St(St({userId:l,type:d},h&&{subscribeStart:h}),v&&{subscribeEnd:v}),_&&{firstFrame:_}),y&&{streamAdded:y}),C&&{firstDecoded:C})})}massSubscribe(l,d,h,v){l.forEach(_=>{this.dispatch({type:Dr.KEY_METRIC_SUBSCRIBE,metric:St(St(St({userId:_.userId,type:_.type},d&&{subscribeStart:d}),h&&{subscribeEnd:h}),v&&{firstFrame:v})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(l,d){l.service==="gateway"&&Array.isArray(l.urls)&&(l.urls=l.urls.map(h=>h.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof d!="number"?(this.dispatch({type:Dr.RECORD_JOIN_CHANNEL_SERVICE,record:St(St({},l),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(d<0||d>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Dr.RECORD_JOIN_CHANNEL_SERVICE,record:l,index:d}),d)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Dr.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Dr.RESET_KEY_METRICS})}resetFirstVideoFrameDecoded(){this.dispatch({type:Dr.RESET_FIRST_VIDEO_FRAME_DECODED})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}}(r.codec,r.audioCodec,r.mode,this._clientId),this._leaveMutex=new ga("client-leave",this._clientId),this._publishMutex=new ga("client-publish",this._clientId),this._renewTokenMutex=new ga("client-renewtoken",this._clientId),this._subscribeMutex=new ga("client-subscribe",this._clientId),this.store.clientCreated(),r.proxyServer&&this.setProxyServer(r.proxyServer,!0),r.turnServer&&this.setTurnServer(r.turnServer,!0),H.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(yA," build: ").concat(C5,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),r.clientRoleOptions)try{d5(r.clientRoleOptions),o=Object.assign({},r.clientRoleOptions)}catch(l){H.warning("[".concat(this._clientId,"] ").concat(l.toString()))}var a;this._statsCollector=new zS(this.store),this._statsCollector.onStatsException=(l,d,h)=>{H.warn("[".concat(this._clientId,"] receive exception msg, code: ").concat(l,", msg: ").concat(d,", uid: ").concat(h)),l===bU.VIDEO_ENCODE_FAILED&&this.localTracks.forEach(v=>{v instanceof XI&&me("ENABLE_ENCODE_EXCEPTION")&&v.findClosestProfile()}),this.safeEmit(un.EXCEPTION,{code:l,msg:d,uid:h})},this._statsCollector.onUploadPublishDuration=(l,d,h,v)=>{const _=this._users.find(y=>y.uid===l);_&&(this.store.keyMetrics&&(this.store.firstVideoFrameDecoded(_._uintid,{peerPublishDuration:h,peerPubStatusMs:Date.now()}),this._p2pChannel.reportVideoFirstFrameRender(_)),rr.peerPublishStatus(this._sessionId,{subscribeElapse:v,audioPublishDuration:d,videoPublishDuration:h,peer:_._uintid}))},this._statsCollector.onVideoCodecChanged=l=>{if(me("VIDEO_STANDARD_BITRATE_VERSION")&&(l==="av1"||l==="h265"||l==="h264")){const d=this.localTracks.find(h=>h instanceof hi);d&&d._saveEncodeBitrateRatio!==1&&d.setSaveEncodeBitrateRatio(l==="h264"?me("BASELINE_MORE_H264_BITRATE_RATIO"):void 0)}},this.store.useP2P=r.mode==="p2p",this._gateway=new gbe(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:r.websocketRetryConfig||Ro,httpRetryConfig:r.httpRetryConfig||Ro,forceWaitGatewayResponse:r.forceWaitGatewayResponse===void 0||r.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:r.role,clientRoleOptions:o}),this._configDistribute=new Rbe(this._clientId,this.store),this.store.useP2P?(this._p2pChannel=(a={store:this.store,statsCollector:this._statsCollector},Fg("P2PChannel").create(a)),this._handleP2PEvents()):this._p2pChannel=new YS(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(r,n,o,a,l){let d=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],h=arguments.length>6&&arguments[6]!==void 0&&arguments[6];zn("JOIN_GATEWAY_USE_443PORT_ONLY",d),zn("JOIN_GATEWAY_USE_DUAL_DOMAIN",h);const v=this._gateway.signal.websocket;return v instanceof lU&&(v.use443PortOnly=d,v.tryDoubleDomain=h),async function(_,y,C){LI.get(_)||LI.set(_,[]),PI.get(_)||PI.set(_,y),hp.get(_)||hp.set(_,0);const B=LI.get(_),L=PI.get(_);if(!B||!L)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(hp.get(_)===L){const Ae=bS();B.push(Ae),await Ae.promise}hp.set(_,hp.get(_)+1);for(var x=arguments.length,X=new Array(x>3?x-3:0),G=3;G<x;G++)X[G-3]=arguments[G];const q=await C(...X);return hp.set(_,hp.get(_)-1),hp.get(_)===L-1&&B.length>0&&(B[0].resolve(),B.shift()),hp.get(_)===0&&(LI.set(_,[]),PI.set(_,0),hp.set(_,0)),q}("client.join",me("JOIN_MAX_CONCURRENCY"),this.join.bind(this),r,n,o,a,l)}async join(r,n,o,a,l){const d=++this._numberOfJoinCount;this.store.joinStart(),a&&(this.store.uid=a);const h=(VI||VI||(VI=(window.location.protocol.split(":")[0]||"").toUpperCase(),VI))==="HTTPS",v=i$()?window.isSecureContext:"Browser Not Support";if(!i$()&&!h||!window.isSecureContext){const q="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";H.warning(q)}let _;rr.setAppId(r);try{if(!o&&o!==null)throw new Je(de.INVALID_PARAMS,"Invalid token: ".concat(o,". If you don not use token, set it to null"));if(o&&Ls(o,"token",1,2047),Ls(r,"appid",1,2047),c2(n),a&&l2(a),l)if(typeof l=="string")Ls(l,"optionalInfo",1,256),_=l;else{if(typeof l!="object")throw new Je(de.INVALID_PARAMS,"Invalid options: options is not a string or object");{const{autoSubscribe:q,enableInstantMuteRestore:Ae}=l;q&&(Kf(q,"autoSubscribe"),H.info("[".concat(this._clientId,"] join: autoSubscribe: ").concat(q)),this.store.autoSubscribe=q),Ae&&(Kf(Ae,"enableInstantMuteRestore"),H.info("[".concat(this._clientId,"] join: enableInstantMuteRestore: ").concat(Ae)),this.store.enableInstantMuteRestore=Ae)}}}catch(q){throw rr.reportApiInvoke(e1(),{name:Ji.JOIN,options:[r,n,o,a],states:{isHttps:h,isSecureContext:v},tag:Oi.TRACER}).onError(q),q}if(this._leaveMutex.isLocked&&(H.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),H.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const q=new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw rr.reportApiInvoke(e1(),{name:Ji.JOIN,options:[r,n,o,a],states:{isHttps:h,isSecureContext:v},tag:Oi.TRACER}).onError(q),q}this._gateway.state="CONNECTING",this.store.preloadStart();const y=await nX({appId:r,cname:n,uid:a,stringUid:typeof a=="string"?a:void 0,token:o||r,cloudProxyServer:this._cloudProxyServerMode});if(this.store.preloadEnd(),!this._joinAndNotLeaveYet)throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const C=(y==null?void 0:y.sid)||e1();H.info("[".concat(this._clientId,"] start join channel ").concat(n,", join number: ").concat(d)),this._sessionId||(this._sessionId=C,this.store.sessionId=this._sessionId);const B=rr.reportApiInvoke(C,{id:this._clientId,name:Ji.JOIN,options:[r,n,o,a],states:{isHttps:h,isSecureContext:v},tag:Oi.TRACER}),L=Bd(Bd(Bd({},this._rtmConfig),{},{role:this.role,clientId:this._clientId,appId:r,sid:this._sessionId,cname:n,uid:typeof a!="string"?a:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:o||r,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:_,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!y},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),{},{apRequestDetail:me("AP_REQUEST_DETAIL")||void 0});if(this._useLocalAccessPoint&&(L.setLocalAPVersion=this._setLocalAPVersion),typeof a=="string"&&(L.stringUid=a,this._uintUid?(L.uid=this._uintUid,this._uintUid=void 0):L.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(L.aesmode=this._encryptionMode,L.aespassword=await(async q=>{const Ae=function(Le){const Te=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),ze=new Uint8Array(new ArrayBuffer(Te.length));for(let rt=0;rt<Te.length;rt+=1)ze[rt]=Te.charCodeAt(rt);return ze}(),ue=await window.crypto.subtle.importKey("spki",Ae,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),_e=u5(q),De=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},ue,_e);return function(Le){let Te="";for(let ze=0;ze<Le.length;ze+=1)Te+=String.fromCharCode(Le[ze]);return window.btoa(Te)}(new Uint8Array(De))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(L.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const q=new TextEncoder,Ae=me("USE_PURE_ENCRYPTION_MASTER_KEY")?q.encode(L.appId+this._encryptionSecret+this._encryptionSecret):q.encode(L.appId+L.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(ue,_e,De){const Le=await window.crypto.subtle.importKey("raw",_e,"PBKDF2",!1,["deriveBits","deriveKey"]),Te=ue==="aes-128-gcm2"?128:256,ze=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:h$,hash:"SHA-256",salt:De},Le,Te+Gwe);return new Uint8Array(ze).subarray(Te/8)}(this._encryptionMode,Ae,Z0(this._encryptionSalt)),this._encryptDataStreamKey=await async function(ue,_e,De){const Le=await window.crypto.subtle.importKey("raw",_e,"PBKDF2",!1,["deriveBits","deriveKey"]),Te=ue==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:h$,hash:"SHA-256",salt:De},Le,{name:"AES-GCM",length:Te},!0,["encrypt","decrypt"])}(this._encryptionMode,Ae,Z0(this._encryptionSalt))}else v?H.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):H.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,H.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:n,appId:r,stringUid:L.stringUid});const x=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&x===this._sessionId&&rr.joinChannelTimeout(this._sessionId,5)},5e3);try{var X;let q;const Ae=L.cloudProxyServer;if(_t(X=["proxy3","proxy4","proxy5"]).call(X,Ae)){const Te=me("PROXY_SERVER_TYPE3");Array.isArray(Te)?L.proxyServer=Te[0]:L.proxyServer=Te}if(rr.setProxyServer(L.proxyServer),H.setProxyServer(L.proxyServer),this.store.requestAPStart(),y){if(H.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(L.stringUid?", ".concat(L.stringUid," => ").concat(y.intUid):""," ")),L.stringUid&&!L.uid&&(L.uid=y.intUid),q={gatewayInfo:y.ap.gatewayInfo},me("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&L.turnServer.mode==="auto")if(y.ap.proxyInfo.addresses.length===0)H.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const Te=(await Zq(y.ap.proxyInfo,y.ap.gatewayInfo.uid)).map(ze=>({turnServerURL:ze.address,tcpport:ze.tcpport||ta.tcpport,udpport:ze.udpport||ta.udpport,username:ze.username||ta.username,password:ze.password||ta.password,forceturn:!1,security:!0}));L.turnServer={mode:"manual",servers:Te}}sX(y,L.stringUid)}else{if(L.stringUid&&!L.uid){let Te;[Te,q]=await Mt.all([RY(L.stringUid,L,this._axiosCancelSource.token,this._config.httpRetryConfig||Ro,this.store).finally(()=>{this.store.requestSUAEnd()}),TY(L,this._axiosCancelSource.token,this._config.httpRetryConfig||Ro,!0,this.store).finally(()=>{this.store.requestAPEnd()})]),H.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(L.stringUid," => ").concat(Te)),L.uid=Te,q.gatewayInfo.uid=Te,q.gatewayInfo.res.uid=Te}else q=await TY(L,this._axiosCancelSource.token,this._config.httpRetryConfig||Ro,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(L,this._axiosCancelSource.token),this._configDistribute.on(FS.UPDATE_BITRATE_LIMIT,Te=>{this._p2pChannel.updateBitrateLimit(Te)}),this._configDistribute.on(FS.UPDATE_CLIENT_ROLE_OPTIONS,Te=>{this._setClientRoleOptions(Te)})},0),this._key=o||r;const ue=q.gatewayInfo,_e=L.uid?L.uid:ue.uid;this._joinInfo=Bd(Bd({},L),{},{cid:ue.cid,uid:_e,vid:ue.vid,apResponse:ue.res,apGatewayAddress:ue.apGatewayAddress,uni_lbs_ip:ue.uni_lbs_ip,gatewayAddrs:ue.gatewayAddrs}),this.store.intUid=_e,this.store.cid=ue.cid;const De=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));B.onSuccess(De),this._appId=r,this._channelName=L.cname,this._uid=De,this.store.uid=De,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Js()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);const Le=L.stringUid?"string uid: ".concat(L.stringUid,",uid: ").concat(L.uid):"uid: ".concat(this._uid);return H.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(n,",").concat(Le)),setTimeout(()=>{H.startUpload()},5e3),this.store.joinEnd(),G=this,_t(a1).call(a1,G)||a1.push(G),this._cloudProxyServerMode==="disabled"&&vn().supportWebCrypto&&me("ENABLE_PRELOAD")&&MU(this._joinInfo),De}catch(q){const Ae=Array.isArray(q)?q[0]:q;throw Ae&&Ae.code===de.OPERATION_ABORTED?H.warning("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),Ae):H.error("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),Ae),Ae.code!==de.OPERATION_ABORTED&&this._numberOfJoinCount===d&&(this._gateway.state="DISCONNECTED",this._reset()),B.onError(Ae),Ae}var G}_joinGateway(){if(!this._joinInfo||!this._key)throw new Je(de.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!me("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){H.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Js()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(n){const o=a1.indexOf(n);o!==-1&&a1.splice(o,1)}(this),this._statsCollector.stopUpdateStats();const r=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return H.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void r();await this._gateway.leave(this.connectionState!=="CONNECTED",Dn.LEAVE),H.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),r()}async publish(r){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(r)){if(!(r instanceof Ty))return this._publishDataChannel(r);r=[r]}if(r.length===0)throw new Je(de.INVALID_PARAMS,"param list is empty");const o=r;if(this._gateway.role==="audience")throw new Je(de.INVALID_OPERATION,"audience can not publish stream");for(const l of o){if(!(l instanceof Ty))throw new Je(de.INVALID_PARAMS,"parameter is not local track");if(!l._enabled&&n)throw new Je(de.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(l.getTrackId()))}H.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(o.map(l=>"".concat(l.getTrackId()," "))));const a=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),n&&o.forEach(l=>{const d=this._configDistribute.getBitrateLimit();l instanceof hi&&d&&l.setBitrateLimit(d.uplink)});try{await this._publishHighStream(o),H.info("[".concat(this._clientId,"] Publish success, id ").concat(o.map(l=>"".concat(l.getTrackId()," "))))}catch(l){throw H.error("[".concat(this._clientId,"] publish error"),l.toString()),l}finally{a()}}async _publishDataChannel(r){if(r==null)throw new Je(de.INVALID_PARAMS,"parameter is not local track or datachannel config, config is ".concat(JSON.stringify(r)));Xn(r.id,"id",0,65535,!0),Kf(r.ordered,"ordered"),Ls(r.metadata,"metadata",0,512),H.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(r.id));const n=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(l=>l.id===r.id)!==-1)throw new Je(de.INVALID_PARAMS,"Invalid id: ".concat(r.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new Je(de.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&me("FORCE_TURN")&&!me("TURN_ENABLE_TCP")&&!me("TURN_ENABLE_UDP"))throw new Je(de.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const o=function(l){return mY(l,!1)}(r),a=await this._p2pChannel.publishDataChannel([o]);if(a.length>0){if(typeof o._originDataChannelId!="number")throw H.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new Je(de.CREATE_DATACHANNEL_ERROR);try{await Mt.all(a.map(l=>this._uid&&this._gateway.publishDataChannel(this._uid,l,!0))),await o._waitTillOpen()}catch(l){if(l.code!==de.DISCONNECT_P2P)throw l}}return H.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(o.id)),o}catch(o){throw H.error("[".concat(this._clientId,"] publish datachannels error"),o.toString()),o}finally{n()}}async unpublish(r){if(!this._joinInfo||this._uid===void 0)throw new Je(de.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let n=[];if(r)if(Array.isArray(r))n=r;else{if(!(r instanceof Ty))return this._unpublishDataChannel([r]);n=[r]}else this.store.useP2P||await this._unpublishDataChannel(),n=this._p2pChannel.getAllTracks(!0);H.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(a=>"".concat(a.getTrackId()," "))," "));const o=await this._publishMutex.lock();try{if(this.store.useP2P){const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.sendExtensionMessage(ao.UNPUBLISH,{unpubMsg:a},!0)}else{const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.unpublish(a,this._uid),H.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(l=>"".concat(l.getTrackId()))))}}catch(a){throw H.error("[".concat(this._clientId,"] unpublish error"),a.toString()),a}finally{o&&o()}}async _unpublishDataChannel(r){r!==void 0&&r.length!==0||(r=this._p2pChannel.getAllDataChannels()),H.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(r.map(o=>"".concat(o.id," "))," "));const n=await this._publishMutex.lock();try{const o=await this._p2pChannel.unpublishDataChannel(r);o&&await this._gateway.unpublishDataChannel(o),H.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(r.map(a=>"".concat(a.id))))}catch(o){throw H.error("[".concat(this._clientId,"] unpublish dataChannel error"),o.toString()),o}finally{n&&n()}}async subscribe(r,n,o){if(!(r instanceof hv)){const a=this.remoteUsers.find(l=>l.uid===r);if(!a)throw new Je(de.INVALID_REMOTE_USER,"user is not in the channel");r=a}return n==="datachannel"?this._subscribeDataChannel(r,o):this._subscribe(r,n)}async presubscribe(r,n){if(qo(n,"mediaType",["audio","video"]),this.store.useP2P)throw new Je(de.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new Je(de.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const o=n===jt.AUDIO,a=n===jt.VIDEO,l=await this._subscribeMutex.lock();try{const{ssrcId:d,ortc:h,rtxSsrcId:v,cname:_,uint_id:y}=await this._gateway.presubscribe(r,n,!0);if(d==null)throw new Je(de.UNEXPECTED_RESPONSE,"no ssrc id");let C=this._users.find(L=>L.uid===r);C||(C=new hv(r,y||r),C._is_pre_created=!0,this._users.push(C)),_&&(C._cname=_),C._uintid||(C._uintid=y||r),o&&(C._audioSSRC=d,C._audio_pre_subscribed=!0,h&&(C._audioOrtc=h)),a&&(C._videoSSRC=d,C._video_pre_subscribed=!0,h&&(C._videoOrtc=h),v!=null&&(C._rtxSsrcId=v)),H.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(d)),await this._p2pChannel.subscribe(C,n,d,v,h);const B=o?C._audioTrack:C._videoTrack;if(!B)throw new Je(de.UNEXPECTED_ERROR,"can not find remote track in user");return o&&(C._trust_audio_stream_added_state_=!0,C._audio_added_=!0),a&&(C._trust_video_stream_added_state_=!0,C._video_added_=!0),B}catch(d){throw H.error("[".concat(this._clientId,"] presub user ").concat(r," error"),d),d}finally{l()}}async _subscribeDataChannel(r,n){var o;if(Xn(n,"channelId",0,65535,!0),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(v=>v===r))throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid,", this user is not in the channel")),new Je(de.INVALID_REMOTE_USER,"user is not in the channel");if(!r.hasAudio&&!r.hasVideo&&r._dataChannels.length===0)throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid,", user is not published")),new Je(de.INVALID_REMOTE_USER,"user is not published");const l=(o=r._dataChannels)===null||o===void 0?void 0:o.find(v=>v.id===n);if(!l)throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid," with mediaType datachannel, remote datachannel is not published")),new Je(de.REMOTE_USER_IS_NOT_PUBLISHED);const d=await this._subscribeMutex.lock();H.info("[".concat(this._clientId,"] subscribe user ").concat(r.uid,", mediaType: datachannel"));try{const v=await this._p2pChannel.subscribeDataChannel(r,[l]);if(v&&_t(v).call(v,l.id))try{var h;if(typeof l._originDataChannelId!="number")throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid," with mediaType datachannel, cannot get RTCDatachannel")),new Je(de.CREATE_DATACHANNEL_ERROR);const _={id:l.id,datachannelId:l._originDataChannelId,ordered:l.ordered,maxRetransmits:l.maxRetransmits,metadata:(h=l.metadata)!==null&&h!==void 0?h:""};await this._gateway.subscribeDataChannel(r.uid,_,!0),await l._waitTillOpen()}catch(_){if((_==null?void 0:_.code)!==de.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(r,[l]),_;await this._p2pChannel.unsubscribeDataChannel(r,[l]),this._p2pChannel.setPendingRemoteDataChannel(r,l.id)}return H.info("[".concat(this._clientId,"] subscribe success user ").concat(r.uid,", mediaType: datachannel")),l}finally{d()}}async _p2pSubscribe(r,n,o){if(qo(n,"mediaType",["audio","video"]),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(d=>d===r)){const d=new Je(de.INVALID_REMOTE_USER,"user is not in the channel");throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid,", this user is not in the channel")),d}if(!r.hasAudio&&!r.hasVideo){const d=new Je(de.INVALID_REMOTE_USER,"user is not published");throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid,", user is not published")),d}if(!o&&(n==="audio"&&!r.hasAudio||n==="video"&&!r.hasVideo)){const d=new Je(de.REMOTE_USER_IS_NOT_PUBLISHED);throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid," with mediaType ").concat(n,", remote track is not published")),d}const l=await this._subscribeMutex.lock();H.info("[".concat(this._clientId,"] subscribe user ").concat(r.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(r,n))await this._p2pChannel.unmuteRemote(r,n);else try{const h=n==="audio"?r._audioSSRC:r._videoSSRC,v=n==="audio"?r._audioMid:r._videoMid;this.store.subscribe(r.uid,n,Date.now()),this.store.useP2P&&await this._p2pChannel.subscribe(r,n,h,v)}catch(h){throw h}H.info("[".concat(this._clientId,"] subscribe success user ").concat(r.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(r.uid,this._defaultStreamFallbackType).catch(h=>{H.warning("[".concat(this._clientId,"] auto set fallback failed"),h)});const d=n==="audio"?r._audioTrack:r._videoTrack;if(!d)throw new Je(de.UNEXPECTED_ERROR,"can not find remote track in user object");return d}catch(d){throw H.error("[".concat(this._clientId,"] subscribe user ").concat(r.uid," error"),d),d}finally{l()}}async _subscribe(r,n,o){if(this.store.useP2P)return this._p2pSubscribe(r,n);if(qo(n,"mediaType",["audio","video"]),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(y=>y===r)){const y=new Je(de.INVALID_REMOTE_USER,"user is not in the channel");throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid,", this user is not in the channel")),y}if(!r.hasAudio&&!r.hasVideo){const y=new Je(de.INVALID_REMOTE_USER,"user is not published");throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid,", user is not published")),y}if(!(o||(n!=="audio"||r.hasAudio&&r._audioSSRC!==void 0)&&(n!=="video"||r.hasVideo&&r._videoSSRC!==void 0))){const y=new Je(de.REMOTE_USER_IS_NOT_PUBLISHED);throw H.error("[".concat(this._clientId,"] can not subscribe ").concat(r.uid," with mediaType ").concat(n,", remote track is not published")),y}let l=n==="audio"?r._audioSSRC:r._videoSSRC,d=n==="audio"?r._audioOrtc:r._videoOrtc,h=n==="video"?r._rtxSsrcId:void 0,v={stream_type:n==="audio"?jt.AUDIO:jt.VIDEO,ssrcId:l};n==="video"&&this.store.firstVideoFrameDecoded(r.uid,{subscribeStart:Date.now()});const _=await this._subscribeMutex.lock();H.info("[".concat(this._clientId,"] subscribe user ").concat(r.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(r,n))await this._p2pChannel.unmuteRemote(r,n);else try{const C=n==="audio"?r._audioSSRC:r._videoSSRC;C!==void 0&&C!==l&&(l=C,d=n==="audio"?r._audioOrtc:r._videoOrtc,h=n==="video"?r._rtxSsrcId:void 0,v={stream_type:n==="audio"?jt.AUDIO:jt.VIDEO,ssrcId:l}),ya.markSubscribeStart(this.store.clientId,l),this.store.subscribe(r.uid,n,Date.now()),await this._p2pChannel.subscribe(r,n,l,h,d);try{this._p2pChannel.isPreSubScribe(l)||await this._gateway.subscribe(r.uid,v,!0)}catch(B){if((B==null?void 0:B.code)!==de.WS_ABORT)throw await this._p2pChannel.unsubscribe(r,n),B;await this._p2pChannel.unsubscribe(r,n,!0),this._p2pChannel.setPendingRemoteMedia(r,n)}this.store.subscribe(r.uid,n,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,r,n)}catch(C){throw this._p2pChannel.reportSubscribeEvent(!1,C==null?void 0:C.code,r,n),C}H.info("[".concat(this._clientId,"] subscribe success user ").concat(r.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(r.uid,this._defaultStreamFallbackType).catch(C=>{H.warning("[".concat(this._clientId,"] auto set fallback failed"),C)});const y=n==="audio"?r._audioTrack:r._videoTrack;if(!y)throw new Je(de.UNEXPECTED_ERROR,"can not find remote track in user object");return n==="video"&&(this.store.firstVideoFrameDecoded(r.uid,{subscribeEnd:Date.now()}),this._p2pChannel.reportVideoFirstFrameRender(r)),y}catch(y){throw H.error("[".concat(this._clientId,"] subscribe user ").concat(r.uid," error"),y),y}finally{_()}}async massSubscribe(r){if(xg(r,"subscribeList"),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const n=Date.now(),o=new Map,a=await this._subscribeMutex.lock();H.info("[".concat(this._clientId,"]start massSubscribe user ").concat(r.map(v=>{let{user:_,mediaType:y}=v;return"user: ".concat(_==null?void 0:_.uid,", mediaType: ").concat(y)}).join("; ")));const l=(r=[...r]).map(v=>{let{user:_,mediaType:y}=v;return{user:_,mediaType:y}}),d=await this._p2pChannel.globalLock();try{var h;for(let _=r.length-1;_>=0;_--){const y=r[_],{user:C,mediaType:B}=y;if(qo(B,"mediaType",["audio","video"]),!C){const G=new Je(de.INVALID_PARAMS,"user property does not exist in subscribeList item");throw H.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),G}if(!this._users.find(G=>G===C)){const G=new Je(de.INVALID_REMOTE_USER,"user is not in the channel");H.error("[".concat(this._clientId,"] can not massSubscribe ").concat(C.uid,", this user is not in the channel")),l[_].error=G,r.splice(_,1);continue}if(B==="audio"&&(!C.hasAudio||C._audioSSRC===void 0)||B==="video"&&(!C.hasVideo||C._videoSSRC===void 0)){const G=new Je(de.REMOTE_USER_IS_NOT_PUBLISHED);H.error("[".concat(this._clientId,"] can not subscribe ").concat(C.uid," with mediaType ").concat(B,", remote user is not published")),l[_].error=G,r.splice(_,1);continue}const x=os.Video|os.LwoVideo,X=o.get(C);if(X){if(B==="video"?X&x:X&os.Audio){r.splice(_,1),H.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(C.uid,", mediaType:").concat(B," twice"));continue}o.set(C,X|(B==="video"?x:os.Audio))}else o.set(C,B==="video"?x:os.Audio)}for(let _=r.length-1;_>=0;_--){const y=r[_],{user:C,mediaType:B}=y,L=os.Video|os.LwoVideo;if(this._p2pChannel.hasRemoteMedia(C,B)){await this._p2pChannel.unmuteRemoteNoLock(C,B);const x=o.get(C);o.set(C,B==="video"?x^L:x^os.Audio),r.splice(_,1)}}this.store.massSubscribe(r.map(_=>({userId:_.user.uid,type:_.mediaType})),n);let v=ka(h=Array.from(o.entries())).call(h,(_,y)=>{let[C,B]=y;if(B===0)return _;const L={stream_id:C.uid,stream_type:B};return B&os.Audio&&(L.audio_ssrc=C._audioSSRC),B&os.Video&&(L.video_ssrc=C._videoSSRC),_.push(L),_},[]);try{r.length>0&&await this._p2pChannel.massSubscribeNoLock(r.map(y=>{let{user:C,mediaType:B}=y;return{user:C,mediaType:B,ssrcId:B===jt.VIDEO?C._videoSSRC:C._audioSSRC,rtxSsrcId:B===jt.VIDEO?C._rtxSsrcId:void 0}}));const _=new Map;if(v=v.filter(y=>y.video_ssrc&&!this._p2pChannel.isPreSubScribe(y.video_ssrc)||y.audio_ssrc&&!this._p2pChannel.isPreSubScribe(y.audio_ssrc)||!y.video_ssrc&&!y.audio_ssrc),v.length>0){const y=await this._gateway.subscribeAll(v,!0);((y==null?void 0:y.users)||[]).forEach(C=>{let{stream_id:B,video_error_code:L,audio_error_code:x,error_code:X}=C;(L||x||X)&&_.set(B,{video_error_code:L,audio_error_code:x,error_code:X})})}if(Array.from(_.entries()).length>0){const y=[];Array.from(_.entries()).forEach(C=>{let[B,L]=C;const x=this.remoteUsers.find(X=>X.uid===B);if(x){let X;L.error_code||L.video_error_code&&L.audio_error_code?X=void 0:L.video_error_code?X=jt.VIDEO:L.audio_error_code&&(X=jt.AUDIO),y.push({user:x,mediaType:X})}}),y.length>0&&await this._p2pChannel.massUnsubscribeNoLock(y)}for(const y of l){const C=_.get(y.user.uid);if(C){const B=C.error_code||y.mediaType==="audio"&&C.audio_error_code||y.mediaType==="video"&&C.video_error_code;if(B){const L=VS(B);H.error("user:".concat(y.user.uid," mediaType:").concat(y.mediaType," has massSubscribe error ").concat(L.desc)),y.error=new Je(de.SUBSCRIBE_FAILED,"code ".concat(B,": ").concat(L.desc))}}y.error||(y.mediaType==="video"?y.track=y.user.videoTrack:y.track=y.user.audioTrack)}return this.store.massSubscribe(l.filter(y=>!y.error).map(y=>({userId:y.user.uid,type:y.mediaType})),void 0,Date.now()),l.forEach(y=>{var C;rr.subscribe(this.store.sessionId,{succ:!!y.error,ec:((C=y.error)===null||C===void 0?void 0:C.code)||null,video:y.mediaType===jt.VIDEO,audio:y.mediaType===jt.AUDIO,peerid:y.user.uid,subscribeRequestid:y.mediaType===jt.VIDEO?y.user._videoSSRC:y.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-n),preSsrc:this._p2pChannel.isPreSubScribe(y.user._videoSSRC)},!0)}),H.info("[".concat(this._clientId,"] massSubscribe success ").concat(r.map(y=>{let{user:C,mediaType:B}=y;return"user: ".concat(C==null?void 0:C.uid,", mediaType: ").concat(B)}).join("; "))),l}catch(_){throw await this._p2pChannel.massUnsubscribeNoLock(r),_}}finally{d(),a()}}async unsubscribe(r,n,o){if(!(r instanceof hv)){const d=this.remoteUsers.find(h=>h.uid===r);if(!d)throw new Je(de.INVALID_REMOTE_USER,"user is not in the channel");r=d}if(n||this.store.useP2P){if(n==="datachannel")return this._unsubscribeDataChannel(r,o)}else await this._unsubscribeDataChannel(r,o);if(n&&qo(n,"mediaType",["audio","video"]),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(d=>d===r)){const d=new Je(de.INVALID_REMOTE_USER,"user is not in the channel");throw H.error("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),d}H.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(r.uid,", mediaType: ").concat(n));const l=await this._subscribeMutex.lock();try{if(this.store.useP2P)await this._p2pChannel.unsubscribe(r,n);else{const d=await this._p2pChannel.unsubscribe(r,n);d&&await this._gateway.unsubscribe(d,r.uid),n&&n!=="audio"||(r._audio_pre_subscribed=!1),n&&n!=="video"||(r._video_pre_subscribed=!1),r._is_pre_created&&UI(this._users,r),H.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(r.uid,", mediaType: ").concat(n))}}catch(d){if(d.code===de.DISCONNECT_P2P)return void H.warning("disconnecting p2p, abort unsubscribe request.");throw H.error("[".concat(this._clientId,"] unsubscribe user ").concat(r.uid," error"),d.toString()),d}finally{l()}}async _unsubscribeDataChannel(r,n){if(n&&Xn(n,"id",0,65535,!0),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(l=>l===r)){const l=new Je(de.INVALID_REMOTE_USER,"user is not in the channel");throw H.error("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),l}let a;if(typeof n=="number"){const l=r._dataChannels.find(d=>d.id===n);l&&(a=[l])}else a=r._dataChannels;if(a===void 0){const l=new Je(de.REMOTE_USER_IS_NOT_PUBLISHED);throw H.error("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid," with channelId ").concat(n,", remote datachannel is not published")),l}H.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(r.uid,", mediaType: datachannel, ids: ").concat(a.map(l=>l.id)));try{const l=await this._p2pChannel.unsubscribeDataChannel(r,a);l&&await this._gateway.unsubscribeDataChannel(l,r.uid),H.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(r.uid,", mediaType: datachannel, ids: ").concat(l))}catch(l){if(l.code===de.DISCONNECT_P2P)return void H.warning("disconnecting p2p, abort unsubscribe request.");throw H.error("[".concat(this._clientId,"] unsubscribe user ").concat(r.uid," error"),l.toString()),l}}async massUnsubscribe(r){if(xg(r,"unsubscribeList"),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");H.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(r.map(o=>{let{user:a,mediaType:l}=o;return"user: ".concat(a==null?void 0:a.uid,", mediaType: ").concat(l,";")}).join())),r=[...r];const n=new Map;for(let o=r.length-1;o>=0;o--){const{user:a,mediaType:l}=r[o];if(!a){const v=new Je(de.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw H.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),v}if(qo(l,"mediaType",["video","audio",void 0]),!this._users.find(v=>v===a)){H.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(a.uid,", user is not in the channel")),r.splice(o,1);continue}const h=os.Video|os.LwoVideo;if(n.has(a)){const v=n.get(a);let _;switch(l){case"video":_=v&h;break;case"audio":_=v&os.Audio;break;default:_=v&(os.Audio|h)}if(_){H.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(a.uid,",mediaType:").concat(l," twice.")),r.splice(o,1);continue}l?l==="audio"?n.set(a,v|os.Audio):l==="video"&&n.set(a,v|h):n.set(a,v|os.Audio|h)}else l?l==="audio"?n.set(a,os.Audio):l==="video"&&n.set(a,h):n.set(a,os.Audio|h)}try{const o=await this._p2pChannel.massUnsubscribe(r);o&&await this._gateway.massUnsubscribe(o),H.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(r.map(a=>{let{user:l,mediaType:d}=a;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(d,";")}).join()))}catch(o){if(o.code===de.DISCONNECT_P2P)return void H.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw H.error("[".concat(this._clientId,"] massUnsubscribe error"),o.toString()),o}}async setLowStreamParameter(r){(function(o){if(!o)throw new tt(de.INVALID_PARAMS);ji(o.width)||c5(o.width,"streamParameter.width"),ji(o.height)||c5(o.height,"streamParameter.height"),ji(o.framerate)||c5(o.framerate,"streamParameter.framerate"),ji(o.bitrate)||Xn(o.bitrate,"streamParameter.bitrate")})(r),(!r.width&&r.height||r.width&&!r.height)&&H.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),H.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(r));const n=this._configDistribute.getLowStreamConfigDistribute();if(n&&n.bitrate&&r.bitrate&&n.bitrate<r.bitrate&&(r.bitrate=n.bitrate),this._lowStreamParameter=r,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(r,mt.LocalVideoLowTrack)}async enableDualStream(){if(!vn().supportDualStream)throw rr.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Je(de.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new Je(de.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(r){throw rr.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),r}this._isDualStreamEnabled=!0,rr.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),H.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Je(de.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(mt.LocalVideoLowTrack))try{const r=await this._p2pChannel.unpublishLowStream();r&&await this._gateway.unpublish(r,this._joinInfo.stringUid||this._joinInfo.uid)}catch(r){throw rr.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),r}this._isDualStreamEnabled=!1,rr.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),H.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(r,n){if(function(a){qo(a,"role",["audience","host"])}(r),n&&d5(n),this.mode==="rtc"||this.mode==="p2p")throw H.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new Je(de.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(n&&n.level&&r==="host")throw new Je(de.INVALID_OPERATION,"host mode can not set audience latency level");if(r==="audience"&&this._p2pChannel.hasLocalMedia())throw new Je(de.INVALID_OPERATION,"can not set client role to audience when publishing stream");const o=this._config.role;this._joinInfo&&(this._joinInfo.role=r),r!==o&&me("ENABLE_ROLE_SELECT_EDGE")?(this._gateway.updateClientRole(r,n),this._config.role=r,this._gateway.reconnect("recover",Zs.REGIONAL_DISTRIBUTION)):(await this._gateway.setClientRole(r,n),this._config.role=r),H.info("[".concat(this._clientId,"] set client role to ").concat(r,", level: ").concat(n&&n.level))}async _setClientRoleOptions(r){if(this.mode==="rtc"||this.mode==="p2p"||this._config.role!=="audience"||this._p2pChannel.hasLocalMedia())return;let n=!1;try{r&&d5(r),await this._gateway.setClientRole(this._config.role,r),n=!0}catch{}finally{H.info("[".concat(this._clientId,"] set client role options ").concat(n?"succeed":"failed",", options is ").concat(r))}}getRemoteInboundOffset(){var r;const n=(r=this._p2pChannel.getStats())===null||r===void 0?void 0:r.audioSend[0];if(!n||!n.timestamp)return 0;const o=n.timestamp-Date.now();return Math.abs(o)>1e3+n.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?o:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(r,n){if(Ls(r,"proxyServer"),!n){if(this.connectionState!=="DISCONNECTED")throw new Je(de.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Je(de.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=r,rr.setProxyServer(this._proxyServer),H.setProxyServer(this._proxyServer),H.info("[".concat(this._clientId,"] Set proxy server ").concat(n?"by initialize call":""," success."))}setTurnServer(r,n){if(Array.isArray(r)||(r=[r]),!n){if(this.connectionState!=="DISCONNECTED")throw new Je(de.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Je(de.INVALID_OPERATION,"You have already set the proxy")}if(IS(r))return this._turnServer={servers:r,mode:"original-manual"},void H.info("[".concat(this._clientId,"] Set original turnserver ").concat(n?"by initialize call":""," success: ").concat(r.map(o=>o.urls).join(","),"."));r.forEach(o=>GG(o)),this._turnServer={servers:r,mode:"manual"},H.info("[".concat(this._clientId,"] Set turnserver ").concat(n?"by initialize call":""," success."))}setLicense(r){if(this.connectionState!=="DISCONNECTED")throw new Je(de.INVALID_OPERATION,"you should set license before join channel");if(Ls(r,"license",32,32),!/^[A-Za-z\d]+$/.test(r))throw new Je(de.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=r,H.info("[".concat(this._clientId,"] set license success"),r)}startProxyServer(r){if(this.connectionState!=="DISCONNECTED")throw new Je(de.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new Je(de.INVALID_OPERATION,"You have already set the proxy");const n=[3,4,5];let o;switch(r===void 0&&(r=3),r){case 1:case 2:throw new Je(de.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:o="proxy3";break;case 4:o="proxy4";break;case 5:o="proxy5";break;default:throw new Je(de.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")))}this._cloudProxyServerMode=o,this.store.cloudProxyServerMode=o,H.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new Je(de.INVALID_OPERATION,"Stop proxy server after leave channel");rr.setProxyServer(),H.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",H.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(r){if(!r.accessPoints)throw new Je(de.INVALID_PARAMS,"accessPoints is required.");xg(r.accessPoints.serverList,"accessPoints.serverList"),Ls(r.accessPoints.domain,"accessPoints.domain");const n=(L,x)=>{Xn(L,x,0,65535,!0)};let o=443;if(r.accessPoints.port&&(n(r.accessPoints.port,"accessPoints.port"),o=r.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Je(de.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");me("CLOSE_AFB_FOR_LOCAL_AP")&&(zn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),zn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const a=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=r.accessPoints.domain,d=r.accessPoints.serverList.map(L=>a.test(L)?"".concat(L.replace(/\./g,"-"),".").concat(l):L),h=d.map(L=>"".concat(L,":").concat(o));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,zn("WEBCS_DOMAIN",h),zn("WEBCS_DOMAIN_BACKUP_LIST",h),zn("GATEWAY_DOMAINS",[l]),r.report&&r.report.hostname&&Array.isArray(r.report.hostname)&&r.report.hostname.length?(xg(r.report.hostname,"report.hostname"),zn("EVENT_REPORT_DOMAIN",r.report.hostname[0]),zn("EVENT_REPORT_BACKUP_DOMAIN",r.report.hostname[1]||r.report.hostname[0])):(zn("EVENT_REPORT_DOMAIN",d[0]),zn("EVENT_REPORT_BACKUP_DOMAIN",d[1]||d[0]));let v=6443;r.report&&r.report.port&&(n(r.report.port,"report.port"),v=r.report.port),zn("STATS_COLLECTOR_PORT",v),r.report?zn("ENABLE_EVENT_REPORT",!0):zn("ENABLE_EVENT_REPORT",!1);let _="";r.log&&r.log.hostname&&Array.isArray(r.log.hostname)&&r.log.hostname.length?(xg(r.log.hostname,"log.hostname"),_=r.log.hostname[0]):_=d[0];let y=6444;r.log&&r.log.port&&(n(r.log.port,"log.port"),y=r.log.port),zn("LOG_UPLOAD_SERVER","".concat(_,":").concat(y));let C=[];r.cds&&r.cds.hostname&&Array.isArray(r.cds.hostname)&&r.cds.hostname.length?(xg(r.cds.hostname,"cds.hostname"),C=r.cds.hostname):C=d;let B=443;r.cds&&r.cds.port&&(n(r.cds.port,"cds.port"),B=r.cds.port),zn("CDS_AP",C.map(L=>"".concat(L,":").concat(B))),r.cds?zn("ENABLE_CONFIG_DISTRIBUTE",!0):zn("ENABLE_CONFIG_DISTRIBUTE",!1),H.info("set local access point v2 success")}setLocalAccessPoints(r,n){if(xg(r,"serverList"),Ls(n,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Je(de.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const o=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;r=r.map(a=>o.test(a)?"".concat(a.replace(/\./g,"-"),".").concat(n):a),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,zn("WEBCS_DOMAIN",r),zn("WEBCS_DOMAIN_BACKUP_LIST",r),zn("GATEWAY_DOMAINS",[n]),zn("EVENT_REPORT_DOMAIN",r[0]),zn("EVENT_REPORT_BACKUP_DOMAIN",r[1]||r[0]),zn("LOG_UPLOAD_SERVER","".concat(r[0],":6444")),H.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(r){if(qo(r,"streamType",[0,1,4,5,6,7,8,9]),this._remoteDefaultVideoStreamType=r,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(r),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(n){throw H.error("[".concat(this._clientId,"] set default remote video stream type error"),n.toString()),n}else H.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(r))}async setRemoteVideoStreamType(r,n){qo(n,"streamType",[0,1,4,5,6,7,8,9]);try{await this._gateway.setRemoteVideoStreamType(r,n),setTimeout(()=>{const o=this._users.find(a=>a.uid===r);o&&o.videoTrack&&o.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(o){throw H.error("[".concat(this._clientId,"] set remote video stream type error"),o.toString()),o}H.info("[".concat(this._clientId,"] set remote ").concat(r," video stream type to ").concat(n)),this._remoteStreamTypeCacheMap.set(r,n)}async setStreamFallbackOption(r,n){qo(n,"fallbackType",[0,1,2,3,4,5,6,7,8]);try{await this._gateway.setStreamFallbackOption(r,n)}catch(o){throw H.error("[".concat(this._clientId,"] set stream fallback option"),o.toString()),o}H.info("[".concat(this._clientId,"] set remote ").concat(r," stream fallback type to ").concat(n)),this._streamFallbackTypeCacheMap.set(r,n)}setEncryptionConfig(r,n,o,a){(function(d){qo(d,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(r),Ls(n,"secret");const l=["aes-128-gcm2","aes-256-gcm2"];if(_t(l).call(l,r)){if(!o||!(o instanceof Uint8Array&&o.length===32))throw new Je(de.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(o)throw new Je(de.INVALID_PARAMS,"current encrypt mode does not need salt");if(a){if(Kf(a,"encryptDataStream"),!_t(l).call(l,r))throw new Je(de.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(n)||H.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=r,this._encryptionSecret=n,o&&(this._encryptionSalt=nv(o))}async renewToken(r){if(Ls(r,"token",1,2047),!this._key||!this._joinInfo)throw new Je(de.INVALID_OPERATION,"renewToken should not be called before user join");const n=this._key;this._key=r,this._joinInfo&&(this._joinInfo.token=r);const o=await this._renewTokenMutex.lock();try{if(me("USE_NEW_TOKEN")){H.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const a=await Tbe(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Ro);H.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:r,ticket:a})}else H.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:r});H.debug("[".concat(this._clientId,"] renewToken success"))}catch(a){throw this._key=n,this._joinInfo.token=n,H.error("[".concat(this._clientId,"] renewToken failed"),a.toString()),a}finally{o()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?H.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const r=this._p2pChannel.getAudioLevels();this.safeEmit(un.VOLUME_INDICATOR,r)},me("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const r=this._statsCollector.getRTCStats(),n=this._gateway.getInChannelInfo();return r.Duration=Math.round(n.duration/1e3),r}async startLiveStreaming(r,n){if(!n){if(this.codec!=="h264")throw new Je(de.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new Je(de.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(r)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(r))throw new Je(de.LIVE_STREAMING_TASK_CONFLICT);const o=n?yp.TRANSCODE:yp.RAW;return this._createLiveStreamingClient(o).startLiveStreamingTask(r,o)}setLiveTranscoding(r){return this._createLiveStreamingClient(yp.TRANSCODE).setTranscodingConfig(r)}async stopLiveStreaming(r){const n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(o=>o&&o.hasUrl(r));if(!n.length)throw new Je(de.INVALID_PARAMS,"can not find live streaming url to stop");await Mt.all(n.map(o=>o&&o.stopLiveStreamingTask(r)))}async startChannelMediaRelay(r){PY(r),await this._createChannelMediaRelayClient().startChannelMediaRelay(r)}async updateChannelMediaRelay(r){PY(r),await this._createChannelMediaRelayClient().updateChannelMediaRelay(r)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendAudioMetadata(r){this._p2pChannel instanceof YS&&this._p2pChannel.addAudioMetadata(r)}async sendStreamMessage(r){var n;let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new Je(de.INVALID_OPERATION,"can not send data stream, not joined");if((typeof r=="string"||r instanceof Uint8Array)&&(r={payload:r}),typeof r.payload=="string"){const l=new TextEncoder;r.payload=l.encode(r.payload)}let a=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&_t(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)&&(a=!0,r.payload=await async function(l,d,h){var v;const _=ka(v=Array.from(h)).call(v,(G,q)=>G+q,0),y={serverTs:0,seq:$we++,length:h.length,checkSum:_},C=new Uint8Array(e$(_,2)),B=new ArrayBuffer(yy),L=new DataView(B);L.setUint32(0,y.serverTs),L.setUint16(4,y.seq),L.setUint16(6,y.length),L.setUint16(8,y.checkSum);const x=16-h.length%16;h=qG(h,new Uint8Array(x));const X=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l,tagLength:f$,additionalData:C},d,h);return qG(new Uint8Array(B),new Uint8Array(X))}(this._encryptDataStreamIv,this._encryptDataStreamKey,r.payload)),new Blob([r.payload]).size>1024)throw new Je(de.INVALID_PARAMS,a?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(Cr.DATA_STREAM,{payload:nv(r.payload),syncWithAudio:r.syncWithAudio,sendTs:Date.now()-kbe},!o)}sendMetadata(r){if(!this._joinInfo)throw new Je(de.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([r]).size>1024)throw new Je(de.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Cr.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:nv(r)})}async sendCustomReportMessage(r){if(Array.isArray(r)||(r=[r]),r.forEach(rSe),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"can not send custom report, not joined");await rr.sendCustomReportMessage(this._joinInfo.sid,r)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){const r=this._statsCollector.getRemoteNetworkQualityStats();if(me("DELETE_NEQ_AFTER_USER_LEAVE")){const n=this._users.map(o=>o.uid+"");Object.keys(r).forEach(o=>{_t(n).call(n,o)||delete r[o]})}return r}async pickSVCLayer(r,n){qo(n.spatialLayer,"spatialLayer",[0,1,2,3]),qo(n.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(r,n)}catch(o){throw H.error("[".concat(this._clientId,"] pick SVC layer failed"),o.toString()),o}}async setRTMConfig(r){const{apRTM:n=!1,rtmFlag:o}=r;if(Kf(n,"apRTM"),Xn(o,"rtmFlag",0),this._rtmConfig.apRTM=n,this._rtmConfig.rtmFlag=o,H.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(r)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=n,this._joinInfo.rtmFlag=o,this._gateway.setRTM2Flag(o)}_reset(){if(H.debug("[".concat(this._clientId,"] reset client")),function(r){const n=Ly.indexOf(r);n!==-1&&Ly.splice(n,1)}(this._clientId),this.store.hasStartJoinChannel=!1,this.store.isABTestSuccess=!1,this.store.autoSubscribe=!1,this._axiosCancelSource.cancel(),this._axiosCancelSource=Yc.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&oX(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId&&rr.removeSid(this._sessionId),this._sessionId=null,this.store.sessionId=null,this.store.resetFirstVideoFrameDecoded(),this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(r=>{r._audioTrack&&r._audioTrack._destroy(),r._videoTrack&&r._videoTrack._destroy(),r._dataChannels&&(r._dataChannels.forEach(n=>n._close()),r._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new ga("client-publish",this._clientId),this._subscribeMutex=new ga("client-subscribe",this._clientId),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(r,n){var o;const a=r||e1();r?H.debug("[".concat(this._clientId,"] new Session ").concat(a)):H.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(a));const l=r?"":this._sessionId||"";this._sessionId=a,this.store.sessionId=a,rr.addSid(a);const d={lts:new Date().getTime(),mode:this.mode,buildFormat:1,stringUid:(n==null?void 0:n.stringUid)||((o=this._joinInfo)===null||o===void 0?void 0:o.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:l,clientRole:this.role==="audience"?2:1};rr.sessionInit(this._sessionId,Bd({cname:n.channel,appid:n.appId},d)),this._joinInfo&&(this._joinInfo.sid=a),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=a)}async _publishHighStream(r){if(!this._joinInfo||this._uid===void 0)throw new Je(de.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&me("FORCE_TURN")&&!me("TURN_ENABLE_TCP")&&!me("TURN_ENABLE_UDP"))throw new Je(de.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");H.debug("[".concat(this._clientId,"] publish high stream"));try{const o=await this._p2pChannel.publish(r,this._isDualStreamEnabled,this._lowStreamParameter);if(this.store.useP2P){const a=(await o.next()).value;if(a){try{await this._gateway.sendExtensionMessage(ao.PUBLISH,a,!0)}catch(l){throw o.throw(l),l}await o.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const a=(await o.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(d){if(d.code!==de.DISCONNECT_P2P)throw o.throw(d),d}await o.next(((n=l)===null||n===void 0?void 0:n.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of r)l instanceof hi&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig).catch(d=>{H.debug("[".concat(this._clientId,"] stop setVideoProfile, because websocket is closed"))}),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,r),(o==null?void 0:o.code)===de.WS_ABORT)return;throw o}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new Je(de.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Je(de.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));H.debug("[".concat(this._clientId,"] publish low stream"));const r=this._configDistribute.getLowStreamConfigDistribute();r&&r.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&r.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=r.bitrate));try{const o=await this._p2pChannel.publishLowStream(this._lowStreamParameter),a=(await o.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(d){if(d.code!==de.DISCONNECT_P2P)throw o.throw(d),d}o.next(((n=l)===null||n===void 0?void 0:n.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,void 0,!0),(o==null?void 0:o.code)===de.WS_ABORT)return;throw o}}_createLiveStreamingClient(r){const n=()=>{if(!this._joinInfo||!this._appId)return new Je(de.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const o=(a={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},Fg("LiveStreaming").create(a));var a;return o.onLiveStreamError=(l,d)=>{rr.reportApiInvoke(this._sessionId,{name:Ji.ON_LIVE_STREAM_ERROR,options:[l,d],tag:Oi.TRACER}).onSuccess(),this.safeEmit(un.LIVE_STREAMING_ERROR,l,d)},o.onLiveStreamWarning=(l,d)=>{rr.reportApiInvoke(this._sessionId,{name:Ji.ON_LIVE_STREAM_WARNING,options:[l,d],tag:Oi.TRACER}).onSuccess(),this.safeEmit(un.LIVE_STREAMING_WARNING,l,d)},o.on(sU.REQUEST_WORKER_MANAGER_LIST,(l,d,h)=>{if(!this._joinInfo)return h(new Je(de.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(v,_,y,C){const B=me("UAP_AP").slice(0,me("AJAX_REQUEST_CONCURRENT")).map(L=>_.proxyServer?"https://".concat(_.proxyServer,"/ap/?url=").concat(L+"/api/v1?action=uap"):"https://".concat(L,"/api/v1?action=uap"));return await _be(B,v,_,y,C)})(l,this._joinInfo,this._axiosCancelSource.token,Ro).then(d).catch(h)}),o};return r===yp.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||n(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||n(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new Je(de.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:o}=this.getLocalVideoStats(),a=(r={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:n,height:o}},Fg("ChannelMediaRelay").create(r));a.on("state",l=>{l===bl.RELAY_STATE_FAILURE&&a&&a.dispose(),this.safeEmit(un.CHANNEL_MEDIA_RELAY_STATE,l)}),a.on("event",l=>{this.safeEmit(un.CHANNEL_MEDIA_RELAY_EVENT,l)}),this._channelMediaRelayClient=a,this._statsCollector.onStatsChanged=(l,d)=>{var h;l==="resolution"&&((h=this._channelMediaRelayClient)===null||h===void 0||h.setVideoProfile(d))}}var r;return this._channelMediaRelayClient}_handleUpdateDataChannel(r,n){const{added:o,deleted:a}=r,l=[];if(n){const d=[];this._users.forEach(h=>{h._dataChannels.forEach(v=>{o.every(_=>_.uid!==h._uintid||_.stream_id!==v.id)&&d.push({uid:h._uintid,stream_id:v.id,ordered:v.ordered,max_retrans_times:v.maxRetransmits,metadata:v.metadata})})}),d.length>0&&this._handleUpdateDataChannel({added:[],deleted:d})}Array.isArray(o)&&o.length>0&&o.forEach(d=>{const{uid:h,stream_id:v,ordered:_,max_retrans_times:y,metadata:C}=d,B=this._users.find(L=>L._uintid===h);if(!B)return void H.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(H.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(h)),_t(l).call(l,B)||l.push(B),B._uintid||(B._uintid=h),B._dataChannels.findIndex(L=>L.id===d.stream_id)===-1){const L={id:v,ordered:!!_,maxRetransmits:y,metadata:C},x=function(X){return mY(X,!0)}(L);B._dataChannels.push(x),H.info("[".concat(this._clientId,"] remote user ").concat(B.uid," published datachannel")),n||this.safeEmit(un.USER_PUBLISHED,B,"datachannel",L)}this._p2pChannel.hasPendingRemoteDataChannel(B,d.stream_id)&&(H.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(B.uid," after reconnect.")),this._subscribeDataChannel(B,d.stream_id).catch(L=>{H.error("[".concat(this._clientId,"] resubscribe datachannel error"),L.toString())}))}),n&&(this.safeEmit(un.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(a)&&a.length>0&&a.forEach(d=>{const{uid:h,stream_id:v}=d,_=this._users.find(C=>C._uintid===h);if(!_)return void H.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const y=_._dataChannels.find(C=>C.id===d.stream_id);y&&(H.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(h)),this._p2pChannel.unsubscribeDataChannel(_,[y]).then(C=>{if(_._dataChannels=_._dataChannels.filter(B=>B!==y),C)return this._gateway.unsubscribeDataChannel(C,_.uid)}),H.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished datachannel ,id:").concat(y.id)),this.safeEmit(un.USER_UNPUBLISHED,_,"datachannel",y._config))})}_getEncodingName(r){var n;if(!this._joinResponse)return;const o=(n=this._joinResponse.ortc.rtpCapabilities.sendrecv)===null||n===void 0?void 0:n.videoCodecs;if(o)for(const l of o){var a;if(l.payloadType===r)return l==null||(a=l.rtpMap)===null||a===void 0?void 0:a.encodingName}}_handleRemoveDataChannels(r){const n=this._users.find(o=>o.uid===r.uid);if(n){if(n._dataChannels!==void 0&&n._dataChannels.length>0){H.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(r.uid));const o=()=>{H.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished datachannel")),n._dataChannels.forEach(a=>{this.safeEmit(un.USER_UNPUBLISHED,n,"datachannel",a._config)})};this._p2pChannel.unsubscribeDataChannel(n,n._dataChannels).then(a=>{if(a)return this._gateway.unsubscribeDataChannel(a,n.uid)}),o()}}else H.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(fs.UPDATE_GATEWAY_CONFIG,()=>{(function(){let r;try{r=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void H.error("Error loading sdk config",n.message)}if(r)try{const n=JSON.parse(window.atob(r)),o=Date.now();Object.keys(n).forEach(a=>{const{value:l,type:d,expires:h}=n[a];h&&h<=o||d||Z5()||!Object.prototype.hasOwnProperty.call(jI,a)||(Gf[a]=l,bi[a]=l,H.debug("Update gateway parameters from config distribute",a,l))})}catch(n){H.error("Error update config from local cache",n.message)}})()}),this._gateway.on(fs.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(fs.CONNECTION_STATE_CHANGE,(r,n,o)=>{var a;if(o===Dn.FALLBACK)return;const l=()=>{this.safeEmit(un.CONNECTION_STATE_CHANGE,r,n,o)};if(rr.reportApiInvoke(this._sessionId||((a=this._gateway.joinInfo)===null||a===void 0?void 0:a.sid)||null,{name:Ji.CONNECTION_STATE_CHANGE,options:[r,n,o],tag:Oi.TRACER}).onSuccess(JSON.stringify({cur:r,prev:n,reason:o})),H.info("[".concat(this._clientId,"] signal connection state change: ").concat(n," -> ").concat(r)),r==="DISCONNECTED")return this._reset(),void l();if(r==="RECONNECTING")this._users.forEach(h=>{h._trust_in_room_=!1,h._trust_audio_enabled_state_=!1,h._trust_video_enabled_state_=!1,h._trust_audio_mute_state_=!1,h._trust_video_mute_state_=!1,h._trust_audio_stream_added_state_=!1,h._trust_video_stream_added_state_=!1,h._is_pre_created||(h._audio_pre_subscribed||(h._audioSSRC=void 0,h._audioOrtc=void 0),h._video_pre_subscribed||(h._videoSSRC=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0),h._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(r==="CONNECTED"){var d;this._streamFallbackTypeCacheMap.forEach((h,v)=>{this._gateway.setStreamFallbackOption(v,h).catch(_=>{H.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),_)})}),this._remoteStreamTypeCacheMap.forEach((h,v)=>{this._gateway.setRemoteVideoStreamType(v,h).catch(_=>{H.warning("[".concat(this._clientId,"] auto set remote stream type failed"),_)})}),this._remoteDefaultVideoStreamType!==void 0&&((d=this._joinInfo)===null||d===void 0?void 0:d.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{H.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(h=>{H.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(h))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(h=>!h._trust_in_room_).forEach(h=>{H.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(h.uid)),this._handleUserOffline({uid:h.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(h=>{h._trust_audio_mute_state_||(H.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,jt.AUDIO,!1)),h._trust_video_mute_state_||(H.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,jt.VIDEO,!1)),h._trust_audio_enabled_state_||(H.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(h.uid)),this._handleSetStreamLocalEnable("audio",h.uid,!0)),h._trust_video_enabled_state_||(H.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(h.uid)),this._handleSetStreamLocalEnable("video",h.uid,!0)),h._trust_video_stream_added_state_||(H.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(h.uid)),this._handleResetAddStream(h,"video")),h._trust_audio_stream_added_state_||(H.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(h.uid)),this._handleResetAddStream(h,"audio")),h._video_added_||h._audio_added_||(H.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(h.uid)),this._handleRemoveStream({uid:h.uid,uint_id:h._uintid}))}))},1e3))}l()}),this._gateway.on(fs.REQUEST_NEW_GATEWAY_LIST,async(r,n)=>{if(!this._joinInfo)return n(new Je(de.UNEXPECTED_ERROR,"can not recover, no join info"));try{let o;const a=await nX(Bd(Bd({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));a?(o=a.ap,sX(a),this._joinInfo.preload=!0):(o=await wU(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Ro,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=o.gatewayInfo.res,this._joinInfo.gatewayAddrs=o.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=o.gatewayInfo.uni_lbs_ip);const l=[];o.gatewayInfo.gatewayAddrs.forEach(d=>{let{address:h}=d;const[v,_]=h.split(":");this._joinInfo&&this._joinInfo.proxyServer?l.push({proxy:this._joinInfo.proxyServer,host:v,port:_}):l.push({host:v,port:_})}),r(l)}catch(o){n(o)}}),this._gateway.on(fs.NETWORK_QUALITY,r=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(un.NETWORK_QUALITY,r)}),this._gateway.on(fs.STREAM_TYPE_CHANGE,(r,n)=>{this.safeEmit(un.STREAM_TYPE_CHANGED,r,n),rr.reportApiInvoke(this._sessionId,{name:Ji.STREAM_TYPE_CHANGE,options:[r,n],tag:Oi.TRACER}).onSuccess(JSON.stringify({uid:r,streamType:n}))}),this._gateway.isPreSub=()=>"isPreSub"in this._p2pChannel&&this._p2pChannel.isPreSub(),this._gateway.isPreallocation=()=>"isPreallocation"in this._p2pChannel&&this._p2pChannel.isPreallocation(),this._gateway.on(fs.IS_P2P_DISCONNECTED,r=>{this._p2pChannel.isP2PDisconnected()?r(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?r(!1):r(!0)}),this._gateway.on(fs.REQUEST_P2P_CONNECTION_PARAMS,async(r,n,o)=>{try{let a=await this._p2pChannel.getEstablishParams();a&&"isPreallocation"in this._p2pChannel&&this._p2pChannel.isPreallocation()||(a=await this._p2pChannel.startP2PConnection(r)),n(a)}catch(a){o(a)}}),this._gateway.on(fs.JOIN_RESPONSE,(r,n)=>{if(this.store.useP2P)return;let o;this._joinResponse=r,r.attributes?o=r.attributes.userAttributes.preSubSsrcs:H.debug("no attributes in joinResponse");const a=oY(r.ortc,n,o);this._p2pChannel.connect(a)}),this._gateway.on(fs.PRE_CONNECT_PC,async r=>{const{candidates:n,fingerprint:o,turnServer:a}=r;if(this._joinInfo&&n.length>0&&!this._p2pChannel.isPlanB){const{cert:d,cid:h}=this._joinInfo.apResponse,v="".concat(h,"_").concat(d);if(v.length<4||v.length>256)return;await this._p2pChannel.startP2PConnection({turnServer:a,cloudProxyServer:this._joinInfo.cloudProxyServer,isPreallocation:!0});try{var l;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(h,"_").concat(d),icePwd:"".concat(h,"_").concat(d)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(l=me("FINGERPRINT"))!==null&&l!==void 0?l:o}]},candidates:n,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}catch(_){_.code&&_.code===de.EXCHANGE_SDP_FAILED&&await this._p2pChannel.startP2PConnection({turnServer:a,cloudProxyServer:this._joinInfo.cloudProxyServer},!0)}}})}_handleGatewaySignalEvents(){this._gateway.signal.on(An.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(An.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(An.ON_ADD_AUDIO_STREAM,r=>this._handleAddAudioOrVideoStream("audio",r.uid,r.ssrcId,r.cname,r.pt,r.uint_id,r.ortc)),this._gateway.signal.on(An.ON_ADD_VIDEO_STREAM,r=>this._handleAddAudioOrVideoStream("video",r.uid,r.ssrcId,r.cname,r.pt,r.uint_id,r.ortc,r.rtxSsrcId)),this._gateway.signal.on(An.ON_REMOTE_DATASTREAM_UPDATE,r=>{this._handleUpdateDataChannel(r)}),this._gateway.signal.on(An.ON_REMOTE_FULL_DATASTREAM_INFO,r=>{this._handleUpdateDataChannel({added:r.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(An.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(An.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(An.MUTE_AUDIO,r=>this._handleMuteStream(r.uid,jt.AUDIO,!0)),this._gateway.signal.on(An.UNMUTE_AUDIO,r=>this._handleMuteStream(r.uid,jt.AUDIO,!1)),this._gateway.signal.on(An.MUTE_VIDEO,r=>this._handleMuteStream(r.uid,jt.VIDEO,!0)),this._gateway.signal.on(An.UNMUTE_VIDEO,r=>this._handleMuteStream(r.uid,jt.VIDEO,!1)),this._gateway.signal.on(An.RECEIVE_METADATA,r=>{const n=Z0(r.metadata);this.safeEmit(un.RECEIVE_METADATA,r.uid,n)}),this._gateway.signal.on(An.ON_DATA_STREAM,async r=>{var n;if(!r)return;let o=Z0(r.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&_t(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)){if(r.payload.length<yy)throw new Je(de.UNEXPECTED_RESPONSE,"payload length ".concat(r.payload.length," is less than header length ").concat(yy));o=await async function(d,h,v){const _=v.subarray(0,yy),y=_.slice(8,yy),C=(y[0]<<8)+y[1],B=(_[6]<<8)+_[7],L=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:d,tagLength:f$,additionalData:new Uint8Array(e$(C,2))},h,v.subarray(yy));return new Uint8Array(L).subarray(0,B)}(this._encryptDataStreamIv,this._encryptDataStreamKey,o)}let a=0;if(r.ordered||r.syncWithAudio){const l=this._p2pChannel.getStats(),d=this.remoteUsers.find(v=>v.uid===r.uid),h=l==null?void 0:l.audioRecv.find(v=>v.ssrc===(d==null?void 0:d._audioSSRC));a=h==null?void 0:h.jitterBufferMs}(a==null||Number.isNaN(a))&&(a=0),xbe(Bd(Bd({},r),{},{payload:o}),a,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(An.ON_CRYPT_ERROR,()=>{rv(()=>{H.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(un.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(An.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(An.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{H.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Dn.TOKEN_EXPIRE),this.safeEmit(un.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(An.ON_STREAM_FALLBACK_UPDATE,r=>{H.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(r.stream_id,", attr: ").concat(r.stream_type)),this.safeEmit(un.STREAM_FALLBACK,r.stream_id,r.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(An.ON_PUBLISH_STREAM,r=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:r.proxy})),H.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(r))))}),this._gateway.signal.on(An.ENABLE_LOCAL_VIDEO,r=>{this._handleSetStreamLocalEnable("video",r.uid,!0)}),this._gateway.signal.on(An.DISABLE_LOCAL_VIDEO,r=>{this._handleSetStreamLocalEnable("video",r.uid,!1)}),this._gateway.signal.on(Br.REQUEST_TIMEOUT,(r,n)=>{if(this._joinInfo)switch(r){case Cr.PUBLISH:{if(!n)return;const l=n.ortc;if(l){var o,a;const d=l.some(_=>{let{stream_type:y}=_;return y===Fn.Audio}),h=l.some(_=>{let{stream_type:y}=_;return y!==Fn.Audio}),v=l.some(_=>{let{stream_type:y}=_;return y===Fn.Screen||y===Fn.ScreenLow});n.state==="offer"&&rr.publish(this._joinInfo.sid,{eventElapse:ya.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:de.TIMEOUT,audio:d,video:h,p2pid:n.p2p_id,publishRequestid:this.store.pubId,screenshare:v,audioName:d?(o=l.find(_=>{let{stream_type:y}=_;return y===Fn.Audio}))===null||o===void 0||(o=o.ssrcs[0])===null||o===void 0?void 0:o.ssrcId.toString():void 0,videoName:h?(a=l.find(_=>{let{stream_type:y}=_;return y!==Fn.Audio}))===null||a===void 0||(a=a.ssrcs[0])===null||a===void 0?void 0:a.ssrcId.toString():void 0})}break}case Cr.SUBSCRIBE:n&&rr.subscribe(this._joinInfo.sid,{succ:!1,ec:de.TIMEOUT,audio:n.stream_type===jt.AUDIO,video:n.stream_type===jt.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:this.store.p2pId,eventElapse:ya.measureFromSubscribeStart(this.store.clientId,n.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(n.ssrcId)})}}),this._gateway.signal.on(An.ON_P2P_OK,r=>{this.uid,this._uid}),this._gateway.signal.on(An.ON_PUBLISHED_USER_LIST,r=>{if(r==null||!r.users)return;me("BLOCK_LOCAL_CLIENT")&&(r.users=r.users.filter(a=>!c1(a.string_id||a.stream_id,this.channelName)));const n=[],o=[];for(const a of r.users){let l=this._users.find(C=>C._uintid===a.stream_id);l?l._trust_in_room_=!0:(l=new hv(a.string_id||a.stream_id,a.stream_id),this._users.push(l),this.store.firstVideoFrameDecoded(l.uid,{userJoinNotify:Date.now()}),this.getListeners(un.PUBLISHED_USER_LIST).length===0&&(H.debug("[".concat(this._clientId,"] user online"),a.stream_id),this.safeEmit(un.USER_JOINED,l)));const d=os.Audio&a.stream_type,h=(os.Video|os.LwoVideo)&a.stream_type,v=(65280&a.stream_type)!=0,_=d&&l.hasAudio,y=h&&l.hasVideo;h&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=a.video_ssrc,l._rtxSsrcId=a.video_rtx),d&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=a.audio_ssrc),d&&!_&&this.getListeners(un.PUBLISHED_USER_LIST).length===0&&(H.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(un.USER_PUBLISHED,l,"audio")),h&&!y&&this.getListeners(un.PUBLISHED_USER_LIST).length===0&&(H.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(un.USER_PUBLISHED,l,"video")),(d&&!_||h&&!y||v)&&n.push(l),h&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&o.push({user:l,mediaType:"video"}),d&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&o.push({user:l,mediaType:"audio"})}o.length>0&&(H.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(o.map(a=>"user: ".concat(a.user.uid,", mediaType: ").concat(a.mediaType)).join("; ")," ")),this.massSubscribe(o).catch(a=>{H.error("[".concat(this._clientId,"] mass resubscribe error"),a.toString())})),this.getListeners(un.PUBLISHED_USER_LIST).length>0?me("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=n:(H.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(n.map(a=>a.uid).join(", "))),this.safeEmit(un.PUBLISHED_USER_LIST,n)):H.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(n.map(a=>a.uid).join(", ")))}),this._gateway.signal.on(An.ON_RTP_CAPABILITY_CHANGE,r=>{const{video_codec:n}=r;this._p2pChannel instanceof YS&&this._p2pChannel.updateRemoteRTPCapabilities(n.map(o=>o.toLowerCase()).filter(o=>{var a;return _t(a=Object.keys(PS)).call(a,o)}))})}_handleP2PEvents(){this._gateway.signal.on(An.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(ao.PUBLISH,(r,n,o)=>{const{uid:a}=r;r.forEach(l=>{const{kind:d,ssrcs:h,mid:v,isMuted:_}=l;this._handleP2PAddAudioOrVideoStream(d,a,h[0].ssrcId,v);const y=this._users.find(C=>C.uid===a);return y&&this.store.useP2P?this._p2pChannel.mockSubscribe(y,d,h[0].ssrcId,v).then(()=>{n()}).catch(o):n(),this._handleMuteStream(a,d,!!_)})}),this._gateway.signal.on(ao.CALL,async(r,n,o)=>{if(this.store.useP2P)try{var a;n(await this._p2pChannel.startP2P({turnServer:(a=this._joinInfo)===null||a===void 0?void 0:a.turnServer},r))}catch(l){o(l)}}),this._gateway.signal.on(Br.P2P_CONNECTION,async r=>{this.store.useP2P&&(await this._p2pChannel).p2pConnect(r)}),this._gateway.signal.on(ao.UNPUBLISH,async(r,n,o)=>{if(this.store.useP2P){const{unpubMsg:a,uid:l}=r,d=this._users.find(h=>h.uid===l);if(!d)return H.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(l)),void n();try{a.forEach(async h=>{let{stream_type:v}=h;const _=v===Fn.Audio?jt.AUDIO:jt.VIDEO;await this._p2pChannel.unsubscribe(d,_),this._handleMuteStream(l,_,!0)}),n()}catch(h){o(h)}}}),this._gateway.signal.on(ao.CONTROL,async(r,n)=>{const{action:o}=r;switch(o){case av.MUTE_LOCAL_VIDEO:this._handleMuteStream(n,jt.VIDEO,!0);break;case av.MUTE_LOCAL_AUDIO:this._handleMuteStream(n,jt.AUDIO,!0);break;case av.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",n),this._handleMuteStream(n,jt.VIDEO,!1);break;case av.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",n),this._handleMuteStream(n,jt.AUDIO,!1)}}),this._gateway.signal.on(ao.RESTART_ICE,async(r,n,o)=>{if(this.store.useP2P)try{const{direction:a,iceParameter:l}=r;a!==Cc.SEND_ONLY||l?n(await this._p2pChannel.restartICE(a,l)):(this._p2pChannel.handleDisconnect(a),n())}catch(a){o(a)}}),this._gateway.signal.on(ao.CANDIDATE,r=>{if(this.store.useP2P){const{candidate:n,direction:o}=r;this._p2pChannel.addRemoteCandidate(n,o)}}),this._p2pChannel.on(cr.RequestP2PRestartICE,async(r,n,o)=>{try{const{direction:a}=r;n(await this._gateway.sendExtensionMessage(ao.RESTART_ICE,r,a===Cc.SEND_ONLY))}catch(a){o(a)}}),this._p2pChannel.on(cr.LocalCandidate,r=>{this._gateway.sendExtensionMessage(ao.CANDIDATE,JSON.stringify(r),!0)}),this._p2pChannel.on(cr.RequestP2PMuteLocal,async(r,n,o)=>{try{await this._gateway.sendExtensionMessage(ao.CONTROL,r,!0),n()}catch(a){o(a)}}),this._p2pChannel.on(cr.RequestP2PUnmuteRemote,async(r,n,o)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(r,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===de.DISCONNECT_P2P?n():o(a)}else n()}),this._p2pChannel.on(cr.RequestP2PMuteRemote,async(r,n,o)=>{if(this._joinInfo)try{await this._gateway.muteRemote(r,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===de.DISCONNECT_P2P?n():o(a)}else n()}),this._p2pChannel.on(cr.StateChange,(r,n)=>{n===xn.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(cr.PeerConnectionStateChange,r=>{const n=this._peerConnectionState;r!==n&&(this.safeEmit(un.PEERCONNECTION_STATE_CHANGE,r,n),this._peerConnectionState=r)}),this._p2pChannel.on(cr.RequestMuteLocal,async(r,n,o)=>{if(this._joinInfo)try{await this._gateway.muteLocal(r,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===de.DISCONNECT_P2P?n():o(a)}else n()}),this._p2pChannel.on(cr.RequestUnmuteLocal,async(r,n,o)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(r,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===de.DISCONNECT_P2P?n():o(a)}else n()}),this._p2pChannel.on(cr.RequestRePublish,(r,n,o)=>{this.publish(r,!1).then(n).catch(o)}),this._p2pChannel.on(cr.RequestRePublishDataChannel,(r,n,o)=>{Mt.all(r.map(async a=>{const l=await this._p2pChannel.publishDataChannel([a]);try{l.forEach(d=>{this._uid&&this._gateway.publishDataChannel(this._uid,d,!0)})}catch(d){if(d.code!==de.DISCONNECT_P2P)throw d}})).then(n).catch(o)}),this._p2pChannel.on(cr.RequestReSubscribe,async(r,n,o)=>{try{for(const{user:a,kind:l}of r)l===jt.VIDEO?await this.subscribe(a,"video"):await this.subscribe(a,"audio");n()}catch(a){o(a)}}),this._p2pChannel.on(cr.RequestUpload,(r,n)=>{this._gateway.upload(r,n)}),this._p2pChannel.on(cr.RequestUploadStats,r=>{this._gateway.uploadWRTCStats(r)}),this._p2pChannel.on(cr.MediaReconnectStart,r=>{this.safeEmit(un.MEDIA_RECONNECT_START,r)}),this._p2pChannel.on(cr.MediaReconnectEnd,r=>{this.safeEmit(un.MEDIA_RECONNECT_END,r)}),this._p2pChannel.on(cr.NeedSignalRTT,r=>{r(this._gateway.getSignalRTT())}),this._p2pChannel.on(cr.RequestRestartICE,async r=>{if(this.store.useP2P)return;const n=await this._p2pChannel.restartICE(r),o=await n.next();if(o.done)return;const a=o.value;let l;try{l=await this._gateway.restartICE({iceParameters:a})}catch(h){return void n.throw(h)}const{iceParameters:d}=function(h){const v=h.iceParameters;return{iceParameters:{iceUfrag:v.iceUfrag,icePwd:v.icePwd}}}(l);await n.next({remoteIceParameters:d})}),this._p2pChannel.on(cr.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(cr.RequestReconnectPC,async()=>{var r;const{iceParameters:n,dtlsParameters:o,rtpCapabilities:a}=await this._p2pChannel.startP2PConnection({turnServer:(r=this._joinInfo)===null||r===void 0?void 0:r.turnServer}),{gatewayEstablishParams:l,gatewayAddress:d}=await this._gateway.reconnectPC({iceParameters:n,dtlsParameters:o,rtpCapabilities:a}),h=oY(l,d);await this._p2pChannel.connect(h),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(cr.RequestUnpublishForReconnectPC,async(r,n,o)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(r,this._uid),n()):o()}),this._p2pChannel.on(cr.P2PLost,()=>{this.safeEmit(un.P2P_LOST,this.store.uid)}),this._p2pChannel.on(cr.UpdateVideoEncoder,r=>{r._encoderConfig&&this._gateway.setVideoProfile(r._encoderConfig)}),this._p2pChannel.on(cr.ConnectionTypeChange,r=>{this.safeEmit(un.IS_USING_CLOUD_PROXY,r)}),this._p2pChannel.on(cr.RequestLowStreamParameter,r=>{r(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(cr.QueryClientConnectionState,r=>{r(this.connectionState)}),this._p2pChannel.on(cr.AudioMetadata,r=>{this.safeEmit(un.AUDIO_METADATA,r)}),this._p2pChannel.on(cr.AudioPts,r=>{this.safeEmit(un.AUDIO_PTS,Number(r))})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(r){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const o=(n={config:r},Fg("ContentInspect").create(n));this._inspect=o,this.handleVideoInspectEvents(o);const{appId:a,cname:l,sid:d,token:h,uid:v,cid:_,vid:y}=this._joinInfo;await o.init({appId:a,areaCode:"",cname:l,sid:d,token:h,uid:v,cid:_,vid:y?Number(y):0},Ro)}catch(o){throw Array.isArray(o)?o[0]:o}var n}handleVideoInspectEvents(r){r.on(hs.CONNECTION_STATE_CHANGE,(n,o)=>{if(this.safeEmit(un.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,o),o===Rd.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(un.CONTENT_INSPECT_ERROR,new Je(de.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));r.inspectImage()}}),r.on(hs.INSPECT_RESULT,(n,o)=>{var a;if((o==null?void 0:o.code)===de.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return H.debug("Stop inspect content because that has left channel"),this==null||(a=this._inspect)===null||a===void 0||a.close(),void(this._inspect=void 0);this.safeEmit(un.CONTENT_INSPECT_RESULT,n,o)}),r.on(hs.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(o=>o.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(r){throw Array.isArray(r)?r[0]:r}}async setImageModeration(r,n){if(Kf(r,"enabled"),r){if(!n)throw new Je(de.INVALID_PARAMS,"config is required");if(EX(n),!this._joinInfo)throw new Je(de.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(n);else{const a=(o={config:n},Fg("ImageModeration").create(o));this._moderation=a,this.handleImageModerationEvents(a);const{appId:l,cname:d,sid:h,token:v,uid:_,cid:y,vid:C}=this._joinInfo;await a.init({appId:l,areaCode:"",cname:d,sid:h,token:v,uid:_,cid:y,vid:C?Number(C):0},Ro)}}catch(a){throw Array.isArray(a)?a[0]:a}}else{var o;if(!this._moderation)throw new Je(de.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(a){throw Array.isArray(a)?a[0]:a}}}handleImageModerationEvents(r){r.on(qf.CONNECTION_STATE_CHANGE,(n,o)=>{if(this.safeEmit(un.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,n,o),n===bA.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new Je(de.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");r.inspectImage()}}),r.on(qf.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(o=>o.trackMediaType==="video")[0])})}setP2PTransport(r){if(function(n){qo(n,"transport",["default","auto","relay","sd-rtn"])}(r),this.mode!=="p2p")throw new Je(de.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=r,H.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(r))}getJoinChannelServiceRecords(){return H.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(r){Kf(r,"enabled"),zn("ENABLE_PUBLISH_AUDIO_FILTER",r),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(r)}_handleResetAddStream(r,n){switch(n){case"audio":r._audio_added_=!1,r._trust_audio_stream_added_state_=!0;break;case"video":r._video_added_=!1,r._trust_video_stream_added_state_=!0}}},tr(Qt.prototype,"leave",[wX],Object.getOwnPropertyDescriptor(Qt.prototype,"leave"),Qt.prototype),tr(Qt.prototype,"publish",[SX],Object.getOwnPropertyDescriptor(Qt.prototype,"publish"),Qt.prototype),tr(Qt.prototype,"unpublish",[bX],Object.getOwnPropertyDescriptor(Qt.prototype,"unpublish"),Qt.prototype),tr(Qt.prototype,"subscribe",[CX],Object.getOwnPropertyDescriptor(Qt.prototype,"subscribe"),Qt.prototype),tr(Qt.prototype,"presubscribe",[TX],Object.getOwnPropertyDescriptor(Qt.prototype,"presubscribe"),Qt.prototype),tr(Qt.prototype,"massSubscribe",[RX],Object.getOwnPropertyDescriptor(Qt.prototype,"massSubscribe"),Qt.prototype),tr(Qt.prototype,"unsubscribe",[IX],Object.getOwnPropertyDescriptor(Qt.prototype,"unsubscribe"),Qt.prototype),tr(Qt.prototype,"massUnsubscribe",[OX],Object.getOwnPropertyDescriptor(Qt.prototype,"massUnsubscribe"),Qt.prototype),tr(Qt.prototype,"setLowStreamParameter",[NX],Object.getOwnPropertyDescriptor(Qt.prototype,"setLowStreamParameter"),Qt.prototype),tr(Qt.prototype,"enableDualStream",[BX],Object.getOwnPropertyDescriptor(Qt.prototype,"enableDualStream"),Qt.prototype),tr(Qt.prototype,"disableDualStream",[LX],Object.getOwnPropertyDescriptor(Qt.prototype,"disableDualStream"),Qt.prototype),tr(Qt.prototype,"setClientRole",[PX],Object.getOwnPropertyDescriptor(Qt.prototype,"setClientRole"),Qt.prototype),tr(Qt.prototype,"_setClientRoleOptions",[kX],Object.getOwnPropertyDescriptor(Qt.prototype,"_setClientRoleOptions"),Qt.prototype),tr(Qt.prototype,"setProxyServer",[DX],Object.getOwnPropertyDescriptor(Qt.prototype,"setProxyServer"),Qt.prototype),tr(Qt.prototype,"setTurnServer",[xX],Object.getOwnPropertyDescriptor(Qt.prototype,"setTurnServer"),Qt.prototype),tr(Qt.prototype,"setLicense",[UX],Object.getOwnPropertyDescriptor(Qt.prototype,"setLicense"),Qt.prototype),tr(Qt.prototype,"startProxyServer",[MX],Object.getOwnPropertyDescriptor(Qt.prototype,"startProxyServer"),Qt.prototype),tr(Qt.prototype,"stopProxyServer",[FX],Object.getOwnPropertyDescriptor(Qt.prototype,"stopProxyServer"),Qt.prototype),tr(Qt.prototype,"setLocalAccessPointsV2",[VX],Object.getOwnPropertyDescriptor(Qt.prototype,"setLocalAccessPointsV2"),Qt.prototype),tr(Qt.prototype,"setLocalAccessPoints",[QX],Object.getOwnPropertyDescriptor(Qt.prototype,"setLocalAccessPoints"),Qt.prototype),tr(Qt.prototype,"setRemoteDefaultVideoStreamType",[HX],Object.getOwnPropertyDescriptor(Qt.prototype,"setRemoteDefaultVideoStreamType"),Qt.prototype),tr(Qt.prototype,"setRemoteVideoStreamType",[jX],Object.getOwnPropertyDescriptor(Qt.prototype,"setRemoteVideoStreamType"),Qt.prototype),tr(Qt.prototype,"setStreamFallbackOption",[KX],Object.getOwnPropertyDescriptor(Qt.prototype,"setStreamFallbackOption"),Qt.prototype),tr(Qt.prototype,"setEncryptionConfig",[WX],Object.getOwnPropertyDescriptor(Qt.prototype,"setEncryptionConfig"),Qt.prototype),tr(Qt.prototype,"renewToken",[GX],Object.getOwnPropertyDescriptor(Qt.prototype,"renewToken"),Qt.prototype),tr(Qt.prototype,"enableAudioVolumeIndicator",[$X],Object.getOwnPropertyDescriptor(Qt.prototype,"enableAudioVolumeIndicator"),Qt.prototype),tr(Qt.prototype,"startLiveStreaming",[zX],Object.getOwnPropertyDescriptor(Qt.prototype,"startLiveStreaming"),Qt.prototype),tr(Qt.prototype,"setLiveTranscoding",[qX],Object.getOwnPropertyDescriptor(Qt.prototype,"setLiveTranscoding"),Qt.prototype),tr(Qt.prototype,"stopLiveStreaming",[YX],Object.getOwnPropertyDescriptor(Qt.prototype,"stopLiveStreaming"),Qt.prototype),tr(Qt.prototype,"startChannelMediaRelay",[XX],Object.getOwnPropertyDescriptor(Qt.prototype,"startChannelMediaRelay"),Qt.prototype),tr(Qt.prototype,"updateChannelMediaRelay",[JX],Object.getOwnPropertyDescriptor(Qt.prototype,"updateChannelMediaRelay"),Qt.prototype),tr(Qt.prototype,"stopChannelMediaRelay",[ZX],Object.getOwnPropertyDescriptor(Qt.prototype,"stopChannelMediaRelay"),Qt.prototype),tr(Qt.prototype,"sendCustomReportMessage",[eJ],Object.getOwnPropertyDescriptor(Qt.prototype,"sendCustomReportMessage"),Qt.prototype),tr(Qt.prototype,"pickSVCLayer",[tJ],Object.getOwnPropertyDescriptor(Qt.prototype,"pickSVCLayer"),Qt.prototype),tr(Qt.prototype,"setRTMConfig",[rJ],Object.getOwnPropertyDescriptor(Qt.prototype,"setRTMConfig"),Qt.prototype),tr(Qt.prototype,"enableContentInspect",[nJ],Object.getOwnPropertyDescriptor(Qt.prototype,"enableContentInspect"),Qt.prototype),tr(Qt.prototype,"disableContentInspect",[iJ],Object.getOwnPropertyDescriptor(Qt.prototype,"disableContentInspect"),Qt.prototype),tr(Qt.prototype,"setImageModeration",[oJ],Object.getOwnPropertyDescriptor(Qt.prototype,"setImageModeration"),Qt.prototype),tr(Qt.prototype,"setP2PTransport",[sJ],Object.getOwnPropertyDescriptor(Qt.prototype,"setP2PTransport"),Qt.prototype),tr(Qt.prototype,"getJoinChannelServiceRecords",[aJ],Object.getOwnPropertyDescriptor(Qt.prototype,"getJoinChannelServiceRecords"),Qt.prototype),tr(Qt.prototype,"setPublishAudioFilterEnabled",[cJ],Object.getOwnPropertyDescriptor(Qt.prototype,"setPublishAudioFilterEnabled"),Qt.prototype),Qt);class JS{constructor(n,o){re(this,"id",0),re(this,"element",void 0),re(this,"peerPair",void 0),re(this,"context",void 0),re(this,"audioPlayerElement",void 0),re(this,"audioTrack",void 0),JS.count+=1,this.id=JS.count,this.element=n,this.context=o}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=n=>{const o=document.createElement("audio");o.srcObject=new MediaStream([n.track]),o.play(),this.audioPlayerElement=o}}async switchSdp(){if(!this.peerPair)return;const n=async(a,l)=>{const d=l==="offer"?await a.createOffer():await a.createAnswer();return await a.setLocalDescription(d),a.iceGatheringState==="complete"?a.localDescription:new Mt(h=>{a.onicegatheringstatechange=()=>{a.iceGatheringState==="complete"&&h(a.localDescription)}})},o=async(a,l)=>await a.setRemoteDescription(l);try{const a=await n(this.peerPair[0],"offer");await o(this.peerPair[1],a);const l=await n(this.peerPair[1],"answer");await o(this.peerPair[0],l)}catch(a){throw new Je(de.LOCAL_AEC_ERROR,a.toString()).print()}}async getTracksFromMediaElement(n){if(this.audioTrack)return this.audioTrack;let o;try{n instanceof HTMLVideoElement&&(n.captureStream?n.captureStream():n.mozCaptureStream()),o=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(n).connect(o)}catch(l){throw new Je(de.LOCAL_AEC_ERROR,l.toString()).print()}if(!o)throw new Je(de.LOCAL_AEC_ERROR,"no dest node when local aec").print();const a=o.stream.getAudioTracks()[0];return this.audioTrack=a,a}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const n=this.element,o=await this.getTracksFromMediaElement(n);this.peerPair&&this.peerPair[0].addTrack(o),await this.switchSdp()}close(){H.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(n=>{n.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var uJ,M2;re(JS,"count",0);const Jbe=window.AudioContext||window.webkitAudioContext,Zbe=new(uJ=gr({report:rr}),tr((M2=class{constructor(){re(this,"units",[]),re(this,"context",void 0)}processExternalMediaAEC(r){if(!this._doesEnvironmentNeedAEC())return H.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Jbe);let n=this.units.find(o=>o&&o.getElement()===r);return n||(n=new JS(r,this.context),this.units.push(n)),n.startEchoCancellation(),H.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return hn().name!==Sn.SAFARI}}).prototype,"processExternalMediaAEC",[uJ],Object.getOwnPropertyDescriptor(M2.prototype,"processExternalMediaAEC"),M2.prototype),M2);function AJ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function dJ(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?AJ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):AJ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}const HU=window||document;function fJ(r){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!HU)return;const o=Io._cspEventHandlerPointer;if(o&&n)return void console.error(o,n);const a=l=>{if(!(l&&l.blockedURI&&(Io.onSecurityPolicyViolation||Io.getListeners(Ep.SECURITY_POLICY_VIOLATION).length>0)))return;const d=l.blockedURI;me("CSP_DETECTED_HOSTNAME_LIST").some(h=>_t(d).call(d,h))&&(Io.onSecurityPolicyViolation&&typeof Io.onSecurityPolicyViolation=="function"&&Io.onSecurityPolicyViolation(l),Io.getListeners(Ep.SECURITY_POLICY_VIOLATION).length>0&&Io.safeEmit(Ep.SECURITY_POLICY_VIOLATION,l))};o&&HU.removeEventListener("securitypolicyviolation",o),(n||r&&typeof r=="function"||Io.getListeners(Ep.SECURITY_POLICY_VIOLATION).length>0)&&HU.addEventListener("securitypolicyviolation",a),Io._cspEventHandlerPointer=a}var eCe=N,tCe=zW,hJ=RegExp.prototype,rCe=function(r){return r===hJ||eCe(hJ,r)?tCe(r):r.flags},sc=c(rCe);function $y(r){let n=r.length;for(;--n>=0;)r[n]=0}const jU=256,pJ=286,ZS=30,eb=15,KU=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),F2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nCe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),gJ=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qg=new Array(576);$y(Qg);const tb=new Array(60);$y(tb);const rb=new Array(512);$y(rb);const nb=new Array(256);$y(nb);const WU=new Array(29);$y(WU);const V2=new Array(ZS);function GU(r,n,o,a,l){this.static_tree=r,this.extra_bits=n,this.extra_base=o,this.elems=a,this.max_length=l,this.has_stree=r&&r.length}let mJ,vJ,_J;function $U(r,n){this.dyn_tree=r,this.max_code=0,this.stat_desc=n}$y(V2);const yJ=r=>r<256?rb[r]:rb[256+(r>>>7)],ib=(r,n)=>{r.pending_buf[r.pending++]=255&n,r.pending_buf[r.pending++]=n>>>8&255},Mu=(r,n,o)=>{r.bi_valid>16-o?(r.bi_buf|=n<<r.bi_valid&65535,ib(r,r.bi_buf),r.bi_buf=n>>16-r.bi_valid,r.bi_valid+=o-16):(r.bi_buf|=n<<r.bi_valid&65535,r.bi_valid+=o)},bp=(r,n,o)=>{Mu(r,o[2*n],o[2*n+1])},EJ=(r,n)=>{let o=0;do o|=1&r,r>>>=1,o<<=1;while(--n>0);return o>>>1},wJ=(r,n,o)=>{const a=new Array(16);let l,d,h=0;for(l=1;l<=eb;l++)h=h+o[l-1]<<1,a[l]=h;for(d=0;d<=n;d++){let v=r[2*d+1];v!==0&&(r[2*d]=EJ(a[v]++,v))}},SJ=r=>{let n;for(n=0;n<pJ;n++)r.dyn_ltree[2*n]=0;for(n=0;n<ZS;n++)r.dyn_dtree[2*n]=0;for(n=0;n<19;n++)r.bl_tree[2*n]=0;r.dyn_ltree[512]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},bJ=r=>{r.bi_valid>8?ib(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},CJ=(r,n,o,a)=>{const l=2*n,d=2*o;return r[l]<r[d]||r[l]===r[d]&&a[n]<=a[o]},zU=(r,n,o)=>{const a=r.heap[o];let l=o<<1;for(;l<=r.heap_len&&(l<r.heap_len&&CJ(n,r.heap[l+1],r.heap[l],r.depth)&&l++,!CJ(n,a,r.heap[l],r.depth));)r.heap[o]=r.heap[l],o=l,l<<=1;r.heap[o]=a},TJ=(r,n,o)=>{let a,l,d,h,v=0;if(r.sym_next!==0)do a=255&r.pending_buf[r.sym_buf+v++],a+=(255&r.pending_buf[r.sym_buf+v++])<<8,l=r.pending_buf[r.sym_buf+v++],a===0?bp(r,l,n):(d=nb[l],bp(r,d+jU+1,n),h=KU[d],h!==0&&(l-=WU[d],Mu(r,l,h)),a--,d=yJ(a),bp(r,d,o),h=F2[d],h!==0&&(a-=V2[d],Mu(r,a,h)));while(v<r.sym_next);bp(r,256,n)},qU=(r,n)=>{const o=n.dyn_tree,a=n.stat_desc.static_tree,l=n.stat_desc.has_stree,d=n.stat_desc.elems;let h,v,_,y=-1;for(r.heap_len=0,r.heap_max=573,h=0;h<d;h++)o[2*h]!==0?(r.heap[++r.heap_len]=y=h,r.depth[h]=0):o[2*h+1]=0;for(;r.heap_len<2;)_=r.heap[++r.heap_len]=y<2?++y:0,o[2*_]=1,r.depth[_]=0,r.opt_len--,l&&(r.static_len-=a[2*_+1]);for(n.max_code=y,h=r.heap_len>>1;h>=1;h--)zU(r,o,h);_=d;do h=r.heap[1],r.heap[1]=r.heap[r.heap_len--],zU(r,o,1),v=r.heap[1],r.heap[--r.heap_max]=h,r.heap[--r.heap_max]=v,o[2*_]=o[2*h]+o[2*v],r.depth[_]=(r.depth[h]>=r.depth[v]?r.depth[h]:r.depth[v])+1,o[2*h+1]=o[2*v+1]=_,r.heap[1]=_++,zU(r,o,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],((C,B)=>{const L=B.dyn_tree,x=B.max_code,X=B.stat_desc.static_tree,G=B.stat_desc.has_stree,q=B.stat_desc.extra_bits,Ae=B.stat_desc.extra_base,ue=B.stat_desc.max_length;let _e,De,Le,Te,ze,rt,At=0;for(Te=0;Te<=eb;Te++)C.bl_count[Te]=0;for(L[2*C.heap[C.heap_max]+1]=0,_e=C.heap_max+1;_e<573;_e++)De=C.heap[_e],Te=L[2*L[2*De+1]+1]+1,Te>ue&&(Te=ue,At++),L[2*De+1]=Te,De>x||(C.bl_count[Te]++,ze=0,De>=Ae&&(ze=q[De-Ae]),rt=L[2*De],C.opt_len+=rt*(Te+ze),G&&(C.static_len+=rt*(X[2*De+1]+ze)));if(At!==0){do{for(Te=ue-1;C.bl_count[Te]===0;)Te--;C.bl_count[Te]--,C.bl_count[Te+1]+=2,C.bl_count[ue]--,At-=2}while(At>0);for(Te=ue;Te!==0;Te--)for(De=C.bl_count[Te];De!==0;)Le=C.heap[--_e],Le>x||(L[2*Le+1]!==Te&&(C.opt_len+=(Te-L[2*Le+1])*L[2*Le],L[2*Le+1]=Te),De--)}})(r,n),wJ(o,y,r.bl_count)},RJ=(r,n,o)=>{let a,l,d=-1,h=n[1],v=0,_=7,y=4;for(h===0&&(_=138,y=3),n[2*(o+1)+1]=65535,a=0;a<=o;a++)l=h,h=n[2*(a+1)+1],++v<_&&l===h||(v<y?r.bl_tree[2*l]+=v:l!==0?(l!==d&&r.bl_tree[2*l]++,r.bl_tree[32]++):v<=10?r.bl_tree[34]++:r.bl_tree[36]++,v=0,d=l,h===0?(_=138,y=3):l===h?(_=6,y=3):(_=7,y=4))},IJ=(r,n,o)=>{let a,l,d=-1,h=n[1],v=0,_=7,y=4;for(h===0&&(_=138,y=3),a=0;a<=o;a++)if(l=h,h=n[2*(a+1)+1],!(++v<_&&l===h)){if(v<y)do bp(r,l,r.bl_tree);while(--v!=0);else l!==0?(l!==d&&(bp(r,l,r.bl_tree),v--),bp(r,16,r.bl_tree),Mu(r,v-3,2)):v<=10?(bp(r,17,r.bl_tree),Mu(r,v-3,3)):(bp(r,18,r.bl_tree),Mu(r,v-11,7));v=0,d=l,h===0?(_=138,y=3):l===h?(_=6,y=3):(_=7,y=4)}};let OJ=!1;const NJ=(r,n,o,a)=>{Mu(r,0+(a?1:0),3),bJ(r),ib(r,o),ib(r,~o),o&&r.pending_buf.set(r.window.subarray(n,n+o),r.pending),r.pending+=o};var iCe=r=>{OJ||((()=>{let n,o,a,l,d;const h=new Array(16);for(a=0,l=0;l<28;l++)for(WU[l]=a,n=0;n<1<<KU[l];n++)nb[a++]=l;for(nb[a-1]=l,d=0,l=0;l<16;l++)for(V2[l]=d,n=0;n<1<<F2[l];n++)rb[d++]=l;for(d>>=7;l<ZS;l++)for(V2[l]=d<<7,n=0;n<1<<F2[l]-7;n++)rb[256+d++]=l;for(o=0;o<=eb;o++)h[o]=0;for(n=0;n<=143;)Qg[2*n+1]=8,n++,h[8]++;for(;n<=255;)Qg[2*n+1]=9,n++,h[9]++;for(;n<=279;)Qg[2*n+1]=7,n++,h[7]++;for(;n<=287;)Qg[2*n+1]=8,n++,h[8]++;for(wJ(Qg,287,h),n=0;n<ZS;n++)tb[2*n+1]=5,tb[2*n]=EJ(n,5);mJ=new GU(Qg,KU,257,pJ,eb),vJ=new GU(tb,F2,0,ZS,eb),_J=new GU(new Array(0),nCe,0,19,7)})(),OJ=!0),r.l_desc=new $U(r.dyn_ltree,mJ),r.d_desc=new $U(r.dyn_dtree,vJ),r.bl_desc=new $U(r.bl_tree,_J),r.bi_buf=0,r.bi_valid=0,SJ(r)},oCe=(r,n,o,a)=>{let l,d,h=0;r.level>0?(r.strm.data_type===2&&(r.strm.data_type=(v=>{let _,y=4093624447;for(_=0;_<=31;_++,y>>>=1)if(1&y&&v.dyn_ltree[2*_]!==0)return 0;if(v.dyn_ltree[18]!==0||v.dyn_ltree[20]!==0||v.dyn_ltree[26]!==0)return 1;for(_=32;_<jU;_++)if(v.dyn_ltree[2*_]!==0)return 1;return 0})(r)),qU(r,r.l_desc),qU(r,r.d_desc),h=(v=>{let _;for(RJ(v,v.dyn_ltree,v.l_desc.max_code),RJ(v,v.dyn_dtree,v.d_desc.max_code),qU(v,v.bl_desc),_=18;_>=3&&v.bl_tree[2*gJ[_]+1]===0;_--);return v.opt_len+=3*(_+1)+5+5+4,_})(r),l=r.opt_len+3+7>>>3,d=r.static_len+3+7>>>3,d<=l&&(l=d)):l=d=o+5,o+4<=l&&n!==-1?NJ(r,n,o,a):r.strategy===4||d===l?(Mu(r,2+(a?1:0),3),TJ(r,Qg,tb)):(Mu(r,4+(a?1:0),3),((v,_,y,C)=>{let B;for(Mu(v,_-257,5),Mu(v,y-1,5),Mu(v,C-4,4),B=0;B<C;B++)Mu(v,v.bl_tree[2*gJ[B]+1],3);IJ(v,v.dyn_ltree,_-1),IJ(v,v.dyn_dtree,y-1)})(r,r.l_desc.max_code+1,r.d_desc.max_code+1,h+1),TJ(r,r.dyn_ltree,r.dyn_dtree)),SJ(r),a&&bJ(r)},sCe=(r,n,o)=>(r.pending_buf[r.sym_buf+r.sym_next++]=n,r.pending_buf[r.sym_buf+r.sym_next++]=n>>8,r.pending_buf[r.sym_buf+r.sym_next++]=o,n===0?r.dyn_ltree[2*o]++:(r.matches++,n--,r.dyn_ltree[2*(nb[o]+jU+1)]++,r.dyn_dtree[2*yJ(n)]++),r.sym_next===r.sym_end),aCe=r=>{Mu(r,2,3),bp(r,256,Qg),(n=>{n.bi_valid===16?(ib(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(r)},cCe={_tr_init:iCe,_tr_stored_block:NJ,_tr_flush_block:oCe,_tr_tally:sCe,_tr_align:aCe},ob=(r,n,o,a)=>{let l=65535&r|0,d=r>>>16&65535|0,h=0;for(;o!==0;){h=o>2e3?2e3:o,o-=h;do l=l+n[a++]|0,d=d+l|0;while(--h);l%=65521,d%=65521}return l|d<<16|0};const lCe=new Uint32Array((()=>{let r,n=[];for(var o=0;o<256;o++){r=o;for(var a=0;a<8;a++)r=1&r?3988292384^r>>>1:r>>>1;n[o]=r}return n})());var Rc=(r,n,o,a)=>{const l=lCe,d=a+o;r^=-1;for(let h=a;h<d;h++)r=r>>>8^l[255&(r^n[h])];return-1^r},h1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zy={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:uCe,_tr_stored_block:YU,_tr_flush_block:ACe,_tr_tally:vv,_tr_align:dCe}=cCe,{Z_NO_FLUSH:_v,Z_PARTIAL_FLUSH:fCe,Z_FULL_FLUSH:hCe,Z_FINISH:Ld,Z_BLOCK:BJ,Z_OK:el,Z_STREAM_END:LJ,Z_STREAM_ERROR:Cp,Z_DATA_ERROR:pCe,Z_BUF_ERROR:XU,Z_DEFAULT_COMPRESSION:gCe,Z_FILTERED:mCe,Z_HUFFMAN_ONLY:Q2,Z_RLE:vCe,Z_FIXED:_Ce,Z_DEFAULT_STRATEGY:yCe,Z_UNKNOWN:ECe,Z_DEFLATED:H2}=zy,JU=286,wCe=30,SCe=19,bCe=2*JU+1,CCe=15,p1=258,Tp=262,qy=42,g1=113,sb=666,m1=(r,n)=>(r.msg=h1[n],n),PJ=r=>2*r-(r>4?9:0),yv=r=>{let n=r.length;for(;--n>=0;)r[n]=0},TCe=r=>{let n,o,a,l=r.w_size;n=r.hash_size,a=n;do o=r.head[--a],r.head[a]=o>=l?o-l:0;while(--n);n=l,a=n;do o=r.prev[--a],r.prev[a]=o>=l?o-l:0;while(--n)};let Ev=(r,n,o)=>(n<<r.hash_shift^o)&r.hash_mask;const TA=r=>{const n=r.state;let o=n.pending;o>r.avail_out&&(o=r.avail_out),o!==0&&(r.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+o),r.next_out),r.next_out+=o,n.pending_out+=o,r.total_out+=o,r.avail_out-=o,n.pending-=o,n.pending===0&&(n.pending_out=0))},RA=(r,n)=>{ACe(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,n),r.block_start=r.strstart,TA(r.strm)},Zi=(r,n)=>{r.pending_buf[r.pending++]=n},ab=(r,n)=>{r.pending_buf[r.pending++]=n>>>8&255,r.pending_buf[r.pending++]=255&n},ZU=(r,n,o,a)=>{let l=r.avail_in;return l>a&&(l=a),l===0?0:(r.avail_in-=l,n.set(r.input.subarray(r.next_in,r.next_in+l),o),r.state.wrap===1?r.adler=ob(r.adler,n,l,o):r.state.wrap===2&&(r.adler=Rc(r.adler,n,l,o)),r.next_in+=l,r.total_in+=l,l)},kJ=(r,n)=>{let o,a,l=r.max_chain_length,d=r.strstart,h=r.prev_length,v=r.nice_match;const _=r.strstart>r.w_size-Tp?r.strstart-(r.w_size-Tp):0,y=r.window,C=r.w_mask,B=r.prev,L=r.strstart+p1;let x=y[d+h-1],X=y[d+h];r.prev_length>=r.good_match&&(l>>=2),v>r.lookahead&&(v=r.lookahead);do if(o=n,y[o+h]===X&&y[o+h-1]===x&&y[o]===y[d]&&y[++o]===y[d+1]){d+=2,o++;do;while(y[++d]===y[++o]&&y[++d]===y[++o]&&y[++d]===y[++o]&&y[++d]===y[++o]&&y[++d]===y[++o]&&y[++d]===y[++o]&&y[++d]===y[++o]&&y[++d]===y[++o]&&d<L);if(a=p1-(L-d),d=L-p1,a>h){if(r.match_start=n,h=a,a>=v)break;x=y[d+h-1],X=y[d+h]}}while((n=B[n&C])>_&&--l!=0);return h<=r.lookahead?h:r.lookahead},Yy=r=>{const n=r.w_size;let o,a,l;do{if(a=r.window_size-r.lookahead-r.strstart,r.strstart>=n+(n-Tp)&&(r.window.set(r.window.subarray(n,n+n-a),0),r.match_start-=n,r.strstart-=n,r.block_start-=n,r.insert>r.strstart&&(r.insert=r.strstart),TCe(r),a+=n),r.strm.avail_in===0)break;if(o=ZU(r.strm,r.window,r.strstart+r.lookahead,a),r.lookahead+=o,r.lookahead+r.insert>=3)for(l=r.strstart-r.insert,r.ins_h=r.window[l],r.ins_h=Ev(r,r.ins_h,r.window[l+1]);r.insert&&(r.ins_h=Ev(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++,r.insert--,!(r.lookahead+r.insert<3)););}while(r.lookahead<Tp&&r.strm.avail_in!==0)},DJ=(r,n)=>{let o,a,l,d=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,h=0,v=r.strm.avail_in;do{if(o=65535,l=r.bi_valid+42>>3,r.strm.avail_out<l||(l=r.strm.avail_out-l,a=r.strstart-r.block_start,o>a+r.strm.avail_in&&(o=a+r.strm.avail_in),o>l&&(o=l),o<d&&(o===0&&n!==Ld||n===_v||o!==a+r.strm.avail_in)))break;h=n===Ld&&o===a+r.strm.avail_in?1:0,YU(r,0,0,h),r.pending_buf[r.pending-4]=o,r.pending_buf[r.pending-3]=o>>8,r.pending_buf[r.pending-2]=~o,r.pending_buf[r.pending-1]=~o>>8,TA(r.strm),a&&(a>o&&(a=o),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+a),r.strm.next_out),r.strm.next_out+=a,r.strm.avail_out-=a,r.strm.total_out+=a,r.block_start+=a,o-=a),o&&(ZU(r.strm,r.strm.output,r.strm.next_out,o),r.strm.next_out+=o,r.strm.avail_out-=o,r.strm.total_out+=o)}while(h===0);return v-=r.strm.avail_in,v&&(v>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=v&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-v,r.strm.next_in),r.strstart),r.strstart+=v,r.insert+=v>r.w_size-r.insert?r.w_size-r.insert:v),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),h?4:n!==_v&&n!==Ld&&r.strm.avail_in===0&&r.strstart===r.block_start?2:(l=r.window_size-r.strstart,r.strm.avail_in>l&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,l+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),l>r.strm.avail_in&&(l=r.strm.avail_in),l&&(ZU(r.strm,r.window,r.strstart,l),r.strstart+=l,r.insert+=l>r.w_size-r.insert?r.w_size-r.insert:l),r.high_water<r.strstart&&(r.high_water=r.strstart),l=r.bi_valid+42>>3,l=r.pending_buf_size-l>65535?65535:r.pending_buf_size-l,d=l>r.w_size?r.w_size:l,a=r.strstart-r.block_start,(a>=d||(a||n===Ld)&&n!==_v&&r.strm.avail_in===0&&a<=l)&&(o=a>l?l:a,h=n===Ld&&r.strm.avail_in===0&&o===a?1:0,YU(r,r.block_start,o,h),r.block_start+=o,TA(r.strm)),h?3:1)},eM=(r,n)=>{let o,a;for(;;){if(r.lookahead<Tp){if(Yy(r),r.lookahead<Tp&&n===_v)return 1;if(r.lookahead===0)break}if(o=0,r.lookahead>=3&&(r.ins_h=Ev(r,r.ins_h,r.window[r.strstart+3-1]),o=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),o!==0&&r.strstart-o<=r.w_size-Tp&&(r.match_length=kJ(r,o)),r.match_length>=3)if(a=vv(r,r.strstart-r.match_start,r.match_length-3),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=3){r.match_length--;do r.strstart++,r.ins_h=Ev(r,r.ins_h,r.window[r.strstart+3-1]),o=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!=0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=Ev(r,r.ins_h,r.window[r.strstart+1]);else a=vv(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(a&&(RA(r,!1),r.strm.avail_out===0))return 1}return r.insert=r.strstart<2?r.strstart:2,n===Ld?(RA(r,!0),r.strm.avail_out===0?3:4):r.sym_next&&(RA(r,!1),r.strm.avail_out===0)?1:2},Xy=(r,n)=>{let o,a,l;for(;;){if(r.lookahead<Tp){if(Yy(r),r.lookahead<Tp&&n===_v)return 1;if(r.lookahead===0)break}if(o=0,r.lookahead>=3&&(r.ins_h=Ev(r,r.ins_h,r.window[r.strstart+3-1]),o=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=2,o!==0&&r.prev_length<r.max_lazy_match&&r.strstart-o<=r.w_size-Tp&&(r.match_length=kJ(r,o),r.match_length<=5&&(r.strategy===mCe||r.match_length===3&&r.strstart-r.match_start>4096)&&(r.match_length=2)),r.prev_length>=3&&r.match_length<=r.prev_length){l=r.strstart+r.lookahead-3,a=vv(r,r.strstart-1-r.prev_match,r.prev_length-3),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=l&&(r.ins_h=Ev(r,r.ins_h,r.window[r.strstart+3-1]),o=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!=0);if(r.match_available=0,r.match_length=2,r.strstart++,a&&(RA(r,!1),r.strm.avail_out===0))return 1}else if(r.match_available){if(a=vv(r,0,r.window[r.strstart-1]),a&&RA(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return 1}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(a=vv(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<2?r.strstart:2,n===Ld?(RA(r,!0),r.strm.avail_out===0?3:4):r.sym_next&&(RA(r,!1),r.strm.avail_out===0)?1:2};function Rp(r,n,o,a,l){this.good_length=r,this.max_lazy=n,this.nice_length=o,this.max_chain=a,this.func=l}const cb=[new Rp(0,0,0,0,DJ),new Rp(4,4,8,4,eM),new Rp(4,5,16,8,eM),new Rp(4,6,32,32,eM),new Rp(4,4,16,16,Xy),new Rp(8,16,32,32,Xy),new Rp(8,16,128,128,Xy),new Rp(8,32,128,256,Xy),new Rp(32,128,258,1024,Xy),new Rp(32,258,258,4096,Xy)];function RCe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*bCe),this.dyn_dtree=new Uint16Array(2*(2*wCe+1)),this.bl_tree=new Uint16Array(2*(2*SCe+1)),yv(this.dyn_ltree),yv(this.dyn_dtree),yv(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(CCe+1),this.heap=new Uint16Array(2*JU+1),yv(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*JU+1),yv(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const lb=r=>{if(!r)return 1;const n=r.state;return!n||n.strm!==r||n.status!==qy&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==g1&&n.status!==sb?1:0},xJ=r=>{if(lb(r))return m1(r,Cp);r.total_in=r.total_out=0,r.data_type=ECe;const n=r.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?qy:g1,r.adler=n.wrap===2?0:1,n.last_flush=-2,uCe(n),el},UJ=r=>{const n=xJ(r);return n===el&&(o=>{o.window_size=2*o.w_size,yv(o.head),o.max_lazy_match=cb[o.level].max_lazy,o.good_match=cb[o.level].good_length,o.nice_match=cb[o.level].nice_length,o.max_chain_length=cb[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=2,o.match_available=0,o.ins_h=0})(r.state),n},MJ=(r,n,o,a,l,d)=>{if(!r)return Cp;let h=1;if(n===gCe&&(n=6),a<0?(h=0,a=-a):a>15&&(h=2,a-=16),l<1||l>9||o!==H2||a<8||a>15||n<0||n>9||d<0||d>_Ce||a===8&&h!==1)return m1(r,Cp);a===8&&(a=9);const v=new RCe;return r.state=v,v.strm=r,v.status=qy,v.wrap=h,v.gzhead=null,v.w_bits=a,v.w_size=1<<v.w_bits,v.w_mask=v.w_size-1,v.hash_bits=l+7,v.hash_size=1<<v.hash_bits,v.hash_mask=v.hash_size-1,v.hash_shift=~~((v.hash_bits+3-1)/3),v.window=new Uint8Array(2*v.w_size),v.head=new Uint16Array(v.hash_size),v.prev=new Uint16Array(v.w_size),v.lit_bufsize=1<<l+6,v.pending_buf_size=4*v.lit_bufsize,v.pending_buf=new Uint8Array(v.pending_buf_size),v.sym_buf=v.lit_bufsize,v.sym_end=3*(v.lit_bufsize-1),v.level=n,v.strategy=d,v.method=o,UJ(r)};var ICe=(r,n)=>{if(lb(r)||n>BJ||n<0)return r?m1(r,Cp):Cp;const o=r.state;if(!r.output||r.avail_in!==0&&!r.input||o.status===sb&&n!==Ld)return m1(r,r.avail_out===0?XU:Cp);const a=o.last_flush;if(o.last_flush=n,o.pending!==0){if(TA(r),r.avail_out===0)return o.last_flush=-1,el}else if(r.avail_in===0&&PJ(n)<=PJ(a)&&n!==Ld)return m1(r,XU);if(o.status===sb&&r.avail_in!==0)return m1(r,XU);if(o.status===qy&&o.wrap===0&&(o.status=g1),o.status===qy){let l=H2+(o.w_bits-8<<4)<<8,d=-1;if(d=o.strategy>=Q2||o.level<2?0:o.level<6?1:o.level===6?2:3,l|=d<<6,o.strstart!==0&&(l|=32),l+=31-l%31,ab(o,l),o.strstart!==0&&(ab(o,r.adler>>>16),ab(o,65535&r.adler)),r.adler=1,o.status=g1,TA(r),o.pending!==0)return o.last_flush=-1,el}if(o.status===57){if(r.adler=0,Zi(o,31),Zi(o,139),Zi(o,8),o.gzhead)Zi(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Zi(o,255&o.gzhead.time),Zi(o,o.gzhead.time>>8&255),Zi(o,o.gzhead.time>>16&255),Zi(o,o.gzhead.time>>24&255),Zi(o,o.level===9?2:o.strategy>=Q2||o.level<2?4:0),Zi(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(Zi(o,255&o.gzhead.extra.length),Zi(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(r.adler=Rc(r.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69;else if(Zi(o,0),Zi(o,0),Zi(o,0),Zi(o,0),Zi(o,0),Zi(o,o.level===9?2:o.strategy>=Q2||o.level<2?4:0),Zi(o,3),o.status=g1,TA(r),o.pending!==0)return o.last_flush=-1,el}if(o.status===69){if(o.gzhead.extra){let l=o.pending,d=(65535&o.gzhead.extra.length)-o.gzindex;for(;o.pending+d>o.pending_buf_size;){let v=o.pending_buf_size-o.pending;if(o.pending_buf.set(o.gzhead.extra.subarray(o.gzindex,o.gzindex+v),o.pending),o.pending=o.pending_buf_size,o.gzhead.hcrc&&o.pending>l&&(r.adler=Rc(r.adler,o.pending_buf,o.pending-l,l)),o.gzindex+=v,TA(r),o.pending!==0)return o.last_flush=-1,el;l=0,d-=v}let h=new Uint8Array(o.gzhead.extra);o.pending_buf.set(h.subarray(o.gzindex,o.gzindex+d),o.pending),o.pending+=d,o.gzhead.hcrc&&o.pending>l&&(r.adler=Rc(r.adler,o.pending_buf,o.pending-l,l)),o.gzindex=0}o.status=73}if(o.status===73){if(o.gzhead.name){let l,d=o.pending;do{if(o.pending===o.pending_buf_size){if(o.gzhead.hcrc&&o.pending>d&&(r.adler=Rc(r.adler,o.pending_buf,o.pending-d,d)),TA(r),o.pending!==0)return o.last_flush=-1,el;d=0}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,Zi(o,l)}while(l!==0);o.gzhead.hcrc&&o.pending>d&&(r.adler=Rc(r.adler,o.pending_buf,o.pending-d,d)),o.gzindex=0}o.status=91}if(o.status===91){if(o.gzhead.comment){let l,d=o.pending;do{if(o.pending===o.pending_buf_size){if(o.gzhead.hcrc&&o.pending>d&&(r.adler=Rc(r.adler,o.pending_buf,o.pending-d,d)),TA(r),o.pending!==0)return o.last_flush=-1,el;d=0}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,Zi(o,l)}while(l!==0);o.gzhead.hcrc&&o.pending>d&&(r.adler=Rc(r.adler,o.pending_buf,o.pending-d,d))}o.status=103}if(o.status===103){if(o.gzhead.hcrc){if(o.pending+2>o.pending_buf_size&&(TA(r),o.pending!==0))return o.last_flush=-1,el;Zi(o,255&r.adler),Zi(o,r.adler>>8&255),r.adler=0}if(o.status=g1,TA(r),o.pending!==0)return o.last_flush=-1,el}if(r.avail_in!==0||o.lookahead!==0||n!==_v&&o.status!==sb){let l=o.level===0?DJ(o,n):o.strategy===Q2?((d,h)=>{let v;for(;;){if(d.lookahead===0&&(Yy(d),d.lookahead===0)){if(h===_v)return 1;break}if(d.match_length=0,v=vv(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,v&&(RA(d,!1),d.strm.avail_out===0))return 1}return d.insert=0,h===Ld?(RA(d,!0),d.strm.avail_out===0?3:4):d.sym_next&&(RA(d,!1),d.strm.avail_out===0)?1:2})(o,n):o.strategy===vCe?((d,h)=>{let v,_,y,C;const B=d.window;for(;;){if(d.lookahead<=p1){if(Yy(d),d.lookahead<=p1&&h===_v)return 1;if(d.lookahead===0)break}if(d.match_length=0,d.lookahead>=3&&d.strstart>0&&(y=d.strstart-1,_=B[y],_===B[++y]&&_===B[++y]&&_===B[++y])){C=d.strstart+p1;do;while(_===B[++y]&&_===B[++y]&&_===B[++y]&&_===B[++y]&&_===B[++y]&&_===B[++y]&&_===B[++y]&&_===B[++y]&&y<C);d.match_length=p1-(C-y),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=3?(v=vv(d,1,d.match_length-3),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(v=vv(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),v&&(RA(d,!1),d.strm.avail_out===0))return 1}return d.insert=0,h===Ld?(RA(d,!0),d.strm.avail_out===0?3:4):d.sym_next&&(RA(d,!1),d.strm.avail_out===0)?1:2})(o,n):cb[o.level].func(o,n);if(l!==3&&l!==4||(o.status=sb),l===1||l===3)return r.avail_out===0&&(o.last_flush=-1),el;if(l===2&&(n===fCe?dCe(o):n!==BJ&&(YU(o,0,0,!1),n===hCe&&(yv(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),TA(r),r.avail_out===0))return o.last_flush=-1,el}return n!==Ld?el:o.wrap<=0?LJ:(o.wrap===2?(Zi(o,255&r.adler),Zi(o,r.adler>>8&255),Zi(o,r.adler>>16&255),Zi(o,r.adler>>24&255),Zi(o,255&r.total_in),Zi(o,r.total_in>>8&255),Zi(o,r.total_in>>16&255),Zi(o,r.total_in>>24&255)):(ab(o,r.adler>>>16),ab(o,65535&r.adler)),TA(r),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?el:LJ)},OCe=(r,n)=>{let o=n.length;if(lb(r))return Cp;const a=r.state,l=a.wrap;if(l===2||l===1&&a.status!==qy||a.lookahead)return Cp;if(l===1&&(r.adler=ob(r.adler,n,o,0)),a.wrap=0,o>=a.w_size){l===0&&(yv(a.head),a.strstart=0,a.block_start=0,a.insert=0);let _=new Uint8Array(a.w_size);_.set(n.subarray(o-a.w_size,o),0),n=_,o=a.w_size}const d=r.avail_in,h=r.next_in,v=r.input;for(r.avail_in=o,r.next_in=0,r.input=n,Yy(a);a.lookahead>=3;){let _=a.strstart,y=a.lookahead-2;do a.ins_h=Ev(a,a.ins_h,a.window[_+3-1]),a.prev[_&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=_,_++;while(--y);a.strstart=_,a.lookahead=2,Yy(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,r.next_in=h,r.input=v,r.avail_in=d,a.wrap=l,el},ub={deflateInit:(r,n)=>MJ(r,n,H2,15,8,yCe),deflateInit2:MJ,deflateReset:UJ,deflateResetKeep:xJ,deflateSetHeader:(r,n)=>lb(r)||r.state.wrap!==2?Cp:(r.state.gzhead=n,el),deflate:ICe,deflateEnd:r=>{if(lb(r))return Cp;const n=r.state.status;return r.state=null,n===g1?m1(r,pCe):el},deflateSetDictionary:OCe,deflateInfo:"pako deflate (from Nodeca project)"};const NCe=(r,n)=>Object.prototype.hasOwnProperty.call(r,n);var j2={assign:function(r){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const o=n.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(const a in o)NCe(o,a)&&(r[a]=o[a])}}return r},flattenChunks:r=>{let n=0;for(let a=0,l=r.length;a<l;a++)n+=r[a].length;const o=new Uint8Array(n);for(let a=0,l=0,d=r.length;a<d;a++){let h=r[a];o.set(h,l),l+=h.length}return o}};let FJ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{FJ=!1}const Ab=new Uint8Array(256);for(let r=0;r<256;r++)Ab[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Ab[254]=Ab[254]=1;var db={string2buf:r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let n,o,a,l,d,h=r.length,v=0;for(l=0;l<h;l++)o=r.charCodeAt(l),(64512&o)==55296&&l+1<h&&(a=r.charCodeAt(l+1),(64512&a)==56320&&(o=65536+(o-55296<<10)+(a-56320),l++)),v+=o<128?1:o<2048?2:o<65536?3:4;for(n=new Uint8Array(v),d=0,l=0;d<v;l++)o=r.charCodeAt(l),(64512&o)==55296&&l+1<h&&(a=r.charCodeAt(l+1),(64512&a)==56320&&(o=65536+(o-55296<<10)+(a-56320),l++)),o<128?n[d++]=o:o<2048?(n[d++]=192|o>>>6,n[d++]=128|63&o):o<65536?(n[d++]=224|o>>>12,n[d++]=128|o>>>6&63,n[d++]=128|63&o):(n[d++]=240|o>>>18,n[d++]=128|o>>>12&63,n[d++]=128|o>>>6&63,n[d++]=128|63&o);return n},buf2string:(r,n)=>{const o=n||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,n));let a,l;const d=new Array(2*o);for(l=0,a=0;a<o;){let h=r[a++];if(h<128){d[l++]=h;continue}let v=Ab[h];if(v>4)d[l++]=65533,a+=v-1;else{for(h&=v===2?31:v===3?15:7;v>1&&a<o;)h=h<<6|63&r[a++],v--;v>1?d[l++]=65533:h<65536?d[l++]=h:(h-=65536,d[l++]=55296|h>>10&1023,d[l++]=56320|1023&h)}}return((h,v)=>{if(v<65534&&h.subarray&&FJ)return String.fromCharCode.apply(null,h.length===v?h:h.subarray(0,v));let _="";for(let y=0;y<v;y++)_+=String.fromCharCode(h[y]);return _})(d,l)},utf8border:(r,n)=>{(n=n||r.length)>r.length&&(n=r.length);let o=n-1;for(;o>=0&&(192&r[o])==128;)o--;return o<0||o===0?n:o+Ab[r[o]]>n?o:n}},VJ=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const QJ=Object.prototype.toString,{Z_NO_FLUSH:BCe,Z_SYNC_FLUSH:LCe,Z_FULL_FLUSH:PCe,Z_FINISH:kCe,Z_OK:K2,Z_STREAM_END:DCe,Z_DEFAULT_COMPRESSION:xCe,Z_DEFAULT_STRATEGY:UCe,Z_DEFLATED:MCe}=zy;function fb(r){this.options=j2.assign({level:xCe,method:MCe,chunkSize:16384,windowBits:15,memLevel:8,strategy:UCe},r||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VJ,this.strm.avail_out=0;let o=ub.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(o!==K2)throw new Error(h1[o]);if(n.header&&ub.deflateSetHeader(this.strm,n.header),n.dictionary){let a;if(a=typeof n.dictionary=="string"?db.string2buf(n.dictionary):QJ.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,o=ub.deflateSetDictionary(this.strm,a),o!==K2)throw new Error(h1[o]);this._dict_set=!0}}function tM(r,n){const o=new fb(n);if(o.push(r,!0),o.err)throw o.msg||h1[o.err];return o.result}fb.prototype.push=function(r,n){const o=this.strm,a=this.options.chunkSize;let l,d;if(this.ended)return!1;for(d=n===~~n?n:n===!0?kCe:BCe,typeof r=="string"?o.input=db.string2buf(r):QJ.call(r)==="[object ArrayBuffer]"?o.input=new Uint8Array(r):o.input=r,o.next_in=0,o.avail_in=o.input.length;;)if(o.avail_out===0&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(d===LCe||d===PCe)&&o.avail_out<=6)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else{if(l=ub.deflate(o,d),l===DCe)return o.next_out>0&&this.onData(o.output.subarray(0,o.next_out)),l=ub.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===K2;if(o.avail_out!==0){if(d>0&&o.next_out>0)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else if(o.avail_in===0)break}else this.onData(o.output)}return!0},fb.prototype.onData=function(r){this.chunks.push(r)},fb.prototype.onEnd=function(r){r===K2&&(this.result=j2.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};var FCe={Deflate:fb,deflate:tM,deflateRaw:function(r,n){return(n=n||{}).raw=!0,tM(r,n)},gzip:function(r,n){return(n=n||{}).gzip=!0,tM(r,n)},constants:zy};const W2=16209;var VCe=function(r,n){let o,a,l,d,h,v,_,y,C,B,L,x,X,G,q,Ae,ue,_e,De,Le,Te,ze,rt,At;const wt=r.state;o=r.next_in,rt=r.input,a=o+(r.avail_in-5),l=r.next_out,At=r.output,d=l-(n-r.avail_out),h=l+(r.avail_out-257),v=wt.dmax,_=wt.wsize,y=wt.whave,C=wt.wnext,B=wt.window,L=wt.hold,x=wt.bits,X=wt.lencode,G=wt.distcode,q=(1<<wt.lenbits)-1,Ae=(1<<wt.distbits)-1;e:do{x<15&&(L+=rt[o++]<<x,x+=8,L+=rt[o++]<<x,x+=8),ue=X[L&q];t:for(;;){if(_e=ue>>>24,L>>>=_e,x-=_e,_e=ue>>>16&255,_e===0)At[l++]=65535&ue;else{if(!(16&_e)){if(!(64&_e)){ue=X[(65535&ue)+(L&(1<<_e)-1)];continue t}if(32&_e){wt.mode=16191;break e}r.msg="invalid literal/length code",wt.mode=W2;break e}De=65535&ue,_e&=15,_e&&(x<_e&&(L+=rt[o++]<<x,x+=8),De+=L&(1<<_e)-1,L>>>=_e,x-=_e),x<15&&(L+=rt[o++]<<x,x+=8,L+=rt[o++]<<x,x+=8),ue=G[L&Ae];r:for(;;){if(_e=ue>>>24,L>>>=_e,x-=_e,_e=ue>>>16&255,!(16&_e)){if(!(64&_e)){ue=G[(65535&ue)+(L&(1<<_e)-1)];continue r}r.msg="invalid distance code",wt.mode=W2;break e}if(Le=65535&ue,_e&=15,x<_e&&(L+=rt[o++]<<x,x+=8,x<_e&&(L+=rt[o++]<<x,x+=8)),Le+=L&(1<<_e)-1,Le>v){r.msg="invalid distance too far back",wt.mode=W2;break e}if(L>>>=_e,x-=_e,_e=l-d,Le>_e){if(_e=Le-_e,_e>y&&wt.sane){r.msg="invalid distance too far back",wt.mode=W2;break e}if(Te=0,ze=B,C===0){if(Te+=_-_e,_e<De){De-=_e;do At[l++]=B[Te++];while(--_e);Te=l-Le,ze=At}}else if(C<_e){if(Te+=_+C-_e,_e-=C,_e<De){De-=_e;do At[l++]=B[Te++];while(--_e);if(Te=0,C<De){_e=C,De-=_e;do At[l++]=B[Te++];while(--_e);Te=l-Le,ze=At}}}else if(Te+=C-_e,_e<De){De-=_e;do At[l++]=B[Te++];while(--_e);Te=l-Le,ze=At}for(;De>2;)At[l++]=ze[Te++],At[l++]=ze[Te++],At[l++]=ze[Te++],De-=3;De&&(At[l++]=ze[Te++],De>1&&(At[l++]=ze[Te++]))}else{Te=l-Le;do At[l++]=At[Te++],At[l++]=At[Te++],At[l++]=At[Te++],De-=3;while(De>2);De&&(At[l++]=At[Te++],De>1&&(At[l++]=At[Te++]))}break}}break}}while(o<a&&l<h);De=x>>3,o-=De,x-=De<<3,L&=(1<<x)-1,r.next_in=o,r.next_out=l,r.avail_in=o<a?a-o+5:5-(o-a),r.avail_out=l<h?h-l+257:257-(l-h),wt.hold=L,wt.bits=x};const G2=15,QCe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),HCe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jCe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),KCe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var hb=(r,n,o,a,l,d,h,v)=>{const _=v.bits;let y,C,B,L,x,X,G=0,q=0,Ae=0,ue=0,_e=0,De=0,Le=0,Te=0,ze=0,rt=0,At=null;const wt=new Uint16Array(16),Gr=new Uint16Array(16);let en,Or,Ln,Tn=null;for(G=0;G<=G2;G++)wt[G]=0;for(q=0;q<a;q++)wt[n[o+q]]++;for(_e=_,ue=G2;ue>=1&&wt[ue]===0;ue--);if(_e>ue&&(_e=ue),ue===0)return l[d++]=20971520,l[d++]=20971520,v.bits=1,0;for(Ae=1;Ae<ue&&wt[Ae]===0;Ae++);for(_e<Ae&&(_e=Ae),Te=1,G=1;G<=G2;G++)if(Te<<=1,Te-=wt[G],Te<0)return-1;if(Te>0&&(r===0||ue!==1))return-1;for(Gr[1]=0,G=1;G<G2;G++)Gr[G+1]=Gr[G]+wt[G];for(q=0;q<a;q++)n[o+q]!==0&&(h[Gr[n[o+q]]++]=q);if(r===0?(At=Tn=h,X=20):r===1?(At=QCe,Tn=HCe,X=257):(At=jCe,Tn=KCe,X=0),rt=0,q=0,G=Ae,x=d,De=_e,Le=0,B=-1,ze=1<<_e,L=ze-1,r===1&&ze>852||r===2&&ze>592)return 1;for(;;){en=G-Le,h[q]+1<X?(Or=0,Ln=h[q]):h[q]>=X?(Or=Tn[h[q]-X],Ln=At[h[q]-X]):(Or=96,Ln=0),y=1<<G-Le,C=1<<De,Ae=C;do C-=y,l[x+(rt>>Le)+C]=en<<24|Or<<16|Ln|0;while(C!==0);for(y=1<<G-1;rt&y;)y>>=1;if(y!==0?(rt&=y-1,rt+=y):rt=0,q++,--wt[G]==0){if(G===ue)break;G=n[o+h[q]]}if(G>_e&&(rt&L)!==B){for(Le===0&&(Le=_e),x+=Ae,De=G-Le,Te=1<<De;De+Le<ue&&(Te-=wt[De+Le],!(Te<=0));)De++,Te<<=1;if(ze+=1<<De,r===1&&ze>852||r===2&&ze>592)return 1;B=rt&L,l[B]=_e<<24|De<<16|x-d|0}}return rt!==0&&(l[x+rt]=G-Le<<24|64<<16|0),v.bits=_e,0};const{Z_FINISH:HJ,Z_BLOCK:WCe,Z_TREES:$2,Z_OK:v1,Z_STREAM_END:GCe,Z_NEED_DICT:$Ce,Z_STREAM_ERROR:Pd,Z_DATA_ERROR:jJ,Z_MEM_ERROR:KJ,Z_BUF_ERROR:zCe,Z_DEFLATED:WJ}=zy,z2=16180,q2=16190,Hg=16191,rM=16192,nM=16194,Y2=16199,X2=16200,iM=16206,ps=16209,GJ=r=>(r>>>24&255)+(r>>>8&65280)+((65280&r)<<8)+((255&r)<<24);function qCe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const _1=r=>{if(!r)return 1;const n=r.state;return!n||n.strm!==r||n.mode<z2||n.mode>16211?1:0},$J=r=>{if(_1(r))return Pd;const n=r.state;return r.total_in=r.total_out=n.total=0,r.msg="",n.wrap&&(r.adler=1&n.wrap),n.mode=z2,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,v1},zJ=r=>{if(_1(r))return Pd;const n=r.state;return n.wsize=0,n.whave=0,n.wnext=0,$J(r)},qJ=(r,n)=>{let o;if(_1(r))return Pd;const a=r.state;return n<0?(o=0,n=-n):(o=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Pd:(a.window!==null&&a.wbits!==n&&(a.window=null),a.wrap=o,a.wbits=n,zJ(r))},YJ=(r,n)=>{if(!r)return Pd;const o=new qCe;r.state=o,o.strm=r,o.window=null,o.mode=z2;const a=qJ(r,n);return a!==v1&&(r.state=null),a};let oM,sM,XJ=!0;const YCe=r=>{if(XJ){oM=new Int32Array(512),sM=new Int32Array(32);let n=0;for(;n<144;)r.lens[n++]=8;for(;n<256;)r.lens[n++]=9;for(;n<280;)r.lens[n++]=7;for(;n<288;)r.lens[n++]=8;for(hb(1,r.lens,0,288,oM,0,r.work,{bits:9}),n=0;n<32;)r.lens[n++]=5;hb(2,r.lens,0,32,sM,0,r.work,{bits:5}),XJ=!1}r.lencode=oM,r.lenbits=9,r.distcode=sM,r.distbits=5},JJ=(r,n,o,a)=>{let l;const d=r.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new Uint8Array(d.wsize)),a>=d.wsize?(d.window.set(n.subarray(o-d.wsize,o),0),d.wnext=0,d.whave=d.wsize):(l=d.wsize-d.wnext,l>a&&(l=a),d.window.set(n.subarray(o-a,o-a+l),d.wnext),(a-=l)?(d.window.set(n.subarray(o-a,o),0),d.wnext=a,d.whave=d.wsize):(d.wnext+=l,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=l))),0};var XCe=(r,n)=>{let o,a,l,d,h,v,_,y,C,B,L,x,X,G,q,Ae,ue,_e,De,Le,Te,ze,rt=0;const At=new Uint8Array(4);let wt,Gr;const en=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_1(r)||!r.output||!r.input&&r.avail_in!==0)return Pd;o=r.state,o.mode===Hg&&(o.mode=rM),h=r.next_out,l=r.output,_=r.avail_out,d=r.next_in,a=r.input,v=r.avail_in,y=o.hold,C=o.bits,B=v,L=_,ze=v1;e:for(;;)switch(o.mode){case z2:if(o.wrap===0){o.mode=rM;break}for(;C<16;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(2&o.wrap&&y===35615){o.wbits===0&&(o.wbits=15),o.check=0,At[0]=255&y,At[1]=y>>>8&255,o.check=Rc(o.check,At,2,0),y=0,C=0,o.mode=16181;break}if(o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&y)<<8)+(y>>8))%31){r.msg="incorrect header check",o.mode=ps;break}if((15&y)!==WJ){r.msg="unknown compression method",o.mode=ps;break}if(y>>>=4,C-=4,Te=8+(15&y),o.wbits===0&&(o.wbits=Te),Te>15||Te>o.wbits){r.msg="invalid window size",o.mode=ps;break}o.dmax=1<<o.wbits,o.flags=0,r.adler=o.check=1,o.mode=512&y?16189:Hg,y=0,C=0;break;case 16181:for(;C<16;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(o.flags=y,(255&sc(o))!==WJ){r.msg="unknown compression method",o.mode=ps;break}if(57344&sc(o)){r.msg="unknown header flags set",o.mode=ps;break}o.head&&(o.head.text=y>>8&1),512&sc(o)&&4&o.wrap&&(At[0]=255&y,At[1]=y>>>8&255,o.check=Rc(o.check,At,2,0)),y=0,C=0,o.mode=16182;case 16182:for(;C<32;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}o.head&&(o.head.time=y),512&sc(o)&&4&o.wrap&&(At[0]=255&y,At[1]=y>>>8&255,At[2]=y>>>16&255,At[3]=y>>>24&255,o.check=Rc(o.check,At,4,0)),y=0,C=0,o.mode=16183;case 16183:for(;C<16;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}o.head&&(o.head.xflags=255&y,o.head.os=y>>8),512&sc(o)&&4&o.wrap&&(At[0]=255&y,At[1]=y>>>8&255,o.check=Rc(o.check,At,2,0)),y=0,C=0,o.mode=16184;case 16184:if(1024&sc(o)){for(;C<16;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}o.length=y,o.head&&(o.head.extra_len=y),512&sc(o)&&4&o.wrap&&(At[0]=255&y,At[1]=y>>>8&255,o.check=Rc(o.check,At,2,0)),y=0,C=0}else o.head&&(o.head.extra=null);o.mode=16185;case 16185:if(1024&sc(o)&&(x=o.length,x>v&&(x=v),x&&(o.head&&(Te=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Uint8Array(o.head.extra_len)),o.head.extra.set(a.subarray(d,d+x),Te)),512&sc(o)&&4&o.wrap&&(o.check=Rc(o.check,a,x,d)),v-=x,d+=x,o.length-=x),o.length))break e;o.length=0,o.mode=16186;case 16186:if(2048&sc(o)){if(v===0)break e;x=0;do Te=a[d+x++],o.head&&Te&&o.length<65536&&(o.head.name+=String.fromCharCode(Te));while(Te&&x<v);if(512&sc(o)&&4&o.wrap&&(o.check=Rc(o.check,a,x,d)),v-=x,d+=x,Te)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=16187;case 16187:if(4096&sc(o)){if(v===0)break e;x=0;do Te=a[d+x++],o.head&&Te&&o.length<65536&&(o.head.comment+=String.fromCharCode(Te));while(Te&&x<v);if(512&sc(o)&&4&o.wrap&&(o.check=Rc(o.check,a,x,d)),v-=x,d+=x,Te)break e}else o.head&&(o.head.comment=null);o.mode=16188;case 16188:if(512&sc(o)){for(;C<16;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(4&o.wrap&&y!==(65535&o.check)){r.msg="header crc mismatch",o.mode=ps;break}y=0,C=0}o.head&&(o.head.hcrc=sc(o)>>9&1,o.head.done=!0),r.adler=o.check=0,o.mode=Hg;break;case 16189:for(;C<32;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}r.adler=o.check=GJ(y),y=0,C=0,o.mode=q2;case q2:if(o.havedict===0)return r.next_out=h,r.avail_out=_,r.next_in=d,r.avail_in=v,o.hold=y,o.bits=C,$Ce;r.adler=o.check=1,o.mode=Hg;case Hg:if(n===WCe||n===$2)break e;case rM:if(o.last){y>>>=7&C,C-=7&C,o.mode=iM;break}for(;C<3;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}switch(o.last=1&y,y>>>=1,C-=1,3&y){case 0:o.mode=16193;break;case 1:if(YCe(o),o.mode=Y2,n===$2){y>>>=2,C-=2;break e}break;case 2:o.mode=16196;break;case 3:r.msg="invalid block type",o.mode=ps}y>>>=2,C-=2;break;case 16193:for(y>>>=7&C,C-=7&C;C<32;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if((65535&y)!=(y>>>16^65535)){r.msg="invalid stored block lengths",o.mode=ps;break}if(o.length=65535&y,y=0,C=0,o.mode=nM,n===$2)break e;case nM:o.mode=16195;case 16195:if(x=o.length,x){if(x>v&&(x=v),x>_&&(x=_),x===0)break e;l.set(a.subarray(d,d+x),h),v-=x,d+=x,_-=x,h+=x,o.length-=x;break}o.mode=Hg;break;case 16196:for(;C<14;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(o.nlen=257+(31&y),y>>>=5,C-=5,o.ndist=1+(31&y),y>>>=5,C-=5,o.ncode=4+(15&y),y>>>=4,C-=4,o.nlen>286||o.ndist>30){r.msg="too many length or distance symbols",o.mode=ps;break}o.have=0,o.mode=16197;case 16197:for(;o.have<o.ncode;){for(;C<3;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}o.lens[en[o.have++]]=7&y,y>>>=3,C-=3}for(;o.have<19;)o.lens[en[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,wt={bits:o.lenbits},ze=hb(0,o.lens,0,19,o.lencode,0,o.work,wt),o.lenbits=wt.bits,ze){r.msg="invalid code lengths set",o.mode=ps;break}o.have=0,o.mode=16198;case 16198:for(;o.have<o.nlen+o.ndist;){for(;rt=o.lencode[y&(1<<o.lenbits)-1],q=rt>>>24,Ae=rt>>>16&255,ue=65535&rt,!(q<=C);){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(ue<16)y>>>=q,C-=q,o.lens[o.have++]=ue;else{if(ue===16){for(Gr=q+2;C<Gr;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(y>>>=q,C-=q,o.have===0){r.msg="invalid bit length repeat",o.mode=ps;break}Te=o.lens[o.have-1],x=3+(3&y),y>>>=2,C-=2}else if(ue===17){for(Gr=q+3;C<Gr;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}y>>>=q,C-=q,Te=0,x=3+(7&y),y>>>=3,C-=3}else{for(Gr=q+7;C<Gr;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}y>>>=q,C-=q,Te=0,x=11+(127&y),y>>>=7,C-=7}if(o.have+x>o.nlen+o.ndist){r.msg="invalid bit length repeat",o.mode=ps;break}for(;x--;)o.lens[o.have++]=Te}}if(o.mode===ps)break;if(o.lens[256]===0){r.msg="invalid code -- missing end-of-block",o.mode=ps;break}if(o.lenbits=9,wt={bits:o.lenbits},ze=hb(1,o.lens,0,o.nlen,o.lencode,0,o.work,wt),o.lenbits=wt.bits,ze){r.msg="invalid literal/lengths set",o.mode=ps;break}if(o.distbits=6,o.distcode=o.distdyn,wt={bits:o.distbits},ze=hb(2,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,wt),o.distbits=wt.bits,ze){r.msg="invalid distances set",o.mode=ps;break}if(o.mode=Y2,n===$2)break e;case Y2:o.mode=X2;case X2:if(v>=6&&_>=258){r.next_out=h,r.avail_out=_,r.next_in=d,r.avail_in=v,o.hold=y,o.bits=C,VCe(r,L),h=r.next_out,l=r.output,_=r.avail_out,d=r.next_in,a=r.input,v=r.avail_in,y=o.hold,C=o.bits,o.mode===Hg&&(o.back=-1);break}for(o.back=0;rt=o.lencode[y&(1<<o.lenbits)-1],q=rt>>>24,Ae=rt>>>16&255,ue=65535&rt,!(q<=C);){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(Ae&&!(240&Ae)){for(_e=q,De=Ae,Le=ue;rt=o.lencode[Le+((y&(1<<_e+De)-1)>>_e)],q=rt>>>24,Ae=rt>>>16&255,ue=65535&rt,!(_e+q<=C);){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}y>>>=_e,C-=_e,o.back+=_e}if(y>>>=q,C-=q,o.back+=q,o.length=ue,Ae===0){o.mode=16205;break}if(32&Ae){o.back=-1,o.mode=Hg;break}if(64&Ae){r.msg="invalid literal/length code",o.mode=ps;break}o.extra=15&Ae,o.mode=16201;case 16201:if(o.extra){for(Gr=o.extra;C<Gr;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}o.length+=y&(1<<o.extra)-1,y>>>=o.extra,C-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=16202;case 16202:for(;rt=o.distcode[y&(1<<o.distbits)-1],q=rt>>>24,Ae=rt>>>16&255,ue=65535&rt,!(q<=C);){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(!(240&Ae)){for(_e=q,De=Ae,Le=ue;rt=o.distcode[Le+((y&(1<<_e+De)-1)>>_e)],q=rt>>>24,Ae=rt>>>16&255,ue=65535&rt,!(_e+q<=C);){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}y>>>=_e,C-=_e,o.back+=_e}if(y>>>=q,C-=q,o.back+=q,64&Ae){r.msg="invalid distance code",o.mode=ps;break}o.offset=ue,o.extra=15&Ae,o.mode=16203;case 16203:if(o.extra){for(Gr=o.extra;C<Gr;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}o.offset+=y&(1<<o.extra)-1,y>>>=o.extra,C-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){r.msg="invalid distance too far back",o.mode=ps;break}o.mode=16204;case 16204:if(_===0)break e;if(x=L-_,o.offset>x){if(x=o.offset-x,x>o.whave&&o.sane){r.msg="invalid distance too far back",o.mode=ps;break}x>o.wnext?(x-=o.wnext,X=o.wsize-x):X=o.wnext-x,x>o.length&&(x=o.length),G=o.window}else G=l,X=h-o.offset,x=o.length;x>_&&(x=_),_-=x,o.length-=x;do l[h++]=G[X++];while(--x);o.length===0&&(o.mode=X2);break;case 16205:if(_===0)break e;l[h++]=o.length,_--,o.mode=X2;break;case iM:if(o.wrap){for(;C<32;){if(v===0)break e;v--,y|=a[d++]<<C,C+=8}if(L-=_,r.total_out+=L,o.total+=L,4&o.wrap&&L&&(r.adler=o.check=sc(o)?Rc(o.check,l,L,h-L):ob(o.check,l,L,h-L)),L=_,4&o.wrap&&(sc(o)?y:GJ(y))!==o.check){r.msg="incorrect data check",o.mode=ps;break}y=0,C=0}o.mode=16207;case 16207:if(o.wrap&&sc(o)){for(;C<32;){if(v===0)break e;v--,y+=a[d++]<<C,C+=8}if(4&o.wrap&&y!==(4294967295&o.total)){r.msg="incorrect length check",o.mode=ps;break}y=0,C=0}o.mode=16208;case 16208:ze=GCe;break e;case ps:ze=jJ;break e;case 16210:return KJ;default:return Pd}return r.next_out=h,r.avail_out=_,r.next_in=d,r.avail_in=v,o.hold=y,o.bits=C,(o.wsize||L!==r.avail_out&&o.mode<ps&&(o.mode<iM||n!==HJ))&&JJ(r,r.output,r.next_out,L-r.avail_out),B-=r.avail_in,L-=r.avail_out,r.total_in+=B,r.total_out+=L,o.total+=L,4&o.wrap&&L&&(r.adler=o.check=sc(o)?Rc(o.check,l,L,r.next_out-L):ob(o.check,l,L,r.next_out-L)),r.data_type=o.bits+(o.last?64:0)+(o.mode===Hg?128:0)+(o.mode===Y2||o.mode===nM?256:0),(B===0&&L===0||n===HJ)&&ze===v1&&(ze=zCe),ze},jg={inflateReset:zJ,inflateReset2:qJ,inflateResetKeep:$J,inflateInit:r=>YJ(r,15),inflateInit2:YJ,inflate:XCe,inflateEnd:r=>{if(_1(r))return Pd;let n=r.state;return n.window&&(n.window=null),r.state=null,v1},inflateGetHeader:(r,n)=>{if(_1(r))return Pd;const o=r.state;return 2&o.wrap?(o.head=n,n.done=!1,v1):Pd},inflateSetDictionary:(r,n)=>{const o=n.length;let a,l,d;return _1(r)?Pd:(a=r.state,a.wrap!==0&&a.mode!==q2?Pd:a.mode===q2&&(l=1,l=ob(l,n,o,0),l!==a.check)?jJ:(d=JJ(r,n,o,o),d?(a.mode=16210,KJ):(a.havedict=1,v1)))},inflateInfo:"pako inflate (from Nodeca project)"},JCe=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ZJ=Object.prototype.toString,{Z_NO_FLUSH:ZCe,Z_FINISH:eTe,Z_OK:pb,Z_STREAM_END:aM,Z_NEED_DICT:cM,Z_STREAM_ERROR:tTe,Z_DATA_ERROR:eZ,Z_MEM_ERROR:rTe}=zy;function gb(r){this.options=j2.assign({chunkSize:65536,windowBits:15,to:""},r||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||r&&r.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&!(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VJ,this.strm.avail_out=0;let o=jg.inflateInit2(this.strm,n.windowBits);if(o!==pb)throw new Error(h1[o]);if(this.header=new JCe,jg.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=db.string2buf(n.dictionary):ZJ.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(o=jg.inflateSetDictionary(this.strm,n.dictionary),o!==pb)))throw new Error(h1[o])}function lM(r,n){const o=new gb(n);if(o.push(r),o.err)throw o.msg||h1[o.err];return o.result}gb.prototype.push=function(r,n){const o=this.strm,a=this.options.chunkSize,l=this.options.dictionary;let d,h,v;if(this.ended)return!1;for(h=n===~~n?n:n===!0?eTe:ZCe,ZJ.call(r)==="[object ArrayBuffer]"?o.input=new Uint8Array(r):o.input=r,o.next_in=0,o.avail_in=o.input.length;;){for(o.avail_out===0&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),d=jg.inflate(o,h),d===cM&&l&&(d=jg.inflateSetDictionary(o,l),d===pb?d=jg.inflate(o,h):d===eZ&&(d=cM));o.avail_in>0&&d===aM&&o.state.wrap>0&&r[o.next_in]!==0;)jg.inflateReset(o),d=jg.inflate(o,h);switch(d){case tTe:case eZ:case cM:case rTe:return this.onEnd(d),this.ended=!0,!1}if(v=o.avail_out,o.next_out&&(o.avail_out===0||d===aM))if(this.options.to==="string"){let _=db.utf8border(o.output,o.next_out),y=o.next_out-_,C=db.buf2string(o.output,_);o.next_out=y,o.avail_out=a-y,y&&o.output.set(o.output.subarray(_,_+y),0),this.onData(C)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(d!==pb||v!==0){if(d===aM)return d=jg.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,!0;if(o.avail_in===0)break}}return!0},gb.prototype.onData=function(r){this.chunks.push(r)},gb.prototype.onEnd=function(r){r===pb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j2.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};var nTe={Inflate:gb,inflate:lM,inflateRaw:function(r,n){return(n=n||{}).raw=!0,lM(r,n)},ungzip:lM,constants:zy};const{Deflate:TAt,deflate:iTe,deflateRaw:RAt,gzip:IAt}=FCe,{Inflate:OAt,inflate:oTe,inflateRaw:NAt,ungzip:BAt}=nTe;var sTe=iTe,aTe=oTe,tZ=function(r){return r[r.ONE_BYTE=0]="ONE_BYTE",r[r.TWO_BYTE=1]="TWO_BYTE",r}(tZ||{});class cTe{constructor(){re(this,"_sequence",0),re(this,"_startTime",Date.now()),re(this,"isUseOneByte",!0)}get startTime(){const n=Date.now()-this._startTime;return n<Math.pow(2,16)?n:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(n){const o={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:n};if(n.byteLength>128){const v=new Uint8Array(4);v.set([1,0,0,0]);const _={id:0,length:4,data:v.buffer},y={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[_]};o.commonPacketHeader.extension=1,o.extension=y,o.payload=this.compress(n),o.commonPacketHeader.length=8+(o.extension.length+2)+o.payload.byteLength}else o.commonPacketHeader.length=8+o.payload.byteLength;me("SHOW_DATASTREAM2_LOG")&&H.debug("send data header: ".concat(JSON.stringify(o.commonPacketHeader)));const a=new ArrayBuffer(o.commonPacketHeader.length),l=new Uint8Array(a),d=new DataView(a);let h=0;if(d.setUint16(h,o.commonPacketHeader.extension<<15|o.commonPacketHeader.reserved<<14|o.commonPacketHeader.length,!0),h+=2,d.setUint32(h,o.commonPacketHeader.sequence,!0),h+=4,d.setUint16(h,o.commonStreamHeader,!0),h+=2,o.extension){const v=this.serializeExtension(o.extension);l.set(new Uint8Array(v),h),h+=v.byteLength}if(l.set(new Uint8Array(o.payload),h),h+=o.payload.byteLength,h!==o.commonPacketHeader.length)throw Error("serialize error!");return a}deserialize(n){if(n.byteLength<4)return new ArrayBuffer(0);const o=new DataView(n);let a=0;const l=o.getUint16(a,!0);a+=2;const d={length:16383&l,reserved:(16384&l)>>14,extension:(32768&l)>>15,sequence:o.getUint16(a+2,!0)<<16|o.getUint16(a,!0)};let h,v;if(a+=4,me("SHOW_DATASTREAM2_LOG")&&H.debug("receive data header: ".concat(JSON.stringify(d))),o.getUint16(a,!0),a+=2,d.extension){v=this.deserializeExtension(n.slice(a)),a+=2+v.length,h=n.slice(a);let _=!1;if(v.datas.length>0){const y=v.datas.find(C=>C.id===0);y&&(_=(1&new DataView(y.data).getUint32(0,!0))==1)}h=_?this.decompress(h):h}else h=n.slice(8);return h}serializeExtension(n){const{profile:o,length:a,datas:l}=n,d=new ArrayBuffer(a+2),h=new Uint8Array(d),v=new DataView(d);let _=0;if(v.setUint8(_++,o),v.setUint8(_++,a),l.forEach(y=>{o?(v.setUint8(_++,y.id),v.setUint8(_++,y.length),h.set(new Uint8Array(y.data),_),_+=y.data.byteLength):(v.setUint8(_++,y.id|y.length<<4),h.set(new Uint8Array(y.data),_),_+=y.data.byteLength)}),_!==a+2)throw Error("serialize extension error, is ".concat(_,"!==").concat(a+2));return d}deserializeExtension(n){const o=new DataView(n);let a=0;const l=o.getUint8(a);a++;const d=o.getUint8(a);a++;const h=l===tZ.TWO_BYTE,v=[],_=new DataView(n,2);let y=0;for(;y<d;){let C=0,B=0,L=new ArrayBuffer(0);h?(C=_.getUint8(y),y++,B=_.getUint8(y),y++):(C=15&_.getUint8(y),B=_.getUint8(y)>>4,y++),B>0&&(L=_.buffer.slice(y+2,y+2+B),y+=L.byteLength),v.push({id:C,length:B,data:L})}if(y!==d)throw Error("parse error");return{profile:l,length:d,datas:v}}decompress(n){return aTe(new Uint8Array(n))}compress(n){return sTe(new Uint8Array(n))}}const lTe={name:"DataStream",create:(r,n)=>{const o=n?new _Se(r):new ySe(r);return o.useDataStream(new cTe),o}};class uTe extends Mi{constructor(n,o,a){super(),re(this,"ws",void 0),re(this,"requestId",1),re(this,"heartBeatTimer",void 0),re(this,"joinInfo",void 0),re(this,"clientId",void 0),re(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),re(this,"onClose",l=>{this.emit("close"),this.dispose()}),re(this,"onMessage",l=>{const d=JSON.parse(l.data);if(!d||d.command!=="serverResponse"||!d.requestId)return d&&d.command==="serverStatus"&&d.serverStatus&&d.serverStatus.command?(this.emit("status",d.serverStatus),void this.emit(d.serverStatus.command,d.serverStatus)):void 0;this.emit("req_".concat(d.requestId),d)}),this.joinInfo=n,this.clientId=o,this.ws=new QS("cross-channel-".concat(this.clientId),a),this.ws.on(jr.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(jr.CONNECTED,this.onOpen),this.ws.on(jr.ON_MESSAGE,this.onMessage),this.ws.on(jr.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(n){const o=this.requestId++;return n.requestId=o,n.seq=o,this.ws.sendMessage(n),o}waitStatus(n){return new Mt((o,a)=>{const l=window.setTimeout(()=>{a(new Je(de.TIMEOUT,"wait status timeout, status: ".concat(n)))},5e3);this.once(n,d=>{window.clearTimeout(l),d.state&&d.state!==0?a(new Je(de.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(n))):o(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),a(new Je(de.WS_ABORT))})})}async request(n){if(this.ws.state==="closed")throw new Je(de.WS_DISCONNECT);const o=()=>new Mt((h,v)=>{this.ws.once(jr.CLOSED,()=>v(new Je(de.WS_ABORT))),this.ws.once(jr.CONNECTED,h)});this.ws.state!=="connected"&&await o();const a=this.sendMessage(n),l=new Mt((h,v)=>{const _=()=>{v(new Je(de.WS_ABORT))};this.ws.once(jr.RECONNECTING,_),this.ws.once(jr.CLOSED,_),this.once("req_".concat(a),h),Ps(3e3).then(()=>{this.removeAllListeners("req_".concat(a)),this.ws.off(jr.RECONNECTING,_),this.ws.off(jr.CLOSED,_),v(new Je(de.TIMEOUT,"cross channel ws request timeout"))})}),d=await l;if(!d||d.code!==200)throw new Je(de.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(d)));return d}async connect(n){this.ws.removeAllListeners(jr.REQUEST_NEW_URLS),this.ws.on(jr.REQUEST_NEW_URLS,o=>{o(n)}),await this.ws.init(n)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(n){const o=this.requestId++;return n.requestId=o,this.ws.sendMessage(n),o}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class ATe extends Mi{set state(n){n!==this._state&&(n!==bl.RELAY_STATE_FAILURE&&(this.errorCode=Py.RELAY_OK),this.emit("state",n,this.errorCode),this._state=n)}get state(){return this._state}constructor(n,o,a,l,d){super(),re(this,"joinInfo",void 0),re(this,"sid",void 0),re(this,"clientId",void 0),re(this,"cancelToken",Yc.CancelToken.source()),re(this,"workerToken",void 0),re(this,"requestId",0),re(this,"signal",void 0),re(this,"prevChannelMediaConfig",void 0),re(this,"httpRetryConfig",void 0),re(this,"_resolution",void 0),re(this,"_state",bl.RELAY_STATE_IDLE),re(this,"errorCode",Py.RELAY_OK),re(this,"onStatus",h=>{H.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(h))),h&&h.command&&(h.command==="onAudioPacketReceived"&&this.emit("event",Ug.PACKET_RECEIVED_AUDIO_FROM_SRC),h.command==="onVideoPacketReceived"&&this.emit("event",Ug.PACKET_RECEIVED_VIDEO_FROM_SRC),h.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Py.SRC_TOKEN_EXPIRED,this.state=bl.RELAY_STATE_FAILURE),h.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Py.DEST_TOKEN_EXPIRED,this.state=bl.RELAY_STATE_FAILURE))}),re(this,"onReconnect",async()=>{H.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Ug.NETWORK_DISCONNECTED),this.state=bl.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(h=>{this.state!==bl.RELAY_STATE_IDLE&&(H.error("auto restart channel media relay failed",h.toString()),this.errorCode=Py.SERVER_CONNECTION_LOST,this.state=bl.RELAY_STATE_FAILURE)})}),this.joinInfo=n,this.clientId=o,this.sid=e1(),this.signal=new uTe(this.joinInfo,this.clientId,a),this.httpRetryConfig=l,this._resolution=d}async startChannelMediaRelay(n){if(this.state!==bl.RELAY_STATE_IDLE)throw new Je(de.INVALID_OPERATION);this.state=bl.RELAY_STATE_CONNECTING,await this.connect(),H.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(n)}catch(o){throw o.data&&o.data.serverResponse&&o.data.serverResponse.command==="SetSourceChannel"?new Je(de.CROSS_CHANNEL_FAILED_JOIN_SRC):o.data&&o.data.serverResponse&&o.serverResponse.command==="SetDestChannelStatus"?new Je(de.CROSS_CHANNEL_FAILED_JOIN_DEST):o.data&&o.data.serverResponse&&o.serverResponse.command==="StartPacketTransfer"?new Je(de.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):o}this.prevChannelMediaConfig=n}async updateChannelMediaRelay(n){if(this.state!==bl.RELAY_STATE_RUNNING)throw new Je(de.INVALID_OPERATION);await this.sendUpdateMessage(n),this.prevChannelMediaConfig=n}async setVideoProfile(n){if(this._resolution=n,this.state!==bl.RELAY_STATE_RUNNING)throw new Je(de.INVALID_OPERATION);const o=this.genMessage(Tc.SetVideoProfile);await this.signal.request(o),H.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),H.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=bl.RELAY_STATE_IDLE,this.dispose()}dispose(){H.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Yc.CancelToken.source(),this.state=bl.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const n=await Cbe(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=n.workerToken,await this.signal.connect(n.addressList),this.emit("event",Ug.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(n){const o=this.genMessage(Tc.StopPacketTransfer);await this.signal.request(o),await this.signal.waitStatus("Normal Quit"),H.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const a=this.genMessage(Tc.SetSdkProfile,n);await this.signal.request(a),H.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(Tc.SetSourceChannel,n);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Ug.PACKET_JOINED_SRC_CHANNEL),H.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const d=this.genMessage(Tc.SetSourceUserId,n);await this.signal.request(d),H.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const h=this.genMessage(Tc.SetDestChannel,n);await this.signal.request(h),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Ug.PACKET_JOINED_DEST_CHANNEL),H.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const v=this.genMessage(Tc.StartPacketTransfer,n);await this.signal.request(v),this.emit("event",Ug.PACKET_SENT_TO_DEST_CHANNEL),this.state=bl.RELAY_STATE_RUNNING,H.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(n){const o=this.genMessage(Tc.UpdateDestChannel,n);await this.signal.request(o),this.emit("event",Ug.PACKET_UPDATE_DEST_CHANNEL),H.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const n=this.genMessage(Tc.StopPacketTransfer);await this.signal.request(n),H.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(n,o){const a=[],l=[],d=[];this.requestId+=1;const h={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:yA,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};h.sdkVersion==="4.24.0"&&(h.sdkVersion="0.0.1");let v=null,_=null;switch(n){case Tc.SetSdkProfile:return h.clientRequest={command:"SetSdkProfile",type:"multi_channel"},h;case Tc.SetSourceChannel:if(_=o&&o.getSrcChannelMediaInfo(),!_)throw new Je(de.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceChannel",uid:"0",channelName:_.channelName,token:_.token||this.joinInfo.appId},h;case Tc.SetSourceUserId:if(_=o&&o.getSrcChannelMediaInfo(),!_)throw new Je(de.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceUserId",uid:_.uid+""},h;case Tc.SetDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Je(de.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(y=>{a.push(y.channelName),l.push(y.uid+""),d.push(y.token||this.joinInfo.appId)}),h.clientRequest={command:"SetDestChannel",channelName:a,uid:l,token:d},h;case Tc.StartPacketTransfer:return h.clientRequest={command:"StartPacketTransfer"},h;case Tc.Reconnect:return h.clientRequest={command:"Reconnect"},h;case Tc.StopPacketTransfer:return h.clientRequest={command:"StopPacketTransfer"},h;case Tc.UpdateDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Je(de.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(y=>{a.push(y.channelName),l.push(y.uid+""),d.push(y.token||this.joinInfo.appId)}),h.clientRequest={command:"UpdateDestChannel",channelName:a,uid:l,token:d},h;case Tc.SetVideoProfile:h.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return h}}const dTe={name:"ChannelMediaRelay",create:function(r){return new ATe(r.joinInfo,r.clientId,r.websocketRetryConfig||Ro,r.httpRetryConfig||Ro,r.resolution)}};function rZ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function mb(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?rZ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):rZ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}class fTe extends Mi{constructor(n,o,a,l){super(),re(this,"spec",void 0),re(this,"token",void 0),re(this,"websocket",void 0),re(this,"pingpongTimer",void 0),re(this,"reconnectMode","retry"),re(this,"serviceMode",void 0),re(this,"reqId",0),re(this,"commandReqId",0),re(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),re(this,"handleWebSocketMessage",d=>{if(!d.data)return;const h=JSON.parse(d.data);h.requestId?this.emit("@".concat(h.requestId,"-").concat(h.sid),h):(rr.workerEvent(this.spec.sid,{actionType:"status",serverCode:h.code,workerType:this.serviceMode===yp.TRANSCODE?1:2}),this.emit(sv.PUBLISH_STREAM_STATUS,h))}),this.spec=o,this.token=n,this.serviceMode=l,this.websocket=new QS("live-streaming",a),this.websocket.on(jr.CONNECTED,this.handleWebSocketOpen),this.websocket.on(jr.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(jr.REQUEST_NEW_URLS,(d,h)=>{ea(this,sv.REQUEST_NEW_ADDRESS).then(d).catch(h)}),this.websocket.on(jr.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(n){return this.websocket.init(n)}async request(n,o,a,l){this.reqId+=1,n==="request"&&(this.commandReqId+=1);const d=this.commandReqId,h=this.reqId;if(!h||!this.websocket)throw new Je(de.UNEXPECTED_ERROR);const v=mb({command:n,sdkVersion:yA==="4.24.0"?"0.0.1":yA,seq:h,requestId:h,allocate:a,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},o);if(this.websocket.state==="closed")throw new Je(de.WS_DISCONNECT);const _=()=>new Mt((L,x)=>{this.websocket.once(jr.CLOSED,()=>x(new Je(de.WS_ABORT))),this.websocket.once(jr.CONNECTED,L)});this.websocket.state!=="connected"&&await _(),v.clientRequest&&(v.clientRequest.workerToken=this.token);const y=new Mt((L,x)=>{const X=()=>{x(new Je(de.WS_ABORT))};this.websocket.once(jr.RECONNECTING,X),this.websocket.once(jr.CLOSED,X),this.once("@".concat(h,"-").concat(this.spec.sid),G=>{L(G)})});l&&rr.workerEvent(this.spec.sid,mb(mb({},l),{},{requestId:d,actionType:"request",payload:JSON.stringify(o.clientRequest),serverCode:0,code:0}));const C=Date.now();this.websocket.sendMessage(v);let B=null;try{B=await y}catch(L){if(this.websocket.state==="closed")throw L;return await _(),await this.request(n,o,a)}return l&&rr.workerEvent(this.spec.sid,mb(mb({},l),{},{requestId:d,actionType:"response",payload:JSON.stringify(B.serverResponse),serverCode:B.code,success:B.code===200,responseTime:Date.now()-C})),B.code!==200&&this.handleResponseError(B),B}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const n=yA==="4.24.0"?"0.0.1":yA;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:n,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(n){switch(n.code){case Mo.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void H.warning("live stream response already exists stream");case Mo.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Mo.LIVE_STREAM_RESPONSE_BAD_STREAM:case Mo.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Je(de.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:n.code}).throw();case Mo.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(n.serverResponse.command==="UnpublishStream")return;throw new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Mo.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Je(de.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:n.code}).throw();case Mo.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const o=new Je(de.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(sv.WARNING,o,n.serverResponse.url)}case Mo.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const o=new Je(de.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(sv.WARNING,o,n.serverResponse.url)}case Mo.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Mo.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Je(de.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:n.code}).throw();case Mo.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const o=new Je(de.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(sv.WARNING,o,n.serverResponse.url)}case Mo.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code}).throw();case Mo.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Mo.LIVE_STREAM_RESPONSE_WORKER_LOST:case Mo.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(n.serverResponse.command==="UnpublishStream")return;throw new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Mo.ERROR_FAIL_SEND_MESSAGE:if(n.serverResponse.command==="UnpublishStream")return;if(n.serverResponse.command==="UpdateTranscoding"||n.serverResponse.command==="ControlStream")return new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:n.code}).throw();throw new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Mo.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Mo.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Mo.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Mo.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Je(de.LIVE_STREAMING_CDN_ERROR,"",{code:n.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(FI)},6e3)}}function nZ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Cl(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?nZ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):nZ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}class hTe extends Mi{constructor(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ro,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro;super(),re(this,"onLiveStreamWarning",void 0),re(this,"onLiveStreamError",void 0),re(this,"spec",void 0),re(this,"retryTimeout",1e4),re(this,"connection",void 0),re(this,"httpRetryConfig",void 0),re(this,"wsRetryConfig",void 0),re(this,"streamingTasks",new Map),re(this,"isStartingStreamingTask",!1),re(this,"taskMutex",new ga("live-streaming")),re(this,"cancelToken",Yc.CancelToken.source()),re(this,"transcodingConfig",void 0),re(this,"uapResponse",void 0),re(this,"lastTaskId",1),re(this,"statusError",new Map),this.spec=n,this.httpRetryConfig=a,this.wsRetryConfig=o}async setTranscodingConfig(n){const o=Cl(Cl({},nbe),n);o.videoCodecProfile!==66&&o.videoCodecProfile!==77&&o.videoCodecProfile!==100&&(H.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(o.videoCodecProfile," -> 100")),o.videoCodecProfile=100),o.transcodingUsers||(o.transcodingUsers=o.userConfigs),o.transcodingUsers&&(o.transcodingUsers=o.transcodingUsers.map(h=>Cl(Cl(Cl({},rbe),h),{},{zOrder:h.zOrder?h.zOrder+1:1}))),function(h){ji(h.width)||Xn(h.width,"config.width",0,1e4),ji(h.height)||Xn(h.height,"config.height",0,1e4),ji(h.videoBitrate)||Xn(h.videoBitrate,"config.videoBitrate",1,1e6),ji(h.videoFrameRate)||Xn(h.videoFrameRate,"config.videoFrameRate"),ji(h.lowLatency)||Kf(h.lowLatency,"config.lowLatency"),ji(h.audioSampleRate)||qo(h.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),ji(h.audioBitrate)||Xn(h.audioBitrate,"config.audioBitrate",1,128),ji(h.audioChannels)||qo(h.audioChannels,"config.audioChannels",[1,2,3,4,5]),ji(h.videoGop)||Xn(h.videoGop,"config.videoGop"),ji(h.videoCodecProfile)||qo(h.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),ji(h.userCount)||Xn(h.userCount,"config.userCount",0,17),ji(h.backgroundColor)||Xn(h.backgroundColor,"config.backgroundColor",0,16777215),ji(h.userConfigExtraInfo)||Ls(h.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),h.transcodingUsers&&!ji(h.transcodingUsers)&&(xg(h.transcodingUsers,"config.transcodingUsers"),h.transcodingUsers.forEach((v,_)=>{l2(v.uid),ji(v.x)||Xn(v.x,"transcodingUser[".concat(_,"].x"),0,1e4),ji(v.y)||Xn(v.y,"transcodingUser[".concat(_,"].y"),0,1e4),ji(v.width)||Xn(v.width,"transcodingUser[".concat(_,"].width"),0,1e4),ji(v.height)||Xn(v.height,"transcodingUser[".concat(_,"].height"),0,1e4),ji(v.zOrder)||Xn(v.zOrder-1,"transcodingUser[".concat(_,"].zOrder"),0,100),ji(v.alpha)||Xn(v.alpha,"transcodingUser[".concat(_,"].alpha"),0,1,!1)})),ji(h.watermark)||oU(h.watermark,"watermark"),ji(h.backgroundImage)||oU(h.backgroundImage,"backgroundImage"),h.images&&!ji(h.images)&&(xg(h.images,"config.images"),h.images.forEach((v,_)=>{oU(v,"images[".concat(_,"]"))}))}(o);const a=[];o.images&&a.push(...o.images.map(h=>Cl(Cl(Cl({},iU),h),{},{zOrder:255}))),o.backgroundImage&&(a.push(Cl(Cl(Cl({},iU),o.backgroundImage),{},{zOrder:0})),delete o.backgroundImage),o.watermark&&(a.push(Cl(Cl(Cl({},iU),o.watermark),{},{zOrder:255})),delete o.watermark),o.images=a,o.transcodingUsers&&(o.userConfigs=o.transcodingUsers.map(h=>Cl({},h)),o.userCount=o.transcodingUsers.length,delete o.transcodingUsers);const l=(o.userConfigs||[]).map(h=>typeof h.uid=="number"?Mt.resolve(h.uid):RY(h.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Mt.all(l)).forEach((h,v)=>{o.userConfigs&&o.userConfigs[v]&&(o.userConfigs[v].uid=h)}),this.transcodingConfig=o,this.connection)try{var d;const h=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Jl(d=this.streamingTasks).call(d)).map(v=>v.taskId).join("#")});H.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(h.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(h){if(!h.data||!h.data.retry)throw h;h.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(v=>{H.warning("[".concat(this.spec.clientId,"] live streaming receive error"),h.toString(),"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,h).then(()=>{H.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(v.url," success"))}).catch(_=>{H.error("[".concat(this.spec.clientId,"] live streaming republish failed"),v.url,_.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,_)})})}}async startLiveStreamingTask(n,o,a){if(!this.transcodingConfig&&o===yp.TRANSCODE)throw new Je(de.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const l={command:"PublishStream",ts:Date.now(),url:n,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};H.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(n,", mode: ").concat(o));const d=await this.taskMutex.lock();if(!this.connection&&a)return void d();if(this.streamingTasks.get(n)&&!a)return d(),new Je(de.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(o))}catch(v){throw d(),v}switch(o){case yp.TRANSCODE:l.transcodingConfig=Cl({},this.transcodingConfig);case yp.RAW:}this.uapResponse&&this.uapResponse.vid&&(l.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const h=this.lastTaskId++;try{const v=new Mt((y,C)=>{Ps(this.retryTimeout).then(()=>{if(a)return C(a);const B=this.statusError.get(n);return B?(this.statusError.delete(n),C(B)):void 0})}),_=await Mt.race([this.connection.request("request",{clientRequest:l},!0,{url:n,command:"PublishStream",workerType:o===yp.TRANSCODE?1:2,requestByUser:!a,tid:h.toString()}),v]);this.isStartingStreamingTask=!1,H.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(_.code)),this.streamingTasks.set(n,{clientRequest:l,mode:o,url:n,taskId:h}),d()}catch(v){if(d(),this.isStartingStreamingTask=!1,!v.data||!v.data.retry||a)throw v;return v.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(n,o,v)):await this.startLiveStreamingTask(n,o,v)}}stopLiveStreamingTask(n){return new Mt((o,a)=>{const l=this.streamingTasks.get(n);if(!l||!this.connection)return new Je(de.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const d=l.mode;l.abortTask=()=>{H.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(n),o()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:l.url}},!1,{url:n,command:"UnPublishStream",workerType:d===yp.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(h=>{H.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(h.code)),this.streamingTasks.delete(n),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),o()}).catch(a)})}resetAllTask(){var n;const o=Array.from(Jl(n=this.streamingTasks).call(n));this.terminate();for(const a of o)this.startLiveStreamingTask(a.url,a.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(a.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Yc.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(n){if(this.connection)throw new Je(de.UNEXPECTED_ERROR,"live streaming connection has already connected");const o=await ea(this,sU.REQUEST_WORKER_MANAGER_LIST,n);return this.uapResponse=o,this.connection=new fTe(o.workerToken,this.spec,this.wsRetryConfig,n),this.connection.on(sv.WARNING,(a,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,a)),this.connection.on(sv.PUBLISH_STREAM_STATUS,a=>this.handlePublishStreamServer(a)),this.connection.on(sv.REQUEST_NEW_ADDRESS,(a,l)=>{if(!this.connection)return l(new Je(de.UNEXPECTED_ERROR,"can not get new live streaming address list"));ea(this,sU.REQUEST_WORKER_MANAGER_LIST,n).then(d=>{this.uapResponse=d,a(d.addressList)}).catch(l)}),await this.connection.init(o.addressList),this.connection}handlePublishStreamServer(n){const o=n.serverStatus&&n.serverStatus.url||"empty_url",a=this.streamingTasks.get(o),l=n.reason;switch(n.code){case Mo.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Mo.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Mo.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Mo.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const h=new Je(de.LIVE_STREAMING_CDN_ERROR,"",{code:n.code});if(a)return H.error(h.toString()),this.onLiveStreamError&&this.onLiveStreamError(o,h);if(!this.isStartingStreamingTask)return;this.statusError.set(o,h)}case Mo.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const h=new Je(de.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(o,h)}case Mo.LIVE_STREAM_RESPONSE_WORKER_LOST:case Mo.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var d;if(!this.connection)return;this.connection.tryNextAddress();const h=Array.from(Jl(d=this.streamingTasks).call(d));for(const v of h)v.abortTask?v.abortTask():(H.warning("[".concat(this.spec.clientId,"] publish stream status code"),n.code,"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,new Je(de.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code})).then(()=>{H.debug("[".concat(this.spec.clientId,"] republish live stream success"),v.url)}).catch(_=>{H.error(_.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,_)}));return}}}hasUrl(n){return this.streamingTasks.has(n)}}const pTe={name:"LiveStreaming",create:function(r){return new hTe(r.joinInfo,r.websocketRetryConfig||Ro,r.httpRetryConfig||Ro)}};function gTe(r){let n=sZ();return function(o,a){let l=o.appId;l!==void 0&&(jn(a,10),Ip(a,l));let d=o.cid;d!==void 0&&(jn(a,16),jn(a,d));let h=o.cname;h!==void 0&&(jn(a,26),Ip(a,h));let v=o.deviceId;v!==void 0&&(jn(a,34),Ip(a,v));let _=o.elapse;_!==void 0&&(jn(a,40),wv(a,_));let y=o.fileSize;y!==void 0&&(jn(a,48),wv(a,Jy(y)));let C=o.height;C!==void 0&&(jn(a,56),wv(a,Jy(C)));let B=o.jpg;B!==void 0&&(jn(a,66),jn(a,B.length),function(Ea,ct){let Ct=Zy(Ea,ct.length);Ea.bytes.set(ct,Ct)}(a,B));let L=o.networkType;L!==void 0&&(jn(a,72),wv(a,Jy(L)));let x=o.osType;x!==void 0&&(jn(a,80),wv(a,Jy(x)));let X=o.requestId;X!==void 0&&(jn(a,90),Ip(a,X));let G=o.sdkVersion;G!==void 0&&(jn(a,98),Ip(a,G));let q=o.sequence;q!==void 0&&(jn(a,104),wv(a,Jy(q)));let Ae=o.sid;Ae!==void 0&&(jn(a,114),Ip(a,Ae));let ue=o.timestamp;ue!==void 0&&(jn(a,120),wv(a,ue));let _e=o.uid;_e!==void 0&&(jn(a,128),jn(a,_e));let De=o.vid;De!==void 0&&(jn(a,136),jn(a,De));let Le=o.width;Le!==void 0&&(jn(a,144),wv(a,Jy(Le)));let Te=o.service;Te!==void 0&&(jn(a,152),jn(a,Te));let ze=o.callbackData;ze!==void 0&&(jn(a,162),Ip(a,ze));let rt=o.jpgEncryption;rt!==void 0&&(jn(a,168),jn(a,rt));let At=o.requestType;At!==void 0&&(jn(a,176),jn(a,At));let wt=o.scorePorn;wt!==void 0&&(jn(a,185),hM(a,wt));let Gr=o.scoreSexy;Gr!==void 0&&(jn(a,193),hM(a,Gr));let en=o.scoreNeutral;en!==void 0&&(jn(a,201),hM(a,en));let Or=o.scene;Or!==void 0&&(jn(a,208),jn(a,Or));let Ln=o.ossFilePrefix;Ln!==void 0&&(jn(a,218),Ip(a,Ln));let Tn=o.serviceVendor;if(Tn!==void 0)for(let Ea of Tn){jn(a,226);let ct=sZ();_Te(Ea,ct),jn(a,ct.limit),STe(a,ct),wTe(ct)}}(r,n),function(o){let a=o.bytes,l=o.limit;return a.length===l?a:a.subarray(0,l)}(n)}function mTe(r){return function(o){let a={};e:for(;!aZ(o);){let l=Op(o);switch(l>>>3){case 0:break e;case 1:a.code=Op(o);break;case 2:a.msg=cZ(o,Op(o));break;case 3:{let d=yTe(o);a.data=vTe(o),o.limit=d;break}default:iZ(o,7&l)}}return a}({bytes:n=r,offset:0,limit:n.length});var n}function vTe(r){let n={};e:for(;!aZ(r);){let o=Op(r);switch(o>>>3){case 0:break e;case 1:n.requestId=cZ(r,Op(r));break;case 2:n.requestType=Op(r)>>>0;break;case 3:n.scorePorn=fM(r);break;case 4:n.scoreSexy=fM(r);break;case 5:n.scoreNeutral=fM(r);break;case 6:n.requestScene=Op(r)>>>0;break;case 7:n.scene=Op(r)>>>0;break;default:iZ(r,7&o)}}return n}function _Te(r,n){let o=r.service;o!==void 0&&(jn(n,8),jn(n,o));let a=r.vendor;a!==void 0&&(jn(n,16),jn(n,a));let l=r.token;l!==void 0&&(jn(n,26),Ip(n,l));let d=r.callbackUrl;d!==void 0&&(jn(n,34),Ip(n,d))}function yTe(r){let n=Op(r),o=r.limit;return r.limit=r.offset+n,o}function iZ(r,n){switch(n){case 0:for(;128&lZ(r););break;case 2:AM(r,Op(r));break;case 5:AM(r,4);break;case 1:AM(r,8);break;default:throw new Error("Unimplemented type: "+n)}}let ETe=new Float32Array(1);new Uint8Array(ETe.buffer);let uM=new Float64Array(1),Tl=new Uint8Array(uM.buffer);function Jy(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}let oZ=[];function sZ(){const r=oZ.pop();return r?(r.offset=r.limit=0,r):{bytes:new Uint8Array(64),offset:0,limit:0}}function wTe(r){oZ.push(r)}function AM(r,n){if(r.offset+n>r.limit)throw new Error("Skip past limit");r.offset+=n}function aZ(r){return r.offset>=r.limit}function Zy(r,n){let o=r.bytes,a=r.offset,l=r.limit,d=a+n;if(d>o.length){let h=new Uint8Array(2*d);h.set(o),r.bytes=h}return r.offset=d,d>l&&(r.limit=d),a}function dM(r,n){let o=r.offset;if(o+n>r.limit)throw new Error("Read past limit");return r.offset+=n,o}function cZ(r,n){let o=dM(r,n),a=String.fromCharCode,l=r.bytes,d="",h="";for(let v=0;v<n;v++){let _,y,C,B,L=l[v+o];128&L?(224&L)==192?v+1>=n?h+=d:(_=l[v+o+1],(192&_)!=128?h+=d:(B=(31&L)<<6|63&_,B<128?h+=d:(h+=a(B),v++))):(240&L)==224?v+2>=n?h+=d:(_=l[v+o+1],y=l[v+o+2],(49344&(_|y<<8))!=32896?h+=d:(B=(15&L)<<12|(63&_)<<6|63&y,B<2048||B>=55296&&B<=57343?h+=d:(h+=a(B),v+=2))):(248&L)==240?v+3>=n?h+=d:(_=l[v+o+1],y=l[v+o+2],C=l[v+o+3],(12632256&(_|y<<8|C<<16))!=8421504?h+=d:(B=(7&L)<<18|(63&_)<<12|(63&y)<<6|63&C,B<65536||B>1114111?h+=d:(B-=65536,h+=a(55296+(B>>10),56320+(1023&B)),v+=3))):h+=d:h+=a(L)}return h}function Ip(r,n){let o=n.length,a=0;for(let h=0;h<o;h++){let v=n.charCodeAt(h);v>=55296&&v<=56319&&h+1<o&&(v=(v<<10)+n.charCodeAt(++h)-56613888),a+=v<128?1:v<2048?2:v<65536?3:4}jn(r,a);let l=Zy(r,a),d=r.bytes;for(let h=0;h<o;h++){let v=n.charCodeAt(h);v>=55296&&v<=56319&&h+1<o&&(v=(v<<10)+n.charCodeAt(++h)-56613888),v<128?d[l++]=v:(v<2048?d[l++]=v>>6&31|192:(v<65536?d[l++]=v>>12&15|224:(d[l++]=v>>18&7|240,d[l++]=v>>12&63|128),d[l++]=v>>6&63|128),d[l++]=63&v|128)}}function STe(r,n){let o=Zy(r,n.limit),a=r.bytes,l=n.bytes;for(let d=0,h=n.limit;d<h;d++)a[d+o]=l[d]}function lZ(r){return r.bytes[dM(r,1)]}function uZ(r,n){let o=Zy(r,1);r.bytes[o]=n}function fM(r){let n=dM(r,8),o=r.bytes;return Tl[0]=o[n++],Tl[1]=o[n++],Tl[2]=o[n++],Tl[3]=o[n++],Tl[4]=o[n++],Tl[5]=o[n++],Tl[6]=o[n++],Tl[7]=o[n++],uM[0]}function hM(r,n){let o=Zy(r,8),a=r.bytes;uM[0]=n,a[o++]=Tl[0],a[o++]=Tl[1],a[o++]=Tl[2],a[o++]=Tl[3],a[o++]=Tl[4],a[o++]=Tl[5],a[o++]=Tl[6],a[o++]=Tl[7]}function Op(r){let n,o=0,a=0;do n=lZ(r),o<32&&(a|=(127&n)<<o),o+=7;while(128&n);return a}function jn(r,n){for(n>>>=0;n>=128;)uZ(r,127&n|128),n>>>=7;uZ(r,n)}function wv(r,n){let o=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,d=l===0?a===0?o<16384?o<128?1:2:o<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=Zy(r,d),v=r.bytes;switch(d){case 10:v[h+9]=l>>>7&1;case 9:v[h+8]=d!==9?128|l:127&l;case 8:v[h+7]=d!==8?a>>>21|128:a>>>21&127;case 7:v[h+6]=d!==7?a>>>14|128:a>>>14&127;case 6:v[h+5]=d!==6?a>>>7|128:a>>>7&127;case 5:v[h+4]=d!==5?128|a:127&a;case 4:v[h+3]=d!==4?o>>>21|128:o>>>21&127;case 3:v[h+2]=d!==3?o>>>14|128:o>>>14&127;case 2:v[h+1]=d!==2?o>>>7|128:o>>>7&127;case 1:v[h]=d!==1?128|o:127&o}}function AZ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}const bTe=new Map([["moderation",1],["supervise",2]]);class CTe extends Mi{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const o=this._connectionState;this._connectionState=n,this.emit(hs.CONNECTION_STATE_CHANGE,o,n)}get inspectType(){return this._inspectType}set inspectType(n){var o;this._inspectMode=ka(o=n.map(a=>bTe.get(a)||0)).call(o,(a,l)=>a+l),this._inspectType=n}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(n){super(),re(this,"name","AgoraRTCVideoContentInspect"),re(this,"_connectionState",Rd.CONNECTING),re(this,"_innerConnectionState",void 0),re(this,"sequence",0),re(this,"inspectStartTime",void 0),re(this,"workerManagerConnection",void 0),re(this,"workerConnection",void 0),re(this,"workerMessageLengthLimit",void 0),re(this,"inspectIntervalMinimum",void 0),re(this,"qualityRatio",void 0),re(this,"_connectInfo",void 0),re(this,"_cancelTokenSource",Yc.CancelToken.source()),re(this,"_retryConfig",void 0),re(this,"wmSequence",0),re(this,"inspectInterval",void 0),re(this,"inspectTimer",null),re(this,"ossFilePrefix",void 0),re(this,"extraInfo",void 0),re(this,"_inspectType",void 0),re(this,"_inspectMode",void 0),re(this,"_quality",1),re(this,"qualityTimer",null),re(this,"_inspectId",void 0),re(this,"_needWorkUrlOnly",!1),re(this,"inspectImage",()=>{if(this.connectionState!==Rd.CONNECTED)throw new Je(de.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Rd.CONNECTED?this.requestToInspectImage():H.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=ii(5,"inspect-"),this.workerMessageLengthLimit=me("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=me("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=me("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=n.interval,this.ossFilePrefix=n.ossFilePrefix,this.extraInfo=n.extraInfo,this.inspectType=n.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new QS("worker-manager-"+this._inspectId,Ro),this.on(hs.STATE_CHANGE,(o,a)=>{this._innerConnectionState=o,H.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Id[o]," ").concat(a||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new QS("worker-"+this._inspectId,Ro),this.handleWorkerEvents()}async init(n,o){this.emit(hs.STATE_CHANGE,Id.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=o,new Mt((l,d)=>{this.on(hs.CONNECTION_STATE_CHANGE,(h,v)=>{v===Rd.CONNECTED&&l()}),this.requestAP(n,a,o).then(h=>{this.connectWorkerManager(h)}).catch(h=>{d(h)})})}async requestAP(n,o,a){const l=me("WEBCS_DOMAIN").map(v=>"https://".concat(v,"/api/v1")),d=await function(v,_,y,C){let{appId:B,areaCode:L,cname:x,sid:X,token:G,uid:q}=_;Vy++;const Ae="image_moderation_api",ue={service_name:Ae,json_body:JSON.stringify({appId:B,areaCode:L,cname:x,command:"allocateEdge",requestId:Vy,seq:Vy,sid:X,token:G,ts:Date.now(),uid:q+""})};let _e,De,Le=v[0];return Wf(async()=>{_e=Date.now();const Te=await Yf(Le,{data:ue,cancelToken:y,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(De=Date.now()-_e,Te.code!==0){const wt=new Je(de.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Te.code,{retry:!0,responseTime:De});throw H.error(wt.toString()),wt}const ze=JSON.parse(Te.json_body);if(ze.code!==200){const wt=new Je(de.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(ze.code,", reason: ").concat(ze.reason),{code:ze.code,responseTime:De});throw H.error(wt.toString()),wt}if(!ze.servers||!Array.isArray(ze.servers)||ze.servers.length===0){const wt=new Je(de.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:ze.code,responseTime:De});throw H.error(wt.toString()),wt}const rt=me("VIDEO_INSPECT_WORKER_MANAGER_HOST"),At=me("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:ze.servers.map(wt=>{let{address:Gr,wss:en}=wt;if(Gr&&en)return"wss://".concat(Gr.replace(/\./g,"-"),".").concat(rt,":").concat(At||en)}).filter(wt=>!!wt),workerToken:ze.workerToken,vid:ze.vid,responseTime:De}},(Te,ze)=>(rr.apworkerEvent(X,{success:!0,sc:200,serviceName:Ae,responseDetail:JSON.stringify(Te.addressList),firstSuccess:ze===0,responseTime:De,serverIp:v[ze%v.length]}),!1),(Te,ze)=>(rr.apworkerEvent(X,{success:!1,sc:Te.data&&Te.data.code||200,serviceName:Ae,responseTime:De,serverIp:v[ze%v.length]}),!!(Te.code!==de.OPERATION_ABORTED&&Te.code!==de.UNEXPECTED_RESPONSE||Te.data&&Te.data.retry)&&(Le=v[(ze+1)%v.length],!0)),C)}(l,n,o,a);this.emit(hs.STATE_CHANGE,Id.AP_CONNECTED);const{addressList:h}=d;return this.wmSequence++,h}async connectWorkerManager(n){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=o,this.emit(hs.STATE_CHANGE,Id.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(n,1e4)}async connectWorker(n){await this.workerConnection.init([n])}handleWorkerManagerEvents(){this.workerManagerConnection.on(jr.CONNECTED,async()=>{this.emit(hs.STATE_CHANGE,Id.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.24.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(jr.CLOSED,()=>{this._innerConnectionState<Id.GET_WORKER_MANAGER_RESPONSE&&H.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(jr.FAILED,()=>{this._innerConnectionState<Id.GET_WORKER_MANAGER_RESPONSE&&H.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(jr.RECONNECTING,()=>{this._innerConnectionState<Id.GET_WORKER_MANAGER_RESPONSE&&H.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(jr.ON_MESSAGE,async n=>{this.emit(hs.STATE_CHANGE,Id.GET_WORKER_MANAGER_RESPONSE);const o=this.workerManagerConnection.url;this.workerManagerConnection.close();const a=JSON.parse(n.data);if(a.code!==200)throw H.error("[".concat(this._inspectId,"] Unexpected code ").concat(a.code," from worker manager")),new Je(de.UNEXPECTED_RESPONSE,"response code of worker is unexpected",a);if(!(a.serverResponse&&a.serverResponse.portWss&&o))throw H.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(a))),new Je(de.UNEXPECTED_RESPONSE,"response content of worker is unexpected",a);{const l=me("VIDEO_INSPECT_WORKER_PORT")||a.serverResponse.portWss,d=o.replace(/:\d+\/?$/,":".concat(l));this.emit(hs.STATE_CHANGE,Id.CONNECT_WORKER,d),this._needWorkUrlOnly?this.emit(hs.REQUEST_NEW_WORKER_URL,d):await this.connectWorker(d)}}),this.workerManagerConnection.on(jr.WILL_RECONNECT,(n,o,a)=>{a(n)}),this.workerManagerConnection.on(jr.REQUEST_NEW_URLS,(n,o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(o)})}handleWorkerEvents(){this.workerConnection.on(jr.CONNECTED,async()=>{this.emit(hs.STATE_CHANGE,Id.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Rd.CONNECTED}),this.workerConnection.on(jr.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const a=mTe(new Uint8Array(n.data));if(me("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&H.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(a)),a.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(hs.INSPECT_RESULT,void 0,void 0);if(a.data&&a.data.scorePorn&&a.data.scoreSexy&&a.data.scoreNeutral){var o;const l={porn:a.data.scorePorn,sexy:a.data.scoreSexy,neutral:a.data.scoreNeutral},d=ka(o=Object.keys(l)).call(o,(v,_)=>l[v]>l[_]?v:_,"porn"),h=Object.keys(l).find(v=>v===d);this.emit(hs.INSPECT_RESULT,h)}else this.emit(hs.INSPECT_RESULT,void 0,new Je(de.UNEXPECTED_RESPONSE,a.code+"","There is an unexpected data on message"))}else this.emit(hs.INSPECT_RESULT,void 0,new Je(de.UNEXPECTED_RESPONSE,a.code+"",a.msg))}else H.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(hs.INSPECT_RESULT,void 0,new Je(de.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(jr.CLOSED,()=>{this.connectionState=Rd.CLOSED}),this.workerConnection.on(jr.FAILED,()=>{this.connectionState=Rd.CLOSED}),this.workerConnection.on(jr.RECONNECTING,()=>{this.connectionState=this.connectionState===Rd.CONNECTED?Rd.RECONNECTING:Rd.CONNECTING}),this.workerConnection.on(jr.WILL_RECONNECT,(n,o,a)=>{n==="recover"&&a(n),a("tryNext")}),this.workerConnection.on(jr.REQUEST_NEW_URLS,(n,o)=>{this.workerManagerConnection.close(),this.once(hs.REQUEST_NEW_WORKER_URL,a=>{n([a])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(a=>{this.connectWorkerManager(a,!0)}).catch(a=>{o(a)})})}async requestToInspectImage(){this.sequence++;const n=Iu(this,hs.CLIENT_LOCAL_VIDEO_TRACK),o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void this.emit(hs.INSPECT_RESULT,void 0,new Je(de.INVALID_OPERATION,"Only the track being played can be inspected"));const a=await this.generateRequestData(n,o);this.workerConnection.sendMessage(a,!0,!0)}else this.emit(hs.INSPECT_RESULT,void 0,new Je(de.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(n,o){let{appId:a,cname:l,cid:d,vid:h,sid:v,uid:_}=o;const y=Date.now(),C=await n.getCurrentFrameImage("image/jpeg",this.quality),B=await K$(C,a,l),L=this.sequence+"-"+d+"-"+_+"-"+y+"-"+ii(12,""),x={appId:a,cid:d,cname:l,deviceId:"",elapse:(X=Number(y-this.inspectStartTime),{low:X|=0,high:X>>31,unsigned:X>=0}),fileSize:B.byteLength,jpgEncryption:2,height:C.height,width:C.width,jpg:B,networkType:6,osType:7,requestId:L,sdkVersion:"4.24.0",sequence:this.sequence,sid:v,timestamp:_X(y),uid:_,vid:h,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};var X;this.extraInfo===void 0&&delete x.callbackData,this.ossFilePrefix===void 0&&delete x.ossFilePrefix;const G=gTe(x);if(G.byteLength<this.workerMessageLengthLimit){if(me("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const q=function(Ae){for(var ue=1;ue<arguments.length;ue++){var _e=arguments[ue]!=null?arguments[ue]:{};ue%2?AZ(Object(_e),!0).forEach(function(De){re(Ae,De,_e[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(_e)):AZ(Object(_e)).forEach(function(De){Object.defineProperty(Ae,De,Object.getOwnPropertyDescriptor(_e,De))})}return Ae}({},x);delete q.jpg,H.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(q))}return G}{const q=this.quality*this.qualityRatio;return this.quality=q,await this.generateRequestData(n,{appId:a,cname:l,cid:d,vid:h,sid:v,uid:_})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Yc.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Rd.CLOSED,this.emit(hs.STATE_CHANGE,Id.CLOSED)}}const TTe={name:"ContentInspect",create:function(r){let{config:n}=r;return function(o){if(!o)throw new Je(de.INVALID_PARAMS,"inspectConfig is necessary.");if(!o.inspectType||!Array.isArray(o.inspectType))throw new Je(de.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const a=[...new Set(o.inspectType)];a.forEach(l=>{var d;if(!_t(d=["supervise","moderation"]).call(d,l))throw new Je(de.INVALID_PARAMS,"".concat(l," is not a valid inspect type."))}),o.inspectType=a}if(o&&o.extraInfo&&o.extraInfo.length>1024)throw new Je(de.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(n),new CTe(n)}};var dZ=c(Nt.Object.getOwnPropertySymbols),RTe=Ye,ITe=fu.indexOf,OTe=Cs,pM=Y([].indexOf),fZ=!!pM&&1/pM([1],1,-0)<0;RTe({target:"Array",proto:!0,forced:fZ||!OTe("indexOf")},{indexOf:function(r){var n=arguments.length>1?arguments[1]:void 0;return fZ?pM(this,r,n)||0:ITe(this,r,n)}});var NTe=Po("Array","indexOf"),BTe=N,LTe=NTe,gM=Array.prototype,PTe=function(r){var n=r.indexOf;return r===gM||BTe(gM,r)&&n===gM.indexOf?LTe:n},hZ=c(PTe);function kTe(r,n){if(r==null)return{};var o,a,l=function(h,v){if(h==null)return{};var _={};for(var y in h)if({}.hasOwnProperty.call(h,y)){if(hZ(v).call(v,y)!==-1)continue;_[y]=h[y]}return _}(r,n);if(dZ){var d=dZ(r);for(a=0;a<d.length;a++)o=d[a],hZ(n).call(n,o)===-1&&{}.propertyIsEnumerable.call(r,o)&&(l[o]=r[o])}return l}let pZ=class{get localCapabilities(){return Ni(this._localCapabilities)}get rtpCapabilities(){return Ni(this._rtpCapabilities)}get candidates(){return Ni(this._candidates)}get iceParameters(){return Ni(this._iceParameters)}get dtlsParameters(){return Ni(this._dtlsParameters)}constructor(r){re(this,"sessionDesc",void 0),re(this,"_localCapabilities",void 0),re(this,"_rtpCapabilities",void 0),re(this,"_candidates",void 0),re(this,"_iceParameters",void 0),re(this,"_dtlsParameters",void 0),re(this,"setup",void 0),re(this,"currentMidIndex",void 0),re(this,"cname","o/i14u9pJrxRKAsu"),re(this,"firefoxSsrcMidMap",new Map),r=Ni(r);const{remoteIceParameters:n,remoteDtlsParameters:o,candidates:a,remoteRTPCapabilities:l,localCapabilities:d,direction:h,setup:v,videoCodec:_,audioCodec:y}=r;let C;this.setup=v,C=h===Cc.RECEIVE_ONLY?wl(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):wl(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=l,this._candidates=a,this._iceParameters=n,this._dtlsParameters=o,this._localCapabilities=d;const B=h===Cc.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,L=h===Cc.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,x=h===Cc.RECEIVE_ONLY?l.send.videoCodecs:WS(jt.VIDEO,B,L,_),X=h===Cc.RECEIVE_ONLY?l.send.audioCodecs:WS(jt.AUDIO,B,L,y);for(const G of C.mediaDescriptions)G.attributes.iceUfrag=n.iceUfrag,G.attributes.icePwd=n.icePwd,G.attributes.fingerprints=o.fingerprints,G.attributes.candidates=a,G.attributes.setup=this.setup,G.media.mediaType==="application"&&(G.attributes.sctpPort="5000"),G.media.mediaType==="video"&&(G.media.fmts=x.map(q=>q.payloadType.toString(10)),G.attributes.payloads=x,G.attributes.extmaps=B.videoExtensions),G.media.mediaType==="audio"&&(G.media.fmts=X.map(q=>q.payloadType.toString(10)),G.attributes.payloads=X,G.attributes.extmaps=B.audioExtensions,Fy(G));this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}toString(){return iv(this.sessionDesc)}hasMid(r){return Array.isArray(r)?r.every(n=>this.hasMid(n)):this.sessionDesc.mediaDescriptions.some(n=>n.attributes.mid===r)}send(r,n,o,a,l){o=o.replace(/ /g,"-");const{ssrcs:d,ssrcGroups:h}=KS(n,this.cname,me("SYNC_GROUP")?o:void 0),v=this.findPreloadMediaDesc(d);if(v){if(Hi()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const _=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[_]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const _=this.findAvailableMediaIndex(r,d,a);let y;return _===-1?(y=this.createOrRecycleSendMedia(r,d,h,"sendonly",a,l),this.updateBundleMids()):(y=Ni(this.sessionDesc.mediaDescriptions[_]),y.attributes.direction="sendonly",y.attributes.ssrcs=d,y.attributes.ssrcGroups=h,this.sessionDesc.mediaDescriptions[_]=this.mungSendMediaDesc(y,l)),Hi()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,y.attributes.mid),{needExchangeSDP:!0,mid:y.attributes.mid}}}stopSending(r){const n=this.sessionDesc.mediaDescriptions.filter(o=>o.attributes.mid&&r.indexOf(o.attributes.mid)!==-1);if(n.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");n.forEach(o=>{o.attributes.ssrcs=[]}),this.updateBundleMids()}receive(r,n,o){const a=[];return r.forEach(l=>{const d=l._mediaStreamTrack.kind,h=this.findAvailableRecvMediaIndex(d);let v,_=!1;h===-1?(_=!0,v=this.createOrRecycleRecvMedia(l,[],"recvonly",n,o),this.updateBundleMids()):(v=Ni(this.sessionDesc.mediaDescriptions[h]),v.attributes.direction="recvonly"),a.push({mid:v.attributes.mid,needCreateTransceiver:_})}),a}stopReceiving(r){const n=this.sessionDesc.mediaDescriptions.filter(o=>r.indexOf(o.attributes.mid)!==-1);if(n.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");n.forEach(o=>{o.media.port="0",o.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(r){const{foundation:n,protocol:o,address:a,port:l,type:d,relatedAddress:h,relatedPort:v,priority:_}=new RTCIceCandidate(r),y={foundation:n??"",componentId:"1",transport:o??"",priority:_?_+"":"",connectionAddress:a??"",port:l?l+"":"",type:d?d+"":"",relAddr:h??"",relPort:v?v+"":"",extension:{}};this.candidates.some(C=>C.priority===y.priority&&C.connectionAddress===y.connectionAddress&&C.port===y.port)||(this._candidates.push(y),this.sessionDesc.mediaDescriptions.forEach(C=>{C.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(r,n,o,a,l){const d=r._mediaStreamTrack.kind,h=this.rtpCapabilities.recv,v=WS(d,h,this.localCapabilities.send,d===jt.AUDIO?l:a),_=d===jt.VIDEO?h.videoExtensions:h.audioExtensions,y="".concat(++this.currentMidIndex);let C={media:{mediaType:d,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(L=>L.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:_,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:o,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(y)}};C=this.mungRecvMediaDsec(C,r);const B=this.findFirstClosedMedia(d);if(B){const L=this.sessionDesc.mediaDescriptions.indexOf(B);this.sessionDesc.mediaDescriptions[L]=C}else this.sessionDesc.mediaDescriptions.push(C);return C}muteRemote(r){const n=this.sessionDesc.mediaDescriptions.filter(o=>_t(r).call(r,o.attributes.mid||""));if(n.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(o=>{o.attributes.direction="inactive"})}unmuteRemote(r){const n=this.sessionDesc.mediaDescriptions.filter(o=>_t(r).call(r,o.attributes.mid||""));if(n.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(o=>{o.attributes.direction="recvonly"})}findAvailableMediaIndex(r,n,o){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const l=a.media.mediaType===r&&a.media.port!=="0"&&(a.attributes.direction==="sendonly"||a.attributes.direction==="sendrecv")&&a.attributes.ssrcs.length===0;if(Hi()){if(l){const d=this.firefoxSsrcMidMap.get(n[0].ssrcId);return!(d||a.attributes.mid!=="0"&&a.attributes.mid!=="1")||!(!d||d!==a.attributes.mid)}return!1}return l&&a.attributes.mid===o})}findAvailableRecvMediaIndex(r){return this.sessionDesc.mediaDescriptions.findIndex(n=>{const o=n.media.mediaType===r&&n.media.port!=="0"&&(n.attributes.direction==="recvonly"||n.attributes.direction==="sendrecv");return n.attributes.mid!=="0"&&n.attributes.mid!=="1"&&o})}predictReceivingMids(r){const n=[];for(let o=0;o<r;o++)n.push((this.currentMidIndex+o+1).toString(10));return n}restartICE(r){r=Ni(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=r.iceUfrag,n.attributes.icePwd=r.icePwd})}createOrRecycleSendMedia(r,n,o,a,l,d){const h=this.rtpCapabilities.send,v=r===jt.VIDEO?h.videoCodecs:h.audioCodecs,_=r===jt.VIDEO?h.videoExtensions:h.audioExtensions;Hi()&&(l="".concat(++this.currentMidIndex));let y={media:{mediaType:r,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(B=>B.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:_,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:o,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:l}};y=this.mungSendMediaDesc(y,d);const C=this.findFirstClosedMedia(r);if(C){const B=this.sessionDesc.mediaDescriptions.indexOf(C);this.sessionDesc.mediaDescriptions[B]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}mungRecvMediaDsec(r,n,o){const a=Ni(r);return dU(a),My(a,n),fU(a,n),aY(a),m2(a,o,this.localCapabilities.send),a}mungSendMediaDesc(r,n){const o=Ni(r);return m2(o,n,this.localCapabilities.recv),Fy(o),o}updateRecvMedia(r,n){const o=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===r);if(o!==-1){const a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[o],n);this.sessionDesc.mediaDescriptions[o]=a}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(n=>{var o;return((o=n.attributes)===null||o===void 0||(o=o.ssrcs[0])===null||o===void 0?void 0:o.ssrcId)===r[0].ssrcId})}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(n=>Hi()?n.media.port==="0"&&n.media.mediaType===r:n.media.port==="0")}};const DTe=["sdp"];var pi;function gZ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Sv(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?gZ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):gZ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}let mZ=(pi=class TE extends jq{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,o;return(n=(o=this.peerConnection.getReceivers()[0])===null||o===void 0||(o=o.transport)===null||o===void 0?void 0:o.state)!==null&&n!==void 0?n:null}get localCodecs(){return[]}set isInRestartIce(n){this._isInRestartIce=n}get isInRestartIce(){return this._isInRestartIce}constructor(n,o,a){super(n,o),re(this,"direction",void 0),re(this,"name",void 0),re(this,"store",void 0),re(this,"spec",void 0),re(this,"peerConnection",void 0),re(this,"initialOffer",void 0),re(this,"transport",void 0),re(this,"statsFilter",void 0),re(this,"localCandidateCount",0),re(this,"_isInRestartIce",!1),re(this,"mutex",void 0),re(this,"onLocalCandidate",void 0),re(this,"remoteSDP",void 0),re(this,"pendingCandidates",[]),re(this,"localCapabilities",void 0),re(this,"isReady",!1),re(this,"restartCnt",0),re(this,"curTurnServerIndex",0),this.store=o,this.spec=n,this.mutex=new ga("P2PConnection-mutex",o.clientId),this.peerConnection=new RTCPeerConnection(TE.resolvePCConfiguration(n,o.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=a??Cc.SEND_ONLY,this.name=this.direction===Cc.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=E5(this.peerConnection,me("STATS_UPDATE_INTERVAL"),void 0,Hi()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(n){try{const o=await lY();if(this.localCapabilities=v2(o),n){const{sdp:a}=n,l=kTe(n,DTe),d=function(){const C={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},B=jS(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),L={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},x={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},X={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Od(B,C,"videoExtensions",L,x,X),Od(B,C,"videoCodecs",L,x,X),Od(B,C,"audioExtensions",L,x,X),Od(B,C,"audioCodecs",L,x,X),me("RAISE_H264_BASELINE_PRIORITY")){const G=X.videoCodecs.findIndex(q=>q.rtpMap&&q.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&q.fmtp&&q.fmtp.parameters["profile-level-id"]==="42001f");if(G!==-1){const q=X.videoCodecs.findIndex(Ae=>Ae.rtpMap&&Ae.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(q<G){H.debug("raising H264 baseline profile priority");const Ae=X.videoCodecs[G];X.videoCodecs.splice(G,1),X.videoCodecs.splice(q,0,Ae)}q!==-1&&me("FILTER_SEND_H264_BASELINE")&&(L.videoCodecs=L.videoCodecs.filter(Ae=>!(Ae.rtpMap&&Ae.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&Ae.fmtp&&Ae.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:L,recv:x,sendrecv:X}}({},{},a);this.remoteSDP=new pZ({remoteIceParameters:l.iceParameters,remoteDtlsParameters:l.dtlsParameters,candidates:[],remoteRTPCapabilities:d,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const h=await this.peerConnection.createAnswer();if(!h.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const v=uv(h.sdp);await this.peerConnection.setLocalDescription(h);const _=await uY({},{},h.sdp);this.localCapabilities=v2(_);const y=this.peerConnection.getTransceivers()[0];return y!=null&&y.receiver&&y.receiver.transport&&this.tryBindTransportEvents(y.receiver.transport),Sv(Sv({},v),{},{sdp:h.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const a=await this.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const l=uv(a.sdp);return this.initialOffer=a,Sv(Sv({},l),{},{sdp:a.sdp})}}catch(o){throw new tt(de.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:o,iceParameters:a,dtlsParameters:l}=n,d=await uY({},{},o);this.remoteSDP=new pZ({remoteIceParameters:a,remoteDtlsParameters:l,candidates:[],remoteRTPCapabilities:d,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const h=this.peerConnection.getTransceivers()[0];h!=null&&h.sender&&h.sender.transport&&this.tryBindTransportEvents(h.sender.transport)}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(o.toString()))}}async addRemoteCandidate(n){try{n&&this.pendingCandidates.push(n),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(o=>{this.peerConnection.addIceCandidate(o)}),this.pendingCandidates=[])}catch(o){throw new tt(de.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(o.toString()))}}send(n,o,a){var l=this;return _A(function*(){const d=yield mn(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[],v=l.remoteSDP.receive(n,o,a);n.forEach((q,Ae)=>{if(v[Ae].needCreateTransceiver){const ue=l.peerConnection.addTransceiver(q._mediaStreamTrack,{direction:"sendonly"});h.push(ue),q._updateRtpTransceiver(ue)}else{const ue=l.peerConnection.getTransceivers().find(_e=>_e.mid===v[Ae].mid);if(!ue)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(v[Ae].mid));h.push(ue),q._updateRtpTransceiver(ue)}}),Hi()&&me("SIMULCAST")===!0&&(yield mn(l.applySimulcastForFirefox(h,n)));const _=v.map(q=>q.mid),y=yield mn(l.peerConnection.createOffer()),C=l.mungSendOfferSDP(y.sdp,n,_),B=wl(C),L=_.map(q=>{const Ae=B.mediaDescriptions.find(ue=>ue.attributes.mid===q);if(!Ae)throw new Error("Cannot extract ssrc from mediaDescription.");return iY(Ae,me("USE_PUB_RTX"))}),x=h.map((q,Ae)=>{const ue=_[Ae];return{localSSRC:L[Ae],id:ue}});yield mn(l.peerConnection.setLocalDescription({type:"offer",sdp:C}));try{yield x}catch(q){const Ae=l.remoteSDP.toString();throw yield mn(l.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield mn(l.peerConnection.setRemoteDescription({type:"answer",sdp:Ae})),yield mn(l.stopSending(_,!0)),q}yield mn(l.applySimulcastEncodings(h,n)),yield mn(l.applySendEncodings(h,n));const X=l.remoteSDP.toString(),G=l.logSDPExchange(C,"offer","local","send");return G==null||G(X),yield mn(l.setRemoteDescription({type:"answer",sdp:X})),h.map((q,Ae)=>{const ue=_[Ae];return{localSSRC:L[Ae],id:ue}})}catch(h){throw h instanceof tt?h:new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{d()}})()}async stopSending(n,o){const a=o?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(_=>n.indexOf(_.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length (".concat(l.length,") doesn't match mids' length (").concat(n.length,") when trying to call P2PConnection.stopSending."));l.map(_=>{var y;_.direction="inactive",(y=_.stop)===null||y===void 0||y.call(_)});const d=await this.peerConnection.createOffer(),h=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(n);const v=this.remoteSDP.toString();h==null||h(v),await this.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,o,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:d,needExchangeSDP:h}=this.remoteSDP.send(n,o,a,l);if(h){const _=this.remoteSDP.toString(),y=this.logSDPExchange(_,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:_});const C=await this.peerConnection.createAnswer(),B=this.mungReceiveAnswerSDP(C.sdp,d,n);y==null||y(B||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:B}),H.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else H.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(_=>_.mid===d);if(!v||v.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,mid:v.mid,transceiver:v}}catch(d){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async mockReceive(n,o,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:d,needExchangeSDP:h}=this.remoteSDP.send(n,o,a,l);if(h){const v=this.remoteSDP.toString(),_=this.logSDPExchange(v,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:v});const y=await this.peerConnection.createAnswer(),C=this.mungReceiveAnswerSDP(y.sdp,d,n);_==null||_(C||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:C}),H.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else H.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."))}catch(d){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const o=this.remoteSDP.toString(),a=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async restartICE(n){try{if(this.store.p2pTransport===t1.Auto&&(this.store.p2pTransport=t1.SdRtn,vn().supportPCSetConfiguration&&this.peerConnection.setConfiguration(TE.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,vn().supportPCSetConfiguration&&this.peerConnection.setConfiguration(TE.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!n){this.restartCnt++,this.isReady=!1;const o=await this.peerConnection.createOffer({iceRestart:!0});if(!o.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:a}=uv(o.sdp);return this.store.descriptionStart(),this.direction===Cc.SEND_ONLY&&await this.peerConnection.setLocalDescription(o),a}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(n),this.store.descriptionStart(),this.direction===Cc.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const o=await this.peerConnection.createAnswer();if(!o.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:a}=uv(o.sdp);return await this.peerConnection.setLocalDescription(o),a}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}close(){var n;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[o],[n]);this.remoteSDP.updateRecvMedia(n,o);const d=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(a){throw new tt(de.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,o){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(o)?Hi()||await this.applySimulcastEncodings(a,[o]):await this.applySendEncodings(a,[o]))}setStatsRemoteVideoIsReady(n,o){this.statsFilter.setVideoIsReady2(n,o)}async replaceTrack(n,o){const a=this.peerConnection.getTransceivers().find(l=>l.mid===o);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const o=n[0].transport.iceTransport,{local:a,remote:l}=o.getSelectedCandidatePair();return{local:Sv(Sv({},gp),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:Sv(Sv({},gp),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n,o;_t(n=["connected","completed"]).call(n,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(o=this.onICEConnectionStateChange)===null||o===void 0||o.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=n=>{if(n.candidate){var o;n.candidate.candidate&&((o=this.onLocalCandidate)===null||o===void 0||o.call(this,n.candidate.toJSON())),this.localCandidateCount+=1}else H.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l={iceServers:[]};var d;return n.iceServers?l.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(IS(n.turnServer.servers)?l.iceServers=n.turnServer.servers:(l.iceServers&&l.iceServers.push(...TE.turnServerConfigToIceServers(n.turnServer.servers,o,a)),me("USE_TURN_SERVER_OF_GATEWAY")&&l.iceServers&&n.turnServer.serversFromGateway&&l.iceServers.push(...TE.turnServerConfigToIceServers(n.turnServer.serversFromGateway,o,a)),_t(d=[t1.Relay,t1.SdRtn]).call(d,o)&&(l.iceTransportPolicy="relay"),me("FORCE_TURN_TCP")?l.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(h=>{h.forceturn&&(l.iceTransportPolicy="relay")}))),me("ENABLE_ENCODED_TRANSFORM")&&vn().supportWebRTCEncodedTransform&&(l.encodedInsertableStreams=!0),H.debug("P2PConnection p2pTransport is ".concat(o)),l}static turnServerConfigToIceServers(n,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l=[],d=n.filter(v=>v.tcpport);H.debug("P2PConnection turnServers is ".concat(d,", current index is ").concat(a));const h=d.length>a?d[a]:d[0];switch(o){case t1.SdRtn:const v=n.filter(y=>{var C;return _t(C=y.username).call(C,"glb:")&&y.turnServerURL==y.turnServerURL}),_=v.length>a?v[a]:v[0];_&&(l.push({username:_.username,credential:_.password,credentialType:"password",urls:"turn:".concat(cv(_.turnServerURL),":").concat(_.tcpport,"?transport=udp")}),l.push({username:_.username,credential:_.password,credentialType:"password",urls:"turns:".concat(cv(_.turnServerURL),":").concat(_.tcpport,"?transport=tcp")}));break;case t1.Relay:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(cv(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}));break;default:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(cv(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"stun:".concat(h.turnServerURL,":").concat(h.tcpport)}))}return l}tryBindTransportEvents(n){if(n){this.transport=n,n.onstatechange=()=>{var a;n!=null&&n.state&&((a=this.onDTLSTransportStateChange)===null||a===void 0||a.call(this,n.state))},n.onerror=a=>{var l;(l=this.onDTLSTransportError)===null||l===void 0||l.call(this,"error"in a?a.error:a)};const o=n.iceTransport;o&&(o.onstatechange=()=>{const a=n==null?void 0:n.iceTransport.state;var l;a&&((l=this.onICETransportStateChange)===null||l===void 0||l.call(this,a))},o.getSelectedCandidatePair&&(o.onselectedcandidatepairchange=()=>{if(o.getSelectedCandidatePair()){const{local:a,remote:l}=o.getSelectedCandidatePair()||{};if(a&&l){const d=a.address+":"+a.port,h=l.address+":"+l.port;H.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify(l1(d)),", remote ").concat(JSON.stringify(l1(h))))}}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,o){var a;if(o||(o=this.peerConnection.getSenders().find(C=>C.track===n._mediaStreamTrack)),!o)return H.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return H.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!vn().supportSetRtpSenderParameters)return H.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const l={},d={};switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(n._encoderConfig){var h;const{bitrateMax:C,frameRate:B,scaleResolutionDownBy:L}=n._encoderConfig;C&&(d.maxBitrate=1e3*C),_t(h=n._hints).call(h,Jn.LOW_STREAM)&&(B&&(d.maxFramerate=ru(B)),L&&L>=1&&(d.scaleResolutionDownBy=L))}if(me("DSCP_TYPE")&&Dg()){var v;const C=me("DSCP_TYPE");_t(v=["very-low","low","medium","high"]).call(v,C)&&(d.networkPriority=C)}const _=o.getParameters(),y=(a=_.encodings)===null||a===void 0?void 0:a[0];Hi()&&!y&&(l.encodings=[d]),y&&Object.assign(y,d),Object.assign(_,l),H.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(_.encodings))),await o.setParameters(_)}async applySendEncodings(n,o){try{if(!vn().supportSetRtpSenderParameters||n.length!==o.length)return;for(let a=0;a<n.length;a++){const l=n[a],d=o[a];d instanceof hi&&!this.isVP8Simulcast(d)&&await this.updateRtpSenderEncodings(d,l.sender)}}catch{H.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,o,a){const l=wl(n);return o.forEach((d,h)=>{const v=a[h],_=l.mediaDescriptions.find(y=>y.attributes.mid===v);_&&(My(_,d),cY(_,d,this.store.codec))}),iv(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,o,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,o,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,o)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,o)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,o)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,o){if(n.length===o.length)for(let _=0;_<n.length;_++){var a,l,d,h,v;const y=n[_],C=o[_];if(C instanceof hi&&!_t(a=C._hints).call(a,Jn.LOW_STREAM)&&(l=C._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((d=C._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)>200&&(h=C._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((v=C._scalabilityMode)===null||v===void 0?void 0:v.numSpatialLayers)>1&&this.store.codec==="vp8"){const B={},L={high:1e3*(C._encoderConfig.bitrateMax-50),medium:5e4};B.encodings=[{rid:"m",active:!0,maxBitrate:L.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:L.high}];const x=y.sender.getParameters();await y.sender.setParameters(Object.assign(x,B))}}}async applySimulcastEncodings(n,o){if(!Hi()&&n.length===o.length)for(let a=0;a<n.length;a++){const l=o[a];if(l instanceof hi&&this.isVP8Simulcast(l)){const d=n[a],h={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const _=d.sender.getParameters();await d.sender.setParameters(Object.assign(_,h))}}}isVP8Simulcast(n){var o,a,l,d,h;return!!(n instanceof hi&&me("SIMULCAST")&&this.store.codec==="vp8"&&!_t(o=n._hints).call(o,Jn.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=n._scalabilityMode)!==null&&d!==void 0&&d.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,o,a,l){if(me("SDP_LOGGING"))return H.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(o," SDP during P2PConnection.").concat(l,`
`),n),o==="offer"?d=>{this.logSDPExchange(d,"answer",a==="local"?"remote":"local",l)}:void 0}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(o.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const d=this.remoteSDP.toString();l==null||l(d),await this.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(o.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async h=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n);const d=this.remoteSDP.toString();l==null||l(d),await this.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}async getRemoteSSRC(n,o){var a;if(o=o??((a=this.currentRemoteDescription)===null||a===void 0?void 0:a.sdp)){var l;const d=(l=wl(o).mediaDescriptions.find(h=>h.attributes.mid===n))===null||l===void 0?void 0:l.attributes.ssrcs;return d==null?void 0:d[0].ssrcId}}async setRemoteDescription(n){var o;await this.peerConnection.setRemoteDescription(n),_t(o=["connected","completed"]).call(o,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(n,o,a){const l=wl(n),d=l.mediaDescriptions.find(h=>h.attributes.mid===o);return d&&a===jt.AUDIO&&d.media.mediaType==="audio"&&Fy(d),iv(l)}},tr(pi.prototype,"establish",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"establish"),pi.prototype),tr(pi.prototype,"connect",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"connect"),pi.prototype),tr(pi.prototype,"receive",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"receive"),pi.prototype),tr(pi.prototype,"mockReceive",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"mockReceive"),pi.prototype),tr(pi.prototype,"stopReceiving",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"stopReceiving"),pi.prototype),tr(pi.prototype,"restartICE",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"restartICE"),pi.prototype),tr(pi.prototype,"close",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"close"),pi.prototype),tr(pi.prototype,"updateEncoderConfig",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"updateEncoderConfig"),pi.prototype),tr(pi.prototype,"updateSendParameters",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"updateSendParameters"),pi.prototype),tr(pi.prototype,"replaceTrack",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"replaceTrack"),pi.prototype),tr(pi.prototype,"muteLocal",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"muteLocal"),pi.prototype),tr(pi.prototype,"unmuteLocal",[kd],Object.getOwnPropertyDescriptor(pi.prototype,"unmuteLocal"),pi.prototype),pi);function kd(r,n,o){const a=r[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,v=new Array(h),_=0;_<h;_++)v[_]=arguments[_];return await a.apply(this,v)}finally{d()}},o}let Zf=function(r){return r.SEND_ONLY="SEND_ONLY",r.RECEIVE_ONLY="RECEIVE_ONLY",r}({});var vZ,_Z,yZ,EZ,wZ,SZ,bZ,CZ,TZ,RZ,IZ,Bi;function OZ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function J2(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?OZ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):OZ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}let xTe=(vZ=eh(Zf.SEND_ONLY),_Z=eh(Zf.SEND_ONLY),yZ=eh(),EZ=eh(Zf.RECEIVE_ONLY),wZ=eh(Zf.RECEIVE_ONLY),SZ=eh(Zf.RECEIVE_ONLY),bZ=eh(Zf.RECEIVE_ONLY),CZ=eh(Zf.RECEIVE_ONLY),TZ=eh(Zf.RECEIVE_ONLY),RZ=eh(),IZ=eh(Zf.RECEIVE_ONLY),Bi=class extends Mi{get state(){return this._state}set state(r){const n=this._state;this._state=r,this.emit(cr.StateChange,n,this._state)}constructor(r,n){super(),re(this,"isPlanB",!1),re(this,"store",void 0),re(this,"statsUploader",void 0),re(this,"sendConnection",void 0),re(this,"recvConnection",void 0),re(this,"localTrackMap",new Map),re(this,"remoteUserMap",new Map),re(this,"localDataChannels",[]),re(this,"pendingLocalTracks",[]),re(this,"pendingRemoteTracks",[]),re(this,"statsCollector",void 0),re(this,"dtlsFailedCount",0),re(this,"sendMutex",void 0),re(this,"recvMutex",void 0),re(this,"_state",xn.Disconnected),re(this,"_restartStates",["disconnected","failed"]),re(this,"reconnectInterval",void 0),re(this,"uploadUnplinkStarted",!1),re(this,"uploadDownlinkStarted",!1),re(this,"uplinkStateUploadInterval",void 0),re(this,"downlinkStatsUploadInterval",void 0),re(this,"handleMuteLocalTrack",async(o,a,l)=>{const d=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==xn.Connected)return void l(new tt(de.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const _=this.filterTobeMutedTracks(o);if(_.length===0)return void a();const y=_.find(x=>x[0]==="videoLowTrack");y&&y[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(_.map(x=>{let[,{id:X}]=x;return X}));let C=!1;var h,v;o.trackMediaType==="video"?C=!((h=this.localTrackMap.get(mt.LocalAudioTrack))===null||h===void 0||!h.track._muted):C=((v=this.localTrackMap.get(mt.LocalVideoTrack))===null||v===void 0?void 0:v.id)===void 0;const B=this.createMuteMessage(_);await ni(this,cr.RequestMuteLocal,B);const L=o.trackMediaType==="video"?av.MUTE_LOCAL_VIDEO:av.MUTE_LOCAL_AUDIO;await ni(this,cr.RequestP2PMuteLocal,{action:L,message:B,isMuteAll:C}),a()}catch(_){l(_)}finally{d()}}),re(this,"handleUnmuteLocalTrack",async(o,a,l)=>{const d=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==xn.Connected)return void l(new tt(de.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const h=this.filterTobeUnmutedTracks(o);if(h.length===0)return void a();await this.sendConnection.unmuteLocal(h.map(y=>{let[,{id:C}]=y;return C}));const v=this.createUnmuteMessage(h),_=o.trackMediaType==="video"?av.UNMUTE_LOCAL_VIDEO:av.UNMUTE_LOCAL_AUDIO;await ni(this,cr.RequestP2PMuteLocal,{action:_,message:v}),a()}catch(h){l(h)}finally{d()}}),re(this,"handleUpdateVideoEncoder",async(o,a,l,d)=>{let h;typeof d=="boolean"&&d||(h=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoEncoder"));try{const _=this.localTrackMap.get(mt.LocalVideoTrack);if(!this.sendConnection||!_||_.track!==o||this.state!==xn.Connected)return void a();const{id:y,track:C}=_;y&&(await this.sendConnection.updateSendParameters(y,C),await this.sendConnection.updateEncoderConfig(y,C),this.emit(cr.UpdateVideoEncoder,C)),a()}catch(_){l(_)}finally{var v;(v=h)===null||v===void 0||v()}}),re(this,"handleUpdateVideoSendParameters",async(o,a,l)=>{const d=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(mt.LocalVideoTrack);if(!this.sendConnection||!h||h.track!==o||this.state!==xn.Connected)return void a();const{id:v,track:_}=h;v&&await this.sendConnection.updateSendParameters(v,_),a()}catch(h){l(h)}finally{d()}}),re(this,"handleReplaceTrack",async(o,a,l,d)=>{let h;H.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(o.getTrackId(),"]")),typeof d=="boolean"&&d||(h=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var v;const y=Array.from(this.localTrackMap.entries()).find(C=>{let[,{track:B}]=C;return o===B});if(!this.sendConnection||!y||y[1].id===void 0||this.state!==xn.Connected)return void a();if(await((v=this.sendConnection)===null||v===void 0?void 0:v.replaceTrack(o,y[1].id)),y[0]===mt.LocalVideoTrack&&vn().supportDualStreamEncoding){const C=this.localTrackMap.get(mt.LocalVideoLowTrack);if(C){const B=o._mediaStreamTrack.clone();C.track._originMediaStreamTrack.stop(),C.track._mediaStreamTrack=B,C.track._originMediaStreamTrack=B,await new Mt((L,x)=>{this.handleReplaceTrack(C.track,L,x,!0)})}}a()}catch(y){l(y)}finally{var _;(_=h)===null||_===void 0||_()}}),re(this,"handleGetLocalVideoStats",o=>{o(this.statsCollector.getLocalVideoTrackStats())}),re(this,"handleGetLocalAudioStats",o=>{o(this.statsCollector.getLocalAudioTrackStats())}),re(this,"handleGetRemoteVideoStats",o=>this.statsCollector.getRemoteVideoTrackStats(o.uid)[o.uid]),re(this,"handleGetRemoteAudioStats",o=>this.statsCollector.getRemoteAudioTrackStats(o.uid)[o.uid]),this.store=r,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new WY(r),this.bindStatsUploaderEvents(),this.sendMutex=new ga("P2PChannel2-send-mutex",r.clientId),this.recvMutex=new ga("P2PChannel2-recv-mutex",r.clientId),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(o=>{o&&(o.iceConnectionState!=="disconnected"&&o.iceConnectionState!=="failed"||this.handleDisconnect(o.direction))})},me("ICE_RESTART_INTERVAL"))}async startP2PConnection(r,n){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(r){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(r,n){let o;try{if(n){this.recvConnection&&(H.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),o=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new mZ(r,this.store,Cc.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const a=await this.recvConnection.establish(n);return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}{this.state=xn.New,this.sendConnection&&(H.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),o=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new mZ(r,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const a=await this.sendConnection.establish();return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}}finally{o&&o()}}async p2pConnect(r){if(!this.sendConnection)throw new tt(de.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(r),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=xn.Connected}async addRemoteCandidate(r,n){if(n===Cc.RECEIVE_ONLY){if(!this.sendConnection)throw new tt(de.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(r)}else{if(!this.recvConnection)throw new tt(de.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(r)}}publish(r,n,o){var a=this;return _A(function*(){const l=yield mn(a.sendMutex.lock("From P2PChannel.publish"));try{if(!a.sendConnection||a.state!==xn.Connected){a.throwIfTrackTypeNotMatch(r);const y=r.filter(C=>a.pendingLocalTracks.indexOf(C)===-1);return void(a.pendingLocalTracks=a.pendingLocalTracks.concat(y))}a.store.pubId=a.store.pubId+1,ya.markPublishStart(a.store.clientId,a.store.pubId);const d=a.filterTobePublishedTracks(r,n,o);if(d.length===0)return void(yield mn(a.tryToUnmuteAudio(r)));d.forEach(y=>{let{track:C,type:B}=y;const L=Date.now();a.store.publish(C.getTrackId(),B===mt.LocalAudioTrack?"audio":"video",L)}),a.bindLocalTrackEvents(d);const h=yield mn(a.sendConnection.send(d.map(y=>{let{track:C}=y;return C}),a.store.codec,a.store.audioCodec)),v=(yield mn(h.next())).value,_=a.createGatewayPublishMessage(d,v);try{yield _}catch(y){throw h.throw(y),(y==null?void 0:y.code)===de.WS_ABORT&&d.forEach(C=>{let{track:B}=C;a.pendingLocalTracks.indexOf(B)===-1&&a.pendingLocalTracks.push(B)}),a.unbindLocalTrackEvents(d),y}yield mn(h.next()),d.forEach(y=>{let{type:C}=y;a.statsCollector.addLocalStats(C)}),a.statsUploader.startUploadOutboundStats(),a.assignLocalTracks(d,v),d.forEach(y=>{let{track:C,type:B}=y;const L=Date.now();a.store.publish(C.getTrackId(),B===mt.LocalAudioTrack?"audio":"video",void 0,L)}),a.startUploadUplinkState()}finally{l()}})()}async unpublish(r){if(!this.sendConnection||this.state!==xn.Connected)return void(r.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(l=>!_t(r).call(r,l)));const n=this.filterTobeUnpublishedTracks(r);if(n.length===0)return;const o=n.find(l=>l[0]==="videoLowTrack");o&&o[1].track.close();const a=this.createGatewayUnpublishMessage(n);if(await this.sendConnection.stopSending(n.map(l=>{let[,{id:d}]=l;return d})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(l=>{let[d,{track:h}]=l;return{type:d,track:h}})),n.forEach(l=>{let[d]=l;this.statsCollector.removeLocalStats(d)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===xn.Connected)return o&&o[1].track.close(),a;r.forEach(l=>{const d=this.pendingLocalTracks.indexOf(l);d!==-1&&this.pendingLocalTracks.splice(d,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const r=()=>{const n=[],o=[];Array.from(this.localTrackMap.entries()).forEach(a=>{let[l,{track:d,ssrcs:h}]=a;const v={stream_type:Nbe(d,l),ssrcs:h};d._muted||!d._enabled?n.push(v):o.push(v)}),n.length>0&&n.forEach(a=>{ni(this,cr.RequestMuteLocal,[a])}),o.length>0&&o.forEach(a=>{ni(this,cr.RequestUnmuteLocal,[a])})};r(),this.uplinkStateUploadInterval=window.setInterval(()=>{r()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(r){return _A(function*(){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(H.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ea(this,cr.RequestRePublish,this.pendingLocalTracks),this.emit(cr.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(r,n,o,a){var l;if(!this.recvConnection)throw new tt(de.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((l=this.remoteUserMap.get(r))!==null&&l!==void 0&&l.has(n))return;const{track:d,mid:h,transceiver:v}=await this.recvConnection.receive(n,[{ssrcId:o}],String(r.uid),a);n===jt.AUDIO?(r._audioTrack?r._audioTrack._updateOriginMediaStreamTrack(d):(r._audioTrack=new Ny(d,r.uid,r._uintid,this.store),H.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(r._audioTrack.getTrackId()))),v&&r._audioTrack._updateRtpTransceiver(v),this.bindRemoteTrackEvents(r,r._audioTrack)):(r._videoSSRC=o,r._videoTrack?r._videoTrack._updateOriginMediaStreamTrack(d):(r._videoTrack=new Oy(d,r.uid,r._uintid,this.store),H.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(r._videoTrack.getTrackId()))),v&&r._videoTrack._updateRtpTransceiver(v),this.bindRemoteTrackEvents(r,r._videoTrack));const _=this.remoteUserMap.get(r);_?_.set(n,h):this.remoteUserMap.set(r,new Map([[n,h]])),this.statsCollector.addRemoteStats(r.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const y=this.pendingRemoteTracks.findIndex(C=>{let{user:B,kind:L}=C;return B.uid===r.uid&&n===L});y!==-1&&(this.pendingRemoteTracks.splice(y,1),this.emit(cr.MediaReconnectEnd,r.uid))}async mockSubscribe(r,n,o,a){if(!this.recvConnection)throw new tt(de.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(n,[{ssrcId:o}],String(r.uid),a)}async unsubscribe(r,n,o){const a=this.pendingRemoteTracks.filter(d=>{let{user:h,kind:v}=d;return n!==void 0?h.uid===r.uid&&n===v:h.uid===r.uid});if(a.forEach(d=>{const h=this.pendingRemoteTracks.indexOf(d);this.pendingRemoteTracks.splice(h,1)}),this.recvConnection||o||a.forEach(d=>{let{kind:h}=d;var v;if(h===jt.AUDIO)(v=r._audioTrack)===null||v===void 0||v._destroy(),r._audioTrack=void 0;else if(h===jt.VIDEO){var _;(_=r._videoTrack)===null||_===void 0||_._destroy(),r._videoTrack=void 0}}),!this.recvConnection)return;const l=this.filterTobeUnSubscribedTracks(r,n);l.length!==0&&(await this.recvConnection.stopReceiving(l.map(d=>{let[,{id:h}]=d;return h})),this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),l.forEach(d=>{let[h,{kind:v}]=d;var _,y;if(v===jt.VIDEO&&h._videoSSRC&&((_=this.recvConnection)===null||_===void 0||_.setStatsRemoteVideoIsReady(h._videoSSRC,!1)),v===jt.VIDEO)this.unbindRemoteTrackEvents(h._videoTrack),o||((y=h._videoTrack)===null||y===void 0||y._destroy(),h._videoTrack=void 0);else if(v===jt.AUDIO){var C;this.unbindRemoteTrackEvents(h._audioTrack),!o&&((C=h._audioTrack)===null||C===void 0||C._destroy(),h._audioTrack=void 0)}}),l.forEach(d=>{let[,{kind:h}]=d;ni(this,cr.RequestP2PMuteRemote,h)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const r=()=>Array.from(this.remoteUserMap.entries()).forEach(n=>{let[,o]=n;[jt.VIDEO,jt.AUDIO].forEach(a=>{o.has(a)?ni(this,cr.RequestP2PUnmuteRemote,a):ni(this,cr.RequestP2PMuteRemote,a)})});r(),this.downlinkStatsUploadInterval=window.setInterval(()=>{r()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(r){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(r){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(r){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(r){throw new tt(de.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(r,n){if(!this.recvConnection)return;const o=this.remoteUserMap.get(r);if(!o)return void H.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(r.uid,"."));if(!o.get(n))return void H.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(r.uid," media type ").concat(n,"."));const a=n===jt.VIDEO?r._videoSSRC:r._audioSSRC;a!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(r,n){return this.unmuteRemoteNoLock(r,n)}async unmuteRemoteNoLock(r,n){if(!this.recvConnection)return;const o=this.remoteUserMap.get(r);if(!o)return void H.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(r.uid,"."));o.get(n)||H.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(r.uid," media type ").concat(n,"."))}getAllTracks(r){const n=this.localTrackMap.get(mt.LocalAudioTrack);if((n==null?void 0:n.track)instanceof Uo){const o=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==mt.LocalAudioTrack}).filter(a=>{let[l]=a;return!(r&&l===mt.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(o.trackList)}return Array.from(this.localTrackMap.entries()).filter(o=>{let[a]=o;return!(r&&a===mt.LocalVideoLowTrack)}).map(o=>{let[,{track:a}]=o;return a})}reportPublishEvent(r,n,o,a,l){if(r){const h=this.localTrackMap.get(mt.LocalAudioTrack),v=a?this.localTrackMap.get(mt.LocalVideoLowTrack):this.localTrackMap.get(mt.LocalVideoTrack);rr.publish(this.store.sessionId,{eventElapse:ya.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:v==null?void 0:v.track.getTrackLabel(),screenshare:(v==null?void 0:v.track._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var d;o||(o=[]);const h=o.find(_=>_ instanceof Yi),v=a?(d=this.localTrackMap.get(mt.LocalVideoTrack))===null||d===void 0?void 0:d.track:o.find(_=>_ instanceof hi);rr.publish(this.store.sessionId,{eventElapse:ya.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:v==null?void 0:v.getTrackLabel(),screenshare:(v==null?void 0:v._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(r,n,o,a){const l=a===jt.VIDEO?o._videoSSRC:o._audioSSRC;l&&rr.subscribe(this.store.sessionId,{succ:r,ec:n,video:a===jt.VIDEO,audio:a===jt.AUDIO,peerid:o.uid,subscribeRequestid:a===jt.VIDEO?o._videoSSRC:o._audioSSRC,p2pid:this.store.p2pId,eventElapse:ya.measureFromSubscribeStart(this.store.clientId,l)})}reset(){H.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new ga("P2PChannel2-send-mutex",this.store.clientId),this.sendMutex=new ga("P2PChannel2-recv-mutex",this.store.clientId),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const r=this.localTrackMap.get(mt.LocalAudioTrack);if((r==null?void 0:r.track)instanceof Uo){if(r.track.trackList.length>0){const n=r.track;r.track.trackList.forEach(o=>{n.removeAudioTrack(o)})}r.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=xn.Disconnected}getStats(r){var n,o;return r?(o=this.recvConnection)===null||o===void 0?void 0:o.getStats():(n=this.sendConnection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(r){var n;return((n=this.recvConnection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(r))||!1}getLocalAudioVolume(){const r=this.localTrackMap.get(mt.LocalAudioTrack);if(r)return r.track.getVolumeLevel()}getLocalVideoSize(){const r=this.localTrackMap.get(mt.LocalVideoTrack);if(r)return{width:r.track.videoWidth||0,height:r.track.videoHeight||0}}getEncoderConfig(r){const n=this.localTrackMap.get(r);return n&&n.track instanceof hi||n&&n.track instanceof Yi?n.track._encoderConfig:void 0}getLocalMedia(r){return this.localTrackMap.get(r)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(r,n){if(!r)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(r);return!!o&&(!n||o.has(n))}async hasRemoteMediaWithLock(r,n){if(!r)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(r);return!!o&&(!n||o.has(n))}getRemoteMedia(r){var n;const o=Array.from(Sl(n=this.remoteUserMap).call(n)).find(a=>a.uid===r);return o?{audioTrack:o.audioTrack,audioSSRC:o._audioSSRC,videoTrack:o.videoTrack,videoSSRC:o._videoSSRC}:{}}getAudioLevels(){let r=Array.from(this.remoteUserMap.entries()).map(o=>{let[a]=o;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(mt.LocalAudioTrack);return n&&r.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),r=j0(r).call(r,(o,a)=>o.level-a.level),r}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(H.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=xn.Reconnecting,me("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r;var o;n._videoTrack&&n._videoTrack._player&&((o=n._videoTrack._player.getVideoElement())===null||o===void 0||o.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(r=>{var n;let[o,{track:a}]=r;switch(o){case mt.LocalVideoTrack:_t(n=a._hints).call(n,Jn.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case mt.LocalAudioTrack:a instanceof Uo?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case mt.LocalVideoLowTrack:}}),this.emit(cr.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n,o]=r;Array.from(Sl(o).call(o)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(cr.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),H.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(r,n){for(const o of this.pendingRemoteTracks){const{user:a,kind:l}=o;if((r instanceof hv?r.uid:r)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(r,n){this.hasPendingRemoteMedia(r,n)||this.pendingRemoteTracks.push({user:r,kind:n})}async restartICE(r,n){let o,a;if(r===Cc.SEND_ONLY){if(!this.sendConnection)throw new tt(de.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");o=await this.sendMutex.lock("From P2PChannel.restartICE"),a=this.sendConnection}else{if(!this.recvConnection)throw new tt(de.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");o=await this.recvMutex.lock("From P2PChannel.restartICE"),a=this.recvConnection}try{if(n){const l=await a.restartICE(n);return a.isInRestartIce=!1,l}{const l=await a.restartICE();if(l){const d=await ea(this,cr.RequestP2PRestartICE,{direction:Cc.RECEIVE_ONLY,iceParameter:l});await a.restartICE(d),a.isInRestartIce=!1}}}finally{o()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const r=this.sendConnection.getStats(),n=this.localTrackMap.get(mt.LocalVideoTrack),o=this.localTrackMap.get(mt.LocalAudioTrack),a=r.videoSend.find(x=>{var X;return x.ssrc===(n==null||(X=n.ssrcs)===null||X===void 0?void 0:X[0].ssrcId)}),l=r.audioSend.find(x=>{var X;return x.ssrc===(o==null||(X=o.ssrcs)===null||X===void 0?void 0:X[0].ssrcId)});if(!a||!l)return 1;const d=Iu(this,cr.NeedSignalRTT),h=a?a.rttMs:void 0,v=l?l.rttMs:void 0,_=h&&v?(h+v)/2:h||v,y=(_&&d?(_+d)/2:_||d)||0,C=100*r.sendPacketLossRate*.7/50+.3*y/1500,B=C<.17?1:C<.36?2:C<.59?3:C<.1?4:5,L=n==null?void 0:n.track;if(L&&L._encoderConfig&&L._hints.indexOf(Jn.SCREEN_TRACK)===-1){const x=L._encoderConfig.bitrateMax,X=r.bitrate.actualEncoded;if(x&&X){const G=(1e3*x-X)/(1e3*x);return Dq[G<.15?0:G<.3?1:G<.45?2:G<.6?3:4][B]}}return B}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const r=this.recvConnection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(o=>{let[a]=o;const l=a._audioSSRC,d=a._videoSSRC,h=r.audioRecv.find(X=>X.ssrc===l),v=r.videoRecv.find(X=>X.ssrc===d);if(!h&&!v)return void(n+=1);const _=Iu(this,cr.NeedSignalRTT),y=r.rtt,C=(y&&_?(y+_)/2:y||_)||0,B=h?h.jitterMs:void 0,L=r.recvPacketLossRate;let x=.7*L*100/50+.3*C/1500;B&&(x=.6*L*100/50+.2*C/1500+.2*B/400),n+=x<.1?1:x<.17?2:x<.36?3:x<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(r){return new Mt((n,o)=>{this.handleMuteLocalTrack(r,n,o)})}filterTobePublishedTracks(r,n,o){const a=[],l=vn(),d=this.getAllTracks();r=gy(r=r.filter(_=>d.indexOf(_)===-1));let h=!1,v=!1;for(const _ of r){if(_ instanceof hi&&(this.localTrackMap.has(mt.LocalVideoTrack)||h?new tt(de.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:_,type:mt.LocalVideoTrack}),h=!0),n)){const y=this.getLowVideoTrack(_,o);a.push({track:y,type:mt.LocalVideoLowTrack})}if(_ instanceof Yi){const y=this.localTrackMap.get(mt.LocalAudioTrack);if(y){if(!(y.track instanceof Uo))throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");y.track.addAudioTrack(_),this.bindLocalAudioTrackEvents(_,!0)}else if(v){const C=a.find(B=>{let{type:L}=B;return L===mt.LocalAudioTrack});if(!(C.track instanceof Uo))throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");C.track.addAudioTrack(_)}else{if(!l.webAudioMediaStreamDest||_ instanceof Uo||_._bypassWebAudio)a.push({track:_,type:mt.LocalAudioTrack});else{const C=new Uo;C.addAudioTrack(_),a.push({track:C,type:mt.LocalAudioTrack})}v=!0}}}return a}filterTobeUnpublishedTracks(r){const n=[],o=this.getAllTracks();r=gy(r=r.filter(a=>o.indexOf(a)!==-1));for(const a of r){if(a instanceof Yi){const l=this.localTrackMap.get(mt.LocalAudioTrack);if(!l)continue;l.track instanceof Uo?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([mt.LocalAudioTrack,l]),l.track.close())):n.push([mt.LocalAudioTrack,l])}if(a instanceof hi){const l=this.localTrackMap.get(mt.LocalVideoTrack);if(!l)continue;n.push([mt.LocalVideoTrack,l]);const d=this.localTrackMap.get(mt.LocalVideoLowTrack);d&&n.push([mt.LocalVideoLowTrack,d])}}return n}bindLocalTrackEvents(r){r.forEach(n=>{let{track:o,type:a}=n;switch(a){case mt.LocalVideoTrack:o.addListener(Zt.GET_STATS,this.handleGetLocalVideoStats),o.addListener(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Zt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.addListener(Zt.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),o.addListener(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.addListener(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case mt.LocalAudioTrack:this.bindLocalAudioTrackEvents(o);case mt.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(r,n){r instanceof Uo?r.trackList.forEach(o=>{o.addListener(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Zt.GET_STATS,this.handleGetLocalAudioStats),o.addListener(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.addListener(Zt.GET_STATS,this.handleGetLocalAudioStats),r.addListener(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||r.addListener(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(r){r||(r=Array.from(this.localTrackMap.entries()).map(n=>{let[o,{track:a}]=n;return{track:a,type:o}})),r.forEach(n=>{let{track:o,type:a}=n;switch(a){case mt.LocalVideoTrack:o.off(Zt.GET_STATS,this.handleGetLocalVideoStats),o.off(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(Zt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.off(Zt.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),o.off(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.off(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case mt.LocalAudioTrack:this.unbindLocalAudioTrackEvents(o);case mt.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(r){r instanceof Uo?r.trackList.forEach(n=>{n.off(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Zt.GET_STATS,this.handleGetLocalAudioStats),n.off(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.off(Zt.GET_STATS,this.handleGetLocalAudioStats),r.off(Zt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(Zt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(Zt.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(Zt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(Zt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(r,n){n instanceof Oy&&n.addListener(Zt.GET_STATS,o=>{o(this.handleGetRemoteVideoStats(r))}),n instanceof Ny&&n.addListener(Zt.GET_STATS,o=>{o(this.handleGetRemoteAudioStats(r))})}unbindRemoteTrackEvents(r){r&&r.removeAllListeners(Zt.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n,o]=r;o.has(jt.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),o.has(jt.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(r,n){return r.map((o,a)=>{var l;let d,{track:h,type:v}=o;switch(v){case mt.LocalAudioTrack:d=Fn.Audio;break;case mt.LocalVideoTrack:d=_t(l=h._hints).call(l,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalVideoLowTrack:d=Fn.Low}return{kind:v===mt.LocalAudioTrack?jt.AUDIO:jt.VIDEO,stream_type:d,mid:n[a].id,ssrcs:n[a].localSSRC,isMuted:h.muted||!h.enabled}})}createGatewayUnpublishMessage(r){return r.map(n=>{var o;let a,[l,{track:d,ssrcs:h,id:v}]=n;switch(l){case mt.LocalVideoTrack:a=_t(o=d._hints).call(o,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalAudioTrack:a=Fn.Audio;break;case mt.LocalVideoLowTrack:a=Fn.Low}return{stream_type:a,ssrcs:h,mid:v}})}assignLocalTracks(r,n){r.forEach((o,a)=>{let{track:l,type:d}=o;this.localTrackMap.set(d,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(r){r.forEach(n=>{let[o]=n;this.localTrackMap.delete(o)})}bindConnectionEvents(r){r.onConnectionStateChange=async n=>{var o;H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(r.name,".onConnectionStateChange(").concat(n,")")),this.emit(cr.PeerConnectionStateChange,n),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(r.isInRestartIce=!1),_t(o=this._restartStates).call(o,n)&&!r.isInRestartIce&&(n==="disconnected"&&await Ps(800),r.iceConnectionState!=="disconnected"&&r.iceConnectionState!=="failed"||this.handleDisconnect(r.direction))},r.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),rr.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:Oi.TRACER}).onSuccess(),this.emit(cr.IceConnectionStateChange,n)},r.onICETransportStateChange=n=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},r.onDTLSTransportStateChange=n=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},r.onDTLSTransportError=n=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},r.onFirstAudioDecoded=n=>{var o;const a=Array.from(Sl(o=this.remoteUserMap).call(o)).find(d=>d._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(wA.FIRST_FRAME_DECODED),rr.firstRemoteFrame(this.store.sessionId,Yo.FIRST_AUDIO_DECODE,Ci.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},r.onFirstAudioReceived=n=>{var o;const a=Array.from(Sl(o=this.remoteUserMap).call(o)).find(l=>l._audioSSRC===n);a&&rr.firstRemoteFrame(this.store.sessionId,Yo.FIRST_AUDIO_RECEIVED,Ci.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},r.onFirstVideoDecoded=(n,o,a)=>{this.reportVideoFirstFrameDecoded(n,o,a)},r.onFirstVideoReceived=n=>{var o;const a=Array.from(Sl(o=this.remoteUserMap).call(o)).find(l=>l._videoSSRC===n);a&&rr.firstRemoteFrame(this.store.sessionId,Yo.FIRST_VIDEO_RECEIVED,Ci.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},r.onSelectedLocalCandidateChanged=(n,o)=>{const a=n.candidateType==="relay",l=o.candidateType==="relay";o.candidateType!=="unknown"&&a===l||this.emit(cr.ConnectionTypeChange,a),H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(lv(o))," -> ").concat(JSON.stringify(lv(n)),")"))},r.onSelectedRemoteCandidateChanged=(n,o)=>{H.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(lv(o))," -> ").concat(JSON.stringify(lv(n)),")"))},r.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},r.onLocalCandidate=n=>{this.emit(cr.LocalCandidate,{candidate:n,direction:r.direction})}}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0,r.onFirstVideoDecodedTimeout=void 0,r.onLocalCandidate=void 0}async handleDisconnect(r){const n=r===Cc.SEND_ONLY?this.sendConnection:this.recvConnection;n&&!n.isInRestartIce&&(n.isInRestartIce=!0,H.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(n.name,"] start use restartICE")),r===Cc.SEND_ONLY?this.restartICE(r):ea(this,cr.RequestP2PRestartICE,{direction:Cc.SEND_ONLY}))}filterTobeMutedTracks(r){const n=[];if(this.getAllTracks().indexOf(r)===-1)return n;const o=this.localTrackMap.get(mt.LocalAudioTrack);if(r instanceof Yi&&(o==null?void 0:o.track)instanceof Uo)return o.track.isActive||n.push([mt.LocalAudioTrack,o]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return r===d});if(a&&(n.push(a),a[0]===mt.LocalVideoTrack)){const l=this.localTrackMap.get(mt.LocalVideoLowTrack);l&&n.push([mt.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(r){const n=[],o=this.localTrackMap.get(mt.LocalAudioTrack);if(r instanceof Yi&&(o==null?void 0:o.track)instanceof Uo)return o.track.isActive&&n.push([mt.LocalAudioTrack,o]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return r===d});if(a)if(a[0]===mt.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(mt.LocalVideoLowTrack);l&&n.push([mt.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(r){return r.map(n=>{var o;let a,[l,{track:d,ssrcs:h,id:v}]=n;switch(l){case mt.LocalAudioTrack:a=Fn.Audio;break;case mt.LocalVideoTrack:a=_t(o=d._hints).call(o,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalVideoLowTrack:a=Fn.Low}return{stream_type:a,ssrcs:h,mid:v}})}createUnmuteMessage(r){return r.map(n=>{var o;let a,[l,{track:d,ssrcs:h,id:v}]=n;switch(l){case mt.LocalAudioTrack:a=Fn.Audio;break;case mt.LocalVideoTrack:a=_t(o=d._hints).call(o,Jn.SCREEN_TRACK)?Fn.Screen:Fn.High;break;case mt.LocalVideoLowTrack:a=Fn.Low}return{stream_type:a,ssrcs:h,mid:v}})}filterTobeUnSubscribedTracks(r,n){const o=[],a=this.remoteUserMap.get(r);if(!a)return o;if(n){const l=a.get(n);if(!l)return o;o.push([r,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[d,h]=l;o.push([r,{kind:d,id:h}])});return o}createUnsubscribeMessage(r){const n=[];return r.forEach(o=>{let[a,{kind:l,id:d}]=o;switch(l){case jt.VIDEO:return void(a._videoSSRC&&n.push({stream_type:jt.VIDEO,ssrcId:a._videoSSRC}));case jt.AUDIO:return void(a._audioSSRC&&n.push({stream_type:jt.AUDIO,ssrcId:a._audioSSRC}))}}),n}withdrawRemoteTracks(r){r.forEach(n=>{let[o,{kind:a}]=n;const l=this.remoteUserMap.get(o);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(o))})}async updateBitrateLimit(r){const n=this.localTrackMap.get(mt.LocalVideoTrack),o=this.localTrackMap.get(mt.LocalVideoLowTrack);n&&(await n.track.setBitrateLimit(r.uplink),await new Mt((a,l)=>{this.handleUpdateVideoEncoder(n.track,a,l,!0)})),o&&r.low_stream_uplink&&(await o.track.setBitrateLimit({max_bitrate:r.low_stream_uplink.bitrate,min_bitrate:r.low_stream_uplink.bitrate||0}),await new Mt((a,l)=>{this.handleUpdateVideoEncoder(o.track,a,l,!0)}))}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const r=this.sendConnection.peerConnectionState,n=this.recvConnection.peerConnectionState;return r!=="connected"&&n!=="connected"}return!0}async tryToUnmuteAudio(r){for(let n=0;n<r.length;n++)if(r[n]instanceof Yi){const o=this.filterTobeUnmutedTracks(r[n]);if(o.length===0)continue;const a=this.createUnmuteMessage(o);return void await ni(this,cr.RequestUnmuteLocal,a)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=r=>this.getStats(r),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(r=>{let[,{ssrcs:n}]=r;return!!n}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=r=>{var n;return!((n=this.recvConnection)===null||n===void 0||!n.getRemoteVideoIsReady(r))},this.statsUploader.requestUpload=(r,n)=>this.emit(cr.RequestUpload,r,n),this.statsUploader.requestUploadStats=r=>this.emit(cr.RequestUploadStats,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ps(p5(this.dtlsFailedCount,Ro)),this.emit(cr.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(mt.LocalVideoTrack)||this.pendingLocalTracks.some(r=>r instanceof hi)}throwIfTrackTypeNotMatch(r){if(r.filter(n=>n instanceof hi).length>1)throw new tt(de.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r.filter(n=>n instanceof Yi).length>1&&(r.some(n=>n instanceof Yi&&n._bypassWebAudio)||!vn().webAudioMediaStreamDest))throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of r){if(n instanceof hi&&this.pendingLocalTracks.some(o=>o instanceof hi))throw new tt(de.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Yi&&this.pendingLocalTracks.some(o=>o instanceof Yi)&&(!vn().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(o=>o instanceof Yi&&o._bypassWebAudio)))throw new tt(de.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(r,n){const o=!me("DISABLE_DUAL_STREAM_USE_ENCODING")&&vn().supportDualStreamEncoding,a=J2(J2({},{width:160,height:120,framerate:15,bitrate:50}),n);let l;l=o?r._mediaStreamTrack.clone():BU(r,a);const d=ii(8,"track-low-"),h=new hi(l,J2(J2({},o&&{scaleResolutionDownBy:AU(a,r)}),{},{frameRate:a.framerate,bitrateMax:a.bitrate,bitrateMin:a.bitrate}),void 0,void 0,d);return h.on(r1.TRANSCEIVER_UPDATED,v=>{r._updateRtpTransceiver(v,Sy.LOW_STREAM)}),h._hints.push(Jn.LOW_STREAM),r.addListener(Zt.NEED_CLOSE,()=>{h.close()}),h}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(r,n,o,a){var l;const d=Array.from(Sl(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===r);if(d){a||this.store.subscribe(d.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,v=h.subscribe.find(_=>_.userId===d.uid&&_.type==="video");rr.firstRemoteVideoDecode(this.store.sessionId,Yo.FIRST_VIDEO_DECODE,Ci.FIRST_VIDEO_DECODE,{peer:d._uintid,videowidth:n,videoheight:o,subscribeElapse:ya.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(v==null?void 0:v.subscribeEnd)||0,subscriberStart:(v==null?void 0:v.subscribeStart)||0,videoAddNotify:(v==null?void 0:v.streamAdded)||0,state:a?1:0})}}async remoteMediaSsrcChanged(r,n,o){if(!this.recvConnection)return!1;const a=this.remoteUserMap.get(r);if(!a)return!1;const l=a.get(n);if(!l)return!1;const d=await this.recvConnection.getRemoteSSRC(l);return d!==void 0&&d!==o}isPreSubScribe(r){return!1}async publishDataChannel(r){throw new tt(de.NOT_SUPPORTED)}async unpublishDataChannel(r){throw new tt(de.NOT_SUPPORTED)}async subscribeDataChannel(r,n){throw new tt(de.NOT_SUPPORTED)}async unsubscribeDataChannel(r,n){throw new tt(de.NOT_SUPPORTED)}hasPendingRemoteDataChannel(r,n){throw new tt(de.NOT_SUPPORTED)}setPendingRemoteDataChannel(r,n){throw new tt(de.NOT_SUPPORTED)}async preConnect(r){throw new tt(de.NOT_SUPPORTED)}getEstablishParams(){throw new tt(de.NOT_SUPPORTED)}async reSubscribe(r){throw new tt(de.NOT_SUPPORTED)}reportVideoFirstFrameRender(r){}async updateVideoStreamParameter(r,n){throw new tt(de.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(r=>{let[n,{track:o}]=r;n===mt.LocalVideoLowTrack?o._updateRtpTransceiver(void 0,Sy.LOW_STREAM):o._updateRtpTransceiver(void 0)})}},tr(Bi.prototype,"p2pConnect",[vZ],Object.getOwnPropertyDescriptor(Bi.prototype,"p2pConnect"),Bi.prototype),tr(Bi.prototype,"unpublish",[_Z],Object.getOwnPropertyDescriptor(Bi.prototype,"unpublish"),Bi.prototype),tr(Bi.prototype,"unpublishLowStream",[yZ],Object.getOwnPropertyDescriptor(Bi.prototype,"unpublishLowStream"),Bi.prototype),tr(Bi.prototype,"subscribe",[EZ],Object.getOwnPropertyDescriptor(Bi.prototype,"subscribe"),Bi.prototype),tr(Bi.prototype,"mockSubscribe",[wZ],Object.getOwnPropertyDescriptor(Bi.prototype,"mockSubscribe"),Bi.prototype),tr(Bi.prototype,"unsubscribe",[SZ],Object.getOwnPropertyDescriptor(Bi.prototype,"unsubscribe"),Bi.prototype),tr(Bi.prototype,"muteRemote",[bZ],Object.getOwnPropertyDescriptor(Bi.prototype,"muteRemote"),Bi.prototype),tr(Bi.prototype,"unmuteRemote",[CZ],Object.getOwnPropertyDescriptor(Bi.prototype,"unmuteRemote"),Bi.prototype),tr(Bi.prototype,"hasRemoteMediaWithLock",[TZ],Object.getOwnPropertyDescriptor(Bi.prototype,"hasRemoteMediaWithLock"),Bi.prototype),tr(Bi.prototype,"disconnectForReconnect",[RZ],Object.getOwnPropertyDescriptor(Bi.prototype,"disconnectForReconnect"),Bi.prototype),tr(Bi.prototype,"remoteMediaSsrcChanged",[IZ],Object.getOwnPropertyDescriptor(Bi.prototype,"remoteMediaSsrcChanged"),Bi.prototype),Bi);function eh(r){return function(n,o,a){const l=n[o];if(typeof l!="function")throw new Error("Cannot use mutex on object property.");return a.value=async function(){for(var d=arguments.length,h=new Array(d),v=0;v<d;v++)h[v]=arguments[v];switch(r){case Zf.SEND_ONLY:{const _=await this.sendMutex.lock("From P2PChannel2.".concat(o));try{return await l.apply(this,h)}finally{_()}}case Zf.RECEIVE_ONLY:{const _=await this.recvMutex.lock("From P2PChannel2.".concat(o));try{return await l.apply(this,h)}finally{_()}}default:{const _=await this.sendMutex.lock("From P2PChannel2.".concat(o)),y=await this.recvMutex.lock("From P2PChannel2.".concat(o));try{return await l.apply(this,h)}finally{_(),y()}}}},a}}class y1 extends Mi{constructor(n,o){super(),re(this,"signal",void 0),re(this,"token",void 0),re(this,"tokenTimeout",void 0),re(this,"tokenInterval",void 0),re(this,"_sequence",0),re(this,"userMap",new Map),re(this,"encoder",new TextEncoder),this.signal=n,this.token=o;const a=()=>{this.signal.connectionState===Ai.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(a,1e3):this.tokenInterval=window.setTimeout(a,3*me("P2P_TOKEN_INTERVAL"))};a()}async send(n,o,a,l,d){var h;if(this.userMap.size===0)return;const v=Array.from(Jl(h=this.userMap).call(h))[0].token;typeof o!="string"&&(o=JSON.stringify(o)),l=l??ii(6,""),d=d??this._sequence++;const _={_id:l,_type:n,_seq:d,_message:o,token:"".concat(this.token,"_").concat(v)};me("SHOW_P2P_LOG")&&H.debug("send message",_,"noNeedResponse : ".concat(a)),this.splitMessage(JSON.stringify(_)).forEach(C=>{this.signal.request(Cr.DATA_STREAM,{payload:nv(this.encoder.encode(C))})});const y=new Mt((C,B)=>{const L=window.setTimeout(()=>{this.off("res-@".concat(l,"_ack"),x),this.off("res-@".concat(l),G),this.off(Dy.ABORT,X),H.debug("[external-signal] request timeout, type: ".concat(n,", requestId: ").concat(l)),this.userMap.size===0?B(new tt(de.INVALID_REMOTE_USER)):B(new tt(de.TIMEOUT))},me("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),x=()=>{L&&window.clearTimeout(L),this.off(Dy.ABORT,X),a&&C()},X=()=>{L&&window.clearTimeout(L),this.off("res-@".concat(l,"_ack"),x),this.off("res-@".concat(l),G),B(new tt(de.EXTERNAL_SIGNAL_ABORT,"type: ".concat(n,", requestId: ").concat(l)))};this.once(Dy.ABORT,X),this.once("res-@".concat(l,"_ack"),x);const G=(Ae,ue)=>{q=!0,L&&window.clearTimeout(L),this.off("res-@".concat(l,"_ack"),x),this.off(Dy.ABORT,X),Ae==="success"?C(ue):B(new tt(de.P2P_MESSAGE_FAILED,"request ".concat(n," failed, requestId: ").concat(l)))};let q=!1;a||(this.once("res-@".concat(l),G),Ps(me("SIGNAL_REQUEST_TIMEOUT")).then(()=>{q||H.warning("external_signal request timeout, type: ".concat(n,", requestId: ").concat(l,", ").concat(_))}))});try{return await y}catch(C){if(C.code===de.TIMEOUT)return await this.send(n,o,a,l,d);throw C}}onMessage(n){var o;const{_uid:a}=n;let l,d=this.userMap.get(a);if(d)l=d.splitMessageMap;else{if(this.userMap.size>0||!("_type"in n)||n._type!==ao.CHECK)return;const{token:y}=n;l=new Map,d={uid:a,isStart:!0,token:y,splitMessageMap:l,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(a,d),this.signal.emit(An.ON_USER_ONLINE,{uid:a}),this.handleUserOnline()}if("id"in n&&"total"in n){var h;const{id:y,total:C}=n,B=(h=l.get(y))!==null&&h!==void 0?h:[];if(B.push(n),l.has(y)||l.set(y,B),B.length!==C)return;{const L=j0(B).call(B,(x,X)=>x.index-X.index).map(x=>x.payload).join("");l.delete(y),(n=JSON.parse(L))._uid=a}}const{_type:v,token:_}=n;if(_t(o=[ao.ACK,ao.CHECK]).call(o,v))return v===ao.CHECK&&this.handleCheckToken(d,_),void this.receiveMessage(n);_==="".concat(d.token,"_").concat(this.token)?this.handleReceivedMessage(n):H.debug('Receive unexpected message", '.concat(_,", cur_token: ").concat(d.token,"_").concat(this.token),n)}check(){const n={_id:ii(6,""),token:this.token,_type:ao.CHECK};me("SHOW_P2P_LOG")&&H.debug("send message",n),this.signal.request(Cr.DATA_STREAM,{payload:nv(this.encoder.encode(JSON.stringify(n)))})}ack(n){const o={_id:n,_type:ao.ACK,token:this.token};me("SHOW_P2P_LOG")&&H.debug("send message",o),this.signal.request(Cr.DATA_STREAM,{payload:nv(this.encoder.encode(JSON.stringify(o)))})}response(n,o,a){this.send(ao.RESPONSE,JSON.stringify({success:!a,message:o}),!0,n)}handleReceivedMessage(n){const o=()=>{this.userMap.forEach(y=>{const{receivedMessagesMap:C,nextExpectedSequenceNumber:B}=y;for(;C.has(B);){const L=C.get(B);C.delete(B),this.receiveMessage(L),y.nextExpectedSequenceNumber++}})};if(!n)return void o();const{_uid:a,_seq:l}=n,d=this.userMap.get(a),{receivedMessagesMap:h,isStart:v,nextExpectedSequenceNumber:_}=d;if(l<_)return this.ack(n._id),void H.debug("[external-signal] receive old message, seq: ".concat(l,", ").concat(n._message));h.set(l,n),v&&l===_&&(this.receiveMessage(n),h.delete(_),d.nextExpectedSequenceNumber++,o())}receiveMessage(n){const{_id:o,_type:a,_message:l,_uid:d}=n;if(me("SHOW_P2P_LOG")&&H.debug("receive message",n),o){let h;switch(n._type!==ao.ACK&&(l&&(h=JSON.parse(l)),this.ack(n._id)),n._type){case ao.CANDIDATE:case ao.CONTROL:this.signal.emit(a,h,d);break;case ao.PUBLISH:case ao.UNPUBLISH:case ao.RESTART_ICE:case ao.CALL:h.uid=d,ea(this.signal,a,h).then(v=>{this.response(n._id,v)}).catch(()=>{this.response(n._id,void 0,!0)});break;case ao.ACK:this.getListeners("res-@".concat(o,"_ack")).length>0&&this.emit("res-@".concat(o,"_ack"));break;case ao.RESPONSE:{const{success:v,message:_}=h;this.emit("res-@".concat(o),v?"success":"failed",_);break}}}}splitMessage(n){if(n.length<y1.MAX_MESSAGE_SIZE)return[n];const o=[],{remoteToken:a}=JSON.parse(n),l=ii(6,"");let d=0,h=800;const v=Math.ceil(n.length/h);for(;n.length>0;){d++;const _={id:l,index:d,total:v,payload:n.slice(0,h),token:"".concat(this.token,"_").concat(a)};JSON.stringify(_).length>y1.MAX_MESSAGE_SIZE?h-=50:(o.push(_),n=n.slice(h))}return o.map(_=>JSON.stringify(_))}handleCheckToken(n,o){return n.token!==o?(H.debug("token changed, from ".concat(n.token," to ").concat(o)),this.reset(n.uid,o),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{H.debug("token timeout, ".concat(o)),this.reset(n.uid)},me("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const n=await ea(this.signal,ao.CALL,void 0),o=await this.send(ao.CALL,n);this.signal.emit(Br.P2P_CONNECTION,o,!0)}async reset(n,o){const a=this.userMap.get(n);a&&(this.emit(Dy.ABORT),this.signal.emit(An.ON_USER_OFFLINE,{uid:a.uid,reason:ibe.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),o||(H.debug("change local token from ".concat(o," to ").concat(o)),this.token=ii(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(Dy.ABORT)}}re(y1,"MAX_SIZE",1),re(y1,"MAX_MESSAGE_SIZE",1024);class UTe extends Mi{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===Ai.CONNECTED?this.emit(Br.WS_CONNECTED):n===Ai.RECONNECTING?this.emit(Br.WS_RECONNECTING,this._websocketReconnectReason):n===Ai.CLOSED&&this.emit(Br.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,o){super(),re(this,"_disconnectedReason",void 0),re(this,"_websocketReconnectReason",void 0),re(this,"_connectionState",Ai.CLOSED),re(this,"reconnectToken",void 0),re(this,"p2pToken",void 0),re(this,"websocket",void 0),re(this,"openConnectionTime",void 0),re(this,"clientId",void 0),re(this,"lastMsgTime",Date.now()),re(this,"uploadCache",[]),re(this,"uploadCacheInterval",void 0),re(this,"rttRolling",new n$(5)),re(this,"pingpongTimer",void 0),re(this,"pingpongTimeoutCount",0),re(this,"joinResponse",void 0),re(this,"multiIpOption",void 0),re(this,"initError",void 0),re(this,"spec",void 0),re(this,"store",void 0),re(this,"_external_signal",void 0),re(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(Br.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){switch(l._type){case An.ON_DATA_STREAM:return void this.handleDataStream(l._message);case An.MUTE_AUDIO:case An.MUTE_VIDEO:case An.ON_P2P_LOST:case An.ON_USER_ONLINE:return;case An.ON_USER_OFFLINE:const{uid:d}=l._message;return H.debug("[".concat(this.clientId,"] user-offline uid: ").concat(d)),void this._external_signal.reset(d)}if(this.emit(l._type,l._message),l._type===An.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===An.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Dn.UID_BANNED);break;case 15:this.close(Dn.IP_BANNED);break;case 16:this.close(Dn.CHANNEL_BANNED)}if(l._type===An.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case fr.ERR_LICENSE_MISSING:this.close(Dn.LICENSE_MISSING);break;case fr.ERR_LICENSE_EXPIRED:this.close(Dn.LICENSE_EXPIRED);break;case fr.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Dn.LICENSE_MINUTES_EXCEEDED);break;case fr.ERR_LICENSE_PERIOD_INVALID:this.close(Dn.LICENSE_PERIOD_INVALID);break;case fr.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Dn.LICENSE_MULTIPLE_SDK_SERVICE);break;case fr.ERR_LICENSE_ILLEGAL:this.close(Dn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=o,this.websocket=new lU("gateway-".concat(this.clientId),this.spec.retryConfig,!0,me("JOIN_GATEWAY_USE_DUAL_DOMAIN"),me("JOIN_GATEWAY_USE_443PORT_ONLY"),o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Ai.CONNECTED&&this.reconnect("retry",Zs.OFFLINE)}),this.p2pToken=ii(6,""),this._external_signal=new y1(this,this.p2pToken)}async request(n,o,a,l){const d=ii(6,""),h={_id:d,_type:n,_message:o},v=this.websocket.connectionID,_=()=>new Mt((X,G)=>{if(this.connectionState===Ai.CONNECTED)return X();const q=()=>{this.off(Br.WS_CLOSED,Ae),X()},Ae=()=>{this.off(Br.WS_CONNECTED,q),G(new tt(de.WS_ABORT))};this.once(Br.WS_CONNECTED,q),this.once(Br.WS_CLOSED,Ae)});if(this.connectionState!==Ai.CONNECTING&&this.connectionState!==Ai.RECONNECTING||n===Cr.JOIN||n===Cr.REJOIN||await _(),this.websocket.sendMessage(h,!0),l)return;const y=new Mt((X,G)=>{let q=!1;const Ae=(_e,De)=>{q=!0,X({isSuccess:_e==="success",message:De||{}}),this.off(Br.WS_CLOSED,ue),this.off(Br.WS_RECONNECTING,ue),this.emit(Br.REQUEST_SUCCESS,n,o)};this.once("res-@".concat(d),Ae);const ue=()=>{G(new tt(de.WS_ABORT,"type: ".concat(n))),this.off(Br.WS_CLOSED,ue),this.off(Br.WS_RECONNECTING,ue),this.off("res-@".concat(d),Ae)};this.once(Br.WS_CLOSED,ue),this.once(Br.WS_RECONNECTING,ue),Ps(me("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||q||(H.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(Br.REQUEST_TIMEOUT,n,o))})});let C=null;try{C=await y}catch(X){if(this.connectionState===Ai.CLOSED||n===Cr.LEAVE)throw new tt(de.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?X.throw():n===Cr.JOIN||n===Cr.REJOIN?null:(await _(),await this.request(n,o))}if(C.isSuccess)return C.message;const B=Number(C.message.error_code||C.message.code),L=VS(B),x=new tt(de.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(C.message.error_str),{code:B,data:C.message,desc:L.desc});return L.action==="success"?C.message:(H.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(B,", message: ").concat(L.desc,", action: ").concat(L.action)),B===fr.ERR_TOO_MANY_BROADCASTERS?((n===Cr.JOIN||n===Cr.REJOIN)&&(this.initError=x,this.close()),x.throw()):L.action==="failed"?x.throw():L.action==="quit"?(this.initError=x,this.close(),x.throw()):(B===fr.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=C.message.option,H.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Zs.MULTI_IP)):this.reconnect(L.action,Zs.SERVER_ERROR),n===Cr.JOIN||n===Cr.REJOIN?null:await this.request(n,o)))}waitMessage(n,o){return new Mt(a=>{const l=d=>{(!o||o(d))&&(this.off(n,l),a(d))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void H.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const o={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(MS.WRTC_STATS,o)}upload(n,o){const a={_type:n,_message:o};try{this.websocket.sendMessage(a)}catch{const d=me("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Ai.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},me("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,o){const a={_type:n,_message:o};this.websocket.sendMessage(a)}async sendExtensionMessage(n,o,a){return await this._external_signal.send(n,o,a)}init(n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Mt((o,a)=>{this.once(Br.WS_CONNECTED,()=>o(this.joinResponse)),this.once(Br.WS_CLOSED,()=>a(this.initError||new tt(de.WS_ABORT))),this.connectionState=Ai.CONNECTING,this.websocket.init(n).catch(a)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=n||Dn.LEAVE,this.connectionState=Ai.CLOSED,H.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=ii(6,""),this._external_signal.clear(),this._external_signal=new y1(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(Br.ABORT_P2P_EXECUTION);const n=await ea(this,Br.REQUEST_JOIN_INFO),o=await this.request(Cr.JOIN,n);if(!o)return this.emit(Br.REPORT_JOIN_GATEWAY,de.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(Br.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Ai.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(n,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,o)}async downgradeCodec(n){return!1}handleDataStream(n){try{var o;const a=Z0(n.payload),l=new TextDecoder().decode(a),d=JSON.parse(l);"total"in d&&"id"in d||_t(o=Object.values(ao)).call(o,d._type)?(d._uid=n.uid,this._external_signal.onMessage(d)):this.emit(An.ON_DATA_STREAM,n)}catch{this.emit(An.ON_DATA_STREAM,n)}}handleNotification(n){H.debug("[".concat(this.clientId,"] receive notification: "),n);const o=VS(n.code);if(o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Dn.UID_BANNED),void this.close()):void this.reconnect(o.action,Zs.SERVER_ERROR);H.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=me("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=n&&(H.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>me("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Zs.TIMEOUT):this.request(Cr.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-o;this.rttRolling.add(a),me("REPORT_STATS")&&this.send(Cr.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWebsocketEvents(){this.websocket.on(jr.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Br.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(jr.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(jr.CLOSED,()=>{this.connectionState=Ai.CLOSED}),this.websocket.on(jr.FAILED,()=>{this._disconnectedReason=Dn.NETWORK_ERROR,this.connectionState=Ai.CLOSED}),this.websocket.on(jr.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===Ai.CONNECTED?this.connectionState=Ai.RECONNECTING:this.connectionState=Ai.CONNECTING}),this.websocket.on(jr.WILL_RECONNECT,(n,o,a)=>{n!=="retry"?(H.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0):H.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),a(n)}),this.websocket.on(jr.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(n=>{if(this.emit(Br.REPORT_JOIN_GATEWAY,n,this.url||""),n instanceof tt&&n.code===de.UNEXPECTED_RESPONSE&&n.data.code===fr.ERR_NO_AUTHORIZED)return H.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Zs.SERVER_ERROR);H.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Zs.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(jr.REQUEST_NEW_URLS,(n,o)=>{ea(this,Br.REQUEST_RECOVER,this.multiIpOption).then(n).catch(o)}),this.websocket.on(jr.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(An.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}const MTe={name:"P2PChannel",create:function(r){let{store:n,statsCollector:o}=r;return new xTe(n,o)},createSubmodule:function(r){let{store:n,spec:o}=r;return new UTe(o,n)}};function NZ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function BZ(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?NZ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):NZ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}class FTe{constructor(n){re(this,"sessionDesc",void 0),re(this,"localCapabilities",void 0),re(this,"rtpCapabilities",void 0),re(this,"candidates",void 0),re(this,"_originCandidates",void 0),re(this,"iceParameters",void 0),re(this,"dtlsParameters",void 0),re(this,"setup",void 0),re(this,"currentMidIndex",void 0),re(this,"cname",void 0),n=Ni(n);const{iceParameters:o,dtlsParameters:a,candidates:l,rtpCapabilities:d,setup:h,localCapabilities:v,sdkCodec:_,cname:y}=n,C=wl(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=d,this.candidates=l,this._originCandidates=Ni(l),this.iceParameters=o,this.dtlsParameters=a,this.setup=h,this.localCapabilities=v,this.cname=y;for(let B=0;B<C.mediaDescriptions.length;B++){const L=C.mediaDescriptions[B];if(L.attributes.iceUfrag=o.iceUfrag,L.attributes.icePwd=o.icePwd,L.attributes.fingerprints=a.fingerprints,L.attributes.candidates=l,L.attributes.setup=h,L.media.mediaType==="video"){L.media.fmts=d.videoCodecs.map(G=>G.payloadType.toString(10));const x=d.videoCodecs.filter(G=>{var q,Ae;return(q=G.rtpMap)===null||q===void 0?void 0:_t(Ae=q.encodingName.toLowerCase()).call(Ae,_)}),X=d.videoCodecs.filter(G=>!_t(x).call(x,G));L.attributes.payloads=[...x,...X],L.attributes.extmaps=d.videoExtensions}L.media.mediaType==="audio"&&(L.media.fmts=d.audioCodecs.map(x=>x.payloadType.toString(10)),L.attributes.payloads=d.audioCodecs,L.attributes.extmaps=d.audioExtensions),C.mediaDescriptions[B]=this.mungMediaDesc(L)}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}toString(){return iv(this.sessionDesc)}send(n,o,a){const{ssrcs:l,ssrcGroups:d}=KS(o,this.cname),h=this.sessionDesc.mediaDescriptions.find(y=>n===jt.VIDEO?y.media.mediaType==="video":y.media.mediaType==="audio"),v=l[0].attributes.label,_=l[0].attributes.mslabel;return h.attributes.ssrcs=h.attributes.ssrcs.concat(l),h.attributes.ssrcGroups=h.attributes.ssrcGroups.concat(d),{id:v,mslabel:_}}batchSend(n){return n.map(o=>{let{kind:a,ssrcMsg:l}=o;return this.send(a,l,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(o=>{const a=[],l=[],d=[];o.attributes.ssrcs.forEach(h=>{_t(n).call(n,h.attributes.label||"")?d.push(h):a.push(h)}),o.attributes.ssrcGroups.forEach(h=>{var v;_t(v=d.map(_=>_.ssrcId)).call(v,h.ssrcIds[0])||l.push(h)}),o.attributes.ssrcs=a,o.attributes.ssrcGroups=l})}mute(n){const o=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!o)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(n){const o=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!o)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}receive(n,o,a){n.forEach((l,d)=>{const h=l._mediaStreamTrack,v=this.sessionDesc.mediaDescriptions.findIndex(y=>y.attributes.mid===h.kind),_=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[v],l);this.sessionDesc.mediaDescriptions[v]=_})}stopReceiving(n){}updateCandidates(n){const o=this._originCandidates.filter(l=>l.transport==="udp"),a=[];if(o.forEach(l=>{a.push(BZ(BZ({},l),{},{foundation:"tcpcandidate",priority:Number(l.priority)-1+"",transport:"tcp",port:Number(l.port)+90+""}))}),o.length!==0){switch(n){case _a.TCP_RELAY:this.candidates=a;break;case _a.UDP_TCP_RELAY:case _a.RELAY:this.candidates=[...o,...a];break;default:this.candidates=o}for(const l of this.sessionDesc.mediaDescriptions)l.attributes.candidates=this.candidates}}restartICE(n){n=Ni(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=n.iceUfrag,o.attributes.icePwd=n.icePwd})}predictReceivingMids(n){const o=[];for(let a=0;a<n;a++)o.push((this.currentMidIndex+a+1).toString(10));return o}mungRecvMediaDsec(n,o){const a=Ni(n);return My(a,o),fU(a,o),a}updateRecvMedia(n,o){const a=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===n);if(a!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],o);this.sessionDesc.mediaDescriptions[a]=l}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,o,a){const l=this.sessionDesc.mediaDescriptions.find(h=>n===jt.VIDEO?h.attributes.mid==="video":h.attributes.mid==="audio");if(l){const h=l.attributes.ssrcs.find(v=>v.attributes.label===o);var d;h&&(h.attributes.label=a,(d=h.attributes.msid)===null||d===void 0||d.replace(o,a))}}mungMediaDesc(n){const o=Ni(n);return dU(o),function(a){const l=a.attributes.extmaps.find(d=>g2(d.extensionName));l&&a.attributes.extmaps.splice(a.attributes.extmaps.indexOf(l),1),a.attributes.payloads.forEach(d=>{const h=d.rtcpFeedbacks.findIndex(v=>v.type==="transport-cc");h!==-1&&d.rtcpFeedbacks.splice(h,1)})}(o),o}getSSRC(n){for(const o of this.sessionDesc.mediaDescriptions)for(const a of o.attributes.ssrcs)if(a.attributes.label===n)return[a]}}var oi;function LZ(r,n){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,a)}return o}function Z2(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?LZ(Object(o),!0).forEach(function(a){re(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):LZ(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}let VTe=(oi=class uC extends Kq{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var o;return _t(o=Object.keys(PS)).call(o,n)}))]}constructor(n,o){super(n,o),re(this,"store",void 0),re(this,"peerConnection",void 0),re(this,"remoteSDP",void 0),re(this,"initialOffer",void 0),re(this,"statsFilter",void 0),re(this,"useRTX",!1),re(this,"localCapabilities",void 0),re(this,"localCandidateCount",0),re(this,"allCandidatesReceived",!1),re(this,"establishPromise",void 0),re(this,"mutex",void 0),this.store=o,this.mutex=new ga("P2PConnection-mutex",o.clientId),this.peerConnection=new RTCPeerConnection(uC.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.statsFilter=E5(this.peerConnection,me("STATS_UPDATE_INTERVAL"),void 0,Hi()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const n=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const o=uv(n.sdp),a=jS(n.sdp,{filterRTX:!this.useRTX,filterVideoFec:me("FILTER_VIDEO_FEC"),filterAudioFec:me("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=a,this.initialOffer=n,Z2(Z2({},o),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:a},offerSDP:n.sdp})}catch(n){throw new tt(de.GET_LOCAL_CONNECTION_PARAMS_FAILED,n.toString())}}async updateRemoteConnect(){}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new FTe(Z2(Z2({},n),{},{rtpCapabilities:n.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(o.toString()))}}async updateRemoteRTPCapabilities(n,o){throw new tt(de.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(n){}send(n,o){var a=this;return _A(function*(){const l=yield mn(a.mutex.lock());try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const d=n.map(L=>a.peerConnection.addTrack(L._mediaStreamTrack)),h=yield mn(a.peerConnection.createOffer()),v=wl(h.sdp),_=n.map(L=>{const x=L._mediaStreamTrack,X=v.mediaDescriptions.find(G=>G.attributes.mid===x.kind);if(!X)throw new Error("Cannot extract ssrc from mediaDescription.");return function(G,q,Ae){const ue=G.attributes.ssrcs.filter(De=>De.attributes.label===q),_e=G.attributes.ssrcGroups;if(ue.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(_e&&ue.length>1){const De=_e.find(Le=>Le.ssrcIds.indexOf(ue[0].ssrcId)!==-1);return De?[{ssrcId:De.ssrcIds[0],rtx:Ae?De.ssrcIds[1]:void 0}]:[{ssrcId:ue[0].ssrcId}]}return[{ssrcId:ue[0].ssrcId}]}(X,x.id,a.useRTX)});let y;try{y=yield _}catch(L){throw d.forEach(x=>{Js()&&x.replaceTrack(null),a.peerConnection.removeTrack(x)}),L}const C=a.mungSendOfferSDP(h.sdp,n);a.remoteSDP.receive(n,o,y);const B=a.remoteSDP.toString();return yield mn(a.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield mn(a.applySendEncodings(d,n)),yield mn(a.peerConnection.setRemoteDescription({type:"answer",sdp:B})),n.map((L,x)=>{const X=L._mediaStreamTrack.id;return{localSSRC:_[x],id:X}})}catch(d){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(d.toString()))}finally{l()}})()}async stopSending(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const o=this.peerConnection.getSenders().filter(d=>{var h;return n.indexOf(((h=d.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(o.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");o.map(d=>{Js()&&d.replaceTrack(null),this.peerConnection.removeTrack(d)});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a),this.remoteSDP.stopReceiving(n);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(o.toString()))}}async receive(n,o,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{id:d,mslabel:h}=this.remoteSDP.send(n,o,l),v=new Mt((C,B)=>{const L=setTimeout(()=>{B(new Error("Cannot receive track, id: ".concat(d)))},1e4),x=X=>{const G=hn();if((G.name==="Safari"&&Number(G.version)===11||Fa())&&X.track.id!==d&&X.streams[0].id===h){var q;const Ae=X.streams[0].getTracks()[0];return(q=this.remoteSDP)===null||q===void 0||q.updateTrackLabel(n,d,X.track.id),this.peerConnection.removeEventListener("track",x),clearTimeout(L),void C(Ae)}if(X.track.id===d)return this.peerConnection.removeEventListener("track",x),clearTimeout(L),void C(X.track)};this.peerConnection.addEventListener("track",x)}),_=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:_});const y=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(y),{track:await v,id:d}}catch(d){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a)}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(n){}async unmuteRemote(n){}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(a=>{var l;return n.indexOf(((l=a.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(o.length!==n.length)throw new Error("sender' length doesn't match mids' length.");o.map(a=>{if(Js()&&a.track)a.track.enabled=!1;else{const l=a.getParameters();l.encodings.forEach(d=>d.active=!1),a.setParameters(l)}})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(d=>{var h;return n.indexOf(((h=d.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(o.length!==n.length)throw new Error("Senders' length doesn't match mids' length.");o.map(async d=>{if(Js()&&d.track)d.track.enabled=!0;else{const h=d.getParameters();h.encodings.forEach(v=>v.active=!0),await d.setParameters(h)}});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(n){var o=this;return _A(function*(){const a=yield mn(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const l=vn().supportPCSetConfiguration;if(n===_a.RELAY&&!l)return;if(l){const y=o.peerConnection.getConfiguration(),C=n===_a.RELAY?"relay":"all";y.iceTransportPolicy!==C&&(H.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(y.iceTransportPolicy,"] to [").concat(C,"]")),y.iceTransportPolicy=C,o.peerConnection.setConfiguration(y))}n!==_a.RELAY&&o.remoteSDP.updateCandidates(n);const d=yield mn(o.peerConnection.createOffer({iceRestart:!0}));if(!d.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=uv(d.sdp),{remoteIceParameters:v}=yield h.iceParameters;o.remoteSDP.restartICE(v);const _=o.remoteSDP.toString();yield mn(o.peerConnection.setLocalDescription(d)),yield mn(o.peerConnection.setRemoteDescription({type:"answer",sdp:_}))}catch(l){H.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}close(){var n;this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[o]);this.remoteSDP.updateRecvMedia(o._mediaStreamTrack.kind,o);const d=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(a){throw new tt(de.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,o){const a=this.peerConnection.getSenders().filter(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===n});a.length===1&&await this.applySendEncodings(a,[o])}setStatsRemoteVideoIsReady(n,o){this.statsFilter.setVideoIsReady2(n,o)}async replaceTrack(n,o){const a=this.peerConnection.getSenders().find(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===o});a&&await a.replaceTrack(n._mediaStreamTrack)}createDataChannels(n,o){throw new tt(de.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(n){throw new tt(de.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,H.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,H.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},me("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const o={iceServers:[],sdpSemantics:"plan-b"};return n.iceServers?o.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(IS(n.turnServer.servers)?o.iceServers=n.turnServer.servers:(o.iceServers&&o.iceServers.push(...uC.turnServerConfigToIceServers(n.turnServer.servers)),me("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&n.turnServer.serversFromGateway&&o.iceServers.push(...uC.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(n){const o=[];return n.forEach(a=>{a.security?a.tcpport&&o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&o.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),o}async updateRtpSenderEncodings(n,o){var a;if(o||(o=this.peerConnection.getSenders().find(y=>{var C;return((C=y.track)===null||C===void 0?void 0:C.id)===n._mediaStreamTrack.id})),!o)return H.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(!vn().supportSetRtpSenderParameters)return H.warn("Browser not support set rtp-sender parameters");const l={},d={};if(n instanceof hi)switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(me("DSCP_TYPE")&&Dg()){var h;const y=me("DSCP_TYPE");_t(h=["very-low","low","medium","high"]).call(h,y)&&(d.networkPriority=y)}const v=o.getParameters(),_=(a=v.encodings)===null||a===void 0?void 0:a[0];_&&Object.assign(_,d),Object.assign(v,l),H.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(v.encodings))),await o.setParameters(v)}async applySendEncodings(n,o){try{if(!vn().supportSetRtpSenderParameters||n.length!==o.length)return;for(let a=0;a<n.length;a++){const l=n[a],d=o[a];l&&d&&await this.updateRtpSenderEncodings(d,l)}}catch{H.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,o){const a=wl(n);return o.forEach((l,d)=>{const h=l._mediaStreamTrack,v=a.mediaDescriptions.find(_=>_.attributes.mid===h.kind);v&&My(v,l)}),iv(a)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,o,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,o,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,o)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,o)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const o=this.remoteSDP.batchSend(n).map((d,h)=>{let{id:v,mslabel:_}=d;const{kind:y}=n[h];return new Mt((C,B)=>{const L=setTimeout(()=>{B(new Error("Cannot receive track, id: ".concat(v)))},1e4),x=X=>{const G=hn();if(G.name==="Safari"&&Number(G.version)===11&&X.track.id!==v&&X.streams[0].id===_){var q;const Ae=X.streams[0].getTracks()[0];return(q=this.remoteSDP)===null||q===void 0||q.updateTrackLabel(y,v,X.track.id),this.peerConnection.removeEventListener("track",x),clearTimeout(L),void C({track:Ae,id:v})}if(X.track.id===v)return this.peerConnection.removeEventListener("track",x),clearTimeout(L),void C({track:X.track,id:v})};this.peerConnection.addEventListener("track",x)})}),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await Mt.all(o)}catch(o){throw new tt(de.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async getRemoteSSRC(n){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(n);return o==null?void 0:o[0].ssrcId}setConfiguration(n){if(vn().supportPCSetConfiguration){const o=uC.resolvePCConfiguration(n);this.peerConnection.setConfiguration(o)}}},tr(oi.prototype,"connect",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"connect"),oi.prototype),tr(oi.prototype,"stopSending",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"stopSending"),oi.prototype),tr(oi.prototype,"receive",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"receive"),oi.prototype),tr(oi.prototype,"stopReceiving",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"stopReceiving"),oi.prototype),tr(oi.prototype,"muteRemote",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"muteRemote"),oi.prototype),tr(oi.prototype,"unmuteRemote",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"unmuteRemote"),oi.prototype),tr(oi.prototype,"muteLocal",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"muteLocal"),oi.prototype),tr(oi.prototype,"unmuteLocal",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"unmuteLocal"),oi.prototype),tr(oi.prototype,"close",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"close"),oi.prototype),tr(oi.prototype,"updateEncoderConfig",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"updateEncoderConfig"),oi.prototype),tr(oi.prototype,"updateSendParameters",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"updateSendParameters"),oi.prototype),tr(oi.prototype,"replaceTrack",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"replaceTrack"),oi.prototype),tr(oi.prototype,"getRemoteSSRC",[IA],Object.getOwnPropertyDescriptor(oi.prototype,"getRemoteSSRC"),oi.prototype),oi);function IA(r,n,o){const a=r[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("Locking from P2PConnection.".concat(n));try{for(var h=arguments.length,v=new Array(h),_=0;_<h;_++)v[_]=arguments[_];return await a.apply(this,v)}finally{d()}},o}const QTe={name:"PlanBConnection",create:function(r){let{store:n,spec:o}=r;return new VTe(o,n)}},HTe={interceptLocalAudioFrame:async function(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vn().supportWebRTCEncodedTransform)return void H.warning("browser not support audio encoded transform");if(ZI.has(r)||!r.track)return;const o={track:r.track};if(kg()){if(!r.createEncodedStreams)return void H.warning("browser not support createEncodedStreams() API");let l=null;try{l=r.createEncodedStreams()}catch(h){return void H.error("create audio-encoded-streams error",h&&h.message)}const d=new TransformStream({transform(h,v){o.controller||(o.controller=v),r.track&&r.track.id!==o.track.id&&(H.debug("audio track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a));const _=n.metadata&&n.metadata();_?function(y,C){const{chunk:B,controller:L}=C,x=ov.METADATA;B.data=function(X,G,q){const Ae=q.byteLength,ue=Ae+G5+Rq,_e=K5+W5+ue,De=new ArrayBuffer(X.byteLength+_e),Le=new DataView(De);Le.setUint8(0,Tq),Le.setUint16(1,ue),Le.setUint8(3,G),Le.setUint16(4,Ae);for(let ze=0;ze<Ae;ze++)Le.setUint8(6+ze,q[ze]);const Te=new Uint8Array(Le.buffer);return Te.set(new Uint8Array(X),_e),Te.buffer}(B.data,x,y),L.enqueue(B)}(_,{sender:r,chunk:h,controller:v}):v.enqueue(h)}});l.readable.pipeThrough(d).pipeTo(l.writable)}else if(Js()){if(typeof RTCRtpScriptTransform>"u")return void H.warning("browser not support RTCRtpScriptTransform");const l=JI(),d=new MessageChannel;await new Mt(v=>l.onmessage=_=>{_.data==="registered"&&v(void 0)});const h=new RTCRtpScriptTransform(l,{name:"audio-metadata-tx",port:d.port2},[d.port2]);r.transform=h,await new Mt(v=>l.onmessage=_=>{_.data==="started"&&v(void 0)}),d.port1.onmessage=v=>{var _;if(v.data.transformed&&r.track&&((_=r.track)===null||_===void 0?void 0:_.id)!==o.track.id)H.debug("audio track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a);else if(v.data.getMetadata){const y=n.metadata&&n.metadata();y&&d.port1.postMessage({metadata:y})}},o.worker=l}function a(){if(r.track){if(this.id!==r.track.id)return;r.track.removeEventListener("ended",a)}const l=ZI.get(r);if(l){ZI.delete(r);try{var d,h;(d=l.controller)===null||d===void 0||d.terminate(),(h=l.worker)===null||h===void 0||h.terminate()}catch(v){H.warning(v&&v.message)}}}ZI.set(r,o),r.track.addEventListener("ended",a)},interceptRemoteAudioFrame:async function(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vn().supportWebRTCEncodedTransform)return void H.warning("browser not support audio encoded transform");if(o2.has(r))return;const o={track:r.track,onMetadata:n.onMetadata,onPts:n.onPts};if(kg()&&!Fa()){if(!r.createEncodedStreams)return void H.warning("browser not support createEncodedStreams() API");t5(Sn.CHROME,87,116)||(n.enableTopn=!1);let l=null;try{l=r.createEncodedStreams()}catch(h){return void H.error("create audio-encoded-streams error",h&&h.message)}const d=new TransformStream({transform(h,v){o.controller||(o.controller=v),r.track&&r.track.id!==o.track.id&&(H.debug("audio track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a)),n.enableTopn?function(_,y,C){var B;const L=$5(new DataView(y.data));if(!L)return C.enqueue(y);const x=_.track.id;CSe.set(x,_.track);const X=(B=L.tlv.find(De=>De.tag===ov.AUDIO_LEVEL))===null||B===void 0?void 0:B.value;let G=0;typeof X=="number"&&(G=127-X);const q=Math.round(Math.pow(10,G/60)-1),{selected:Ae,speaker:ue}=function(De,Le){let Te=By.get(De);if(Te||(Te=function(ze){const rt=new Oq;return By.set(ze,rt),$f||($f=new SSe(me("TOPN_SILENCE_THRESHOLD")||500),$f.on("ActiveSpeakerChanged",At=>{At!=null&&(r2=At)})),$f.addSpeakers([rt]),rt}(De)),By.size<=Nq)return{selected:!0,speaker:Te};if(!$f)throw new Error("no active speaker detector");return $f.levelChanged(Te.id,Le),s1=$f.loudest.map(ze=>ze.id),r2&&!_t(s1).call(s1,r2)&&s1.length>=Nq&&s1.pop(),{selected:_t(s1).call(s1,Te.id)||Te.id===r2,speaker:Te}}(_,q),_e=function(De,Le,Te){const ze=zf.get(De)||new bSe(De,Le);return ze.score=Te,zf.set(De,ze),function(rt){if(n2.set(rt,!0),!i2)return void(i2=Date.now());const At=Date.now();At-i2>1e3&&(n2.get(rt)?n2.set(rt,!1):(Bq(rt),n2.delete(rt)),i2=At)}(De),ze}(x,_.track,ue.energyScore);_e.addSample(Ae),_e.active&&(y.data=L.frame.buffer,C.enqueue(y))}(r,h,v):n.enableMetadata||n.enablePts?function(_,y,C,B){const L=new DataView(_.data),x=L.getUint8(0);let X;if(128&x&&x!==71){const Ae=function(ue){if(ue.byteLength<=0)return[];const _e=[];let De=0;for(;De<ue.byteLength;){const Te=(128&ue.getUint8(De))>>7,ze=127&ue.getUint8(De);if(!(Te&&De+4<=ue.byteLength)){De++;break}{const rt=ue.getUint32(De,!1),At=(16776192&rt)>>10,wt=1023&rt;_e.push({pt:ze,ts_offset:At,length:wt,data:new Uint8Array}),De+=4}}let Le=ue.byteLength-De;for(const Te of _e){if(Te.length>Le)return console.warn("Broken red payload"),[];Te.length>0&&(Te.data=new Uint8Array(ue.buffer,ue.byteOffset+De,Te.length),De+=Te.length,Le-=Te.length)}if(Le>0){const Te={pt:_e.length>0?_e[_e.length-1].pt:0,ts_offset:0,length:Le,data:new Uint8Array(ue.buffer,ue.byteOffset+De,Le)};_e.push(Te)}return _e}(L);if(Ae.length>0){const ue=function(_e){let De=0;for(let ze=0;ze<_e.length;ze++)De+=ze<_e.length-1?4:1,De+=_e[ze].length;const Le=new Uint8Array(De);let Te=0;for(let ze=0;ze<_e.length;ze++)if(ze<_e.length-1){const rt=(2147483648|(127&_e[ze].pt)<<24|(262143&_e[ze].ts_offset)<<10|1023&_e[ze].length)>>>0;Le[Te++]=rt>>24&255,Le[Te++]=rt>>16&255,Le[Te++]=rt>>8&255,Le[Te++]=255&rt}else Le[Te++]=127&_e[ze].pt;for(const ze of _e)Le.set(ze.data,Te),Te+=ze.length;return Le}(Ae.map(_e=>{const De=new Uint8Array(_e.length);De.set(_e.data);const Le=$5(new DataView(De.buffer));return Le!=null&&Le.frame&&(_e.data=Le==null?void 0:Le.frame),X=Le,_e}));_.data=ue.buffer}}else X=$5(L),X&&(_.data=X.frame.buffer);if(y.enqueue(_),!X)return;const G=X.tlv.find(Ae=>Ae.tag===ov.METADATA);G&&C&&G.value instanceof Uint8Array&&C(G.value);const q=X.tlv.find(Ae=>Ae.tag===ov.AUDIO_64_BIT_PTS);q&&B&&q.value instanceof Uint8Array&&q.value.length==8&&B(new DataView(q.value.buffer).getBigUint64(0,!0))}(h,v,n.onMetadata,n.onPts):v.enqueue(h)}});l.readable.pipeThrough(d).pipeTo(l.writable)}else{if(typeof RTCRtpScriptTransform>"u")return void H.warning("browser not support RTCRtpScriptTransform");const l=JI(),d=new MessageChannel;await new Mt(v=>l.onmessage=_=>{_.data==="registered"&&v(void 0)});const h=new RTCRtpScriptTransform(l,{name:"audio-metadata-rx",port:d.port2},[d.port2]);r.transform=h,await new Mt(v=>l.onmessage=_=>{_.data==="started"&&v(void 0)}),d.port1.onmessage=v=>{var _;v.data.transformed&&r.track&&((_=r.track)===null||_===void 0?void 0:_.id)!==o.track.id?(H.debug("audio track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a)):v.data.metadata&&o.onMetadata?o.onMetadata(v.data.metadata):v.data.pts&&o.onPts&&o.onPts(v.data.pts)},o.worker=l}function a(){r.track.removeEventListener("ended",a),function(l){const d=o2.get(l);if(d){(function(_){const y=By.get(_);y&&(By.delete(_),$f&&($f.removeSpeakers([y]),By.size===0&&($f.destroy(),$f=null)))})(l),Bq(l.track.id),o2.delete(l);try{var h,v;(h=d.controller)===null||h===void 0||h.terminate(),(v=d.worker)===null||v===void 0||v.terminate()}catch(_){H.warning(_&&_.message)}}}(r)}o2.set(r,o),r.track.addEventListener("ended",a)},interceptLocalVideoFrame:async function(r,n){if(!vn().supportWebRTCEncodedTransform)return void H.warning("browser not support video encoded transform");if(s2.has(r)||!r.track)return;const o={track:r.track};if(kg()){if(!r.createEncodedStreams)return void H.warning("browser not support createEncodedStreams() API");let l=null;try{l=r.createEncodedStreams()}catch(v){return void H.error("create video-encoded-streams error",v&&v.message)}const d=[];n.on("sei-to-send",v=>{d.push(v)});const h=new TransformStream({transform(v,_){o.controller||(o.controller=_),r.track&&r.track.id!==o.track.id&&(H.debug("video track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a));const y=kq(new Uint8Array(v.data)),C=d.shift();if(C){const B=function(L,x,X){switch(X){case X5:return function(G,q){const Ae=Pq(q),ue=Ae.length,_e=Math.floor(ue/255),De=ue%255,Le=new Uint8Array(6+_e+1+ue+G.byteLength);Le[0]=0,Le[1]=0,Le[2]=0,Le[3]=1,Le[4]=6,Le[5]=101;let Te=0;for(;Te<_e;)Le[6+Te]=255,Te++;return Le[6+Te]=De,Te++,Le.set(Ae,6+Te),Le.set(new Uint8Array(G),6+Te+ue),Le.buffer}(L,x);case J5:return function(G,q){const Ae=Pq(q),ue=Ae.length,_e=Math.floor(ue/255),De=ue%255,Le=new Uint8Array(7+_e+1+ue+1+G.byteLength);Le[0]=0,Le[1]=0,Le[2]=0,Le[3]=1,Le[4]=78,Le[5]=1,Le[6]=101;let Te=0;for(;Te<_e;)Le[7+Te]=255,Te++;return Le[7+Te]=De,Te++,Le.set(Ae,7+Te),Te+=ue,Le[7+Te]=128,Te++,Le.set(new Uint8Array(G),7+Te),Le.buffer}(L,x);default:return null}}(v.data,C,y);B&&(v.data=B)}_.enqueue(v)}});l.readable.pipeThrough(h).pipeTo(l.writable)}else{if(!Js())return;{if(typeof RTCRtpScriptTransform>"u")return void H.warning("browser not support RTCRtpScriptTransform");const l=JI(),d=new MessageChannel;await new Mt(v=>l.onmessage=_=>{_.data==="registered"&&v(void 0)});const h=new RTCRtpScriptTransform(l,{name:"sei-tx",port:d.port2},[d.port2]);r.transform=h,await new Mt(v=>l.onmessage=_=>{_.data==="started"&&v(void 0)}),n.on("sei-to-send",v=>{d.port1.postMessage({sei:v})}),d.port1.onmessage=v=>{var _;v.data.transformed&&r.track&&((_=r.track)===null||_===void 0?void 0:_.id)!==o.track.id&&(H.debug("video track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a))},o.worker=l}}function a(){if(r.track){if(this.id!==r.track.id)return;r.track.removeEventListener("ended",a)}const l=s2.get(r);if(l){s2.delete(r);try{var d,h;(d=l.controller)===null||d===void 0||d.terminate(),(h=l.worker)===null||h===void 0||h.terminate()}catch(v){H.warning(v&&v.message)}}}s2.set(r,o),r.track.addEventListener("ended",a)},interceptRemoteVideoFrame:async function(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vn().supportWebRTCEncodedTransform)return void H.warning("browser not support video encoded transform");if(!r.track)return;if(US.has(r)){const l=US.get(r);return void(l&&(l.onSei=n.onSei))}const o={track:r.track,onSei:n.onSei};if(kg()){if(!r.createEncodedStreams)return void H.warning("browser not support createEncodedStreams() API");let l=null;try{l=r.createEncodedStreams()}catch(h){return void H.error("create video-encoded-streams error",h&&h.message)}const d=new TransformStream({transform(h,v){o.controller||(o.controller=v),r.track&&r.track.id!==o.track.id&&(H.debug("video track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a));const _=function(y,C){switch(C){case X5:return function(B){const L=new DataView(B.data);let x=0;for(;x+4<B.data.byteLength;){if(L.getUint8(x+0)===0&&L.getUint8(x+1)===0&&L.getUint8(x+2)===0&&L.getUint8(x+3)===1&&L.getUint8(x+4)===6){let X=x+6,G=0,q=0;for(;(q=L.getUint8(X++))===255;)G+=255;G+=q;const Ae=Lq(B.data,X,G);return new Uint8Array(Ae)}x++}return null}(y);case J5:return function(B){const L=new DataView(B.data);let x=0;for(;x+5<B.data.byteLength;){if(L.getUint8(x+0)===0&&L.getUint8(x+1)===0&&L.getUint8(x+2)===0&&L.getUint8(x+3)===1&&L.getUint8(x+4)===78&&L.getUint8(x+5)===1&&L.getUint8(x+6)===101){let X=x+7,G=0,q=0;for(;(q=L.getUint8(X++))===255;)G+=255;G+=q;const Ae=Lq(B.data,X,G);return new Uint8Array(Ae)}x++}return null}(y);default:return null}}(h,kq(new Uint8Array(h.data)));_&&o.onSei&&o.onSei(_),v.enqueue(h)}});l.readable.pipeThrough(d).pipeTo(l.writable)}else if(Js()){if(typeof RTCRtpScriptTransform>"u")return void H.warning("browser not support RTCRtpScriptTransform");const l=JI(),d=new MessageChannel;await new Mt(v=>l.onmessage=_=>{_.data==="registered"&&v(void 0)});const h=new RTCRtpScriptTransform(l,{name:"sei-rx",port:d.port2},[d.port2]);r.transform=h,await new Mt(v=>l.onmessage=_=>{_.data==="started"&&v(void 0)}),d.port1.onmessage=v=>{var _;v.data.transformed&&r.track&&((_=r.track)===null||_===void 0?void 0:_.id)!==o.track.id?(H.debug("video track changed: ".concat(o.track.id," => ").concat(r.track.id)),o.track.removeEventListener("ended",a),o.track=r.track,o.track.addEventListener("ended",a)):v.data.sei&&o.onSei&&o.onSei(v.data.sei)},o.worker=l}function a(){if(r.track){if(this.id!==r.track.id)return;r.track.removeEventListener("ended",a)}(function(l){const d=US.get(l);if(d){US.delete(l);try{var h,v;(h=d.controller)===null||h===void 0||h.terminate(),(v=d.worker)===null||v===void 0||v.terminate()}catch(_){H.warning(_&&_.message)}}})(r)}US.set(r,o),r.track.addEventListener("ended",a)}},jTe={name:"InterceptFrame",create:()=>HTe};w5(),zn("PROCESS_ID","process-".concat(ii(8,""),"-").concat(ii(4,""),"-").concat(ii(4,""),"-").concat(ii(4,""),"-").concat(ii(12,""))),function(){let r;try{r=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void H.error("Error loading sdk config",n.message)}if(r)try{const n=JSON.parse(window.atob(r)),o=Date.now();H.debug("Loading global parameters from cache",n),Object.keys(n).forEach(a=>{if(Object.prototype.hasOwnProperty.call(bi,a)){const{value:l,expires:d}=n[a];if(d&&d<=o)return;Gf[a]=l,bi[a]=l}})}catch(n){H.error("Error loading mutableParamsCache: ".concat(r),n.message)}}(),Array.isArray(Gf.AREAS)&&Gf.AREAS.length>0&&mU(Gf.AREAS,!0);const PZ=(r,n,o)=>{H.debug("setParameter key:".concat(r,", value:").concat(JSON.stringify(n))),zn(r,n,o)};fv(dTe,!1),fv(pTe,!1),fv(Ybe,!1),fv(TTe,!1),fv(lTe,!1),fv(MTe,!1),fv(QTe,!1),fv(jTe,!1);const Io=function(r){const n=new Mi,o=r,a={getListeners:n.getListeners.bind(n),on:(l,d)=>(function(h,v){h===Ep.SECURITY_POLICY_VIOLATION&&fJ(v,!0)}(l,d),n.on.bind(n)(l,d)),addListener:n.addListener.bind(n),once:n.once.bind(n),off:n.off.bind(n),removeAllListeners:n.removeAllListeners.bind(n),emit:n.emit.bind(n),safeEmit:n.safeEmit.bind(n)};return dJ(dJ({},o),a)}({__TRACK_LIST__:wy,VERSION:yA,BUILD:C5,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:PZ,getParameter:me,getSupportedCodec:async function(){let r={audio:[],video:[]};try{let n=new RTCPeerConnection;const o=await async function(a){let l;return vn().supportUnifiedPlan?(a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"}),l=(await a.createOffer()).sdp):l=(await a.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,l}(n);if(!o)return r;n.close(),n=null,r=function(a){const l={video:[],audio:[]};return a.match(/ VP8/i)&&l.video.push("VP8"),a.match(/ VP9/i)&&l.video.push("VP9"),a.match(/ AV1/i)&&l.video.push("AV1"),a.match(/ H264/i)&&l.video.push("H264"),a.match(/ H265/i)&&l.video.push("H265"),a.match(/ opus/i)&&l.audio.push("OPUS"),a.match(/ PCMU/i)&&l.audio.push("PCMU"),a.match(/ PCMA/i)&&l.audio.push("PCMA"),a.match(/ G722/i)&&l.audio.push("G722"),l}(o)}catch(n){throw new Je(de.CREATE_OFFER_FAILED,n.toString&&n.toString()).print()}return r},checkSystemRequirements:function(){const r=rr.reportApiInvoke(null,{name:Ji.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Oi.TRACER});let n=!1;try{const d=window.RTCPeerConnection,h=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.WebSocket;n=!!(d&&h&&v),n&&a5()&&LG(75)&&new d().close()}catch(d){return H.error("check system requirement failed: ",d),!1}let o=!1;const a=hn();a.name===Sn.CHROME&&Number(a.version)>=58&&(jf.engine.name!=="WebKit"||function(){const d=hn();if(DI()){if(d.os===is.MAC_OS)return!0;if(d.os===is.IOS){const h=jf.os.version&&jf.os.version.split(".");if(h&&Number(h[0])===14&&h[1]&&Number(h[1])>=3||h&&Number(h[0])>14)return!0}}return!1}())&&(o=!0),(a.name===Sn.FIREFOX&&Number(a.version)>=56||a.name===Sn.OPERA&&Number(a.version)>=45||a.name===Sn.SAFARI&&Number(a.version)>=11||a.name==="WebKit"&&(Fa()||wd())&&a.osVersion&&Number(a.osVersion.split(".")[0])>=11||MG()||hn().name===Sn.QQ)&&(o=!0),H.debug("checkSystemRequirements, api:",n,"browser",o);const l=n&&o;return r.onSuccess(l),l},getDevices:function(r){return ku.enumerateDevices(!0,!0,r)},getMicrophones:function(r){return ku.getRecordingDevices(r)},getCameras:function(r){return ku.getCamerasDevices(r)},getElectronScreenSources:L$,getPlaybackDevices:function(r){return ku.getSpeakers(r)},createClient:function(){var r;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const o=ii(5,"client-"),a=rr.reportApiInvoke(null,{id:o,name:Ji.CREATE_CLIENT,options:[n],tag:Oi.TRACER});try{(function(l){qo(l.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),qo(l.mode,"config.mode",["rtc","live","p2p"]),l.audioCodec!==void 0&&qo(l.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),l.proxyServer!==void 0&&Ls(l.proxyServer,"config.proxyServer",1,1e4),l.turnServer!==void 0&&GG(l.turnServer),l.httpRetryConfig!==void 0&&WG(l.httpRetryConfig),l.websocketRetryConfig!==void 0&&WG(l.websocketRetryConfig)})(n)}catch(l){throw a.onError(l),l}return(DG(16,0,!0)||i5(16,0,!0))&&(n.codec==="vp9"&&(n.codec="vp8",H.debug("browser not support vp9, force use vp8")),zn("UNSUPPORTED_VIDEO_CODEC",["vp9"])),n.audioCodec===void 0&&(n.audioCodec="opus"),a.onSuccess(),new Xbe(Bd(Bd({forceWaitGatewayResponse:!0},n),{},{role:_t(r=["rtc","p2p"]).call(r,n.mode)?"host":n.role||"audience"}),o)},createCameraVideoTrack:async function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=me("CAMERA_CAPTURE_CONFIG"),o=ii(8,"track-cam-"),a=rr.reportApiInvoke(null,{id:o,tag:Oi.TRACER,name:Ji.CREATE_CAM_VIDEO_TRACK,options:[ui({},r),n]});n&&(r.encoderConfig=n);const l=YI(r);let d=null;H.info("start create camera video track with config",JSON.stringify(r),"trackId",o);try{d=(await Pu({video:l},o)).getVideoTracks()[0]||null}catch(v){throw a.onError(v),v}if(!d){const v=new tt(de.UNEXPECTED_ERROR,"can not find track in media stream");return a.onError(v),v.throw(H)}if(r.optimizationMode&&j5(o,d,r,Cd(r.encoderConfig)),me("USE_STANDARD_BITRATE_DEFAULT")){const v=Cd(r.encoderConfig);r.encoderConfig=v,delete v.bitrateMax,delete v.bitrateMin}const h=new XI(d,r,l,r.scalabiltyMode?GI(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,o);return a.onSuccess(h.getTrackId()),H.info("create camera video success, trackId:",o),h},createCustomVideoTrack:function(r){const n=ii(8,"track-cus-"),o=rr.reportApiInvoke(null,{id:n,tag:Oi.TRACER,name:Ji.CREATE_CUSTOM_VIDEO_TRACK,options:[r]});me("USE_STANDARD_BITRATE_DEFAULT")&&(delete r.bitrateMax,delete r.bitrateMin);const a=new hi(r.mediaStreamTrack,{width:r.width,height:r.height,frameRate:r.frameRate,bitrateMax:r.bitrateMax,bitrateMin:r.bitrateMin},r.scalabiltyMode?GI(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,n,[Jn.CUSTOM_TRACK]);return o.onSuccess(a.getTrackId()),H.info("create custom video track success with config",r,"trackId",a.getTrackId()),a},createScreenVideoTrack:async function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const o=typeof n=="object"?function(L){return H$(L)}(n):void 0;o&&(n="auto");const a=ii(8,"track-scr-v-"),l=rr.reportApiInvoke(null,{id:a,tag:Oi.TRACER,name:Ji.CREATE_SCREEN_VIDEO_TRACK,options:[ui({},r),n]});r.encoderConfig?typeof r.encoderConfig=="string"||r.encoderConfig.width&&r.encoderConfig.height||(r.encoderConfig.width={max:1920},r.encoderConfig.height={max:1080}):r.encoderConfig="1080p_2";const d=function(L){const x={};L.screenSourceType&&(x.mediaSource=L.screenSourceType),L.extensionId&&kg()&&(x.extensionId=L.extensionId);const{displaySurface:X,selfBrowserSurface:G,surfaceSwitching:q,systemAudio:Ae,preferCurrentTab:ue}=L;(fy(107)||r5(107)||o5(93))&&(X&&(qo(X,"displaySurface",["browser","window","monitor"]),x.displaySurface=X),G?(qo(G,"selfBrowserSurface",["exclude","include"]),x.selfBrowserSurface=G):x.selfBrowserSurface="include",q&&(qo(q,"surfaceSwitching",["exclude","include"]),x.surfaceSwitching=q)),(fy(105)||r5(105)||o5(91))&&Ae&&(qo(Ae,"systemAudio",["exclude","include"]),x.systemAudio=Ae),(fy(94)||r5(94)||o5(80))&&ue&&(x.preferCurrentTab=!0),L.electronScreenSourceId&&(x.sourceId=L.electronScreenSourceId);const _e=L.encoderConfig?B5(L.encoderConfig):null;return x.mandatory={chromeMediaSource:"desktop",maxWidth:_e?_e.width:void 0,maxHeight:_e?_e.height:void 0},_e&&(_e.frameRate&&(typeof _e.frameRate=="number"?(x.mandatory.maxFrameRate=_e.frameRate,x.mandatory.minFrameRate=_e.frameRate):(x.mandatory.maxFrameRate=_e.frameRate.max||_e.frameRate.ideal||_e.frameRate.exact||void 0,x.mandatory.minFrameRate=_e.frameRate.min||_e.frameRate.ideal||_e.frameRate.exact||void 0),x.frameRate=_e.frameRate),_e.width&&(x.width=_e.width),_e.height&&(x.height=_e.height)),x}(r);let h=null,v=null;const _=vn();if(!_.supportShareAudio&&n==="enable"){const L=new tt(de.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return l.onError(L),L.throw(H)}H.info("start create screen video track with config",r,"withAudio",n,"trackId",a);const y=_.supportShareAudio&&n!=="disable";try{const L=await Pu({screen:d,screenAudio:y?o||!0:void 0},a);h=L.getVideoTracks()[0]||null,v=L.getAudioTracks()[0]||null}catch(L){throw l.onError(L),L}if(!h){const L=new tt(de.UNEXPECTED_ERROR,"can not find track in media stream");return l.onError(L),L.throw(H)}if(!v&&n==="enable"){h&&h.stop();const L=new tt(de.SHARE_AUDIO_NOT_ALLOWED);return l.onError(L),L.throw(H)}r.optimizationMode||(r.optimizationMode="detail"),r.optimizationMode&&(j5(a,h,r,r.encoderConfig&&B5(r.encoderConfig)||void 0),r.encoderConfig&&typeof r.encoderConfig!="string"&&(r.encoderConfig.bitrateMin=r.encoderConfig.bitrateMax));const C=new hi(h,r.encoderConfig?B5(r.encoderConfig):{},r.scalabiltyMode?GI(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,a,[Jn.SCREEN_TRACK]);if(!v)return l.onSuccess(C.getTrackId()),H.info("create screen video track success","video:",C.getTrackId()),C;const B=new Yi(v,void 0,ii(8,"track-scr-a-"),!1);return l.onSuccess([C.getTrackId(),B.getTrackId()]),H.info("create screen video track success","video:",C.getTrackId(),"audio:",B.getTrackId()),[C,B]},createMicrophoneAndCameraTracks:async function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=me("CAMERA_CAPTURE_CONFIG"),a=ii(8,"track-mic-"),l=ii(8,"track-cam-"),d=rr.reportApiInvoke(null,{id:"".concat(a,"-").concat(l),tag:Oi.TRACER,name:Ji.CREATE_MIC_AND_CAM_TRACKS,options:[r,n,o]});o&&(n.encoderConfig=o);const h=YI(n),v=j$(r);let _=null,y=null;H.info("start create camera video track(".concat(l,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(r),", video: ").concat(JSON.stringify(n)));try{const L=await Pu({audio:v,video:h},"".concat(a,"-").concat(l));_=L.getAudioTracks()[0],y=L.getVideoTracks()[0]}catch(L){throw d.onError(L),L}if(!_||!y){const L=new tt(de.UNEXPECTED_ERROR,"can not find tracks in media stream");return d.onError(L),L.throw(H)}if(n.optimizationMode&&j5(l,y,n,Cd(n.encoderConfig)),me("USE_STANDARD_BITRATE_DEFAULT")){const L=Cd(n.encoderConfig);n.encoderConfig=L,delete L.bitrateMax,delete L.bitrateMin}const C=new xS(_,r,v,a),B=new XI(y,n,h,n.scalabiltyMode?GI(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l);return d.onSuccess([C.getTrackId(),B.getTrackId()]),H.info("create camera video track(".concat(l,") and microphone audio track(").concat(a,") success")),[C,B]},createMicrophoneAudioTrack:async function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=ii(8,"track-mic-"),o=rr.reportApiInvoke(null,{id:n,tag:Oi.TRACER,name:Ji.CREATE_MIC_AUDIO_TRACK,options:[r]}),a=j$(r);let l=null;H.info("start create microphone audio track with config",JSON.stringify(r),"trackId",n);try{l=(await Pu({audio:a},n)).getAudioTracks()[0]||null}catch(h){throw o.onError(h),h}if(!l){const h=new tt(de.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(h),h.throw(H)}const d=new xS(l,r,a,n);return o.onSuccess(d.getTrackId()),H.info("create microphone audio track success, trackId:",n),d},createCustomAudioTrack:function(r){const n=ii(8,"track-cus-"),o=rr.reportApiInvoke(null,{id:n,tag:Oi.TRACER,name:Ji.CREATE_CUSTOM_AUDIO_TRACK,options:[r]}),a=new Yi(r.mediaStreamTrack,r.encoderConfig?$I(r.encoderConfig):{},n,!1);return H.info("create custom audio track success with config",r,"trackId",a.getTrackId()),o.onSuccess(a.getTrackId()),a},createBufferSourceAudioTrack:async function(r){var n;const{cacheOnlineFile:o,encoderConfig:a}=r;let{source:l}=r;const d={source:l instanceof AudioBuffer?"AudioBuffer":l instanceof File?(n=File.name)!==null&&n!==void 0?n:"File":l,cacheOnlineFile:o,encoderConfig:a},h=ii(8,"track-buf-"),v=rr.reportApiInvoke(null,{id:h,tag:Oi.TRACER,name:Ji.CREATE_BUFFER_AUDIO_TRACK,options:[d]});if(me("DISABLE_WEBAUDIO"))throw new tt(de.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");H.info("start create buffer source audio track with config",JSON.stringify(d),"trackId",h);const _=l;if(!(l instanceof AudioBuffer))try{l=await async function(B,L){let x=null;if(typeof B=="string"){const G=Oz.get(B);if(G)return H.debug("use cached audio resource: ",B),G;try{x=(await Wf(()=>Yc.get(B,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(q){throw new tt(de.FETCH_AUDIO_FILE_FAILED,q.toString())}}else x=await new Mt((q,Ae)=>{const ue=new FileReader;ue.onload=_e=>{_e.target?q(_e.target.result):Ae(new tt(de.READ_LOCAL_AUDIO_FILE_ERROR))},ue.onerror=()=>{Ae(new tt(de.READ_LOCAL_AUDIO_FILE_ERROR))},ue.readAsArrayBuffer(B)});const X=await function(G){const q=Ry();return new Mt((Ae,ue)=>{q.decodeAudioData(G,_e=>{Ae(_e)},_e=>{ue(new tt(de.DECODE_AUDIO_FILE_FAILED,_e.toString()))})})}(x);return typeof B=="string"&&L&&Oz.set(B,X),X}(l,o)}catch(B){return v.onError(B),B.throw(H)}const y=new vSe(l),C=new mSe(_,y,a?$I(a):{},h);return H.info("create buffer source audio track success, trackId:",h),v.onSuccess(C.getTrackId()),C},setAppType:function(r){if(H.debug("setAppType: ".concat(r)),!(Number.isInteger(r)&&r>=0))throw H.debug("Invalid appType"),new Je(de.INVALID_PARAMS,"invalid app type",r);zn("APP_TYPE",Math.floor(r))},setLogLevel:function(r){H.setLogLevel(r)},enableLogUpload:function(){me("USE_NEW_LOG")?zn("UPLOAD_LOG",!0):H.enableLogUpload()},disableLogUpload:function(){me("USE_NEW_LOG")?zn("UPLOAD_LOG",!1):H.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new LY},checkAudioTrackIsActive:async function(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=rr.reportApiInvoke(null,{tag:Oi.TRACER,name:Ji.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[n]});if(!(r instanceof Yi||r instanceof Ny)){const _=new Je(de.INVALID_TRACK,"the parameter is not a audio track");return o.onError(_),_.throw()}n&&n<1e3&&(n=1e3);const a=r instanceof Yi?r.getTrackLabel():"remote_track",l=r.getVolumeLevel();let d=l,h=l;const v=Date.now();return new Mt(_=>{const y=setInterval(()=>{const C=r.getVolumeLevel();d=C>d?C:d,h=C<h?C:h;const B=d-h>1e-4,L=Date.now()-v;if(B||L>n){clearInterval(y);const x=B,X={duration:L,deviceLabel:a,maxVolumeLevel:d,result:x};H.info("[track-".concat(r.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(X))),o.onSuccess(X),_(x)}},200)})},checkVideoTrackIsActive:async function(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=rr.reportApiInvoke(null,{tag:Oi.TRACER,name:Ji.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[n]});if(!(r instanceof hi||r instanceof Oy)){const B=new Je(de.INVALID_TRACK,"the parameter is not a video track");return o.onError(B),B.throw()}n&&n<1e3&&(n=1e3);const a=r instanceof hi?r.getTrackLabel():"remote_track",l=r.getMediaStreamTrack(!0),d=document.createElement("video");d.style.width="1px",d.style.height="1px",d.setAttribute("muted",""),d.muted=!0,d.setAttribute("playsinline",""),d.controls=!1,(Js()||DI())&&(d.style.opacity="0.01",d.style.position="fixed",d.style.left="0",d.style.top="0",document.body.appendChild(d)),d.srcObject=new MediaStream([l]),d.play();const h=document.createElement("canvas");h.width=160,h.height=120;let v=0,_=0;try{const B=Date.now();v=await function(L,x,X,G){let q,Ae=0,ue=null;return new Mt((_e,De)=>{function Le(){Ae>G&&q&&(q(),_e(Ae));const Te=X.getContext("2d");if(!Te){const At=new Je(de.UNEXPECTED_ERROR,"can not get canvas 2d context.");return H.error(At.toString()),void De(At)}Te.drawImage(L,0,0,160,120);const ze=Te.getImageData(0,0,X.width,X.height),rt=Math.floor(ze.data.length/3);if(ue){for(let At=0;At<rt;At+=3)if(ze.data[At]!==ue[At])return Ae+=1,void(ue=ze.data);ue=ze.data}else ue=ze.data}setTimeout(()=>{q&&(q(),_e(Ae))},x),q=x5(()=>{Le()},30)})}(d,n,h,4),_=Date.now()-B}catch(B){throw o.onError(B),B}Ube===Sn.SAFARI&&(d.pause(),d.remove()),d.srcObject=null;const y=v>4,C={duration:_,changedPicNum:v,deviceLabel:a,result:y};return H.info("[track-".concat(r.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(C))),o.onSuccess(C),y},setArea:mU,audioElementPlayCenter:Xc,resumeAudioContext:function(){Xc.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(r){Zbe.processExternalMediaAEC(r)},registerExtensions:function(r){const n=me("PLUGIN_INFO")||[];r.forEach(o=>{"name"in o&&!_t(n).call(n,o.name)&&n.push(o.name);const a=o;a.__registered__=!0,a.logger.hookLog=H.extLog,a.reporter.hookApiInvoke=rr.extApiInvoke,a.parameters&&Object.keys(a.parameters).forEach(l=>{a.parameters[l]=me(l)})}),PZ("PLUGIN_INFO",n)},ChannelMediaRelayError:Py,ChannelMediaRelayEvent:Ug,ChannelMediaRelayState:bl,RemoteStreamFallbackType:uSe,RemoteStreamType:lSe,ConnectionDisconnectedReason:Dn,AudienceLatencyLevelType:Vwe,AREAS:Nn,preload:async function(r,n,o,a){return rX(r,n,o,a)}});return Object.defineProperties(Io,{onAudioAutoplayFailed:{get:()=>Du.onAudioAutoplayFailed,set:r=>{Du.onAudioAutoplayFailed=r}},onAutoplayFailed:{get:()=>Du.onAutoplayFailed,set:r=>{Du.onAutoplayFailed=r}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Io._onSecurityPolicyViolation,set(r){Io._onSecurityPolicyViolation=r,fJ(r)}},__CLIENT_LIST__:{get:()=>me("SHOW_GLOBAL_CLIENT_LIST")?a1:[]}}),ku.on(n1.CAMERA_DEVICE_CHANGED,r=>{H.info("camera device changed",JSON.stringify(r)),Io.onCameraChanged&&Io.onCameraChanged(r),Io.safeEmit(Ep.CAMERA_CHANGED,r)}),ku.on(n1.RECORDING_DEVICE_CHANGED,r=>{H.info("microphone device changed",JSON.stringify(r)),Io.onMicrophoneChanged&&Io.onMicrophoneChanged(r),Io.safeEmit(Ep.MICROPHONE_CHANGED,r)}),ku.on(n1.PLAYOUT_DEVICE_CHANGED,r=>{H.debug("playout device changed",JSON.stringify(r)),Io.onPlaybackDeviceChanged&&Io.onPlaybackDeviceChanged(r),Io.safeEmit(Ep.PLAYBACK_DEVICE_CHANGED,r)}),Xc.onAutoplayFailed=()=>{H.info("detect audio element autoplay failed"),Du.onAudioAutoplayFailed&&Du.onAudioAutoplayFailed()},qn.on("autoplay-failed",()=>{H.info("detect webaudio autoplay failed"),Du.onAudioAutoplayFailed&&Du.onAudioAutoplayFailed(),Io.safeEmit(Ep.AUTOPLAY_FAILED)}),qn.on(Ds.STATE_CHANGE,(r,n)=>{H.info("audio context state changed: ".concat(n," => ").concat(r)),Io.onAudioContextStateChanged&&Io.onAudioContextStateChanged(r,n),Io.safeEmit(Ep.AUDIO_CONTEXT_STATE_CHANGED,r,n)}),ho.on(py.NETWORK_STATE_CHANGE,(r,n)=>{H.info("[network-indicator] network state changed, ".concat(n," => ").concat(r))}),window&&(window.__ARTC__=Io),Io})})(jAe);var W6e=jAe.exports;const GAe=$i(W6e),cE=GAe.createClient({mode:"rtc",codec:"vp8"}),G6e=({channelName:e,appId:t,token:i,uid:s,onLeave:c})=>{const[u,f]=he.useState(null);return he.useEffect(()=>((async()=>{try{console.log(" VoiceRoom Init Start"),await navigator.mediaDevices.getUserMedia({audio:!0}),console.log(" Mic permission granted");let m=i;if(!m){console.log("Fetching Agora Token from backend...");const{data:T}=await qA.get(`http://localhost:5002/generate-agora-token?channelName=${e}`);m=T.token}console.log(" Token ready:",m),console.log("Joining Agora Channel:",{appId:t,channelName:e,agoraToken:m});const E=await cE.join(t,e,m,s||null);console.log(" Joined Agora Channel with UID:",E);const w=await GAe.createMicrophoneAudioTrack();f(w),await cE.publish([w]),console.log(" Local audio published"),cE.on("user-published",async(T,N)=>{console.log(" Remote user published:",T.uid,N),await cE.subscribe(T,N),console.log(" Subscribed to user:",T.uid),N==="audio"&&T.audioTrack.play()}),cE.on("connection-state-change",(T,N)=>{console.log("Agora Connection State:",N,"",T)})}catch(m){console.error(" VoiceRoom Init Error:",m)}})(),()=>{(async()=>{console.log(" Leaving Agora Channel..."),u&&(u.stop(),u.close()),await cE.leave(),console.log(" Left channel")})()}),[e]),oe.jsxs("div",{style:{position:"fixed",bottom:10,right:10,background:"#1B4F72",color:"white",padding:"8px 16px",borderRadius:"12px"},children:[" Voice Chat Active",oe.jsx("button",{style:{marginLeft:10,background:"red",border:"none",color:"white",padding:"4px 8px",borderRadius:"8px",cursor:"pointer"},onClick:c,children:"Leave"})]})},$6e=({setIsChatAppOpen:e,isChatAppOpen:t,setIsWhiteboard:i,isWhiteboard:s})=>{const c=localStorage.getItem("roomTitle"),u=localStorage.getItem("roomId");l0(Y=>Y.whiteboard.activeUsers);const f=v0(),[p,m]=he.useState(null),[E,w]=he.useState(!1),[T,N]=he.useState(!1),[O,P]=he.useState(!1),[M,Q]=he.useState(null),[k,D]=he.useState(!1);he.useEffect(()=>{(async()=>{if(O)try{D(!0);const te=await qA.get("https://collab-g94w.onrender.com/agora/token",{params:{channelName:u}});Q(te.data.token)}catch(te){console.error("Failed to fetch Agora token",te),P(!1)}finally{D(!1)}else Q(null)})()},[O,u]);const V=async()=>{try{const Y=await XFe(localStorage.getItem("roomId"));m(Y.room),w(!0)}catch(Y){console.log(Y)}},K=()=>{N(!0)},J=()=>{localStorage.removeItem("roomId"),f("../../rooms")},ie=()=>i(!0),fe=()=>i(!1),Z=()=>e(Y=>!Y),pe=()=>{P(Y=>!Y)};return oe.jsxs("div",{children:[oe.jsxs(bn,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{position:"fixed",top:0,left:0,width:"100%",zIndex:1e3,height:60,bgcolor:"#aecbeb",paddingX:1,boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)"},children:[oe.jsxs(bn,{item:!0,xs:12,sm:4,container:!0,alignItems:"center",paddingLeft:1,spacing:2,children:[oe.jsx(bn,{item:!0,children:oe.jsx(Ko,{variant:"contained",startIcon:oe.jsx(BQ,{}),onClick:K,children:"Back"})}),oe.jsx(bn,{item:!0,children:oe.jsx(Gn,{variant:"h6",color:"#1B4F72",sx:{flexGrow:1},children:c})})]}),oe.jsxs(bn,{item:!0,xs:12,sm:4,container:!0,justifyContent:"center",spacing:2,children:[oe.jsx(bn,{item:!0,children:oe.jsx(Ko,{variant:"contained",sx:{backgroundColor:s?"#0d47a1":"#1976d2"},startIcon:oe.jsx(h6e,{}),onClick:ie,children:"Draw"})}),oe.jsx(bn,{item:!0,children:oe.jsx(Ko,{variant:"contained",sx:{backgroundColor:s?"#1976d2":"#0d47a1"},startIcon:oe.jsx(p6e,{}),onClick:fe,children:"Code"})})]}),oe.jsxs(bn,{item:!0,xs:12,sm:4,container:!0,justifyContent:"flex-end",spacing:2,children:[oe.jsx(bn,{item:!0,children:oe.jsx(Ko,{variant:"contained",sx:{backgroundColor:E?"#0d47a1":"#1976d2"},startIcon:oe.jsx(j6e,{}),onClick:V,children:"Info"})}),oe.jsx(bn,{item:!0,children:oe.jsx(Ko,{variant:"contained",sx:{backgroundColor:t?"#0d47a1":"#1976d2"},startIcon:oe.jsx(g6e,{}),onClick:Z,children:"Chat"})}),oe.jsx(bn,{item:!0,children:oe.jsx(Ko,{variant:"contained",disabled:k,sx:{backgroundColor:O?"red":"#1976d2"},startIcon:oe.jsx(m6e,{}),onClick:pe,children:O?"Leave":k?"...":"Voice"})})]})]}),O&&M&&oe.jsx(G6e,{channelName:u,appId:"16b0362ffe0146448ce517018bbe07fc",token:M,uid:null,onLeave:()=>P(!1)}),p&&oe.jsxs(mQ,{open:E,onClose:()=>w(!1),children:[oe.jsx(_Q,{children:"Room Details"}),oe.jsxs(vQ,{children:[oe.jsx(Gn,{variant:"h6",children:p.roomTitle}),oe.jsxs(Gn,{children:["Description: ",p.roomDescription]}),oe.jsxs(Gn,{children:["Members: ",p.members.length]}),p.members.map((Y,te)=>oe.jsxs(Gn,{children:[Y.memberId," | ",Y.memberRole]},te))]}),oe.jsx(Xue,{children:oe.jsx(Ko,{onClick:()=>w(!1),children:"Close"})})]}),oe.jsx(tL,{open:T,title:"Back to Rooms Page",content:"Are you sure you want to go back?",onConfirm:J,onClose:()=>N(!1)})]})},z6e="/assets/rectangle-0b5d8fee.svg",q6e="/assets/line-b5105ef3.svg",Y6e="/assets/rubber-c3c93807.svg",X6e="/assets/pencil-bb9c4a1a.svg",J6e="/assets/text-a0003889.svg",$Ae="/assets/selection-4aaa37ce.svg",Z6e="/assets/circle-392909fb.svg",e8e="/assets/undo-9cd9e044.svg",Wn={RECTANGLE:"RECTANGLE",CIRCLE:"CIRCLE",LINE:"LINE",PENCIL:"PENCIL",TEXT:"TEXT",SELECTION:"SELECTION"},BA={DRAWING:"DRAWING",WRITING:"WRITING",MOVING:"MOVING",RESIZING:"RESIZING"},Ms={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT",START:"START",END:"END",INSIDE:"INSIDE"};function rl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var t8e=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),Bre=t8e,s4=()=>Math.random().toString(36).substring(7).split("").join("."),r8e={INIT:`@@redux/INIT${s4()}`,REPLACE:`@@redux/REPLACE${s4()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${s4()}`},rL=r8e;function PQ(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function zAe(e,t,i){if(typeof e!="function")throw new Error(rl(2));if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(rl(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(rl(1));return i(zAe)(e,t)}let s=e,c=t,u=new Map,f=u,p=0,m=!1;function E(){f===u&&(f=new Map,u.forEach((Q,k)=>{f.set(k,Q)}))}function w(){if(m)throw new Error(rl(3));return c}function T(Q){if(typeof Q!="function")throw new Error(rl(4));if(m)throw new Error(rl(5));let k=!0;E();const D=p++;return f.set(D,Q),function(){if(k){if(m)throw new Error(rl(6));k=!1,E(),f.delete(D),u=null}}}function N(Q){if(!PQ(Q))throw new Error(rl(7));if(typeof Q.type>"u")throw new Error(rl(8));if(typeof Q.type!="string")throw new Error(rl(17));if(m)throw new Error(rl(9));try{m=!0,c=s(c,Q)}finally{m=!1}return(u=f).forEach(D=>{D()}),Q}function O(Q){if(typeof Q!="function")throw new Error(rl(10));s=Q,N({type:rL.REPLACE})}function P(){const Q=T;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(rl(11));function D(){const K=k;K.next&&K.next(w())}return D(),{unsubscribe:Q(D)}},[Bre](){return this}}}return N({type:rL.INIT}),{dispatch:N,subscribe:T,getState:w,replaceReducer:O,[Bre]:P}}function n8e(e){Object.keys(e).forEach(t=>{const i=e[t];if(typeof i(void 0,{type:rL.INIT})>"u")throw new Error(rl(12));if(typeof i(void 0,{type:rL.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(rl(13))})}function i8e(e){const t=Object.keys(e),i={};for(let u=0;u<t.length;u++){const f=t[u];typeof e[f]=="function"&&(i[f]=e[f])}const s=Object.keys(i);let c;try{n8e(i)}catch(u){c=u}return function(f={},p){if(c)throw c;let m=!1;const E={};for(let w=0;w<s.length;w++){const T=s[w],N=i[T],O=f[T],P=N(O,p);if(typeof P>"u")throw p&&p.type,new Error(rl(14));E[T]=P,m=m||P!==O}return m=m||s.length!==Object.keys(f).length,m?E:f}}function nL(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,i)=>(...s)=>t(i(...s)))}function o8e(...e){return t=>(i,s)=>{const c=t(i,s);let u=()=>{throw new Error(rl(15))};const f={getState:c.getState,dispatch:(m,...E)=>u(m,...E)},p=e.map(m=>m(f));return u=nL(...p)(c.dispatch),{...c,dispatch:u}}}function s8e(e){return PQ(e)&&"type"in e&&typeof e.type=="string"}var qAe=Symbol.for("immer-nothing"),Lre=Symbol.for("immer-draftable"),KA=Symbol.for("immer-state");function gh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ew=Object.getPrototypeOf;function a_(e){return!!e&&!!e[KA]}function fm(e){var t;return e?YAe(e)||Array.isArray(e)||!!e[Lre]||!!((t=e.constructor)!=null&&t[Lre])||YP(e)||XP(e):!1}var a8e=Object.prototype.constructor.toString();function YAe(e){if(!e||typeof e!="object")return!1;const t=Ew(e);if(t===null)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===a8e}function iL(e,t){qP(e)===0?Reflect.ownKeys(e).forEach(i=>{t(i,e[i],e)}):e.forEach((i,s)=>t(s,i,e))}function qP(e){const t=e[KA];return t?t.type_:Array.isArray(e)?1:YP(e)?2:XP(e)?3:0}function p6(e,t){return qP(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XAe(e,t,i){const s=qP(e);s===2?e.set(t,i):s===3?e.add(i):e[t]=i}function c8e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function YP(e){return e instanceof Map}function XP(e){return e instanceof Set}function L1(e){return e.copy_||e.base_}function g6(e,t){if(YP(e))return new Map(e);if(XP(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=YAe(e);if(t===!0||t==="class_only"&&!i){const s=Object.getOwnPropertyDescriptors(e);delete s[KA];let c=Reflect.ownKeys(s);for(let u=0;u<c.length;u++){const f=c[u],p=s[f];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(s[f]={configurable:!0,writable:!0,enumerable:p.enumerable,value:e[f]})}return Object.create(Ew(e),s)}else{const s=Ew(e);if(s!==null&&i)return{...e};const c=Object.create(s);return Object.assign(c,e)}}function kQ(e,t=!1){return JP(e)||a_(e)||!fm(e)||(qP(e)>1&&(e.set=e.add=e.clear=e.delete=l8e),Object.freeze(e),t&&Object.entries(e).forEach(([i,s])=>kQ(s,!0))),e}function l8e(){gh(2)}function JP(e){return Object.isFrozen(e)}var u8e={};function c_(e){const t=u8e[e];return t||gh(0,e),t}var _T;function JAe(){return _T}function A8e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Pre(e,t){t&&(c_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function m6(e){v6(e),e.drafts_.forEach(d8e),e.drafts_=null}function v6(e){e===_T&&(_T=e.parent_)}function kre(e){return _T=A8e(_T,e)}function d8e(e){const t=e[KA];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Dre(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[KA].modified_&&(m6(t),gh(4)),fm(e)&&(e=oL(t,e),t.parent_||sL(t,e)),t.patches_&&c_("Patches").generateReplacementPatches_(i[KA].base_,e,t.patches_,t.inversePatches_)):e=oL(t,i,[]),m6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qAe?e:void 0}function oL(e,t,i){if(JP(t))return t;const s=t[KA];if(!s)return iL(t,(c,u)=>xre(e,s,t,c,u,i)),t;if(s.scope_!==e)return t;if(!s.modified_)return sL(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const c=s.copy_;let u=c,f=!1;s.type_===3&&(u=new Set(c),c.clear(),f=!0),iL(u,(p,m)=>xre(e,s,c,p,m,i,f)),sL(e,c,!1),i&&e.patches_&&c_("Patches").generatePatches_(s,i,e.patches_,e.inversePatches_)}return s.copy_}function xre(e,t,i,s,c,u,f){if(a_(c)){const p=u&&t&&t.type_!==3&&!p6(t.assigned_,s)?u.concat(s):void 0,m=oL(e,c,p);if(XAe(i,s,m),a_(m))e.canAutoFreeze_=!1;else return}else f&&i.add(c);if(fm(c)&&!JP(c)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;oL(e,c),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(i,s)&&sL(e,c)}}function sL(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&kQ(t,i)}function f8e(e,t){const i=Array.isArray(e),s={type_:i?1:0,scope_:t?t.scope_:JAe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let c=s,u=DQ;i&&(c=[s],u=yT);const{revoke:f,proxy:p}=Proxy.revocable(c,u);return s.draft_=p,s.revoke_=f,p}var DQ={get(e,t){if(t===KA)return e;const i=L1(e);if(!p6(i,t))return h8e(e,i,t);const s=i[t];return e.finalized_||!fm(s)?s:s===a4(e.base_,t)?(c4(e),e.copy_[t]=y6(s,e)):s},has(e,t){return t in L1(e)},ownKeys(e){return Reflect.ownKeys(L1(e))},set(e,t,i){const s=ZAe(L1(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,i),!0;if(!e.modified_){const c=a4(L1(e),t),u=c==null?void 0:c[KA];if(u&&u.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(c8e(i,c)&&(i!==void 0||p6(e.base_,t)))return!0;c4(e),_6(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return a4(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,c4(e),_6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=L1(e),s=Reflect.getOwnPropertyDescriptor(i,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:i[t]}},defineProperty(){gh(11)},getPrototypeOf(e){return Ew(e.base_)},setPrototypeOf(){gh(12)}},yT={};iL(DQ,(e,t)=>{yT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});yT.deleteProperty=function(e,t){return yT.set.call(this,e,t,void 0)};yT.set=function(e,t,i){return DQ.set.call(this,e[0],t,i,e[0])};function a4(e,t){const i=e[KA];return(i?L1(i):e)[t]}function h8e(e,t,i){var c;const s=ZAe(t,i);return s?"value"in s?s.value:(c=s.get)==null?void 0:c.call(e.draft_):void 0}function ZAe(e,t){if(!(t in e))return;let i=Ew(e);for(;i;){const s=Object.getOwnPropertyDescriptor(i,t);if(s)return s;i=Ew(i)}}function _6(e){e.modified_||(e.modified_=!0,e.parent_&&_6(e.parent_))}function c4(e){e.copy_||(e.copy_=g6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var p8e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,i,s)=>{if(typeof t=="function"&&typeof i!="function"){const u=i;i=t;const f=this;return function(m=u,...E){return f.produce(m,w=>i.call(this,w,...E))}}typeof i!="function"&&gh(6),s!==void 0&&typeof s!="function"&&gh(7);let c;if(fm(t)){const u=kre(this),f=y6(t,void 0);let p=!0;try{c=i(f),p=!1}finally{p?m6(u):v6(u)}return Pre(u,s),Dre(c,u)}else if(!t||typeof t!="object"){if(c=i(t),c===void 0&&(c=t),c===qAe&&(c=void 0),this.autoFreeze_&&kQ(c,!0),s){const u=[],f=[];c_("Patches").generateReplacementPatches_(t,c,u,f),s(u,f)}return c}else gh(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(f,...p)=>this.produceWithPatches(f,m=>t(m,...p));let s,c;return[this.produce(t,i,(f,p)=>{s=f,c=p}),s,c]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fm(e)||gh(8),a_(e)&&(e=g8e(e));const t=kre(this),i=y6(e,void 0);return i[KA].isManual_=!0,v6(t),i}finishDraft(e,t){const i=e&&e[KA];(!i||!i.isManual_)&&gh(9);const{scope_:s}=i;return Pre(s,t),Dre(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const c=t[i];if(c.path.length===0&&c.op==="replace"){e=c.value;break}}i>-1&&(t=t.slice(i+1));const s=c_("Patches").applyPatches_;return a_(e)?s(e,t):this.produce(e,c=>s(c,t))}};function y6(e,t){const i=YP(e)?c_("MapSet").proxyMap_(e,t):XP(e)?c_("MapSet").proxySet_(e,t):f8e(e,t);return(t?t.scope_:JAe()).drafts_.push(i),i}function g8e(e){return a_(e)||gh(10,e),ede(e)}function ede(e){if(!fm(e)||JP(e))return e;const t=e[KA];let i;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=g6(e,t.scope_.immer_.useStrictShallowCopy_)}else i=g6(e,!0);return iL(i,(s,c)=>{XAe(i,s,ede(c))}),t&&(t.finalized_=!1),i}var WA=new p8e,tde=WA.produce;WA.produceWithPatches.bind(WA);WA.setAutoFreeze.bind(WA);WA.setUseStrictShallowCopy.bind(WA);WA.applyPatches.bind(WA);WA.createDraft.bind(WA);WA.finishDraft.bind(WA);function rde(e){return({dispatch:i,getState:s})=>c=>u=>typeof u=="function"?u(i,s,e):c(u)}var m8e=rde(),v8e=rde,_8e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nL:nL.apply(null,arguments)};function Ure(e,t){function i(...s){if(t){let c=t(...s);if(!c)throw new Error(rm(0));return{type:e,payload:c.payload,..."meta"in c&&{meta:c.meta},..."error"in c&&{error:c.error}}}return{type:e,payload:s[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=s=>s8e(s)&&s.type===e,i}var nde=class AC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,AC.prototype)}static get[Symbol.species](){return AC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new AC(...t[0].concat(this)):new AC(...t.concat(this))}};function Mre(e){return fm(e)?tde(e,()=>{}):e}function BO(e,t,i){return e.has(t)?e.get(t):e.set(t,i(t)).get(t)}function y8e(e){return typeof e=="boolean"}var E8e=()=>function(t){const{thunk:i=!0,immutableCheck:s=!0,serializableCheck:c=!0,actionCreatorCheck:u=!0}=t??{};let f=new nde;return i&&(y8e(i)?f.push(m8e):f.push(v8e(i.extraArgument))),f},w8e="RTK_autoBatch",Fre=e=>t=>{setTimeout(t,e)},S8e=(e={type:"raf"})=>t=>(...i)=>{const s=t(...i);let c=!0,u=!1,f=!1;const p=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Fre(10):e.type==="callback"?e.queueNotification:Fre(e.timeout),E=()=>{f=!1,u&&(u=!1,p.forEach(w=>w()))};return Object.assign({},s,{subscribe(w){const T=()=>c&&w(),N=s.subscribe(T);return p.add(w),()=>{N(),p.delete(w)}},dispatch(w){var T;try{return c=!((T=w==null?void 0:w.meta)!=null&&T[w8e]),u=!c,u&&(f||(f=!0,m(E))),s.dispatch(w)}finally{c=!0}}})},b8e=e=>function(i){const{autoBatch:s=!0}=i??{};let c=new nde(e);return s&&c.push(S8e(typeof s=="object"?s:void 0)),c};function C8e(e){const t=E8e(),{reducer:i=void 0,middleware:s,devTools:c=!0,duplicateMiddlewareCheck:u=!0,preloadedState:f=void 0,enhancers:p=void 0}=e||{};let m;if(typeof i=="function")m=i;else if(PQ(i))m=i8e(i);else throw new Error(rm(1));let E;typeof s=="function"?E=s(t):E=t();let w=nL;c&&(w=_8e({trace:!1,...typeof c=="object"&&c}));const T=o8e(...E),N=b8e(T);let O=typeof p=="function"?p(N):N();const P=w(...O);return zAe(m,f,P)}function ide(e){const t={},i=[];let s;const c={addCase(u,f){const p=typeof u=="string"?u:u.type;if(!p)throw new Error(rm(28));if(p in t)throw new Error(rm(29));return t[p]=f,c},addMatcher(u,f){return i.push({matcher:u,reducer:f}),c},addDefaultCase(u){return s=u,c}};return e(c),[t,i,s]}function T8e(e){return typeof e=="function"}function R8e(e,t){let[i,s,c]=ide(t),u;if(T8e(e))u=()=>Mre(e());else{const p=Mre(e);u=()=>p}function f(p=u(),m){let E=[i[m.type],...s.filter(({matcher:w})=>w(m)).map(({reducer:w})=>w)];return E.filter(w=>!!w).length===0&&(E=[c]),E.reduce((w,T)=>{if(T)if(a_(w)){const O=T(w,m);return O===void 0?w:O}else{if(fm(w))return tde(w,N=>T(N,m));{const N=T(w,m);if(N===void 0){if(w===null)return w;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}}return w},p)}return f.getInitialState=u,f}var I8e=Symbol.for("rtk-slice-createasyncthunk");function O8e(e,t){return`${e}/${t}`}function N8e({creators:e}={}){var i;const t=(i=e==null?void 0:e.asyncThunk)==null?void 0:i[I8e];return function(c){const{name:u,reducerPath:f=u}=c;if(!u)throw new Error(rm(11));typeof process<"u";const p=(typeof c.reducers=="function"?c.reducers(L8e()):c.reducers)||{},m=Object.keys(p),E={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},w={addCase(K,J){const ie=typeof K=="string"?K:K.type;if(!ie)throw new Error(rm(12));if(ie in E.sliceCaseReducersByType)throw new Error(rm(13));return E.sliceCaseReducersByType[ie]=J,w},addMatcher(K,J){return E.sliceMatchers.push({matcher:K,reducer:J}),w},exposeAction(K,J){return E.actionCreators[K]=J,w},exposeCaseReducer(K,J){return E.sliceCaseReducersByName[K]=J,w}};m.forEach(K=>{const J=p[K],ie={reducerName:K,type:O8e(u,K),createNotation:typeof c.reducers=="function"};k8e(J)?x8e(ie,J,w,t):P8e(ie,J,w)});function T(){const[K={},J=[],ie=void 0]=typeof c.extraReducers=="function"?ide(c.extraReducers):[c.extraReducers],fe={...K,...E.sliceCaseReducersByType};return R8e(c.initialState,Z=>{for(let pe in fe)Z.addCase(pe,fe[pe]);for(let pe of E.sliceMatchers)Z.addMatcher(pe.matcher,pe.reducer);for(let pe of J)Z.addMatcher(pe.matcher,pe.reducer);ie&&Z.addDefaultCase(ie)})}const N=K=>K,O=new Map,P=new WeakMap;let M;function Q(K,J){return M||(M=T()),M(K,J)}function k(){return M||(M=T()),M.getInitialState()}function D(K,J=!1){function ie(Z){let pe=Z[K];return typeof pe>"u"&&J&&(pe=BO(P,ie,k)),pe}function fe(Z=N){const pe=BO(O,J,()=>new WeakMap);return BO(pe,Z,()=>{const Y={};for(const[te,le]of Object.entries(c.selectors??{}))Y[te]=B8e(le,Z,()=>BO(P,Z,k),J);return Y})}return{reducerPath:K,getSelectors:fe,get selectors(){return fe(ie)},selectSlice:ie}}const V={name:u,reducer:Q,actions:E.actionCreators,caseReducers:E.sliceCaseReducersByName,getInitialState:k,...D(f),injectInto(K,{reducerPath:J,...ie}={}){const fe=J??f;return K.inject({reducerPath:fe,reducer:Q},ie),{...V,...D(fe,!0)}}};return V}}function B8e(e,t,i,s){function c(u,...f){let p=t(u);return typeof p>"u"&&s&&(p=i()),e(p,...f)}return c.unwrapped=e,c}var ode=N8e();function L8e(){function e(t,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...i}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...i){return t(...i)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:i}},asyncThunk:e}}function P8e({type:e,reducerName:t,createNotation:i},s,c){let u,f;if("reducer"in s){if(i&&!D8e(s))throw new Error(rm(17));u=s.reducer,f=s.prepare}else u=s;c.addCase(e,u).exposeCaseReducer(t,u).exposeAction(t,f?Ure(e,f):Ure(e))}function k8e(e){return e._reducerDefinitionType==="asyncThunk"}function D8e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function x8e({type:e,reducerName:t},i,s,c){if(!c)throw new Error(rm(18));const{payloadCreator:u,fulfilled:f,pending:p,rejected:m,settled:E,options:w}=i,T=c(e,u,w);s.exposeAction(t,T),f&&s.addCase(T.fulfilled,f),p&&s.addCase(T.pending,p),m&&s.addCase(T.rejected,m),E&&s.addMatcher(T.settled,E),s.exposeCaseReducer(t,{fulfilled:f||LO,pending:p||LO,rejected:m||LO,settled:E||LO})}function LO(){}function rm(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const U8e={tool:null,elements:[],activeUsers:[]},sde=ode({name:"whiteboard",initialState:U8e,reducers:{setToolType:(e,t)=>{e.tool=t.payload},updateElement:(e,t)=>{const{id:i}=t.payload,s=e.elements.findIndex(c=>c.id===i);s===-1?e.elements.push(t.payload):e.elements[s]=t.payload},addActiveUserToBoard:(e,t)=>{console.log(t.payload);const i=t.payload,s=i._id,c=e.activeUsers.findIndex(u=>u._id===s);c===-1?e.activeUsers.push(i):e.activeUsers[c]=i},removeActiveUserFromBoard:(e,t)=>{const s=t.payload._id;e.activeUsers=e.activeUsers.filter(c=>c._id!==s)},setElements:(e,t)=>{e.elements=t.payload}}}),{setToolType:M8e,updateElement:E6,setElements:nm,addActiveUserToBoard:F8e,removeActiveUserFromBoard:V8e}=sde.actions,Q8e=sde.reducer,Zp=Object.create(null);Zp.open="0";Zp.close="1";Zp.ping="2";Zp.pong="3";Zp.message="4";Zp.upgrade="5";Zp.noop="6";const WN=Object.create(null);Object.keys(Zp).forEach(e=>{WN[Zp[e]]=e});const w6={type:"error",data:"parser error"},ade=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",cde=typeof ArrayBuffer=="function",lde=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,xQ=({type:e,data:t},i,s)=>ade&&t instanceof Blob?i?s(t):Vre(t,s):cde&&(t instanceof ArrayBuffer||lde(t))?i?s(t):Vre(new Blob([t]),s):s(Zp[e]+(t||"")),Vre=(e,t)=>{const i=new FileReader;return i.onload=function(){const s=i.result.split(",")[1];t("b"+(s||""))},i.readAsDataURL(e)};function Qre(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let l4;function H8e(e,t){if(ade&&e.data instanceof Blob)return e.data.arrayBuffer().then(Qre).then(t);if(cde&&(e.data instanceof ArrayBuffer||lde(e.data)))return t(Qre(e.data));xQ(e,!1,i=>{l4||(l4=new TextEncoder),t(l4.encode(i))})}const Hre="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Hre.length;e++)dC[Hre.charCodeAt(e)]=e;const j8e=e=>{let t=e.length*.75,i=e.length,s,c=0,u,f,p,m;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const E=new ArrayBuffer(t),w=new Uint8Array(E);for(s=0;s<i;s+=4)u=dC[e.charCodeAt(s)],f=dC[e.charCodeAt(s+1)],p=dC[e.charCodeAt(s+2)],m=dC[e.charCodeAt(s+3)],w[c++]=u<<2|f>>4,w[c++]=(f&15)<<4|p>>2,w[c++]=(p&3)<<6|m&63;return E},K8e=typeof ArrayBuffer=="function",UQ=(e,t)=>{if(typeof e!="string")return{type:"message",data:ude(e,t)};const i=e.charAt(0);return i==="b"?{type:"message",data:W8e(e.substring(1),t)}:WN[i]?e.length>1?{type:WN[i],data:e.substring(1)}:{type:WN[i]}:w6},W8e=(e,t)=>{if(K8e){const i=j8e(e);return ude(i,t)}else return{base64:!0,data:e}},ude=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Ade=String.fromCharCode(30),G8e=(e,t)=>{const i=e.length,s=new Array(i);let c=0;e.forEach((u,f)=>{xQ(u,!1,p=>{s[f]=p,++c===i&&t(s.join(Ade))})})},$8e=(e,t)=>{const i=e.split(Ade),s=[];for(let c=0;c<i.length;c++){const u=UQ(i[c],t);if(s.push(u),u.type==="error")break}return s};function z8e(){return new TransformStream({transform(e,t){H8e(e,i=>{const s=i.length;let c;if(s<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,s);else if(s<65536){c=new Uint8Array(3);const u=new DataView(c.buffer);u.setUint8(0,126),u.setUint16(1,s)}else{c=new Uint8Array(9);const u=new DataView(c.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(c[0]|=128),t.enqueue(c),t.enqueue(i)})}})}let u4;function PO(e){return e.reduce((t,i)=>t+i.length,0)}function kO(e,t){if(e[0].length===t)return e.shift();const i=new Uint8Array(t);let s=0;for(let c=0;c<t;c++)i[c]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),i}function q8e(e,t){u4||(u4=new TextDecoder);const i=[];let s=0,c=-1,u=!1;return new TransformStream({transform(f,p){for(i.push(f);;){if(s===0){if(PO(i)<1)break;const m=kO(i,1);u=(m[0]&128)===128,c=m[0]&127,c<126?s=3:c===126?s=1:s=2}else if(s===1){if(PO(i)<2)break;const m=kO(i,2);c=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(PO(i)<8)break;const m=kO(i,8),E=new DataView(m.buffer,m.byteOffset,m.length),w=E.getUint32(0);if(w>Math.pow(2,53-32)-1){p.enqueue(w6);break}c=w*Math.pow(2,32)+E.getUint32(4),s=3}else{if(PO(i)<c)break;const m=kO(i,c);p.enqueue(UQ(u?m:u4.decode(m),t)),s=0}if(c===0||c>e){p.enqueue(w6);break}}}})}const dde=4;function Ka(e){if(e)return Y8e(e)}function Y8e(e){for(var t in Ka.prototype)e[t]=Ka.prototype[t];return e}Ka.prototype.on=Ka.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ka.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this};Ka.prototype.off=Ka.prototype.removeListener=Ka.prototype.removeAllListeners=Ka.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,c=0;c<i.length;c++)if(s=i[c],s===t||s.fn===t){i.splice(c,1);break}return i.length===0&&delete this._callbacks["$"+e],this};Ka.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(i){i=i.slice(0);for(var s=0,c=i.length;s<c;++s)i[s].apply(this,t)}return this};Ka.prototype.emitReserved=Ka.prototype.emit;Ka.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ka.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ZP=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0))(),Hd=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),X8e="arraybuffer";function fde(e,...t){return t.reduce((i,s)=>(e.hasOwnProperty(s)&&(i[s]=e[s]),i),{})}const J8e=Hd.setTimeout,Z8e=Hd.clearTimeout;function ek(e,t){t.useNativeTimers?(e.setTimeoutFn=J8e.bind(Hd),e.clearTimeoutFn=Z8e.bind(Hd)):(e.setTimeoutFn=Hd.setTimeout.bind(Hd),e.clearTimeoutFn=Hd.clearTimeout.bind(Hd))}const eVe=1.33;function tVe(e){return typeof e=="string"?rVe(e):Math.ceil((e.byteLength||e.size)*eVe)}function rVe(e){let t=0,i=0;for(let s=0,c=e.length;s<c;s++)t=e.charCodeAt(s),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(s++,i+=4);return i}function hde(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function nVe(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}function iVe(e){let t={},i=e.split("&");for(let s=0,c=i.length;s<c;s++){let u=i[s].split("=");t[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return t}class oVe extends Error{constructor(t,i,s){super(t),this.description=i,this.context=s,this.type="TransportError"}}class MQ extends Ka{constructor(t){super(),this.writable=!1,ek(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,i,s){return super.emitReserved("error",new oVe(t,i,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=UQ(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,i={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const i=nVe(t);return i.length?"?"+i:""}}class sVe extends MQ{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||i()})),this.writable||(s++,this.once("drain",function(){--s||i()}))}else i()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const i=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};$8e(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,G8e(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",i=this.query||{};return this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=hde()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(t,i)}}let pde=!1;try{pde=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const aVe=pde;function cVe(){}class lVe extends sVe{constructor(t){if(super(t),typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,i){const s=this.request({method:"POST",data:t});s.on("success",i),s.on("error",(c,u)=>{this.onError("xhr post error",c,u)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,s)=>{this.onError("xhr poll error",i,s)}),this.pollXhr=t}}let rw=class GN extends Ka{constructor(t,i,s){super(),this.createRequest=t,ek(this,s),this._opts=s,this._method=s.method||"GET",this._uri=i,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const i=fde(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(i);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&s.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var c;s.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=GN.requestsCount++,GN.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=cVe,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete GN.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};rw.requestsCount=0;rw.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",jre);else if(typeof addEventListener=="function"){const e="onpagehide"in Hd?"pagehide":"unload";addEventListener(e,jre,!1)}}function jre(){for(let e in rw.requests)rw.requests.hasOwnProperty(e)&&rw.requests[e].abort()}const uVe=function(){const e=gde({xdomain:!1});return e&&e.responseType!==null}();class AVe extends lVe{constructor(t){super(t);const i=t&&t.forceBase64;this.supportsBinary=uVe&&!i}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new rw(gde,this.uri(),t)}}function gde(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||aVe))return new XMLHttpRequest}catch{}if(!t)try{return new Hd[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const mde=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class dVe extends MQ{get name(){return"websocket"}doOpen(){const t=this.uri(),i=this.opts.protocols,s=mde?{}:fde(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,i,s)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const s=t[i],c=i===t.length-1;xQ(s,this.supportsBinary,u=>{try{this.doWrite(s,u)}catch{}c&&ZP(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=hde()),this.supportsBinary||(i.b64=1),this.createUri(t,i)}}const A4=Hd.WebSocket||Hd.MozWebSocket;class fVe extends dVe{createSocket(t,i,s){return mde?new A4(t,i,s):i?new A4(t,i):new A4(t)}doWrite(t,i){this.ws.send(i)}}class hVe extends MQ{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const i=q8e(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(i).getReader(),c=z8e();c.readable.pipeTo(t.writable),this._writer=c.writable.getWriter();const u=()=>{s.read().then(({done:p,value:m})=>{p||(this.onPacket(m),u())}).catch(p=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const s=t[i],c=i===t.length-1;this._writer.write(s).then(()=>{c&&ZP(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const pVe={websocket:fVe,webtransport:hVe,polling:AVe},gVe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mVe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function S6(e){if(e.length>8e3)throw"URI too long";const t=e,i=e.indexOf("["),s=e.indexOf("]");i!=-1&&s!=-1&&(e=e.substring(0,i)+e.substring(i,s).replace(/:/g,";")+e.substring(s,e.length));let c=gVe.exec(e||""),u={},f=14;for(;f--;)u[mVe[f]]=c[f]||"";return i!=-1&&s!=-1&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=vVe(u,u.path),u.queryKey=_Ve(u,u.query),u}function vVe(e,t){const i=/\/{2,9}/g,s=t.replace(i,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function _Ve(e,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,c,u){c&&(i[c]=u)}),i}const b6=typeof addEventListener=="function"&&typeof removeEventListener=="function",$N=[];b6&&addEventListener("offline",()=>{$N.forEach(e=>e())},!1);class e0 extends Ka{constructor(t,i){if(super(),this.binaryType=X8e,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(i=t,t=null),t){const s=S6(t);i.hostname=s.host,i.secure=s.protocol==="https"||s.protocol==="wss",i.port=s.port,s.query&&(i.query=s.query)}else i.host&&(i.hostname=S6(i.host).host);ek(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},i.transports.forEach(s=>{const c=s.prototype.name;this.transports.push(c),this._transportsByName[c]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=iVe(this.opts.query)),b6&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},$N.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=dde,i.transport=t,this.id&&(i.sid=this.id);const s=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&e0.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const i=this.createTransport(t);i.open(),this.setTransport(i)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",i=>this._onClose("transport close",i))}onOpen(){this.readyState="open",e0.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const i=new Error("server error");i.code=t.data,this._onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let s=0;s<this.writeBuffer.length;s++){const c=this.writeBuffer[s].data;if(c&&(i+=tVe(c)),s>0&&i>this._maxPayload)return this.writeBuffer.slice(0,s);i+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ZP(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,i,s){return this._sendPacket("message",t,i,s),this}send(t,i,s){return this._sendPacket("message",t,i,s),this}_sendPacket(t,i,s,c){if(typeof i=="function"&&(c=i,i=void 0),typeof s=="function"&&(c=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const u={type:t,data:i,options:s};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),c&&this.once("flush",c),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},s=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(e0.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),b6&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=$N.indexOf(this._offlineEventListener);s!==-1&&$N.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this._prevBufferLen=0}}}e0.protocol=dde;class yVe extends e0{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let i=this.createTransport(t),s=!1;e0.priorWebsocketSuccess=!1;const c=()=>{s||(i.send([{type:"ping",data:"probe"}]),i.once("packet",T=>{if(!s)if(T.type==="pong"&&T.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;e0.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(w(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const N=new Error("probe error");N.transport=i.name,this.emitReserved("upgradeError",N)}}))};function u(){s||(s=!0,w(),i.close(),i=null)}const f=T=>{const N=new Error("probe error: "+T);N.transport=i.name,u(),this.emitReserved("upgradeError",N)};function p(){f("transport closed")}function m(){f("socket closed")}function E(T){i&&T.name!==i.name&&u()}const w=()=>{i.removeListener("open",c),i.removeListener("error",f),i.removeListener("close",p),this.off("close",m),this.off("upgrading",E)};i.once("open",c),i.once("error",f),i.once("close",p),this.once("close",m),this.once("upgrading",E),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||i.open()},200):i.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const i=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&i.push(t[s]);return i}}let EVe=class extends yVe{constructor(t,i={}){const s=typeof t=="object"?t:i;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(c=>pVe[c]).filter(c=>!!c)),super(t,s)}};function wVe(e,t="",i){let s=e;i=i||typeof location<"u"&&location,e==null&&(e=i.protocol+"//"+i.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=i.protocol+e:e=i.host+e),/^(https?|wss?):\/\//.test(e)||(typeof i<"u"?e=i.protocol+"//"+e:e="https://"+e),s=S6(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const u=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+u+":"+s.port+t,s.href=s.protocol+"://"+u+(i&&i.port===s.port?"":":"+s.port),s}const SVe=typeof ArrayBuffer=="function",bVe=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,vde=Object.prototype.toString,CVe=typeof Blob=="function"||typeof Blob<"u"&&vde.call(Blob)==="[object BlobConstructor]",TVe=typeof File=="function"||typeof File<"u"&&vde.call(File)==="[object FileConstructor]";function FQ(e){return SVe&&(e instanceof ArrayBuffer||bVe(e))||CVe&&e instanceof Blob||TVe&&e instanceof File}function zN(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let i=0,s=e.length;i<s;i++)if(zN(e[i]))return!0;return!1}if(FQ(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return zN(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&zN(e[i]))return!0;return!1}function RVe(e){const t=[],i=e.data,s=e;return s.data=C6(i,t),s.attachments=t.length,{packet:s,buffers:t}}function C6(e,t){if(!e)return e;if(FQ(e)){const i={_placeholder:!0,num:t.length};return t.push(e),i}else if(Array.isArray(e)){const i=new Array(e.length);for(let s=0;s<e.length;s++)i[s]=C6(e[s],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){const i={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=C6(e[s],t));return i}return e}function IVe(e,t){return e.data=T6(e.data,t),delete e.attachments,e}function T6(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=T6(e[i],t);else if(typeof e=="object")for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=T6(e[i],t));return e}const OVe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],NVe=5;var Li;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Li||(Li={}));class BVe{constructor(t){this.replacer=t}encode(t){return(t.type===Li.EVENT||t.type===Li.ACK)&&zN(t)?this.encodeAsBinary({type:t.type===Li.EVENT?Li.BINARY_EVENT:Li.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===Li.BINARY_EVENT||t.type===Li.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=RVe(t),s=this.encodeAsString(i.packet),c=i.buffers;return c.unshift(s),c}}function Kre(e){return Object.prototype.toString.call(e)==="[object Object]"}class VQ extends Ka{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);const s=i.type===Li.BINARY_EVENT;s||i.type===Li.BINARY_ACK?(i.type=s?Li.EVENT:Li.ACK,this.reconstructor=new LVe(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(FQ(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0;const s={type:Number(t.charAt(0))};if(Li[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Li.BINARY_EVENT||s.type===Li.BINARY_ACK){const u=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);const f=t.substring(u,i);if(f!=Number(f)||t.charAt(i)!=="-")throw new Error("Illegal attachments");s.attachments=Number(f)}if(t.charAt(i+1)==="/"){const u=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););s.nsp=t.substring(u,i)}else s.nsp="/";const c=t.charAt(i+1);if(c!==""&&Number(c)==c){const u=i+1;for(;++i;){const f=t.charAt(i);if(f==null||Number(f)!=f){--i;break}if(i===t.length)break}s.id=Number(t.substring(u,i+1))}if(t.charAt(++i)){const u=this.tryParse(t.substr(i));if(VQ.isPayloadValid(s.type,u))s.data=u;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case Li.CONNECT:return Kre(i);case Li.DISCONNECT:return i===void 0;case Li.CONNECT_ERROR:return typeof i=="string"||Kre(i);case Li.EVENT:case Li.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&OVe.indexOf(i[0])===-1);case Li.ACK:case Li.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class LVe{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=IVe(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const PVe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:VQ,Encoder:BVe,get PacketType(){return Li},protocol:NVe},Symbol.toStringTag,{value:"Module"}));function fh(e,t,i){return e.on(t,i),function(){e.off(t,i)}}const kVe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class _de extends Ka{constructor(t,i,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[fh(t,"open",this.onopen.bind(this)),fh(t,"packet",this.onpacket.bind(this)),fh(t,"error",this.onerror.bind(this)),fh(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){var s,c,u;if(kVe.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const f={type:Li.EVENT,data:i};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const w=this.ids++,T=i.pop();this._registerAckCallback(w,T),f.id=w}const p=(c=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||c===void 0?void 0:c.writable,m=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!p||(m?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(t,i){var s;const c=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(c===void 0){this.acks[t]=i;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===t&&this.sendBuffer.splice(p,1);i.call(this,new Error("operation has timed out"))},c),f=(...p)=>{this.io.clearTimeoutFn(u),i.apply(this,p)};f.withError=!0,this.acks[t]=f}emitWithAck(t,...i){return new Promise((s,c)=>{const u=(f,p)=>f?c(f):s(p);u.withError=!0,i.push(u),this.emit(t,...i)})}_addToQueue(t){let i;typeof t[t.length-1]=="function"&&(i=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((c,...u)=>s!==this._queue[0]?void 0:(c!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(c)):(this._queue.shift(),i&&i(null,...u)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Li.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Li.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Li.EVENT:case Li.BINARY_EVENT:this.onevent(t);break;case Li.ACK:case Li.BINARY_ACK:this.onack(t);break;case Li.DISCONNECT:this.ondisconnect();break;case Li.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const s of i)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const i=this;let s=!1;return function(...c){s||(s=!0,i.packet({type:Li.ACK,id:t,data:c}))}}onack(t){const i=this.acks[t.id];typeof i=="function"&&(delete this.acks[t.id],i.withError&&t.data.unshift(null),i.apply(this,t.data))}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Li.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let s=0;s<i.length;s++)if(t===i[s])return i.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let s=0;s<i.length;s++)if(t===i[s])return i.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const s of i)s.apply(this,t.data)}}}function xw(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}xw.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+i:e-i}return Math.min(e,this.max)|0};xw.prototype.reset=function(){this.attempts=0};xw.prototype.setMin=function(e){this.ms=e};xw.prototype.setMax=function(e){this.max=e};xw.prototype.setJitter=function(e){this.jitter=e};class R6 extends Ka{constructor(t,i){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,ek(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((s=i.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new xw({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;const c=i.parser||PVe;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new EVe(this.uri,this.opts);const i=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const c=fh(i,"open",function(){s.onopen(),t&&t()}),u=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),t?t(p):this.maybeReconnectOnOpen()},f=fh(i,"error",u);if(this._timeout!==!1){const p=this._timeout,m=this.setTimeoutFn(()=>{c(),u(new Error("timeout")),i.close()},p);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(c),this.subs.push(f),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(fh(t,"ping",this.onping.bind(this)),fh(t,"data",this.ondata.bind(this)),fh(t,"error",this.onerror.bind(this)),fh(t,"close",this.onclose.bind(this)),fh(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){ZP(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new _de(this,t,i),this.nsps[t]=s),s}_destroy(t){const i=Object.keys(this.nsps);for(const s of i)if(this.nsps[s].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let s=0;s<i.length;s++)this.engine.write(i[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,i){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(c=>{c?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",c)):t.onreconnect()}))},i);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ub={};function qN(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const i=wVe(e,t.path||"/socket.io"),s=i.source,c=i.id,u=i.path,f=Ub[c]&&u in Ub[c].nsps,p=t.forceNew||t["force new connection"]||t.multiplex===!1||f;let m;return p?m=new R6(s,t):(Ub[c]||(Ub[c]=new R6(s,t)),m=Ub[c]),i.query&&!t.query&&(t.query=i.queryKey),m.socket(i.path,t)}Object.assign(qN,{Manager:R6,Socket:_de,io:qN,connect:qN});const DVe={cursors:[]},yde=ode({name:"cursor",initialState:DVe,reducers:{updateCursorPosition:(e,t)=>{const{x:i,y:s,userId:c,username:u}=t.payload,f=e.cursors.findIndex(p=>p.userId===c);f!==-1?e.cursors[f]={userId:c,username:u,x:i,y:s}:e.cursors.push({userId:c,username:u,x:i,y:s})},removeCursorPosition:(e,t)=>{e.cursors=e.cursors.filter(i=>i.userId!==t.payload)}}}),{updateCursorPosition:Ede,removeCursorPosition:xVe}=yde.actions,UVe=yde.reducer,DA=C8e({reducer:{whiteboard:Q8e,cursor:UVe},middleware:e=>e({serializableCheck:{ignoreActions:["whiteboard/setElements"],ignoredPaths:["whiteboard.elements"]}})});let Vn;const MVe=e=>new Promise((t,i)=>{const s=localStorage.getItem("userId");if(!s||!e){i("Missing userId or roomId");return}console.log(`userid:${s} roomid:${e}`),Vn=qN("https://collab-g94w.onrender.com",{query:{userId:s,roomId:e}});const c=setTimeout(()=>{i("Socket connection timed out")},5e3);Vn.on("connect",()=>{clearTimeout(c),console.log("Connected to socket io server"),t()}),Vn.on("connect_error",u=>{clearTimeout(c),i(u)}),Vn.off("BOARD_ELEMENTS"),Vn.off("USER_BOARD_JOINED"),Vn.off("USER_BOARD_LEAVE"),Vn.off("ELEMENT-UPDATE"),Vn.off("WHITEBOARD-CLEAR"),Vn.off("CURSOR-POSITION"),Vn.on("BOARD_ELEMENTS",u=>{console.log(`BOARD_ELEMENTS : ${u}`),DA.dispatch(nm(JSON.parse(u)))}),Vn.on("USER_BOARD_JOINED",u=>{console.log("USER_BOARD_JOINED"),DA.dispatch(F8e(u.user))}),Vn.on("USER_BOARD_LEAVE",u=>{console.log("USER_BOARD_LEAVE"),DA.dispatch(V8e(u.user)),DA.dispatch(xVe(u.user._id))}),Vn.on("ELEMENT-UPDATE",u=>{const{boardElements:f}=u;DA.dispatch(E6(f))}),Vn.on("WHITEBOARD-CLEAR",()=>{console.log("WHITEBOARD-CLEAR received"),DA.dispatch(nm([]))}),Vn.on("WHITEBOARD-UNDO",({boardElements:u})=>{console.log("WHITEBOARD-UNDO received"),DA.dispatch(nm([...u]))}),Vn.on("CURSOR-POSITION",u=>{DA.dispatch(Ede(u))})}),FVe=(e,t)=>{Vn&&(console.log(`user:${e.user}`),Vn.emit("SEND-MESSAGE",{message:e,roomId:t}))},VVe=e=>{Vn&&(Vn.off("CHAT-MESSAGE"),Vn.on("CHAT-MESSAGE",t=>{console.log(t.user),e(t)}))},QVe=(e,t)=>{Vn?(console.log(`roomId:${t}`),Vn.emit("JOIN-CHAT",{user:e,roomId:t},i=>{if(i.error){console.error("Error joining chat room:",i.error);return}console.log("Chat room joined successfully:",i.success)})):console.log("No socket at join chat")},YN=e=>{const t={roomId:localStorage.getItem("roomId"),boardElements:e};Vn.emit("ELEMENT-UPDATE",t)},HVe=()=>{const e={roomId:localStorage.getItem("roomId")};Vn.emit("WHITEBOARD-UNDO",e)},jVe=()=>{const e=localStorage.getItem("roomId");Vn.emit("WHITEBOARD-CLEAR",e)},Wre=e=>{const{x:t,y:i}=e,s={x:t,y:i,username:localStorage.getItem("username"),roomId:localStorage.getItem("roomId"),userId:localStorage.getItem("userId")};Vn.emit("CURSOR-POSITION",s)},KVe=e=>{Vn&&Vn.off("CHAT-MESSAGE",e)},WVe=()=>{console.log("disconnect socket connection called!!!"),Vn.disconnect()};let MA=null;const GVe=(e,t)=>{Vn?(console.log("joinEditor"),console.log(`roomId:${t}`),Vn.emit("JOIN-EDITOR",{user:e,roomId:t},i=>{if(i.error){console.error("Error joining editor room:",i.error);return}console.log("Editor room joined successfully:",i.success)})):console.log("No socket at join editor")},$Ve=(e,t)=>{Vn&&(MA&&Vn.off("CODE_CHANGE",MA),MA=({code:i})=>{i!==null&&e(i)},Vn.on("JOINED_EDITOR",({user:i,socketId:s})=>{console.log("JOINED_EDITOR"),Vn.emit("SYNC_CODE",{socketId:s,roomId:t})}))},zVe=(e,t)=>{Vn&&Vn.emit("CODE_CHANGE",{roomId:e,code:t})},qVe=e=>{Vn&&(MA&&Vn.off("CODE_CHANGE",MA),MA=({code:t})=>{console.log("codechangehandler"),t!==null&&e(t)},console.log("codechange"),Vn.on("CODE_CHANGE",MA))},YVe=()=>{Vn&&MA&&(Vn.off("CODE_CHANGE",MA),MA=null)},XVe=()=>{Vn&&MA&&(Vn.off("SYNC_CODE",MA),MA=null)};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I6=function(e,t){return I6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])},I6(e,t)};function Th(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");I6(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var O6=function(){return O6=Object.assign||function(t){for(var i,s=1,c=arguments.length;s<c;s++){i=arguments[s];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])}return t},O6.apply(this,arguments)};function nu(e,t,i,s){function c(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function p(w){try{E(s.next(w))}catch(T){f(T)}}function m(w){try{E(s.throw(w))}catch(T){f(T)}}function E(w){w.done?u(w.value):c(w.value).then(p,m)}E((s=s.apply(e,t||[])).next())})}function Dl(e,t){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,c,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(E){return function(w){return m([E,w])}}function m(E){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,c&&(u=E[0]&2?c.return:E[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,E[1])).done)return u;switch(c=0,u&&(E=[E[0]&2,u.value]),E[0]){case 0:case 1:u=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,c=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!u||E[1]>u[0]&&E[1]<u[3])){i.label=E[1];break}if(E[0]===6&&i.label<u[1]){i.label=u[1],u=E;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(E);break}u[2]&&i.ops.pop(),i.trys.pop();continue}E=t.call(e,i)}catch(w){E=[6,w],c=0}finally{s=u=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}function DO(e,t,i){if(i||arguments.length===2)for(var s=0,c=t.length,u;s<c;s++)(u||!(s in t))&&(u||(u=Array.prototype.slice.call(t,0,s)),u[s]=t[s]);return e.concat(u||t)}var hm=function(){function e(t,i,s,c){this.left=t,this.top=i,this.width=s,this.height=c}return e.prototype.add=function(t,i,s,c){return new e(this.left+t,this.top+i,this.width+s,this.height+c)},e.fromClientRect=function(t,i){return new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(t,i){var s=Array.from(i).find(function(c){return c.width!==0});return s?new e(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),tk=function(e,t){return hm.fromClientRect(e,t.getBoundingClientRect())},JVe=function(e){var t=e.body,i=e.documentElement;if(!t||!i)throw new Error("Unable to get document size");var s=Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.offsetWidth,i.offsetWidth),Math.max(t.clientWidth,i.clientWidth)),c=Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.offsetHeight,i.offsetHeight),Math.max(t.clientHeight,i.clientHeight));return new hm(0,0,s,c)},rk=function(e){for(var t=[],i=0,s=e.length;i<s;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<s){var u=e.charCodeAt(i++);(u&64512)===56320?t.push(((c&1023)<<10)+(u&1023)+65536):(t.push(c),i--)}else t.push(c)}return t},Sa=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var s=[],c=-1,u="";++c<i;){var f=e[c];f<=65535?s.push(f):(f-=65536,s.push((f>>10)+55296,f%1024+56320)),(c+1===i||s.length>16384)&&(u+=String.fromCharCode.apply(String,s),s.length=0)}return u},Gre="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ZVe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xO=0;xO<Gre.length;xO++)ZVe[Gre.charCodeAt(xO)]=xO;var $re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var UO=0;UO<$re.length;UO++)fC[$re.charCodeAt(UO)]=UO;var eQe=function(e){var t=e.length*.75,i=e.length,s,c=0,u,f,p,m;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),w=Array.isArray(E)?E:new Uint8Array(E);for(s=0;s<i;s+=4)u=fC[e.charCodeAt(s)],f=fC[e.charCodeAt(s+1)],p=fC[e.charCodeAt(s+2)],m=fC[e.charCodeAt(s+3)],w[c++]=u<<2|f>>4,w[c++]=(f&15)<<4|p>>2,w[c++]=(p&3)<<6|m&63;return E},tQe=function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i.push(e[s+1]<<8|e[s]);return i},rQe=function(e){for(var t=e.length,i=[],s=0;s<t;s+=4)i.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return i},$1=5,QQ=6+5,d4=2,nQe=QQ-$1,wde=65536>>$1,iQe=1<<$1,f4=iQe-1,oQe=1024>>$1,sQe=wde+oQe,aQe=sQe,cQe=32,lQe=aQe+cQe,uQe=65536>>QQ,AQe=1<<nQe,dQe=AQe-1,zre=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},fQe=function(e,t,i){return e.slice?e.slice(t,i):new Uint32Array(Array.prototype.slice.call(e,t,i))},hQe=function(e,t){var i=eQe(e),s=Array.isArray(i)?rQe(i):new Uint32Array(i),c=Array.isArray(i)?tQe(i):new Uint16Array(i),u=24,f=zre(c,u/2,s[4]/2),p=s[5]===2?zre(c,(u+s[4])/2):fQe(s,Math.ceil((u+s[4])/4));return new pQe(s[0],s[1],s[2],s[3],f,p)},pQe=function(){function e(t,i,s,c,u,f){this.initialValue=t,this.errorValue=i,this.highStart=s,this.highValueIndex=c,this.index=u,this.data=f}return e.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>$1],i=(i<<d4)+(t&f4),this.data[i];if(t<=65535)return i=this.index[wde+(t-55296>>$1)],i=(i<<d4)+(t&f4),this.data[i];if(t<this.highStart)return i=lQe-uQe+(t>>QQ),i=this.index[i],i+=t>>$1&dQe,i=this.index[i],i=(i<<d4)+(t&f4),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),qre="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gQe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var MO=0;MO<qre.length;MO++)gQe[qre.charCodeAt(MO)]=MO;var mQe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Yre=50,vQe=1,Sde=2,bde=3,_Qe=4,yQe=5,Xre=7,Cde=8,Jre=9,Vv=10,N6=11,Zre=12,B6=13,EQe=14,hC=15,L6=16,FO=17,Mb=18,wQe=19,ene=20,P6=21,Fb=22,h4=23,lE=24,PA=25,pC=26,gC=27,uE=28,SQe=29,D1=30,bQe=31,VO=32,QO=33,k6=34,D6=35,x6=36,ET=37,U6=38,XN=39,JN=40,p4=41,Tde=42,CQe=43,TQe=[9001,65288],Rde="!",Ti="",HO="",M6=hQe(mQe),zg=[D1,x6],F6=[vQe,Sde,bde,yQe],Ide=[Vv,Cde],tne=[gC,pC],RQe=F6.concat(Ide),rne=[U6,XN,JN,k6,D6],IQe=[hC,B6],OQe=function(e,t){t===void 0&&(t="strict");var i=[],s=[],c=[];return e.forEach(function(u,f){var p=M6.get(u);if(p>Yre?(c.push(!0),p-=Yre):c.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return s.push(f),i.push(L6);if(p===_Qe||p===N6){if(f===0)return s.push(f),i.push(D1);var m=i[f-1];return RQe.indexOf(m)===-1?(s.push(s[f-1]),i.push(m)):(s.push(f),i.push(D1))}if(s.push(f),p===bQe)return i.push(t==="strict"?P6:ET);if(p===Tde||p===SQe)return i.push(D1);if(p===CQe)return u>=131072&&u<=196605||u>=196608&&u<=262141?i.push(ET):i.push(D1);i.push(p)}),[s,i,c]},g4=function(e,t,i,s){var c=s[i];if(Array.isArray(e)?e.indexOf(c)!==-1:e===c)for(var u=i;u<=s.length;){u++;var f=s[u];if(f===t)return!0;if(f!==Vv)break}if(c===Vv)for(var u=i;u>0;){u--;var p=s[u];if(Array.isArray(e)?e.indexOf(p)!==-1:e===p)for(var m=i;m<=s.length;){m++;var f=s[m];if(f===t)return!0;if(f!==Vv)break}if(p!==Vv)break}return!1},nne=function(e,t){for(var i=e;i>=0;){var s=t[i];if(s===Vv)i--;else return s}return 0},NQe=function(e,t,i,s,c){if(i[s]===0)return Ti;var u=s-1;if(Array.isArray(c)&&c[u]===!0)return Ti;var f=u-1,p=u+1,m=t[u],E=f>=0?t[f]:0,w=t[p];if(m===Sde&&w===bde)return Ti;if(F6.indexOf(m)!==-1)return Rde;if(F6.indexOf(w)!==-1||Ide.indexOf(w)!==-1)return Ti;if(nne(u,t)===Cde)return HO;if(M6.get(e[u])===N6||(m===VO||m===QO)&&M6.get(e[p])===N6||m===Xre||w===Xre||m===Jre||[Vv,B6,hC].indexOf(m)===-1&&w===Jre||[FO,Mb,wQe,lE,uE].indexOf(w)!==-1||nne(u,t)===Fb||g4(h4,Fb,u,t)||g4([FO,Mb],P6,u,t)||g4(Zre,Zre,u,t))return Ti;if(m===Vv)return HO;if(m===h4||w===h4)return Ti;if(w===L6||m===L6)return HO;if([B6,hC,P6].indexOf(w)!==-1||m===EQe||E===x6&&IQe.indexOf(m)!==-1||m===uE&&w===x6||w===ene||zg.indexOf(w)!==-1&&m===PA||zg.indexOf(m)!==-1&&w===PA||m===gC&&[ET,VO,QO].indexOf(w)!==-1||[ET,VO,QO].indexOf(m)!==-1&&w===pC||zg.indexOf(m)!==-1&&tne.indexOf(w)!==-1||tne.indexOf(m)!==-1&&zg.indexOf(w)!==-1||[gC,pC].indexOf(m)!==-1&&(w===PA||[Fb,hC].indexOf(w)!==-1&&t[p+1]===PA)||[Fb,hC].indexOf(m)!==-1&&w===PA||m===PA&&[PA,uE,lE].indexOf(w)!==-1)return Ti;if([PA,uE,lE,FO,Mb].indexOf(w)!==-1)for(var T=u;T>=0;){var N=t[T];if(N===PA)return Ti;if([uE,lE].indexOf(N)!==-1)T--;else break}if([gC,pC].indexOf(w)!==-1)for(var T=[FO,Mb].indexOf(m)!==-1?f:u;T>=0;){var N=t[T];if(N===PA)return Ti;if([uE,lE].indexOf(N)!==-1)T--;else break}if(U6===m&&[U6,XN,k6,D6].indexOf(w)!==-1||[XN,k6].indexOf(m)!==-1&&[XN,JN].indexOf(w)!==-1||[JN,D6].indexOf(m)!==-1&&w===JN||rne.indexOf(m)!==-1&&[ene,pC].indexOf(w)!==-1||rne.indexOf(w)!==-1&&m===gC||zg.indexOf(m)!==-1&&zg.indexOf(w)!==-1||m===lE&&zg.indexOf(w)!==-1||zg.concat(PA).indexOf(m)!==-1&&w===Fb&&TQe.indexOf(e[p])===-1||zg.concat(PA).indexOf(w)!==-1&&m===Mb)return Ti;if(m===p4&&w===p4){for(var O=i[u],P=1;O>0&&(O--,t[O]===p4);)P++;if(P%2!==0)return Ti}return m===VO&&w===QO?Ti:HO},BQe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var i=OQe(e,t.lineBreak),s=i[0],c=i[1],u=i[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(c=c.map(function(p){return[PA,D1,Tde].indexOf(p)!==-1?ET:p}));var f=t.wordBreak==="keep-all"?u.map(function(p,m){return p&&e[m]>=19968&&e[m]<=40959}):void 0;return[s,c,f]},LQe=function(){function e(t,i,s,c){this.codePoints=t,this.required=i===Rde,this.start=s,this.end=c}return e.prototype.slice=function(){return Sa.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),PQe=function(e,t){var i=rk(e),s=BQe(i,t),c=s[0],u=s[1],f=s[2],p=i.length,m=0,E=0;return{next:function(){if(E>=p)return{done:!0,value:null};for(var w=Ti;E<p&&(w=NQe(i,u,c,++E,f))===Ti;);if(w!==Ti||E===p){var T=new LQe(i,w,m,E);return m=E,{value:T,done:!1}}return{done:!0,value:null}}}},kQe=1,DQe=2,GT=4,ine=8,aL=10,one=47,DC=92,xQe=9,UQe=32,jO=34,Vb=61,MQe=35,FQe=36,VQe=37,KO=39,WO=40,Qb=41,QQe=95,Vu=45,HQe=33,jQe=60,KQe=62,WQe=64,GQe=91,$Qe=93,zQe=61,qQe=123,GO=63,YQe=125,sne=124,XQe=126,JQe=128,ane=65533,m4=42,j1=43,ZQe=44,eHe=58,tHe=59,wT=46,rHe=0,nHe=8,iHe=11,oHe=14,sHe=31,aHe=127,Dp=-1,Ode=48,Nde=97,Bde=101,cHe=102,lHe=117,uHe=122,Lde=65,Pde=69,kde=70,AHe=85,dHe=90,xl=function(e){return e>=Ode&&e<=57},fHe=function(e){return e>=55296&&e<=57343},AE=function(e){return xl(e)||e>=Lde&&e<=kde||e>=Nde&&e<=cHe},hHe=function(e){return e>=Nde&&e<=uHe},pHe=function(e){return e>=Lde&&e<=dHe},gHe=function(e){return hHe(e)||pHe(e)},mHe=function(e){return e>=JQe},$O=function(e){return e===aL||e===xQe||e===UQe},cL=function(e){return gHe(e)||mHe(e)||e===QQe},cne=function(e){return cL(e)||xl(e)||e===Vu},vHe=function(e){return e>=rHe&&e<=nHe||e===iHe||e>=oHe&&e<=sHe||e===aHe},kv=function(e,t){return e!==DC?!1:t!==aL},zO=function(e,t,i){return e===Vu?cL(t)||kv(t,i):cL(e)?!0:!!(e===DC&&kv(e,t))},v4=function(e,t,i){return e===j1||e===Vu?xl(t)?!0:t===wT&&xl(i):xl(e===wT?t:e)},_He=function(e){var t=0,i=1;(e[t]===j1||e[t]===Vu)&&(e[t]===Vu&&(i=-1),t++);for(var s=[];xl(e[t]);)s.push(e[t++]);var c=s.length?parseInt(Sa.apply(void 0,s),10):0;e[t]===wT&&t++;for(var u=[];xl(e[t]);)u.push(e[t++]);var f=u.length,p=f?parseInt(Sa.apply(void 0,u),10):0;(e[t]===Pde||e[t]===Bde)&&t++;var m=1;(e[t]===j1||e[t]===Vu)&&(e[t]===Vu&&(m=-1),t++);for(var E=[];xl(e[t]);)E.push(e[t++]);var w=E.length?parseInt(Sa.apply(void 0,E),10):0;return i*(c+p*Math.pow(10,-f))*Math.pow(10,m*w)},yHe={type:2},EHe={type:3},wHe={type:4},SHe={type:13},bHe={type:8},CHe={type:21},THe={type:9},RHe={type:10},IHe={type:11},OHe={type:12},NHe={type:14},qO={type:23},BHe={type:1},LHe={type:25},PHe={type:24},kHe={type:26},DHe={type:27},xHe={type:28},UHe={type:29},MHe={type:31},V6={type:32},Dde=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(rk(t))},e.prototype.read=function(){for(var t=[],i=this.consumeToken();i!==V6;)t.push(i),i=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case jO:return this.consumeStringToken(jO);case MQe:var i=this.peekCodePoint(0),s=this.peekCodePoint(1),c=this.peekCodePoint(2);if(cne(i)||kv(s,c)){var u=zO(i,s,c)?DQe:kQe,f=this.consumeName();return{type:5,value:f,flags:u}}break;case FQe:if(this.peekCodePoint(0)===Vb)return this.consumeCodePoint(),SHe;break;case KO:return this.consumeStringToken(KO);case WO:return yHe;case Qb:return EHe;case m4:if(this.peekCodePoint(0)===Vb)return this.consumeCodePoint(),NHe;break;case j1:if(v4(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case ZQe:return wHe;case Vu:var p=t,m=this.peekCodePoint(0),E=this.peekCodePoint(1);if(v4(p,m,E))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(zO(p,m,E))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(m===Vu&&E===KQe)return this.consumeCodePoint(),this.consumeCodePoint(),PHe;break;case wT:if(v4(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case one:if(this.peekCodePoint(0)===m4)for(this.consumeCodePoint();;){var w=this.consumeCodePoint();if(w===m4&&(w=this.consumeCodePoint(),w===one))return this.consumeToken();if(w===Dp)return this.consumeToken()}break;case eHe:return kHe;case tHe:return DHe;case jQe:if(this.peekCodePoint(0)===HQe&&this.peekCodePoint(1)===Vu&&this.peekCodePoint(2)===Vu)return this.consumeCodePoint(),this.consumeCodePoint(),LHe;break;case WQe:var T=this.peekCodePoint(0),N=this.peekCodePoint(1),O=this.peekCodePoint(2);if(zO(T,N,O)){var f=this.consumeName();return{type:7,value:f}}break;case GQe:return xHe;case DC:if(kv(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case $Qe:return UHe;case zQe:if(this.peekCodePoint(0)===Vb)return this.consumeCodePoint(),bHe;break;case qQe:return IHe;case YQe:return OHe;case lHe:case AHe:var P=this.peekCodePoint(0),M=this.peekCodePoint(1);return P===j1&&(AE(M)||M===GO)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case sne:if(this.peekCodePoint(0)===Vb)return this.consumeCodePoint(),THe;if(this.peekCodePoint(0)===sne)return this.consumeCodePoint(),CHe;break;case XQe:if(this.peekCodePoint(0)===Vb)return this.consumeCodePoint(),RHe;break;case Dp:return V6}return $O(t)?(this.consumeWhiteSpace(),MHe):xl(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):cL(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Sa(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],i=this.consumeCodePoint();AE(i)&&t.length<6;)t.push(i),i=this.consumeCodePoint();for(var s=!1;i===GO&&t.length<6;)t.push(i),i=this.consumeCodePoint(),s=!0;if(s){var c=parseInt(Sa.apply(void 0,t.map(function(m){return m===GO?Ode:m})),16),u=parseInt(Sa.apply(void 0,t.map(function(m){return m===GO?kde:m})),16);return{type:30,start:c,end:u}}var f=parseInt(Sa.apply(void 0,t),16);if(this.peekCodePoint(0)===Vu&&AE(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var p=[];AE(i)&&p.length<6;)p.push(i),i=this.consumeCodePoint();var u=parseInt(Sa.apply(void 0,p),16);return{type:30,start:f,end:u}}else return{type:30,start:f,end:f}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===WO?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===WO?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dp)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===KO||i===jO){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dp||this.peekCodePoint(0)===Qb)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),qO)}for(;;){var c=this.consumeCodePoint();if(c===Dp||c===Qb)return{type:22,value:Sa.apply(void 0,t)};if($O(c))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Dp||this.peekCodePoint(0)===Qb?(this.consumeCodePoint(),{type:22,value:Sa.apply(void 0,t)}):(this.consumeBadUrlRemnants(),qO);if(c===jO||c===KO||c===WO||vHe(c))return this.consumeBadUrlRemnants(),qO;if(c===DC)if(kv(c,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),qO;else t.push(c)}},e.prototype.consumeWhiteSpace=function(){for(;$O(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Qb||t===Dp)return;kv(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var i=5e4,s="";t>0;){var c=Math.min(i,t);s+=Sa.apply(void 0,this._value.splice(0,c)),t-=c}return this._value.shift(),s},e.prototype.consumeStringToken=function(t){var i="",s=0;do{var c=this._value[s];if(c===Dp||c===void 0||c===t)return i+=this.consumeStringSlice(s),{type:0,value:i};if(c===aL)return this._value.splice(0,s),BHe;if(c===DC){var u=this._value[s+1];u!==Dp&&u!==void 0&&(u===aL?(i+=this.consumeStringSlice(s),s=-1,this._value.shift()):kv(c,u)&&(i+=this.consumeStringSlice(s),i+=Sa(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},e.prototype.consumeNumber=function(){var t=[],i=GT,s=this.peekCodePoint(0);for((s===j1||s===Vu)&&t.push(this.consumeCodePoint());xl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0);var c=this.peekCodePoint(1);if(s===wT&&xl(c))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=ine;xl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0),c=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((s===Pde||s===Bde)&&((c===j1||c===Vu)&&xl(u)||xl(c)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=ine;xl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[_He(t),i]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),i=t[0],s=t[1],c=this.peekCodePoint(0),u=this.peekCodePoint(1),f=this.peekCodePoint(2);if(zO(c,u,f)){var p=this.consumeName();return{type:15,number:i,flags:s,unit:p}}return c===VQe?(this.consumeCodePoint(),{type:16,number:i,flags:s}):{type:17,number:i,flags:s}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(AE(t)){for(var i=Sa(t);AE(this.peekCodePoint(0))&&i.length<6;)i+=Sa(this.consumeCodePoint());$O(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(i,16);return s===0||fHe(s)||s>1114111?ane:s}return t===Dp?ane:t},e.prototype.consumeName=function(){for(var t="";;){var i=this.consumeCodePoint();if(cne(i))t+=Sa(i);else if(kv(i,this.peekCodePoint(0)))t+=Sa(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),t}},e}(),xde=function(){function e(t){this._tokens=t}return e.create=function(t){var i=new Dde;return i.write(t),new e(i.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var i=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var i=this.consumeComponentValue();if(i.type===32)return t;t.push(i),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var i={type:t,values:[]},s=this.consumeToken();;){if(s.type===32||VHe(s,t))return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue()),s=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var i={name:t.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?V6:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),$T=function(e){return e.type===15},Uw=function(e){return e.type===17},No=function(e){return e.type===20},FHe=function(e){return e.type===0},Q6=function(e,t){return No(e)&&e.value===t},Ude=function(e){return e.type!==31},ww=function(e){return e.type!==31&&e.type!==4},eg=function(e){var t=[],i=[];return e.forEach(function(s){if(s.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(i),i=[];return}s.type!==31&&i.push(s)}),i.length&&t.push(i),t},VHe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},u0=function(e){return e.type===17||e.type===15},Ha=function(e){return e.type===16||u0(e)},Mde=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},sl={type:17,number:0,flags:GT},HQ={type:16,number:50,flags:GT},Qv={type:16,number:100,flags:GT},mC=function(e,t,i){var s=e[0],c=e[1];return[Xo(s,t),Xo(typeof c<"u"?c:s,i)]},Xo=function(e,t){if(e.type===16)return e.number/100*t;if($T(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Fde="deg",Vde="grad",Qde="rad",Hde="turn",nk={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Fde:return Math.PI*t.number/180;case Vde:return Math.PI/200*t.number;case Qde:return t.number;case Hde:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},jde=function(e){return e.type===15&&(e.unit===Fde||e.unit===Vde||e.unit===Qde||e.unit===Hde)},Kde=function(e){var t=e.filter(No).map(function(i){return i.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[sl,sl];case"to top":case"bottom":return Gd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[sl,Qv];case"to right":case"left":return Gd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Qv,Qv];case"to bottom":case"top":return Gd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Qv,sl];case"to left":case"right":return Gd(270)}return 0},Gd=function(e){return Math.PI*e/180},t0={name:"color",parse:function(e,t){if(t.type===18){var i=QHe[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return i(e,t.values)}if(t.type===5){if(t.value.length===3){var s=t.value.substring(0,1),c=t.value.substring(1,2),u=t.value.substring(2,3);return Hv(parseInt(s+s,16),parseInt(c+c,16),parseInt(u+u,16),1)}if(t.value.length===4){var s=t.value.substring(0,1),c=t.value.substring(1,2),u=t.value.substring(2,3),f=t.value.substring(3,4);return Hv(parseInt(s+s,16),parseInt(c+c,16),parseInt(u+u,16),parseInt(f+f,16)/255)}if(t.value.length===6){var s=t.value.substring(0,2),c=t.value.substring(2,4),u=t.value.substring(4,6);return Hv(parseInt(s,16),parseInt(c,16),parseInt(u,16),1)}if(t.value.length===8){var s=t.value.substring(0,2),c=t.value.substring(2,4),u=t.value.substring(4,6),f=t.value.substring(6,8);return Hv(parseInt(s,16),parseInt(c,16),parseInt(u,16),parseInt(f,16)/255)}}if(t.type===20){var p=im[t.value.toUpperCase()];if(typeof p<"u")return p}return im.TRANSPARENT}},r0=function(e){return(255&e)===0},Ic=function(e){var t=255&e,i=255&e>>8,s=255&e>>16,c=255&e>>24;return t<255?"rgba("+c+","+s+","+i+","+t/255+")":"rgb("+c+","+s+","+i+")"},Hv=function(e,t,i,s){return(e<<24|t<<16|i<<8|Math.round(s*255)<<0)>>>0},lne=function(e,t){if(e.type===17)return e.number;if(e.type===16){var i=t===3?1:255;return t===3?e.number/100*i:Math.round(e.number/100*i)}return 0},une=function(e,t){var i=t.filter(ww);if(i.length===3){var s=i.map(lne),c=s[0],u=s[1],f=s[2];return Hv(c,u,f,1)}if(i.length===4){var p=i.map(lne),c=p[0],u=p[1],f=p[2],m=p[3];return Hv(c,u,f,m)}return 0};function _4(e,t,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(t-e)*i*6+e:i<1/2?t:i<2/3?(t-e)*6*(2/3-i)+e:e}var Ane=function(e,t){var i=t.filter(ww),s=i[0],c=i[1],u=i[2],f=i[3],p=(s.type===17?Gd(s.number):nk.parse(e,s))/(Math.PI*2),m=Ha(c)?c.number/100:0,E=Ha(u)?u.number/100:0,w=typeof f<"u"&&Ha(f)?Xo(f,1):1;if(m===0)return Hv(E*255,E*255,E*255,1);var T=E<=.5?E*(m+1):E+m-E*m,N=E*2-T,O=_4(N,T,p+1/3),P=_4(N,T,p),M=_4(N,T,p-1/3);return Hv(O*255,P*255,M*255,w)},QHe={hsl:Ane,hsla:Ane,rgb:une,rgba:une},xC=function(e,t){return t0.parse(e,xde.create(t).parseComponentValue())},im={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},HHe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(i){if(No(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},jHe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ik=function(e,t){var i=t0.parse(e,t[0]),s=t[1];return s&&Ha(s)?{color:i,stop:s}:{color:i,stop:null}},dne=function(e,t){var i=e[0],s=e[e.length-1];i.stop===null&&(i.stop=sl),s.stop===null&&(s.stop=Qv);for(var c=[],u=0,f=0;f<e.length;f++){var p=e[f].stop;if(p!==null){var m=Xo(p,t);m>u?c.push(m):c.push(u),u=m}else c.push(null)}for(var E=null,f=0;f<c.length;f++){var w=c[f];if(w===null)E===null&&(E=f);else if(E!==null){for(var T=f-E,N=c[E-1],O=(w-N)/(T+1),P=1;P<=T;P++)c[E+P-1]=O*P;E=null}}return e.map(function(M,Q){var k=M.color;return{color:k,stop:Math.max(Math.min(1,c[Q]/t),0)}})},KHe=function(e,t,i){var s=t/2,c=i/2,u=Xo(e[0],t)-s,f=c-Xo(e[1],i);return(Math.atan2(f,u)+Math.PI*2)%(Math.PI*2)},WHe=function(e,t,i){var s=typeof e=="number"?e:KHe(e,t,i),c=Math.abs(t*Math.sin(s))+Math.abs(i*Math.cos(s)),u=t/2,f=i/2,p=c/2,m=Math.sin(s-Math.PI/2)*p,E=Math.cos(s-Math.PI/2)*p;return[c,u-E,u+E,f-m,f+m]},sh=function(e,t){return Math.sqrt(e*e+t*t)},fne=function(e,t,i,s,c){var u=[[0,0],[0,t],[e,0],[e,t]];return u.reduce(function(f,p){var m=p[0],E=p[1],w=sh(i-m,s-E);return(c?w<f.optimumDistance:w>f.optimumDistance)?{optimumCorner:p,optimumDistance:w}:f},{optimumDistance:c?1/0:-1/0,optimumCorner:null}).optimumCorner},GHe=function(e,t,i,s,c){var u=0,f=0;switch(e.size){case 0:e.shape===0?u=f=Math.min(Math.abs(t),Math.abs(t-s),Math.abs(i),Math.abs(i-c)):e.shape===1&&(u=Math.min(Math.abs(t),Math.abs(t-s)),f=Math.min(Math.abs(i),Math.abs(i-c)));break;case 2:if(e.shape===0)u=f=Math.min(sh(t,i),sh(t,i-c),sh(t-s,i),sh(t-s,i-c));else if(e.shape===1){var p=Math.min(Math.abs(i),Math.abs(i-c))/Math.min(Math.abs(t),Math.abs(t-s)),m=fne(s,c,t,i,!0),E=m[0],w=m[1];u=sh(E-t,(w-i)/p),f=p*u}break;case 1:e.shape===0?u=f=Math.max(Math.abs(t),Math.abs(t-s),Math.abs(i),Math.abs(i-c)):e.shape===1&&(u=Math.max(Math.abs(t),Math.abs(t-s)),f=Math.max(Math.abs(i),Math.abs(i-c)));break;case 3:if(e.shape===0)u=f=Math.max(sh(t,i),sh(t,i-c),sh(t-s,i),sh(t-s,i-c));else if(e.shape===1){var p=Math.max(Math.abs(i),Math.abs(i-c))/Math.max(Math.abs(t),Math.abs(t-s)),T=fne(s,c,t,i,!1),E=T[0],w=T[1];u=sh(E-t,(w-i)/p),f=p*u}break}return Array.isArray(e.size)&&(u=Xo(e.size[0],s),f=e.size.length===2?Xo(e.size[1],c):u),[u,f]},$He=function(e,t){var i=Gd(180),s=[];return eg(t).forEach(function(c,u){if(u===0){var f=c[0];if(f.type===20&&f.value==="to"){i=Kde(c);return}else if(jde(f)){i=nk.parse(e,f);return}}var p=ik(e,c);s.push(p)}),{angle:i,stops:s,type:1}},YO=function(e,t){var i=Gd(180),s=[];return eg(t).forEach(function(c,u){if(u===0){var f=c[0];if(f.type===20&&["top","left","right","bottom"].indexOf(f.value)!==-1){i=Kde(c);return}else if(jde(f)){i=(nk.parse(e,f)+Gd(270))%Gd(360);return}}var p=ik(e,c);s.push(p)}),{angle:i,stops:s,type:1}},zHe=function(e,t){var i=Gd(180),s=[],c=1,u=0,f=3,p=[];return eg(t).forEach(function(m,E){var w=m[0];if(E===0){if(No(w)&&w.value==="linear"){c=1;return}else if(No(w)&&w.value==="radial"){c=2;return}}if(w.type===18){if(w.name==="from"){var T=t0.parse(e,w.values[0]);s.push({stop:sl,color:T})}else if(w.name==="to"){var T=t0.parse(e,w.values[0]);s.push({stop:Qv,color:T})}else if(w.name==="color-stop"){var N=w.values.filter(ww);if(N.length===2){var T=t0.parse(e,N[1]),O=N[0];Uw(O)&&s.push({stop:{type:16,number:O.number*100,flags:O.flags},color:T})}}}}),c===1?{angle:(i+Gd(180))%Gd(360),stops:s,type:c}:{size:f,shape:u,stops:s,position:p,type:c}},Wde="closest-side",Gde="farthest-side",$de="closest-corner",zde="farthest-corner",qde="circle",Yde="ellipse",Xde="cover",Jde="contain",qHe=function(e,t){var i=0,s=3,c=[],u=[];return eg(t).forEach(function(f,p){var m=!0;if(p===0){var E=!1;m=f.reduce(function(T,N){if(E)if(No(N))switch(N.value){case"center":return u.push(HQ),T;case"top":case"left":return u.push(sl),T;case"right":case"bottom":return u.push(Qv),T}else(Ha(N)||u0(N))&&u.push(N);else if(No(N))switch(N.value){case qde:return i=0,!1;case Yde:return i=1,!1;case"at":return E=!0,!1;case Wde:return s=0,!1;case Xde:case Gde:return s=1,!1;case Jde:case $de:return s=2,!1;case zde:return s=3,!1}else if(u0(N)||Ha(N))return Array.isArray(s)||(s=[]),s.push(N),!1;return T},m)}if(m){var w=ik(e,f);c.push(w)}}),{size:s,shape:i,stops:c,position:u,type:2}},XO=function(e,t){var i=0,s=3,c=[],u=[];return eg(t).forEach(function(f,p){var m=!0;if(p===0?m=f.reduce(function(w,T){if(No(T))switch(T.value){case"center":return u.push(HQ),!1;case"top":case"left":return u.push(sl),!1;case"right":case"bottom":return u.push(Qv),!1}else if(Ha(T)||u0(T))return u.push(T),!1;return w},m):p===1&&(m=f.reduce(function(w,T){if(No(T))switch(T.value){case qde:return i=0,!1;case Yde:return i=1,!1;case Jde:case Wde:return s=0,!1;case Gde:return s=1,!1;case $de:return s=2,!1;case Xde:case zde:return s=3,!1}else if(u0(T)||Ha(T))return Array.isArray(s)||(s=[]),s.push(T),!1;return w},m)),m){var E=ik(e,f);c.push(E)}}),{size:s,shape:i,stops:c,position:u,type:2}},YHe=function(e){return e.type===1},XHe=function(e){return e.type===2},jQ={name:"image",parse:function(e,t){if(t.type===22){var i={url:t.value,type:0};return e.cache.addImage(t.value),i}if(t.type===18){var s=Zde[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return s(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function JHe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Zde[e.name])}var Zde={"linear-gradient":$He,"-moz-linear-gradient":YO,"-ms-linear-gradient":YO,"-o-linear-gradient":YO,"-webkit-linear-gradient":YO,"radial-gradient":qHe,"-moz-radial-gradient":XO,"-ms-radial-gradient":XO,"-o-radial-gradient":XO,"-webkit-radial-gradient":XO,"-webkit-gradient":zHe},ZHe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t.filter(function(s){return ww(s)&&JHe(s)}).map(function(s){return jQ.parse(e,s)})}},eje={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(i){if(No(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tje={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return eg(t).map(function(i){return i.filter(Ha)}).map(Mde)}},rje={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return eg(t).map(function(i){return i.filter(No).map(function(s){return s.value}).join(" ")}).map(nje)}},nje=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},nw;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(nw||(nw={}));var ije={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return eg(t).map(function(i){return i.filter(oje)})}},oje=function(e){return No(e)||Ha(e)},ok=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},sje=ok("top"),aje=ok("right"),cje=ok("bottom"),lje=ok("left"),sk=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,i){return Mde(i.filter(Ha))}}},uje=sk("top-left"),Aje=sk("top-right"),dje=sk("bottom-right"),fje=sk("bottom-left"),ak=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},hje=ak("top"),pje=ak("right"),gje=ak("bottom"),mje=ak("left"),ck=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,i){return $T(i)?i.number:0}}},vje=ck("top"),_je=ck("right"),yje=ck("bottom"),Eje=ck("left"),wje={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Sje={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},bje={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(No).reduce(function(i,s){return i|Cje(s.value)},0)}},Cje=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Tje={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Rje={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},lL;(function(e){e.NORMAL="normal",e.STRICT="strict"})(lL||(lL={}));var Ije={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return lL.STRICT;case"normal":default:return lL.NORMAL}}},Oje={name:"line-height",initialValue:"normal",prefix:!1,type:4},hne=function(e,t){return No(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ha(e)?Xo(e,t):t},Nje={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:jQ.parse(e,t)}},Bje={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},H6={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},lk=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Lje=lk("top"),Pje=lk("right"),kje=lk("bottom"),Dje=lk("left"),xje={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(No).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Uje={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},uk=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Mje=uk("top"),Fje=uk("right"),Vje=uk("bottom"),Qje=uk("left"),Hje={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},jje={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Kje={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Q6(t[0],"none")?[]:eg(t).map(function(i){for(var s={color:im.TRANSPARENT,offsetX:sl,offsetY:sl,blur:sl},c=0,u=0;u<i.length;u++){var f=i[u];u0(f)?(c===0?s.offsetX=f:c===1?s.offsetY=f:s.blur=f,c++):s.color=t0.parse(e,f)}return s})}},Wje={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gje={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var i=qje[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return i(t.values)}return null}},$je=function(e){var t=e.filter(function(i){return i.type===17}).map(function(i){return i.number});return t.length===6?t:null},zje=function(e){var t=e.filter(function(m){return m.type===17}).map(function(m){return m.number}),i=t[0],s=t[1];t[2],t[3];var c=t[4],u=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var f=t[12],p=t[13];return t[14],t[15],t.length===16?[i,s,c,u,f,p]:null},qje={matrix:$je,matrix3d:zje},pne={type:16,number:50,flags:GT},Yje=[pne,pne],Xje={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var i=t.filter(Ha);return i.length!==2?Yje:[i[0],i[1]]}},Jje={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},UC;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(UC||(UC={}));var Zje={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return UC.BREAK_ALL;case"keep-all":return UC.KEEP_ALL;case"normal":default:return UC.NORMAL}}},e7e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Uw(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},efe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},t7e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Uw(t)?t.number:1}},r7e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},n7e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(No).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},i7e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var i=[],s=[];return t.forEach(function(c){switch(c.type){case 20:case 0:i.push(c.value);break;case 17:i.push(c.number.toString());break;case 4:s.push(i.join(" ")),i.length=0;break}}),i.length&&s.push(i.join(" ")),s.map(function(c){return c.indexOf(" ")===-1?c:"'"+c+"'"})}},o7e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},s7e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Uw(t))return t.number;if(No(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},a7e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(No).map(function(i){return i.value})}},c7e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},cc=function(e,t){return(e&t)!==0},l7e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t}},u7e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;for(var s=[],c=t.filter(Ude),u=0;u<c.length;u++){var f=c[u],p=c[u+1];if(f.type===20){var m=p&&Uw(p)?p.number:1;s.push({counter:f.value,increment:m})}}return s}},A7e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var i=[],s=t.filter(Ude),c=0;c<s.length;c++){var u=s[c],f=s[c+1];if(No(u)&&u.value!=="none"){var p=f&&Uw(f)?f.number:0;i.push({counter:u.value,reset:p})}}return i}},d7e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter($T).map(function(i){return efe.parse(e,i)})}},f7e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;var s=[],c=t.filter(FHe);if(c.length%2!==0)return null;for(var u=0;u<c.length;u+=2){var f=c[u].value,p=c[u+1].value;s.push({open:f,close:p})}return s}},gne=function(e,t,i){if(!e)return"";var s=e[Math.min(t,e.length-1)];return s?i?s.open:s.close:""},h7e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Q6(t[0],"none")?[]:eg(t).map(function(i){for(var s={color:255,offsetX:sl,offsetY:sl,blur:sl,spread:sl,inset:!1},c=0,u=0;u<i.length;u++){var f=i[u];Q6(f,"inset")?s.inset=!0:u0(f)?(c===0?s.offsetX=f:c===1?s.offsetY=f:c===2?s.blur=f:s.spread=f,c++):s.color=t0.parse(e,f)}return s})}},p7e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var i=[0,1,2],s=[];return t.filter(No).forEach(function(c){switch(c.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),i.forEach(function(c){s.indexOf(c)===-1&&s.push(c)}),s}},g7e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},m7e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return $T(t)?t.number:0}},v7e=function(){function e(t,i){var s,c;this.animationDuration=Kr(t,d7e,i.animationDuration),this.backgroundClip=Kr(t,HHe,i.backgroundClip),this.backgroundColor=Kr(t,jHe,i.backgroundColor),this.backgroundImage=Kr(t,ZHe,i.backgroundImage),this.backgroundOrigin=Kr(t,eje,i.backgroundOrigin),this.backgroundPosition=Kr(t,tje,i.backgroundPosition),this.backgroundRepeat=Kr(t,rje,i.backgroundRepeat),this.backgroundSize=Kr(t,ije,i.backgroundSize),this.borderTopColor=Kr(t,sje,i.borderTopColor),this.borderRightColor=Kr(t,aje,i.borderRightColor),this.borderBottomColor=Kr(t,cje,i.borderBottomColor),this.borderLeftColor=Kr(t,lje,i.borderLeftColor),this.borderTopLeftRadius=Kr(t,uje,i.borderTopLeftRadius),this.borderTopRightRadius=Kr(t,Aje,i.borderTopRightRadius),this.borderBottomRightRadius=Kr(t,dje,i.borderBottomRightRadius),this.borderBottomLeftRadius=Kr(t,fje,i.borderBottomLeftRadius),this.borderTopStyle=Kr(t,hje,i.borderTopStyle),this.borderRightStyle=Kr(t,pje,i.borderRightStyle),this.borderBottomStyle=Kr(t,gje,i.borderBottomStyle),this.borderLeftStyle=Kr(t,mje,i.borderLeftStyle),this.borderTopWidth=Kr(t,vje,i.borderTopWidth),this.borderRightWidth=Kr(t,_je,i.borderRightWidth),this.borderBottomWidth=Kr(t,yje,i.borderBottomWidth),this.borderLeftWidth=Kr(t,Eje,i.borderLeftWidth),this.boxShadow=Kr(t,h7e,i.boxShadow),this.color=Kr(t,wje,i.color),this.direction=Kr(t,Sje,i.direction),this.display=Kr(t,bje,i.display),this.float=Kr(t,Tje,i.cssFloat),this.fontFamily=Kr(t,i7e,i.fontFamily),this.fontSize=Kr(t,o7e,i.fontSize),this.fontStyle=Kr(t,c7e,i.fontStyle),this.fontVariant=Kr(t,a7e,i.fontVariant),this.fontWeight=Kr(t,s7e,i.fontWeight),this.letterSpacing=Kr(t,Rje,i.letterSpacing),this.lineBreak=Kr(t,Ije,i.lineBreak),this.lineHeight=Kr(t,Oje,i.lineHeight),this.listStyleImage=Kr(t,Nje,i.listStyleImage),this.listStylePosition=Kr(t,Bje,i.listStylePosition),this.listStyleType=Kr(t,H6,i.listStyleType),this.marginTop=Kr(t,Lje,i.marginTop),this.marginRight=Kr(t,Pje,i.marginRight),this.marginBottom=Kr(t,kje,i.marginBottom),this.marginLeft=Kr(t,Dje,i.marginLeft),this.opacity=Kr(t,t7e,i.opacity);var u=Kr(t,xje,i.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=Kr(t,Uje,i.overflowWrap),this.paddingTop=Kr(t,Mje,i.paddingTop),this.paddingRight=Kr(t,Fje,i.paddingRight),this.paddingBottom=Kr(t,Vje,i.paddingBottom),this.paddingLeft=Kr(t,Qje,i.paddingLeft),this.paintOrder=Kr(t,p7e,i.paintOrder),this.position=Kr(t,jje,i.position),this.textAlign=Kr(t,Hje,i.textAlign),this.textDecorationColor=Kr(t,r7e,(s=i.textDecorationColor)!==null&&s!==void 0?s:i.color),this.textDecorationLine=Kr(t,n7e,(c=i.textDecorationLine)!==null&&c!==void 0?c:i.textDecoration),this.textShadow=Kr(t,Kje,i.textShadow),this.textTransform=Kr(t,Wje,i.textTransform),this.transform=Kr(t,Gje,i.transform),this.transformOrigin=Kr(t,Xje,i.transformOrigin),this.visibility=Kr(t,Jje,i.visibility),this.webkitTextStrokeColor=Kr(t,g7e,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Kr(t,m7e,i.webkitTextStrokeWidth),this.wordBreak=Kr(t,Zje,i.wordBreak),this.zIndex=Kr(t,e7e,i.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return r0(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return cc(this.display,4)||cc(this.display,33554432)||cc(this.display,268435456)||cc(this.display,536870912)||cc(this.display,67108864)||cc(this.display,134217728)},e}(),_7e=function(){function e(t,i){this.content=Kr(t,l7e,i.content),this.quotes=Kr(t,f7e,i.quotes)}return e}(),mne=function(){function e(t,i){this.counterIncrement=Kr(t,u7e,i.counterIncrement),this.counterReset=Kr(t,A7e,i.counterReset)}return e}(),Kr=function(e,t,i){var s=new Dde,c=i!==null&&typeof i<"u"?i.toString():t.initialValue;s.write(c);var u=new xde(s.read());switch(t.type){case 2:var f=u.parseComponentValue();return t.parse(e,No(f)?f.value:t.initialValue);case 0:return t.parse(e,u.parseComponentValue());case 1:return t.parse(e,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(t.format){case"angle":return nk.parse(e,u.parseComponentValue());case"color":return t0.parse(e,u.parseComponentValue());case"image":return jQ.parse(e,u.parseComponentValue());case"length":var p=u.parseComponentValue();return u0(p)?p:sl;case"length-percentage":var m=u.parseComponentValue();return Ha(m)?m:sl;case"time":return efe.parse(e,u.parseComponentValue())}break}},y7e="data-html2canvas-debug",E7e=function(e){var t=e.getAttribute(y7e);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},j6=function(e,t){var i=E7e(e);return i===1||t===i},tg=function(){function e(t,i){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,j6(i,3))debugger;this.styles=new v7e(t,window.getComputedStyle(i,null)),G6(i)&&(this.styles.animationDuration.some(function(s){return s>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=tk(this.context,i),j6(i,4)&&(this.flags|=16)}return e}(),w7e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var JO=0;JO<vne.length;JO++)vC[vne.charCodeAt(JO)]=JO;var S7e=function(e){var t=e.length*.75,i=e.length,s,c=0,u,f,p,m;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),w=Array.isArray(E)?E:new Uint8Array(E);for(s=0;s<i;s+=4)u=vC[e.charCodeAt(s)],f=vC[e.charCodeAt(s+1)],p=vC[e.charCodeAt(s+2)],m=vC[e.charCodeAt(s+3)],w[c++]=u<<2|f>>4,w[c++]=(f&15)<<4|p>>2,w[c++]=(p&3)<<6|m&63;return E},b7e=function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i.push(e[s+1]<<8|e[s]);return i},C7e=function(e){for(var t=e.length,i=[],s=0;s<t;s+=4)i.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return i},z1=5,KQ=6+5,y4=2,T7e=KQ-z1,tfe=65536>>z1,R7e=1<<z1,E4=R7e-1,I7e=1024>>z1,O7e=tfe+I7e,N7e=O7e,B7e=32,L7e=N7e+B7e,P7e=65536>>KQ,k7e=1<<T7e,D7e=k7e-1,_ne=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},x7e=function(e,t,i){return e.slice?e.slice(t,i):new Uint32Array(Array.prototype.slice.call(e,t,i))},U7e=function(e,t){var i=S7e(e),s=Array.isArray(i)?C7e(i):new Uint32Array(i),c=Array.isArray(i)?b7e(i):new Uint16Array(i),u=24,f=_ne(c,u/2,s[4]/2),p=s[5]===2?_ne(c,(u+s[4])/2):x7e(s,Math.ceil((u+s[4])/4));return new M7e(s[0],s[1],s[2],s[3],f,p)},M7e=function(){function e(t,i,s,c,u,f){this.initialValue=t,this.errorValue=i,this.highStart=s,this.highValueIndex=c,this.index=u,this.data=f}return e.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>z1],i=(i<<y4)+(t&E4),this.data[i];if(t<=65535)return i=this.index[tfe+(t-55296>>z1)],i=(i<<y4)+(t&E4),this.data[i];if(t<this.highStart)return i=L7e-P7e+(t>>KQ),i=this.index[i],i+=t>>z1&D7e,i=this.index[i],i=(i<<y4)+(t&E4),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),yne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F7e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ZO=0;ZO<yne.length;ZO++)F7e[yne.charCodeAt(ZO)]=ZO;var V7e=1,w4=2,S4=3,Ene=4,wne=5,Q7e=7,Sne=8,b4=9,C4=10,bne=11,Cne=12,Tne=13,Rne=14,T4=15,H7e=function(e){for(var t=[],i=0,s=e.length;i<s;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<s){var u=e.charCodeAt(i++);(u&64512)===56320?t.push(((c&1023)<<10)+(u&1023)+65536):(t.push(c),i--)}else t.push(c)}return t},j7e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var s=[],c=-1,u="";++c<i;){var f=e[c];f<=65535?s.push(f):(f-=65536,s.push((f>>10)+55296,f%1024+56320)),(c+1===i||s.length>16384)&&(u+=String.fromCharCode.apply(String,s),s.length=0)}return u},K7e=U7e(w7e),xd="",R4="",W7e=function(e){return K7e.get(e)},G7e=function(e,t,i){var s=i-2,c=t[s],u=t[i-1],f=t[i];if(u===w4&&f===S4)return xd;if(u===w4||u===S4||u===Ene||f===w4||f===S4||f===Ene)return R4;if(u===Sne&&[Sne,b4,bne,Cne].indexOf(f)!==-1||(u===bne||u===b4)&&(f===b4||f===C4)||(u===Cne||u===C4)&&f===C4||f===Tne||f===wne||f===Q7e||u===V7e)return xd;if(u===Tne&&f===Rne){for(;c===wne;)c=t[--s];if(c===Rne)return xd}if(u===T4&&f===T4){for(var p=0;c===T4;)p++,c=t[--s];if(p%2===0)return xd}return R4},$7e=function(e){var t=H7e(e),i=t.length,s=0,c=0,u=t.map(W7e);return{next:function(){if(s>=i)return{done:!0,value:null};for(var f=xd;s<i&&(f=G7e(t,u,++s))===xd;);if(f!==xd||s===i){var p=j7e.apply(null,t.slice(c,s));return c=s,{value:p,done:!1}}return{done:!0,value:null}}}},z7e=function(e){for(var t=$7e(e),i=[],s;!(s=t.next()).done;)s.value&&i.push(s.value.slice());return i},q7e=function(e){var t=123;if(e.createRange){var i=e.createRange();if(i.getBoundingClientRect){var s=e.createElement("boundtest");s.style.height=t+"px",s.style.display="block",e.body.appendChild(s),i.selectNode(s);var c=i.getBoundingClientRect(),u=Math.round(c.height);if(e.body.removeChild(s),u===t)return!0}}return!1},Y7e=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var i=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=t.firstChild,c=rk(s.data).map(function(m){return Sa(m)}),u=0,f={},p=c.every(function(m,E){i.setStart(s,u),i.setEnd(s,u+m.length);var w=i.getBoundingClientRect();u+=m.length;var T=w.x>f.x||w.y>f.y;return f=w,E===0?!0:T});return e.body.removeChild(t),p},X7e=function(){return typeof new Image().crossOrigin<"u"},J7e=function(){return typeof new XMLHttpRequest().responseType=="string"},Z7e=function(e){var t=new Image,i=e.createElement("canvas"),s=i.getContext("2d");if(!s)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(t,0,0),i.toDataURL()}catch{return!1}return!0},Ine=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},e9e=function(e){var t=e.createElement("canvas"),i=100;t.width=i,t.height=i;var s=t.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,i,i);var c=new Image,u=t.toDataURL();c.src=u;var f=K6(i,i,0,0,c);return s.fillStyle="red",s.fillRect(0,0,i,i),One(f).then(function(p){s.drawImage(p,0,0);var m=s.getImageData(0,0,i,i).data;s.fillStyle="red",s.fillRect(0,0,i,i);var E=e.createElement("div");return E.style.backgroundImage="url("+u+")",E.style.height=i+"px",Ine(m)?One(K6(i,i,0,0,E)):Promise.reject(!1)}).then(function(p){return s.drawImage(p,0,0),Ine(s.getImageData(0,0,i,i).data)}).catch(function(){return!1})},K6=function(e,t,i,s,c){var u="http://www.w3.org/2000/svg",f=document.createElementNS(u,"svg"),p=document.createElementNS(u,"foreignObject");return f.setAttributeNS(null,"width",e.toString()),f.setAttributeNS(null,"height",t.toString()),p.setAttributeNS(null,"width","100%"),p.setAttributeNS(null,"height","100%"),p.setAttributeNS(null,"x",i.toString()),p.setAttributeNS(null,"y",s.toString()),p.setAttributeNS(null,"externalResourcesRequired","true"),f.appendChild(p),p.appendChild(c),f},One=function(e){return new Promise(function(t,i){var s=new Image;s.onload=function(){return t(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},il={get SUPPORT_RANGE_BOUNDS(){var e=q7e(document);return Object.defineProperty(il,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=il.SUPPORT_RANGE_BOUNDS&&Y7e(document);return Object.defineProperty(il,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Z7e(document);return Object.defineProperty(il,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?e9e(document):Promise.resolve(!1);return Object.defineProperty(il,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=X7e();return Object.defineProperty(il,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=J7e();return Object.defineProperty(il,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(il,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(il,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},MC=function(){function e(t,i){this.text=t,this.bounds=i}return e}(),t9e=function(e,t,i,s){var c=i9e(t,i),u=[],f=0;return c.forEach(function(p){if(i.textDecorationLine.length||p.trim().length>0)if(il.SUPPORT_RANGE_BOUNDS){var m=Nne(s,f,p.length).getClientRects();if(m.length>1){var E=WQ(p),w=0;E.forEach(function(N){u.push(new MC(N,hm.fromDOMRectList(e,Nne(s,w+f,N.length).getClientRects()))),w+=N.length})}else u.push(new MC(p,hm.fromDOMRectList(e,m)))}else{var T=s.splitText(p.length);u.push(new MC(p,r9e(e,s))),s=T}else il.SUPPORT_RANGE_BOUNDS||(s=s.splitText(p.length));f+=p.length}),u},r9e=function(e,t){var i=t.ownerDocument;if(i){var s=i.createElement("html2canvaswrapper");s.appendChild(t.cloneNode(!0));var c=t.parentNode;if(c){c.replaceChild(s,t);var u=tk(e,s);return s.firstChild&&c.replaceChild(s.firstChild,s),u}}return hm.EMPTY},Nne=function(e,t,i){var s=e.ownerDocument;if(!s)throw new Error("Node has no owner document");var c=s.createRange();return c.setStart(e,t),c.setEnd(e,t+i),c},WQ=function(e){if(il.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(i){return i.segment})}return z7e(e)},n9e=function(e,t){if(il.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map(function(s){return s.segment})}return s9e(e,t)},i9e=function(e,t){return t.letterSpacing!==0?WQ(e):n9e(e,t)},o9e=[32,160,4961,65792,65793,4153,4241],s9e=function(e,t){for(var i=PQe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),s=[],c,u=function(){if(c.value){var f=c.value.slice(),p=rk(f),m="";p.forEach(function(E){o9e.indexOf(E)===-1?m+=Sa(E):(m.length&&s.push(m),s.push(Sa(E)),m="")}),m.length&&s.push(m)}};!(c=i.next()).done;)u();return s},a9e=function(){function e(t,i,s){this.text=c9e(i.data,s.textTransform),this.textBounds=t9e(t,this.text,s,i)}return e}(),c9e=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(l9e,u9e);case 2:return e.toUpperCase();default:return e}},l9e=/(^|\s|:|-|\(|\))([a-z])/g,u9e=function(e,t,i){return e.length>0?t+i.toUpperCase():e},rfe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;return c.src=s.currentSrc||s.src,c.intrinsicWidth=s.naturalWidth,c.intrinsicHeight=s.naturalHeight,c.context.cache.addImage(c.src),c}return t}(tg),nfe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;return c.canvas=s,c.intrinsicWidth=s.width,c.intrinsicHeight=s.height,c}return t}(tg),ife=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this,u=new XMLSerializer,f=tk(i,s);return s.setAttribute("width",f.width+"px"),s.setAttribute("height",f.height+"px"),c.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(s)),c.intrinsicWidth=s.width.baseVal.value,c.intrinsicHeight=s.height.baseVal.value,c.context.cache.addImage(c.svg),c}return t}(tg),ofe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;return c.value=s.value,c}return t}(tg),W6=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;return c.start=s.start,c.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,c}return t}(tg),A9e=[{type:15,flags:0,unit:"px",number:3}],d9e=[{type:16,flags:0,number:50}],f9e=function(e){return e.width>e.height?new hm(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new hm(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},h9e=function(e){var t=e.type===p9e?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},uL="checkbox",AL="radio",p9e="password",Bne=707406591,GQ=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;switch(c.type=s.type.toLowerCase(),c.checked=s.checked,c.value=h9e(s),(c.type===uL||c.type===AL)&&(c.styles.backgroundColor=3739148031,c.styles.borderTopColor=c.styles.borderRightColor=c.styles.borderBottomColor=c.styles.borderLeftColor=2779096575,c.styles.borderTopWidth=c.styles.borderRightWidth=c.styles.borderBottomWidth=c.styles.borderLeftWidth=1,c.styles.borderTopStyle=c.styles.borderRightStyle=c.styles.borderBottomStyle=c.styles.borderLeftStyle=1,c.styles.backgroundClip=[0],c.styles.backgroundOrigin=[0],c.bounds=f9e(c.bounds)),c.type){case uL:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=A9e;break;case AL:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=d9e;break}return c}return t}(tg),sfe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this,u=s.options[s.selectedIndex||0];return c.value=u&&u.text||"",c}return t}(tg),afe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;return c.value=s.value,c}return t}(tg),cfe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;c.src=s.src,c.width=parseInt(s.width,10)||0,c.height=parseInt(s.height,10)||0,c.backgroundColor=c.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){c.tree=ufe(i,s.contentWindow.document.documentElement);var u=s.contentWindow.document.documentElement?xC(i,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):im.TRANSPARENT,f=s.contentWindow.document.body?xC(i,getComputedStyle(s.contentWindow.document.body).backgroundColor):im.TRANSPARENT;c.backgroundColor=r0(u)?r0(f)?c.styles.backgroundColor:f:u}}catch{}return c}return t}(tg),g9e=["OL","UL","MENU"],ZN=function(e,t,i,s){for(var c=t.firstChild,u=void 0;c;c=u)if(u=c.nextSibling,Afe(c)&&c.data.trim().length>0)i.textNodes.push(new a9e(e,c,i.styles));else if(jE(c))if(pfe(c)&&c.assignedNodes)c.assignedNodes().forEach(function(p){return ZN(e,p,i,s)});else{var f=lfe(e,c);f.styles.isVisible()&&(m9e(c,f,s)?f.flags|=4:v9e(f.styles)&&(f.flags|=2),g9e.indexOf(c.tagName)!==-1&&(f.flags|=8),i.elements.push(f),c.slot,c.shadowRoot?ZN(e,c.shadowRoot,f,s):!dL(c)&&!dfe(c)&&!fL(c)&&ZN(e,c,f,s))}},lfe=function(e,t){return $6(t)?new rfe(e,t):ffe(t)?new nfe(e,t):dfe(t)?new ife(e,t):_9e(t)?new ofe(e,t):y9e(t)?new W6(e,t):E9e(t)?new GQ(e,t):fL(t)?new sfe(e,t):dL(t)?new afe(e,t):hfe(t)?new cfe(e,t):new tg(e,t)},ufe=function(e,t){var i=lfe(e,t);return i.flags|=4,ZN(e,t,i,i),i},m9e=function(e,t,i){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||$Q(e)&&i.styles.isTransparent()},v9e=function(e){return e.isPositioned()||e.isFloating()},Afe=function(e){return e.nodeType===Node.TEXT_NODE},jE=function(e){return e.nodeType===Node.ELEMENT_NODE},G6=function(e){return jE(e)&&typeof e.style<"u"&&!eB(e)},eB=function(e){return typeof e.className=="object"},_9e=function(e){return e.tagName==="LI"},y9e=function(e){return e.tagName==="OL"},E9e=function(e){return e.tagName==="INPUT"},w9e=function(e){return e.tagName==="HTML"},dfe=function(e){return e.tagName==="svg"},$Q=function(e){return e.tagName==="BODY"},ffe=function(e){return e.tagName==="CANVAS"},Lne=function(e){return e.tagName==="VIDEO"},$6=function(e){return e.tagName==="IMG"},hfe=function(e){return e.tagName==="IFRAME"},Pne=function(e){return e.tagName==="STYLE"},S9e=function(e){return e.tagName==="SCRIPT"},dL=function(e){return e.tagName==="TEXTAREA"},fL=function(e){return e.tagName==="SELECT"},pfe=function(e){return e.tagName==="SLOT"},kne=function(e){return e.tagName.indexOf("-")>0},b9e=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var i=this.counters[t];return i&&i.length?i[i.length-1]:1},e.prototype.getCounterValues=function(t){var i=this.counters[t];return i||[]},e.prototype.pop=function(t){var i=this;t.forEach(function(s){return i.counters[s].pop()})},e.prototype.parse=function(t){var i=this,s=t.counterIncrement,c=t.counterReset,u=!0;s!==null&&s.forEach(function(p){var m=i.counters[p.counter];m&&p.increment!==0&&(u=!1,m.length||m.push(1),m[Math.max(0,m.length-1)]+=p.increment)});var f=[];return u&&c.forEach(function(p){var m=i.counters[p.counter];f.push(p.counter),m||(m=i.counters[p.counter]=[]),m.push(p.reset)}),f},e}(),Dne={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xne={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},C9e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},T9e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dE=function(e,t,i,s,c,u){return e<t||e>i?ST(e,c,u.length>0):s.integers.reduce(function(f,p,m){for(;e>=p;)e-=p,f+=s.values[m];return f},"")+u},gfe=function(e,t,i,s){var c="";do i||e--,c=s(e)+c,e/=t;while(e*t>=t);return c},wa=function(e,t,i,s,c){var u=i-t+1;return(e<0?"-":"")+(gfe(Math.abs(e),u,s,function(f){return Sa(Math.floor(f%u)+t)})+c)},C1=function(e,t,i){i===void 0&&(i=". ");var s=t.length;return gfe(Math.abs(e),s,!1,function(c){return t[Math.floor(c%s)]})+i},RE=1,Nv=2,Bv=4,_C=8,qg=function(e,t,i,s,c,u){if(e<-9999||e>9999)return ST(e,4,c.length>0);var f=Math.abs(e),p=c;if(f===0)return t[0]+p;for(var m=0;f>0&&m<=4;m++){var E=f%10;E===0&&cc(u,RE)&&p!==""?p=t[E]+p:E>1||E===1&&m===0||E===1&&m===1&&cc(u,Nv)||E===1&&m===1&&cc(u,Bv)&&e>100||E===1&&m>1&&cc(u,_C)?p=t[E]+(m>0?i[m-1]:"")+p:E===1&&m>0&&(p=i[m-1]+p),f=Math.floor(f/10)}return(e<0?s:"")+p},Une="",Mne="",Fne="",I4="",ST=function(e,t,i){var s=i?". ":"",c=i?"":"",u=i?", ":"",f=i?" ":"";switch(t){case 0:return""+f;case 1:return""+f;case 2:return""+f;case 5:var p=wa(e,48,57,!0,s);return p.length<4?"0"+p:p;case 4:return C1(e,"",c);case 6:return dE(e,1,3999,Dne,3,s).toLowerCase();case 7:return dE(e,1,3999,Dne,3,s);case 8:return wa(e,945,969,!1,s);case 9:return wa(e,97,122,!1,s);case 10:return wa(e,65,90,!1,s);case 11:return wa(e,1632,1641,!0,s);case 12:case 49:return dE(e,1,9999,xne,3,s);case 35:return dE(e,1,9999,xne,3,s).toLowerCase();case 13:return wa(e,2534,2543,!0,s);case 14:case 30:return wa(e,6112,6121,!0,s);case 15:return C1(e,"",c);case 16:return C1(e,"",c);case 17:case 48:return qg(e,"",Une,"",c,Nv|Bv|_C);case 47:return qg(e,"",Mne,"",c,RE|Nv|Bv|_C);case 42:return qg(e,"",Une,"",c,Nv|Bv|_C);case 41:return qg(e,"",Mne,"",c,RE|Nv|Bv|_C);case 26:return qg(e,"","",Fne,c,0);case 25:return qg(e,"","",Fne,c,RE|Nv|Bv);case 31:return qg(e,"","",I4,u,RE|Nv|Bv);case 33:return qg(e,"","",I4,u,0);case 32:return qg(e,"","",I4,u,RE|Nv|Bv);case 18:return wa(e,2406,2415,!0,s);case 20:return dE(e,1,19999,T9e,3,s);case 21:return wa(e,2790,2799,!0,s);case 22:return wa(e,2662,2671,!0,s);case 22:return dE(e,1,10999,C9e,3,s);case 23:return C1(e,"");case 24:return C1(e,"");case 27:return wa(e,3302,3311,!0,s);case 28:return C1(e,"",c);case 29:return C1(e,"",c);case 34:return wa(e,3792,3801,!0,s);case 37:return wa(e,6160,6169,!0,s);case 38:return wa(e,4160,4169,!0,s);case 39:return wa(e,2918,2927,!0,s);case 40:return wa(e,1776,1785,!0,s);case 43:return wa(e,3046,3055,!0,s);case 44:return wa(e,3174,3183,!0,s);case 45:return wa(e,3664,3673,!0,s);case 46:return wa(e,3872,3881,!0,s);case 3:default:return wa(e,48,57,!0,s)}},mfe="data-html2canvas-ignore",Vne=function(){function e(t,i,s){if(this.context=t,this.options=s,this.scrolledElements=[],this.referenceElement=i,this.counters=new b9e,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,i){var s=this,c=R9e(t,i);if(!c.contentWindow)return Promise.reject("Unable to find iframe window");var u=t.defaultView.pageXOffset,f=t.defaultView.pageYOffset,p=c.contentWindow,m=p.document,E=N9e(c).then(function(){return nu(s,void 0,void 0,function(){var w,T;return Dl(this,function(N){switch(N.label){case 0:return this.scrolledElements.forEach(k9e),p&&(p.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(p.scrollY!==i.top||p.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(p.scrollX-i.left,p.scrollY-i.top,0,0))),w=this.options.onclone,T=this.clonedReferenceElement,typeof T>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:m.fonts&&m.fonts.ready?[4,m.fonts.ready]:[3,2];case 1:N.sent(),N.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,O9e(m)]:[3,4];case 3:N.sent(),N.label=4;case 4:return typeof w=="function"?[2,Promise.resolve().then(function(){return w(m,T)}).then(function(){return c})]:[2,c]}})})});return m.open(),m.write(L9e(document.doctype)+"<html></html>"),P9e(this.referenceElement.ownerDocument,u,f),m.replaceChild(m.adoptNode(this.documentElement),m.documentElement),m.close(),E},e.prototype.createElementClone=function(t){if(j6(t,2))debugger;if(ffe(t))return this.createCanvasClone(t);if(Lne(t))return this.createVideoClone(t);if(Pne(t))return this.createStyleClone(t);var i=t.cloneNode(!1);return $6(i)&&($6(t)&&t.currentSrc&&t.currentSrc!==t.src&&(i.src=t.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),kne(i)?this.createCustomElementClone(i):i},e.prototype.createCustomElementClone=function(t){var i=document.createElement("html2canvascustomelement");return O4(t.style,i),i},e.prototype.createStyleClone=function(t){try{var i=t.sheet;if(i&&i.cssRules){var s=[].slice.call(i.cssRules,0).reduce(function(u,f){return f&&typeof f.cssText=="string"?u+f.cssText:u},""),c=t.cloneNode(!1);return c.textContent=s,c}}catch(u){if(this.context.logger.error("Unable to access cssRules property",u),u.name!=="SecurityError")throw u}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var i;if(this.options.inlineImages&&t.ownerDocument){var s=t.ownerDocument.createElement("img");try{return s.src=t.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var c=t.cloneNode(!1);try{c.width=t.width,c.height=t.height;var u=t.getContext("2d"),f=c.getContext("2d");if(f)if(!this.options.allowTaint&&u)f.putImageData(u.getImageData(0,0,t.width,t.height),0,0);else{var p=(i=t.getContext("webgl2"))!==null&&i!==void 0?i:t.getContext("webgl");if(p){var m=p.getContextAttributes();(m==null?void 0:m.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}f.drawImage(t,0,0)}return c}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return c},e.prototype.createVideoClone=function(t){var i=t.ownerDocument.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;var s=i.getContext("2d");try{return s&&(s.drawImage(t,0,0,i.width,i.height),this.options.allowTaint||s.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var c=t.ownerDocument.createElement("canvas");return c.width=t.offsetWidth,c.height=t.offsetHeight,c},e.prototype.appendChildNode=function(t,i,s){(!jE(i)||!S9e(i)&&!i.hasAttribute(mfe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!jE(i)||!Pne(i))&&t.appendChild(this.cloneNode(i,s))},e.prototype.cloneChildNodes=function(t,i,s){for(var c=this,u=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;u;u=u.nextSibling)if(jE(u)&&pfe(u)&&typeof u.assignedNodes=="function"){var f=u.assignedNodes();f.length&&f.forEach(function(p){return c.appendChildNode(i,p,s)})}else this.appendChildNode(i,u,s)},e.prototype.cloneNode=function(t,i){if(Afe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var s=t.ownerDocument.defaultView;if(s&&jE(t)&&(G6(t)||eB(t))){var c=this.createElementClone(t);c.style.transitionProperty="none";var u=s.getComputedStyle(t),f=s.getComputedStyle(t,":before"),p=s.getComputedStyle(t,":after");this.referenceElement===t&&G6(c)&&(this.clonedReferenceElement=c),$Q(c)&&U9e(c);var m=this.counters.parse(new mne(this.context,u)),E=this.resolvePseudoContent(t,c,f,FC.BEFORE);kne(t)&&(i=!0),Lne(t)||this.cloneChildNodes(t,c,i),E&&c.insertBefore(E,c.firstChild);var w=this.resolvePseudoContent(t,c,p,FC.AFTER);return w&&c.appendChild(w),this.counters.pop(m),(u&&(this.options.copyStyles||eB(t))&&!hfe(t)||i)&&O4(u,c),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([c,t.scrollLeft,t.scrollTop]),(dL(t)||fL(t))&&(dL(c)||fL(c))&&(c.value=t.value),c}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,i,s,c){var u=this;if(s){var f=s.content,p=i.ownerDocument;if(!(!p||!f||f==="none"||f==="-moz-alt-content"||s.display==="none")){this.counters.parse(new mne(this.context,s));var m=new _7e(this.context,s),E=p.createElement("html2canvaspseudoelement");O4(s,E),m.content.forEach(function(T){if(T.type===0)E.appendChild(p.createTextNode(T.value));else if(T.type===22){var N=p.createElement("img");N.src=T.value,N.style.opacity="1",E.appendChild(N)}else if(T.type===18){if(T.name==="attr"){var O=T.values.filter(No);O.length&&E.appendChild(p.createTextNode(t.getAttribute(O[0].value)||""))}else if(T.name==="counter"){var P=T.values.filter(ww),M=P[0],Q=P[1];if(M&&No(M)){var k=u.counters.getCounterValue(M.value),D=Q&&No(Q)?H6.parse(u.context,Q.value):3;E.appendChild(p.createTextNode(ST(k,D,!1)))}}else if(T.name==="counters"){var V=T.values.filter(ww),M=V[0],K=V[1],Q=V[2];if(M&&No(M)){var J=u.counters.getCounterValues(M.value),ie=Q&&No(Q)?H6.parse(u.context,Q.value):3,fe=K&&K.type===0?K.value:"",Z=J.map(function(te){return ST(te,ie,!1)}).join(fe);E.appendChild(p.createTextNode(Z))}}}else if(T.type===20)switch(T.value){case"open-quote":E.appendChild(p.createTextNode(gne(m.quotes,u.quoteDepth++,!0)));break;case"close-quote":E.appendChild(p.createTextNode(gne(m.quotes,--u.quoteDepth,!1)));break;default:E.appendChild(p.createTextNode(T.value))}}),E.className=z6+" "+q6;var w=c===FC.BEFORE?" "+z6:" "+q6;return eB(i)?i.className.baseValue+=w:i.className+=w,E}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),FC;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(FC||(FC={}));var R9e=function(e,t){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=t.width.toString(),i.height=t.height.toString(),i.scrolling="no",i.setAttribute(mfe,"true"),e.body.appendChild(i),i},I9e=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},O9e=function(e){return Promise.all([].slice.call(e.images,0).map(I9e))},N9e=function(e){return new Promise(function(t,i){var s=e.contentWindow;if(!s)return i("No window assigned for iframe");var c=s.document;s.onload=e.onload=function(){s.onload=e.onload=null;var u=setInterval(function(){c.body.childNodes.length>0&&c.readyState==="complete"&&(clearInterval(u),t(e))},50)}})},B9e=["all","d","content"],O4=function(e,t){for(var i=e.length-1;i>=0;i--){var s=e.item(i);B9e.indexOf(s)===-1&&t.style.setProperty(s,e.getPropertyValue(s))}return t},L9e=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},P9e=function(e,t,i){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,i)},k9e=function(e){var t=e[0],i=e[1],s=e[2];t.scrollLeft=i,t.scrollTop=s},D9e=":before",x9e=":after",z6="___html2canvas___pseudoelement_before",q6="___html2canvas___pseudoelement_after",Qne=`{
    content: "" !important;
    display: none !important;
}`,U9e=function(e){M9e(e,"."+z6+D9e+Qne+`
         .`+q6+x9e+Qne)},M9e=function(e,t){var i=e.ownerDocument;if(i){var s=i.createElement("style");s.textContent=t,e.appendChild(s)}},vfe=function(){function e(){}return e.getOrigin=function(t){var i=e._link;return i?(i.href=t,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),F9e=function(){function e(t,i){this.context=t,this._options=i,this._cache={}}return e.prototype.addImage=function(t){var i=Promise.resolve();return this.has(t)||(B4(t)||j9e(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),i},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return nu(this,void 0,void 0,function(){var i,s,c,u,f=this;return Dl(this,function(p){switch(p.label){case 0:return i=vfe.isSameOrigin(t),s=!N4(t)&&this._options.useCORS===!0&&il.SUPPORT_CORS_IMAGES&&!i,c=!N4(t)&&!i&&!B4(t)&&typeof this._options.proxy=="string"&&il.SUPPORT_CORS_XHR&&!s,!i&&this._options.allowTaint===!1&&!N4(t)&&!B4(t)&&!c&&!s?[2]:(u=t,c?[4,this.proxy(u)]:[3,2]);case 1:u=p.sent(),p.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(m,E){var w=new Image;w.onload=function(){return m(w)},w.onerror=E,(K9e(u)||s)&&(w.crossOrigin="anonymous"),w.src=u,w.complete===!0&&setTimeout(function(){return m(w)},500),f._options.imageTimeout>0&&setTimeout(function(){return E("Timed out ("+f._options.imageTimeout+"ms) loading image")},f._options.imageTimeout)})];case 3:return[2,p.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var i=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var c=t.substring(0,256);return new Promise(function(u,f){var p=il.SUPPORT_RESPONSE_TYPE?"blob":"text",m=new XMLHttpRequest;m.onload=function(){if(m.status===200)if(p==="text")u(m.response);else{var T=new FileReader;T.addEventListener("load",function(){return u(T.result)},!1),T.addEventListener("error",function(N){return f(N)},!1),T.readAsDataURL(m.response)}else f("Failed to proxy resource "+c+" with status code "+m.status)},m.onerror=f;var E=s.indexOf("?")>-1?"&":"?";if(m.open("GET",""+s+E+"url="+encodeURIComponent(t)+"&responseType="+p),p!=="text"&&m instanceof XMLHttpRequest&&(m.responseType=p),i._options.imageTimeout){var w=i._options.imageTimeout;m.timeout=w,m.ontimeout=function(){return f("Timed out ("+w+"ms) proxying "+c)}}m.send()})},e}(),V9e=/^data:image\/svg\+xml/i,Q9e=/^data:image\/.*;base64,/i,H9e=/^data:image\/.*/i,j9e=function(e){return il.SUPPORT_SVG_DRAWING||!W9e(e)},N4=function(e){return H9e.test(e)},K9e=function(e){return Q9e.test(e)},B4=function(e){return e.substr(0,4)==="blob"},W9e=function(e){return e.substr(-3).toLowerCase()==="svg"||V9e.test(e)},Vr=function(){function e(t,i){this.type=0,this.x=t,this.y=i}return e.prototype.add=function(t,i){return new e(this.x+t,this.y+i)},e}(),fE=function(e,t,i){return new Vr(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},eN=function(){function e(t,i,s,c){this.type=1,this.start=t,this.startControl=i,this.endControl=s,this.end=c}return e.prototype.subdivide=function(t,i){var s=fE(this.start,this.startControl,t),c=fE(this.startControl,this.endControl,t),u=fE(this.endControl,this.end,t),f=fE(s,c,t),p=fE(c,u,t),m=fE(f,p,t);return i?new e(this.start,s,f,m):new e(m,p,u,this.end)},e.prototype.add=function(t,i){return new e(this.start.add(t,i),this.startControl.add(t,i),this.endControl.add(t,i),this.end.add(t,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),jd=function(e){return e.type===1},G9e=function(){function e(t){var i=t.styles,s=t.bounds,c=mC(i.borderTopLeftRadius,s.width,s.height),u=c[0],f=c[1],p=mC(i.borderTopRightRadius,s.width,s.height),m=p[0],E=p[1],w=mC(i.borderBottomRightRadius,s.width,s.height),T=w[0],N=w[1],O=mC(i.borderBottomLeftRadius,s.width,s.height),P=O[0],M=O[1],Q=[];Q.push((u+m)/s.width),Q.push((P+T)/s.width),Q.push((f+M)/s.height),Q.push((E+N)/s.height);var k=Math.max.apply(Math,Q);k>1&&(u/=k,f/=k,m/=k,E/=k,T/=k,N/=k,P/=k,M/=k);var D=s.width-m,V=s.height-N,K=s.width-T,J=s.height-M,ie=i.borderTopWidth,fe=i.borderRightWidth,Z=i.borderBottomWidth,pe=i.borderLeftWidth,Y=Xo(i.paddingTop,t.bounds.width),te=Xo(i.paddingRight,t.bounds.width),le=Xo(i.paddingBottom,t.bounds.width),ae=Xo(i.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||f>0?ms(s.left+pe/3,s.top+ie/3,u-pe/3,f-ie/3,lo.TOP_LEFT):new Vr(s.left+pe/3,s.top+ie/3),this.topRightBorderDoubleOuterBox=u>0||f>0?ms(s.left+D,s.top+ie/3,m-fe/3,E-ie/3,lo.TOP_RIGHT):new Vr(s.left+s.width-fe/3,s.top+ie/3),this.bottomRightBorderDoubleOuterBox=T>0||N>0?ms(s.left+K,s.top+V,T-fe/3,N-Z/3,lo.BOTTOM_RIGHT):new Vr(s.left+s.width-fe/3,s.top+s.height-Z/3),this.bottomLeftBorderDoubleOuterBox=P>0||M>0?ms(s.left+pe/3,s.top+J,P-pe/3,M-Z/3,lo.BOTTOM_LEFT):new Vr(s.left+pe/3,s.top+s.height-Z/3),this.topLeftBorderDoubleInnerBox=u>0||f>0?ms(s.left+pe*2/3,s.top+ie*2/3,u-pe*2/3,f-ie*2/3,lo.TOP_LEFT):new Vr(s.left+pe*2/3,s.top+ie*2/3),this.topRightBorderDoubleInnerBox=u>0||f>0?ms(s.left+D,s.top+ie*2/3,m-fe*2/3,E-ie*2/3,lo.TOP_RIGHT):new Vr(s.left+s.width-fe*2/3,s.top+ie*2/3),this.bottomRightBorderDoubleInnerBox=T>0||N>0?ms(s.left+K,s.top+V,T-fe*2/3,N-Z*2/3,lo.BOTTOM_RIGHT):new Vr(s.left+s.width-fe*2/3,s.top+s.height-Z*2/3),this.bottomLeftBorderDoubleInnerBox=P>0||M>0?ms(s.left+pe*2/3,s.top+J,P-pe*2/3,M-Z*2/3,lo.BOTTOM_LEFT):new Vr(s.left+pe*2/3,s.top+s.height-Z*2/3),this.topLeftBorderStroke=u>0||f>0?ms(s.left+pe/2,s.top+ie/2,u-pe/2,f-ie/2,lo.TOP_LEFT):new Vr(s.left+pe/2,s.top+ie/2),this.topRightBorderStroke=u>0||f>0?ms(s.left+D,s.top+ie/2,m-fe/2,E-ie/2,lo.TOP_RIGHT):new Vr(s.left+s.width-fe/2,s.top+ie/2),this.bottomRightBorderStroke=T>0||N>0?ms(s.left+K,s.top+V,T-fe/2,N-Z/2,lo.BOTTOM_RIGHT):new Vr(s.left+s.width-fe/2,s.top+s.height-Z/2),this.bottomLeftBorderStroke=P>0||M>0?ms(s.left+pe/2,s.top+J,P-pe/2,M-Z/2,lo.BOTTOM_LEFT):new Vr(s.left+pe/2,s.top+s.height-Z/2),this.topLeftBorderBox=u>0||f>0?ms(s.left,s.top,u,f,lo.TOP_LEFT):new Vr(s.left,s.top),this.topRightBorderBox=m>0||E>0?ms(s.left+D,s.top,m,E,lo.TOP_RIGHT):new Vr(s.left+s.width,s.top),this.bottomRightBorderBox=T>0||N>0?ms(s.left+K,s.top+V,T,N,lo.BOTTOM_RIGHT):new Vr(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=P>0||M>0?ms(s.left,s.top+J,P,M,lo.BOTTOM_LEFT):new Vr(s.left,s.top+s.height),this.topLeftPaddingBox=u>0||f>0?ms(s.left+pe,s.top+ie,Math.max(0,u-pe),Math.max(0,f-ie),lo.TOP_LEFT):new Vr(s.left+pe,s.top+ie),this.topRightPaddingBox=m>0||E>0?ms(s.left+Math.min(D,s.width-fe),s.top+ie,D>s.width+fe?0:Math.max(0,m-fe),Math.max(0,E-ie),lo.TOP_RIGHT):new Vr(s.left+s.width-fe,s.top+ie),this.bottomRightPaddingBox=T>0||N>0?ms(s.left+Math.min(K,s.width-pe),s.top+Math.min(V,s.height-Z),Math.max(0,T-fe),Math.max(0,N-Z),lo.BOTTOM_RIGHT):new Vr(s.left+s.width-fe,s.top+s.height-Z),this.bottomLeftPaddingBox=P>0||M>0?ms(s.left+pe,s.top+Math.min(J,s.height-Z),Math.max(0,P-pe),Math.max(0,M-Z),lo.BOTTOM_LEFT):new Vr(s.left+pe,s.top+s.height-Z),this.topLeftContentBox=u>0||f>0?ms(s.left+pe+ae,s.top+ie+Y,Math.max(0,u-(pe+ae)),Math.max(0,f-(ie+Y)),lo.TOP_LEFT):new Vr(s.left+pe+ae,s.top+ie+Y),this.topRightContentBox=m>0||E>0?ms(s.left+Math.min(D,s.width+pe+ae),s.top+ie+Y,D>s.width+pe+ae?0:m-pe+ae,E-(ie+Y),lo.TOP_RIGHT):new Vr(s.left+s.width-(fe+te),s.top+ie+Y),this.bottomRightContentBox=T>0||N>0?ms(s.left+Math.min(K,s.width-(pe+ae)),s.top+Math.min(V,s.height+ie+Y),Math.max(0,T-(fe+te)),N-(Z+le),lo.BOTTOM_RIGHT):new Vr(s.left+s.width-(fe+te),s.top+s.height-(Z+le)),this.bottomLeftContentBox=P>0||M>0?ms(s.left+pe+ae,s.top+J,Math.max(0,P-(pe+ae)),M-(Z+le),lo.BOTTOM_LEFT):new Vr(s.left+pe+ae,s.top+s.height-(Z+le))}return e}(),lo;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(lo||(lo={}));var ms=function(e,t,i,s,c){var u=4*((Math.sqrt(2)-1)/3),f=i*u,p=s*u,m=e+i,E=t+s;switch(c){case lo.TOP_LEFT:return new eN(new Vr(e,E),new Vr(e,E-p),new Vr(m-f,t),new Vr(m,t));case lo.TOP_RIGHT:return new eN(new Vr(e,t),new Vr(e+f,t),new Vr(m,E-p),new Vr(m,E));case lo.BOTTOM_RIGHT:return new eN(new Vr(m,t),new Vr(m,t+p),new Vr(e+f,E),new Vr(e,E));case lo.BOTTOM_LEFT:default:return new eN(new Vr(m,E),new Vr(m-f,E),new Vr(e,t+p),new Vr(e,t))}},hL=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},$9e=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},pL=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},z9e=function(){function e(t,i,s){this.offsetX=t,this.offsetY=i,this.matrix=s,this.type=0,this.target=6}return e}(),tN=function(){function e(t,i){this.path=t,this.target=i,this.type=1}return e}(),q9e=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Y9e=function(e){return e.type===0},_fe=function(e){return e.type===1},X9e=function(e){return e.type===2},Hne=function(e,t){return e.length===t.length?e.some(function(i,s){return i===t[s]}):!1},J9e=function(e,t,i,s,c){return e.map(function(u,f){switch(f){case 0:return u.add(t,i);case 1:return u.add(t+s,i);case 2:return u.add(t+s,i+c);case 3:return u.add(t,i+c)}return u})},yfe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Efe=function(){function e(t,i){if(this.container=t,this.parent=i,this.effects=[],this.curves=new G9e(this.container),this.container.styles.opacity<1&&this.effects.push(new q9e(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,c=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new z9e(s,c,u))}if(this.container.styles.overflowX!==0){var f=hL(this.curves),p=pL(this.curves);Hne(f,p)?this.effects.push(new tN(f,6)):(this.effects.push(new tN(f,2)),this.effects.push(new tN(p,4)))}}return e.prototype.getEffects=function(t){for(var i=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,c=this.effects.slice(0);s;){var u=s.effects.filter(function(m){return!_fe(m)});if(i||s.container.styles.position!==0||!s.parent){if(c.unshift.apply(c,u),i=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var f=hL(s.curves),p=pL(s.curves);Hne(f,p)||c.unshift(new tN(p,6))}}else c.unshift.apply(c,u);s=s.parent}return c.filter(function(m){return cc(m.target,t)})},e}(),Y6=function(e,t,i,s){e.container.elements.forEach(function(c){var u=cc(c.flags,4),f=cc(c.flags,2),p=new Efe(c,e);cc(c.styles.display,2048)&&s.push(p);var m=cc(c.flags,8)?[]:s;if(u||f){var E=u||c.styles.isPositioned()?i:t,w=new yfe(p);if(c.styles.isPositioned()||c.styles.opacity<1||c.styles.isTransformed()){var T=c.styles.zIndex.order;if(T<0){var N=0;E.negativeZIndex.some(function(P,M){return T>P.element.container.styles.zIndex.order?(N=M,!1):N>0}),E.negativeZIndex.splice(N,0,w)}else if(T>0){var O=0;E.positiveZIndex.some(function(P,M){return T>=P.element.container.styles.zIndex.order?(O=M+1,!1):O>0}),E.positiveZIndex.splice(O,0,w)}else E.zeroOrAutoZIndexOrTransformedOrOpacity.push(w)}else c.styles.isFloating()?E.nonPositionedFloats.push(w):E.nonPositionedInlineLevel.push(w);Y6(p,w,u?w:i,m)}else c.styles.isInlineLevel()?t.inlineLevel.push(p):t.nonInlineLevel.push(p),Y6(p,t,i,m);cc(c.flags,8)&&wfe(c,m)})},wfe=function(e,t){for(var i=e instanceof W6?e.start:1,s=e instanceof W6?e.reversed:!1,c=0;c<t.length;c++){var u=t[c];u.container instanceof ofe&&typeof u.container.value=="number"&&u.container.value!==0&&(i=u.container.value),u.listValue=ST(i,u.container.styles.listStyleType,!0),i+=s?-1:1}},Z9e=function(e){var t=new Efe(e,null),i=new yfe(t),s=[];return Y6(t,i,i,s),wfe(t.container,s),i},jne=function(e,t){switch(t){case 0:return $d(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return $d(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return $d(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return $d(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},eKe=function(e,t){switch(t){case 0:return $d(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return $d(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return $d(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return $d(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},tKe=function(e,t){switch(t){case 0:return $d(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return $d(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return $d(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return $d(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},rKe=function(e,t){switch(t){case 0:return rN(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return rN(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return rN(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return rN(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},rN=function(e,t){var i=[];return jd(e)?i.push(e.subdivide(.5,!1)):i.push(e),jd(t)?i.push(t.subdivide(.5,!0)):i.push(t),i},$d=function(e,t,i,s){var c=[];return jd(e)?c.push(e.subdivide(.5,!1)):c.push(e),jd(i)?c.push(i.subdivide(.5,!0)):c.push(i),jd(s)?c.push(s.subdivide(.5,!0).reverse()):c.push(s),jd(t)?c.push(t.subdivide(.5,!1).reverse()):c.push(t),c},Sfe=function(e){var t=e.bounds,i=e.styles;return t.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},gL=function(e){var t=e.styles,i=e.bounds,s=Xo(t.paddingLeft,i.width),c=Xo(t.paddingRight,i.width),u=Xo(t.paddingTop,i.width),f=Xo(t.paddingBottom,i.width);return i.add(s+t.borderLeftWidth,u+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+s+c),-(t.borderTopWidth+t.borderBottomWidth+u+f))},nKe=function(e,t){return e===0?t.bounds:e===2?gL(t):Sfe(t)},iKe=function(e,t){return e===0?t.bounds:e===2?gL(t):Sfe(t)},L4=function(e,t,i){var s=nKe(IE(e.styles.backgroundOrigin,t),e),c=iKe(IE(e.styles.backgroundClip,t),e),u=oKe(IE(e.styles.backgroundSize,t),i,s),f=u[0],p=u[1],m=mC(IE(e.styles.backgroundPosition,t),s.width-f,s.height-p),E=sKe(IE(e.styles.backgroundRepeat,t),m,u,s,c),w=Math.round(s.left+m[0]),T=Math.round(s.top+m[1]);return[E,w,T,f,p]},hE=function(e){return No(e)&&e.value===nw.AUTO},nN=function(e){return typeof e=="number"},oKe=function(e,t,i){var s=t[0],c=t[1],u=t[2],f=e[0],p=e[1];if(!f)return[0,0];if(Ha(f)&&p&&Ha(p))return[Xo(f,i.width),Xo(p,i.height)];var m=nN(u);if(No(f)&&(f.value===nw.CONTAIN||f.value===nw.COVER)){if(nN(u)){var E=i.width/i.height;return E<u!=(f.value===nw.COVER)?[i.width,i.width/u]:[i.height*u,i.height]}return[i.width,i.height]}var w=nN(s),T=nN(c),N=w||T;if(hE(f)&&(!p||hE(p))){if(w&&T)return[s,c];if(!m&&!N)return[i.width,i.height];if(N&&m){var O=w?s:c*u,P=T?c:s/u;return[O,P]}var M=w?s:i.width,Q=T?c:i.height;return[M,Q]}if(m){var k=0,D=0;return Ha(f)?k=Xo(f,i.width):Ha(p)&&(D=Xo(p,i.height)),hE(f)?k=D*u:(!p||hE(p))&&(D=k/u),[k,D]}var V=null,K=null;if(Ha(f)?V=Xo(f,i.width):p&&Ha(p)&&(K=Xo(p,i.height)),V!==null&&(!p||hE(p))&&(K=w&&T?V/s*c:i.height),K!==null&&hE(f)&&(V=w&&T?K/c*s:i.width),V!==null&&K!==null)return[V,K];throw new Error("Unable to calculate background-size for element")},IE=function(e,t){var i=e[t];return typeof i>"u"?e[0]:i},sKe=function(e,t,i,s,c){var u=t[0],f=t[1],p=i[0],m=i[1];switch(e){case 2:return[new Vr(Math.round(s.left),Math.round(s.top+f)),new Vr(Math.round(s.left+s.width),Math.round(s.top+f)),new Vr(Math.round(s.left+s.width),Math.round(m+s.top+f)),new Vr(Math.round(s.left),Math.round(m+s.top+f))];case 3:return[new Vr(Math.round(s.left+u),Math.round(s.top)),new Vr(Math.round(s.left+u+p),Math.round(s.top)),new Vr(Math.round(s.left+u+p),Math.round(s.height+s.top)),new Vr(Math.round(s.left+u),Math.round(s.height+s.top))];case 1:return[new Vr(Math.round(s.left+u),Math.round(s.top+f)),new Vr(Math.round(s.left+u+p),Math.round(s.top+f)),new Vr(Math.round(s.left+u+p),Math.round(s.top+f+m)),new Vr(Math.round(s.left+u),Math.round(s.top+f+m))];default:return[new Vr(Math.round(c.left),Math.round(c.top)),new Vr(Math.round(c.left+c.width),Math.round(c.top)),new Vr(Math.round(c.left+c.width),Math.round(c.height+c.top)),new Vr(Math.round(c.left),Math.round(c.height+c.top))]}},aKe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Kne="Hidden Text",cKe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,i){var s=this._document.createElement("div"),c=this._document.createElement("img"),u=this._document.createElement("span"),f=this._document.body;s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=i,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",f.appendChild(s),c.src=aKe,c.width=1,c.height=1,c.style.margin="0",c.style.padding="0",c.style.verticalAlign="baseline",u.style.fontFamily=t,u.style.fontSize=i,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode(Kne)),s.appendChild(u),s.appendChild(c);var p=c.offsetTop-u.offsetTop+2;s.removeChild(u),s.appendChild(this._document.createTextNode(Kne)),s.style.lineHeight="normal",c.style.verticalAlign="super";var m=c.offsetTop-s.offsetTop+2;return f.removeChild(s),{baseline:p,middle:m}},e.prototype.getMetrics=function(t,i){var s=t+" "+i;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(t,i)),this._data[s]},e}(),bfe=function(){function e(t,i){this.context=t,this.options=i}return e}(),lKe=1e4,uKe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;return c._activeEffects=[],c.canvas=s.canvas?s.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),s.canvas||(c.canvas.width=Math.floor(s.width*s.scale),c.canvas.height=Math.floor(s.height*s.scale),c.canvas.style.width=s.width+"px",c.canvas.style.height=s.height+"px"),c.fontMetrics=new cKe(document),c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-s.x,-s.y),c.ctx.textBaseline="bottom",c._activeEffects=[],c.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),c}return t.prototype.applyEffects=function(i){for(var s=this;this._activeEffects.length;)this.popEffect();i.forEach(function(c){return s.applyEffect(c)})},t.prototype.applyEffect=function(i){this.ctx.save(),X9e(i)&&(this.ctx.globalAlpha=i.opacity),Y9e(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),_fe(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(i){return nu(this,void 0,void 0,function(){var s;return Dl(this,function(c){switch(c.label){case 0:return s=i.element.container.styles,s.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(i){return nu(this,void 0,void 0,function(){return Dl(this,function(s){switch(s.label){case 0:if(cc(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(i)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(i,s,c){var u=this;if(s===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+c);else{var f=WQ(i.text);f.reduce(function(p,m){return u.ctx.fillText(m,p,i.bounds.top+c),p+u.ctx.measureText(m).width},i.bounds.left)}},t.prototype.createFontStyle=function(i){var s=i.fontVariant.filter(function(f){return f==="normal"||f==="small-caps"}).join(""),c=pKe(i.fontFamily).join(", "),u=$T(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,s,i.fontWeight,u,c].join(" "),c,u]},t.prototype.renderTextNode=function(i,s){return nu(this,void 0,void 0,function(){var c,u,f,p,m,E,w,T,N=this;return Dl(this,function(O){return c=this.createFontStyle(s),u=c[0],f=c[1],p=c[2],this.ctx.font=u,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",m=this.fontMetrics.getMetrics(f,p),E=m.baseline,w=m.middle,T=s.paintOrder,i.textBounds.forEach(function(P){T.forEach(function(M){switch(M){case 0:N.ctx.fillStyle=Ic(s.color),N.renderTextWithLetterSpacing(P,s.letterSpacing,E);var Q=s.textShadow;Q.length&&P.text.trim().length&&(Q.slice(0).reverse().forEach(function(k){N.ctx.shadowColor=Ic(k.color),N.ctx.shadowOffsetX=k.offsetX.number*N.options.scale,N.ctx.shadowOffsetY=k.offsetY.number*N.options.scale,N.ctx.shadowBlur=k.blur.number,N.renderTextWithLetterSpacing(P,s.letterSpacing,E)}),N.ctx.shadowColor="",N.ctx.shadowOffsetX=0,N.ctx.shadowOffsetY=0,N.ctx.shadowBlur=0),s.textDecorationLine.length&&(N.ctx.fillStyle=Ic(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(k){switch(k){case 1:N.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top+E),P.bounds.width,1);break;case 2:N.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top),P.bounds.width,1);break;case 3:N.ctx.fillRect(P.bounds.left,Math.ceil(P.bounds.top+w),P.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&P.text.trim().length&&(N.ctx.strokeStyle=Ic(s.webkitTextStrokeColor),N.ctx.lineWidth=s.webkitTextStrokeWidth,N.ctx.lineJoin=window.chrome?"miter":"round",N.ctx.strokeText(P.text,P.bounds.left,P.bounds.top+E)),N.ctx.strokeStyle="",N.ctx.lineWidth=0,N.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(i,s,c){if(c&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var u=gL(i),f=pL(s);this.path(f),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(c,0,0,i.intrinsicWidth,i.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(i){return nu(this,void 0,void 0,function(){var s,c,u,f,p,m,D,D,E,w,T,N,K,O,P,J,M,Q,k,D,V,K,J;return Dl(this,function(ie){switch(ie.label){case 0:this.applyEffects(i.getEffects(4)),s=i.container,c=i.curves,u=s.styles,f=0,p=s.textNodes,ie.label=1;case 1:return f<p.length?(m=p[f],[4,this.renderTextNode(m,u)]):[3,4];case 2:ie.sent(),ie.label=3;case 3:return f++,[3,1];case 4:if(!(s instanceof rfe))return[3,8];ie.label=5;case 5:return ie.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return D=ie.sent(),this.renderReplacedElement(s,c,D),[3,8];case 7:return ie.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof nfe&&this.renderReplacedElement(s,c,s.canvas),!(s instanceof ife))return[3,12];ie.label=9;case 9:return ie.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return D=ie.sent(),this.renderReplacedElement(s,c,D),[3,12];case 11:return ie.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof cfe&&s.tree?(E=new t(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,E.render(s.tree)]):[3,14];case 13:w=ie.sent(),s.width&&s.height&&this.ctx.drawImage(w,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),ie.label=14;case 14:if(s instanceof GQ&&(T=Math.min(s.bounds.width,s.bounds.height),s.type===uL?s.checked&&(this.ctx.save(),this.path([new Vr(s.bounds.left+T*.39363,s.bounds.top+T*.79),new Vr(s.bounds.left+T*.16,s.bounds.top+T*.5549),new Vr(s.bounds.left+T*.27347,s.bounds.top+T*.44071),new Vr(s.bounds.left+T*.39694,s.bounds.top+T*.5649),new Vr(s.bounds.left+T*.72983,s.bounds.top+T*.23),new Vr(s.bounds.left+T*.84,s.bounds.top+T*.34085),new Vr(s.bounds.left+T*.39363,s.bounds.top+T*.79)]),this.ctx.fillStyle=Ic(Bne),this.ctx.fill(),this.ctx.restore()):s.type===AL&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+T/2,s.bounds.top+T/2,T/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ic(Bne),this.ctx.fill(),this.ctx.restore())),AKe(s)&&s.value.length){switch(N=this.createFontStyle(u),K=N[0],O=N[1],P=this.fontMetrics.getMetrics(K,O).baseline,this.ctx.font=K,this.ctx.fillStyle=Ic(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fKe(s.styles.textAlign),J=gL(s),M=0,s.styles.textAlign){case 1:M+=J.width/2;break;case 2:M+=J.width;break}Q=J.add(M,0,0,-J.height/2+1),this.ctx.save(),this.path([new Vr(J.left,J.top),new Vr(J.left+J.width,J.top),new Vr(J.left+J.width,J.top+J.height),new Vr(J.left,J.top+J.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new MC(s.value,Q),u.letterSpacing,P),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!cc(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(k=s.styles.listStyleImage,k.type!==0)return[3,18];D=void 0,V=k.url,ie.label=15;case 15:return ie.trys.push([15,17,,18]),[4,this.context.cache.match(V)];case 16:return D=ie.sent(),this.ctx.drawImage(D,s.bounds.left-(D.width+10),s.bounds.top),[3,18];case 17:return ie.sent(),this.context.logger.error("Error loading list-style-image "+V),[3,18];case 18:return[3,20];case 19:i.listValue&&s.styles.listStyleType!==-1&&(K=this.createFontStyle(u)[0],this.ctx.font=K,this.ctx.fillStyle=Ic(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",J=new hm(s.bounds.left,s.bounds.top+Xo(s.styles.paddingTop,s.bounds.width),s.bounds.width,hne(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new MC(i.listValue,J),u.letterSpacing,hne(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ie.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(i){return nu(this,void 0,void 0,function(){var s,c,k,u,f,k,p,m,k,E,w,k,T,N,k,O,P,k,M,Q,k;return Dl(this,function(D){switch(D.label){case 0:if(cc(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:D.sent(),s=0,c=i.negativeZIndex,D.label=2;case 2:return s<c.length?(k=c[s],[4,this.renderStack(k)]):[3,5];case 3:D.sent(),D.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:D.sent(),u=0,f=i.nonInlineLevel,D.label=7;case 7:return u<f.length?(k=f[u],[4,this.renderNode(k)]):[3,10];case 8:D.sent(),D.label=9;case 9:return u++,[3,7];case 10:p=0,m=i.nonPositionedFloats,D.label=11;case 11:return p<m.length?(k=m[p],[4,this.renderStack(k)]):[3,14];case 12:D.sent(),D.label=13;case 13:return p++,[3,11];case 14:E=0,w=i.nonPositionedInlineLevel,D.label=15;case 15:return E<w.length?(k=w[E],[4,this.renderStack(k)]):[3,18];case 16:D.sent(),D.label=17;case 17:return E++,[3,15];case 18:T=0,N=i.inlineLevel,D.label=19;case 19:return T<N.length?(k=N[T],[4,this.renderNode(k)]):[3,22];case 20:D.sent(),D.label=21;case 21:return T++,[3,19];case 22:O=0,P=i.zeroOrAutoZIndexOrTransformedOrOpacity,D.label=23;case 23:return O<P.length?(k=P[O],[4,this.renderStack(k)]):[3,26];case 24:D.sent(),D.label=25;case 25:return O++,[3,23];case 26:M=0,Q=i.positiveZIndex,D.label=27;case 27:return M<Q.length?(k=Q[M],[4,this.renderStack(k)]):[3,30];case 28:D.sent(),D.label=29;case 29:return M++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},t.prototype.formatPath=function(i){var s=this;i.forEach(function(c,u){var f=jd(c)?c.start:c;u===0?s.ctx.moveTo(f.x,f.y):s.ctx.lineTo(f.x,f.y),jd(c)&&s.ctx.bezierCurveTo(c.startControl.x,c.startControl.y,c.endControl.x,c.endControl.y,c.end.x,c.end.y)})},t.prototype.renderRepeat=function(i,s,c,u){this.path(i),this.ctx.fillStyle=s,this.ctx.translate(c,u),this.ctx.fill(),this.ctx.translate(-c,-u)},t.prototype.resizeImage=function(i,s,c){var u;if(i.width===s&&i.height===c)return i;var f=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,p=f.createElement("canvas");p.width=Math.max(1,s),p.height=Math.max(1,c);var m=p.getContext("2d");return m.drawImage(i,0,0,i.width,i.height,0,0,s,c),p},t.prototype.renderBackgroundImage=function(i){return nu(this,void 0,void 0,function(){var s,c,u,f,p,m;return Dl(this,function(E){switch(E.label){case 0:s=i.styles.backgroundImage.length-1,c=function(w){var T,N,O,Y,xe,Me,ae,ge,Z,P,Y,xe,Me,ae,ge,M,Q,k,D,V,K,J,ie,fe,Z,pe,Y,te,le,ae,ge,se,xe,Me,Be,ke,Ke,ht,ve,Oe,Ue,Fe;return Dl(this,function(Qe){switch(Qe.label){case 0:if(w.type!==0)return[3,5];T=void 0,N=w.url,Qe.label=1;case 1:return Qe.trys.push([1,3,,4]),[4,u.context.cache.match(N)];case 2:return T=Qe.sent(),[3,4];case 3:return Qe.sent(),u.context.logger.error("Error loading background-image "+N),[3,4];case 4:return T&&(O=L4(i,s,[T.width,T.height,T.width/T.height]),Y=O[0],xe=O[1],Me=O[2],ae=O[3],ge=O[4],Z=u.ctx.createPattern(u.resizeImage(T,ae,ge),"repeat"),u.renderRepeat(Y,Z,xe,Me)),[3,6];case 5:YHe(w)?(P=L4(i,s,[null,null,null]),Y=P[0],xe=P[1],Me=P[2],ae=P[3],ge=P[4],M=WHe(w.angle,ae,ge),Q=M[0],k=M[1],D=M[2],V=M[3],K=M[4],J=document.createElement("canvas"),J.width=ae,J.height=ge,ie=J.getContext("2d"),fe=ie.createLinearGradient(k,V,D,K),dne(w.stops,Q).forEach(function(We){return fe.addColorStop(We.stop,Ic(We.color))}),ie.fillStyle=fe,ie.fillRect(0,0,ae,ge),ae>0&&ge>0&&(Z=u.ctx.createPattern(J,"repeat"),u.renderRepeat(Y,Z,xe,Me))):XHe(w)&&(pe=L4(i,s,[null,null,null]),Y=pe[0],te=pe[1],le=pe[2],ae=pe[3],ge=pe[4],se=w.position.length===0?[HQ]:w.position,xe=Xo(se[0],ae),Me=Xo(se[se.length-1],ge),Be=GHe(w,xe,Me,ae,ge),ke=Be[0],Ke=Be[1],ke>0&&Ke>0&&(ht=u.ctx.createRadialGradient(te+xe,le+Me,0,te+xe,le+Me,ke),dne(w.stops,ke*2).forEach(function(We){return ht.addColorStop(We.stop,Ic(We.color))}),u.path(Y),u.ctx.fillStyle=ht,ke!==Ke?(ve=i.bounds.left+.5*i.bounds.width,Oe=i.bounds.top+.5*i.bounds.height,Ue=Ke/ke,Fe=1/Ue,u.ctx.save(),u.ctx.translate(ve,Oe),u.ctx.transform(1,0,0,Ue,0,0),u.ctx.translate(-ve,-Oe),u.ctx.fillRect(te,Fe*(le-Oe)+Oe,ae,ge*Fe),u.ctx.restore()):u.ctx.fill())),Qe.label=6;case 6:return s--,[2]}})},u=this,f=0,p=i.styles.backgroundImage.slice(0).reverse(),E.label=1;case 1:return f<p.length?(m=p[f],[5,c(m)]):[3,4];case 2:E.sent(),E.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(i,s,c){return nu(this,void 0,void 0,function(){return Dl(this,function(u){return this.path(jne(c,s)),this.ctx.fillStyle=Ic(i),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(i,s,c,u){return nu(this,void 0,void 0,function(){var f,p;return Dl(this,function(m){switch(m.label){case 0:return s<3?[4,this.renderSolidBorder(i,c,u)]:[3,2];case 1:return m.sent(),[2];case 2:return f=eKe(u,c),this.path(f),this.ctx.fillStyle=Ic(i),this.ctx.fill(),p=tKe(u,c),this.path(p),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(i){return nu(this,void 0,void 0,function(){var s,c,u,f,p,m,E,w,T=this;return Dl(this,function(N){switch(N.label){case 0:return this.applyEffects(i.getEffects(2)),s=i.container.styles,c=!r0(s.backgroundColor)||s.backgroundImage.length,u=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],f=dKe(IE(s.backgroundClip,0),i.curves),c||s.boxShadow.length?(this.ctx.save(),this.path(f),this.ctx.clip(),r0(s.backgroundColor)||(this.ctx.fillStyle=Ic(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:N.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(O){T.ctx.save();var P=hL(i.curves),M=O.inset?0:lKe,Q=J9e(P,-M+(O.inset?1:-1)*O.spread.number,(O.inset?1:-1)*O.spread.number,O.spread.number*(O.inset?-2:2),O.spread.number*(O.inset?-2:2));O.inset?(T.path(P),T.ctx.clip(),T.mask(Q)):(T.mask(P),T.ctx.clip(),T.path(Q)),T.ctx.shadowOffsetX=O.offsetX.number+M,T.ctx.shadowOffsetY=O.offsetY.number,T.ctx.shadowColor=Ic(O.color),T.ctx.shadowBlur=O.blur.number,T.ctx.fillStyle=O.inset?Ic(O.color):"rgba(0,0,0,1)",T.ctx.fill(),T.ctx.restore()}),N.label=2;case 2:p=0,m=0,E=u,N.label=3;case 3:return m<E.length?(w=E[m],w.style!==0&&!r0(w.color)&&w.width>0?w.style!==2?[3,5]:[4,this.renderDashedDottedBorder(w.color,w.width,p,i.curves,2)]:[3,11]):[3,13];case 4:return N.sent(),[3,11];case 5:return w.style!==3?[3,7]:[4,this.renderDashedDottedBorder(w.color,w.width,p,i.curves,3)];case 6:return N.sent(),[3,11];case 7:return w.style!==4?[3,9]:[4,this.renderDoubleBorder(w.color,w.width,p,i.curves)];case 8:return N.sent(),[3,11];case 9:return[4,this.renderSolidBorder(w.color,p,i.curves)];case 10:N.sent(),N.label=11;case 11:p++,N.label=12;case 12:return m++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(i,s,c,u,f){return nu(this,void 0,void 0,function(){var p,m,E,w,T,N,O,P,M,Q,k,D,V,K,J,ie,J,ie;return Dl(this,function(fe){return this.ctx.save(),p=rKe(u,c),m=jne(u,c),f===2&&(this.path(m),this.ctx.clip()),jd(m[0])?(E=m[0].start.x,w=m[0].start.y):(E=m[0].x,w=m[0].y),jd(m[1])?(T=m[1].end.x,N=m[1].end.y):(T=m[1].x,N=m[1].y),c===0||c===2?O=Math.abs(E-T):O=Math.abs(w-N),this.ctx.beginPath(),f===3?this.formatPath(p):this.formatPath(m.slice(0,2)),P=s<3?s*3:s*2,M=s<3?s*2:s,f===3&&(P=s,M=s),Q=!0,O<=P*2?Q=!1:O<=P*2+M?(k=O/(2*P+M),P*=k,M*=k):(D=Math.floor((O+M)/(P+M)),V=(O-D*P)/(D-1),K=(O-(D+1)*P)/D,M=K<=0||Math.abs(M-V)<Math.abs(M-K)?V:K),Q&&(f===3?this.ctx.setLineDash([0,P+M]):this.ctx.setLineDash([P,M])),f===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Ic(i),this.ctx.stroke(),this.ctx.setLineDash([]),f===2&&(jd(m[0])&&(J=m[3],ie=m[0],this.ctx.beginPath(),this.formatPath([new Vr(J.end.x,J.end.y),new Vr(ie.start.x,ie.start.y)]),this.ctx.stroke()),jd(m[1])&&(J=m[1],ie=m[2],this.ctx.beginPath(),this.formatPath([new Vr(J.end.x,J.end.y),new Vr(ie.start.x,ie.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(i){return nu(this,void 0,void 0,function(){var s;return Dl(this,function(c){switch(c.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ic(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=Z9e(i),[4,this.renderStack(s)];case 1:return c.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(bfe),AKe=function(e){return e instanceof afe||e instanceof sfe?!0:e instanceof GQ&&e.type!==AL&&e.type!==uL},dKe=function(e,t){switch(e){case 0:return hL(t);case 2:return $9e(t);case 1:default:return pL(t)}},fKe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},hKe=["-apple-system","system-ui"],pKe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return hKe.indexOf(t)===-1}):e},gKe=function(e){Th(t,e);function t(i,s){var c=e.call(this,i,s)||this;return c.canvas=s.canvas?s.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),c.options=s,c.canvas.width=Math.floor(s.width*s.scale),c.canvas.height=Math.floor(s.height*s.scale),c.canvas.style.width=s.width+"px",c.canvas.style.height=s.height+"px",c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-s.x,-s.y),c.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),c}return t.prototype.render=function(i){return nu(this,void 0,void 0,function(){var s,c;return Dl(this,function(u){switch(u.label){case 0:return s=K6(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,mKe(s)];case 1:return c=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ic(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(c,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(bfe),mKe=function(e){return new Promise(function(t,i){var s=new Image;s.onload=function(){t(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},vKe=function(){function e(t){var i=t.id,s=t.enabled;this.id=i,this.enabled=s,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,DO([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,DO([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,DO([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,DO([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),_Ke=function(){function e(t,i){var s;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new vKe({id:this.instanceName,enabled:t.logging}),this.cache=(s=t.cache)!==null&&s!==void 0?s:new F9e(this,t)}return e.instanceCount=1,e}(),Cfe=function(e,t){return t===void 0&&(t={}),yKe(e,t)};typeof window<"u"&&vfe.setContext(window);var yKe=function(e,t){return nu(void 0,void 0,void 0,function(){var i,s,c,u,f,p,m,E,w,T,N,O,P,M,Q,k,D,V,K,J,fe,ie,fe,Z,pe,Y,te,le,ae,ge,se,xe,Me,Be,ke,Ke,ht,ve,Oe,Ue;return Dl(this,function(Fe){switch(Fe.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=e.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(s=i.defaultView,!s)throw new Error("Document is not attached to a Window");return c={allowTaint:(Z=t.allowTaint)!==null&&Z!==void 0?Z:!1,imageTimeout:(pe=t.imageTimeout)!==null&&pe!==void 0?pe:15e3,proxy:t.proxy,useCORS:(Y=t.useCORS)!==null&&Y!==void 0?Y:!1},u=O6({logging:(te=t.logging)!==null&&te!==void 0?te:!0,cache:t.cache},c),f={windowWidth:(le=t.windowWidth)!==null&&le!==void 0?le:s.innerWidth,windowHeight:(ae=t.windowHeight)!==null&&ae!==void 0?ae:s.innerHeight,scrollX:(ge=t.scrollX)!==null&&ge!==void 0?ge:s.pageXOffset,scrollY:(se=t.scrollY)!==null&&se!==void 0?se:s.pageYOffset},p=new hm(f.scrollX,f.scrollY,f.windowWidth,f.windowHeight),m=new _Ke(u,p),E=(xe=t.foreignObjectRendering)!==null&&xe!==void 0?xe:!1,w={allowTaint:(Me=t.allowTaint)!==null&&Me!==void 0?Me:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:E,copyStyles:E},m.logger.debug("Starting document clone with size "+p.width+"x"+p.height+" scrolled to "+-p.left+","+-p.top),T=new Vne(m,e,w),N=T.clonedReferenceElement,N?[4,T.toIFrame(i,p)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return O=Fe.sent(),P=$Q(N)||w9e(N)?JVe(N.ownerDocument):tk(m,N),M=P.width,Q=P.height,k=P.left,D=P.top,V=EKe(m,N,t.backgroundColor),K={canvas:t.canvas,backgroundColor:V,scale:(ke=(Be=t.scale)!==null&&Be!==void 0?Be:s.devicePixelRatio)!==null&&ke!==void 0?ke:1,x:((Ke=t.x)!==null&&Ke!==void 0?Ke:0)+k,y:((ht=t.y)!==null&&ht!==void 0?ht:0)+D,width:(ve=t.width)!==null&&ve!==void 0?ve:Math.ceil(M),height:(Oe=t.height)!==null&&Oe!==void 0?Oe:Math.ceil(Q)},E?(m.logger.debug("Document cloned, using foreign object rendering"),fe=new gKe(m,K),[4,fe.render(N)]):[3,3];case 2:return J=Fe.sent(),[3,5];case 3:return m.logger.debug("Document cloned, element located at "+k+","+D+" with size "+M+"x"+Q+" using computed rendering"),m.logger.debug("Starting DOM parsing"),ie=ufe(m,N),V===ie.styles.backgroundColor&&(ie.styles.backgroundColor=im.TRANSPARENT),m.logger.debug("Starting renderer for element at "+K.x+","+K.y+" with size "+K.width+"x"+K.height),fe=new uKe(m,K),[4,fe.render(ie)];case 4:J=Fe.sent(),Fe.label=5;case 5:return(!((Ue=t.removeContainer)!==null&&Ue!==void 0)||Ue)&&(Vne.destroy(O)||m.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),m.logger.debug("Finished rendering"),[2,J]}})})},EKe=function(e,t,i){var s=t.ownerDocument,c=s.documentElement?xC(e,getComputedStyle(s.documentElement).backgroundColor):im.TRANSPARENT,u=s.body?xC(e,getComputedStyle(s.body).backgroundColor):im.TRANSPARENT,f=typeof i=="string"?xC(e,i):i===null?im.TRANSPARENT:4294967295;return t===s.documentElement?r0(c)?r0(u)?f:u:c:f};const wKe=Object.freeze(Object.defineProperty({__proto__:null,default:Cfe},Symbol.toStringTag,{value:"Module"})),SKe="modulepreload",bKe=function(e){return"/"+e},Wne={},X6=function(t,i,s){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(u=>{if(u=bKe(u),u in Wne)return;Wne[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(!!s)for(let w=c.length-1;w>=0;w--){const T=c[w];if(T.href===u&&(!f||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${p}`))return;const E=document.createElement("link");if(E.rel=f?"stylesheet":SKe,f||(E.as="script",E.crossOrigin=""),E.href=u,document.head.appendChild(E),f)return new Promise((w,T)=>{E.addEventListener("load",w),E.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>t()).catch(u=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u})};function _o(e){"@babel/helpers - typeof";return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(e)}var Vl=Uint8Array,FA=Uint16Array,zQ=Int32Array,Ak=new Vl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dk=new Vl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),J6=new Vl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tfe=function(e,t){for(var i=new FA(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];for(var c=new zQ(i[30]),s=1;s<30;++s)for(var u=i[s];u<i[s+1];++u)c[u]=u-i[s]<<5|s;return{b:i,r:c}},Rfe=Tfe(Ak,2),Ife=Rfe.b,Z6=Rfe.r;Ife[28]=258,Z6[258]=28;var Ofe=Tfe(dk,0),CKe=Ofe.b,Gne=Ofe.r,e8=new FA(32768);for(var as=0;as<32768;++as){var Tv=(as&43690)>>1|(as&21845)<<1;Tv=(Tv&52428)>>2|(Tv&13107)<<2,Tv=(Tv&61680)>>4|(Tv&3855)<<4,e8[as]=((Tv&65280)>>8|(Tv&255)<<8)>>1}var Xp=function(e,t,i){for(var s=e.length,c=0,u=new FA(t);c<s;++c)e[c]&&++u[e[c]-1];var f=new FA(t);for(c=1;c<t;++c)f[c]=f[c-1]+u[c-1]<<1;var p;if(i){p=new FA(1<<t);var m=15-t;for(c=0;c<s;++c)if(e[c])for(var E=c<<4|e[c],w=t-e[c],T=f[e[c]-1]++<<w,N=T|(1<<w)-1;T<=N;++T)p[e8[T]>>m]=E}else for(p=new FA(s),c=0;c<s;++c)e[c]&&(p[c]=e8[f[e[c]-1]++]>>15-e[c]);return p},A0=new Vl(288);for(var as=0;as<144;++as)A0[as]=8;for(var as=144;as<256;++as)A0[as]=9;for(var as=256;as<280;++as)A0[as]=7;for(var as=280;as<288;++as)A0[as]=8;var bT=new Vl(32);for(var as=0;as<32;++as)bT[as]=5;var TKe=Xp(A0,9,0),RKe=Xp(A0,9,1),IKe=Xp(bT,5,0),OKe=Xp(bT,5,1),P4=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},ih=function(e,t,i){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&i},k4=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},qQ=function(e){return(e+7)/8|0},Nfe=function(e,t,i){return(t==null||t<0)&&(t=0),(i==null||i>e.length)&&(i=e.length),new Vl(e.subarray(t,i))},NKe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],lh=function(e,t,i){var s=new Error(t||NKe[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,lh),!i)throw s;return s},BKe=function(e,t,i,s){var c=e.length,u=s?s.length:0;if(!c||t.f&&!t.l)return i||new Vl(0);var f=!i,p=f||t.i!=2,m=t.i;f&&(i=new Vl(c*3));var E=function(at){var Rt=i.length;if(at>Rt){var Ot=new Vl(Math.max(Rt*2,at));Ot.set(i),i=Ot}},w=t.f||0,T=t.p||0,N=t.b||0,O=t.l,P=t.d,M=t.m,Q=t.n,k=c*8;do{if(!O){w=ih(e,T,1);var D=ih(e,T+1,3);if(T+=3,D)if(D==1)O=RKe,P=OKe,M=9,Q=5;else if(D==2){var ie=ih(e,T,31)+257,fe=ih(e,T+10,15)+4,Z=ie+ih(e,T+5,31)+1;T+=14;for(var pe=new Vl(Z),Y=new Vl(19),te=0;te<fe;++te)Y[J6[te]]=ih(e,T+te*3,7);T+=fe*3;for(var le=P4(Y),ae=(1<<le)-1,ge=Xp(Y,le,1),te=0;te<Z;){var se=ge[ih(e,T,ae)];T+=se&15;var V=se>>4;if(V<16)pe[te++]=V;else{var xe=0,Me=0;for(V==16?(Me=3+ih(e,T,3),T+=2,xe=pe[te-1]):V==17?(Me=3+ih(e,T,7),T+=3):V==18&&(Me=11+ih(e,T,127),T+=7);Me--;)pe[te++]=xe}}var Be=pe.subarray(0,ie),ke=pe.subarray(ie);M=P4(Be),Q=P4(ke),O=Xp(Be,M,1),P=Xp(ke,Q,1)}else lh(1);else{var V=qQ(T)+4,K=e[V-4]|e[V-3]<<8,J=V+K;if(J>c){m&&lh(0);break}p&&E(N+K),i.set(e.subarray(V,J),N),t.b=N+=K,t.p=T=J*8,t.f=w;continue}if(T>k){m&&lh(0);break}}p&&E(N+131072);for(var Ke=(1<<M)-1,ht=(1<<Q)-1,ve=T;;ve=T){var xe=O[k4(e,T)&Ke],Oe=xe>>4;if(T+=xe&15,T>k){m&&lh(0);break}if(xe||lh(2),Oe<256)i[N++]=Oe;else if(Oe==256){ve=T,O=null;break}else{var Ue=Oe-254;if(Oe>264){var te=Oe-257,Fe=Ak[te];Ue=ih(e,T,(1<<Fe)-1)+Ife[te],T+=Fe}var Qe=P[k4(e,T)&ht],We=Qe>>4;Qe||lh(3),T+=Qe&15;var ke=CKe[We];if(We>3){var Fe=dk[We];ke+=k4(e,T)&(1<<Fe)-1,T+=Fe}if(T>k){m&&lh(0);break}p&&E(N+131072);var et=N+Ue;if(N<ke){var Ze=u-ke,pt=Math.min(ke,et);for(Ze+N<0&&lh(3);N<pt;++N)i[N]=s[Ze+N]}for(;N<et;++N)i[N]=i[N-ke]}}t.l=O,t.p=ve,t.b=N,t.f=w,O&&(w=1,t.m=M,t.d=P,t.n=Q)}while(!w);return N!=i.length&&f?Nfe(i,0,N):i.subarray(0,N)},Yg=function(e,t,i){i<<=t&7;var s=t/8|0;e[s]|=i,e[s+1]|=i>>8},Hb=function(e,t,i){i<<=t&7;var s=t/8|0;e[s]|=i,e[s+1]|=i>>8,e[s+2]|=i>>16},D4=function(e,t){for(var i=[],s=0;s<e.length;++s)e[s]&&i.push({s,f:e[s]});var c=i.length,u=i.slice();if(!c)return{t:Lfe,l:0};if(c==1){var f=new Vl(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort(function(J,ie){return J.f-ie.f}),i.push({s:-1,f:25001});var p=i[0],m=i[1],E=0,w=1,T=2;for(i[0]={s:-1,f:p.f+m.f,l:p,r:m};w!=c-1;)p=i[i[E].f<i[T].f?E++:T++],m=i[E!=w&&i[E].f<i[T].f?E++:T++],i[w++]={s:-1,f:p.f+m.f,l:p,r:m};for(var N=u[0].s,s=1;s<c;++s)u[s].s>N&&(N=u[s].s);var O=new FA(N+1),P=t8(i[w-1],O,0);if(P>t){var s=0,M=0,Q=P-t,k=1<<Q;for(u.sort(function(ie,fe){return O[fe.s]-O[ie.s]||ie.f-fe.f});s<c;++s){var D=u[s].s;if(O[D]>t)M+=k-(1<<P-O[D]),O[D]=t;else break}for(M>>=Q;M>0;){var V=u[s].s;O[V]<t?M-=1<<t-O[V]++-1:++s}for(;s>=0&&M;--s){var K=u[s].s;O[K]==t&&(--O[K],++M)}P=t}return{t:new Vl(O),l:P}},t8=function(e,t,i){return e.s==-1?Math.max(t8(e.l,t,i+1),t8(e.r,t,i+1)):t[e.s]=i},$ne=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new FA(++t),s=0,c=e[0],u=1,f=function(m){i[s++]=m},p=1;p<=t;++p)if(e[p]==c&&p!=t)++u;else{if(!c&&u>2){for(;u>138;u-=138)f(32754);u>2&&(f(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(f(c),--u;u>6;u-=6)f(8304);u>2&&(f(u-3<<5|8208),u=0)}for(;u--;)f(c);u=1,c=e[p]}return{c:i.subarray(0,s),n:t}},jb=function(e,t){for(var i=0,s=0;s<t.length;++s)i+=e[s]*t[s];return i},Bfe=function(e,t,i){var s=i.length,c=qQ(t+2);e[c]=s&255,e[c+1]=s>>8,e[c+2]=e[c]^255,e[c+3]=e[c+1]^255;for(var u=0;u<s;++u)e[c+u+4]=i[u];return(c+4+s)*8},zne=function(e,t,i,s,c,u,f,p,m,E,w){Yg(t,w++,i),++c[256];for(var T=D4(c,15),N=T.t,O=T.l,P=D4(u,15),M=P.t,Q=P.l,k=$ne(N),D=k.c,V=k.n,K=$ne(M),J=K.c,ie=K.n,fe=new FA(19),Z=0;Z<D.length;++Z)++fe[D[Z]&31];for(var Z=0;Z<J.length;++Z)++fe[J[Z]&31];for(var pe=D4(fe,7),Y=pe.t,te=pe.l,le=19;le>4&&!Y[J6[le-1]];--le);var ae=E+5<<3,ge=jb(c,A0)+jb(u,bT)+f,se=jb(c,N)+jb(u,M)+f+14+3*le+jb(fe,Y)+2*fe[16]+3*fe[17]+7*fe[18];if(m>=0&&ae<=ge&&ae<=se)return Bfe(t,w,e.subarray(m,m+E));var xe,Me,Be,ke;if(Yg(t,w,1+(se<ge)),w+=2,se<ge){xe=Xp(N,O,0),Me=N,Be=Xp(M,Q,0),ke=M;var Ke=Xp(Y,te,0);Yg(t,w,V-257),Yg(t,w+5,ie-1),Yg(t,w+10,le-4),w+=14;for(var Z=0;Z<le;++Z)Yg(t,w+3*Z,Y[J6[Z]]);w+=3*le;for(var ht=[D,J],ve=0;ve<2;++ve)for(var Oe=ht[ve],Z=0;Z<Oe.length;++Z){var Ue=Oe[Z]&31;Yg(t,w,Ke[Ue]),w+=Y[Ue],Ue>15&&(Yg(t,w,Oe[Z]>>5&127),w+=Oe[Z]>>12)}}else xe=TKe,Me=A0,Be=IKe,ke=bT;for(var Z=0;Z<p;++Z){var Fe=s[Z];if(Fe>255){var Ue=Fe>>18&31;Hb(t,w,xe[Ue+257]),w+=Me[Ue+257],Ue>7&&(Yg(t,w,Fe>>23&31),w+=Ak[Ue]);var Qe=Fe&31;Hb(t,w,Be[Qe]),w+=ke[Qe],Qe>3&&(Hb(t,w,Fe>>5&8191),w+=dk[Qe])}else Hb(t,w,xe[Fe]),w+=Me[Fe]}return Hb(t,w,xe[256]),w+Me[256]},LKe=new zQ([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lfe=new Vl(0),PKe=function(e,t,i,s,c,u){var f=u.z||e.length,p=new Vl(s+f+5*(1+Math.ceil(f/7e3))+c),m=p.subarray(s,p.length-c),E=u.l,w=(u.r||0)&7;if(t){w&&(m[0]=u.r>>3);for(var T=LKe[t-1],N=T>>13,O=T&8191,P=(1<<i)-1,M=u.p||new FA(32768),Q=u.h||new FA(P+1),k=Math.ceil(i/3),D=2*k,V=function(Ft){return(e[Ft]^e[Ft+1]<<k^e[Ft+2]<<D)&P},K=new zQ(25e3),J=new FA(288),ie=new FA(32),fe=0,Z=0,pe=u.i||0,Y=0,te=u.w||0,le=0;pe+2<f;++pe){var ae=V(pe),ge=pe&32767,se=Q[ae];if(M[ge]=se,Q[ae]=ge,te<=pe){var xe=f-pe;if((fe>7e3||Y>24576)&&(xe>423||!E)){w=zne(e,m,0,K,J,ie,Z,Y,le,pe-le,w),Y=fe=Z=0,le=pe;for(var Me=0;Me<286;++Me)J[Me]=0;for(var Me=0;Me<30;++Me)ie[Me]=0}var Be=2,ke=0,Ke=O,ht=ge-se&32767;if(xe>2&&ae==V(pe-ht))for(var ve=Math.min(N,xe)-1,Oe=Math.min(32767,pe),Ue=Math.min(258,xe);ht<=Oe&&--Ke&&ge!=se;){if(e[pe+Be]==e[pe+Be-ht]){for(var Fe=0;Fe<Ue&&e[pe+Fe]==e[pe+Fe-ht];++Fe);if(Fe>Be){if(Be=Fe,ke=ht,Fe>ve)break;for(var Qe=Math.min(ht,Fe-2),We=0,Me=0;Me<Qe;++Me){var et=pe-ht+Me&32767,Ze=M[et],pt=et-Ze&32767;pt>We&&(We=pt,se=et)}}}ge=se,se=M[ge],ht+=ge-se&32767}if(ke){K[Y++]=268435456|Z6[Be]<<18|Gne[ke];var at=Z6[Be]&31,Rt=Gne[ke]&31;Z+=Ak[at]+dk[Rt],++J[257+at],++ie[Rt],te=pe+Be,++fe}else K[Y++]=e[pe],++J[e[pe]]}}for(pe=Math.max(pe,te);pe<f;++pe)K[Y++]=e[pe],++J[e[pe]];w=zne(e,m,E,K,J,ie,Z,Y,le,pe-le,w),E||(u.r=w&7|m[w/8|0]<<3,w-=7,u.h=Q,u.p=M,u.i=pe,u.w=te)}else{for(var pe=u.w||0;pe<f+E;pe+=65535){var Ot=pe+65535;Ot>=f&&(m[w/8|0]=E,Ot=f),w=Bfe(m,w+1,e.subarray(pe,Ot))}u.i=f}return Nfe(p,0,s+qQ(w)+c)},Pfe=function(){var e=1,t=0;return{p:function(i){for(var s=e,c=t,u=i.length|0,f=0;f!=u;){for(var p=Math.min(f+2655,u);f<p;++f)c+=s+=i[f];s=(s&65535)+15*(s>>16),c=(c&65535)+15*(c>>16)}e=s,t=c},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},kKe=function(e,t,i,s,c){if(!c&&(c={l:1},t.dictionary)){var u=t.dictionary.subarray(-32768),f=new Vl(u.length+e.length);f.set(u),f.set(e,u.length),e=f,c.w=u.length}return PKe(e,t.level==null?6:t.level,t.mem==null?c.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,i,s,c)},kfe=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},DKe=function(e,t){var i=t.level,s=i==0?0:i<6?1:i==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var c=Pfe();c.p(t.dictionary),kfe(e,2,c.d())}},xKe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&lh(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&lh(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function r8(e,t){t||(t={});var i=Pfe();i.p(e);var s=kKe(e,t,t.dictionary?6:2,4);return DKe(s,t),kfe(s,s.length-4,i.d()),s}function UKe(e,t){return BKe(e.subarray(xKe(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var MKe=typeof TextDecoder<"u"&&new TextDecoder,FKe=0;try{MKe.decode(Lfe,{stream:!0}),FKe=1}catch{}var In=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function x4(){In.console&&typeof In.console.log=="function"&&In.console.log.apply(In.console,arguments)}var jo={log:x4,warn:function(e){In.console&&(typeof In.console.warn=="function"?In.console.warn.apply(In.console,arguments):x4.call(null,arguments))},error:function(e){In.console&&(typeof In.console.error=="function"?In.console.error.apply(In.console,arguments):x4(e))}};function U4(e,t,i){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){P1(s.response,t,i)},s.onerror=function(){jo.error("could not download file")},s.send()}function qne(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function iN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var VC,n8,P1=In.saveAs||((typeof window>"u"?"undefined":_o(window))!=="object"||window!==In?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,i){var s=In.URL||In.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener",typeof e=="string"?(c.href=e,c.origin!==location.origin?qne(c.href)?U4(e,t,i):iN(c,c.target="_blank"):iN(c)):(c.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){iN(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,i){if(t=t||e.name||"download",typeof e=="string")if(qne(e))U4(e,t,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){iN(s)})}else navigator.msSaveOrOpenBlob(function(c,u){return u===void 0?u={autoBom:!1}:_o(u)!=="object"&&(jo.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob([String.fromCharCode(65279),c],{type:c.type}):c}(e,i),t)}:function(e,t,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return U4(e,t,i);var c=e.type==="application/octet-stream",u=/constructor/i.test(In.HTMLElement)||In.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||c&&u)&&(typeof FileReader>"u"?"undefined":_o(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var w=p.result;w=f?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=w:location=w,s=null},p.readAsDataURL(e)}else{var m=In.URL||In.webkitURL,E=m.createObjectURL(e);s?s.location=E:location.href=E,s=null,setTimeout(function(){m.revokeObjectURL(E)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Dfe(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],s=0;s<i.length;s++){var c=i[s].re,u=i[s].process,f=c.exec(e);f&&(t=u(f),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),m=this.g.toString(16),E=this.b.toString(16);return p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),E.length==1&&(E="0"+E),"#"+p+m+E}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function M4(e,t){var i=e[0],s=e[1],c=e[2],u=e[3];i=Nl(i,s,c,u,t[0],7,-680876936),u=Nl(u,i,s,c,t[1],12,-389564586),c=Nl(c,u,i,s,t[2],17,606105819),s=Nl(s,c,u,i,t[3],22,-1044525330),i=Nl(i,s,c,u,t[4],7,-176418897),u=Nl(u,i,s,c,t[5],12,1200080426),c=Nl(c,u,i,s,t[6],17,-1473231341),s=Nl(s,c,u,i,t[7],22,-45705983),i=Nl(i,s,c,u,t[8],7,1770035416),u=Nl(u,i,s,c,t[9],12,-1958414417),c=Nl(c,u,i,s,t[10],17,-42063),s=Nl(s,c,u,i,t[11],22,-1990404162),i=Nl(i,s,c,u,t[12],7,1804603682),u=Nl(u,i,s,c,t[13],12,-40341101),c=Nl(c,u,i,s,t[14],17,-1502002290),i=Bl(i,s=Nl(s,c,u,i,t[15],22,1236535329),c,u,t[1],5,-165796510),u=Bl(u,i,s,c,t[6],9,-1069501632),c=Bl(c,u,i,s,t[11],14,643717713),s=Bl(s,c,u,i,t[0],20,-373897302),i=Bl(i,s,c,u,t[5],5,-701558691),u=Bl(u,i,s,c,t[10],9,38016083),c=Bl(c,u,i,s,t[15],14,-660478335),s=Bl(s,c,u,i,t[4],20,-405537848),i=Bl(i,s,c,u,t[9],5,568446438),u=Bl(u,i,s,c,t[14],9,-1019803690),c=Bl(c,u,i,s,t[3],14,-187363961),s=Bl(s,c,u,i,t[8],20,1163531501),i=Bl(i,s,c,u,t[13],5,-1444681467),u=Bl(u,i,s,c,t[2],9,-51403784),c=Bl(c,u,i,s,t[7],14,1735328473),i=Ll(i,s=Bl(s,c,u,i,t[12],20,-1926607734),c,u,t[5],4,-378558),u=Ll(u,i,s,c,t[8],11,-2022574463),c=Ll(c,u,i,s,t[11],16,1839030562),s=Ll(s,c,u,i,t[14],23,-35309556),i=Ll(i,s,c,u,t[1],4,-1530992060),u=Ll(u,i,s,c,t[4],11,1272893353),c=Ll(c,u,i,s,t[7],16,-155497632),s=Ll(s,c,u,i,t[10],23,-1094730640),i=Ll(i,s,c,u,t[13],4,681279174),u=Ll(u,i,s,c,t[0],11,-358537222),c=Ll(c,u,i,s,t[3],16,-722521979),s=Ll(s,c,u,i,t[6],23,76029189),i=Ll(i,s,c,u,t[9],4,-640364487),u=Ll(u,i,s,c,t[12],11,-421815835),c=Ll(c,u,i,s,t[15],16,530742520),i=Pl(i,s=Ll(s,c,u,i,t[2],23,-995338651),c,u,t[0],6,-198630844),u=Pl(u,i,s,c,t[7],10,1126891415),c=Pl(c,u,i,s,t[14],15,-1416354905),s=Pl(s,c,u,i,t[5],21,-57434055),i=Pl(i,s,c,u,t[12],6,1700485571),u=Pl(u,i,s,c,t[3],10,-1894986606),c=Pl(c,u,i,s,t[10],15,-1051523),s=Pl(s,c,u,i,t[1],21,-2054922799),i=Pl(i,s,c,u,t[8],6,1873313359),u=Pl(u,i,s,c,t[15],10,-30611744),c=Pl(c,u,i,s,t[6],15,-1560198380),s=Pl(s,c,u,i,t[13],21,1309151649),i=Pl(i,s,c,u,t[4],6,-145523070),u=Pl(u,i,s,c,t[11],10,-1120210379),c=Pl(c,u,i,s,t[2],15,718787259),s=Pl(s,c,u,i,t[9],21,-343485551),e[0]=jv(i,e[0]),e[1]=jv(s,e[1]),e[2]=jv(c,e[2]),e[3]=jv(u,e[3])}function fk(e,t,i,s,c,u){return t=jv(jv(t,e),jv(s,u)),jv(t<<c|t>>>32-c,i)}function Nl(e,t,i,s,c,u,f){return fk(t&i|~t&s,e,t,c,u,f)}function Bl(e,t,i,s,c,u,f){return fk(t&s|i&~s,e,t,c,u,f)}function Ll(e,t,i,s,c,u,f){return fk(t^i^s,e,t,c,u,f)}function Pl(e,t,i,s,c,u,f){return fk(i^(t|~s),e,t,c,u,f)}function xfe(e){var t,i=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)M4(s,VKe(e.substring(t-64,t)));e=e.substring(t-64);var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)c[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(c[t>>2]|=128<<(t%4<<3),t>55)for(M4(s,c),t=0;t<16;t++)c[t]=0;return c[14]=8*i,M4(s,c),s}function VKe(e){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}VC=In.atob.bind(In),n8=In.btoa.bind(In);var Yne="0123456789abcdef".split("");function QKe(e){for(var t="",i=0;i<4;i++)t+=Yne[e>>8*i+4&15]+Yne[e>>8*i&15];return t}function HKe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function i8(e){return xfe(e).map(HKe).join("")}var jKe=function(e){for(var t=0;t<e.length;t++)e[t]=QKe(e[t]);return e.join("")}(xfe("hello"))!="5d41402abc4b2a76b9719d911017c592";function jv(e,t){if(jKe){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function o8(e,t){var i,s,c,u;if(e!==i){for(var f=(c=e,u=1+(256/e.length>>0),new Array(u+1).join(c)),p=[],m=0;m<256;m++)p[m]=m;var E=0;for(m=0;m<256;m++){var w=p[m];E=(E+w+f.charCodeAt(m))%256,p[m]=p[E],p[E]=w}i=e,s=p}else p=s;var T=t.length,N=0,O=0,P="";for(m=0;m<T;m++)O=(O+(w=p[N=(N+1)%256]))%256,p[N]=p[O],p[O]=w,f=p[(p[N]+p[O])%256],P+=String.fromCharCode(t.charCodeAt(m)^f);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Xne={print:4,modify:8,copy:16,"annot-forms":32};function OE(e,t,i,s){this.v=1,this.r=2;var c=192;e.forEach(function(p){if(Xne.perm!==void 0)throw new Error("Invalid permission: "+p);c+=Xne[p]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var u=(t+this.padding).substr(0,32),f=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,f),this.P=-(1+(255^c)),this.encryptionKey=i8(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=o8(this.encryptionKey,this.padding)}function NE(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",i=e.length,s=0;s<i;s++){var c=e.charCodeAt(s);c<33||c===35||c===37||c===40||c===41||c===47||c===60||c===62||c===91||c===93||c===123||c===125||c>126?t+="#"+("0"+c.toString(16)).slice(-2):t+=e[s]}return t}function Jne(e){if(_o(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(i,s,c){if(c=c||!1,typeof i!="string"||typeof s!="function"||typeof c!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(i)||(t[i]={});var u=Math.random().toString(35);return t[i][u]=[s,!!c],u},this.unsubscribe=function(i){for(var s in t)if(t[s][i])return delete t[s][i],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(i){if(t.hasOwnProperty(i)){var s=Array.prototype.slice.call(arguments,1),c=[];for(var u in t[i]){var f=t[i][u];try{f[0].apply(e,s)}catch(p){In.console&&jo.error("jsPDF PubSub Error",p.message,p)}f[1]&&c.push(u)}c.length&&c.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function mL(e){if(!(this instanceof mL))return new mL(e);var t="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&t.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function Ufe(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function x1(e,t,i,s,c){if(!(this instanceof x1))return new x1(e,t,i,s,c);this.type=e==="axial"?2:3,this.coords=t,this.colors=i,Ufe.call(this,s,c)}function KE(e,t,i,s,c){if(!(this instanceof KE))return new KE(e,t,i,s,c);this.boundingBox=e,this.xStep=t,this.yStep=i,this.stream="",this.cloneIndex=0,Ufe.call(this,s,c)}function Rn(e){var t,i=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],c=arguments[2],u=arguments[3],f=[],p=1,m=16,E="S",w=null;_o(e=e||{})==="object"&&(i=e.orientation,s=e.unit||s,c=e.format||c,u=e.compress||e.compressPdf||u,(w=e.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),p=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(m=e.floatPrecision),E=e.defaultPathOperation||"S"),f=e.filters||(u===!0?["FlateEncode"]:f),s=s||"mm",i=(""+(i||"P")).toLowerCase();var T=e.putOnlyUsedFonts||!1,N={},O={internal:{},__private__:{}};O.__private__.PubSub=Jne;var P="1.3",M=O.__private__.getPdfVersion=function(){return P};O.__private__.setPdfVersion=function(j){P=j};var Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};O.__private__.getPageFormats=function(){return Q};var k=O.__private__.getPageFormat=function(j){return Q[j]};c=c||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},V=D.COMPAT;function K(){this.saveGraphicsState(),He(new kr(vt,0,0,-vt,0,jc()*vt).toString()+" cm"),this.setFontSize(this.getFontSize()/vt),E="n",V=D.ADVANCED}function J(){this.restoreGraphicsState(),E="S",V=D.COMPAT}var ie=O.__private__.combineFontStyleAndFontWeight=function(j,we){if(j=="bold"&&we=="normal"||j=="bold"&&we==400||j=="normal"&&we=="italic"||j=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(j=we==400||we==="normal"?j==="italic"?"italic":"normal":we!=700&&we!=="bold"||j!=="normal"?(we==700?"bold":we)+""+j:"bold"),j};O.advancedAPI=function(j){var we=V===D.COMPAT;return we&&K.call(this),typeof j!="function"||(j(this),we&&J.call(this)),this},O.compatAPI=function(j){var we=V===D.ADVANCED;return we&&J.call(this),typeof j!="function"||(j(this),we&&K.call(this)),this},O.isAdvancedAPI=function(){return V===D.ADVANCED};var fe,Z=function(j){if(V!==D.ADVANCED)throw new Error(j+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},pe=O.roundToPrecision=O.__private__.roundToPrecision=function(j,we){var $e=t||we;if(isNaN(j)||isNaN($e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return j.toFixed($e).replace(/0+$/,"")};fe=O.hpf=O.__private__.hpf=typeof m=="number"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(j,m)}:m==="smart"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(j,j>-1&&j<1?16:5)}:function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return pe(j,16)};var Y=O.f2=O.__private__.f2=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f2");return pe(j,2)},te=O.__private__.f3=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f3");return pe(j,3)},le=O.scale=O.__private__.scale=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.scale");return V===D.COMPAT?j*vt:V===D.ADVANCED?j:void 0},ae=function(j){return V===D.COMPAT?jc()-j:V===D.ADVANCED?j:void 0},ge=function(j){return le(ae(j))};O.__private__.setPrecision=O.setPrecision=function(j){typeof parseInt(j,10)=="number"&&(t=parseInt(j,10))};var se,xe="00000000000000000000000000000000",Me=O.__private__.getFileId=function(){return xe},Be=O.__private__.setFileId=function(j){return xe=j!==void 0&&/^[a-fA-F0-9]{32}$/.test(j)?j.toUpperCase():xe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(Ba=new OE(w.userPermissions,w.userPassword,w.ownerPassword,xe)),xe};O.setFileId=function(j){return Be(j),this},O.getFileId=function(){return Me()};var ke=O.__private__.convertDateToPDFDate=function(j){var we=j.getTimezoneOffset(),$e=we<0?"+":"-",Ye=Math.floor(Math.abs(we/60)),gt=Math.abs(we%60),Dt=[$e,Ue(Ye),"'",Ue(gt),"'"].join("");return["D:",j.getFullYear(),Ue(j.getMonth()+1),Ue(j.getDate()),Ue(j.getHours()),Ue(j.getMinutes()),Ue(j.getSeconds()),Dt].join("")},Ke=O.__private__.convertPDFDateToDate=function(j){var we=parseInt(j.substr(2,4),10),$e=parseInt(j.substr(6,2),10)-1,Ye=parseInt(j.substr(8,2),10),gt=parseInt(j.substr(10,2),10),Dt=parseInt(j.substr(12,2),10),Gt=parseInt(j.substr(14,2),10);return new Date(we,$e,Ye,gt,Dt,Gt,0)},ht=O.__private__.setCreationDate=function(j){var we;if(j===void 0&&(j=new Date),j instanceof Date)we=ke(j);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(j))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=j}return se=we},ve=O.__private__.getCreationDate=function(j){var we=se;return j==="jsDate"&&(we=Ke(se)),we};O.setCreationDate=function(j){return ht(j),this},O.getCreationDate=function(j){return ve(j)};var Oe,Ue=O.__private__.padd2=function(j){return("0"+parseInt(j)).slice(-2)},Fe=O.__private__.padd2Hex=function(j){return("00"+(j=j.toString())).substr(j.length)},Qe=0,We=[],et=[],Ze=0,pt=[],at=[],Rt=!1,Ot=et,Ft=function(){Qe=0,Ze=0,et=[],We=[],pt=[],Zo=uo(),Es=uo()};O.__private__.setCustomOutputDestination=function(j){Rt=!0,Ot=j};var lt=function(j){Rt||(Ot=j)};O.__private__.resetCustomOutputDestination=function(){Rt=!1,Ot=et};var He=O.__private__.out=function(j){return j=j.toString(),Ze+=j.length+1,Ot.push(j),Ot},vr=O.__private__.write=function(j){return He(arguments.length===1?j.toString():Array.prototype.join.call(arguments," "))},qt=O.__private__.getArrayBuffer=function(j){for(var we=j.length,$e=new ArrayBuffer(we),Ye=new Uint8Array($e);we--;)Ye[we]=j.charCodeAt(we);return $e},Nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];O.__private__.getStandardFonts=function(){return Nt};var It=e.fontSize||16;O.__private__.setFontSize=O.setFontSize=function(j){return It=V===D.ADVANCED?j/vt:j,this};var Yt,Bt=O.__private__.getFontSize=O.getFontSize=function(){return V===D.COMPAT?It:It*vt},_r=e.R2L||!1;O.__private__.setR2L=O.setR2L=function(j){return _r=j,this},O.__private__.getR2L=O.getR2L=function(){return _r};var ar,zr=O.__private__.setZoomMode=function(j){var we=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(j))Yt=j;else if(isNaN(j)){if(we.indexOf(j)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+j+'" is not recognized.');Yt=j}else Yt=parseInt(j,10)};O.__private__.getZoomMode=function(){return Yt};var Xr,Kt=O.__private__.setPageMode=function(j){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(j)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+j+'" is not recognized.');ar=j};O.__private__.getPageMode=function(){return ar};var yr=O.__private__.setLayoutMode=function(j){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(j)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+j+'" is not recognized.');Xr=j};O.__private__.getLayoutMode=function(){return Xr},O.__private__.setDisplayMode=O.setDisplayMode=function(j,we,$e){return zr(j),yr(we),Kt($e),this};var nr={title:"",subject:"",author:"",keywords:"",creator:""};O.__private__.getDocumentProperty=function(j){if(Object.keys(nr).indexOf(j)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nr[j]},O.__private__.getDocumentProperties=function(){return nr},O.__private__.setDocumentProperties=O.setProperties=O.setDocumentProperties=function(j){for(var we in nr)nr.hasOwnProperty(we)&&j[we]&&(nr[we]=j[we]);return this},O.__private__.setDocumentProperty=function(j,we){if(Object.keys(nr).indexOf(j)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nr[j]=we};var er,vt,tn,Rr,on,sr={},Mr={},Tr=[],rn={},Sr={},ai={},Ei={},ti=null,dn=0,Qr=[],yn=new Jne(O),wi=e.hotfixes||[],br={},Pi={},ki=[],kr=function j(we,$e,Ye,gt,Dt,Gt){if(!(this instanceof j))return new j(we,$e,Ye,gt,Dt,Gt);isNaN(we)&&(we=1),isNaN($e)&&($e=0),isNaN(Ye)&&(Ye=0),isNaN(gt)&&(gt=1),isNaN(Dt)&&(Dt=0),isNaN(Gt)&&(Gt=0),this._matrix=[we,$e,Ye,gt,Dt,Gt]};Object.defineProperty(kr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(kr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(kr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(kr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(kr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(kr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(kr.prototype,"a",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(kr.prototype,"b",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(kr.prototype,"c",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(kr.prototype,"d",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(kr.prototype,"e",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(kr.prototype,"f",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(kr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(kr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(kr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(kr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),kr.prototype.join=function(j){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(j)},kr.prototype.multiply=function(j){var we=j.sx*this.sx+j.shy*this.shx,$e=j.sx*this.shy+j.shy*this.sy,Ye=j.shx*this.sx+j.sy*this.shx,gt=j.shx*this.shy+j.sy*this.sy,Dt=j.tx*this.sx+j.ty*this.shx+this.tx,Gt=j.tx*this.shy+j.ty*this.sy+this.ty;return new kr(we,$e,Ye,gt,Dt,Gt)},kr.prototype.decompose=function(){var j=this.sx,we=this.shy,$e=this.shx,Ye=this.sy,gt=this.tx,Dt=this.ty,Gt=Math.sqrt(j*j+we*we),Lr=(j/=Gt)*$e+(we/=Gt)*Ye;$e-=j*Lr,Ye-=we*Lr;var Jr=Math.sqrt($e*$e+Ye*Ye);return Lr/=Jr,j*(Ye/=Jr)<we*($e/=Jr)&&(j=-j,we=-we,Lr=-Lr,Gt=-Gt),{scale:new kr(Gt,0,0,Jr,0,0),translate:new kr(1,0,0,1,gt,Dt),rotate:new kr(j,we,-we,j,0,0),skew:new kr(1,0,Lr,1,0,0)}},kr.prototype.toString=function(j){return this.join(" ")},kr.prototype.inversed=function(){var j=this.sx,we=this.shy,$e=this.shx,Ye=this.sy,gt=this.tx,Dt=this.ty,Gt=1/(j*Ye-we*$e),Lr=Ye*Gt,Jr=-we*Gt,En=-$e*Gt,On=j*Gt;return new kr(Lr,Jr,En,On,-Lr*gt-En*Dt,-Jr*gt-On*Dt)},kr.prototype.applyToPoint=function(j){var we=j.x*this.sx+j.y*this.shx+this.tx,$e=j.x*this.shy+j.y*this.sy+this.ty;return new Mh(we,$e)},kr.prototype.applyToRectangle=function(j){var we=this.applyToPoint(j),$e=this.applyToPoint(new Mh(j.x+j.w,j.y+j.h));return new fl(we.x,we.y,$e.x-we.x,$e.y-we.y)},kr.prototype.clone=function(){var j=this.sx,we=this.shy,$e=this.shx,Ye=this.sy,gt=this.tx,Dt=this.ty;return new kr(j,we,$e,Ye,gt,Dt)},O.Matrix=kr;var $a=O.matrixMult=function(j,we){return we.multiply(j)},ls=new kr(1,0,0,1,0,0);O.unitMatrix=O.identityMatrix=ls;var _s=function(j,we){if(!Sr[j]){var $e=(we instanceof x1?"Sh":"P")+(Object.keys(rn).length+1).toString(10);we.id=$e,Sr[j]=$e,rn[$e]=we,yn.publish("addPattern",we)}};O.ShadingPattern=x1,O.TilingPattern=KE,O.addShadingPattern=function(j,we){return Z("addShadingPattern()"),_s(j,we),this},O.beginTilingPattern=function(j){Z("beginTilingPattern()"),Om(j.boundingBox[0],j.boundingBox[1],j.boundingBox[2]-j.boundingBox[0],j.boundingBox[3]-j.boundingBox[1],j.matrix)},O.endTilingPattern=function(j,we){Z("endTilingPattern()"),we.stream=at[Oe].join(`
`),_s(j,we),yn.publish("endTilingPattern",we),ki.pop().restore()};var ro=O.__private__.newObject=function(){var j=uo();return ys(j,!0),j},uo=O.__private__.newObjectDeferred=function(){return Qe++,We[Qe]=function(){return Ze},Qe},ys=function(j,we){return we=typeof we=="boolean"&&we,We[j]=Ze,we&&He(j+" 0 obj"),j},Uc=O.__private__.newAdditionalObject=function(){var j={objId:uo(),content:""};return pt.push(j),j},Zo=uo(),Es=uo(),hc=O.__private__.decodeColorString=function(j){var we=j.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length===5&&(we[4]==="k"||we[4]==="K")&&(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var $e=parseFloat(we[0]);we=[$e,$e,$e,"r"]}for(var Ye="#",gt=0;gt<3;gt++)Ye+=("0"+Math.floor(255*parseFloat(we[gt])).toString(16)).slice(-2);return Ye},es=O.__private__.encodeColorString=function(j){var we;typeof j=="string"&&(j={ch1:j});var $e=j.ch1,Ye=j.ch2,gt=j.ch3,Dt=j.ch4,Gt=j.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof $e=="string"&&$e.charAt(0)!=="#"){var Lr=new Dfe($e);if(Lr.ok)$e=Lr.toHex();else if(!/^\d*\.?\d*$/.test($e))throw new Error('Invalid color "'+$e+'" passed to jsPDF.encodeColorString.')}if(typeof $e=="string"&&/^#[0-9A-Fa-f]{3}$/.test($e)&&($e="#"+$e[1]+$e[1]+$e[2]+$e[2]+$e[3]+$e[3]),typeof $e=="string"&&/^#[0-9A-Fa-f]{6}$/.test($e)){var Jr=parseInt($e.substr(1),16);$e=Jr>>16&255,Ye=Jr>>8&255,gt=255&Jr}if(Ye===void 0||Dt===void 0&&$e===Ye&&Ye===gt)if(typeof $e=="string")we=$e+" "+Gt[0];else switch(j.precision){case 2:we=Y($e/255)+" "+Gt[0];break;case 3:default:we=te($e/255)+" "+Gt[0]}else if(Dt===void 0||_o(Dt)==="object"){if(Dt&&!isNaN(Dt.a)&&Dt.a===0)return we=["1.","1.","1.",Gt[1]].join(" ");if(typeof $e=="string")we=[$e,Ye,gt,Gt[1]].join(" ");else switch(j.precision){case 2:we=[Y($e/255),Y(Ye/255),Y(gt/255),Gt[1]].join(" ");break;default:case 3:we=[te($e/255),te(Ye/255),te(gt/255),Gt[1]].join(" ")}}else if(typeof $e=="string")we=[$e,Ye,gt,Dt,Gt[2]].join(" ");else switch(j.precision){case 2:we=[Y($e),Y(Ye),Y(gt),Y(Dt),Gt[2]].join(" ");break;case 3:default:we=[te($e),te(Ye),te(gt),te(Dt),Gt[2]].join(" ")}return we},ul=O.__private__.getFilters=function(){return f},js=O.__private__.putStream=function(j){var we=(j=j||{}).data||"",$e=j.filters||ul(),Ye=j.alreadyAppliedFilters||[],gt=j.addLength1||!1,Dt=we.length,Gt=j.objectId,Lr=function(ca){return ca};if(w!==null&&Gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Lr=Ba.encryptor(Gt,0));var Jr={};$e===!0&&($e=["FlateEncode"]);var En=j.additionalKeyValues||[],On=(Jr=Rn.API.processDataByFilters!==void 0?Rn.API.processDataByFilters(we,$e):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(Ye)?Ye.join(" "):Ye.toString());if(Jr.data.length!==0&&(En.push({key:"Length",value:Jr.data.length}),gt===!0&&En.push({key:"Length1",value:Dt})),On.length!=0)if(On.split("/").length-1==1)En.push({key:"Filter",value:On});else{En.push({key:"Filter",value:"["+On+"]"});for(var ci=0;ci<En.length;ci+=1)if(En[ci].key==="DecodeParms"){for(var Ao=[],So=0;So<Jr.reverseChain.split("/").length-1;So+=1)Ao.push("null");Ao.push(En[ci].value),En[ci].value="["+Ao.join(" ")+"]"}}He("<<");for(var ns=0;ns<En.length;ns++)He("/"+En[ns].key+" "+En[ns].value);He(">>"),Jr.data.length!==0&&(He("stream"),He(Lr(Jr.data)),He("endstream"))},ts=O.__private__.putPage=function(j){var we=j.number,$e=j.data,Ye=j.objId,gt=j.contentsObjId;ys(Ye,!0),He("<</Type /Page"),He("/Parent "+j.rootDictionaryObjId+" 0 R"),He("/Resources "+j.resourceDictionaryObjId+" 0 R"),He("/MediaBox ["+parseFloat(fe(j.mediaBox.bottomLeftX))+" "+parseFloat(fe(j.mediaBox.bottomLeftY))+" "+fe(j.mediaBox.topRightX)+" "+fe(j.mediaBox.topRightY)+"]"),j.cropBox!==null&&He("/CropBox ["+fe(j.cropBox.bottomLeftX)+" "+fe(j.cropBox.bottomLeftY)+" "+fe(j.cropBox.topRightX)+" "+fe(j.cropBox.topRightY)+"]"),j.bleedBox!==null&&He("/BleedBox ["+fe(j.bleedBox.bottomLeftX)+" "+fe(j.bleedBox.bottomLeftY)+" "+fe(j.bleedBox.topRightX)+" "+fe(j.bleedBox.topRightY)+"]"),j.trimBox!==null&&He("/TrimBox ["+fe(j.trimBox.bottomLeftX)+" "+fe(j.trimBox.bottomLeftY)+" "+fe(j.trimBox.topRightX)+" "+fe(j.trimBox.topRightY)+"]"),j.artBox!==null&&He("/ArtBox ["+fe(j.artBox.bottomLeftX)+" "+fe(j.artBox.bottomLeftY)+" "+fe(j.artBox.topRightX)+" "+fe(j.artBox.topRightY)+"]"),typeof j.userUnit=="number"&&j.userUnit!==1&&He("/UserUnit "+j.userUnit),yn.publish("putPage",{objId:Ye,pageContext:Qr[we],pageNumber:we,page:$e}),He("/Contents "+gt+" 0 R"),He(">>"),He("endobj");var Dt=$e.join(`
`);return V===D.ADVANCED&&(Dt+=`
Q`),ys(gt,!0),js({data:Dt,filters:ul(),objectId:gt}),He("endobj"),Ye},ws=O.__private__.putPages=function(){var j,we,$e=[];for(j=1;j<=dn;j++)Qr[j].objId=uo(),Qr[j].contentsObjId=uo();for(j=1;j<=dn;j++)$e.push(ts({number:j,data:at[j],objId:Qr[j].objId,contentsObjId:Qr[j].contentsObjId,mediaBox:Qr[j].mediaBox,cropBox:Qr[j].cropBox,bleedBox:Qr[j].bleedBox,trimBox:Qr[j].trimBox,artBox:Qr[j].artBox,userUnit:Qr[j].userUnit,rootDictionaryObjId:Zo,resourceDictionaryObjId:Es}));ys(Zo,!0),He("<</Type /Pages");var Ye="/Kids [";for(we=0;we<dn;we++)Ye+=$e[we]+" 0 R ";He(Ye+"]"),He("/Count "+dn),He(">>"),He("endobj"),yn.publish("postPutPages")},Mc=function(j){yn.publish("putFont",{font:j,out:He,newObject:ro,putStream:js}),j.isAlreadyPutted!==!0&&(j.objectNumber=ro(),He("<<"),He("/Type /Font"),He("/BaseFont /"+NE(j.postScriptName)),He("/Subtype /Type1"),typeof j.encoding=="string"&&He("/Encoding /"+j.encoding),He("/FirstChar 32"),He("/LastChar 255"),He(">>"),He("endobj"))},Oa=function(){for(var j in sr)sr.hasOwnProperty(j)&&(T===!1||T===!0&&N.hasOwnProperty(j))&&Mc(sr[j])},Kl=function(j){j.objectNumber=ro();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[fe(j.x),fe(j.y),fe(j.x+j.width),fe(j.y+j.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+j.matrix.toString()+"]"});var $e=j.pages[1].join(`
`);js({data:$e,additionalKeyValues:we,objectId:j.objectNumber}),He("endobj")},Fc=function(){for(var j in br)br.hasOwnProperty(j)&&Kl(br[j])},Ks=function(j,we){var $e,Ye=[],gt=1/(we-1);for($e=0;$e<1;$e+=gt)Ye.push($e);if(Ye.push(1),j[0].offset!=0){var Dt={offset:0,color:j[0].color};j.unshift(Dt)}if(j[j.length-1].offset!=1){var Gt={offset:1,color:j[j.length-1].color};j.push(Gt)}for(var Lr="",Jr=0,En=0;En<Ye.length;En++){for($e=Ye[En];$e>j[Jr+1].offset;)Jr++;var On=j[Jr].offset,ci=($e-On)/(j[Jr+1].offset-On),Ao=j[Jr].color,So=j[Jr+1].color;Lr+=Fe(Math.round((1-ci)*Ao[0]+ci*So[0]).toString(16))+Fe(Math.round((1-ci)*Ao[1]+ci*So[1]).toString(16))+Fe(Math.round((1-ci)*Ao[2]+ci*So[2]).toString(16))}return Lr.trim()},Al=function(j,we){we||(we=21);var $e=ro(),Ye=Ks(j.colors,we),gt=[];gt.push({key:"FunctionType",value:"0"}),gt.push({key:"Domain",value:"[0.0 1.0]"}),gt.push({key:"Size",value:"["+we+"]"}),gt.push({key:"BitsPerSample",value:"8"}),gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),js({data:Ye,additionalKeyValues:gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:$e}),He("endobj"),j.objectNumber=ro(),He("<< /ShadingType "+j.type),He("/ColorSpace /DeviceRGB");var Dt="/Coords ["+fe(parseFloat(j.coords[0]))+" "+fe(parseFloat(j.coords[1]))+" ";j.type===2?Dt+=fe(parseFloat(j.coords[2]))+" "+fe(parseFloat(j.coords[3])):Dt+=fe(parseFloat(j.coords[2]))+" "+fe(parseFloat(j.coords[3]))+" "+fe(parseFloat(j.coords[4]))+" "+fe(parseFloat(j.coords[5])),He(Dt+="]"),j.matrix&&He("/Matrix ["+j.matrix.toString()+"]"),He("/Function "+$e+" 0 R"),He("/Extend [true true]"),He(">>"),He("endobj")},sf=function(j,we){var $e=uo(),Ye=ro();we.push({resourcesOid:$e,objectOid:Ye}),j.objectNumber=Ye;var gt=[];gt.push({key:"Type",value:"/Pattern"}),gt.push({key:"PatternType",value:"1"}),gt.push({key:"PaintType",value:"1"}),gt.push({key:"TilingType",value:"1"}),gt.push({key:"BBox",value:"["+j.boundingBox.map(fe).join(" ")+"]"}),gt.push({key:"XStep",value:fe(j.xStep)}),gt.push({key:"YStep",value:fe(j.yStep)}),gt.push({key:"Resources",value:$e+" 0 R"}),j.matrix&&gt.push({key:"Matrix",value:"["+j.matrix.toString()+"]"}),js({data:j.stream,additionalKeyValues:gt,objectId:j.objectNumber}),He("endobj")},Di=function(j){var we;for(we in rn)rn.hasOwnProperty(we)&&(rn[we]instanceof x1?Al(rn[we]):rn[we]instanceof KE&&sf(rn[we],j))},no=function(j){for(var we in j.objectNumber=ro(),He("<<"),j)switch(we){case"opacity":He("/ca "+Y(j[we]));break;case"stroke-opacity":He("/CA "+Y(j[we]))}He(">>"),He("endobj")},Hr=function(){var j;for(j in ai)ai.hasOwnProperty(j)&&no(ai[j])},Vc=function(){for(var j in He("/XObject <<"),br)br.hasOwnProperty(j)&&br[j].objectNumber>=0&&He("/"+j+" "+br[j].objectNumber+" 0 R");yn.publish("putXobjectDict"),He(">>")},af=function(){Ba.oid=ro(),He("<<"),He("/Filter /Standard"),He("/V "+Ba.v),He("/R "+Ba.r),He("/U <"+Ba.toHexString(Ba.U)+">"),He("/O <"+Ba.toHexString(Ba.O)+">"),He("/P "+Ba.P),He(">>"),He("endobj")},Ws=function(){for(var j in He("/Font <<"),sr)sr.hasOwnProperty(j)&&(T===!1||T===!0&&N.hasOwnProperty(j))&&He("/"+j+" "+sr[j].objectNumber+" 0 R");He(">>")},Ce=function(){if(Object.keys(rn).length>0){for(var j in He("/Shading <<"),rn)rn.hasOwnProperty(j)&&rn[j]instanceof x1&&rn[j].objectNumber>=0&&He("/"+j+" "+rn[j].objectNumber+" 0 R");yn.publish("putShadingPatternDict"),He(">>")}},Ge=function(j){if(Object.keys(rn).length>0){for(var we in He("/Pattern <<"),rn)rn.hasOwnProperty(we)&&rn[we]instanceof O.TilingPattern&&rn[we].objectNumber>=0&&rn[we].objectNumber<j&&He("/"+we+" "+rn[we].objectNumber+" 0 R");yn.publish("putTilingPatternDict"),He(">>")}},Ut=function(){if(Object.keys(ai).length>0){var j;for(j in He("/ExtGState <<"),ai)ai.hasOwnProperty(j)&&ai[j].objectNumber>=0&&He("/"+j+" "+ai[j].objectNumber+" 0 R");yn.publish("putGStateDict"),He(">>")}},Wt=function(j){ys(j.resourcesOid,!0),He("<<"),He("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ws(),Ce(),Ge(j.objectOid),Ut(),Vc(),He(">>"),He("endobj")},Tt=function(){var j=[];Oa(),Hr(),Fc(),Di(j),yn.publish("putResources"),j.forEach(Wt),Wt({resourcesOid:Es,objectOid:Number.MAX_SAFE_INTEGER}),yn.publish("postPutResources")},lr=function(){yn.publish("putAdditionalObjects");for(var j=0;j<pt.length;j++){var we=pt[j];ys(we.objId,!0),He(we.content),He("endobj")}yn.publish("postPutAdditionalObjects")},ri=function(j){Mr[j.fontName]=Mr[j.fontName]||{},Mr[j.fontName][j.fontStyle]=j.id},Lo=function(j,we,$e,Ye,gt){var Dt={id:"F"+(Object.keys(sr).length+1).toString(10),postScriptName:j,fontName:we,fontStyle:$e,encoding:Ye,isStandardFont:gt||!1,metadata:{}};return yn.publish("addFont",{font:Dt,instance:this}),sr[Dt.id]=Dt,ri(Dt),Dt.id},Bn=function(j){for(var we=0,$e=Nt.length;we<$e;we++){var Ye=Lo.call(this,j[we][0],j[we][1],j[we][2],Nt[we][3],!0);T===!1&&(N[Ye]=!0);var gt=j[we][0].split("-");ri({id:Ye,fontName:gt[0],fontStyle:gt[1]||""})}yn.publish("addFonts",{fonts:sr,dictionary:Mr})},Na=function(j){return j.foo=function(){try{return j.apply(this,arguments)}catch(Ye){var we=Ye.stack||"";~we.indexOf(" at ")&&(we=we.split(" at ")[1]);var $e="Error in function "+we.split(`
`)[0].split("<")[0]+": "+Ye.message;if(!In.console)throw new Error($e);In.console.error($e,Ye),In.alert&&alert($e)}},j.foo.bar=j,j.foo},JA=function(j,we){var $e,Ye,gt,Dt,Gt,Lr,Jr,En,On;if(gt=(we=we||{}).sourceEncoding||"Unicode",Gt=we.outputEncoding,(we.autoencode||Gt)&&sr[er].metadata&&sr[er].metadata[gt]&&sr[er].metadata[gt].encoding&&(Dt=sr[er].metadata[gt].encoding,!Gt&&sr[er].encoding&&(Gt=sr[er].encoding),!Gt&&Dt.codePages&&(Gt=Dt.codePages[0]),typeof Gt=="string"&&(Gt=Dt[Gt]),Gt)){for(Jr=!1,Lr=[],$e=0,Ye=j.length;$e<Ye;$e++)(En=Gt[j.charCodeAt($e)])?Lr.push(String.fromCharCode(En)):Lr.push(j[$e]),Lr[$e].charCodeAt(0)>>8&&(Jr=!0);j=Lr.join("")}for($e=j.length;Jr===void 0&&$e!==0;)j.charCodeAt($e-1)>>8&&(Jr=!0),$e--;if(!Jr)return j;for(Lr=we.noBOM?[]:[254,255],$e=0,Ye=j.length;$e<Ye;$e++){if((On=(En=j.charCodeAt($e))>>8)>>8)throw new Error("Character at position "+$e+" of string '"+j+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lr.push(On),Lr.push(En-(On<<8))}return String.fromCharCode.apply(void 0,Lr)},qr=O.__private__.pdfEscape=O.pdfEscape=function(j,we){return JA(j,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sg=O.__private__.beginPage=function(j){at[++dn]=[],Qr[dn]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(j[0]),topRightY:Number(j[1])}},Qc(dn),lt(at[Oe])},ag=function(j,we){var $e,Ye,gt;switch(i=we||i,typeof j=="string"&&($e=k(j.toLowerCase()),Array.isArray($e)&&(Ye=$e[0],gt=$e[1])),Array.isArray(j)&&(Ye=j[0]*vt,gt=j[1]*vt),isNaN(Ye)&&(Ye=c[0],gt=c[1]),(Ye>14400||gt>14400)&&(jo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ye=Math.min(14400,Ye),gt=Math.min(14400,gt)),c=[Ye,gt],i.substr(0,1)){case"l":gt>Ye&&(c=[gt,Ye]);break;case"p":Ye>gt&&(c=[gt,Ye])}sg(c),td(Hc),He(rs),lf!==0&&He(lf+" J"),uf!==0&&He(uf+" j"),yn.publish("addPage",{pageNumber:dn})},Bh=function(j){j>0&&j<=dn&&(at.splice(j,1),Qr.splice(j,1),dn--,Oe>dn&&(Oe=dn),this.setPage(Oe))},Qc=function(j){j>0&&j<=dn&&(Oe=j)},Em=O.__private__.getNumberOfPages=O.getNumberOfPages=function(){return at.length-1},cg=function(j,we,$e){var Ye,gt=void 0;return $e=$e||{},j=j!==void 0?j:sr[er].fontName,we=we!==void 0?we:sr[er].fontStyle,Ye=j.toLowerCase(),Mr[Ye]!==void 0&&Mr[Ye][we]!==void 0?gt=Mr[Ye][we]:Mr[j]!==void 0&&Mr[j][we]!==void 0?gt=Mr[j][we]:$e.disableWarning===!1&&jo.warn("Unable to look up font label for font '"+j+"', '"+we+"'. Refer to getFontList() for available fonts."),gt||$e.noFallback||(gt=Mr.times[we])==null&&(gt=Mr.times.normal),gt},eA=O.__private__.putInfo=function(){var j=ro(),we=function(Ye){return Ye};for(var $e in w!==null&&(we=Ba.encryptor(j,0)),He("<<"),He("/Producer ("+qr(we("jsPDF "+Rn.version))+")"),nr)nr.hasOwnProperty($e)&&nr[$e]&&He("/"+$e.substr(0,1).toUpperCase()+$e.substr(1)+" ("+qr(we(nr[$e]))+")");He("/CreationDate ("+qr(we(se))+")"),He(">>"),He("endobj")},ZA=O.__private__.putCatalog=function(j){var we=(j=j||{}).rootDictionaryObjId||Zo;switch(ro(),He("<<"),He("/Type /Catalog"),He("/Pages "+we+" 0 R"),Yt||(Yt="fullwidth"),Yt){case"fullwidth":He("/OpenAction [3 0 R /FitH null]");break;case"fullheight":He("/OpenAction [3 0 R /FitV null]");break;case"fullpage":He("/OpenAction [3 0 R /Fit]");break;case"original":He("/OpenAction [3 0 R /XYZ null null 1]");break;default:var $e=""+Yt;$e.substr($e.length-1)==="%"&&(Yt=parseInt(Yt)/100),typeof Yt=="number"&&He("/OpenAction [3 0 R /XYZ null null "+Y(Yt)+"]")}switch(Xr||(Xr="continuous"),Xr){case"continuous":He("/PageLayout /OneColumn");break;case"single":He("/PageLayout /SinglePage");break;case"two":case"twoleft":He("/PageLayout /TwoColumnLeft");break;case"tworight":He("/PageLayout /TwoColumnRight")}ar&&He("/PageMode /"+ar),yn.publish("putCatalog"),He(">>"),He("endobj")},Lh=O.__private__.putTrailer=function(){He("trailer"),He("<<"),He("/Size "+(Qe+1)),He("/Root "+Qe+" 0 R"),He("/Info "+(Qe-1)+" 0 R"),w!==null&&He("/Encrypt "+Ba.oid+" 0 R"),He("/ID [ <"+xe+"> <"+xe+"> ]"),He(">>")},lg=O.__private__.putHeader=function(){He("%PDF-"+P),He("%")},Ph=O.__private__.putXRef=function(){var j="0000000000";He("xref"),He("0 "+(Qe+1)),He("0000000000 65535 f ");for(var we=1;we<=Qe;we++)typeof We[we]=="function"?He((j+We[we]()).slice(-10)+" 00000 n "):We[we]!==void 0?He((j+We[we]).slice(-10)+" 00000 n "):He("0000000000 00000 n ")},lu=O.__private__.buildDocument=function(){Ft(),lt(et),yn.publish("buildDocument"),lg(),ws(),lr(),Tt(),w!==null&&af(),eA(),ZA();var j=Ze;return Ph(),Lh(),He("startxref"),He(""+j),He("%%EOF"),lt(at[Oe]),et.join(`
`)},ed=O.__private__.getBlob=function(j){return new Blob([qt(j)],{type:"application/pdf"})},cf=O.output=O.__private__.output=Na(function(j,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",j){case void 0:return lu();case"save":O.save(we.filename);break;case"arraybuffer":return qt(lu());case"blob":return ed(lu());case"bloburi":case"bloburl":if(In.URL!==void 0&&typeof In.URL.createObjectURL=="function")return In.URL&&In.URL.createObjectURL(ed(lu()))||void 0;jo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var $e="",Ye=lu();try{$e=n8(Ye)}catch{$e=n8(unescape(encodeURIComponent(Ye)))}return"data:application/pdf;filename="+we.filename+";base64,"+$e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(In)==="[object Window]"){var gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(gt=we.pdfObjectUrl,Dt="");var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+gt+'"'+Dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",Lr=In.open();return Lr!==null&&Lr.document.write(Gt),Lr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(In)==="[object Window]"){var Jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',En=In.open();if(En!==null){En.document.write(Jr);var On=this;En.document.documentElement.querySelector("#pdfViewer").onload=function(){En.document.title=we.filename,En.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(On.output("bloburl"))}}return En}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(In)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ci='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',Ao=In.open();if(Ao!==null&&(Ao.document.write(ci),Ao.document.title=we.filename),Ao||typeof safari>"u")return Ao;break;case"datauri":case"dataurl":return In.document.location.href=this.output("datauristring",we);default:return null}}),wm=function(j){return Array.isArray(wi)===!0&&wi.indexOf(j)>-1};switch(s){case"pt":vt=1;break;case"mm":vt=72/25.4;break;case"cm":vt=72/2.54;break;case"in":vt=72;break;case"px":vt=wm("px_scaling")==1?.75:96/72;break;case"pc":case"em":vt=12;break;case"ex":vt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);vt=s}var Ba=null;ht(),Be();var Sm=function(j){return w!==null?Ba.encryptor(j,0):function(we){return we}},dl=O.__private__.getPageInfo=O.getPageInfo=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Qr[j].objId,pageNumber:j,pageContext:Qr[j]}},Cn=O.__private__.getPageInfoByObjId=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in Qr)if(Qr[we].objId===j)break;return dl(we)},S0=O.__private__.getCurrentPageInfo=O.getCurrentPageInfo=function(){return{objId:Qr[Oe].objId,pageNumber:Oe,pageContext:Qr[Oe]}};O.addPage=function(){return ag.apply(this,arguments),this},O.setPage=function(){return Qc.apply(this,arguments),lt.call(this,at[Oe]),this},O.insertPage=function(j){return this.addPage(),this.movePage(Oe,j),this},O.movePage=function(j,we){var $e,Ye;if(j>we){$e=at[j],Ye=Qr[j];for(var gt=j;gt>we;gt--)at[gt]=at[gt-1],Qr[gt]=Qr[gt-1];at[we]=$e,Qr[we]=Ye,this.setPage(we)}else if(j<we){$e=at[j],Ye=Qr[j];for(var Dt=j;Dt<we;Dt++)at[Dt]=at[Dt+1],Qr[Dt]=Qr[Dt+1];at[we]=$e,Qr[we]=Ye,this.setPage(we)}return this},O.deletePage=function(){return Bh.apply(this,arguments),this},O.__private__.text=O.text=function(j,we,$e,Ye,gt){var Dt,Gt,Lr,Jr,En,On,ci,Ao,So,ns=(Ye=Ye||{}).scope||this;if(typeof j=="number"&&typeof we=="number"&&(typeof $e=="string"||Array.isArray($e))){var ca=$e;$e=we,we=j,j=ca}if(arguments[3]instanceof kr?(Z("The transform parameter of text() with a Matrix value"),So=gt):(Lr=arguments[4],Jr=arguments[5],_o(ci=arguments[3])==="object"&&ci!==null||(typeof Lr=="string"&&(Jr=Lr,Lr=null),typeof ci=="string"&&(Jr=ci,ci=null),typeof ci=="number"&&(Lr=ci,ci=null),Ye={flags:ci,angle:Lr,align:Jr})),isNaN(we)||isNaN($e)||j==null)throw new Error("Invalid arguments passed to jsPDF.text");if(j.length===0)return ns;var $s="",Ss=!1,gc=typeof Ye.lineHeightFactor=="number"?Ye.lineHeightFactor:nA,du=ns.internal.scaleFactor;function od(mi){return mi=mi.split("	").join(Array(Ye.TabLen||9).join(" ")),qr(mi,ci)}function mc(mi){for(var vi,li=mi.concat(),io=[],Cs=li.length;Cs--;)typeof(vi=li.shift())=="string"?io.push(vi):Array.isArray(mi)&&(vi.length===1||vi[1]===void 0&&vi[2]===void 0)?io.push(vi[0]):io.push([vi[0],vi[1],vi[2]]);return io}function fu(mi,vi){var li;if(typeof mi=="string")li=vi(mi)[0];else if(Array.isArray(mi)){for(var io,Cs,ml=mi.concat(),$h=[],fg=ml.length;fg--;)typeof(io=ml.shift())=="string"?$h.push(vi(io)[0]):Array.isArray(io)&&typeof io[0]=="string"&&(Cs=vi(io[0],io[1],io[2]),$h.push([Cs[0],Cs[1],Cs[2]]));li=$h}return li}var sd=!1,Hh=!0;if(typeof j=="string")sd=!0;else if(Array.isArray(j)){var vc=j.concat();Gt=[];for(var Po,bs=vc.length;bs--;)(typeof(Po=vc.shift())!="string"||Array.isArray(Po)&&typeof Po[0]!="string")&&(Hh=!1);sd=Hh}if(sd===!1)throw new Error('Type of text must be string or Array. "'+j+'" is not recognized.');typeof j=="string"&&(j=j.match(/[\r?\n]/)?j.split(/\r\n|\r|\n/g):[j]);var jh=It/ns.internal.scaleFactor,df=jh*(gc-1);switch(Ye.baseline){case"bottom":$e-=df;break;case"top":$e+=jh-df;break;case"hanging":$e+=jh-2*df;break;case"middle":$e+=jh/2-df}if((On=Ye.maxWidth||0)>0&&(typeof j=="string"?j=ns.splitTextToSize(j,On):Object.prototype.toString.call(j)==="[object Array]"&&(j=j.reduce(function(mi,vi){return mi.concat(ns.splitTextToSize(vi,On))},[]))),Dt={text:j,x:we,y:$e,options:Ye,mutex:{pdfEscape:qr,activeFontKey:er,fonts:sr,activeFontSize:It}},yn.publish("preProcessText",Dt),j=Dt.text,Lr=(Ye=Dt.options).angle,!(So instanceof kr)&&Lr&&typeof Lr=="number"){Lr*=Math.PI/180,Ye.rotationDirection===0&&(Lr=-Lr),V===D.ADVANCED&&(Lr=-Lr);var Kh=Math.cos(Lr),ff=Math.sin(Lr);So=new kr(Kh,ff,-ff,Kh,0,0)}else Lr&&Lr instanceof kr&&(So=Lr);V!==D.ADVANCED||So||(So=ls),(En=Ye.charSpace||id)!==void 0&&($s+=fe(le(En))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ao=Ye.horizontalScale)!==void 0&&($s+=fe(100*Ao)+` Tz
`),Ye.lang;var La=-1,ad=Ye.renderingMode!==void 0?Ye.renderingMode:Ye.stroke,Ya=ns.internal.getCurrentPageInfo().pageContext;switch(ad){case 0:case!1:case"fill":La=0;break;case 1:case!0:case"stroke":La=1;break;case 2:case"fillThenStroke":La=2;break;case 3:case"invisible":La=3;break;case 4:case"fillAndAddForClipping":La=4;break;case 5:case"strokeAndAddPathForClipping":La=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":La=6;break;case 7:case"addToPathForClipping":La=7}var hf=Ya.usedRenderingMode!==void 0?Ya.usedRenderingMode:-1;La!==-1?$s+=La+` Tr
`:hf!==-1&&($s+=`0 Tr
`),La!==-1&&(Ya.usedRenderingMode=La),Jr=Ye.align||"left";var Kc,Wh=It*gc,pf=ns.internal.pageSize.getWidth(),Nm=sr[er];En=Ye.charSpace||id,On=Ye.maxWidth||0,ci=Object.assign({autoencode:!0,noBOM:!0},Ye.flags);var sA=[],cd=function(mi){return ns.getStringUnitWidth(mi,{font:Nm,charSpace:En,fontSize:It,doKerning:!1})*It/du};if(Object.prototype.toString.call(j)==="[object Array]"){var fo;Gt=mc(j),Jr!=="left"&&(Kc=Gt.map(cd));var Pa,aA=0;if(Jr==="right"){we-=Kc[0],j=[],bs=Gt.length;for(var bo=0;bo<bs;bo++)bo===0?(Pa=wo(we),fo=iA($e)):(Pa=le(aA-Kc[bo]),fo=-Wh),j.push([Gt[bo],Pa,fo]),aA=Kc[bo]}else if(Jr==="center"){we-=Kc[0]/2,j=[],bs=Gt.length;for(var hl=0;hl<bs;hl++)hl===0?(Pa=wo(we),fo=iA($e)):(Pa=le((aA-Kc[hl])/2),fo=-Wh),j.push([Gt[hl],Pa,fo]),aA=Kc[hl]}else if(Jr==="left"){j=[],bs=Gt.length;for(var gf=0;gf<bs;gf++)j.push(Gt[gf])}else if(Jr==="justify"&&Nm.encoding==="Identity-H"){j=[],bs=Gt.length,On=On!==0?On:pf;for(var pl=0,Ri=0;Ri<bs;Ri++)if(fo=Ri===0?iA($e):-Wh,Pa=Ri===0?wo(we):pl,Ri<bs-1){var mf=le((On-Kc[Ri])/(Gt[Ri].split(" ").length-1)),la=Gt[Ri].split(" ");j.push([la[0]+" ",Pa,fo]),pl=0;for(var _c=1;_c<la.length;_c++){var vf=(cd(la[_c-1]+" "+la[_c])-cd(la[_c]))*du+mf;_c==la.length-1?j.push([la[_c],vf,0]):j.push([la[_c]+" ",vf,0]),pl-=vf}}else j.push([Gt[Ri],Pa,fo]);j.push(["",pl,0])}else{if(Jr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(j=[],bs=Gt.length,On=On!==0?On:pf,Ri=0;Ri<bs;Ri++)fo=Ri===0?iA($e):-Wh,Pa=Ri===0?wo(we):0,Ri<bs-1?sA.push(fe(le((On-Kc[Ri])/(Gt[Ri].split(" ").length-1)))):sA.push(0),j.push([Gt[Ri],Pa,fo])}}var Gh=typeof Ye.R2L=="boolean"?Ye.R2L:_r;Gh===!0&&(j=fu(j,function(mi,vi,li){return[mi.split("").reverse().join(""),vi,li]})),Dt={text:j,x:we,y:$e,options:Ye,mutex:{pdfEscape:qr,activeFontKey:er,fonts:sr,activeFontSize:It}},yn.publish("postProcessText",Dt),j=Dt.text,Ss=Dt.mutex.isHex||!1;var _f=sr[er].encoding;_f!=="WinAnsiEncoding"&&_f!=="StandardEncoding"||(j=fu(j,function(mi,vi,li){return[od(mi),vi,li]})),Gt=mc(j),j=[];for(var yf,cA,hu,Wc=0,_t=1,gl=Array.isArray(Gt[0])?_t:Wc,pu="",Ef=function(mi,vi,li){var io="";return li instanceof kr?(li=typeof Ye.angle=="number"?$a(li,new kr(1,0,0,1,mi,vi)):$a(new kr(1,0,0,1,mi,vi),li),V===D.ADVANCED&&(li=$a(new kr(1,0,0,-1,0,0),li)),io=li.join(" ")+` Tm
`):io=fe(mi)+" "+fe(vi)+` Td
`,io},Gc=0;Gc<Gt.length;Gc++){switch(pu="",gl){case _t:hu=(Ss?"<":"(")+Gt[Gc][0]+(Ss?">":")"),yf=parseFloat(Gt[Gc][1]),cA=parseFloat(Gt[Gc][2]);break;case Wc:hu=(Ss?"<":"(")+Gt[Gc]+(Ss?">":")"),yf=wo(we),cA=iA($e)}sA!==void 0&&sA[Gc]!==void 0&&(pu=sA[Gc]+` Tw
`),Gc===0?j.push(pu+Ef(yf,cA,So)+hu):gl===Wc?j.push(pu+hu):gl===_t&&j.push(pu+Ef(yf,cA,So)+hu)}j=gl===Wc?j.join(` Tj
T* `):j.join(` Tj
`),j+=` Tj
`;var Xa=`BT
/`;return Xa+=er+" "+It+` Tf
`,Xa+=fe(It*gc)+` TL
`,Xa+=qa+`
`,Xa+=$s,Xa+=j,He(Xa+="ET"),N[er]=!0,ns};var kh=O.__private__.clip=O.clip=function(j){return He(j==="evenodd"?"W*":"W"),this};O.clipEvenOdd=function(){return kh("evenodd")},O.__private__.discardPath=O.discardPath=function(){return He("n"),this};var za=O.__private__.isValidStyle=function(j){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(j)!==-1&&(we=!0),we};O.__private__.setDefaultPathOperation=O.setDefaultPathOperation=function(j){return za(j)&&(E=j),this};var bm=O.__private__.getStyle=O.getStyle=function(j){var we=E;switch(j){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=j}return we},Cm=O.close=function(){return He("h"),this};O.stroke=function(){return He("S"),this},O.fill=function(j){return Dh("f",j),this},O.fillEvenOdd=function(j){return Dh("f*",j),this},O.fillStroke=function(j){return Dh("B",j),this},O.fillStrokeEvenOdd=function(j){return Dh("B*",j),this};var Dh=function(j,we){_o(we)==="object"?Tm(we,j):He(j)},tA=function(j){j===null||V===D.ADVANCED&&j===void 0||(j=bm(j),He(j))};function ug(j,we,$e,Ye,gt){var Dt=new KE(we||this.boundingBox,$e||this.xStep,Ye||this.yStep,this.gState,gt||this.matrix);Dt.stream=this.stream;var Gt=j+"$$"+this.cloneIndex+++"$$";return _s(Gt,Dt),Dt}var Tm=function(j,we){var $e=Sr[j.key],Ye=rn[$e];if(Ye instanceof x1)He("q"),He(b0(we)),Ye.gState&&O.setGState(Ye.gState),He(j.matrix.toString()+" cm"),He("/"+$e+" sh"),He("Q");else if(Ye instanceof KE){var gt=new kr(1,0,0,-1,0,jc());j.matrix&&(gt=gt.multiply(j.matrix||ls),$e=ug.call(Ye,j.key,j.boundingBox,j.xStep,j.yStep,gt).id),He("q"),He("/Pattern cs"),He("/"+$e+" scn"),Ye.gState&&O.setGState(Ye.gState),He(we),He("Q")}},b0=function(j){switch(j){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xh=O.moveTo=function(j,we){return He(fe(le(j))+" "+fe(ge(we))+" m"),this},rA=O.lineTo=function(j,we){return He(fe(le(j))+" "+fe(ge(we))+" l"),this},Wl=O.curveTo=function(j,we,$e,Ye,gt,Dt){return He([fe(le(j)),fe(ge(we)),fe(le($e)),fe(ge(Ye)),fe(le(gt)),fe(ge(Dt)),"c"].join(" ")),this};O.__private__.line=O.line=function(j,we,$e,Ye,gt){if(isNaN(j)||isNaN(we)||isNaN($e)||isNaN(Ye)||!za(gt))throw new Error("Invalid arguments passed to jsPDF.line");return V===D.COMPAT?this.lines([[$e-j,Ye-we]],j,we,[1,1],gt||"S"):this.lines([[$e-j,Ye-we]],j,we,[1,1]).stroke()},O.__private__.lines=O.lines=function(j,we,$e,Ye,gt,Dt){var Gt,Lr,Jr,En,On,ci,Ao,So,ns,ca,$s,Ss;if(typeof j=="number"&&(Ss=$e,$e=we,we=j,j=Ss),Ye=Ye||[1,1],Dt=Dt||!1,isNaN(we)||isNaN($e)||!Array.isArray(j)||!Array.isArray(Ye)||!za(gt)||typeof Dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xh(we,$e),Gt=Ye[0],Lr=Ye[1],En=j.length,ca=we,$s=$e,Jr=0;Jr<En;Jr++)(On=j[Jr]).length===2?(ca=On[0]*Gt+ca,$s=On[1]*Lr+$s,rA(ca,$s)):(ci=On[0]*Gt+ca,Ao=On[1]*Lr+$s,So=On[2]*Gt+ca,ns=On[3]*Lr+$s,ca=On[4]*Gt+ca,$s=On[5]*Lr+$s,Wl(ci,Ao,So,ns,ca,$s));return Dt&&Cm(),tA(gt),this},O.path=function(j){for(var we=0;we<j.length;we++){var $e=j[we],Ye=$e.c;switch($e.op){case"m":xh(Ye[0],Ye[1]);break;case"l":rA(Ye[0],Ye[1]);break;case"c":Wl.apply(this,Ye);break;case"h":Cm()}}return this},O.__private__.rect=O.rect=function(j,we,$e,Ye,gt){if(isNaN(j)||isNaN(we)||isNaN($e)||isNaN(Ye)||!za(gt))throw new Error("Invalid arguments passed to jsPDF.rect");return V===D.COMPAT&&(Ye=-Ye),He([fe(le(j)),fe(ge(we)),fe(le($e)),fe(le(Ye)),"re"].join(" ")),tA(gt),this},O.__private__.triangle=O.triangle=function(j,we,$e,Ye,gt,Dt,Gt){if(isNaN(j)||isNaN(we)||isNaN($e)||isNaN(Ye)||isNaN(gt)||isNaN(Dt)||!za(Gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[$e-j,Ye-we],[gt-$e,Dt-Ye],[j-gt,we-Dt]],j,we,[1,1],Gt,!0),this},O.__private__.roundedRect=O.roundedRect=function(j,we,$e,Ye,gt,Dt,Gt){if(isNaN(j)||isNaN(we)||isNaN($e)||isNaN(Ye)||isNaN(gt)||isNaN(Dt)||!za(Gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Lr=4/3*(Math.SQRT2-1);return gt=Math.min(gt,.5*$e),Dt=Math.min(Dt,.5*Ye),this.lines([[$e-2*gt,0],[gt*Lr,0,gt,Dt-Dt*Lr,gt,Dt],[0,Ye-2*Dt],[0,Dt*Lr,-gt*Lr,Dt,-gt,Dt],[2*gt-$e,0],[-gt*Lr,0,-gt,-Dt*Lr,-gt,-Dt],[0,2*Dt-Ye],[0,-Dt*Lr,gt*Lr,-Dt,gt,-Dt]],j+gt,we,[1,1],Gt,!0),this},O.__private__.ellipse=O.ellipse=function(j,we,$e,Ye,gt){if(isNaN(j)||isNaN(we)||isNaN($e)||isNaN(Ye)||!za(gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Dt=4/3*(Math.SQRT2-1)*$e,Gt=4/3*(Math.SQRT2-1)*Ye;return xh(j+$e,we),Wl(j+$e,we-Gt,j+Dt,we-Ye,j,we-Ye),Wl(j-Dt,we-Ye,j-$e,we-Gt,j-$e,we),Wl(j-$e,we+Gt,j-Dt,we+Ye,j,we+Ye),Wl(j+Dt,we+Ye,j+$e,we+Gt,j+$e,we),tA(gt),this},O.__private__.circle=O.circle=function(j,we,$e,Ye){if(isNaN(j)||isNaN(we)||isNaN($e)||!za(Ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(j,we,$e,$e,Ye)},O.setFont=function(j,we,$e){return $e&&(we=ie(we,$e)),er=cg(j,we,{disableWarning:!1}),this};var Uh=O.__private__.getFont=O.getFont=function(){return sr[cg.apply(O,arguments)]};O.__private__.getFontList=O.getFontList=function(){var j,we,$e={};for(j in Mr)if(Mr.hasOwnProperty(j))for(we in $e[j]=[],Mr[j])Mr[j].hasOwnProperty(we)&&$e[j].push(we);return $e},O.addFont=function(j,we,$e,Ye,gt){var Dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Dt.indexOf(arguments[3])!==-1?gt=arguments[3]:arguments[3]&&Dt.indexOf(arguments[3])==-1&&($e=ie($e,Ye)),gt=gt||"Identity-H",Lo.call(this,j,we,$e,gt)};var nA,Hc=e.lineWidth||.200025,Gs=O.__private__.getLineWidth=O.getLineWidth=function(){return Hc},td=O.__private__.setLineWidth=O.setLineWidth=function(j){return Hc=j,He(fe(le(j))+" w"),this};O.__private__.setLineDash=Rn.API.setLineDash=Rn.API.setLineDashPattern=function(j,we){if(j=j||[],we=we||0,isNaN(we)||!Array.isArray(j))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return j=j.map(function($e){return fe(le($e))}).join(" "),we=fe(le(we)),He("["+j+"] "+we+" d"),this};var Rm=O.__private__.getLineHeight=O.getLineHeight=function(){return It*nA};O.__private__.getLineHeight=O.getLineHeight=function(){return It*nA};var Ag=O.__private__.setLineHeightFactor=O.setLineHeightFactor=function(j){return typeof(j=j||1.15)=="number"&&(nA=j),this},pc=O.__private__.getLineHeightFactor=O.getLineHeightFactor=function(){return nA};Ag(e.lineHeight);var wo=O.__private__.getHorizontalCoordinate=function(j){return le(j)},iA=O.__private__.getVerticalCoordinate=function(j){return V===D.ADVANCED?j:Qr[Oe].mediaBox.topRightY-Qr[Oe].mediaBox.bottomLeftY-le(j)},dg=O.__private__.getHorizontalCoordinateString=O.getHorizontalCoordinateString=function(j){return fe(wo(j))},oA=O.__private__.getVerticalCoordinateString=O.getVerticalCoordinateString=function(j){return fe(iA(j))},rs=e.strokeColor||"0 G";O.__private__.getStrokeColor=O.getDrawColor=function(){return hc(rs)},O.__private__.setStrokeColor=O.setDrawColor=function(j,we,$e,Ye){return rs=es({ch1:j,ch2:we,ch3:$e,ch4:Ye,pdfColorType:"draw",precision:2}),He(rs),this};var rd=e.fillColor||"0 g";O.__private__.getFillColor=O.getFillColor=function(){return hc(rd)},O.__private__.setFillColor=O.setFillColor=function(j,we,$e,Ye){return rd=es({ch1:j,ch2:we,ch3:$e,ch4:Ye,pdfColorType:"fill",precision:2}),He(rd),this};var qa=e.textColor||"0 g",nd=O.__private__.getTextColor=O.getTextColor=function(){return hc(qa)};O.__private__.setTextColor=O.setTextColor=function(j,we,$e,Ye){return qa=es({ch1:j,ch2:we,ch3:$e,ch4:Ye,pdfColorType:"text",precision:3}),this};var id=e.charSpace,uu=O.__private__.getCharSpace=O.getCharSpace=function(){return parseFloat(id||0)};O.__private__.setCharSpace=O.setCharSpace=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return id=j,this};var lf=0;O.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},O.__private__.setLineCap=O.setLineCap=function(j){var we=O.CapJoinStyles[j];if(we===void 0)throw new Error("Line cap style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lf=we,He(we+" J"),this};var uf=0;O.__private__.setLineJoin=O.setLineJoin=function(j){var we=O.CapJoinStyles[j];if(we===void 0)throw new Error("Line join style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return uf=we,He(we+" j"),this},O.__private__.setLineMiterLimit=O.__private__.setMiterLimit=O.setLineMiterLimit=O.setMiterLimit=function(j){if(j=j||0,isNaN(j))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return He(fe(le(j))+" M"),this},O.GState=mL,O.setGState=function(j){(j=typeof j=="string"?ai[Ei[j]]:Im(null,j)).equals(ti)||(He("/"+j.id+" gs"),ti=j)};var Im=function(j,we){if(!j||!Ei[j]){var $e=!1;for(var Ye in ai)if(ai.hasOwnProperty(Ye)&&ai[Ye].equals(we)){$e=!0;break}if($e)we=ai[Ye];else{var gt="GS"+(Object.keys(ai).length+1).toString(10);ai[gt]=we,we.id=gt}return j&&(Ei[j]=we.id),yn.publish("addGState",we),we}};O.addGState=function(j,we){return Im(j,we),this},O.saveGraphicsState=function(){return He("q"),Tr.push({key:er,size:It,color:qa}),this},O.restoreGraphicsState=function(){He("Q");var j=Tr.pop();return er=j.key,It=j.size,qa=j.color,ti=null,this},O.setCurrentTransformationMatrix=function(j){return He(j.toString()+" cm"),this},O.comment=function(j){return He("#"+j),this};var Mh=function(j,we){var $e=j||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return $e},set:function(Dt){isNaN(Dt)||($e=parseFloat(Dt))}});var Ye=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ye},set:function(Dt){isNaN(Dt)||(Ye=parseFloat(Dt))}});var gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return gt},set:function(Dt){gt=Dt.toString()}}),this},fl=function(j,we,$e,Ye){Mh.call(this,j,we),this.type="rect";var gt=$e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return gt},set:function(Gt){isNaN(Gt)||(gt=parseFloat(Gt))}});var Dt=Ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Dt},set:function(Gt){isNaN(Gt)||(Dt=parseFloat(Gt))}}),this},Au=function(){this.page=dn,this.currentPage=Oe,this.pages=at.slice(0),this.pagesContext=Qr.slice(0),this.x=tn,this.y=Rr,this.matrix=on,this.width=Af(Oe),this.height=jc(Oe),this.outputDestination=Ot,this.id="",this.objectNumber=-1};Au.prototype.restore=function(){dn=this.page,Oe=this.currentPage,Qr=this.pagesContext,at=this.pages,tn=this.x,Rr=this.y,on=this.matrix,Vh(Oe,this.width),Qh(Oe,this.height),Ot=this.outputDestination};var Om=function(j,we,$e,Ye,gt){ki.push(new Au),dn=Oe=0,at=[],tn=j,Rr=we,on=gt,sg([$e,Ye])},C0=function(j){if(Pi[j])ki.pop().restore();else{var we=new Au,$e="Xo"+(Object.keys(br).length+1).toString(10);we.id=$e,Pi[j]=$e,br[$e]=we,yn.publish("addFormObject",we),ki.pop().restore()}};for(var Fh in O.beginFormObject=function(j,we,$e,Ye,gt){return Om(j,we,$e,Ye,gt),this},O.endFormObject=function(j){return C0(j),this},O.doFormObject=function(j,we){var $e=br[Pi[j]];return He("q"),He(we.toString()+" cm"),He("/"+$e.id+" Do"),He("Q"),this},O.getFormObject=function(j){var we=br[Pi[j]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},O.save=function(j,we){return j=j||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(P1(ed(lu()),j),typeof P1.unload=="function"&&In.setTimeout&&setTimeout(P1.unload,911),this):new Promise(function($e,Ye){try{var gt=P1(ed(lu()),j);typeof P1.unload=="function"&&In.setTimeout&&setTimeout(P1.unload,911),$e(gt)}catch(Dt){Ye(Dt.message)}})},Rn.API)Rn.API.hasOwnProperty(Fh)&&(Fh==="events"&&Rn.API.events.length?function(j,we){var $e,Ye,gt;for(gt=we.length-1;gt!==-1;gt--)$e=we[gt][0],Ye=we[gt][1],j.subscribe.apply(j,[$e].concat(typeof Ye=="function"?[Ye]:Ye))}(yn,Rn.API.events):O[Fh]=Rn.API[Fh]);var Af=O.getPageWidth=function(j){return(Qr[j=j||Oe].mediaBox.topRightX-Qr[j].mediaBox.bottomLeftX)/vt},Vh=O.setPageWidth=function(j,we){Qr[j].mediaBox.topRightX=we*vt+Qr[j].mediaBox.bottomLeftX},jc=O.getPageHeight=function(j){return(Qr[j=j||Oe].mediaBox.topRightY-Qr[j].mediaBox.bottomLeftY)/vt},Qh=O.setPageHeight=function(j,we){Qr[j].mediaBox.topRightY=we*vt+Qr[j].mediaBox.bottomLeftY};return O.internal={pdfEscape:qr,getStyle:bm,getFont:Uh,getFontSize:Bt,getCharSpace:uu,getTextColor:nd,getLineHeight:Rm,getLineHeightFactor:pc,getLineWidth:Gs,write:vr,getHorizontalCoordinate:wo,getVerticalCoordinate:iA,getCoordinateString:dg,getVerticalCoordinateString:oA,collections:{},newObject:ro,newAdditionalObject:Uc,newObjectDeferred:uo,newObjectDeferredBegin:ys,getFilters:ul,putStream:js,events:yn,scaleFactor:vt,pageSize:{getWidth:function(){return Af(Oe)},setWidth:function(j){Vh(Oe,j)},getHeight:function(){return jc(Oe)},setHeight:function(j){Qh(Oe,j)}},encryptionOptions:w,encryption:Ba,getEncryptor:Sm,output:cf,getNumberOfPages:Em,pages:at,out:He,f2:Y,f3:te,getPageInfo:dl,getPageInfoByObjId:Cn,getCurrentPageInfo:S0,getPDFVersion:M,Point:Mh,Rectangle:fl,Matrix:kr,hasHotfix:wm},Object.defineProperty(O.internal.pageSize,"width",{get:function(){return Af(Oe)},set:function(j){Vh(Oe,j)},enumerable:!0,configurable:!0}),Object.defineProperty(O.internal.pageSize,"height",{get:function(){return jc(Oe)},set:function(j){Qh(Oe,j)},enumerable:!0,configurable:!0}),Bn.call(O,Nt),er="F1",ag(c,i),yn.publish("initialized"),O}OE.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},OE.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},OE.prototype.hexToBytes=function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return t.join("")},OE.prototype.processOwnerPassword=function(e,t){return o8(i8(t).substr(0,5),e)},OE.prototype.encryptor=function(e,t){var i=i8(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return o8(i,s)}},mL.prototype.equals=function(e){var t,i="id,objectNumber,equals";if(!e||_o(e)!==_o(this))return!1;var s=0;for(t in this)if(!(i.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&i.indexOf(t)<0&&s--;return s===0},Rn.API={events:[]},Rn.version="3.0.1";var sa=Rn.API,YQ=1,p_=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pE=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kn=function(e){return e.toFixed(2)},Rv=function(e){return e.toFixed(5)};sa.__acroform__={};var Ju=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Zne=function(e){return e*YQ},Mp=function(e){var t=new Ffe,i=Yr.internal.getHeight(e)||0,s=Yr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Kn(s)),Number(Kn(i))],t},KKe=sa.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},WKe=sa.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},GKe=sa.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ca=sa.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return GKe(e,t-1)},Ta=sa.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return KKe(e,t-1)},Ra=sa.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return WKe(e,t-1)},$Ke=sa.__acroform__.calculateCoordinates=function(e,t){var i=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,c=e[0],u=e[1],f=e[2],p=e[3],m={};return m.lowerLeft_X=i(c)||0,m.lowerLeft_Y=s(u+p)||0,m.upperRight_X=i(c+f)||0,m.upperRight_Y=s(u)||0,[Number(Kn(m.lowerLeft_X)),Number(Kn(m.lowerLeft_Y)),Number(Kn(m.upperRight_X)),Number(Kn(m.upperRight_Y))]},zKe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],i=e._V||e.DV,s=s8(e,i),c=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+c+" "+Kn(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var u=Mp(e);return u.scope=e.scope,u.stream=t.join(`
`),u}},s8=function(e,t){var i=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},c=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");c=e.multiline?c.map(function(te){return te.split(`
`)}):c.map(function(te){return[te]});var u=i,f=Yr.internal.getHeight(e)||0;f=f<0?-f:f;var p=Yr.internal.getWidth(e)||0;p=p<0?-p:p;var m=function(te,le,ae){if(te+1<c.length){var ge=le+" "+c[te+1][0];return oN(ge,e,ae).width<=p-4}return!1};u++;e:for(;u>0;){t="",u--;var E,w,T=oN("3",e,u).height,N=e.multiline?f-u:(f-T)/2,O=N+=2,P=0,M=0,Q=0;if(u<=0){t=`(...) Tj
`,t+="% Width of Text: "+oN(t,e,u=12).width+", FieldWidth:"+p+`
`;break}for(var k="",D=0,V=0;V<c.length;V++)if(c.hasOwnProperty(V)){var K=!1;if(c[V].length!==1&&Q!==c[V].length-1){if((T+2)*(D+2)+2>f)continue e;k+=c[V][Q],K=!0,M=V,V--}else{k=(k+=c[V][Q]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var J=parseInt(V),ie=m(J,k,u),fe=V>=c.length-1;if(ie&&!fe){k+=" ",Q=0;continue}if(ie||fe){if(fe)M=J;else if(e.multiline&&(T+2)*(D+2)+2>f)continue e}else{if(!e.multiline||(T+2)*(D+2)+2>f)continue e;M=J}}for(var Z="",pe=P;pe<=M;pe++){var Y=c[pe];if(e.multiline){if(pe===M){Z+=Y[Q]+" ",Q=(Q+1)%Y.length;continue}if(pe===P){Z+=Y[Y.length-1]+" ";continue}}Z+=Y[0]+" "}switch(Z=Z.substr(Z.length-1)==" "?Z.substr(0,Z.length-1):Z,w=oN(Z,e,u).width,e.textAlign){case"right":E=p-w-2;break;case"center":E=(p-w)/2;break;case"left":default:E=2}t+=Kn(E)+" "+Kn(O)+` Td
`,t+="("+p_(Z)+`) Tj
`,t+=-Kn(E)+` 0 Td
`,O=-(u+2),w=0,P=K?M:M+1,D++,k=""}break}return s.text=t,s.fontSize=u,s},oN=function(e,t,i){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),c=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:c}},qKe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YKe=function(e,t){var i={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===i.type&&s.object===i.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(i)},XKe=function(e,t){for(var i in e)if(e.hasOwnProperty(i)){var s=i,c=e[i];t.internal.newObjectDeferredBegin(c.objId,!0),_o(c)==="object"&&typeof c.putStream=="function"&&c.putStream(),delete e[s]}},JKe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Rh.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(qKe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");YQ=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Vfe,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var c in s)if(s.hasOwnProperty(c)){var u=s[c];u.objId=void 0,u.hasAnnotation&&YKe(u,i)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(i){(function(s,c){var u=!s;for(var f in s||(c.internal.newObjectDeferredBegin(c.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),c.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||c.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(f)){var p=s[f],m=[],E=p.Rect;if(p.Rect&&(p.Rect=$Ke(p.Rect,c)),c.internal.newObjectDeferredBegin(p.objId,!0),p.DA=Yr.createDefaultAppearanceStream(p),_o(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(m=p.getKeyValueListForStream()),p.Rect=E,p.hasAppearanceStream&&!p.appearanceStreamContent){var w=zKe(p);m.push({key:"AP",value:"<</N "+w+">>"}),c.internal.acroformPlugin.xForms.push(w)}if(p.appearanceStreamContent){var T="";for(var N in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(N)){var O=p.appearanceStreamContent[N];if(T+="/"+N+" ",T+="<<",Object.keys(O).length>=1||Array.isArray(O)){for(var f in O)if(O.hasOwnProperty(f)){var P=O[f];typeof P=="function"&&(P=P.call(c,p)),T+="/"+f+" "+P+" ",c.internal.acroformPlugin.xForms.indexOf(P)>=0||c.internal.acroformPlugin.xForms.push(P)}}else typeof(P=O)=="function"&&(P=P.call(c,p)),T+="/"+f+" "+P,c.internal.acroformPlugin.xForms.indexOf(P)>=0||c.internal.acroformPlugin.xForms.push(P);T+=">>"}m.push({key:"AP",value:`<<
`+T+">>"})}c.internal.putStream({additionalKeyValues:m,objectId:p.objId}),c.internal.out("endobj")}u&&XKe(c.internal.acroformPlugin.xForms,c)})(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},Mfe=sa.__acroform__.arrayToPdfArray=function(e,t,i){var s=function(f){return f};if(Array.isArray(e)){for(var c="[",u=0;u<e.length;u++)switch(u!==0&&(c+=" "),_o(e[u])){case"boolean":case"number":case"object":c+=e[u].toString();break;case"string":e[u].substr(0,1)!=="/"?(t!==void 0&&i&&(s=i.internal.getEncryptor(t)),c+="("+p_(s(e[u].toString()))+")"):c+=e[u].toString()}return c+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},F4=function(e,t,i){var s=function(c){return c};return t!==void 0&&i&&(s=i.internal.getEncryptor(t)),(e=e||"").toString(),e="("+p_(s(e))+")"},Wp=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wp.prototype.toString=function(){return this.objId+" 0 R"},Wp.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Wp.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var i in t)if(Object.getOwnPropertyDescriptor(this,t[i]).configurable===!1){var s=t[i],c=this[s];c&&(Array.isArray(c)?e.push({key:s,value:Mfe(c,this.objId,this.scope)}):c instanceof Wp?(c.scope=this.scope,e.push({key:s,value:c.objId+" 0 R"})):typeof c!="function"&&e.push({key:s,value:c}))}return e};var Ffe=function(){Wp.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){e=i.trim()},get:function(){return e||null}})};Ju(Ffe,Wp);var Vfe=function(){Wp.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var i=function(s){return s};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+p_(i(e))+")"}},set:function(i){e=i}})};Ju(Vfe,Wp);var Rh=function e(){Wp.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');t=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ca(t,3)},set:function(k){k?this.F=Ta(t,3):this.F=Ra(t,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');i=k}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(k){s=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(k){s[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(k){s[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(k){s[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(k){s[3]=k}});var c="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return c},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":c=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof vL)return;u="FieldObject"+e.FieldNum++}var k=function(D){return D};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+p_(k(u))+")"},set:function(k){u=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(k){u=k}});var f="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return f},set:function(k){f=k}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(k){p=k}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(k){m=k}});var E=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return E===void 0?50/YQ:E},set:function(k){E=k}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(k){w=k}});var T="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!T||this instanceof vL||this instanceof q1))return F4(T,this.objId,this.scope)},set:function(k){k=k.toString(),T=k}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Nc?N:F4(N,this.objId,this.scope)},set:function(k){k=k.toString(),N=this instanceof Nc?k:k.substr(0,1)==="("?pE(k.substr(1,k.length-2)):pE(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nc?pE(N.substr(1,N.length-1)):N},set:function(k){k=k.toString(),N=this instanceof Nc?"/"+k:k}});var O=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(O)return O},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(O)return this instanceof Nc?O:F4(O,this.objId,this.scope)},set:function(k){k=k.toString(),O=this instanceof Nc?k:k.substr(0,1)==="("?pE(k.substr(1,k.length-2)):pE(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nc?pE(O.substr(1,O.length-1)):O},set:function(k){k=k.toString(),O=this instanceof Nc?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,M=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return M},set:function(k){k=!!k,M=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(k){P=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,1)},set:function(k){k?this.Ff=Ta(this.Ff,1):this.Ff=Ra(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,2)},set:function(k){k?this.Ff=Ta(this.Ff,2):this.Ff=Ra(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,3)},set:function(k){k?this.Ff=Ta(this.Ff,3):this.Ff=Ra(this.Ff,3)}});var Q=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Q!==null)return Q},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');Q=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(Q){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:Q=2;break;case"center":case 1:Q=1;break;case"left":case 0:default:Q=0}}})};Ju(Rh,Wp);var iw=function(){Rh.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){e=i}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Mfe(t,this.objId,this.scope)},set:function(i){var s,c;c=[],typeof(s=i)=="string"&&(c=function(u,f,p){p||(p=1);for(var m,E=[];m=f.exec(u);)E.push(m[p]);return E}(s,/\((.*?)\)/g)),t=c}}),this.getOptions=function(){return t},this.setOptions=function(i){t=i,this.sort&&t.sort()},this.addOption=function(i){i=(i=i||"").toString(),t.push(i),this.sort&&t.sort()},this.removeOption=function(i,s){for(s=s||!1,i=(i=i||"").toString();t.indexOf(i)!==-1&&(t.splice(t.indexOf(i),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,18)},set:function(i){i?this.Ff=Ta(this.Ff,18):this.Ff=Ra(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Ta(this.Ff,19):this.Ff=Ra(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,20)},set:function(i){i?(this.Ff=Ta(this.Ff,20),t.sort()):this.Ff=Ra(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,22)},set:function(i){i?this.Ff=Ta(this.Ff,22):this.Ff=Ra(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,23)},set:function(i){i?this.Ff=Ta(this.Ff,23):this.Ff=Ra(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,27)},set:function(i){i?this.Ff=Ta(this.Ff,27):this.Ff=Ra(this.Ff,27)}}),this.hasAppearanceStream=!1};Ju(iw,Rh);var ow=function(){iw.call(this),this.fontName="helvetica",this.combo=!1};Ju(ow,iw);var sw=function(){ow.call(this),this.combo=!0};Ju(sw,ow);var tB=function(){sw.call(this),this.edit=!0};Ju(tB,sw);var Nc=function(){Rh.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,15)},set:function(i){i?this.Ff=Ta(this.Ff,15):this.Ff=Ra(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,16)},set:function(i){i?this.Ff=Ta(this.Ff,16):this.Ff=Ra(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,17)},set:function(i){i?this.Ff=Ta(this.Ff,17):this.Ff=Ra(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,26)},set:function(i){i?this.Ff=Ta(this.Ff,26):this.Ff=Ra(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,c=[];for(s in c.push("<<"),t)c.push("/"+s+" ("+p_(i(t[s]))+")");return c.push(">>"),c.join(`
`)}},set:function(i){_o(i)==="object"&&(t=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(i){typeof i=="string"&&(t.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}})};Ju(Nc,Rh);var rB=function(){Nc.call(this),this.pushButton=!0};Ju(rB,Nc);var aw=function(){Nc.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ju(aw,Nc);var vL=function(){var e,t;Rh.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(c){e=c}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(c){t=c}});var i,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var c=function(p){return p};this.scope&&(c=this.scope.internal.getEncryptor(this.objId));var u,f=[];for(u in f.push("<<"),s)f.push("/"+u+" ("+p_(c(s[u]))+")");return f.push(">>"),f.join(`
`)},set:function(c){_o(c)==="object"&&(s=c)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(c){typeof c=="string"&&(s.CA=c)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(c){i=c}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(c){i="/"+c}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ju(vL,Rh),aw.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var i=this.Kids[t];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},aw.prototype.createOption=function(e){var t=new vL;return t.Parent=this,t.optionName=e,this.Kids.push(t),ZKe.call(this.scope,t),t};var nB=function(){Nc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yr.CheckBox.createAppearanceStream()};Ju(nB,Nc);var q1=function(){Rh.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,13)},set:function(t){t?this.Ff=Ta(this.Ff,13):this.Ff=Ra(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,21)},set:function(t){t?this.Ff=Ta(this.Ff,21):this.Ff=Ra(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,23)},set:function(t){t?this.Ff=Ta(this.Ff,23):this.Ff=Ra(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,24)},set:function(t){t?this.Ff=Ta(this.Ff,24):this.Ff=Ra(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,25)},set:function(t){t?this.Ff=Ta(this.Ff,25):this.Ff=Ra(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,26)},set:function(t){t?this.Ff=Ta(this.Ff,26):this.Ff=Ra(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ju(q1,Rh);var iB=function(){q1.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ca(this.Ff,14)},set:function(e){e?this.Ff=Ta(this.Ff,14):this.Ff=Ra(this.Ff,14)}}),this.password=!0};Ju(iB,q1);var Yr={CheckBox:{createAppearanceStream:function(){return{N:{On:Yr.CheckBox.YesNormal},D:{On:Yr.CheckBox.YesPushDown,Off:Yr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Mp(e);t.scope=e.scope;var i=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,c=e.scope.__private__.encodeColorString(e.color),u=s8(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+Kn(Yr.internal.getWidth(e))+" "+Kn(Yr.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+s+" "+Kn(u.fontSize)+" Tf "+c),i.push("BT"),i.push(u.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join(`
`),t},YesNormal:function(e){var t=Mp(e);t.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),c=[],u=Yr.internal.getHeight(e),f=Yr.internal.getWidth(e),p=s8(e,e.caption);return c.push("1 g"),c.push("0 0 "+Kn(f)+" "+Kn(u)+" re"),c.push("f"),c.push("q"),c.push("0 0 1 rg"),c.push("0 0 "+Kn(f-1)+" "+Kn(u-1)+" re"),c.push("W"),c.push("n"),c.push("0 g"),c.push("BT"),c.push("/"+i+" "+Kn(p.fontSize)+" Tf "+s),c.push(p.text),c.push("ET"),c.push("Q"),t.stream=c.join(`
`),t},OffPushDown:function(e){var t=Mp(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Kn(Yr.internal.getWidth(e))+" "+Kn(Yr.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Circle.YesNormal,t.D[e]=Yr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Mp(e);t.scope=e.scope;var i=[],s=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var c=Yr.internal.Bezier_C,u=Number((s*c).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Rv(Yr.internal.getWidth(e)/2)+" "+Rv(Yr.internal.getHeight(e)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),i.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),i.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),i.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(e){var t=Mp(e);t.scope=e.scope;var i=[],s=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var c=Number((2*s).toFixed(5)),u=Number((c*Yr.internal.Bezier_C).toFixed(5)),f=Number((s*Yr.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Rv(Yr.internal.getWidth(e)/2)+" "+Rv(Yr.internal.getHeight(e)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+u+" "+u+" "+c+" 0 "+c+" c"),i.push("-"+u+" "+c+" -"+c+" "+u+" -"+c+" 0 c"),i.push("-"+c+" -"+u+" -"+u+" -"+c+" 0 -"+c+" c"),i.push(u+" -"+c+" "+c+" -"+u+" "+c+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Rv(Yr.internal.getWidth(e)/2)+" "+Rv(Yr.internal.getHeight(e)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+f+" "+f+" "+s+" 0 "+s+" c"),i.push("-"+f+" "+s+" -"+s+" "+f+" -"+s+" 0 c"),i.push("-"+s+" -"+f+" -"+f+" -"+s+" 0 -"+s+" c"),i.push(f+" -"+s+" "+s+" -"+f+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Mp(e);t.scope=e.scope;var i=[],s=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var c=Number((2*s).toFixed(5)),u=Number((c*Yr.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Rv(Yr.internal.getWidth(e)/2)+" "+Rv(Yr.internal.getHeight(e)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+u+" "+u+" "+c+" 0 "+c+" c"),i.push("-"+u+" "+c+" -"+c+" "+u+" -"+c+" 0 c"),i.push("-"+c+" -"+u+" -"+u+" -"+c+" 0 -"+c+" c"),i.push(u+" -"+c+" "+c+" -"+u+" "+c+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Cross.YesNormal,t.D[e]=Yr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Mp(e);t.scope=e.scope;var i=[],s=Yr.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+Kn(Yr.internal.getWidth(e)-2)+" "+Kn(Yr.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Kn(s.x1.x)+" "+Kn(s.x1.y)+" m"),i.push(Kn(s.x2.x)+" "+Kn(s.x2.y)+" l"),i.push(Kn(s.x4.x)+" "+Kn(s.x4.y)+" m"),i.push(Kn(s.x3.x)+" "+Kn(s.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(e){var t=Mp(e);t.scope=e.scope;var i=Yr.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Kn(Yr.internal.getWidth(e))+" "+Kn(Yr.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Kn(Yr.internal.getWidth(e)-2)+" "+Kn(Yr.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Kn(i.x1.x)+" "+Kn(i.x1.y)+" m"),s.push(Kn(i.x2.x)+" "+Kn(i.x2.y)+" l"),s.push(Kn(i.x4.x)+" "+Kn(i.x4.y)+" m"),s.push(Kn(i.x3.x)+" "+Kn(i.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Mp(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Kn(Yr.internal.getWidth(e))+" "+Kn(Yr.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+i}};Yr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Yr.internal.getWidth(e),i=Yr.internal.getHeight(e),s=Math.min(t,i);return{x1:{x:(t-s)/2,y:(i-s)/2+s},x2:{x:(t-s)/2+s,y:(i-s)/2},x3:{x:(t-s)/2,y:(i-s)/2},x4:{x:(t-s)/2+s,y:(i-s)/2+s}}}},Yr.internal.getWidth=function(e){var t=0;return _o(e)==="object"&&(t=Zne(e.Rect[2])),t},Yr.internal.getHeight=function(e){var t=0;return _o(e)==="object"&&(t=Zne(e.Rect[3])),t};var ZKe=sa.addField=function(e){if(JKe(this,e),!(e instanceof Rh))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};sa.AcroFormChoiceField=iw,sa.AcroFormListBox=ow,sa.AcroFormComboBox=sw,sa.AcroFormEditBox=tB,sa.AcroFormButton=Nc,sa.AcroFormPushButton=rB,sa.AcroFormRadioButton=aw,sa.AcroFormCheckBox=nB,sa.AcroFormTextField=q1,sa.AcroFormPasswordField=iB,sa.AcroFormAppearance=Yr,sa.AcroForm={ChoiceField:iw,ListBox:ow,ComboBox:sw,EditBox:tB,Button:Nc,PushButton:rB,RadioButton:aw,CheckBox:nB,TextField:q1,PasswordField:iB,Appearance:Yr},Rn.AcroForm={ChoiceField:iw,ListBox:ow,ComboBox:sw,EditBox:tB,Button:Nc,PushButton:rB,RadioButton:aw,CheckBox:nB,TextField:q1,PasswordField:iB,Appearance:Yr};function Qfe(e){return e.reduce(function(t,i,s){return t[i]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(te,le){var ae,ge,se,xe,Me,Be=t;if((le=le||t)==="RGBA"||te.data!==void 0&&te.data instanceof Uint8ClampedArray&&"height"in te&&"width"in te)return"RGBA";if(ie(te))for(Me in i)for(se=i[Me],ae=0;ae<se.length;ae+=1){for(xe=!0,ge=0;ge<se[ae].length;ge+=1)if(se[ae][ge]!==void 0&&se[ae][ge]!==te[ge]){xe=!1;break}if(xe===!0){Be=Me;break}}else for(Me in i)for(se=i[Me],ae=0;ae<se.length;ae+=1){for(xe=!0,ge=0;ge<se[ae].length;ge+=1)if(se[ae][ge]!==void 0&&se[ae][ge]!==te.charCodeAt(ge)){xe=!1;break}if(xe===!0){Be=Me;break}}return Be===t&&le!==t&&(Be=le),Be},c=function te(le){for(var ae=this.internal.write,ge=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);le.objectId=this.internal.newObject();var xe=[];if(xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Image"}),xe.push({key:"Width",value:le.width}),xe.push({key:"Height",value:le.height}),le.colorSpace===Q.INDEXED?xe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(le.palette.length/3-1)+" "+("sMask"in le&&le.sMask!==void 0?le.objectId+2:le.objectId+1)+" 0 R]"}):(xe.push({key:"ColorSpace",value:"/"+le.colorSpace}),le.colorSpace===Q.DEVICE_CMYK&&xe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),xe.push({key:"BitsPerComponent",value:le.bitsPerComponent}),"decodeParameters"in le&&le.decodeParameters!==void 0&&xe.push({key:"DecodeParms",value:"<<"+le.decodeParameters+">>"}),"transparency"in le&&Array.isArray(le.transparency)){for(var Me="",Be=0,ke=le.transparency.length;Be<ke;Be++)Me+=le.transparency[Be]+" "+le.transparency[Be]+" ";xe.push({key:"Mask",value:"["+Me+"]"})}le.sMask!==void 0&&xe.push({key:"SMask",value:le.objectId+1+" 0 R"});var Ke=le.filter!==void 0?["/"+le.filter]:void 0;if(ge({data:le.data,additionalKeyValues:xe,alreadyAppliedFilters:Ke,objectId:le.objectId}),ae("endobj"),"sMask"in le&&le.sMask!==void 0){var ht="/Predictor "+le.predictor+" /Colors 1 /BitsPerComponent "+le.bitsPerComponent+" /Columns "+le.width,ve={width:le.width,height:le.height,colorSpace:"DeviceGray",bitsPerComponent:le.bitsPerComponent,decodeParameters:ht,data:le.sMask};"filter"in le&&(ve.filter=le.filter),te.call(this,ve)}if(le.colorSpace===Q.INDEXED){var Oe=this.internal.newObject();ge({data:Z(new Uint8Array(le.palette)),objectId:Oe}),ae("endobj")}},u=function(){var te=this.internal.collections.addImage_images;for(var le in te)c.call(this,te[le])},f=function(){var te,le=this.internal.collections.addImage_images,ae=this.internal.write;for(var ge in le)ae("/I"+(te=le[ge]).index,te.objectId,"0","R")},p=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",f))},m=function(){var te=this.internal.collections.addImage_images;return p.call(this),te},E=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(te){return typeof e["process"+te.toUpperCase()]=="function"},T=function(te){return _o(te)==="object"&&te.nodeType===1},N=function(te,le){if(te.nodeName==="IMG"&&te.hasAttribute("src")){var ae=""+te.getAttribute("src");if(ae.indexOf("data:image/")===0)return VC(unescape(ae).split("base64,").pop());var ge=e.loadFile(ae,!0);if(ge!==void 0)return ge}if(te.nodeName==="CANVAS"){if(te.width===0||te.height===0)throw new Error("Given canvas must have data. Canvas width: "+te.width+", height: "+te.height);var se;switch(le){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;case"JPEG":case"JPG":default:se="image/jpeg"}return VC(te.toDataURL(se,1).split("base64,").pop())}},O=function(te){var le=this.internal.collections.addImage_images;if(le){for(var ae in le)if(te===le[ae].alias)return le[ae]}},P=function(te,le,ae){return te||le||(te=-96,le=-96),te<0&&(te=-1*ae.width*72/te/this.internal.scaleFactor),le<0&&(le=-1*ae.height*72/le/this.internal.scaleFactor),te===0&&(te=le*ae.width/ae.height),le===0&&(le=te*ae.height/ae.width),[te,le]},M=function(te,le,ae,ge,se,xe){var Me=P.call(this,ae,ge,se),Be=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Ke=m.call(this);if(ae=Me[0],ge=Me[1],Ke[se.index]=se,xe){xe*=Math.PI/180;var ht=Math.cos(xe),ve=Math.sin(xe),Oe=function(Fe){return Fe.toFixed(4)},Ue=[Oe(ht),Oe(ve),Oe(-1*ve),Oe(ht),0,0,"cm"]}this.internal.write("q"),xe?(this.internal.write([1,"0","0",1,Be(te),ke(le+ge),"cm"].join(" ")),this.internal.write(Ue.join(" ")),this.internal.write([Be(ae),"0","0",Be(ge),"0","0","cm"].join(" "))):this.internal.write([Be(ae),"0","0",Be(ge),Be(te),ke(le+ge),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},Q=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=e.__addimage__.sHashCode=function(te){var le,ae,ge=0;if(typeof te=="string")for(ae=te.length,le=0;le<ae;le++)ge=(ge<<5)-ge+te.charCodeAt(le),ge|=0;else if(ie(te))for(ae=te.byteLength/2,le=0;le<ae;le++)ge=(ge<<5)-ge+te[le],ge|=0;return ge},V=e.__addimage__.validateStringAsBase64=function(te){(te=te||"").toString().trim();var le=!0;return te.length===0&&(le=!1),te.length%4!=0&&(le=!1),/^[A-Za-z0-9+/]+$/.test(te.substr(0,te.length-2))===!1&&(le=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(te.substr(-2))===!1&&(le=!1),le},K=e.__addimage__.extractImageFromDataUrl=function(te){if(te==null||!(te=te.trim()).startsWith("data:"))return null;var le=te.indexOf(",");return le<0?null:te.substring(0,le).trim().endsWith("base64")?te.substring(le+1):null},J=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(te){return J()&&te instanceof ArrayBuffer};var ie=e.__addimage__.isArrayBufferView=function(te){return J()&&typeof Uint32Array<"u"&&(te instanceof Int8Array||te instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&te instanceof Uint8ClampedArray||te instanceof Int16Array||te instanceof Uint16Array||te instanceof Int32Array||te instanceof Uint32Array||te instanceof Float32Array||te instanceof Float64Array)},fe=e.__addimage__.binaryStringToUint8Array=function(te){for(var le=te.length,ae=new Uint8Array(le),ge=0;ge<le;ge++)ae[ge]=te.charCodeAt(ge);return ae},Z=e.__addimage__.arrayBufferToBinaryString=function(te){for(var le="",ae=ie(te)?te:new Uint8Array(te),ge=0;ge<ae.length;ge+=8192)le+=String.fromCharCode.apply(null,ae.subarray(ge,ge+8192));return le};e.addImage=function(){var te,le,ae,ge,se,xe,Me,Be,ke;if(typeof arguments[1]=="number"?(le=t,ae=arguments[1],ge=arguments[2],se=arguments[3],xe=arguments[4],Me=arguments[5],Be=arguments[6],ke=arguments[7]):(le=arguments[1],ae=arguments[2],ge=arguments[3],se=arguments[4],xe=arguments[5],Me=arguments[6],Be=arguments[7],ke=arguments[8]),_o(te=arguments[0])==="object"&&!T(te)&&"imageData"in te){var Ke=te;te=Ke.imageData,le=Ke.format||le||t,ae=Ke.x||ae||0,ge=Ke.y||ge||0,se=Ke.w||Ke.width||se,xe=Ke.h||Ke.height||xe,Me=Ke.alias||Me,Be=Ke.compression||Be,ke=Ke.rotation||Ke.angle||ke}var ht=this.internal.getFilters();if(Be===void 0&&ht.indexOf("FlateEncode")!==-1&&(Be="SLOW"),isNaN(ae)||isNaN(ge))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var ve=pe.call(this,te,le,Me,Be);return M.call(this,ae,ge,se,xe,ve,ke),this};var pe=function(te,le,ae,ge){var se,xe,Me;if(typeof te=="string"&&s(te)===t){te=unescape(te);var Be=Y(te,!1);(Be!==""||(Be=e.loadFile(te,!0))!==void 0)&&(te=Be)}if(T(te)&&(te=N(te,le)),le=s(te,le),!w(le))throw new Error("addImage does not support files of type '"+le+"', please ensure that a plugin for '"+le+"' support is added.");if(((Me=ae)==null||Me.length===0)&&(ae=function(ke){return typeof ke=="string"||ie(ke)?D(ke):ie(ke.data)?D(ke.data):null}(te)),(se=O.call(this,ae))||(J()&&(te instanceof Uint8Array||le==="RGBA"||(xe=te,te=fe(te))),se=this["process"+le.toUpperCase()](te,E.call(this),ae,function(ke){return ke&&typeof ke=="string"&&(ke=ke.toUpperCase()),ke in e.image_compression?ke:k.NONE}(ge),xe)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},Y=e.__addimage__.convertBase64ToBinaryString=function(te,le){le=typeof le!="boolean"||le;var ae,ge="";if(typeof te=="string"){var se;ae=(se=K(te))!==null&&se!==void 0?se:te;try{ge=VC(ae)}catch(xe){if(le)throw V(ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+xe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ge};e.getImageProperties=function(te){var le,ae,ge="";if(T(te)&&(te=N(te)),typeof te=="string"&&s(te)===t&&((ge=Y(te,!1))===""&&(ge=e.loadFile(te)||""),te=ge),ae=s(te),!w(ae))throw new Error("addImage does not support files of type '"+ae+"', please ensure that a plugin for '"+ae+"' support is added.");if(!J()||te instanceof Uint8Array||(te=fe(te)),!(le=this["process"+ae.toUpperCase()](te)))throw new Error("An unknown error occurred whilst processing the image");return le.fileType=ae,le}})(Rn.API),function(e){var t=function(i){if(i!==void 0&&i!="")return!0};Rn.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(i){for(var s,c,u,f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(i.objId),E=i.pageContext.annotations,w=!1,T=0;T<E.length&&!w;T++)switch((s=E[T]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var N=0;N<E.length;N++){s=E[N];var O=this.internal.pdfEscape,P=this.internal.getEncryptor(i.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var M=this.internal.newAdditionalObject(),Q=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(M.objId),D=s.title||"Note";u="<</Type /Annot /Subtype /Text "+(c="/Rect ["+f(s.bounds.x)+" "+p(s.bounds.y+s.bounds.h)+" "+f(s.bounds.x+s.bounds.w)+" "+p(s.bounds.y)+"] ")+"/Contents ("+O(k(s.contents))+")",u+=" /Popup "+Q.objId+" 0 R",u+=" /P "+m.objId+" 0 R",u+=" /T ("+O(k(D))+") >>",M.content=u;var V=M.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(c="/Rect ["+f(s.bounds.x+30)+" "+p(s.bounds.y+s.bounds.h)+" "+f(s.bounds.x+s.bounds.w+30)+" "+p(s.bounds.y)+"] ")+" /Parent "+V,s.open&&(u+=" /Open true"),u+=" >>",Q.content=u,this.internal.write(M.objId,"0 R",Q.objId,"0 R");break;case"freetext":c="/Rect ["+f(s.bounds.x)+" "+p(s.bounds.y)+" "+f(s.bounds.x+s.bounds.w)+" "+p(s.bounds.y+s.bounds.h)+"] ";var K=s.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+c+"/Contents ("+O(P(s.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(s.options.name){var J=this.annotations._nameMap[s.options.name];s.options.pageNumber=J.page,s.options.top=J.y}else s.options.top||(s.options.top=0);if(c="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",u="",s.options.url)u="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /A <</S /URI /URI ("+O(P(s.options.url))+") >>";else if(s.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,u+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var ie=p(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),u+=" /XYZ "+s.options.left+" "+ie+" "+s.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),e.createAnnotation=function(i){var s=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":s.pageContext.annotations.push(i)}},e.link=function(i,s,c,u,f){var p=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,E=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:m(i),y:E(s),w:m(i+c),h:E(s+u)},options:f,type:"link"})},e.textWithLink=function(i,s,c,u){var f,p,m=this.getTextWidth(i),E=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){p=u.maxWidth;var w=this.splitTextToSize(i,p).length;f=Math.ceil(E*w)}else p=m,f=E;return this.text(i,s,c,u),c+=.2*E,u.align==="center"&&(s-=m/2),u.align==="right"&&(s-=m),this.link(s,c-E,p,f,u),m},e.getTextWidth=function(i){var s=this.internal.getFontSize();return this.getStringUnitWidth(i)*s/this.internal.scaleFactor}}(Rn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},c=[1570,1571,1573,1575];e.__arabicParser__={};var u=e.__arabicParser__.isInArabicSubstitutionA=function(M){return t[M.charCodeAt(0)]!==void 0},f=e.__arabicParser__.isArabicLetter=function(M){return typeof M=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(M)},p=e.__arabicParser__.isArabicEndLetter=function(M){return f(M)&&u(M)&&t[M.charCodeAt(0)].length<=2},m=e.__arabicParser__.isArabicAlfLetter=function(M){return f(M)&&c.indexOf(M.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(M){return f(M)&&u(M)&&t[M.charCodeAt(0)].length>=1};var E=e.__arabicParser__.arabicLetterHasFinalForm=function(M){return f(M)&&u(M)&&t[M.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(M){return f(M)&&u(M)&&t[M.charCodeAt(0)].length>=3};var w=e.__arabicParser__.arabicLetterHasMedialForm=function(M){return f(M)&&u(M)&&t[M.charCodeAt(0)].length==4},T=e.__arabicParser__.resolveLigatures=function(M){var Q=0,k=i,D="",V=0;for(Q=0;Q<M.length;Q+=1)k[M.charCodeAt(Q)]!==void 0?(V++,typeof(k=k[M.charCodeAt(Q)])=="number"&&(D+=String.fromCharCode(k),k=i,V=0),Q===M.length-1&&(k=i,D+=M.charAt(Q-(V-1)),Q-=V-1,V=0)):(k=i,D+=M.charAt(Q-V),Q-=V,V=0);return D};e.__arabicParser__.isArabicDiacritic=function(M){return M!==void 0&&s[M.charCodeAt(0)]!==void 0};var N=e.__arabicParser__.getCorrectForm=function(M,Q,k){return f(M)?u(M)===!1?-1:!E(M)||!f(Q)&&!f(k)||!f(k)&&p(Q)||p(M)&&!f(Q)||p(M)&&m(Q)||p(M)&&p(Q)?0:w(M)&&f(Q)&&!p(Q)&&f(k)&&E(k)?3:p(M)||!f(k)?1:2:-1},O=function(M){var Q=0,k=0,D=0,V="",K="",J="",ie=(M=M||"").split("\\s+"),fe=[];for(Q=0;Q<ie.length;Q+=1){for(fe.push(""),k=0;k<ie[Q].length;k+=1)V=ie[Q][k],K=ie[Q][k-1],J=ie[Q][k+1],f(V)?(D=N(V,K,J),fe[Q]+=D!==-1?String.fromCharCode(t[V.charCodeAt(0)][D]):V):fe[Q]+=V;fe[Q]=T(fe[Q])}return fe.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var M,Q=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(Q)){var D=0;for(k=[],D=0;D<Q.length;D+=1)Array.isArray(Q[D])?k.push([O(Q[D][0]),Q[D][1],Q[D][2]]):k.push([O(Q[D])]);M=k}else M=O(Q);return typeof arguments[0]=="string"?M:(arguments[0].text=M,arguments[0])};e.events.push(["preProcessText",P])}(Rn.API),Rn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(p){i=p}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(p){s=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var c=300;Object.defineProperty(this,"height",{get:function(){return c},set:function(p){c=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=c+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(p){u=p}});var f={};Object.defineProperty(this,"style",{get:function(){return f},set:function(p){f=p}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(i,s){var c;if((i=i||"2d")!=="2d")return null;for(c in s)this.pdf.context2d.hasOwnProperty(c)&&(this.pdf.context2d[c]=s[c]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Rn.API),function(e){var t={left:0,top:0,bottom:0,right:0},i=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),c.call(this))},c=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(M){m=M}});var E=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return E},set:function(M){E=M}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(M){w=M}});var T=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return T},set:function(M){T=M}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(M){N=M}});var O=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return O},set:function(M){O=M}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(M){P=M}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(m){return s.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},e.getTextDimensions=function(m,E){s.call(this);var w=(E=E||{}).fontSize||this.getFontSize(),T=E.font||this.getFont(),N=E.scaleFactor||this.internal.scaleFactor,O=0,P=0,M=0,Q=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var k=E.maxWidth;k>0?typeof m=="string"?m=this.splitTextToSize(m,k):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(V,K){return V.concat(Q.splitTextToSize(K,k))},[])):m=Array.isArray(m)?m:[m];for(var D=0;D<m.length;D++)O<(M=this.getStringUnitWidth(m[D],{font:T})*w)&&(O=M);return O!==0&&(P=m.length),{w:O/=N,h:Math.max((P*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/N,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new u(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var f=e.cell=function(){var m;m=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var E=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,T=this.internal.__cell__.margins||t,N=this.internal.__cell__.tableHeaderRow,O=this.internal.__cell__.printHeaders;return E.lineNumber!==void 0&&(E.lineNumber===m.lineNumber?(m.x=(E.x||0)+(E.width||0),m.y=E.y||0):E.y+E.height+m.height+T.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=T.top,O&&N&&(this.printHeaderRow(m.lineNumber,!0),m.y+=N[0].height)):m.y=E.y+E.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,i===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-w,m.y+w,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+w,{align:"center",baseline:"top",maxWidth:m.width-w-w}):this.text(m.text,m.x+w,m.y+w,{align:"left",baseline:"top",maxWidth:m.width-w-w})),this.internal.__cell__.lastCell=m,this};e.table=function(m,E,w,T,N){if(s.call(this),!w)throw new Error("No data for PDF table.");var O,P,M,Q,k=[],D=[],V=[],K={},J={},ie=[],fe=[],Z=(N=N||{}).autoSize||!1,pe=N.printHeaders!==!1,Y=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,te=N.margins||Object.assign({width:this.getPageWidth()},t),le=typeof N.padding=="number"?N.padding:3,ae=N.headerBackgroundColor||"#c8c8c8",ge=N.headerTextColor||"#000";if(c.call(this),this.internal.__cell__.printHeaders=pe,this.internal.__cell__.margins=te,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=le,this.internal.__cell__.headerBackgroundColor=ae,this.internal.__cell__.headerTextColor=ge,this.setFontSize(Y),T==null)D=k=Object.keys(w[0]),V=k.map(function(){return"left"});else if(Array.isArray(T)&&_o(T[0])==="object")for(k=T.map(function(Ke){return Ke.name}),D=T.map(function(Ke){return Ke.prompt||Ke.name||""}),V=T.map(function(Ke){return Ke.align||"left"}),O=0;O<T.length;O+=1)J[T[O].name]=T[O].width*(19.049976/25.4);else Array.isArray(T)&&typeof T[0]=="string"&&(D=k=T,V=k.map(function(){return"left"}));if(Z||Array.isArray(T)&&typeof T[0]=="string")for(O=0;O<k.length;O+=1){for(K[Q=k[O]]=w.map(function(Ke){return Ke[Q]}),this.setFont(void 0,"bold"),ie.push(this.getTextDimensions(D[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=K[Q],this.setFont(void 0,"normal"),M=0;M<P.length;M+=1)ie.push(this.getTextDimensions(P[M],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[Q]=Math.max.apply(null,ie)+le+le,ie=[]}if(pe){var se={};for(O=0;O<k.length;O+=1)se[k[O]]={},se[k[O]].text=D[O],se[k[O]].align=V[O];var xe=p.call(this,se,J);fe=k.map(function(Ke){return new u(m,E,J[Ke],xe,se[Ke].text,void 0,se[Ke].align)}),this.setTableHeaderRow(fe),this.printHeaderRow(1,!1)}var Me=T.reduce(function(Ke,ht){return Ke[ht.name]=ht.align,Ke},{});for(O=0;O<w.length;O+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:O,data:w[O]},this);var Be=p.call(this,w[O],J);for(M=0;M<k.length;M+=1){var ke=w[O][k[M]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:O,col:M,data:ke},this),f.call(this,new u(m,E,J[k[M]],Be,ke,O+2,Me[k[M]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=E,this};var p=function(m,E){var w=this.internal.__cell__.padding,T=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(m).map(function(O){var P=m[O];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,E[O]-w-w)},this).map(function(O){return this.getLineHeightFactor()*O.length*T/N+w+w},this).reduce(function(O,P){return Math.max(O,P)},0)};e.setTableHeaderRow=function(m){s.call(this),this.internal.__cell__.tableHeaderRow=m},e.printHeaderRow=function(m,E){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var T=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(T[0],T[1],T[2],T[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],O=0;O<this.internal.__cell__.tableHeaderRow.length;O+=1){w=this.internal.__cell__.tableHeaderRow[O].clone(),E&&(w.y=this.internal.__cell__.margins.top||0,N.push(w)),w.lineNumber=m;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),f.call(this,w),this.setTextColor(P)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),i=!1}}(Rn.API);var Hfe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jfe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],a8=Qfe(jfe),Kfe=[100,200,300,400,500,600,700,800,900],eWe=Qfe(Kfe);function c8(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),i=function(u){return Hfe[u=u||"normal"]?u:"normal"}(e.style),s=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(e.weight),c=function(u){return typeof a8[u=u||"normal"]=="number"?u:"normal"}(e.stretch);return{family:t,style:i,weight:s,stretch:c,src:e.src||[],ref:e.ref||{name:t,style:[c,i,s].join(" ")}}}function eie(e,t,i,s){var c;for(c=i;c>=0&&c<t.length;c+=s)if(e[t[c]])return e[t[c]];for(c=i;c>=0&&c<t.length;c-=s)if(e[t[c]])return e[t[c]]}var tWe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},tie={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rie(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function rWe(e,t,i){for(var s=(i=i||{}).defaultFontFamily||"times",c=Object.assign({},tWe,i.genericFontFamilies||{}),u=null,f=null,p=0;p<t.length;++p)if(c[(u=c8(t[p])).family]&&(u.family=c[u.family]),e.hasOwnProperty(u.family)){f=e[u.family];break}if(!(f=f||e[s]))throw new Error("Could not find a font-family for the rule '"+rie(u)+"' and default family '"+s+"'.");if(f=function(m,E){if(E[m])return E[m];var w=a8[m],T=w<=a8.normal?-1:1,N=eie(E,jfe,w,T);if(!N)throw new Error("Could not find a matching font-stretch value for "+m);return N}(u.stretch,f),f=function(m,E){if(E[m])return E[m];for(var w=Hfe[m],T=0;T<w.length;++T)if(E[w[T]])return E[w[T]];throw new Error("Could not find a matching font-style for "+m)}(u.style,f),!(f=function(m,E){if(E[m])return E[m];if(m===400&&E[500])return E[500];if(m===500&&E[400])return E[400];var w=eWe[m],T=eie(E,Kfe,w,m<400?-1:1);if(!T)throw new Error("Could not find a matching font-weight for value "+m);return T}(u.weight,f)))throw new Error("Failed to resolve a font for the rule '"+rie(u)+"'.");return f}function nie(e){return e.trimLeft()}function nWe(e,t){for(var i=0;i<e.length;){if(e.charAt(i)===t)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function iWe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var sN,iie,oie,V4=["times"];(function(e){var t,i,s,c,u,f,p,m,E,w=function(ve){return ve=ve||{},this.isStrokeTransparent=ve.isStrokeTransparent||!1,this.strokeOpacity=ve.strokeOpacity||1,this.strokeStyle=ve.strokeStyle||"#000000",this.fillStyle=ve.fillStyle||"#000000",this.isFillTransparent=ve.isFillTransparent||!1,this.fillOpacity=ve.fillOpacity||1,this.font=ve.font||"10px sans-serif",this.textBaseline=ve.textBaseline||"alphabetic",this.textAlign=ve.textAlign||"left",this.lineWidth=ve.lineWidth||1,this.lineJoin=ve.lineJoin||"miter",this.lineCap=ve.lineCap||"butt",this.path=ve.path||[],this.transform=ve.transform!==void 0?ve.transform.clone():new m,this.globalCompositeOperation=ve.globalCompositeOperation||"normal",this.globalAlpha=ve.globalAlpha||1,this.clip_path=ve.clip_path||[],this.currentPoint=ve.currentPoint||new f,this.miterLimit=ve.miterLimit||10,this.lastPoint=ve.lastPoint||new f,this.lineDashOffset=ve.lineDashOffset||0,this.lineDash=ve.lineDash||[],this.margin=ve.margin||[0,0,0,0],this.prevPageLastElemOffset=ve.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ve.ignoreClearRect!="boolean"||ve.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new T(this),t=this.internal.f2,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,f=this.internal.Point,p=this.internal.Rectangle,m=this.internal.Matrix,E=new w}]);var T=function(ve){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Oe=ve;Object.defineProperty(this,"pdf",{get:function(){return Oe}});var Ue=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ue},set:function(lt){Ue=!!lt}});var Fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Fe},set:function(lt){Fe=!!lt}});var Qe=0;Object.defineProperty(this,"posX",{get:function(){return Qe},set:function(lt){isNaN(lt)||(Qe=lt)}});var We=0;Object.defineProperty(this,"posY",{get:function(){return We},set:function(lt){isNaN(lt)||(We=lt)}}),Object.defineProperty(this,"margin",{get:function(){return E.margin},set:function(lt){var He;typeof lt=="number"?He=[lt,lt,lt,lt]:((He=new Array(4))[0]=lt[0],He[1]=lt.length>=2?lt[1]:He[0],He[2]=lt.length>=3?lt[2]:He[0],He[3]=lt.length>=4?lt[3]:He[1]),E.margin=He}});var et=!1;Object.defineProperty(this,"autoPaging",{get:function(){return et},set:function(lt){et=lt}});var Ze=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ze},set:function(lt){Ze=lt}});var pt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pt},set:function(lt){pt=lt}}),Object.defineProperty(this,"ctx",{get:function(){return E},set:function(lt){lt instanceof w&&(E=lt)}}),Object.defineProperty(this,"path",{get:function(){return E.path},set:function(lt){E.path=lt}});var at=[];Object.defineProperty(this,"ctxStack",{get:function(){return at},set:function(lt){at=lt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(lt){var He;He=N(lt),this.ctx.fillStyle=He.style,this.ctx.isFillTransparent=He.a===0,this.ctx.fillOpacity=He.a,this.pdf.setFillColor(He.r,He.g,He.b,{a:He.a}),this.pdf.setTextColor(He.r,He.g,He.b,{a:He.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(lt){var He=N(lt);this.ctx.strokeStyle=He.style,this.ctx.isStrokeTransparent=He.a===0,this.ctx.strokeOpacity=He.a,He.a===0?this.pdf.setDrawColor(255,255,255):(He.a,this.pdf.setDrawColor(He.r,He.g,He.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(lt){["butt","round","square"].indexOf(lt)!==-1&&(this.ctx.lineCap=lt,this.pdf.setLineCap(lt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(lt){isNaN(lt)||(this.ctx.lineWidth=lt,this.pdf.setLineWidth(lt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(lt){["bevel","round","miter"].indexOf(lt)!==-1&&(this.ctx.lineJoin=lt,this.pdf.setLineJoin(lt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(lt){isNaN(lt)||(this.ctx.miterLimit=lt,this.pdf.setMiterLimit(lt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(lt){this.ctx.textBaseline=lt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(lt){["right","end","center","left","start"].indexOf(lt)!==-1&&(this.ctx.textAlign=lt)}});var Rt=null;function Ot(lt,He){if(Rt===null){var vr=function(qt){var Nt=[];return Object.keys(qt).forEach(function(It){qt[It].forEach(function(Yt){var Bt=null;switch(Yt){case"bold":Bt={family:It,weight:"bold"};break;case"italic":Bt={family:It,style:"italic"};break;case"bolditalic":Bt={family:It,weight:"bold",style:"italic"};break;case"":case"normal":Bt={family:It}}Bt!==null&&(Bt.ref={name:It,style:Yt},Nt.push(Bt))})}),Nt}(lt.getFontList());Rt=function(qt){for(var Nt={},It=0;It<qt.length;++It){var Yt=c8(qt[It]),Bt=Yt.family,_r=Yt.stretch,ar=Yt.style,zr=Yt.weight;Nt[Bt]=Nt[Bt]||{},Nt[Bt][_r]=Nt[Bt][_r]||{},Nt[Bt][_r][ar]=Nt[Bt][_r][ar]||{},Nt[Bt][_r][ar][zr]=Yt}return Nt}(vr.concat(He))}return Rt}var Ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ft},set:function(lt){Rt=null,Ft=lt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(lt){var He;if(this.ctx.font=lt,(He=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(lt))!==null){var vr=He[1];He[2];var qt=He[3],Nt=He[4];He[5];var It=He[6],Yt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Nt)[2];Nt=Math.floor(Yt==="px"?parseFloat(Nt)*this.pdf.internal.scaleFactor:Yt==="em"?parseFloat(Nt)*this.pdf.getFontSize():parseFloat(Nt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Nt);var Bt=function(nr){var er,vt,tn=[],Rr=nr.trim();if(Rr==="")return V4;if(Rr in tie)return[tie[Rr]];for(;Rr!=="";){switch(vt=null,er=(Rr=nie(Rr)).charAt(0)){case'"':case"'":vt=nWe(Rr.substring(1),er);break;default:vt=iWe(Rr)}if(vt===null||(tn.push(vt[0]),(Rr=nie(vt[1]))!==""&&Rr.charAt(0)!==","))return V4;Rr=Rr.replace(/^,/,"")}return tn}(It);if(this.fontFaces){var _r=rWe(Ot(this.pdf,this.fontFaces),Bt.map(function(nr){return{family:nr,stretch:"normal",weight:qt,style:vr}}));this.pdf.setFont(_r.ref.name,_r.ref.style)}else{var ar="";(qt==="bold"||parseInt(qt,10)>=700||vr==="bold")&&(ar="bold"),vr==="italic"&&(ar+="italic"),ar.length===0&&(ar="normal");for(var zr="",Xr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Kt=0;Kt<Bt.length;Kt++){if(this.pdf.internal.getFont(Bt[Kt],ar,{noFallback:!0,disableWarning:!0})!==void 0){zr=Bt[Kt];break}if(ar==="bolditalic"&&this.pdf.internal.getFont(Bt[Kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)zr=Bt[Kt],ar="bold";else if(this.pdf.internal.getFont(Bt[Kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){zr=Bt[Kt],ar="normal";break}}if(zr===""){for(var yr=0;yr<Bt.length;yr++)if(Xr[Bt[yr]]){zr=Xr[Bt[yr]];break}}zr=zr===""?"Times":zr,this.pdf.setFont(zr,ar)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(lt){this.ctx.globalCompositeOperation=lt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(lt){this.ctx.globalAlpha=lt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(lt){this.ctx.lineDashOffset=lt,ht.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(lt){this.ctx.lineDash=lt,ht.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(lt){this.ctx.ignoreClearRect=!!lt}})};T.prototype.setLineDash=function(ve){this.lineDash=ve},T.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},T.prototype.fill=function(){K.call(this,"fill",!1)},T.prototype.stroke=function(){K.call(this,"stroke",!1)},T.prototype.beginPath=function(){this.path=[{type:"begin"}]},T.prototype.moveTo=function(ve,Oe){if(isNaN(ve)||isNaN(Oe))throw jo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ue=this.ctx.transform.applyToPoint(new f(ve,Oe));this.path.push({type:"mt",x:Ue.x,y:Ue.y}),this.ctx.lastPoint=new f(ve,Oe)},T.prototype.closePath=function(){var ve=new f(0,0),Oe=0;for(Oe=this.path.length-1;Oe!==-1;Oe--)if(this.path[Oe].type==="begin"&&_o(this.path[Oe+1])==="object"&&typeof this.path[Oe+1].x=="number"){ve=new f(this.path[Oe+1].x,this.path[Oe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new f(ve.x,ve.y)},T.prototype.lineTo=function(ve,Oe){if(isNaN(ve)||isNaN(Oe))throw jo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ue=this.ctx.transform.applyToPoint(new f(ve,Oe));this.path.push({type:"lt",x:Ue.x,y:Ue.y}),this.ctx.lastPoint=new f(Ue.x,Ue.y)},T.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},T.prototype.quadraticCurveTo=function(ve,Oe,Ue,Fe){if(isNaN(Ue)||isNaN(Fe)||isNaN(ve)||isNaN(Oe))throw jo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Qe=this.ctx.transform.applyToPoint(new f(Ue,Fe)),We=this.ctx.transform.applyToPoint(new f(ve,Oe));this.path.push({type:"qct",x1:We.x,y1:We.y,x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new f(Qe.x,Qe.y)},T.prototype.bezierCurveTo=function(ve,Oe,Ue,Fe,Qe,We){if(isNaN(Qe)||isNaN(We)||isNaN(ve)||isNaN(Oe)||isNaN(Ue)||isNaN(Fe))throw jo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var et=this.ctx.transform.applyToPoint(new f(Qe,We)),Ze=this.ctx.transform.applyToPoint(new f(ve,Oe)),pt=this.ctx.transform.applyToPoint(new f(Ue,Fe));this.path.push({type:"bct",x1:Ze.x,y1:Ze.y,x2:pt.x,y2:pt.y,x:et.x,y:et.y}),this.ctx.lastPoint=new f(et.x,et.y)},T.prototype.arc=function(ve,Oe,Ue,Fe,Qe,We){if(isNaN(ve)||isNaN(Oe)||isNaN(Ue)||isNaN(Fe)||isNaN(Qe))throw jo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(We=!!We,!this.ctx.transform.isIdentity){var et=this.ctx.transform.applyToPoint(new f(ve,Oe));ve=et.x,Oe=et.y;var Ze=this.ctx.transform.applyToPoint(new f(0,Ue)),pt=this.ctx.transform.applyToPoint(new f(0,0));Ue=Math.sqrt(Math.pow(Ze.x-pt.x,2)+Math.pow(Ze.y-pt.y,2))}Math.abs(Qe-Fe)>=2*Math.PI&&(Fe=0,Qe=2*Math.PI),this.path.push({type:"arc",x:ve,y:Oe,radius:Ue,startAngle:Fe,endAngle:Qe,counterclockwise:We})},T.prototype.arcTo=function(ve,Oe,Ue,Fe,Qe){throw new Error("arcTo not implemented.")},T.prototype.rect=function(ve,Oe,Ue,Fe){if(isNaN(ve)||isNaN(Oe)||isNaN(Ue)||isNaN(Fe))throw jo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ve,Oe),this.lineTo(ve+Ue,Oe),this.lineTo(ve+Ue,Oe+Fe),this.lineTo(ve,Oe+Fe),this.lineTo(ve,Oe),this.lineTo(ve+Ue,Oe),this.lineTo(ve,Oe)},T.prototype.fillRect=function(ve,Oe,Ue,Fe){if(isNaN(ve)||isNaN(Oe)||isNaN(Ue)||isNaN(Fe))throw jo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!O.call(this)){var Qe={};this.lineCap!=="butt"&&(Qe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Qe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ve,Oe,Ue,Fe),this.fill(),Qe.hasOwnProperty("lineCap")&&(this.lineCap=Qe.lineCap),Qe.hasOwnProperty("lineJoin")&&(this.lineJoin=Qe.lineJoin)}},T.prototype.strokeRect=function(ve,Oe,Ue,Fe){if(isNaN(ve)||isNaN(Oe)||isNaN(Ue)||isNaN(Fe))throw jo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(ve,Oe,Ue,Fe),this.stroke())},T.prototype.clearRect=function(ve,Oe,Ue,Fe){if(isNaN(ve)||isNaN(Oe)||isNaN(Ue)||isNaN(Fe))throw jo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ve,Oe,Ue,Fe))},T.prototype.save=function(ve){ve=typeof ve!="boolean"||ve;for(var Oe=this.pdf.internal.getCurrentPageInfo().pageNumber,Ue=0;Ue<this.pdf.internal.getNumberOfPages();Ue++)this.pdf.setPage(Ue+1),this.pdf.internal.out("q");if(this.pdf.setPage(Oe),ve){this.ctx.fontSize=this.pdf.internal.getFontSize();var Fe=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Fe}},T.prototype.restore=function(ve){ve=typeof ve!="boolean"||ve;for(var Oe=this.pdf.internal.getCurrentPageInfo().pageNumber,Ue=0;Ue<this.pdf.internal.getNumberOfPages();Ue++)this.pdf.setPage(Ue+1),this.pdf.internal.out("Q");this.pdf.setPage(Oe),ve&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},T.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(ve){var Oe,Ue,Fe,Qe;if(ve.isCanvasGradient===!0&&(ve=ve.getColor()),!ve)return{r:0,g:0,b:0,a:0,style:ve};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ve))Oe=0,Ue=0,Fe=0,Qe=0;else{var We=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ve);if(We!==null)Oe=parseInt(We[1]),Ue=parseInt(We[2]),Fe=parseInt(We[3]),Qe=1;else if((We=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ve))!==null)Oe=parseInt(We[1]),Ue=parseInt(We[2]),Fe=parseInt(We[3]),Qe=parseFloat(We[4]);else{if(Qe=1,typeof ve=="string"&&ve.charAt(0)!=="#"){var et=new Dfe(ve);ve=et.ok?et.toHex():"#000000"}ve.length===4?(Oe=ve.substring(1,2),Oe+=Oe,Ue=ve.substring(2,3),Ue+=Ue,Fe=ve.substring(3,4),Fe+=Fe):(Oe=ve.substring(1,3),Ue=ve.substring(3,5),Fe=ve.substring(5,7)),Oe=parseInt(Oe,16),Ue=parseInt(Ue,16),Fe=parseInt(Fe,16)}}return{r:Oe,g:Ue,b:Fe,a:Qe,style:ve}},O=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};T.prototype.fillText=function(ve,Oe,Ue,Fe){if(isNaN(Oe)||isNaN(Ue)||typeof ve!="string")throw jo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Fe=isNaN(Fe)?void 0:Fe,!O.call(this)){var Qe=Be(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;le.call(this,{text:ve,x:Oe,y:Ue,scale:We,angle:Qe,align:this.textAlign,maxWidth:Fe})}},T.prototype.strokeText=function(ve,Oe,Ue,Fe){if(isNaN(Oe)||isNaN(Ue)||typeof ve!="string")throw jo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){Fe=isNaN(Fe)?void 0:Fe;var Qe=Be(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;le.call(this,{text:ve,x:Oe,y:Ue,scale:We,renderingMode:"stroke",angle:Qe,align:this.textAlign,maxWidth:Fe})}},T.prototype.measureText=function(ve){if(typeof ve!="string")throw jo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Oe=this.pdf,Ue=this.pdf.internal.scaleFactor,Fe=Oe.internal.getFontSize(),Qe=Oe.getStringUnitWidth(ve)*Fe/Oe.internal.scaleFactor,We=function(et){var Ze=(et=et||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ze}}),this};return new We({width:Qe*=Math.round(96*Ue/72*1e4)/1e4})},T.prototype.scale=function(ve,Oe){if(isNaN(ve)||isNaN(Oe))throw jo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ue=new m(ve,0,0,Oe,0,0);this.ctx.transform=this.ctx.transform.multiply(Ue)},T.prototype.rotate=function(ve){if(isNaN(ve))throw jo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Oe=new m(Math.cos(ve),Math.sin(ve),-Math.sin(ve),Math.cos(ve),0,0);this.ctx.transform=this.ctx.transform.multiply(Oe)},T.prototype.translate=function(ve,Oe){if(isNaN(ve)||isNaN(Oe))throw jo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ue=new m(1,0,0,1,ve,Oe);this.ctx.transform=this.ctx.transform.multiply(Ue)},T.prototype.transform=function(ve,Oe,Ue,Fe,Qe,We){if(isNaN(ve)||isNaN(Oe)||isNaN(Ue)||isNaN(Fe)||isNaN(Qe)||isNaN(We))throw jo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var et=new m(ve,Oe,Ue,Fe,Qe,We);this.ctx.transform=this.ctx.transform.multiply(et)},T.prototype.setTransform=function(ve,Oe,Ue,Fe,Qe,We){ve=isNaN(ve)?1:ve,Oe=isNaN(Oe)?0:Oe,Ue=isNaN(Ue)?0:Ue,Fe=isNaN(Fe)?1:Fe,Qe=isNaN(Qe)?0:Qe,We=isNaN(We)?0:We,this.ctx.transform=new m(ve,Oe,Ue,Fe,Qe,We)};var M=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};T.prototype.drawImage=function(ve,Oe,Ue,Fe,Qe,We,et,Ze,pt){var at=this.pdf.getImageProperties(ve),Rt=1,Ot=1,Ft=1,lt=1;Fe!==void 0&&Ze!==void 0&&(Ft=Ze/Fe,lt=pt/Qe,Rt=at.width/Fe*Ze/Fe,Ot=at.height/Qe*pt/Qe),We===void 0&&(We=Oe,et=Ue,Oe=0,Ue=0),Fe!==void 0&&Ze===void 0&&(Ze=Fe,pt=Qe),Fe===void 0&&Ze===void 0&&(Ze=at.width,pt=at.height);for(var He,vr=this.ctx.transform.decompose(),qt=Be(vr.rotate.shx),Nt=new m,It=(Nt=(Nt=(Nt=Nt.multiply(vr.translate)).multiply(vr.skew)).multiply(vr.scale)).applyToRectangle(new p(We-Oe*Ft,et-Ue*lt,Fe*Rt,Qe*Ot)),Yt=Q.call(this,It),Bt=[],_r=0;_r<Yt.length;_r+=1)Bt.indexOf(Yt[_r])===-1&&Bt.push(Yt[_r]);if(V(Bt),this.autoPaging)for(var ar=Bt[0],zr=Bt[Bt.length-1],Xr=ar;Xr<zr+1;Xr++){this.pdf.setPage(Xr);var Kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yr=Xr===1?this.posY+this.margin[0]:this.margin[0],nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],er=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=Xr===1?0:nr+(Xr-2)*er;if(this.ctx.clip_path.length!==0){var tn=this.path;He=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(He,this.posX+this.margin[3],-vt+yr+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=tn}var Rr=JSON.parse(JSON.stringify(It));Rr=D([Rr],this.posX+this.margin[3],-vt+yr+this.ctx.prevPageLastElemOffset)[0];var on=(Xr>ar||Xr<zr)&&M.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,er,null).clip().discardPath()),this.pdf.addImage(ve,"JPEG",Rr.x,Rr.y,Rr.w,Rr.h,null,null,qt),on&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ve,"JPEG",It.x,It.y,It.w,It.h,null,null,qt)};var Q=function(ve,Oe,Ue){var Fe=[];Oe=Oe||this.pdf.internal.pageSize.width,Ue=Ue||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Qe=this.posY+this.ctx.prevPageLastElemOffset;switch(ve.type){default:case"mt":case"lt":Fe.push(Math.floor((ve.y+Qe)/Ue)+1);break;case"arc":Fe.push(Math.floor((ve.y+Qe-ve.radius)/Ue)+1),Fe.push(Math.floor((ve.y+Qe+ve.radius)/Ue)+1);break;case"qct":var We=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ve.x1,ve.y1,ve.x,ve.y);Fe.push(Math.floor((We.y+Qe)/Ue)+1),Fe.push(Math.floor((We.y+We.h+Qe)/Ue)+1);break;case"bct":var et=Ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ve.x1,ve.y1,ve.x2,ve.y2,ve.x,ve.y);Fe.push(Math.floor((et.y+Qe)/Ue)+1),Fe.push(Math.floor((et.y+et.h+Qe)/Ue)+1);break;case"rect":Fe.push(Math.floor((ve.y+Qe)/Ue)+1),Fe.push(Math.floor((ve.y+ve.h+Qe)/Ue)+1)}for(var Ze=0;Ze<Fe.length;Ze+=1)for(;this.pdf.internal.getNumberOfPages()<Fe[Ze];)k.call(this);return Fe},k=function(){var ve=this.fillStyle,Oe=this.strokeStyle,Ue=this.font,Fe=this.lineCap,Qe=this.lineWidth,We=this.lineJoin;this.pdf.addPage(),this.fillStyle=ve,this.strokeStyle=Oe,this.font=Ue,this.lineCap=Fe,this.lineWidth=Qe,this.lineJoin=We},D=function(ve,Oe,Ue){for(var Fe=0;Fe<ve.length;Fe++)switch(ve[Fe].type){case"bct":ve[Fe].x2+=Oe,ve[Fe].y2+=Ue;case"qct":ve[Fe].x1+=Oe,ve[Fe].y1+=Ue;case"mt":case"lt":case"arc":default:ve[Fe].x+=Oe,ve[Fe].y+=Ue}return ve},V=function(ve){return ve.sort(function(Oe,Ue){return Oe-Ue})},K=function(ve,Oe){for(var Ue,Fe,Qe=this.fillStyle,We=this.strokeStyle,et=this.lineCap,Ze=this.lineWidth,pt=Math.abs(Ze*this.ctx.transform.scaleX),at=this.lineJoin,Rt=JSON.parse(JSON.stringify(this.path)),Ot=JSON.parse(JSON.stringify(this.path)),Ft=[],lt=0;lt<Ot.length;lt++)if(Ot[lt].x!==void 0)for(var He=Q.call(this,Ot[lt]),vr=0;vr<He.length;vr+=1)Ft.indexOf(He[vr])===-1&&Ft.push(He[vr]);for(var qt=0;qt<Ft.length;qt++)for(;this.pdf.internal.getNumberOfPages()<Ft[qt];)k.call(this);if(V(Ft),this.autoPaging)for(var Nt=Ft[0],It=Ft[Ft.length-1],Yt=Nt;Yt<It+1;Yt++){this.pdf.setPage(Yt),this.fillStyle=Qe,this.strokeStyle=We,this.lineCap=et,this.lineWidth=pt,this.lineJoin=at;var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_r=Yt===1?this.posY+this.margin[0]:this.margin[0],ar=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xr=Yt===1?0:ar+(Yt-2)*zr;if(this.ctx.clip_path.length!==0){var Kt=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Ue,this.posX+this.margin[3],-Xr+_r+this.ctx.prevPageLastElemOffset),J.call(this,ve,!0),this.path=Kt}if(Fe=JSON.parse(JSON.stringify(Rt)),this.path=D(Fe,this.posX+this.margin[3],-Xr+_r+this.ctx.prevPageLastElemOffset),Oe===!1||Yt===0){var yr=(Yt>Nt||Yt<It)&&M.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,zr,null).clip().discardPath()),J.call(this,ve,Oe),yr&&this.pdf.restoreGraphicsState()}this.lineWidth=Ze}else this.lineWidth=pt,J.call(this,ve,Oe),this.lineWidth=Ze;this.path=Rt},J=function(ve,Oe){if((ve!=="stroke"||Oe||!P.call(this))&&(ve==="stroke"||Oe||!O.call(this))){for(var Ue,Fe,Qe=[],We=this.path,et=0;et<We.length;et++){var Ze=We[et];switch(Ze.type){case"begin":Qe.push({begin:!0});break;case"close":Qe.push({close:!0});break;case"mt":Qe.push({start:Ze,deltas:[],abs:[]});break;case"lt":var pt=Qe.length;if(We[et-1]&&!isNaN(We[et-1].x)&&(Ue=[Ze.x-We[et-1].x,Ze.y-We[et-1].y],pt>0)){for(;pt>=0;pt--)if(Qe[pt-1].close!==!0&&Qe[pt-1].begin!==!0){Qe[pt-1].deltas.push(Ue),Qe[pt-1].abs.push(Ze);break}}break;case"bct":Ue=[Ze.x1-We[et-1].x,Ze.y1-We[et-1].y,Ze.x2-We[et-1].x,Ze.y2-We[et-1].y,Ze.x-We[et-1].x,Ze.y-We[et-1].y],Qe[Qe.length-1].deltas.push(Ue);break;case"qct":var at=We[et-1].x+2/3*(Ze.x1-We[et-1].x),Rt=We[et-1].y+2/3*(Ze.y1-We[et-1].y),Ot=Ze.x+2/3*(Ze.x1-Ze.x),Ft=Ze.y+2/3*(Ze.y1-Ze.y),lt=Ze.x,He=Ze.y;Ue=[at-We[et-1].x,Rt-We[et-1].y,Ot-We[et-1].x,Ft-We[et-1].y,lt-We[et-1].x,He-We[et-1].y],Qe[Qe.length-1].deltas.push(Ue);break;case"arc":Qe.push({deltas:[],abs:[],arc:!0}),Array.isArray(Qe[Qe.length-1].abs)&&Qe[Qe.length-1].abs.push(Ze)}}Fe=Oe?null:ve==="stroke"?"stroke":"fill";for(var vr=!1,qt=0;qt<Qe.length;qt++)if(Qe[qt].arc)for(var Nt=Qe[qt].abs,It=0;It<Nt.length;It++){var Yt=Nt[It];Yt.type==="arc"?Z.call(this,Yt.x,Yt.y,Yt.radius,Yt.startAngle,Yt.endAngle,Yt.counterclockwise,void 0,Oe,!vr):ae.call(this,Yt.x,Yt.y),vr=!0}else if(Qe[qt].close===!0)this.pdf.internal.out("h"),vr=!1;else if(Qe[qt].begin!==!0){var Bt=Qe[qt].start.x,_r=Qe[qt].start.y;ge.call(this,Qe[qt].deltas,Bt,_r),vr=!0}Fe&&pe.call(this,Fe),Oe&&Y.call(this)}},ie=function(ve){var Oe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ue=Oe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ve-Ue;case"top":return ve+Oe-Ue;case"hanging":return ve+Oe-2*Ue;case"middle":return ve+Oe/2-Ue;case"ideographic":return ve;case"alphabetic":default:return ve}},fe=function(ve){return ve+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};T.prototype.createLinearGradient=function(){var ve=function(){};return ve.colorStops=[],ve.addColorStop=function(Oe,Ue){this.colorStops.push([Oe,Ue])},ve.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ve.isCanvasGradient=!0,ve},T.prototype.createPattern=function(){return this.createLinearGradient()},T.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Z=function(ve,Oe,Ue,Fe,Qe,We,et,Ze,pt){for(var at=xe.call(this,Ue,Fe,Qe,We),Rt=0;Rt<at.length;Rt++){var Ot=at[Rt];Rt===0&&(pt?te.call(this,Ot.x1+ve,Ot.y1+Oe):ae.call(this,Ot.x1+ve,Ot.y1+Oe)),se.call(this,ve,Oe,Ot.x2,Ot.y2,Ot.x3,Ot.y3,Ot.x4,Ot.y4)}Ze?Y.call(this):pe.call(this,et)},pe=function(ve){switch(ve){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},te=function(ve,Oe){this.pdf.internal.out(i(ve)+" "+s(Oe)+" m")},le=function(ve){var Oe;switch(ve.align){case"right":case"end":Oe="right";break;case"center":Oe="center";break;case"left":case"start":default:Oe="left"}var Ue=this.pdf.getTextDimensions(ve.text),Fe=ie.call(this,ve.y),Qe=fe.call(this,Fe)-Ue.h,We=this.ctx.transform.applyToPoint(new f(ve.x,Fe)),et=this.ctx.transform.decompose(),Ze=new m;Ze=(Ze=(Ze=Ze.multiply(et.translate)).multiply(et.skew)).multiply(et.scale);for(var pt,at,Rt,Ot=this.ctx.transform.applyToRectangle(new p(ve.x,Fe,Ue.w,Ue.h)),Ft=Ze.applyToRectangle(new p(ve.x,Qe,Ue.w,Ue.h)),lt=Q.call(this,Ft),He=[],vr=0;vr<lt.length;vr+=1)He.indexOf(lt[vr])===-1&&He.push(lt[vr]);if(V(He),this.autoPaging)for(var qt=He[0],Nt=He[He.length-1],It=qt;It<Nt+1;It++){this.pdf.setPage(It);var Yt=It===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_r=this.pdf.internal.pageSize.height-this.margin[2],ar=_r-this.margin[0],zr=this.pdf.internal.pageSize.width-this.margin[1],Xr=zr-this.margin[3],Kt=It===1?0:Bt+(It-2)*ar;if(this.ctx.clip_path.length!==0){var yr=this.path;pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(pt,this.posX+this.margin[3],-1*Kt+Yt),J.call(this,"fill",!0),this.path=yr}var nr=D([JSON.parse(JSON.stringify(Ft))],this.posX+this.margin[3],-Kt+Yt+this.ctx.prevPageLastElemOffset)[0];ve.scale>=.01&&(at=this.pdf.internal.getFontSize(),this.pdf.setFontSize(at*ve.scale),Rt=this.lineWidth,this.lineWidth=Rt*ve.scale);var er=this.autoPaging!=="text";if(er||nr.y+nr.h<=_r){if(er||nr.y>=Yt&&nr.x<=zr){var vt=er?ve.text:this.pdf.splitTextToSize(ve.text,ve.maxWidth||zr-nr.x)[0],tn=D([JSON.parse(JSON.stringify(Ot))],this.posX+this.margin[3],-Kt+Yt+this.ctx.prevPageLastElemOffset)[0],Rr=er&&(It>qt||It<Nt)&&M.call(this);Rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xr,ar,null).clip().discardPath()),this.pdf.text(vt,tn.x,tn.y,{angle:ve.angle,align:Oe,renderingMode:ve.renderingMode}),Rr&&this.pdf.restoreGraphicsState()}}else nr.y<_r&&(this.ctx.prevPageLastElemOffset+=_r-nr.y);ve.scale>=.01&&(this.pdf.setFontSize(at),this.lineWidth=Rt)}else ve.scale>=.01&&(at=this.pdf.internal.getFontSize(),this.pdf.setFontSize(at*ve.scale),Rt=this.lineWidth,this.lineWidth=Rt*ve.scale),this.pdf.text(ve.text,We.x+this.posX,We.y+this.posY,{angle:ve.angle,align:Oe,renderingMode:ve.renderingMode,maxWidth:ve.maxWidth}),ve.scale>=.01&&(this.pdf.setFontSize(at),this.lineWidth=Rt)},ae=function(ve,Oe,Ue,Fe){Ue=Ue||0,Fe=Fe||0,this.pdf.internal.out(i(ve+Ue)+" "+s(Oe+Fe)+" l")},ge=function(ve,Oe,Ue){return this.pdf.lines(ve,Oe,Ue,null,null)},se=function(ve,Oe,Ue,Fe,Qe,We,et,Ze){this.pdf.internal.out([t(c(Ue+ve)),t(u(Fe+Oe)),t(c(Qe+ve)),t(u(We+Oe)),t(c(et+ve)),t(u(Ze+Oe)),"c"].join(" "))},xe=function(ve,Oe,Ue,Fe){for(var Qe=2*Math.PI,We=Math.PI/2;Oe>Ue;)Oe-=Qe;var et=Math.abs(Ue-Oe);et<Qe&&Fe&&(et=Qe-et);for(var Ze=[],pt=Fe?-1:1,at=Oe;et>1e-5;){var Rt=at+pt*Math.min(et,We);Ze.push(Me.call(this,ve,at,Rt)),et-=Math.abs(Rt-at),at=Rt}return Ze},Me=function(ve,Oe,Ue){var Fe=(Ue-Oe)/2,Qe=ve*Math.cos(Fe),We=ve*Math.sin(Fe),et=Qe,Ze=-We,pt=et*et+Ze*Ze,at=pt+et*Qe+Ze*We,Rt=4/3*(Math.sqrt(2*pt*at)-at)/(et*We-Ze*Qe),Ot=et-Rt*Ze,Ft=Ze+Rt*et,lt=Ot,He=-Ft,vr=Fe+Oe,qt=Math.cos(vr),Nt=Math.sin(vr);return{x1:ve*Math.cos(Oe),y1:ve*Math.sin(Oe),x2:Ot*qt-Ft*Nt,y2:Ot*Nt+Ft*qt,x3:lt*qt-He*Nt,y3:lt*Nt+He*qt,x4:ve*Math.cos(Ue),y4:ve*Math.sin(Ue)}},Be=function(ve){return 180*ve/Math.PI},ke=function(ve,Oe,Ue,Fe,Qe,We){var et=ve+.5*(Ue-ve),Ze=Oe+.5*(Fe-Oe),pt=Qe+.5*(Ue-Qe),at=We+.5*(Fe-We),Rt=Math.min(ve,Qe,et,pt),Ot=Math.max(ve,Qe,et,pt),Ft=Math.min(Oe,We,Ze,at),lt=Math.max(Oe,We,Ze,at);return new p(Rt,Ft,Ot-Rt,lt-Ft)},Ke=function(ve,Oe,Ue,Fe,Qe,We,et,Ze){var pt,at,Rt,Ot,Ft,lt,He,vr,qt,Nt,It,Yt,Bt,_r,ar=Ue-ve,zr=Fe-Oe,Xr=Qe-Ue,Kt=We-Fe,yr=et-Qe,nr=Ze-We;for(at=0;at<41;at++)qt=(He=(Rt=ve+(pt=at/40)*ar)+pt*((Ft=Ue+pt*Xr)-Rt))+pt*(Ft+pt*(Qe+pt*yr-Ft)-He),Nt=(vr=(Ot=Oe+pt*zr)+pt*((lt=Fe+pt*Kt)-Ot))+pt*(lt+pt*(We+pt*nr-lt)-vr),at==0?(It=qt,Yt=Nt,Bt=qt,_r=Nt):(It=Math.min(It,qt),Yt=Math.min(Yt,Nt),Bt=Math.max(Bt,qt),_r=Math.max(_r,Nt));return new p(Math.round(It),Math.round(Yt),Math.round(Bt-It),Math.round(_r-Yt))},ht=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ve,Oe,Ue=(ve=this.ctx.lineDash,Oe=this.ctx.lineDashOffset,JSON.stringify({lineDash:ve,lineDashOffset:Oe}));this.prevLineDash!==Ue&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ue)}}})(Rn.API),function(e){var t=function(u){var f,p,m,E,w,T,N,O,P,M;for(p=[],m=0,E=(u+=f="\0\0\0\0".slice(u.length%4||4)).length;E>m;m+=4)(w=(u.charCodeAt(m)<<24)+(u.charCodeAt(m+1)<<16)+(u.charCodeAt(m+2)<<8)+u.charCodeAt(m+3))!==0?(T=(w=((w=((w=((w=(w-(M=w%85))/85)-(P=w%85))/85)-(O=w%85))/85)-(N=w%85))/85)%85,p.push(T+33,N+33,O+33,P+33,M+33)):p.push(122);return function(Q,k){for(var D=k;D>0;D--)Q.pop()}(p,f.length),String.fromCharCode.apply(String,p)+"~>"},i=function(u){var f,p,m,E,w,T=String,N="length",O=255,P="charCodeAt",M="slice",Q="replace";for(u[M](-2),u=u[M](0,-2)[Q](/\s/g,"")[Q]("z","!!!!!"),m=[],E=0,w=(u+=f="uuuuu"[M](u[N]%5||5))[N];w>E;E+=5)p=52200625*(u[P](E)-33)+614125*(u[P](E+1)-33)+7225*(u[P](E+2)-33)+85*(u[P](E+3)-33)+(u[P](E+4)-33),m.push(O&p>>24,O&p>>16,O&p>>8,O&p);return function(k,D){for(var V=D;V>0;V--)k.pop()}(m,f[N]),T.fromCharCode.apply(T,m)},s=function(u){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),f.test(u)===!1)return"";for(var p="",m=0;m<u.length;m+=2)p+=String.fromCharCode("0x"+(u[m]+u[m+1]));return p},c=function(u){for(var f=new Uint8Array(u.length),p=u.length;p--;)f[p]=u.charCodeAt(p);return u=(f=r8(f)).reduce(function(m,E){return m+String.fromCharCode(E)},"")};e.processDataByFilters=function(u,f){var p=0,m=u||"",E=[];for(typeof(f=f||[])=="string"&&(f=[f]),p=0;p<f.length;p+=1)switch(f[p]){case"ASCII85Decode":case"/ASCII85Decode":m=i(m),E.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),E.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=s(m),E.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",E.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=c(m),E.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[p]+'" is not implemented')}return{data:m,reverseChain:E.reverse().join(" ")}}}(Rn.API),function(e){e.loadFile=function(t,i,s){return function(c,u,f){u=u!==!1,f=typeof f=="function"?f:function(){};var p=void 0;try{p=function(m,E,w){var T=new XMLHttpRequest,N=0,O=function(P){var M=P.length,Q=[],k=String.fromCharCode;for(N=0;N<M;N+=1)Q.push(k(255&P.charCodeAt(N)));return Q.join("")};if(T.open("GET",m,!E),T.overrideMimeType("text/plain; charset=x-user-defined"),E===!1&&(T.onload=function(){T.status===200?w(O(this.responseText)):w(void 0)}),T.send(null),E&&T.status===200)return O(T.responseText)}(c,u,f)}catch{}return p}(t,i,s)},e.loadImageFile=e.loadFile}(Rn.API),function(e){function t(){return(In.html2canvas?Promise.resolve(In.html2canvas):X6(()=>Promise.resolve().then(()=>wKe),void 0)).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function i(){return(In.DOMPurify?Promise.resolve(In.DOMPurify):X6(()=>import("./purify.es-31816194.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var s=function(f){var p=_o(f);return p==="undefined"?"undefined":p==="string"||f instanceof String?"string":p==="number"||f instanceof Number?"number":p==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":p==="object"?"object":"unknown"},c=function(f,p){var m=document.createElement(f);for(var E in p.className&&(m.className=p.className),p.innerHTML&&p.dompurify&&(m.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)m.style[E]=p.style[E];return m},u=function f(p){var m=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),E=f.convert(Promise.resolve(),m);return E=(E=E.setProgress(1,f,1,[f])).set(p)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(f,p){return f.__proto__=p||u.prototype,f},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(f,p){return this.then(function(){switch(p=p||function(m){switch(s(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(f)){case"string":return this.then(i).then(function(m){return this.set({src:c("div",{innerHTML:f,dompurify:m})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},u.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=function m(E,w){for(var T=E.nodeType===3?document.createTextNode(E.nodeValue):E.cloneNode(!1),N=E.firstChild;N;N=N.nextSibling)w!==!0&&N.nodeType===1&&N.nodeName==="SCRIPT"||T.appendChild(m(N,w));return E.nodeType===1&&(E.nodeName==="CANVAS"?(T.width=E.width,T.height=E.height,T.getContext("2d").drawImage(E,0,0)):E.nodeName!=="TEXTAREA"&&E.nodeName!=="SELECT"||(T.value=E.value),T.addEventListener("load",function(){T.scrollTop=E.scrollTop,T.scrollLeft=E.scrollLeft},!0)),T}(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=c("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=c("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(c("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(p){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,p(this.prop.container,m)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(p){var m=this.opt.jsPDF,E=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,T=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete T.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=E,E)for(var N=0;N<E.length;++N){var O=E[N],P=O.src.find(function(M){return M.format==="truetype"});P&&m.addFont(P.url,O.ref.name,O.ref.style)}return T.windowHeight=T.windowHeight||0,T.windowHeight=T.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):T.windowHeight,m.context2d.save(!0),p(this.prop.container,T)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(f,p,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(f,p):this.outputPdf(f,p)},u.prototype.outputPdf=function(f,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,p)})},u.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},u.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(f){if(s(f)!=="object")return this;var p=Object.keys(f||{}).map(function(m){if(m in u.template.prop)return function(){this.prop[m]=f[m]};switch(m){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[m]=f[m]}}},this);return this.then(function(){return this.thenList(p)})},u.prototype.get=function(f,p){return this.then(function(){var m=f in u.template.prop?this.prop[f]:this.opt[f];return p?p(m):m})},u.prototype.setMargin=function(f){return this.then(function(){switch(s(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},u.prototype.setPageSize=function(f){function p(m,E){return Math.floor(m*E/72*96)}return this.then(function(){(f=f||Rn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:p(f.inner.width,f.k),height:p(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},u.prototype.setProgress=function(f,p,m,E){return f!=null&&(this.progress.val=f),p!=null&&(this.progress.state=p),m!=null&&(this.progress.n=m),E!=null&&(this.progress.stack=E),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(f,p,m,E){return this.setProgress(f?this.progress.val+f:null,p||null,m?this.progress.n+m:null,E?this.progress.stack.concat(E):null)},u.prototype.then=function(f,p){var m=this;return this.thenCore(f,p,function(E,w){return m.updateProgress(null,null,1,[E]),Promise.prototype.then.call(this,function(T){return m.updateProgress(null,E),T}).then(E,w).then(function(T){return m.updateProgress(1),T})})},u.prototype.thenCore=function(f,p,m){m=m||Promise.prototype.then,f&&(f=f.bind(this)),p&&(p=p.bind(this));var E=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),w=m.call(E,f,p);return u.convert(w,this.__proto__)},u.prototype.thenExternal=function(f,p){return Promise.prototype.then.call(this,f,p)},u.prototype.thenList=function(f){var p=this;return f.forEach(function(m){p=p.thenCore(m)}),p},u.prototype.catch=function(f){f&&(f=f.bind(this));var p=Promise.prototype.catch.call(this,f);return u.convert(p,this)},u.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},u.prototype.error=function(f){return this.then(function(){throw new Error(f)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Rn.getPageSize=function(f,p,m){if(_o(f)==="object"){var E=f;f=E.orientation,p=E.unit||p,m=E.format||m}p=p||"mm",m=m||"a4",f=(""+(f||"P")).toLowerCase();var w,T=(""+m).toLowerCase(),N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+p}var O,P=0,M=0;if(N.hasOwnProperty(T))P=N[T][1]/w,M=N[T][0]/w;else try{P=m[1],M=m[0]}catch{throw new Error("Invalid format: "+m)}if(f==="p"||f==="portrait")f="p",M>P&&(O=M,M=P,P=O);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",P>M&&(O=M,M=P,P=O)}return{width:M,height:P,unit:p,k:w,orientation:f}},e.html=function(f,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(c8):null;var m=new u(p);return p.worker?m:m.from(f).doCallback()}}(Rn.API),Rn.API.addJS=function(e){return oie=e,this.internal.events.subscribe("postPutResources",function(){sN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),iie=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+oie+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){sN!==void 0&&iie!==void 0&&this.internal.out("/Names <</JavaScript "+sN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var i=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var c=i.outline.render().split(/\r\n/),u=0;u<c.length;u++){var f=c[u],p=s.exec(f);if(p!=null){var m=p[1];i.internal.newObjectDeferredBegin(m,!1)}i.internal.write(f)}if(this.outline.createNamedDestinations){var E=this.internal.pages.length,w=[];for(u=0;u<E;u++){var T=i.internal.newObject();w.push(T);var N=i.internal.getPageInfo(u+1);i.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var O=i.internal.newObject();for(i.internal.write("<< /Names [ "),u=0;u<w.length;u++)i.internal.write("(page_"+(u+1)+")"+w[u]+" 0 R");i.internal.write(" ] >>","endobj"),t=i.internal.newObject(),i.internal.write("<< /Dests "+O+" 0 R"),i.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(s,c,u){var f={title:c,options:u,children:[]};return s==null&&(s=this.root),s.children.push(f),f},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(s){s.id=i.internal.newObjectDeferred();for(var c=0;c<s.children.length;c++)this.genIds_r(s.children[c])},i.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},i.outline.renderItems=function(s){for(var c=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<s.children.length;u++){var f=s.children[u];this.objStart(f),this.line("/Title "+this.makeString(f.title)),this.line("/Parent "+this.makeRef(s)),u>0&&this.line("/Prev "+this.makeRef(s.children[u-1])),u<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[u+1])),f.children.length>0&&(this.line("/First "+this.makeRef(f.children[0])),this.line("/Last "+this.makeRef(f.children[f.children.length-1])));var p=this.count=this.count_r({count:0},f);if(p>0&&this.line("/Count "+p),f.options&&f.options.pageNumber){var m=i.internal.getPageInfo(f.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+c(0)+" 0]")}this.objEnd()}for(var E=0;E<s.children.length;E++)this.renderItems(s.children[E])},i.outline.line=function(s){this.ctx.val+=s+`\r
`},i.outline.makeRef=function(s){return s.id+" 0 R"},i.outline.makeString=function(s){return"("+i.internal.pdfEscape(s)+")"},i.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(s,c){for(var u=0;u<c.children.length;u++)s.count++,this.count_r(s,c.children[u]);return s.count}}])}(Rn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(i,s,c,u,f,p){var m,E=this.decode.DCT_DECODE,w=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=f||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(m=function(T){for(var N,O=256*T.charCodeAt(4)+T.charCodeAt(5),P=T.length,M={width:0,height:0,numcomponents:1},Q=4;Q<P;Q+=2){if(Q+=O,t.indexOf(T.charCodeAt(Q+1))!==-1){N=256*T.charCodeAt(Q+5)+T.charCodeAt(Q+6),M={width:256*T.charCodeAt(Q+7)+T.charCodeAt(Q+8),height:N,numcomponents:T.charCodeAt(Q+9)};break}O=256*T.charCodeAt(Q+2)+T.charCodeAt(Q+3)}return M}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}w={data:i,width:m.width,height:m.height,colorSpace:p,bitsPerComponent:8,filter:E,index:s,alias:c}}return w}}(Rn.API);var gE,aN,sie,aie,cie,oWe=function(){var e,t,i;function s(u){var f,p,m,E,w,T,N,O,P,M,Q,k,D,V;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},T=null;;){switch(f=this.readUInt32(),P=(function(){var K,J;for(J=[],K=0;K<4;++K)J.push(String.fromCharCode(this.data[this.pos++]));return J}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(f);break;case"fcTL":T&&this.animation.frames.push(T),this.pos+=4,T={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),E=this.readUInt16()||100,T.delay=1e3*w/E,T.disposeOp=this.data[this.pos++],T.blendOp=this.data[this.pos++],T.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,f-=4),u=(T!=null?T.data:void 0)||this.imgData,k=0;0<=f?k<f:k>f;0<=f?++k:--k)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(f),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((M=m-this.transparency.indexed.length)>0)for(D=0;0<=M?D<M:D>M;0<=M?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case"tEXt":N=(Q=this.read(f)).indexOf(0),O=String.fromCharCode.apply(String,Q.slice(0,N)),this.text[O]=String.fromCharCode.apply(String,Q.slice(N+1));break;case"IEND":return T&&this.animation.frames.push(T),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,p=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*p,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=f}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(u){var f,p;for(p=[],f=0;0<=u?f<u:f>u;0<=u?++f:--f)p.push(this.data[this.pos++]);return p},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(u){var f=this.pixelBitlength/8,p=new Uint8Array(this.width*this.height*f),m=0,E=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function w(T,N,O,P){var M,Q,k,D,V,K,J,ie,fe,Z,pe,Y,te,le,ae,ge,se,xe,Me,Be,ke,Ke=Math.ceil((E.width-T)/O),ht=Math.ceil((E.height-N)/P),ve=E.width==Ke&&E.height==ht;for(le=f*Ke,Y=ve?p:new Uint8Array(le*ht),K=u.length,te=0,Q=0;te<ht&&m<K;){switch(u[m++]){case 0:for(D=se=0;se<le;D=se+=1)Y[Q++]=u[m++];break;case 1:for(D=xe=0;xe<le;D=xe+=1)M=u[m++],V=D<f?0:Y[Q-f],Y[Q++]=(M+V)%256;break;case 2:for(D=Me=0;Me<le;D=Me+=1)M=u[m++],k=(D-D%f)/f,ae=te&&Y[(te-1)*le+k*f+D%f],Y[Q++]=(ae+M)%256;break;case 3:for(D=Be=0;Be<le;D=Be+=1)M=u[m++],k=(D-D%f)/f,V=D<f?0:Y[Q-f],ae=te&&Y[(te-1)*le+k*f+D%f],Y[Q++]=(M+Math.floor((V+ae)/2))%256;break;case 4:for(D=ke=0;ke<le;D=ke+=1)M=u[m++],k=(D-D%f)/f,V=D<f?0:Y[Q-f],te===0?ae=ge=0:(ae=Y[(te-1)*le+k*f+D%f],ge=k&&Y[(te-1)*le+(k-1)*f+D%f]),J=V+ae-ge,ie=Math.abs(J-V),Z=Math.abs(J-ae),pe=Math.abs(J-ge),fe=ie<=Z&&ie<=pe?V:Z<=pe?ae:ge,Y[Q++]=(M+fe)%256;break;default:throw new Error("Invalid filter algorithm: "+u[m-1])}if(!ve){var Oe=((N+te*P)*E.width+T)*f,Ue=te*le;for(D=0;D<Ke;D+=1){for(var Fe=0;Fe<f;Fe+=1)p[Oe++]=Y[Ue++];Oe+=(O-1)*f}}te++}}return u=UKe(u),E.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),p},s.prototype.decodePalette=function(){var u,f,p,m,E,w,T,N,O;for(p=this.palette,w=this.transparency.indexed||[],E=new Uint8Array((w.length||0)+p.length),m=0,u=0,f=T=0,N=p.length;T<N;f=T+=3)E[m++]=p[f],E[m++]=p[f+1],E[m++]=p[f+2],E[m++]=(O=w[u++])!=null?O:255;return E},s.prototype.copyToImageData=function(u,f){var p,m,E,w,T,N,O,P,M,Q,k;if(m=this.colors,M=null,p=this.hasAlphaChannel,this.palette.length&&(M=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),m=4,p=!0),P=(E=u.data||u).length,T=M||f,w=N=0,m===1)for(;w<P;)O=M?4*f[w/4]:N,Q=T[O++],E[w++]=Q,E[w++]=Q,E[w++]=Q,E[w++]=p?T[O++]:255,N=O;else for(;w<P;)O=M?4*f[w/4]:N,E[w++]=T[O++],E[w++]=T[O++],E[w++]=T[O++],E[w++]=p?T[O++]:255,N=O},s.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var c=function(){if(Object.prototype.toString.call(In)==="[object Window]"){try{t=In.document.createElement("canvas"),i=t.getContext("2d")}catch{return!1}return!0}return!1};return c(),e=function(u){var f;if(c()===!0)return i.width=u.width,i.height=u.height,i.clearRect(0,0,u.width,u.height),i.putImageData(u,0,0),(f=new Image).src=t.toDataURL(),f;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(u){var f,p,m,E,w,T,N,O;if(this.animation){for(O=[],p=w=0,T=(N=this.animation.frames).length;w<T;p=++w)f=N[p],m=u.createImageData(f.width,f.height),E=this.decodePixels(new Uint8Array(f.data)),this.copyToImageData(m,E),f.imageData=m,O.push(f.image=e(m));return O}},s.prototype.renderFrame=function(u,f){var p,m,E;return p=(m=this.animation.frames)[f],E=m[f-1],f===0&&u.clearRect(0,0,this.width,this.height),(E!=null?E.disposeOp:void 0)===1?u.clearRect(E.xOffset,E.yOffset,E.width,E.height):(E!=null?E.disposeOp:void 0)===2&&u.putImageData(E.imageData,E.xOffset,E.yOffset),p.blendOp===0&&u.clearRect(p.xOffset,p.yOffset,p.width,p.height),u.drawImage(p.image,p.xOffset,p.yOffset)},s.prototype.animate=function(u){var f,p,m,E,w,T,N=this;return p=0,T=this.animation,E=T.numFrames,m=T.frames,w=T.numPlays,(f=function(){var O,P;if(O=p++%E,P=m[O],N.renderFrame(u,O),E>1&&p/E<w)return N.animation._timeout=setTimeout(f,P.delay)})()},s.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},s.prototype.render=function(u){var f,p;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,f=u.getContext("2d"),this.animation?(this.decodeFrames(f),this.animate(f)):(p=f.createImageData(this.width,this.height),this.copyToImageData(p,this.decodePixels()),f.putImageData(p,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function sWe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,c=e[t++],u=c>>7,f=1<<(7&c)+1;e[t++],e[t++];var p=null,m=null;u&&(p=t,m=f,t+=3*f);var E=!0,w=[],T=0,N=null,O=0,P=null;for(this.width=i,this.height=s;E&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var M=e[t++];T=e[t++]|e[t++]<<8,N=e[t++],!(1&M)&&(N=null),O=M>>2&7,t++;break;case 254:for(;;){if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var Q=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,D=e[t++]|e[t++]<<8,V=e[t++]|e[t++]<<8,K=e[t++],J=K>>6&1,ie=1<<(7&K)+1,fe=p,Z=m,pe=!1;K>>7&&(pe=!0,fe=t,Z=ie,t+=3*ie);var Y=t;for(t++;;){var te;if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}w.push({x:Q,y:k,width:D,height:V,has_local_palette:pe,palette_offset:fe,palette_size:Z,data_offset:Y,data_length:t-Y,transparent_index:N,interlaced:!!J,delay:T,disposal:O});break;case 59:E=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return P},this.frameInfo=function(le){if(le<0||le>=w.length)throw new Error("Frame index out of range.");return w[le]},this.decodeAndBlitFrameBGRA=function(le,ae){var ge=this.frameInfo(le),se=ge.width*ge.height,xe=new Uint8Array(se);lie(e,ge.data_offset,xe,se);var Me=ge.palette_offset,Be=ge.transparent_index;Be===null&&(Be=256);var ke=ge.width,Ke=i-ke,ht=ke,ve=4*(ge.y*i+ge.x),Oe=4*((ge.y+ge.height)*i+ge.x),Ue=ve,Fe=4*Ke;ge.interlaced===!0&&(Fe+=4*i*7);for(var Qe=8,We=0,et=xe.length;We<et;++We){var Ze=xe[We];if(ht===0&&(ht=ke,(Ue+=Fe)>=Oe&&(Fe=4*Ke+4*i*(Qe-1),Ue=ve+(ke+Ke)*(Qe<<1),Qe>>=1)),Ze===Be)Ue+=4;else{var pt=e[Me+3*Ze],at=e[Me+3*Ze+1],Rt=e[Me+3*Ze+2];ae[Ue++]=Rt,ae[Ue++]=at,ae[Ue++]=pt,ae[Ue++]=255}--ht}},this.decodeAndBlitFrameRGBA=function(le,ae){var ge=this.frameInfo(le),se=ge.width*ge.height,xe=new Uint8Array(se);lie(e,ge.data_offset,xe,se);var Me=ge.palette_offset,Be=ge.transparent_index;Be===null&&(Be=256);var ke=ge.width,Ke=i-ke,ht=ke,ve=4*(ge.y*i+ge.x),Oe=4*((ge.y+ge.height)*i+ge.x),Ue=ve,Fe=4*Ke;ge.interlaced===!0&&(Fe+=4*i*7);for(var Qe=8,We=0,et=xe.length;We<et;++We){var Ze=xe[We];if(ht===0&&(ht=ke,(Ue+=Fe)>=Oe&&(Fe=4*Ke+4*i*(Qe-1),Ue=ve+(ke+Ke)*(Qe<<1),Qe>>=1)),Ze===Be)Ue+=4;else{var pt=e[Me+3*Ze],at=e[Me+3*Ze+1],Rt=e[Me+3*Ze+2];ae[Ue++]=pt,ae[Ue++]=at,ae[Ue++]=Rt,ae[Ue++]=255}--ht}}}function lie(e,t,i,s){for(var c=e[t++],u=1<<c,f=u+1,p=f+1,m=c+1,E=(1<<m)-1,w=0,T=0,N=0,O=e[t++],P=new Int32Array(4096),M=null;;){for(;w<16&&O!==0;)T|=e[t++]<<w,w+=8,O===1?O=e[t++]:--O;if(w<m)break;var Q=T&E;if(T>>=m,w-=m,Q!==u){if(Q===f)break;for(var k=Q<p?Q:M,D=0,V=k;V>u;)V=P[V]>>8,++D;var K=V;if(N+D+(k!==Q?1:0)>s)return void jo.log("Warning, gif stream longer than expected.");i[N++]=K;var J=N+=D;for(k!==Q&&(i[N++]=K),V=k;D--;)V=P[V],i[--J]=255&V,V>>=8;M!==null&&p<4096&&(P[p++]=M<<8|K,p>=E+1&&m<12&&(++m,E=E<<1|1)),M=Q}else p=f+1,E=(1<<(m=c+1))-1,M=null}return N!==s&&jo.log("Warning, gif stream shorter than expected."),i}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Q4(e){var t,i,s,c,u,f=Math.floor,p=new Array(64),m=new Array(64),E=new Array(64),w=new Array(64),T=new Array(65535),N=new Array(65535),O=new Array(64),P=new Array(64),M=[],Q=0,k=7,D=new Array(64),V=new Array(64),K=new Array(64),J=new Array(256),ie=new Array(2048),fe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Z=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],pe=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],te=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],le=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],ge=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function xe(ve,Oe){for(var Ue=0,Fe=0,Qe=new Array,We=1;We<=16;We++){for(var et=1;et<=ve[We];et++)Qe[Oe[Fe]]=[],Qe[Oe[Fe]][0]=Ue,Qe[Oe[Fe]][1]=We,Fe++,Ue++;Ue*=2}return Qe}function Me(ve){for(var Oe=ve[0],Ue=ve[1]-1;Ue>=0;)Oe&1<<Ue&&(Q|=1<<k),Ue--,--k<0&&(Q==255?(Be(255),Be(0)):Be(Q),k=7,Q=0)}function Be(ve){M.push(ve)}function ke(ve){Be(ve>>8&255),Be(255&ve)}function Ke(ve,Oe,Ue,Fe,Qe){for(var We,et=Qe[0],Ze=Qe[240],pt=function(Nt,It){var Yt,Bt,_r,ar,zr,Xr,Kt,yr,nr,er,vt=0;for(nr=0;nr<8;++nr){Yt=Nt[vt],Bt=Nt[vt+1],_r=Nt[vt+2],ar=Nt[vt+3],zr=Nt[vt+4],Xr=Nt[vt+5],Kt=Nt[vt+6];var tn=Yt+(yr=Nt[vt+7]),Rr=Yt-yr,on=Bt+Kt,sr=Bt-Kt,Mr=_r+Xr,Tr=_r-Xr,rn=ar+zr,Sr=ar-zr,ai=tn+rn,Ei=tn-rn,ti=on+Mr,dn=on-Mr;Nt[vt]=ai+ti,Nt[vt+4]=ai-ti;var Qr=.707106781*(dn+Ei);Nt[vt+2]=Ei+Qr,Nt[vt+6]=Ei-Qr;var yn=.382683433*((ai=Sr+Tr)-(dn=sr+Rr)),wi=.5411961*ai+yn,br=1.306562965*dn+yn,Pi=.707106781*(ti=Tr+sr),ki=Rr+Pi,kr=Rr-Pi;Nt[vt+5]=kr+wi,Nt[vt+3]=kr-wi,Nt[vt+1]=ki+br,Nt[vt+7]=ki-br,vt+=8}for(vt=0,nr=0;nr<8;++nr){Yt=Nt[vt],Bt=Nt[vt+8],_r=Nt[vt+16],ar=Nt[vt+24],zr=Nt[vt+32],Xr=Nt[vt+40],Kt=Nt[vt+48];var $a=Yt+(yr=Nt[vt+56]),ls=Yt-yr,_s=Bt+Kt,ro=Bt-Kt,uo=_r+Xr,ys=_r-Xr,Uc=ar+zr,Zo=ar-zr,Es=$a+Uc,hc=$a-Uc,es=_s+uo,ul=_s-uo;Nt[vt]=Es+es,Nt[vt+32]=Es-es;var js=.707106781*(ul+hc);Nt[vt+16]=hc+js,Nt[vt+48]=hc-js;var ts=.382683433*((Es=Zo+ys)-(ul=ro+ls)),ws=.5411961*Es+ts,Mc=1.306562965*ul+ts,Oa=.707106781*(es=ys+ro),Kl=ls+Oa,Fc=ls-Oa;Nt[vt+40]=Fc+ws,Nt[vt+24]=Fc-ws,Nt[vt+8]=Kl+Mc,Nt[vt+56]=Kl-Mc,vt++}for(nr=0;nr<64;++nr)er=Nt[nr]*It[nr],O[nr]=er>0?er+.5|0:er-.5|0;return O}(ve,Oe),at=0;at<64;++at)P[fe[at]]=pt[at];var Rt=P[0]-Ue;Ue=P[0],Rt==0?Me(Fe[0]):(Me(Fe[N[We=32767+Rt]]),Me(T[We]));for(var Ot=63;Ot>0&&P[Ot]==0;)Ot--;if(Ot==0)return Me(et),Ue;for(var Ft,lt=1;lt<=Ot;){for(var He=lt;P[lt]==0&&lt<=Ot;)++lt;var vr=lt-He;if(vr>=16){Ft=vr>>4;for(var qt=1;qt<=Ft;++qt)Me(Ze);vr&=15}We=32767+P[lt],Me(Qe[(vr<<4)+N[We]]),Me(T[We]),lt++}return Ot!=63&&Me(et),Ue}function ht(ve){ve=Math.min(Math.max(ve,1),100),u!=ve&&(function(Oe){for(var Ue=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Fe=0;Fe<64;Fe++){var Qe=f((Ue[Fe]*Oe+50)/100);Qe=Math.min(Math.max(Qe,1),255),p[fe[Fe]]=Qe}for(var We=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],et=0;et<64;et++){var Ze=f((We[et]*Oe+50)/100);Ze=Math.min(Math.max(Ze,1),255),m[fe[et]]=Ze}for(var pt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],at=0,Rt=0;Rt<8;Rt++)for(var Ot=0;Ot<8;Ot++)E[at]=1/(p[fe[at]]*pt[Rt]*pt[Ot]*8),w[at]=1/(m[fe[at]]*pt[Rt]*pt[Ot]*8),at++}(ve<50?Math.floor(5e3/ve):Math.floor(200-2*ve)),u=ve)}this.encode=function(ve,Oe){Oe&&ht(Oe),M=new Array,Q=0,k=7,ke(65496),ke(65504),ke(16),Be(74),Be(70),Be(73),Be(70),Be(0),Be(1),Be(1),Be(0),ke(1),ke(1),Be(0),Be(0),function(){ke(65499),ke(132),Be(0);for(var Bt=0;Bt<64;Bt++)Be(p[Bt]);Be(1);for(var _r=0;_r<64;_r++)Be(m[_r])}(),function(Bt,_r){ke(65472),ke(17),Be(8),ke(_r),ke(Bt),Be(3),Be(1),Be(17),Be(0),Be(2),Be(17),Be(1),Be(3),Be(17),Be(1)}(ve.width,ve.height),function(){ke(65476),ke(418),Be(0);for(var Bt=0;Bt<16;Bt++)Be(Z[Bt+1]);for(var _r=0;_r<=11;_r++)Be(pe[_r]);Be(16);for(var ar=0;ar<16;ar++)Be(Y[ar+1]);for(var zr=0;zr<=161;zr++)Be(te[zr]);Be(1);for(var Xr=0;Xr<16;Xr++)Be(le[Xr+1]);for(var Kt=0;Kt<=11;Kt++)Be(ae[Kt]);Be(17);for(var yr=0;yr<16;yr++)Be(ge[yr+1]);for(var nr=0;nr<=161;nr++)Be(se[nr])}(),ke(65498),ke(12),Be(3),Be(1),Be(0),Be(2),Be(17),Be(3),Be(17),Be(0),Be(63),Be(0);var Ue=0,Fe=0,Qe=0;Q=0,k=7,this.encode.displayName="_encode_";for(var We,et,Ze,pt,at,Rt,Ot,Ft,lt,He=ve.data,vr=ve.width,qt=ve.height,Nt=4*vr,It=0;It<qt;){for(We=0;We<Nt;){for(at=Nt*It+We,Ot=-1,Ft=0,lt=0;lt<64;lt++)Rt=at+(Ft=lt>>3)*Nt+(Ot=4*(7&lt)),It+Ft>=qt&&(Rt-=Nt*(It+1+Ft-qt)),We+Ot>=Nt&&(Rt-=We+Ot-Nt+4),et=He[Rt++],Ze=He[Rt++],pt=He[Rt++],D[lt]=(ie[et]+ie[Ze+256>>0]+ie[pt+512>>0]>>16)-128,V[lt]=(ie[et+768>>0]+ie[Ze+1024>>0]+ie[pt+1280>>0]>>16)-128,K[lt]=(ie[et+1280>>0]+ie[Ze+1536>>0]+ie[pt+1792>>0]>>16)-128;Ue=Ke(D,E,Ue,t,s),Fe=Ke(V,w,Fe,i,c),Qe=Ke(K,w,Qe,i,c),We+=32}It+=8}if(k>=0){var Yt=[];Yt[1]=k+1,Yt[0]=(1<<k+1)-1,Me(Yt)}return ke(65497),new Uint8Array(M)},e=e||50,function(){for(var ve=String.fromCharCode,Oe=0;Oe<256;Oe++)J[Oe]=ve(Oe)}(),t=xe(Z,pe),i=xe(le,ae),s=xe(Y,te),c=xe(ge,se),function(){for(var ve=1,Oe=2,Ue=1;Ue<=15;Ue++){for(var Fe=ve;Fe<Oe;Fe++)N[32767+Fe]=Ue,T[32767+Fe]=[],T[32767+Fe][1]=Ue,T[32767+Fe][0]=Fe;for(var Qe=-(Oe-1);Qe<=-ve;Qe++)N[32767+Qe]=Ue,T[32767+Qe]=[],T[32767+Qe][1]=Ue,T[32767+Qe][0]=Oe-1+Qe;ve<<=1,Oe<<=1}}(),function(){for(var ve=0;ve<256;ve++)ie[ve]=19595*ve,ie[ve+256>>0]=38470*ve,ie[ve+512>>0]=7471*ve+32768,ie[ve+768>>0]=-11059*ve,ie[ve+1024>>0]=-21709*ve,ie[ve+1280>>0]=32768*ve+8421375,ie[ve+1536>>0]=-27439*ve,ie[ve+1792>>0]=-5329*ve}(),ht(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function oh(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uie(e){function t(Z){if(!Z)throw Error("assert :P")}function i(Z,pe,Y){for(var te=0;4>te;te++)if(Z[pe+te]!=Y.charCodeAt(te))return!0;return!1}function s(Z,pe,Y,te,le){for(var ae=0;ae<le;ae++)Z[pe+ae]=Y[te+ae]}function c(Z,pe,Y,te){for(var le=0;le<te;le++)Z[pe+le]=Y}function u(Z){return new Int32Array(Z)}function f(Z,pe){for(var Y=[],te=0;te<Z;te++)Y.push(new pe);return Y}function p(Z,pe){var Y=[];return function te(le,ae,ge){for(var se=ge[ae],xe=0;xe<se&&(le.push(ge.length>ae+1?[]:new pe),!(ge.length<ae+1));xe++)te(le[xe],ae+1,ge)}(Y,0,Z),Y}var m=function(){var Z=this;function pe(I,U){for(var $=1<<U-1>>>0;I&$;)$>>>=1;return $?(I&$-1)+$:I}function Y(I,U,$,ne,Ee){t(!(ne%$));do I[U+(ne-=$)]=Ee;while(0<ne)}function te(I,U,$,ne,Ee){if(t(2328>=Ee),512>=Ee)var be=u(512);else if((be=u(Ee))==null)return 0;return function(Re,Ie,Pe,je,nt,yt){var Et,dt,Ht=Ie,Pt=1<<Pe,it=u(16),st=u(16);for(t(nt!=0),t(je!=null),t(Re!=null),t(0<Pe),dt=0;dt<nt;++dt){if(15<je[dt])return 0;++it[je[dt]]}if(it[0]==nt)return 0;for(st[1]=0,Et=1;15>Et;++Et){if(it[Et]>1<<Et)return 0;st[Et+1]=st[Et]+it[Et]}for(dt=0;dt<nt;++dt)Et=je[dt],0<je[dt]&&(yt[st[Et]++]=dt);if(st[15]==1)return(je=new le).g=0,je.value=yt[0],Y(Re,Ht,1,Pt,je),Pt;var $t,ir=-1,Jt=Pt-1,Ir=0,pr=1,sn=1,wr=1<<Pe;for(dt=0,Et=1,nt=2;Et<=Pe;++Et,nt<<=1){if(pr+=sn<<=1,0>(sn-=it[Et]))return 0;for(;0<it[Et];--it[Et])(je=new le).g=Et,je.value=yt[dt++],Y(Re,Ht+Ir,nt,wr,je),Ir=pe(Ir,Et)}for(Et=Pe+1,nt=2;15>=Et;++Et,nt<<=1){if(pr+=sn<<=1,0>(sn-=it[Et]))return 0;for(;0<it[Et];--it[Et]){if(je=new le,(Ir&Jt)!=ir){for(Ht+=wr,$t=1<<(ir=Et)-Pe;15>ir&&!(0>=($t-=it[ir]));)++ir,$t<<=1;Pt+=wr=1<<($t=ir-Pe),Re[Ie+(ir=Ir&Jt)].g=$t+Pe,Re[Ie+ir].value=Ht-Ie-ir}je.g=Et-Pe,je.value=yt[dt++],Y(Re,Ht+(Ir>>Pe),nt,wr,je),Ir=pe(Ir,Et)}}return pr!=2*st[15]-1?0:Pt}(I,U,$,ne,Ee,be)}function le(){this.value=this.g=0}function ae(){this.value=this.g=0}function ge(){this.G=f(5,le),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=f(bs,ae)}function se(I,U,$,ne){t(I!=null),t(U!=null),t(2147483648>ne),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=U,I.pa=$,I.Jd=U,I.Yc=$+ne,I.Zc=4<=ne?$+ne-4+1:$,We(I)}function xe(I,U){for(var $=0;0<U--;)$|=Ze(I,128)<<U;return $}function Me(I,U){var $=xe(I,U);return et(I)?-$:$}function Be(I,U,$,ne){var Ee,be=0;for(t(I!=null),t(U!=null),t(4294967288>ne),I.Sb=ne,I.Ra=0,I.u=0,I.h=0,4<ne&&(ne=4),Ee=0;Ee<ne;++Ee)be+=U[$+Ee]<<8*Ee;I.Ra=be,I.bb=ne,I.oa=U,I.pa=$}function ke(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<Kh-8>>>0,++I.bb,I.u-=8;Ue(I)&&(I.h=1,I.u=0)}function Ke(I,U){if(t(0<=U),!I.h&&U<=df){var $=Oe(I)&jh[U];return I.u+=U,ke(I),$}return I.h=1,I.u=0}function ht(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ve(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Oe(I){return I.Ra>>>(I.u&Kh-1)>>>0}function Ue(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>Kh}function Fe(I,U){I.u=U,I.h=Ue(I)}function Qe(I){I.u>=ff&&(t(I.u>=ff),ke(I))}function We(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function et(I){return xe(I,1)}function Ze(I,U){var $=I.Ca;0>I.b&&We(I);var ne=I.b,Ee=$*U>>>8,be=(I.I>>>ne>Ee)+0;for(be?($-=Ee,I.I-=Ee+1<<ne>>>0):$=Ee+1,ne=$,Ee=0;256<=ne;)Ee+=8,ne>>=8;return ne=7^Ee+La[ne],I.b-=ne,I.Ca=($<<ne)-1,be}function pt(I,U,$){I[U+0]=$>>24&255,I[U+1]=$>>16&255,I[U+2]=$>>8&255,I[U+3]=$>>0&255}function at(I,U){return I[U+0]<<0|I[U+1]<<8}function Rt(I,U){return at(I,U)|I[U+2]<<16}function Ot(I,U){return at(I,U)|at(I,U+2)<<16}function Ft(I,U){var $=1<<U;return t(I!=null),t(0<U),I.X=u($),I.X==null?0:(I.Mb=32-U,I.Xa=U,1)}function lt(I,U){t(I!=null),t(U!=null),t(I.Xa==U.Xa),s(U.X,0,I.X,0,1<<U.Xa)}function He(){this.X=[],this.Xa=this.Mb=0}function vr(I,U,$,ne){t($!=null),t(ne!=null);var Ee=$[0],be=ne[0];return Ee==0&&(Ee=(I*be+U/2)/U),be==0&&(be=(U*Ee+I/2)/I),0>=Ee||0>=be?0:($[0]=Ee,ne[0]=be,1)}function qt(I,U){return I+(1<<U)-1>>>U}function Nt(I,U){return((4278255360&I)+(4278255360&U)>>>0&4278255360)+((16711935&I)+(16711935&U)>>>0&16711935)>>>0}function It(I,U){Z[U]=function($,ne,Ee,be,Re,Ie,Pe){var je;for(je=0;je<Re;++je){var nt=Z[I](Ie[Pe+je-1],Ee,be+je);Ie[Pe+je]=Nt($[ne+je],nt)}}}function Yt(){this.ud=this.hd=this.jd=0}function Bt(I,U){return((4278124286&(I^U))>>>1)+(I&U)>>>0}function _r(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function ar(I,U){return _r(I+(I-U+.5>>1))}function zr(I,U,$){return Math.abs(U-$)-Math.abs(I-$)}function Xr(I,U,$,ne,Ee,be,Re){for(ne=be[Re-1],$=0;$<Ee;++$)be[Re+$]=ne=Nt(I[U+$],ne)}function Kt(I,U,$,ne,Ee){var be;for(be=0;be<$;++be){var Re=I[U+be],Ie=Re>>8&255,Pe=16711935&(Pe=(Pe=16711935&Re)+((Ie<<16)+Ie));ne[Ee+be]=(4278255360&Re)+Pe>>>0}}function yr(I,U){U.jd=I>>0&255,U.hd=I>>8&255,U.ud=I>>16&255}function nr(I,U,$,ne,Ee,be){var Re;for(Re=0;Re<ne;++Re){var Ie=U[$+Re],Pe=Ie>>>8,je=Ie,nt=255&(nt=(nt=Ie>>>16)+((I.jd<<24>>24)*(Pe<<24>>24)>>>5));je=255&(je=(je=je+((I.hd<<24>>24)*(Pe<<24>>24)>>>5))+((I.ud<<24>>24)*(nt<<24>>24)>>>5)),Ee[be+Re]=(4278255360&Ie)+(nt<<16)+je}}function er(I,U,$,ne,Ee){Z[U]=function(be,Re,Ie,Pe,je,nt,yt,Et,dt){for(Pe=yt;Pe<Et;++Pe)for(yt=0;yt<dt;++yt)je[nt++]=Ee(Ie[ne(be[Re++])])},Z[I]=function(be,Re,Ie,Pe,je,nt,yt){var Et=8>>be.b,dt=be.Ea,Ht=be.K[0],Pt=be.w;if(8>Et)for(be=(1<<be.b)-1,Pt=(1<<Et)-1;Re<Ie;++Re){var it,st=0;for(it=0;it<dt;++it)it&be||(st=ne(Pe[je++])),nt[yt++]=Ee(Ht[st&Pt]),st>>=Et}else Z["VP8LMapColor"+$](Pe,je,Ht,Pt,nt,yt,Re,Ie,dt)}}function vt(I,U,$,ne,Ee){for($=U+$;U<$;){var be=I[U++];ne[Ee++]=be>>16&255,ne[Ee++]=be>>8&255,ne[Ee++]=be>>0&255}}function tn(I,U,$,ne,Ee){for($=U+$;U<$;){var be=I[U++];ne[Ee++]=be>>16&255,ne[Ee++]=be>>8&255,ne[Ee++]=be>>0&255,ne[Ee++]=be>>24&255}}function Rr(I,U,$,ne,Ee){for($=U+$;U<$;){var be=(Re=I[U++])>>16&240|Re>>12&15,Re=Re>>0&240|Re>>28&15;ne[Ee++]=be,ne[Ee++]=Re}}function on(I,U,$,ne,Ee){for($=U+$;U<$;){var be=(Re=I[U++])>>16&248|Re>>13&7,Re=Re>>5&224|Re>>3&31;ne[Ee++]=be,ne[Ee++]=Re}}function sr(I,U,$,ne,Ee){for($=U+$;U<$;){var be=I[U++];ne[Ee++]=be>>0&255,ne[Ee++]=be>>8&255,ne[Ee++]=be>>16&255}}function Mr(I,U,$,ne,Ee,be){if(be==0)for($=U+$;U<$;)pt(ne,((be=I[U++])[0]>>24|be[1]>>8&65280|be[2]<<8&16711680|be[3]<<24)>>>0),Ee+=32;else s(ne,Ee,I,U,$)}function Tr(I,U){Z[U][0]=Z[I+"0"],Z[U][1]=Z[I+"1"],Z[U][2]=Z[I+"2"],Z[U][3]=Z[I+"3"],Z[U][4]=Z[I+"4"],Z[U][5]=Z[I+"5"],Z[U][6]=Z[I+"6"],Z[U][7]=Z[I+"7"],Z[U][8]=Z[I+"8"],Z[U][9]=Z[I+"9"],Z[U][10]=Z[I+"10"],Z[U][11]=Z[I+"11"],Z[U][12]=Z[I+"12"],Z[U][13]=Z[I+"13"],Z[U][14]=Z[I+"0"],Z[U][15]=Z[I+"0"]}function rn(I){return I==Lm||I==mu||I==Pm||I==R0}function Sr(){this.eb=[],this.size=this.A=this.fb=0}function ai(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ei(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Sr,this.f.kb=new ai,this.sd=null}function ti(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Qr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function yn(I,U){var $=I.T,ne=U.ba.f.RGBA,Ee=ne.eb,be=ne.fb+I.ka*ne.A,Re=_l[U.ba.S],Ie=I.y,Pe=I.O,je=I.f,nt=I.N,yt=I.ea,Et=I.W,dt=U.cc,Ht=U.dc,Pt=U.Mc,it=U.Nc,st=I.ka,$t=I.ka+I.T,ir=I.U,Jt=ir+1>>1;for(st==0?Re(Ie,Pe,null,null,je,nt,yt,Et,je,nt,yt,Et,Ee,be,null,null,ir):(Re(U.ec,U.fc,Ie,Pe,dt,Ht,Pt,it,je,nt,yt,Et,Ee,be-ne.A,Ee,be,ir),++$);st+2<$t;st+=2)dt=je,Ht=nt,Pt=yt,it=Et,nt+=I.Rc,Et+=I.Rc,be+=2*ne.A,Re(Ie,(Pe+=2*I.fa)-I.fa,Ie,Pe,dt,Ht,Pt,it,je,nt,yt,Et,Ee,be-ne.A,Ee,be,ir);return Pe+=I.fa,I.j+$t<I.o?(s(U.ec,U.fc,Ie,Pe,ir),s(U.cc,U.dc,je,nt,Jt),s(U.Mc,U.Nc,yt,Et,Jt),$--):1&$t||Re(Ie,Pe,null,null,je,nt,yt,Et,je,nt,yt,Et,Ee,be+ne.A,null,null,ir),$}function wi(I,U,$){var ne=I.F,Ee=[I.J];if(ne!=null){var be=I.U,Re=U.ba.S,Ie=Re==qh||Re==Pm;U=U.ba.f.RGBA;var Pe=[0],je=I.ka;Pe[0]=I.T,I.Kb&&(je==0?--Pe[0]:(--je,Ee[0]-=I.width),I.j+I.ka+I.T==I.o&&(Pe[0]=I.o-I.j-je));var nt=U.eb;je=U.fb+je*U.A,I=vi(ne,Ee[0],I.width,be,Pe,nt,je+(Ie?0:3),U.A),t($==Pe),I&&rn(Re)&&Xa(nt,je,Ie,be,Pe,U.A)}return 0}function br(I){var U=I.ma,$=U.ba.S,ne=11>$,Ee=$==zh||$==ld||$==qh||$==lA||$==12||rn($);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!Hh(U.Oa,I,Ee?11:12))return 0;if(Ee&&rn($)&&Gt(),I.da)alert("todo:use_scaling");else{if(ne){if(U.Ib=Qr,I.Kb){if($=I.U+1>>1,U.memory=u(I.U+2*$),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+I.U,U.Mc=U.cc,U.Nc=U.dc+$,U.Ib=yn,Gt()}}else alert("todo:EmitYUV");Ee&&(U.Jb=wi,ne&&gt())}if(ne&&!Mm){for(I=0;256>I;++I)Fm[I]=89858*(I-128)+_u>>bf,D0[I]=-22014*(I-128)+_u,k0[I]=-45773*(I-128),P0[I]=113618*(I-128)+_u>>bf;for(I=Cf;I<B0;++I)U=76283*(I-16)+_u>>bf,Zh[I-Cf]=gc(U,255),C_[I-Cf]=gc(U+8>>4,15);Mm=1}return 1}function Pi(I){var U=I.ma,$=I.U,ne=I.T;return t(!(1&I.ka)),0>=$||0>=ne?0:($=U.Ib(I,U),U.Jb!=null&&U.Jb(I,U,$),U.Dc+=$,1)}function ki(I){I.ma.memory=null}function kr(I,U,$,ne){return Ke(I,8)!=47?0:(U[0]=Ke(I,14)+1,$[0]=Ke(I,14)+1,ne[0]=Ke(I,1),Ke(I,3)!=0?0:!I.h)}function $a(I,U){if(4>I)return I+1;var $=I-2>>1;return(2+(1&I)<<$)+Ke(U,$)+1}function ls(I,U){return 120<U?U-120:1<=($=(($=I0[U-1])>>4)*I+(8-(15&$)))?$:1;var $}function _s(I,U,$){var ne=Oe($),Ee=I[U+=255&ne].g-8;return 0<Ee&&(Fe($,$.u+8),ne=Oe($),U+=I[U].value,U+=ne&(1<<Ee)-1),Fe($,$.u+I[U].g),I[U].value}function ro(I,U,$){return $.g+=I.g,$.value+=I.value<<U>>>0,t(8>=$.g),I.g}function uo(I,U,$){var ne=I.xc;return t((U=ne==0?0:I.vc[I.md*($>>ne)+(U>>ne)])<I.Wb),I.Ya[U]}function ys(I,U,$,ne){var Ee=I.ab,be=I.c*U,Re=I.C;U=Re+U;var Ie=$,Pe=ne;for(ne=I.Ta,$=I.Ua;0<Ee--;){var je=I.gc[Ee],nt=Re,yt=U,Et=Ie,dt=Pe,Ht=(Pe=ne,Ie=$,je.Ea);switch(t(nt<yt),t(yt<=je.nc),je.hc){case 2:hf(Et,dt,(yt-nt)*Ht,Pe,Ie);break;case 0:var Pt=nt,it=yt,st=Pe,$t=Ie,ir=(wr=je).Ea;Pt==0&&(ad(Et,dt,null,null,1,st,$t),Xr(Et,dt+1,0,0,ir-1,st,$t+1),dt+=ir,$t+=ir,++Pt);for(var Jt=1<<wr.b,Ir=Jt-1,pr=qt(ir,wr.b),sn=wr.K,wr=wr.w+(Pt>>wr.b)*pr;Pt<it;){var di=sn,xi=wr,fi=1;for(Ya(Et,dt,st,$t-ir,1,st,$t);fi<ir;){var Pn=(fi&~Ir)+Jt;Pn>ir&&(Pn=ir),(0,sA[di[xi++]>>8&15])(Et,dt+ +fi,st,$t+fi-ir,Pn-fi,st,$t+fi),fi=Pn}dt+=ir,$t+=ir,++Pt&Ir||(wr+=pr)}yt!=je.nc&&s(Pe,Ie-Ht,Pe,Ie+(yt-nt-1)*Ht,Ht);break;case 1:for(Ht=Et,it=dt,ir=(Et=je.Ea)-($t=Et&~(st=(dt=1<<je.b)-1)),Pt=qt(Et,je.b),Jt=je.K,je=je.w+(nt>>je.b)*Pt;nt<yt;){for(Ir=Jt,pr=je,sn=new Yt,wr=it+$t,di=it+Et;it<wr;)yr(Ir[pr++],sn),cd(sn,Ht,it,dt,Pe,Ie),it+=dt,Ie+=dt;it<di&&(yr(Ir[pr++],sn),cd(sn,Ht,it,ir,Pe,Ie),it+=ir,Ie+=ir),++nt&st||(je+=Pt)}break;case 3:if(Et==Pe&&dt==Ie&&0<je.b){for(it=Pe,Et=Ht=Ie+(yt-nt)*Ht-($t=(yt-nt)*qt(je.Ea,je.b)),dt=Pe,st=Ie,Pt=[],$t=(ir=$t)-1;0<=$t;--$t)Pt[$t]=dt[st+$t];for($t=ir-1;0<=$t;--$t)it[Et+$t]=Pt[$t];Kc(je,nt,yt,Pe,Ht,Pe,Ie)}else Kc(je,nt,yt,Et,dt,Pe,Ie)}Ie=ne,Pe=$}Pe!=$&&s(ne,$,Ie,Pe,be)}function Uc(I,U){var $=I.V,ne=I.Ba+I.c*I.C,Ee=U-I.C;if(t(U<=I.l.o),t(16>=Ee),0<Ee){var be=I.l,Re=I.Ta,Ie=I.Ua,Pe=be.width;if(ys(I,Ee,$,ne),Ee=Ie=[Ie],t(($=I.C)<(ne=U)),t(be.v<be.va),ne>be.o&&(ne=be.o),$<be.j){var je=be.j-$;$=be.j,Ee[0]+=je*Pe}if($>=ne?$=0:(Ee[0]+=4*be.v,be.ka=$-be.j,be.U=be.va-be.v,be.T=ne-$,$=1),$){if(Ie=Ie[0],11>($=I.ca).S){var nt=$.f.RGBA,yt=(ne=$.S,Ee=be.U,be=be.T,je=nt.eb,nt.A),Et=be;for(nt=nt.fb+I.Ma*nt.A;0<Et--;){var dt=Re,Ht=Ie,Pt=Ee,it=je,st=nt;switch(ne){case Bm:fo(dt,Ht,Pt,it,st);break;case zh:Pa(dt,Ht,Pt,it,st);break;case Lm:Pa(dt,Ht,Pt,it,st),Xa(it,st,0,Pt,1,0);break;case T0:hl(dt,Ht,Pt,it,st);break;case ld:Mr(dt,Ht,Pt,it,st,1);break;case mu:Mr(dt,Ht,Pt,it,st,1),Xa(it,st,0,Pt,1,0);break;case qh:Mr(dt,Ht,Pt,it,st,0);break;case Pm:Mr(dt,Ht,Pt,it,st,0),Xa(it,st,1,Pt,1,0);break;case lA:aA(dt,Ht,Pt,it,st);break;case R0:aA(dt,Ht,Pt,it,st),mi(it,st,Pt,1,0);break;case ka:bo(dt,Ht,Pt,it,st);break;default:t(0)}Ie+=Pe,nt+=yt}I.Ma+=be}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=$.height)}}I.C=U,t(I.C<=I.i)}function Zo(I){var U;if(0<I.ua)return 0;for(U=0;U<I.Wb;++U){var $=I.Ya[U].G,ne=I.Ya[U].H;if(0<$[1][ne[1]+0].g||0<$[2][ne[2]+0].g||0<$[3][ne[3]+0].g)return 0}return 1}function Es(I,U,$,ne,Ee,be){if(I.Z!=0){var Re=I.qd,Ie=I.rd;for(t(dd[I.Z]!=null);U<$;++U)dd[I.Z](Re,Ie,ne,Ee,ne,Ee,be),Re=ne,Ie=Ee,Ee+=be;I.qd=Re,I.rd=Ie}}function hc(I,U){var $=I.l.ma,ne=$.Z==0||$.Z==1?I.l.j:I.C;if(ne=I.C<ne?ne:I.C,t(U<=I.l.o),U>ne){var Ee=I.l.width,be=$.ca,Re=$.tb+Ee*ne,Ie=I.V,Pe=I.Ba+I.c*ne,je=I.gc;t(I.ab==1),t(je[0].hc==3),pf(je[0],ne,U,Ie,Pe,be,Re),Es($,ne,U,be,Re,Ee)}I.C=I.Ma=U}function es(I,U,$,ne,Ee,be,Re){var Ie=I.$/ne,Pe=I.$%ne,je=I.m,nt=I.s,yt=$+I.$,Et=yt;Ee=$+ne*Ee;var dt=$+ne*be,Ht=280+nt.ua,Pt=I.Pb?Ie:16777216,it=0<nt.ua?nt.Wa:null,st=nt.wc,$t=yt<dt?uo(nt,Pe,Ie):null;t(I.C<be),t(dt<=Ee);var ir=!1;e:for(;;){for(;ir||yt<dt;){var Jt=0;if(Ie>=Pt){var Ir=yt-$;t((Pt=I).Pb),Pt.wd=Pt.m,Pt.xd=Ir,0<Pt.s.ua&&lt(Pt.s.Wa,Pt.s.vb),Pt=Ie+O0}if(Pe&st||($t=uo(nt,Pe,Ie)),t($t!=null),$t.Qb&&(U[yt]=$t.qb,ir=!0),!ir)if(Qe(je),$t.jc){Jt=je,Ir=U;var pr=yt,sn=$t.pd[Oe(Jt)&bs-1];t($t.jc),256>sn.g?(Fe(Jt,Jt.u+sn.g),Ir[pr]=sn.value,Jt=0):(Fe(Jt,Jt.u+sn.g-256),t(256<=sn.value),Jt=sn.value),Jt==0&&(ir=!0)}else Jt=_s($t.G[0],$t.H[0],je);if(je.h)break;if(ir||256>Jt){if(!ir)if($t.nd)U[yt]=($t.qb|Jt<<8)>>>0;else{if(Qe(je),ir=_s($t.G[1],$t.H[1],je),Qe(je),Ir=_s($t.G[2],$t.H[2],je),pr=_s($t.G[3],$t.H[3],je),je.h)break;U[yt]=(pr<<24|ir<<16|Jt<<8|Ir)>>>0}if(ir=!1,++yt,++Pe>=ne&&(Pe=0,++Ie,Re!=null&&Ie<=be&&!(Ie%16)&&Re(I,Ie),it!=null))for(;Et<yt;)Jt=U[Et++],it.X[(506832829*Jt&4294967295)>>>it.Mb]=Jt}else if(280>Jt){if(Jt=$a(Jt-256,je),Ir=_s($t.G[4],$t.H[4],je),Qe(je),Ir=ls(ne,Ir=$a(Ir,je)),je.h)break;if(yt-$<Ir||Ee-yt<Jt)break e;for(pr=0;pr<Jt;++pr)U[yt+pr]=U[yt+pr-Ir];for(yt+=Jt,Pe+=Jt;Pe>=ne;)Pe-=ne,++Ie,Re!=null&&Ie<=be&&!(Ie%16)&&Re(I,Ie);if(t(yt<=Ee),Pe&st&&($t=uo(nt,Pe,Ie)),it!=null)for(;Et<yt;)Jt=U[Et++],it.X[(506832829*Jt&4294967295)>>>it.Mb]=Jt}else{if(!(Jt<Ht))break e;for(ir=Jt-280,t(it!=null);Et<yt;)Jt=U[Et++],it.X[(506832829*Jt&4294967295)>>>it.Mb]=Jt;Jt=yt,t(!(ir>>>(Ir=it).Xa)),U[Jt]=Ir.X[ir],ir=!0}ir||t(je.h==Ue(je))}if(I.Pb&&je.h&&yt<Ee)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&lt(I.s.vb,I.s.Wa);else{if(je.h)break e;Re!=null&&Re(I,Ie>be?be:Ie),I.a=0,I.$=yt-$}return 1}return I.a=3,0}function ul(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var U=I.Wa;U!=null&&(U.X=null),I.vb=null,t(I!=null)}function js(){var I=new C0;return I==null?null:(I.a=0,I.xb=S_,Tr("Predictor","VP8LPredictors"),Tr("Predictor","VP8LPredictors_C"),Tr("PredictorAdd","VP8LPredictorsAdd"),Tr("PredictorAdd","VP8LPredictorsAdd_C"),hf=Kt,cd=nr,fo=vt,Pa=tn,aA=Rr,bo=on,hl=sr,Z.VP8LMapColor32b=Wh,Z.VP8LMapColor8b=Nm,I)}function ts(I,U,$,ne,Ee){var be=1,Re=[I],Ie=[U],Pe=ne.m,je=ne.s,nt=null,yt=0;e:for(;;){if($)for(;be&&Ke(Pe,1);){var Et=Re,dt=Ie,Ht=ne,Pt=1,it=Ht.m,st=Ht.gc[Ht.ab],$t=Ke(it,2);if(Ht.Oc&1<<$t)be=0;else{switch(Ht.Oc|=1<<$t,st.hc=$t,st.Ea=Et[0],st.nc=dt[0],st.K=[null],++Ht.ab,t(4>=Ht.ab),$t){case 0:case 1:st.b=Ke(it,3)+2,Pt=ts(qt(st.Ea,st.b),qt(st.nc,st.b),0,Ht,st.K),st.K=st.K[0];break;case 3:var ir,Jt=Ke(it,8)+1,Ir=16<Jt?0:4<Jt?1:2<Jt?2:3;if(Et[0]=qt(st.Ea,Ir),st.b=Ir,ir=Pt=ts(Jt,1,0,Ht,st.K)){var pr,sn=Jt,wr=st,di=1<<(8>>wr.b),xi=u(di);if(xi==null)ir=0;else{var fi=wr.K[0],Pn=wr.w;for(xi[0]=wr.K[0][0],pr=1;pr<1*sn;++pr)xi[pr]=Nt(fi[Pn+pr],xi[pr-1]);for(;pr<4*di;++pr)xi[pr]=0;wr.K[0]=null,wr.K[0]=xi,ir=1}}Pt=ir;break;case 2:break;default:t(0)}be=Pt}}if(Re=Re[0],Ie=Ie[0],be&&Ke(Pe,1)&&!(be=1<=(yt=Ke(Pe,4))&&11>=yt)){ne.a=3;break e}var Si;if(Si=be)t:{var zi,kn,$o,Ts=ne,zo=Re,qs=Ie,Ui=yt,ec=$,yc=Ts.m,Ys=Ts.s,Xs=[null],Ii=1,Da=0,xa=xm[Ui];r:for(;;){if(ec&&Ke(yc,1)){var Rs=Ke(yc,3)+2,yu=qt(zo,Rs),yl=qt(qs,Rs),Eu=yu*yl;if(!ts(yu,yl,0,Ts,Xs))break r;for(Xs=Xs[0],Ys.xc=Rs,zi=0;zi<Eu;++zi){var uA=Xs[zi]>>8&65535;Xs[zi]=uA,uA>=Ii&&(Ii=uA+1)}}if(yc.h)break r;for(kn=0;5>kn;++kn){var Co=Dm[kn];!kn&&0<Ui&&(Co+=1<<Ui),Da<Co&&(Da=Co)}var Qm=f(Ii*xa,le),Tf=Ii,x0=f(Tf,ge);if(x0==null)var wu=null;else t(65536>=Tf),wu=x0;var ep=u(Da);if(wu==null||ep==null||Qm==null){Ts.a=1;break r}var fd=Qm;for(zi=$o=0;zi<Ii;++zi){var Gl=wu[zi],$l=Gl.G,Rf=Gl.H,U0=0,If=1,tp=0;for(kn=0;5>kn;++kn){Co=Dm[kn],$l[kn]=fd,Rf[kn]=$o,!kn&&0<Ui&&(Co+=1<<Ui);i:{var AA,Of=Co,dA=Ts,rp=ep,zw=fd,T_=$o,Su=0,$c=dA.m,_g=Ke($c,1);if(c(rp,0,0,Of),_g){var R_=Ke($c,1)+1,I_=Ke($c,1),O_=Ke($c,I_==0?1:8);rp[O_]=1,R_==2&&(rp[O_=Ke($c,8)]=1);var yg=1}else{var N_=u(19),Is=Ke($c,4)+4;if(19<Is){dA.a=3;var np=0;break i}for(AA=0;AA<Is;++AA)N_[hg[AA]]=Ke($c,3);var Nf=void 0,Eg=void 0,B_=dA,L_=N_,wg=Of,ip=rp,M0=0,fA=B_.m,Hm=8,zl=f(128,le);n:for(;te(zl,0,7,L_,19);){if(Ke(fA,1)){var Sg=2+2*Ke(fA,3);if((Nf=2+Ke(fA,Sg))>wg)break n}else Nf=wg;for(Eg=0;Eg<wg&&Nf--;){Qe(fA);var bg=zl[0+(127&Oe(fA))];Fe(fA,fA.u+bg.g);var bu=bg.value;if(16>bu)ip[Eg++]=bu,bu!=0&&(Hm=bu);else{var hA=bu==16,P_=bu-16,jm=km[P_],Bf=Ke(fA,jw[P_])+jm;if(Eg+Bf>wg)break n;for(var Lf=hA?Hm:0;0<Bf--;)ip[Eg++]=Lf}}M0=1;break n}M0||(B_.a=3),yg=M0}(yg=yg&&!$c.h)&&(Su=te(zw,T_,8,rp,Of)),yg&&Su!=0?np=Su:(dA.a=3,np=0)}if(np==0)break r;if(If&&Yh[kn]==1&&(If=fd[$o].g==0),U0+=fd[$o].g,$o+=np,3>=kn){var hd,Pf=ep[0];for(hd=1;hd<Co;++hd)ep[hd]>Pf&&(Pf=ep[hd]);tp+=Pf}}if(Gl.nd=If,Gl.Qb=0,If&&(Gl.qb=($l[3][Rf[3]+0].value<<24|$l[1][Rf[1]+0].value<<16|$l[2][Rf[2]+0].value)>>>0,U0==0&&256>$l[0][Rf[0]+0].value&&(Gl.Qb=1,Gl.qb+=$l[0][Rf[0]+0].value<<8)),Gl.jc=!Gl.Qb&&6>tp,Gl.jc){var ql,fa=Gl;for(ql=0;ql<bs;++ql){var Cu=ql,Yl=fa.pd[Cu],op=fa.G[0][fa.H[0]+Cu];256<=op.value?(Yl.g=op.g+256,Yl.value=op.value):(Yl.g=0,Yl.value=0,Cu>>=ro(op,8,Yl),Cu>>=ro(fa.G[1][fa.H[1]+Cu],16,Yl),Cu>>=ro(fa.G[2][fa.H[2]+Cu],0,Yl),ro(fa.G[3][fa.H[3]+Cu],24,Yl))}}}Ys.vc=Xs,Ys.Wb=Ii,Ys.Ya=wu,Ys.yc=Qm,Si=1;break t}Si=0}if(!(be=Si)){ne.a=3;break e}if(0<yt){if(je.ua=1<<yt,!Ft(je.Wa,yt)){ne.a=1,be=0;break e}}else je.ua=0;var Km=ne,sp=Re,k_=Ie,Cg=Km.s,ap=Cg.xc;if(Km.c=sp,Km.i=k_,Cg.md=qt(sp,ap),Cg.wc=ap==0?-1:(1<<ap)-1,$){ne.xb=Kw;break e}if((nt=u(Re*Ie))==null){ne.a=1,be=0;break e}be=(be=es(ne,nt,0,Re,Ie,Ie,null))&&!Pe.h;break e}return be?(Ee!=null?Ee[0]=nt:(t(nt==null),t($)),ne.$=0,$||ul(je)):ul(je),be}function ws(I,U){var $=I.c*I.i,ne=$+U+16*U;return t(I.c<=U),I.V=u(ne),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+$+U,1)}function Mc(I,U){var $=I.C,ne=U-$,Ee=I.V,be=I.Ba+I.c*$;for(t(U<=I.l.o);0<ne;){var Re=16<ne?16:ne,Ie=I.l.ma,Pe=I.l.width,je=Pe*Re,nt=Ie.ca,yt=Ie.tb+Pe*$,Et=I.Ta,dt=I.Ua;ys(I,Re,Ee,be),li(Et,dt,nt,yt,je),Es(Ie,$,$+Re,nt,yt,Pe),ne-=Re,Ee+=Re*I.c,$+=Re}t($==U),I.C=I.Ma=U}function Oa(){this.ub=this.yd=this.td=this.Rb=0}function Kl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fc(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function Ks(){this.Yb=function(){var I=[];return function U($,ne,Ee){for(var be=Ee[ne],Re=0;Re<be&&($.push(Ee.length>ne+1?[]:0),!(Ee.length<ne+1));Re++)U($[Re],ne+1,Ee)}(I,0,[3,11]),I}()}function Al(){this.jb=u(3),this.Wc=p([4,8],Ks),this.Xc=p([4,17],Ks)}function sf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Di(){this.ld=this.La=this.dd=this.tc=0}function no(){this.Na=this.la=0}function Hr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vc(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function af(){this.uc=this.M=this.Nb=0,this.wa=Array(new Di),this.Y=0,this.ya=Array(new Vc),this.aa=0,this.l=new Ge}function Ws(){this.y=u(16),this.f=u(8),this.ea=u(8)}function Ce(){this.cb=this.a=0,this.sc="",this.m=new ht,this.Od=new Oa,this.Kc=new Kl,this.ed=new sf,this.Qa=new Fc,this.Ic=this.$c=this.Aa=0,this.D=new af,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=f(8,ht),this.ia=0,this.pb=f(4,Hr),this.Pa=new Al,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ws),this.Hd=0,this.rb=Array(new no),this.sb=0,this.wa=Array(new Di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vc),this.L=this.aa=0,this.gd=p([4,2],Di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ut(){var I=new Ce;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,vl||(vl=ri)),I}function Wt(I,U,$){return I.a==0&&(I.a=U,I.sc=$,I.cb=0),0}function Tt(I,U,$){return 3<=$&&I[U+0]==157&&I[U+1]==1&&I[U+2]==42}function lr(I,U){if(I==null)return 0;if(I.a=0,I.sc="OK",U==null)return Wt(I,2,"null VP8Io passed to VP8GetHeaders()");var $=U.data,ne=U.w,Ee=U.ha;if(4>Ee)return Wt(I,7,"Truncated header.");var be=$[ne+0]|$[ne+1]<<8|$[ne+2]<<16,Re=I.Od;if(Re.Rb=!(1&be),Re.td=be>>1&7,Re.yd=be>>4&1,Re.ub=be>>5,3<Re.td)return Wt(I,3,"Incorrect keyframe parameters.");if(!Re.yd)return Wt(I,4,"Frame not displayable.");ne+=3,Ee-=3;var Ie=I.Kc;if(Re.Rb){if(7>Ee)return Wt(I,7,"cannot parse picture header");if(!Tt($,ne,Ee))return Wt(I,3,"Bad code word");Ie.c=16383&($[ne+4]<<8|$[ne+3]),Ie.Td=$[ne+4]>>6,Ie.i=16383&($[ne+6]<<8|$[ne+5]),Ie.Ud=$[ne+6]>>6,ne+=7,Ee-=7,I.za=Ie.c+15>>4,I.Ub=Ie.i+15>>4,U.width=Ie.c,U.height=Ie.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,c((be=I.Pa).jb,0,255,be.jb.length),t((be=I.Qa)!=null),be.Cb=0,be.Bb=0,be.Fb=1,c(be.Zb,0,0,be.Zb.length),c(be.Lb,0,0,be.Lb)}if(Re.ub>Ee)return Wt(I,7,"bad partition length");se(be=I.m,$,ne,Re.ub),ne+=Re.ub,Ee-=Re.ub,Re.Rb&&(Ie.Ld=et(be),Ie.Kd=et(be)),Ie=I.Qa;var Pe,je=I.Pa;if(t(be!=null),t(Ie!=null),Ie.Cb=et(be),Ie.Cb){if(Ie.Bb=et(be),et(be)){for(Ie.Fb=et(be),Pe=0;4>Pe;++Pe)Ie.Zb[Pe]=et(be)?Me(be,7):0;for(Pe=0;4>Pe;++Pe)Ie.Lb[Pe]=et(be)?Me(be,6):0}if(Ie.Bb)for(Pe=0;3>Pe;++Pe)je.jb[Pe]=et(be)?xe(be,8):255}else Ie.Bb=0;if(be.Ka)return Wt(I,3,"cannot parse segment header");if((Ie=I.ed).zd=et(be),Ie.Tb=xe(be,6),Ie.wb=xe(be,3),Ie.Pc=et(be),Ie.Pc&&et(be)){for(je=0;4>je;++je)et(be)&&(Ie.vd[je]=Me(be,6));for(je=0;4>je;++je)et(be)&&(Ie.od[je]=Me(be,6))}if(I.L=Ie.Tb==0?0:Ie.zd?1:2,be.Ka)return Wt(I,3,"cannot parse filter header");var nt=Ee;if(Ee=Pe=ne,ne=Pe+nt,Ie=nt,I.Xb=(1<<xe(I.m,2))-1,nt<3*(je=I.Xb))$=7;else{for(Pe+=3*je,Ie-=3*je,nt=0;nt<je;++nt){var yt=$[Ee+0]|$[Ee+1]<<8|$[Ee+2]<<16;yt>Ie&&(yt=Ie),se(I.Jc[+nt],$,Pe,yt),Pe+=yt,Ie-=yt,Ee+=3}se(I.Jc[+je],$,Pe,Ie),$=Pe<ne?0:5}if($!=0)return Wt(I,$,"cannot parse partitions");for($=xe(Pe=I.m,7),Ee=et(Pe)?Me(Pe,4):0,ne=et(Pe)?Me(Pe,4):0,Ie=et(Pe)?Me(Pe,4):0,je=et(Pe)?Me(Pe,4):0,Pe=et(Pe)?Me(Pe,4):0,nt=I.Qa,yt=0;4>yt;++yt){if(nt.Cb){var Et=nt.Zb[yt];nt.Fb||(Et+=$)}else{if(0<yt){I.pb[yt]=I.pb[0];continue}Et=$}var dt=I.pb[yt];dt.Sc[0]=ud[gc(Et+Ee,127)],dt.Sc[1]=Um[gc(Et+0,127)],dt.Eb[0]=2*ud[gc(Et+ne,127)],dt.Eb[1]=101581*Um[gc(Et+Ie,127)]>>16,8>dt.Eb[1]&&(dt.Eb[1]=8),dt.Qc[0]=ud[gc(Et+je,117)],dt.Qc[1]=Um[gc(Et+Pe,127)],dt.lc=Et+Pe}if(!Re.Rb)return Wt(I,4,"Not a key frame.");for(et(be),Re=I.Pa,$=0;4>$;++$){for(Ee=0;8>Ee;++Ee)for(ne=0;3>ne;++ne)for(Ie=0;11>Ie;++Ie)je=Ze(be,w_[$][Ee][ne][Ie])?xe(be,8):Jh[$][Ee][ne][Ie],Re.Wc[$][Ee].Yb[ne][Ie]=je;for(Ee=0;17>Ee;++Ee)Re.Xc[$][Ee]=Re.Wc[$][N0[Ee]]}return I.kc=et(be),I.kc&&(I.Bd=xe(be,8)),I.cb=1}function ri(I,U,$,ne,Ee,be,Re){var Ie=U[Ee].Yb[$];for($=0;16>Ee;++Ee){if(!Ze(I,Ie[$+0]))return Ee;for(;!Ze(I,Ie[$+1]);)if(Ie=U[++Ee].Yb[0],$=0,Ee==16)return 16;var Pe=U[Ee+1].Yb;if(Ze(I,Ie[$+2])){var je=I,nt=0;if(Ze(je,(Et=Ie)[(yt=$)+3]))if(Ze(je,Et[yt+6])){for(Ie=0,yt=2*(nt=Ze(je,Et[yt+8]))+(Et=Ze(je,Et[yt+9+nt])),nt=0,Et=Ad[yt];Et[Ie];++Ie)nt+=nt+Ze(je,Et[Ie]);nt+=3+(8<<yt)}else Ze(je,Et[yt+7])?(nt=7+2*Ze(je,165),nt+=Ze(je,145)):nt=5+Ze(je,159);else nt=Ze(je,Et[yt+4])?3+Ze(je,Et[yt+5]):2;Ie=Pe[2]}else nt=1,Ie=Pe[1];Pe=Re+Sf[Ee],0>(je=I).b&&We(je);var yt,Et=je.b,dt=(yt=je.Ca>>1)-(je.I>>Et)>>31;--je.b,je.Ca+=dt,je.Ca|=1,je.I-=(yt+1&dt)<<Et,be[Pe]=((nt^dt)-dt)*ne[(0<Ee)+0]}return 16}function Lo(I){var U=I.rb[I.sb-1];U.la=0,U.Na=0,c(I.zc,0,0,I.zc.length),I.ja=0}function Bn(I,U){if(I==null)return 0;if(U==null)return Wt(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!lr(I,U))return 0;if(t(I.cb),U.ac==null||U.ac(U)){U.ob&&(I.L=0);var $=gg[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=U.v-$>>4,I.zb=U.j-$>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=U.o+15+$>>4,I.Hb=U.va+15+$>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var ne=I.ed;for($=0;4>$;++$){var Ee;if(I.Qa.Cb){var be=I.Qa.Lb[$];I.Qa.Fb||(be+=ne.Tb)}else be=ne.Tb;for(Ee=0;1>=Ee;++Ee){var Re=I.gd[$][Ee],Ie=be;if(ne.Pc&&(Ie+=ne.vd[0],Ee&&(Ie+=ne.od[0])),0<(Ie=0>Ie?0:63<Ie?63:Ie)){var Pe=Ie;0<ne.wb&&(Pe=4<ne.wb?Pe>>2:Pe>>1)>9-ne.wb&&(Pe=9-ne.wb),1>Pe&&(Pe=1),Re.dd=Pe,Re.tc=2*Ie+Pe,Re.ld=40<=Ie?2:15<=Ie?1:0}else Re.tc=0;Re.La=Ee}}}$=0}else Wt(I,6,"Frame setup failed"),$=I.a;if($=$==0){if($){I.$c=0,0<I.Aa||(I.Ic=$w);e:{$=I.Ic,ne=4*(Pe=I.za);var je=32*Pe,nt=Pe+1,yt=0<I.L?Pe*(0<I.Aa?2:1):0,Et=(I.Aa==2?2:1)*Pe;if((Re=ne+832+(Ee=3*(16*$+gg[I.L])/2*je)+(be=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=Re)$=0;else{if(Re>I.Vb){if(I.Vb=0,I.Ec=u(Re),I.Fc=0,I.Ec==null){$=Wt(I,1,"no memory during frame initialization.");break e}I.Vb=Re}Re=I.Ec,Ie=I.Fc,I.Ac=Re,I.Bc=Ie,Ie+=ne,I.Gd=f(je,Ws),I.Hd=0,I.rb=f(nt+1,no),I.sb=1,I.wa=yt?f(yt,Di):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Pe),t(!0),I.oc=Re,I.pc=Ie,Ie+=832,I.ya=f(Et,Vc),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Pe),I.R=16*Pe,I.B=8*Pe,Pe=(je=gg[I.L])*I.R,je=je/2*I.B,I.sa=Re,I.ta=Ie+Pe,I.qa=I.sa,I.ra=I.ta+16*$*I.R+je,I.Ha=I.qa,I.Ia=I.ra+8*$*I.B+je,I.$c=0,Ie+=Ee,I.mb=be?Re:null,I.nb=be?Ie:null,t(Ie+be<=I.Fc+I.Vb),Lo(I),c(I.Ac,I.Bc,0,ne),$=1}}if($){if(U.ka=0,U.y=I.sa,U.O=I.ta,U.f=I.qa,U.N=I.ra,U.ea=I.Ha,U.Vd=I.Ia,U.fa=I.R,U.Rc=I.B,U.F=null,U.J=0,!fg){for($=-255;255>=$;++$)io[255+$]=0>$?-$:$;for($=-1020;1020>=$;++$)Cs[1020+$]=-128>$?-128:127<$?127:$;for($=-112;112>=$;++$)ml[112+$]=-16>$?-16:15<$?15:$;for($=-255;510>=$;++$)$h[255+$]=0>$?0:255<$?255:$;fg=1}gf=eA,pl=Bh,mf=Qc,la=Em,_c=cg,Ri=ag,vf=rd,Gh=qa,_f=uu,yf=lf,cA=nd,hu=id,Wc=uf,_t=Im,gl=pc,pu=wo,Ef=iA,Gc=dg,ua[0]=za,ua[1]=Lh,ua[2]=S0,ua[3]=kh,ua[4]=bm,ua[5]=Dh,ua[6]=Cm,ua[7]=tA,ua[8]=Tm,ua[9]=ug,vu[0]=wm,vu[1]=Ph,vu[2]=lu,vu[3]=ed,vu[4]=Ba,vu[5]=Sm,vu[6]=dl,Aa[0]=Wl,Aa[1]=lg,Aa[2]=b0,Aa[3]=xh,Aa[4]=nA,Aa[5]=Uh,Aa[6]=Hc,$=1}else $=0}$&&($=function(dt,Ht){for(dt.M=0;dt.M<dt.Va;++dt.M){var Pt,it=dt.Jc[dt.M&dt.Xb],st=dt.m,$t=dt;for(Pt=0;Pt<$t.za;++Pt){var ir=st,Jt=$t,Ir=Jt.Ac,pr=Jt.Bc+4*Pt,sn=Jt.zc,wr=Jt.ya[Jt.aa+Pt];if(Jt.Qa.Bb?wr.$b=Ze(ir,Jt.Pa.jb[0])?2+Ze(ir,Jt.Pa.jb[2]):Ze(ir,Jt.Pa.jb[1]):wr.$b=0,Jt.kc&&(wr.Ad=Ze(ir,Jt.Bd)),wr.Za=!Ze(ir,145)+0,wr.Za){var di=wr.Ob,xi=0;for(Jt=0;4>Jt;++Jt){var fi,Pn=sn[0+Jt];for(fi=0;4>fi;++fi){Pn=E_[Ir[pr+fi]][Pn];for(var Si=Xh[Ze(ir,Pn[0])];0<Si;)Si=Xh[2*Si+Ze(ir,Pn[Si])];Pn=-Si,Ir[pr+fi]=Pn}s(di,xi,Ir,pr,4),xi+=4,sn[0+Jt]=Pn}}else Pn=Ze(ir,156)?Ze(ir,128)?1:3:Ze(ir,163)?2:0,wr.Ob[0]=Pn,c(Ir,pr,Pn,4),c(sn,0,Pn,4);wr.Dd=Ze(ir,142)?Ze(ir,114)?Ze(ir,183)?1:3:2:0}if($t.m.Ka)return Wt(dt,7,"Premature end-of-partition0 encountered.");for(;dt.ja<dt.za;++dt.ja){if($t=it,ir=(st=dt).rb[st.sb-1],Ir=st.rb[st.sb+st.ja],Pt=st.ya[st.aa+st.ja],pr=st.kc?Pt.Ad:0)ir.la=Ir.la=0,Pt.Za||(ir.Na=Ir.Na=0),Pt.Hc=0,Pt.Gc=0,Pt.ia=0;else{var zi,kn;if(ir=Ir,Ir=$t,pr=st.Pa.Xc,sn=st.ya[st.aa+st.ja],wr=st.pb[sn.$b],Jt=sn.ad,di=0,xi=st.rb[st.sb-1],Pn=fi=0,c(Jt,di,0,384),sn.Za)var $o=0,Ts=pr[3];else{Si=u(16);var zo=ir.Na+xi.Na;if(zo=vl(Ir,pr[1],zo,wr.Eb,0,Si,0),ir.Na=xi.Na=(0<zo)+0,1<zo)gf(Si,0,Jt,di);else{var qs=Si[0]+3>>3;for(Si=0;256>Si;Si+=16)Jt[di+Si]=qs}$o=1,Ts=pr[0]}var Ui=15&ir.la,ec=15&xi.la;for(Si=0;4>Si;++Si){var yc=1&ec;for(qs=kn=0;4>qs;++qs)Ui=Ui>>1|(yc=(zo=vl(Ir,Ts,zo=yc+(1&Ui),wr.Sc,$o,Jt,di))>$o)<<7,kn=kn<<2|(3<zo?3:1<zo?2:Jt[di+0]!=0),di+=16;Ui>>=4,ec=ec>>1|yc<<7,fi=(fi<<8|kn)>>>0}for(Ts=Ui,$o=ec>>4,zi=0;4>zi;zi+=2){for(kn=0,Ui=ir.la>>4+zi,ec=xi.la>>4+zi,Si=0;2>Si;++Si){for(yc=1&ec,qs=0;2>qs;++qs)zo=yc+(1&Ui),Ui=Ui>>1|(yc=0<(zo=vl(Ir,pr[2],zo,wr.Qc,0,Jt,di)))<<3,kn=kn<<2|(3<zo?3:1<zo?2:Jt[di+0]!=0),di+=16;Ui>>=2,ec=ec>>1|yc<<5}Pn|=kn<<4*zi,Ts|=Ui<<4<<zi,$o|=(240&ec)<<zi}ir.la=Ts,xi.la=$o,sn.Hc=fi,sn.Gc=Pn,sn.ia=43690&Pn?0:wr.ia,pr=!(fi|Pn)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[Pt.$b][Pt.Za],st.wa[st.Y+st.ja].La|=!pr),$t.Ka)return Wt(dt,7,"Premature end-of-file encountered.")}if(Lo(dt),st=Ht,$t=1,Pt=(it=dt).D,ir=0<it.L&&it.M>=it.zb&&it.M<=it.Va,it.Aa==0)e:{if(Pt.M=it.M,Pt.uc=ir,fu(it,Pt),$t=1,Pt=(kn=it.D).Nb,ir=(Pn=gg[it.L])*it.R,Ir=Pn/2*it.B,Si=16*Pt*it.R,qs=8*Pt*it.B,pr=it.sa,sn=it.ta-ir+Si,wr=it.qa,Jt=it.ra-Ir+qs,di=it.Ha,xi=it.Ia-Ir+qs,ec=(Ui=kn.M)==0,fi=Ui>=it.Va-1,it.Aa==2&&fu(it,kn),kn.uc)for(yc=(zo=it).D.M,t(zo.D.uc),kn=zo.yb;kn<zo.Hb;++kn){$o=kn,Ts=yc;var Ys=(Xs=(Co=zo).D).Nb;zi=Co.R;var Xs=Xs.wa[Xs.Y+$o],Ii=Co.sa,Da=Co.ta+16*Ys*zi+16*$o,xa=Xs.dd,Rs=Xs.tc;if(Rs!=0)if(t(3<=Rs),Co.L==1)0<$o&&pu(Ii,Da,zi,Rs+4),Xs.La&&Gc(Ii,Da,zi,Rs),0<Ts&&gl(Ii,Da,zi,Rs+4),Xs.La&&Ef(Ii,Da,zi,Rs);else{var yu=Co.B,yl=Co.qa,Eu=Co.ra+8*Ys*yu+8*$o,uA=Co.Ha,Co=Co.Ia+8*Ys*yu+8*$o;Ys=Xs.ld,0<$o&&(Gh(Ii,Da,zi,Rs+4,xa,Ys),yf(yl,Eu,uA,Co,yu,Rs+4,xa,Ys)),Xs.La&&(hu(Ii,Da,zi,Rs,xa,Ys),_t(yl,Eu,uA,Co,yu,Rs,xa,Ys)),0<Ts&&(vf(Ii,Da,zi,Rs+4,xa,Ys),_f(yl,Eu,uA,Co,yu,Rs+4,xa,Ys)),Xs.La&&(cA(Ii,Da,zi,Rs,xa,Ys),Wc(yl,Eu,uA,Co,yu,Rs,xa,Ys))}}if(it.ia&&alert("todo:DitherRow"),st.put!=null){if(kn=16*Ui,Ui=16*(Ui+1),ec?(st.y=it.sa,st.O=it.ta+Si,st.f=it.qa,st.N=it.ra+qs,st.ea=it.Ha,st.W=it.Ia+qs):(kn-=Pn,st.y=pr,st.O=sn,st.f=wr,st.N=Jt,st.ea=di,st.W=xi),fi||(Ui-=Pn),Ui>st.o&&(Ui=st.o),st.F=null,st.J=null,it.Fa!=null&&0<it.Fa.length&&kn<Ui&&(st.J=Qh(it,st,kn,Ui-kn),st.F=it.mb,st.F==null&&st.F.length==0)){$t=Wt(it,3,"Could not decode alpha data.");break e}kn<st.j&&(Pn=st.j-kn,kn=st.j,t(!(1&Pn)),st.O+=it.R*Pn,st.N+=it.B*(Pn>>1),st.W+=it.B*(Pn>>1),st.F!=null&&(st.J+=st.width*Pn)),kn<Ui&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=kn-st.j,st.U=st.va-st.v,st.T=Ui-kn,$t=st.put(st))}Pt+1!=it.Ic||fi||(s(it.sa,it.ta-ir,pr,sn+16*it.R,ir),s(it.qa,it.ra-Ir,wr,Jt+8*it.B,Ir),s(it.Ha,it.Ia-Ir,di,xi+8*it.B,Ir))}if(!$t)return Wt(dt,6,"Output aborted.")}return 1}(I,U)),U.bc!=null&&U.bc(U),$&=1}return $?(I.cb=0,$):0}function Na(I,U,$,ne,Ee){Ee=I[U+$+32*ne]+(Ee>>3),I[U+$+32*ne]=-256&Ee?0>Ee?0:255:Ee}function JA(I,U,$,ne,Ee,be){Na(I,U,0,$,ne+Ee),Na(I,U,1,$,ne+be),Na(I,U,2,$,ne-be),Na(I,U,3,$,ne-Ee)}function qr(I){return(20091*I>>16)+I}function sg(I,U,$,ne){var Ee,be=0,Re=u(16);for(Ee=0;4>Ee;++Ee){var Ie=I[U+0]+I[U+8],Pe=I[U+0]-I[U+8],je=(35468*I[U+4]>>16)-qr(I[U+12]),nt=qr(I[U+4])+(35468*I[U+12]>>16);Re[be+0]=Ie+nt,Re[be+1]=Pe+je,Re[be+2]=Pe-je,Re[be+3]=Ie-nt,be+=4,U++}for(Ee=be=0;4>Ee;++Ee)Ie=(I=Re[be+0]+4)+Re[be+8],Pe=I-Re[be+8],je=(35468*Re[be+4]>>16)-qr(Re[be+12]),Na($,ne,0,0,Ie+(nt=qr(Re[be+4])+(35468*Re[be+12]>>16))),Na($,ne,1,0,Pe+je),Na($,ne,2,0,Pe-je),Na($,ne,3,0,Ie-nt),be++,ne+=32}function ag(I,U,$,ne){var Ee=I[U+0]+4,be=35468*I[U+4]>>16,Re=qr(I[U+4]),Ie=35468*I[U+1]>>16;JA($,ne,0,Ee+Re,I=qr(I[U+1]),Ie),JA($,ne,1,Ee+be,I,Ie),JA($,ne,2,Ee-be,I,Ie),JA($,ne,3,Ee-Re,I,Ie)}function Bh(I,U,$,ne,Ee){sg(I,U,$,ne),Ee&&sg(I,U+16,$,ne+4)}function Qc(I,U,$,ne){pl(I,U+0,$,ne,1),pl(I,U+32,$,ne+128,1)}function Em(I,U,$,ne){var Ee;for(I=I[U+0]+4,Ee=0;4>Ee;++Ee)for(U=0;4>U;++U)Na($,ne,U,Ee,I)}function cg(I,U,$,ne){I[U+0]&&la(I,U+0,$,ne),I[U+16]&&la(I,U+16,$,ne+4),I[U+32]&&la(I,U+32,$,ne+128),I[U+48]&&la(I,U+48,$,ne+128+4)}function eA(I,U,$,ne){var Ee,be=u(16);for(Ee=0;4>Ee;++Ee){var Re=I[U+0+Ee]+I[U+12+Ee],Ie=I[U+4+Ee]+I[U+8+Ee],Pe=I[U+4+Ee]-I[U+8+Ee],je=I[U+0+Ee]-I[U+12+Ee];be[0+Ee]=Re+Ie,be[8+Ee]=Re-Ie,be[4+Ee]=je+Pe,be[12+Ee]=je-Pe}for(Ee=0;4>Ee;++Ee)Re=(I=be[0+4*Ee]+3)+be[3+4*Ee],Ie=be[1+4*Ee]+be[2+4*Ee],Pe=be[1+4*Ee]-be[2+4*Ee],je=I-be[3+4*Ee],$[ne+0]=Re+Ie>>3,$[ne+16]=je+Pe>>3,$[ne+32]=Re-Ie>>3,$[ne+48]=je-Pe>>3,ne+=64}function ZA(I,U,$){var ne,Ee=U-32,be=zs,Re=255-I[Ee-1];for(ne=0;ne<$;++ne){var Ie,Pe=be,je=Re+I[U-1];for(Ie=0;Ie<$;++Ie)I[U+Ie]=Pe[je+I[Ee+Ie]];U+=32}}function Lh(I,U){ZA(I,U,4)}function lg(I,U){ZA(I,U,8)}function Ph(I,U){ZA(I,U,16)}function lu(I,U){var $;for($=0;16>$;++$)s(I,U+32*$,I,U-32,16)}function ed(I,U){var $;for($=16;0<$;--$)c(I,U,I[U-1],16),U+=32}function cf(I,U,$){var ne;for(ne=0;16>ne;++ne)c(U,$+32*ne,I,16)}function wm(I,U){var $,ne=16;for($=0;16>$;++$)ne+=I[U-1+32*$]+I[U+$-32];cf(ne>>5,I,U)}function Ba(I,U){var $,ne=8;for($=0;16>$;++$)ne+=I[U-1+32*$];cf(ne>>4,I,U)}function Sm(I,U){var $,ne=8;for($=0;16>$;++$)ne+=I[U+$-32];cf(ne>>4,I,U)}function dl(I,U){cf(128,I,U)}function Cn(I,U,$){return I+2*U+$+2>>2}function S0(I,U){var $,ne=U-32;for(ne=new Uint8Array([Cn(I[ne-1],I[ne+0],I[ne+1]),Cn(I[ne+0],I[ne+1],I[ne+2]),Cn(I[ne+1],I[ne+2],I[ne+3]),Cn(I[ne+2],I[ne+3],I[ne+4])]),$=0;4>$;++$)s(I,U+32*$,ne,0,ne.length)}function kh(I,U){var $=I[U-1],ne=I[U-1+32],Ee=I[U-1+64],be=I[U-1+96];pt(I,U+0,16843009*Cn(I[U-1-32],$,ne)),pt(I,U+32,16843009*Cn($,ne,Ee)),pt(I,U+64,16843009*Cn(ne,Ee,be)),pt(I,U+96,16843009*Cn(Ee,be,be))}function za(I,U){var $,ne=4;for($=0;4>$;++$)ne+=I[U+$-32]+I[U-1+32*$];for(ne>>=3,$=0;4>$;++$)c(I,U+32*$,ne,4)}function bm(I,U){var $=I[U-1+0],ne=I[U-1+32],Ee=I[U-1+64],be=I[U-1-32],Re=I[U+0-32],Ie=I[U+1-32],Pe=I[U+2-32],je=I[U+3-32];I[U+0+96]=Cn(ne,Ee,I[U-1+96]),I[U+1+96]=I[U+0+64]=Cn($,ne,Ee),I[U+2+96]=I[U+1+64]=I[U+0+32]=Cn(be,$,ne),I[U+3+96]=I[U+2+64]=I[U+1+32]=I[U+0+0]=Cn(Re,be,$),I[U+3+64]=I[U+2+32]=I[U+1+0]=Cn(Ie,Re,be),I[U+3+32]=I[U+2+0]=Cn(Pe,Ie,Re),I[U+3+0]=Cn(je,Pe,Ie)}function Cm(I,U){var $=I[U+1-32],ne=I[U+2-32],Ee=I[U+3-32],be=I[U+4-32],Re=I[U+5-32],Ie=I[U+6-32],Pe=I[U+7-32];I[U+0+0]=Cn(I[U+0-32],$,ne),I[U+1+0]=I[U+0+32]=Cn($,ne,Ee),I[U+2+0]=I[U+1+32]=I[U+0+64]=Cn(ne,Ee,be),I[U+3+0]=I[U+2+32]=I[U+1+64]=I[U+0+96]=Cn(Ee,be,Re),I[U+3+32]=I[U+2+64]=I[U+1+96]=Cn(be,Re,Ie),I[U+3+64]=I[U+2+96]=Cn(Re,Ie,Pe),I[U+3+96]=Cn(Ie,Pe,Pe)}function Dh(I,U){var $=I[U-1+0],ne=I[U-1+32],Ee=I[U-1+64],be=I[U-1-32],Re=I[U+0-32],Ie=I[U+1-32],Pe=I[U+2-32],je=I[U+3-32];I[U+0+0]=I[U+1+64]=be+Re+1>>1,I[U+1+0]=I[U+2+64]=Re+Ie+1>>1,I[U+2+0]=I[U+3+64]=Ie+Pe+1>>1,I[U+3+0]=Pe+je+1>>1,I[U+0+96]=Cn(Ee,ne,$),I[U+0+64]=Cn(ne,$,be),I[U+0+32]=I[U+1+96]=Cn($,be,Re),I[U+1+32]=I[U+2+96]=Cn(be,Re,Ie),I[U+2+32]=I[U+3+96]=Cn(Re,Ie,Pe),I[U+3+32]=Cn(Ie,Pe,je)}function tA(I,U){var $=I[U+0-32],ne=I[U+1-32],Ee=I[U+2-32],be=I[U+3-32],Re=I[U+4-32],Ie=I[U+5-32],Pe=I[U+6-32],je=I[U+7-32];I[U+0+0]=$+ne+1>>1,I[U+1+0]=I[U+0+64]=ne+Ee+1>>1,I[U+2+0]=I[U+1+64]=Ee+be+1>>1,I[U+3+0]=I[U+2+64]=be+Re+1>>1,I[U+0+32]=Cn($,ne,Ee),I[U+1+32]=I[U+0+96]=Cn(ne,Ee,be),I[U+2+32]=I[U+1+96]=Cn(Ee,be,Re),I[U+3+32]=I[U+2+96]=Cn(be,Re,Ie),I[U+3+64]=Cn(Re,Ie,Pe),I[U+3+96]=Cn(Ie,Pe,je)}function ug(I,U){var $=I[U-1+0],ne=I[U-1+32],Ee=I[U-1+64],be=I[U-1+96];I[U+0+0]=$+ne+1>>1,I[U+2+0]=I[U+0+32]=ne+Ee+1>>1,I[U+2+32]=I[U+0+64]=Ee+be+1>>1,I[U+1+0]=Cn($,ne,Ee),I[U+3+0]=I[U+1+32]=Cn(ne,Ee,be),I[U+3+32]=I[U+1+64]=Cn(Ee,be,be),I[U+3+64]=I[U+2+64]=I[U+0+96]=I[U+1+96]=I[U+2+96]=I[U+3+96]=be}function Tm(I,U){var $=I[U-1+0],ne=I[U-1+32],Ee=I[U-1+64],be=I[U-1+96],Re=I[U-1-32],Ie=I[U+0-32],Pe=I[U+1-32],je=I[U+2-32];I[U+0+0]=I[U+2+32]=$+Re+1>>1,I[U+0+32]=I[U+2+64]=ne+$+1>>1,I[U+0+64]=I[U+2+96]=Ee+ne+1>>1,I[U+0+96]=be+Ee+1>>1,I[U+3+0]=Cn(Ie,Pe,je),I[U+2+0]=Cn(Re,Ie,Pe),I[U+1+0]=I[U+3+32]=Cn($,Re,Ie),I[U+1+32]=I[U+3+64]=Cn(ne,$,Re),I[U+1+64]=I[U+3+96]=Cn(Ee,ne,$),I[U+1+96]=Cn(be,Ee,ne)}function b0(I,U){var $;for($=0;8>$;++$)s(I,U+32*$,I,U-32,8)}function xh(I,U){var $;for($=0;8>$;++$)c(I,U,I[U-1],8),U+=32}function rA(I,U,$){var ne;for(ne=0;8>ne;++ne)c(U,$+32*ne,I,8)}function Wl(I,U){var $,ne=8;for($=0;8>$;++$)ne+=I[U+$-32]+I[U-1+32*$];rA(ne>>4,I,U)}function Uh(I,U){var $,ne=4;for($=0;8>$;++$)ne+=I[U+$-32];rA(ne>>3,I,U)}function nA(I,U){var $,ne=4;for($=0;8>$;++$)ne+=I[U-1+32*$];rA(ne>>3,I,U)}function Hc(I,U){rA(128,I,U)}function Gs(I,U,$){var ne=I[U-$],Ee=I[U+0],be=3*(Ee-ne)+gu[1020+I[U-2*$]-I[U+$]],Re=wf[112+(be+4>>3)];I[U-$]=zs[255+ne+wf[112+(be+3>>3)]],I[U+0]=zs[255+Ee-Re]}function td(I,U,$,ne){var Ee=I[U+0],be=I[U+$];return Ja[255+I[U-2*$]-I[U-$]]>ne||Ja[255+be-Ee]>ne}function Rm(I,U,$,ne){return 4*Ja[255+I[U-$]-I[U+0]]+Ja[255+I[U-2*$]-I[U+$]]<=ne}function Ag(I,U,$,ne,Ee){var be=I[U-3*$],Re=I[U-2*$],Ie=I[U-$],Pe=I[U+0],je=I[U+$],nt=I[U+2*$],yt=I[U+3*$];return 4*Ja[255+Ie-Pe]+Ja[255+Re-je]>ne?0:Ja[255+I[U-4*$]-be]<=Ee&&Ja[255+be-Re]<=Ee&&Ja[255+Re-Ie]<=Ee&&Ja[255+yt-nt]<=Ee&&Ja[255+nt-je]<=Ee&&Ja[255+je-Pe]<=Ee}function pc(I,U,$,ne){var Ee=2*ne+1;for(ne=0;16>ne;++ne)Rm(I,U+ne,$,Ee)&&Gs(I,U+ne,$)}function wo(I,U,$,ne){var Ee=2*ne+1;for(ne=0;16>ne;++ne)Rm(I,U+ne*$,1,Ee)&&Gs(I,U+ne*$,1)}function iA(I,U,$,ne){var Ee;for(Ee=3;0<Ee;--Ee)pc(I,U+=4*$,$,ne)}function dg(I,U,$,ne){var Ee;for(Ee=3;0<Ee;--Ee)wo(I,U+=4,$,ne)}function oA(I,U,$,ne,Ee,be,Re,Ie){for(be=2*be+1;0<Ee--;){if(Ag(I,U,$,be,Re))if(td(I,U,$,Ie))Gs(I,U,$);else{var Pe=I,je=U,nt=$,yt=Pe[je-2*nt],Et=Pe[je-nt],dt=Pe[je+0],Ht=Pe[je+nt],Pt=Pe[je+2*nt],it=27*($t=gu[1020+3*(dt-Et)+gu[1020+yt-Ht]])+63>>7,st=18*$t+63>>7,$t=9*$t+63>>7;Pe[je-3*nt]=zs[255+Pe[je-3*nt]+$t],Pe[je-2*nt]=zs[255+yt+st],Pe[je-nt]=zs[255+Et+it],Pe[je+0]=zs[255+dt-it],Pe[je+nt]=zs[255+Ht-st],Pe[je+2*nt]=zs[255+Pt-$t]}U+=ne}}function rs(I,U,$,ne,Ee,be,Re,Ie){for(be=2*be+1;0<Ee--;){if(Ag(I,U,$,be,Re))if(td(I,U,$,Ie))Gs(I,U,$);else{var Pe=I,je=U,nt=$,yt=Pe[je-nt],Et=Pe[je+0],dt=Pe[je+nt],Ht=wf[112+((Pt=3*(Et-yt))+4>>3)],Pt=wf[112+(Pt+3>>3)],it=Ht+1>>1;Pe[je-2*nt]=zs[255+Pe[je-2*nt]+it],Pe[je-nt]=zs[255+yt+Pt],Pe[je+0]=zs[255+Et-Ht],Pe[je+nt]=zs[255+dt-it]}U+=ne}}function rd(I,U,$,ne,Ee,be){oA(I,U,$,1,16,ne,Ee,be)}function qa(I,U,$,ne,Ee,be){oA(I,U,1,$,16,ne,Ee,be)}function nd(I,U,$,ne,Ee,be){var Re;for(Re=3;0<Re;--Re)rs(I,U+=4*$,$,1,16,ne,Ee,be)}function id(I,U,$,ne,Ee,be){var Re;for(Re=3;0<Re;--Re)rs(I,U+=4,1,$,16,ne,Ee,be)}function uu(I,U,$,ne,Ee,be,Re,Ie){oA(I,U,Ee,1,8,be,Re,Ie),oA($,ne,Ee,1,8,be,Re,Ie)}function lf(I,U,$,ne,Ee,be,Re,Ie){oA(I,U,1,Ee,8,be,Re,Ie),oA($,ne,1,Ee,8,be,Re,Ie)}function uf(I,U,$,ne,Ee,be,Re,Ie){rs(I,U+4*Ee,Ee,1,8,be,Re,Ie),rs($,ne+4*Ee,Ee,1,8,be,Re,Ie)}function Im(I,U,$,ne,Ee,be,Re,Ie){rs(I,U+4,1,Ee,8,be,Re,Ie),rs($,ne+4,1,Ee,8,be,Re,Ie)}function Mh(){this.ba=new Ei,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function fl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Au(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Om(){this.ua=0,this.Wa=new He,this.vb=new He,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new le}function C0(){this.xb=this.a=0,this.l=new Ge,this.ca=new Ei,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ve,this.Pb=0,this.wd=new ve,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Om,this.ab=0,this.gc=f(4,Au),this.Oc=0}function Fh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Af(I,U,$,ne,Ee,be,Re){for(I=I==null?0:I[U+0],U=0;U<Re;++U)Ee[be+U]=I+$[ne+U]&255,I=Ee[be+U]}function Vh(I,U,$,ne,Ee,be,Re){var Ie;if(I==null)Af(null,null,$,ne,Ee,be,Re);else for(Ie=0;Ie<Re;++Ie)Ee[be+Ie]=I[U+Ie]+$[ne+Ie]&255}function jc(I,U,$,ne,Ee,be,Re){if(I==null)Af(null,null,$,ne,Ee,be,Re);else{var Ie,Pe=I[U+0],je=Pe,nt=Pe;for(Ie=0;Ie<Re;++Ie)je=nt+(Pe=I[U+Ie])-je,nt=$[ne+Ie]+(-256&je?0>je?0:255:je)&255,je=Pe,Ee[be+Ie]=nt}}function Qh(I,U,$,ne){var Ee=U.width,be=U.o;if(t(I!=null&&U!=null),0>$||0>=ne||$+ne>be)return null;if(!I.Cc){if(I.ga==null){var Re;if(I.ga=new Fh,(Re=I.ga==null)||(Re=U.width*U.o,t(I.Gb.length==0),I.Gb=u(Re),I.Uc=0,I.Gb==null?Re=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,Re=1),Re=!Re),!Re){Re=I.ga;var Ie=I.Fa,Pe=I.P,je=I.qc,nt=I.mb,yt=I.nb,Et=Pe+1,dt=je-1,Ht=Re.l;if(t(Ie!=null&&nt!=null&&U!=null),dd[0]=null,dd[1]=Af,dd[2]=Vh,dd[3]=jc,Re.ca=nt,Re.tb=yt,Re.c=U.width,Re.i=U.height,t(0<Re.c&&0<Re.i),1>=je)U=0;else if(Re.$a=Ie[Pe+0]>>0&3,Re.Z=Ie[Pe+0]>>2&3,Re.Lc=Ie[Pe+0]>>4&3,Pe=Ie[Pe+0]>>6&3,0>Re.$a||1<Re.$a||4<=Re.Z||1<Re.Lc||Pe)U=0;else if(Ht.put=Pi,Ht.ac=br,Ht.bc=ki,Ht.ma=Re,Ht.width=U.width,Ht.height=U.height,Ht.Da=U.Da,Ht.v=U.v,Ht.va=U.va,Ht.j=U.j,Ht.o=U.o,Re.$a)e:{t(Re.$a==1),U=js();t:for(;;){if(U==null){U=0;break e}if(t(Re!=null),Re.mc=U,U.c=Re.c,U.i=Re.i,U.l=Re.l,U.l.ma=Re,U.l.width=Re.c,U.l.height=Re.i,U.a=0,Be(U.m,Ie,Et,dt),!ts(Re.c,Re.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&Zo(U.s)?(Re.ic=1,Ie=U.c*U.i,U.Ta=null,U.Ua=0,U.V=u(Ie),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(Re.ic=0,U=ws(U,Re.c)),!U))break t;U=1;break e}Re.mc=null,U=0}else U=dt>=Re.c*Re.i;Re=!U}if(Re)return null;I.ga.Lc!=1?I.Ga=0:ne=be-$}t(I.ga!=null),t($+ne<=be);e:{if(U=(Ie=I.ga).c,be=Ie.l.o,Ie.$a==0){if(Et=I.rc,dt=I.Vc,Ht=I.Fa,Pe=I.P+1+$*U,je=I.mb,nt=I.nb+$*U,t(Pe<=I.P+I.qc),Ie.Z!=0)for(t(dd[Ie.Z]!=null),Re=0;Re<ne;++Re)dd[Ie.Z](Et,dt,Ht,Pe,je,nt,U),Et=je,dt=nt,nt+=U,Pe+=U;else for(Re=0;Re<ne;++Re)s(je,nt,Ht,Pe,U),Et=je,dt=nt,nt+=U,Pe+=U;I.rc=Et,I.Vc=dt}else{if(t(Ie.mc!=null),U=$+ne,t((Re=Ie.mc)!=null),t(U<=Re.i),Re.C>=U)U=1;else if(Ie.ic||gt(),Ie.ic){Ie=Re.V,Et=Re.Ba,dt=Re.c;var Pt=Re.i,it=(Ht=1,Pe=Re.$/dt,je=Re.$%dt,nt=Re.m,yt=Re.s,Re.$),st=dt*Pt,$t=dt*U,ir=yt.wc,Jt=it<$t?uo(yt,je,Pe):null;t(it<=st),t(U<=Pt),t(Zo(yt));t:for(;;){for(;!nt.h&&it<$t;){if(je&ir||(Jt=uo(yt,je,Pe)),t(Jt!=null),Qe(nt),256>(Pt=_s(Jt.G[0],Jt.H[0],nt)))Ie[Et+it]=Pt,++it,++je>=dt&&(je=0,++Pe<=U&&!(Pe%16)&&hc(Re,Pe));else{if(!(280>Pt)){Ht=0;break t}Pt=$a(Pt-256,nt);var Ir,pr=_s(Jt.G[4],Jt.H[4],nt);if(Qe(nt),!(it>=(pr=ls(dt,pr=$a(pr,nt)))&&st-it>=Pt)){Ht=0;break t}for(Ir=0;Ir<Pt;++Ir)Ie[Et+it+Ir]=Ie[Et+it+Ir-pr];for(it+=Pt,je+=Pt;je>=dt;)je-=dt,++Pe<=U&&!(Pe%16)&&hc(Re,Pe);it<$t&&je&ir&&(Jt=uo(yt,je,Pe))}t(nt.h==Ue(nt))}hc(Re,Pe>U?U:Pe);break t}!Ht||nt.h&&it<st?(Ht=0,Re.a=nt.h?5:3):Re.$=it,U=Ht}else U=es(Re,Re.V,Re.Ba,Re.c,Re.i,U,Mc);if(!U){ne=0;break e}}$+ne>=be&&(I.Cc=1),ne=1}if(!ne)return null;if(I.Cc&&((ne=I.ga)!=null&&(ne.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+$*Ee}function j(I,U,$,ne,Ee,be){for(;0<Ee--;){var Re,Ie=I,Pe=U+($?1:0),je=I,nt=U+($?0:3);for(Re=0;Re<ne;++Re){var yt=je[nt+4*Re];yt!=255&&(yt*=32897,Ie[Pe+4*Re+0]=Ie[Pe+4*Re+0]*yt>>23,Ie[Pe+4*Re+1]=Ie[Pe+4*Re+1]*yt>>23,Ie[Pe+4*Re+2]=Ie[Pe+4*Re+2]*yt>>23)}U+=be}}function we(I,U,$,ne,Ee){for(;0<ne--;){var be;for(be=0;be<$;++be){var Re=I[U+2*be+0],Ie=15&(je=I[U+2*be+1]),Pe=4369*Ie,je=(240&je|je>>4)*Pe>>16;I[U+2*be+0]=(240&Re|Re>>4)*Pe>>16&240|(15&Re|Re<<4)*Pe>>16>>4&15,I[U+2*be+1]=240&je|Ie}U+=Ee}}function $e(I,U,$,ne,Ee,be,Re,Ie){var Pe,je,nt=255;for(je=0;je<Ee;++je){for(Pe=0;Pe<ne;++Pe){var yt=I[U+Pe];be[Re+4*Pe]=yt,nt&=yt}U+=$,Re+=Ie}return nt!=255}function Ye(I,U,$,ne,Ee){var be;for(be=0;be<Ee;++be)$[ne+be]=I[U+be]>>8}function gt(){Xa=j,mi=we,vi=$e,li=Ye}function Dt(I,U,$){Z[I]=function(ne,Ee,be,Re,Ie,Pe,je,nt,yt,Et,dt,Ht,Pt,it,st,$t,ir){var Jt,Ir=ir-1>>1,pr=Ie[Pe+0]|je[nt+0]<<16,sn=yt[Et+0]|dt[Ht+0]<<16;t(ne!=null);var wr=3*pr+sn+131074>>2;for(U(ne[Ee+0],255&wr,wr>>16,Pt,it),be!=null&&(wr=3*sn+pr+131074>>2,U(be[Re+0],255&wr,wr>>16,st,$t)),Jt=1;Jt<=Ir;++Jt){var di=Ie[Pe+Jt]|je[nt+Jt]<<16,xi=yt[Et+Jt]|dt[Ht+Jt]<<16,fi=pr+di+sn+xi+524296,Pn=fi+2*(di+sn)>>3;wr=Pn+pr>>1,pr=(fi=fi+2*(pr+xi)>>3)+di>>1,U(ne[Ee+2*Jt-1],255&wr,wr>>16,Pt,it+(2*Jt-1)*$),U(ne[Ee+2*Jt-0],255&pr,pr>>16,Pt,it+(2*Jt-0)*$),be!=null&&(wr=fi+sn>>1,pr=Pn+xi>>1,U(be[Re+2*Jt-1],255&wr,wr>>16,st,$t+(2*Jt-1)*$),U(be[Re+2*Jt+0],255&pr,pr>>16,st,$t+(2*Jt+0)*$)),pr=di,sn=xi}1&ir||(wr=3*pr+sn+131074>>2,U(ne[Ee+ir-1],255&wr,wr>>16,Pt,it+(ir-1)*$),be!=null&&(wr=3*sn+pr+131074>>2,U(be[Re+ir-1],255&wr,wr>>16,st,$t+(ir-1)*$)))}}function Gt(){_l[Bm]=Ww,_l[zh]=Za,_l[T0]=Gw,_l[ld]=us,_l[qh]=da,_l[lA]=As,_l[ka]=pg,_l[Lm]=Za,_l[mu]=us,_l[Pm]=da,_l[R0]=As}function Lr(I){return I&~L0?0>I?0:255:I>>b_}function Jr(I,U){return Lr((19077*I>>8)+(26149*U>>8)-14234)}function En(I,U,$){return Lr((19077*I>>8)-(6419*U>>8)-(13320*$>>8)+8708)}function On(I,U){return Lr((19077*I>>8)+(33050*U>>8)-17685)}function ci(I,U,$,ne,Ee){ne[Ee+0]=Jr(I,$),ne[Ee+1]=En(I,U,$),ne[Ee+2]=On(I,U)}function Ao(I,U,$,ne,Ee){ne[Ee+0]=On(I,U),ne[Ee+1]=En(I,U,$),ne[Ee+2]=Jr(I,$)}function So(I,U,$,ne,Ee){var be=En(I,U,$);U=be<<3&224|On(I,U)>>3,ne[Ee+0]=248&Jr(I,$)|be>>5,ne[Ee+1]=U}function ns(I,U,$,ne,Ee){var be=240&On(I,U)|15;ne[Ee+0]=240&Jr(I,$)|En(I,U,$)>>4,ne[Ee+1]=be}function ca(I,U,$,ne,Ee){ne[Ee+0]=255,ci(I,U,$,ne,Ee+1)}function $s(I,U,$,ne,Ee){Ao(I,U,$,ne,Ee),ne[Ee+3]=255}function Ss(I,U,$,ne,Ee){ci(I,U,$,ne,Ee),ne[Ee+3]=255}function gc(I,U){return 0>I?0:I>U?U:I}function du(I,U,$){Z[I]=function(ne,Ee,be,Re,Ie,Pe,je,nt,yt){for(var Et=nt+(-2&yt)*$;nt!=Et;)U(ne[Ee+0],be[Re+0],Ie[Pe+0],je,nt),U(ne[Ee+1],be[Re+0],Ie[Pe+0],je,nt+$),Ee+=2,++Re,++Pe,nt+=2*$;1&yt&&U(ne[Ee+0],be[Re+0],Ie[Pe+0],je,nt)}}function od(I,U,$){return $==0?I==0?U==0?6:5:U==0?4:0:$}function mc(I,U,$,ne,Ee){switch(I>>>30){case 3:pl(U,$,ne,Ee,0);break;case 2:Ri(U,$,ne,Ee);break;case 1:la(U,$,ne,Ee)}}function fu(I,U){var $,ne,Ee=U.M,be=U.Nb,Re=I.oc,Ie=I.pc+40,Pe=I.oc,je=I.pc+584,nt=I.oc,yt=I.pc+600;for($=0;16>$;++$)Re[Ie+32*$-1]=129;for($=0;8>$;++$)Pe[je+32*$-1]=129,nt[yt+32*$-1]=129;for(0<Ee?Re[Ie-1-32]=Pe[je-1-32]=nt[yt-1-32]=129:(c(Re,Ie-32-1,127,21),c(Pe,je-32-1,127,9),c(nt,yt-32-1,127,9)),ne=0;ne<I.za;++ne){var Et=U.ya[U.aa+ne];if(0<ne){for($=-1;16>$;++$)s(Re,Ie+32*$-4,Re,Ie+32*$+12,4);for($=-1;8>$;++$)s(Pe,je+32*$-4,Pe,je+32*$+4,4),s(nt,yt+32*$-4,nt,yt+32*$+4,4)}var dt=I.Gd,Ht=I.Hd+ne,Pt=Et.ad,it=Et.Hc;if(0<Ee&&(s(Re,Ie-32,dt[Ht].y,0,16),s(Pe,je-32,dt[Ht].f,0,8),s(nt,yt-32,dt[Ht].ea,0,8)),Et.Za){var st=Re,$t=Ie-32+16;for(0<Ee&&(ne>=I.za-1?c(st,$t,dt[Ht].y[15],4):s(st,$t,dt[Ht+1].y,0,4)),$=0;4>$;$++)st[$t+128+$]=st[$t+256+$]=st[$t+384+$]=st[$t+0+$];for($=0;16>$;++$,it<<=2)st=Re,$t=Ie+Vm[$],ua[Et.Ob[$]](st,$t),mc(it,Pt,16*+$,st,$t)}else if(st=od(ne,Ee,Et.Ob[0]),vu[st](Re,Ie),it!=0)for($=0;16>$;++$,it<<=2)mc(it,Pt,16*+$,Re,Ie+Vm[$]);for($=Et.Gc,st=od(ne,Ee,Et.Dd),Aa[st](Pe,je),Aa[st](nt,yt),it=Pt,st=Pe,$t=je,255&(Et=$>>0)&&(170&Et?mf(it,256,st,$t):_c(it,256,st,$t)),Et=nt,it=yt,255&($>>=8)&&(170&$?mf(Pt,320,Et,it):_c(Pt,320,Et,it)),Ee<I.Ub-1&&(s(dt[Ht].y,0,Re,Ie+480,16),s(dt[Ht].f,0,Pe,je+224,8),s(dt[Ht].ea,0,nt,yt+224,8)),$=8*be*I.B,dt=I.sa,Ht=I.ta+16*ne+16*be*I.R,Pt=I.qa,Et=I.ra+8*ne+$,it=I.Ha,st=I.Ia+8*ne+$,$=0;16>$;++$)s(dt,Ht+$*I.R,Re,Ie+32*$,16);for($=0;8>$;++$)s(Pt,Et+$*I.B,Pe,je+32*$,8),s(it,st+$*I.B,nt,yt+32*$,8)}}function sd(I,U,$,ne,Ee,be,Re,Ie,Pe){var je=[0],nt=[0],yt=0,Et=Pe!=null?Pe.kd:0,dt=Pe??new fl;if(I==null||12>$)return 7;dt.data=I,dt.w=U,dt.ha=$,U=[U],$=[$],dt.gb=[dt.gb];e:{var Ht=U,Pt=$,it=dt.gb;if(t(I!=null),t(Pt!=null),t(it!=null),it[0]=0,12<=Pt[0]&&!i(I,Ht[0],"RIFF")){if(i(I,Ht[0]+8,"WEBP")){it=3;break e}var st=Ot(I,Ht[0]+4);if(12>st||4294967286<st){it=3;break e}if(Et&&st>Pt[0]-8){it=7;break e}it[0]=st,Ht[0]+=12,Pt[0]-=12}it=0}if(it!=0)return it;for(st=0<dt.gb[0],$=$[0];;){e:{var $t=I;Pt=U,it=$;var ir=je,Jt=nt,Ir=Ht=[0];if((wr=yt=[yt])[0]=0,8>it[0])it=7;else{if(!i($t,Pt[0],"VP8X")){if(Ot($t,Pt[0]+4)!=10){it=3;break e}if(18>it[0]){it=7;break e}var pr=Ot($t,Pt[0]+8),sn=1+Rt($t,Pt[0]+12);if(2147483648<=sn*($t=1+Rt($t,Pt[0]+15))){it=3;break e}Ir!=null&&(Ir[0]=pr),ir!=null&&(ir[0]=sn),Jt!=null&&(Jt[0]=$t),Pt[0]+=18,it[0]-=18,wr[0]=1}it=0}}if(yt=yt[0],Ht=Ht[0],it!=0)return it;if(Pt=!!(2&Ht),!st&&yt)return 3;if(be!=null&&(be[0]=!!(16&Ht)),Re!=null&&(Re[0]=Pt),Ie!=null&&(Ie[0]=0),Re=je[0],Ht=nt[0],yt&&Pt&&Pe==null){it=0;break}if(4>$){it=7;break}if(st&&yt||!st&&!yt&&!i(I,U[0],"ALPH")){$=[$],dt.na=[dt.na],dt.P=[dt.P],dt.Sa=[dt.Sa];e:{pr=I,it=U,st=$;var wr=dt.gb;ir=dt.na,Jt=dt.P,Ir=dt.Sa,sn=22,t(pr!=null),t(st!=null),$t=it[0];var di=st[0];for(t(ir!=null),t(Ir!=null),ir[0]=null,Jt[0]=null,Ir[0]=0;;){if(it[0]=$t,st[0]=di,8>di){it=7;break e}var xi=Ot(pr,$t+4);if(4294967286<xi){it=3;break e}var fi=8+xi+1&-2;if(sn+=fi,0<wr&&sn>wr){it=3;break e}if(!i(pr,$t,"VP8 ")||!i(pr,$t,"VP8L")){it=0;break e}if(di[0]<fi){it=7;break e}i(pr,$t,"ALPH")||(ir[0]=pr,Jt[0]=$t+8,Ir[0]=xi),$t+=fi,di-=fi}}if($=$[0],dt.na=dt.na[0],dt.P=dt.P[0],dt.Sa=dt.Sa[0],it!=0)break}$=[$],dt.Ja=[dt.Ja],dt.xa=[dt.xa];e:if(wr=I,it=U,st=$,ir=dt.gb[0],Jt=dt.Ja,Ir=dt.xa,pr=it[0],$t=!i(wr,pr,"VP8 "),sn=!i(wr,pr,"VP8L"),t(wr!=null),t(st!=null),t(Jt!=null),t(Ir!=null),8>st[0])it=7;else{if($t||sn){if(wr=Ot(wr,pr+4),12<=ir&&wr>ir-12){it=3;break e}if(Et&&wr>st[0]-8){it=7;break e}Jt[0]=wr,it[0]+=8,st[0]-=8,Ir[0]=sn}else Ir[0]=5<=st[0]&&wr[pr+0]==47&&!(wr[pr+4]>>5),Jt[0]=st[0];it=0}if($=$[0],dt.Ja=dt.Ja[0],dt.xa=dt.xa[0],U=U[0],it!=0)break;if(4294967286<dt.Ja)return 3;if(Ie==null||Pt||(Ie[0]=dt.xa?2:1),Re=[Re],Ht=[Ht],dt.xa){if(5>$){it=7;break}Ie=Re,Et=Ht,Pt=be,I==null||5>$?I=0:5<=$&&I[U+0]==47&&!(I[U+4]>>5)?(st=[0],wr=[0],ir=[0],Be(Jt=new ve,I,U,$),kr(Jt,st,wr,ir)?(Ie!=null&&(Ie[0]=st[0]),Et!=null&&(Et[0]=wr[0]),Pt!=null&&(Pt[0]=ir[0]),I=1):I=0):I=0}else{if(10>$){it=7;break}Ie=Ht,I==null||10>$||!Tt(I,U+3,$-3)?I=0:(Et=I[U+0]|I[U+1]<<8|I[U+2]<<16,Pt=16383&(I[U+7]<<8|I[U+6]),I=16383&(I[U+9]<<8|I[U+8]),1&Et||3<(Et>>1&7)||!(Et>>4&1)||Et>>5>=dt.Ja||!Pt||!I?I=0:(Re&&(Re[0]=Pt),Ie&&(Ie[0]=I),I=1))}if(!I||(Re=Re[0],Ht=Ht[0],yt&&(je[0]!=Re||nt[0]!=Ht)))return 3;Pe!=null&&(Pe[0]=dt,Pe.offset=U-Pe.w,t(4294967286>U-Pe.w),t(Pe.offset==Pe.ha-$));break}return it==0||it==7&&yt&&Pe==null?(be!=null&&(be[0]|=dt.na!=null&&0<dt.na.length),ne!=null&&(ne[0]=Re),Ee!=null&&(Ee[0]=Ht),0):it}function Hh(I,U,$){var ne=U.width,Ee=U.height,be=0,Re=0,Ie=ne,Pe=Ee;if(U.Da=I!=null&&0<I.Da,U.Da&&(Ie=I.cd,Pe=I.bd,be=I.v,Re=I.j,11>$||(be&=-2,Re&=-2),0>be||0>Re||0>=Ie||0>=Pe||be+Ie>ne||Re+Pe>Ee))return 0;if(U.v=be,U.j=Re,U.va=be+Ie,U.o=Re+Pe,U.U=Ie,U.T=Pe,U.da=I!=null&&0<I.da,U.da){if(!vr(Ie,Pe,$=[I.ib],be=[I.hb]))return 0;U.ib=$[0],U.hb=be[0]}return U.ob=I!=null&&I.ob,U.Kb=I==null||!I.Sd,U.da&&(U.ob=U.ib<3*ne/4&&U.hb<3*Ee/4,U.Kb=0),1}function vc(I){if(I==null)return 2;if(11>I.S){var U=I.f.RGBA;U.fb+=(I.height-1)*U.A,U.A=-U.A}else U=I.f.kb,I=I.height,U.O+=(I-1)*U.fa,U.fa=-U.fa,U.N+=(I-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(I-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(I-1)*U.lb,U.lb=-U.lb);return 0}function Po(I,U,$,ne){if(ne==null||0>=I||0>=U)return 2;if($!=null){if($.Da){var Ee=$.cd,be=$.bd,Re=-2&$.v,Ie=-2&$.j;if(0>Re||0>Ie||0>=Ee||0>=be||Re+Ee>I||Ie+be>U)return 2;I=Ee,U=be}if($.da){if(!vr(I,U,Ee=[$.ib],be=[$.hb]))return 2;I=Ee[0],U=be[0]}}ne.width=I,ne.height=U;e:{var Pe=ne.width,je=ne.height;if(I=ne.S,0>=Pe||0>=je||!(I>=Bm&&13>I))I=2;else{if(0>=ne.Rd&&ne.sd==null){Re=be=Ee=U=0;var nt=(Ie=Pe*vg[I])*je;if(11>I||(be=(je+1)/2*(U=(Pe+1)/2),I==12&&(Re=(Ee=Pe)*je)),(je=u(nt+2*be+Re))==null){I=1;break e}ne.sd=je,11>I?((Pe=ne.f.RGBA).eb=je,Pe.fb=0,Pe.A=Ie,Pe.size=nt):((Pe=ne.f.kb).y=je,Pe.O=0,Pe.fa=Ie,Pe.Fd=nt,Pe.f=je,Pe.N=0+nt,Pe.Ab=U,Pe.Cd=be,Pe.ea=je,Pe.W=0+nt+be,Pe.Db=U,Pe.Ed=be,I==12&&(Pe.F=je,Pe.J=0+nt+2*be),Pe.Tc=Re,Pe.lb=Ee)}if(U=1,Ee=ne.S,be=ne.width,Re=ne.height,Ee>=Bm&&13>Ee)if(11>Ee)I=ne.f.RGBA,U&=(Ie=Math.abs(I.A))*(Re-1)+be<=I.size,U&=Ie>=be*vg[Ee],U&=I.eb!=null;else{I=ne.f.kb,Ie=(be+1)/2,nt=(Re+1)/2,Pe=Math.abs(I.fa),je=Math.abs(I.Ab);var yt=Math.abs(I.Db),Et=Math.abs(I.lb),dt=Et*(Re-1)+be;U&=Pe*(Re-1)+be<=I.Fd,U&=je*(nt-1)+Ie<=I.Cd,U=(U&=yt*(nt-1)+Ie<=I.Ed)&Pe>=be&je>=Ie&yt>=Ie,U&=I.y!=null,U&=I.f!=null,U&=I.ea!=null,Ee==12&&(U&=Et>=be,U&=dt<=I.Tc,U&=I.F!=null)}else U=0;I=U?0:2}}return I!=0||$!=null&&$.fd&&(I=vc(ne)),I}var bs=64,jh=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],df=24,Kh=32,ff=8,La=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];It("Predictor0","PredictorAdd0"),Z.Predictor0=function(){return 4278190080},Z.Predictor1=function(I){return I},Z.Predictor2=function(I,U,$){return U[$+0]},Z.Predictor3=function(I,U,$){return U[$+1]},Z.Predictor4=function(I,U,$){return U[$-1]},Z.Predictor5=function(I,U,$){return Bt(Bt(I,U[$+1]),U[$+0])},Z.Predictor6=function(I,U,$){return Bt(I,U[$-1])},Z.Predictor7=function(I,U,$){return Bt(I,U[$+0])},Z.Predictor8=function(I,U,$){return Bt(U[$-1],U[$+0])},Z.Predictor9=function(I,U,$){return Bt(U[$+0],U[$+1])},Z.Predictor10=function(I,U,$){return Bt(Bt(I,U[$-1]),Bt(U[$+0],U[$+1]))},Z.Predictor11=function(I,U,$){var ne=U[$+0];return 0>=zr(ne>>24&255,I>>24&255,(U=U[$-1])>>24&255)+zr(ne>>16&255,I>>16&255,U>>16&255)+zr(ne>>8&255,I>>8&255,U>>8&255)+zr(255&ne,255&I,255&U)?ne:I},Z.Predictor12=function(I,U,$){var ne=U[$+0];return(_r((I>>24&255)+(ne>>24&255)-((U=U[$-1])>>24&255))<<24|_r((I>>16&255)+(ne>>16&255)-(U>>16&255))<<16|_r((I>>8&255)+(ne>>8&255)-(U>>8&255))<<8|_r((255&I)+(255&ne)-(255&U)))>>>0},Z.Predictor13=function(I,U,$){var ne=U[$-1];return(ar((I=Bt(I,U[$+0]))>>24&255,ne>>24&255)<<24|ar(I>>16&255,ne>>16&255)<<16|ar(I>>8&255,ne>>8&255)<<8|ar(I>>0&255,ne>>0&255))>>>0};var ad=Z.PredictorAdd0;Z.PredictorAdd1=Xr,It("Predictor2","PredictorAdd2"),It("Predictor3","PredictorAdd3"),It("Predictor4","PredictorAdd4"),It("Predictor5","PredictorAdd5"),It("Predictor6","PredictorAdd6"),It("Predictor7","PredictorAdd7"),It("Predictor8","PredictorAdd8"),It("Predictor9","PredictorAdd9"),It("Predictor10","PredictorAdd10"),It("Predictor11","PredictorAdd11"),It("Predictor12","PredictorAdd12"),It("Predictor13","PredictorAdd13");var Ya=Z.PredictorAdd2;er("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),er("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var hf,Kc=Z.ColorIndexInverseTransform,Wh=Z.MapARGB,pf=Z.VP8LColorIndexInverseTransformAlpha,Nm=Z.MapAlpha,sA=Z.VP8LPredictorsAdd=[];sA.length=16,(Z.VP8LPredictors=[]).length=16,(Z.VP8LPredictorsAdd_C=[]).length=16,(Z.VP8LPredictors_C=[]).length=16;var cd,fo,Pa,aA,bo,hl,gf,pl,Ri,mf,la,_c,vf,Gh,_f,yf,cA,hu,Wc,_t,gl,pu,Ef,Gc,Xa,mi,vi,li,io=u(511),Cs=u(2041),ml=u(225),$h=u(767),fg=0,gu=Cs,wf=ml,zs=$h,Ja=io,Bm=0,zh=1,T0=2,ld=3,qh=4,lA=5,ka=6,Lm=7,mu=8,Pm=9,R0=10,jw=[2,3,7],km=[3,3,11],Dm=[280,256,256,256,40],Yh=[0,1,1,1,0],hg=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],I0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],xm=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],O0=8,ud=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Um=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vl=null,Ad=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Sf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],E_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],w_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],N0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vu=[],ua=[],Aa=[],Kw=1,S_=2,dd=[],_l=[];Dt("UpsampleRgbLinePair",ci,3),Dt("UpsampleBgrLinePair",Ao,3),Dt("UpsampleRgbaLinePair",Ss,4),Dt("UpsampleBgraLinePair",$s,4),Dt("UpsampleArgbLinePair",ca,4),Dt("UpsampleRgba4444LinePair",ns,2),Dt("UpsampleRgb565LinePair",So,2);var Ww=Z.UpsampleRgbLinePair,Gw=Z.UpsampleBgrLinePair,Za=Z.UpsampleRgbaLinePair,us=Z.UpsampleBgraLinePair,da=Z.UpsampleArgbLinePair,As=Z.UpsampleRgba4444LinePair,pg=Z.UpsampleRgb565LinePair,bf=16,_u=1<<bf-1,Cf=-227,B0=482,b_=6,L0=(256<<b_)-1,Mm=0,Fm=u(256),P0=u(256),k0=u(256),D0=u(256),Zh=u(B0-Cf),C_=u(B0-Cf);du("YuvToRgbRow",ci,3),du("YuvToBgrRow",Ao,3),du("YuvToRgbaRow",Ss,4),du("YuvToBgraRow",$s,4),du("YuvToArgbRow",ca,4),du("YuvToRgba4444Row",ns,2),du("YuvToRgb565Row",So,2);var Vm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gg=[0,2,8],mg=[8,7,6,4,4,2,2,2,1,1,1,1],$w=1;this.WebPDecodeRGBA=function(I,U,$,ne,Ee){var be=zh,Re=new Mh,Ie=new Ei;Re.ba=Ie,Ie.S=be,Ie.width=[Ie.width],Ie.height=[Ie.height];var Pe=Ie.width,je=Ie.height,nt=new ti;if(nt==null||I==null)var yt=2;else t(nt!=null),yt=sd(I,U,$,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(yt!=0?Pe=0:(Pe!=null&&(Pe[0]=nt.width[0]),je!=null&&(je[0]=nt.height[0]),Pe=1),Pe){Ie.width=Ie.width[0],Ie.height=Ie.height[0],ne!=null&&(ne[0]=Ie.width),Ee!=null&&(Ee[0]=Ie.height);e:{if(ne=new Ge,(Ee=new fl).data=I,Ee.w=U,Ee.ha=$,Ee.kd=1,U=[0],t(Ee!=null),((I=sd(Ee.data,Ee.w,Ee.ha,null,null,null,U,null,Ee))==0||I==7)&&U[0]&&(I=4),(U=I)==0){if(t(Re!=null),ne.data=Ee.data,ne.w=Ee.w+Ee.offset,ne.ha=Ee.ha-Ee.offset,ne.put=Pi,ne.ac=br,ne.bc=ki,ne.ma=Re,Ee.xa){if((I=js())==null){Re=1;break e}if(function(Et,dt){var Ht=[0],Pt=[0],it=[0];t:for(;;){if(Et==null)return 0;if(dt==null)return Et.a=2,0;if(Et.l=dt,Et.a=0,Be(Et.m,dt.data,dt.w,dt.ha),!kr(Et.m,Ht,Pt,it)){Et.a=3;break t}if(Et.xb=S_,dt.width=Ht[0],dt.height=Pt[0],!ts(Ht[0],Pt[0],1,Et,null))break t;return 1}return t(Et.a!=0),0}(I,ne)){if(ne=(U=Po(ne.width,ne.height,Re.Oa,Re.ba))==0){t:{ne=I;r:for(;;){if(ne==null){ne=0;break t}if(t(ne.s.yc!=null),t(ne.s.Ya!=null),t(0<ne.s.Wb),t(($=ne.l)!=null),t((Ee=$.ma)!=null),ne.xb!=0){if(ne.ca=Ee.ba,ne.tb=Ee.tb,t(ne.ca!=null),!Hh(Ee.Oa,$,ld)){ne.a=2;break r}if(!ws(ne,$.width)||$.da)break r;if(($.da||rn(ne.ca.S))&&gt(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&gt()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!Ft(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break r}ne.xb=0}if(!es(ne,ne.V,ne.Ba,ne.c,ne.i,$.o,Uc))break r;Ee.Dc=ne.Ma,ne=1;break t}t(ne.a!=0),ne=0}ne=!ne}ne&&(U=I.a)}else U=I.a}else{if((I=new Ut)==null){Re=1;break e}if(I.Fa=Ee.na,I.P=Ee.P,I.qc=Ee.Sa,lr(I,ne)){if((U=Po(ne.width,ne.height,Re.Oa,Re.ba))==0){if(I.Aa=0,$=Re.Oa,t((Ee=I)!=null),$!=null){if(0<(Pe=0>(Pe=$.Md)?0:100<Pe?255:255*Pe/100)){for(je=nt=0;4>je;++je)12>(yt=Ee.pb[je]).lc&&(yt.ia=Pe*mg[0>yt.lc?0:yt.lc]>>3),nt|=yt.ia;nt&&(alert("todo:VP8InitRandom"),Ee.ia=1)}Ee.Ga=$.Id,100<Ee.Ga?Ee.Ga=100:0>Ee.Ga&&(Ee.Ga=0)}Bn(I,ne)||(U=I.a)}}else U=I.a}U==0&&Re.Oa!=null&&Re.Oa.fd&&(U=vc(Re.ba))}Re=U}be=Re!=0?null:11>be?Ie.f.RGBA.eb:Ie.f.kb.y}else be=null;return be};var vg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function E(Z,pe){for(var Y="",te=0;te<4;te++)Y+=String.fromCharCode(Z[pe++]);return Y}function w(Z,pe){return(Z[pe+0]<<0|Z[pe+1]<<8|Z[pe+2]<<16)>>>0}function T(Z,pe){return(Z[pe+0]<<0|Z[pe+1]<<8|Z[pe+2]<<16|Z[pe+3]<<24)>>>0}new m;var N=[0],O=[0],P=[],M=new m,Q=e,k=function(Z,pe){var Y={},te=0,le=!1,ae=0,ge=0;if(Y.frames=[],!function(Oe,Ue,Fe,Qe){for(var We=0;We<Qe;We++)if(Oe[Ue+We]!=Fe.charCodeAt(We))return!0;return!1}(Z,pe,"RIFF",4)){for(T(Z,pe+=4),pe+=8;pe<Z.length;){var se=E(Z,pe),xe=T(Z,pe+=4);pe+=4;var Me=xe+(1&xe);switch(se){case"VP8 ":case"VP8L":Y.frames[te]===void 0&&(Y.frames[te]={}),(Ke=Y.frames[te]).src_off=le?ge:pe-8,Ke.src_size=ae+xe+8,te++,le&&(le=!1,ae=0,ge=0);break;case"VP8X":(Ke=Y.header={}).feature_flags=Z[pe];var Be=pe+4;Ke.canvas_width=1+w(Z,Be),Be+=3,Ke.canvas_height=1+w(Z,Be),Be+=3;break;case"ALPH":le=!0,ae=Me+8,ge=pe-8;break;case"ANIM":(Ke=Y.header).bgcolor=T(Z,pe),Be=pe+4,Ke.loop_count=(ht=Z)[(ve=Be)+0]<<0|ht[ve+1]<<8,Be+=2;break;case"ANMF":var ke,Ke;(Ke=Y.frames[te]={}).offset_x=2*w(Z,pe),pe+=3,Ke.offset_y=2*w(Z,pe),pe+=3,Ke.width=1+w(Z,pe),pe+=3,Ke.height=1+w(Z,pe),pe+=3,Ke.duration=w(Z,pe),pe+=3,ke=Z[pe++],Ke.dispose=1&ke,Ke.blend=ke>>1&1}se!="ANMF"&&(pe+=Me)}var ht,ve;return Y}}(Q,0);k.response=Q,k.rgbaoutput=!0,k.dataurl=!1;var D=k.header?k.header:null,V=k.frames?k.frames:null;if(D){D.loop_counter=D.loop_count,N=[D.canvas_height],O=[D.canvas_width];for(var K=0;K<V.length&&V[K].blend!=0;K++);}var J=V[0],ie=M.WebPDecodeRGBA(Q,J.src_off,J.src_size,O,N);J.rgba=ie,J.imgwidth=O[0],J.imgheight=N[0];for(var fe=0;fe<O[0]*N[0]*4;fe++)P[fe]=ie[fe];return this.width=O,this.height=N,this.data=P,this}(function(e){var t=function(){return typeof r8=="function"},i=function(N,O,P,M){var Q=4,k=f;switch(M){case e.image_compression.FAST:Q=1,k=u;break;case e.image_compression.MEDIUM:Q=6,k=p;break;case e.image_compression.SLOW:Q=9,k=m}N=s(N,O,P,k);var D=r8(N,{level:Q});return e.__addimage__.arrayBufferToBinaryString(D)},s=function(N,O,P,M){for(var Q,k,D,V=N.length/O,K=new Uint8Array(N.length+V),J=w(),ie=0;ie<V;ie+=1){if(D=ie*O,Q=N.subarray(D,D+O),M)K.set(M(Q,P,k),D+ie);else{for(var fe,Z=J.length,pe=[];fe<Z;fe+=1)pe[fe]=J[fe](Q,P,k);var Y=T(pe.concat());K.set(pe[Y],D+ie)}k=Q}return K},c=function(N){var O=Array.apply([],N);return O.unshift(0),O},u=function(N,O){var P,M=[],Q=N.length;M[0]=1;for(var k=0;k<Q;k+=1)P=N[k-O]||0,M[k+1]=N[k]-P+256&255;return M},f=function(N,O,P){var M,Q=[],k=N.length;Q[0]=2;for(var D=0;D<k;D+=1)M=P&&P[D]||0,Q[D+1]=N[D]-M+256&255;return Q},p=function(N,O,P){var M,Q,k=[],D=N.length;k[0]=3;for(var V=0;V<D;V+=1)M=N[V-O]||0,Q=P&&P[V]||0,k[V+1]=N[V]+256-(M+Q>>>1)&255;return k},m=function(N,O,P){var M,Q,k,D,V=[],K=N.length;V[0]=4;for(var J=0;J<K;J+=1)M=N[J-O]||0,Q=P&&P[J]||0,k=P&&P[J-O]||0,D=E(M,Q,k),V[J+1]=N[J]-D+256&255;return V},E=function(N,O,P){if(N===O&&O===P)return N;var M=Math.abs(O-P),Q=Math.abs(N-P),k=Math.abs(N+O-P-P);return M<=Q&&M<=k?N:Q<=k?O:P},w=function(){return[c,u,f,p,m]},T=function(N){var O=N.map(function(P){return P.reduce(function(M,Q){return M+Math.abs(Q)},0)});return O.indexOf(Math.min.apply(null,O))};e.processPNG=function(N,O,P,M){var Q,k,D,V,K,J,ie,fe,Z,pe,Y,te,le,ae,ge,se=this.decode.FLATE_DECODE,xe="";if(this.__addimage__.isArrayBuffer(N)&&(N=new Uint8Array(N)),this.__addimage__.isArrayBufferView(N)){if(N=(D=new oWe(N)).imgData,k=D.bits,Q=D.colorSpace,K=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){Z=(fe=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,Y=new Uint8Array(Z*D.colors),pe=new Uint8Array(Z);var Me,Be=D.pixelBitlength-D.bits;for(ae=0,ge=0;ae<Z;ae++){for(le=fe[ae],Me=0;Me<Be;)Y[ge++]=le>>>Me&255,Me+=D.bits;pe[ae]=le>>>Me&255}}if(D.bits===16){Z=(fe=new Uint32Array(D.decodePixels().buffer)).length,Y=new Uint8Array(Z*(32/D.pixelBitlength)*D.colors),pe=new Uint8Array(Z*(32/D.pixelBitlength)),te=D.colors>1,ae=0,ge=0;for(var ke=0;ae<Z;)le=fe[ae++],Y[ge++]=le>>>0&255,te&&(Y[ge++]=le>>>16&255,le=fe[ae++],Y[ge++]=le>>>0&255),pe[ke++]=le>>>16&255;k=8}M!==e.image_compression.NONE&&t()?(N=i(Y,D.width*D.colors,D.colors,M),ie=i(pe,D.width,1,M)):(N=Y,ie=pe,se=void 0)}if(D.colorType===3&&(Q=this.color_spaces.INDEXED,J=D.palette,D.transparency.indexed)){var Ke=D.transparency.indexed,ht=0;for(ae=0,Z=Ke.length;ae<Z;++ae)ht+=Ke[ae];if((ht/=255)===Z-1&&Ke.indexOf(0)!==-1)V=[Ke.indexOf(0)];else if(ht!==Z){for(fe=D.decodePixels(),pe=new Uint8Array(fe.length),ae=0,Z=fe.length;ae<Z;ae++)pe[ae]=Ke[fe[ae]];ie=i(pe,D.width,1)}}var ve=function(Oe){var Ue;switch(Oe){case e.image_compression.FAST:Ue=11;break;case e.image_compression.MEDIUM:Ue=13;break;case e.image_compression.SLOW:Ue=14;break;default:Ue=12}return Ue}(M);return se===this.decode.FLATE_DECODE&&(xe="/Predictor "+ve+" "),xe+="/Colors "+K+" /BitsPerComponent "+k+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),(ie&&this.__addimage__.isArrayBuffer(ie)||this.__addimage__.isArrayBufferView(ie))&&(ie=this.__addimage__.arrayBufferToBinaryString(ie)),{alias:P,data:N,index:O,filter:se,decodeParameters:xe,transparency:V,palette:J,sMask:ie,predictor:ve,width:D.width,height:D.height,bitsPerComponent:k,colorSpace:Q}}}})(Rn.API),function(e){e.processGIF89A=function(t,i,s,c){var u=new sWe(t),f=u.width,p=u.height,m=[];u.decodeAndBlitFrameRGBA(0,m);var E={data:m,width:f,height:p},w=new Q4(100).encode(E,100);return e.processJPEG.call(this,w,i,s,c)},e.processGIF87A=e.processGIF89A}(Rn.API),oh.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:c,green:s,blue:i,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},oh.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(i){jo.log("bit decode error:"+i)}},oh.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),i=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,c=0;c<t;c++)for(var u=this.datav.getUint8(this.pos++,!0),f=s*this.width*4+8*c*4,p=0;p<8&&8*c+p<this.width;p++){var m=this.palette[u>>7-p&1];this.data[f+4*p]=m.blue,this.data[f+4*p+1]=m.green,this.data[f+4*p+2]=m.red,this.data[f+4*p+3]=255}i!==0&&(this.pos+=4-i)}},oh.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,c=0;c<e;c++){var u=this.datav.getUint8(this.pos++,!0),f=s*this.width*4+2*c*4,p=u>>4,m=15&u,E=this.palette[p];if(this.data[f]=E.blue,this.data[f+1]=E.green,this.data[f+2]=E.red,this.data[f+3]=255,2*c+1>=this.width)break;E=this.palette[m],this.data[f+4]=E.blue,this.data[f+4+1]=E.green,this.data[f+4+2]=E.red,this.data[f+4+3]=255}t!==0&&(this.pos+=4-t)}},oh.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var c=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+4*s;if(c<this.palette.length){var f=this.palette[c];this.data[u]=f.red,this.data[u+1]=f.green,this.data[u+2]=f.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}e!==0&&(this.pos+=4-e)}},oh.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,c=0;c<this.width;c++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(u&t)/t*255|0,p=(u>>5&t)/t*255|0,m=(u>>10&t)/t*255|0,E=u>>15?255:0,w=s*this.width*4+4*c;this.data[w]=m,this.data[w+1]=p,this.data[w+2]=f,this.data[w+3]=E}this.pos+=e}},oh.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),i=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var c=this.bottom_up?s:this.height-1-s,u=0;u<this.width;u++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(f&t)/t*255|0,m=(f>>5&i)/i*255|0,E=(f>>11)/t*255|0,w=c*this.width*4+4*u;this.data[w]=E,this.data[w+1]=m,this.data[w+2]=p,this.data[w+3]=255}this.pos+=e}},oh.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*i;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=s,this.data[f+3]=255}this.pos+=this.width%4}},oh.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),p=t*this.width*4+4*i;this.data[p]=u,this.data[p+1]=c,this.data[p+2]=s,this.data[p+3]=f}},oh.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,i,s,c){var u=new oh(t,!1),f=u.width,p=u.height,m={data:u.getData(),width:f,height:p},E=new Q4(100).encode(m,100);return e.processJPEG.call(this,E,i,s,c)}}(Rn.API),uie.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,i,s,c){var u=new uie(t),f=u.width,p=u.height,m={data:u.getData(),width:f,height:p},E=new Q4(100).encode(m,100);return e.processJPEG.call(this,E,i,s,c)}}(Rn.API),Rn.API.processRGBA=function(e,t,i){for(var s=e.data,c=s.length,u=new Uint8Array(c/4*3),f=new Uint8Array(c/4),p=0,m=0,E=0;E<c;E+=4){var w=s[E],T=s[E+1],N=s[E+2],O=s[E+3];u[p++]=w,u[p++]=T,u[p++]=N,f[m++]=O}var P=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(f),data:P,index:t,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gE=Rn.API,aN=gE.getCharWidthsArray=function(e,t){var i,s,c=(t=t||{}).font||this.internal.getFont(),u=t.fontSize||this.internal.getFontSize(),f=t.charSpace||this.internal.getCharSpace(),p=t.widths?t.widths:c.metadata.Unicode.widths,m=p.fof?p.fof:1,E=t.kerning?t.kerning:c.metadata.Unicode.kerning,w=E.fof?E.fof:1,T=t.doKerning!==!1,N=0,O=e.length,P=0,M=p[0]||m,Q=[];for(i=0;i<O;i++)s=e.charCodeAt(i),typeof c.metadata.widthOfString=="function"?Q.push((c.metadata.widthOfGlyph(c.metadata.characterToGlyph(s))+f*(1e3/u)||0)/1e3):(N=T&&_o(E[s])==="object"&&!isNaN(parseInt(E[s][P],10))?E[s][P]/w:0,Q.push((p[s]||M)/m+N)),P=s;return Q},sie=gE.getStringUnitWidth=function(e,t){var i=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),c=t.charSpace||this.internal.getCharSpace();return gE.processArabic&&(e=gE.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,i,c)/i:aN.apply(this,arguments).reduce(function(u,f){return u+f},0)},aie=function(e,t,i,s){for(var c=[],u=0,f=e.length,p=0;u!==f&&p+t[u]<i;)p+=t[u],u++;c.push(e.slice(0,u));var m=u;for(p=0;u!==f;)p+t[u]>s&&(c.push(e.slice(m,u)),p=0,m=u),p+=t[u],u++;return m!==u&&c.push(e.slice(m,u)),c},cie=function(e,t,i){i||(i={});var s,c,u,f,p,m,E,w=[],T=[w],N=i.textIndent||0,O=0,P=0,M=e.split(" "),Q=aN.apply(this,[" ",i])[0];if(m=i.lineIndent===-1?M[0].length+2:i.lineIndent||0){var k=Array(m).join(" "),D=[];M.map(function(K){(K=K.split(/\s*\n/)).length>1?D=D.concat(K.map(function(J,ie){return(ie&&J.length?`
`:"")+J})):D.push(K[0])}),M=D,m=sie.apply(this,[k,i])}for(u=0,f=M.length;u<f;u++){var V=0;if(s=M[u],m&&s[0]==`
`&&(s=s.substr(1),V=1),N+O+(P=(c=aN.apply(this,[s,i])).reduce(function(K,J){return K+J},0))>t||V){if(P>t){for(p=aie.apply(this,[s,c,t-(N+O),t]),w.push(p.shift()),w=[p.pop()];p.length;)T.push([p.shift()]);P=c.slice(s.length-(w[0]?w[0].length:0)).reduce(function(K,J){return K+J},0)}else w=[s];T.push(w),N=P+m,O=Q}else w.push(s),N+=O+P,O=Q}return E=m?function(K,J){return(J?k:"")+K.join(" ")}:function(K){return K.join(" ")},T.map(E)},gE.splitTextToSize=function(e,t,i){var s,c=(i=i||{}).fontSize||this.internal.getFontSize(),u=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var T=this.internal.getFont(w.fontName,w.fontStyle);return T.metadata.Unicode?{widths:T.metadata.Unicode.widths||{0:1},kerning:T.metadata.Unicode.kerning||{}}:{font:T.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var f=1*this.internal.scaleFactor*t/c;u.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/c:0,u.lineIndent=i.lineIndent;var p,m,E=[];for(p=0,m=s.length;p<m;p++)E=E.concat(cie.apply(this,[s[p],f,u]));return E},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",i={},s={},c=0;c<t.length;c++)i[t[c]]="0123456789abcdef"[c],s["0123456789abcdef"[c]]=t[c];var u=function(T){return"0x"+parseInt(T,10).toString(16)},f=e.__fontmetrics__.compress=function(T){var N,O,P,M,Q=["{"];for(var k in T){if(N=T[k],isNaN(parseInt(k,10))?O="'"+k+"'":(k=parseInt(k,10),O=(O=u(k).slice(2)).slice(0,-1)+s[O.slice(-1)]),typeof N=="number")N<0?(P=u(N).slice(3),M="-"):(P=u(N).slice(2),M=""),P=M+P.slice(0,-1)+s[P.slice(-1)];else{if(_o(N)!=="object")throw new Error("Don't know what to do with value type "+_o(N)+".");P=f(N)}Q.push(O+P)}return Q.push("}"),Q.join("")},p=e.__fontmetrics__.uncompress=function(T){if(typeof T!="string")throw new Error("Invalid argument passed to uncompress.");for(var N,O,P,M,Q={},k=1,D=Q,V=[],K="",J="",ie=T.length-1,fe=1;fe<ie;fe+=1)(M=T[fe])=="'"?N?(P=N.join(""),N=void 0):N=[]:N?N.push(M):M=="{"?(V.push([D,P]),D={},P=void 0):M=="}"?((O=V.pop())[0][O[1]]=D,P=void 0,D=O[0]):M=="-"?k=-1:P===void 0?i.hasOwnProperty(M)?(K+=i[M],P=parseInt(K,16)*k,k=1,K=""):K+=M:i.hasOwnProperty(M)?(J+=i[M],D[P]=parseInt(J,16)*k,k=1,P=void 0,J=""):J+=M;return Q},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},E={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},w={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(T){var N=T.font,O=w.Unicode[N.postScriptName];O&&(N.metadata.Unicode={},N.metadata.Unicode.widths=O.widths,N.metadata.Unicode.kerning=O.kerning);var P=E.Unicode[N.postScriptName];P&&(N.metadata.Unicode.encoding=P,N.encoding=P.codePages[0])}])}(Rn.API),function(e){var t=function(i){for(var s=i.length,c=new Uint8Array(s),u=0;u<s;u++)c[u]=i.charCodeAt(u);return c};e.API.events.push(["addFont",function(i){var s=void 0,c=i.font,u=i.instance;if(!c.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");if(typeof(s=u.existsFileInVFS(c.postScriptName)===!1?u.loadFile(c.postScriptName):u.getFileFromVFS(c.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");(function(f,p){p=/^\x00\x01\x00\x00/.test(p)?t(p):t(VC(p)),f.metadata=e.API.TTFFont.open(p),f.metadata.Unicode=f.metadata.Unicode||{encoding:{},kerning:{},widths:[]},f.metadata.glyIdsUsed=[0]})(c,s)}}])}(Rn),function(e){function t(){return(In.canvg?Promise.resolve(In.canvg):X6(()=>import("./index.es-faa1cfba.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Rn.API.addSvgAsImage=function(i,s,c,u,f,p,m,E){if(isNaN(s)||isNaN(c))throw jo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(f))throw jo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=u,w.height=f;var T=w.getContext("2d");T.fillStyle="#fff",T.fillRect(0,0,w.width,w.height);var N={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},O=this;return t().then(function(P){return P.fromString(T,i,N)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(N)}).then(function(){O.addImage(w.toDataURL("image/jpeg",1),s,c,u,f,m,E)})}}(),Rn.API.putTotalPages=function(e){var t,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var c=0;c<this.internal.pages[s].length;c++)this.internal.pages[s][c]=this.internal.pages[s][c].replace(t,i);return this},Rn.API.viewerPreferences=function(e,t){var i;e=e||{},t=t||!1;var s,c,u,f={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(f),m=[],E=0,w=0,T=0;function N(P,M){var Q,k=!1;for(Q=0;Q<P.length;Q+=1)P[Q]===M&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(f)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var O=p.length;for(T=0;T<O;T+=1)i[p[T]].value=i[p[T]].defaultValue,i[p[T]].explicitSet=!1}if(_o(e)==="object"){for(c in e)if(u=e[c],N(p,c)&&u!==void 0){if(i[c].type==="boolean"&&typeof u=="boolean")i[c].value=u;else if(i[c].type==="name"&&N(i[c].valueSet,u))i[c].value=u;else if(i[c].type==="integer"&&Number.isInteger(u))i[c].value=u;else if(i[c].type==="array"){for(E=0;E<u.length;E+=1)if(s=!0,u[E].length===1&&typeof u[E][0]=="number")m.push(String(u[E]-1));else if(u[E].length>1){for(w=0;w<u[E].length;w+=1)typeof u[E][w]!="number"&&(s=!1);s===!0&&m.push([u[E][0]-1,u[E][1]-1].join(" "))}i[c].value="["+m.join(" ")+"]"}else i[c].value=i[c].defaultValue;i[c].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,M=[];for(P in i)i[P].explicitSet===!0&&(i[P].type==="name"?M.push("/"+P+" /"+i[P].value):M.push("/"+P+" "+i[P].value));M.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+M.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',c=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(s)),f=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),E=u.length+f.length+p.length+c.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+E+" >>"),this.internal.write("stream"),this.internal.write(c+u+f+p+m),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,c){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:c||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",t)),this}}(Rn.API),function(e){var t=e.API,i=t.pdfEscape16=function(u,f){for(var p,m=f.metadata.Unicode.widths,E=["","0","00","000","0000"],w=[""],T=0,N=u.length;T<N;++T){if(p=f.metadata.characterToGlyph(u.charCodeAt(T)),f.metadata.glyIdsUsed.push(p),f.metadata.toUnicode[p]=u.charCodeAt(T),m.indexOf(p)==-1&&(m.push(p),m.push([parseInt(f.metadata.widthOfGlyph(p),10)])),p=="0")return w.join("");p=p.toString(16),w.push(E[4-p.length],p)}return w.join("")},s=function(u){var f,p,m,E,w,T,N;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],T=0,N=(p=Object.keys(u).sort(function(O,P){return O-P})).length;T<N;T++)f=p[T],m.length>=100&&(w+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),u[f]!==void 0&&u[f]!==null&&typeof u[f].toString=="function"&&(E=("0000"+u[f].toString(16)).slice(-4),f=("0000"+(+f).toString(16)).slice(-4),m.push("<"+f+"><"+E+">"));return m.length&&(w+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(u){(function(f){var p=f.font,m=f.out,E=f.newObject,w=f.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="Identity-H"){for(var T=p.metadata.Unicode.widths,N=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),O="",P=0;P<N.length;P++)O+=String.fromCharCode(N[P]);var M=E();w({data:O,addLength1:!0,objectId:M}),m("endobj");var Q=E();w({data:s(p.metadata.toUnicode),addLength1:!0,objectId:Q}),m("endobj");var k=E();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+NE(p.fontName)),m("/FontFile2 "+M+" 0 R"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/Flags "+p.metadata.flags),m("/StemV "+p.metadata.stemV),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m(">>"),m("endobj");var D=E();m("<<"),m("/Type /Font"),m("/BaseFont /"+NE(p.fontName)),m("/FontDescriptor "+k+" 0 R"),m("/W "+e.API.PDFObject.convert(T)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+p.encoding+")"),m(">>"),m(">>"),m("endobj"),p.objectNumber=E(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+Q+" 0 R"),m("/BaseFont /"+NE(p.fontName)),m("/Encoding /"+p.encoding),m("/DescendantFonts ["+D+" 0 R]"),m(">>"),m("endobj"),p.isAlreadyPutted=!0}})(u)}]),t.events.push(["putFont",function(u){(function(f){var p=f.font,m=f.out,E=f.newObject,w=f.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var T=p.metadata.rawData,N="",O=0;O<T.length;O++)N+=String.fromCharCode(T[O]);var P=E();w({data:N,addLength1:!0,objectId:P}),m("endobj");var M=E();w({data:s(p.metadata.toUnicode),addLength1:!0,objectId:M}),m("endobj");var Q=E();m("<<"),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m("/StemV "+p.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+P+" 0 R"),m("/Flags 96"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/FontName /"+NE(p.fontName)),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m(">>"),m("endobj"),p.objectNumber=E();for(var k=0;k<p.metadata.hmtx.widths.length;k++)p.metadata.hmtx.widths[k]=parseInt(p.metadata.hmtx.widths[k]*(1e3/p.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+M+" 0 R/BaseFont/"+NE(p.fontName)+"/FontDescriptor "+Q+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),m("endobj"),p.isAlreadyPutted=!0}})(u)}]);var c=function(u){var f,p=u.text||"",m=u.x,E=u.y,w=u.options||{},T=u.mutex||{},N=T.pdfEscape,O=T.activeFontKey,P=T.fonts,M=O,Q="",k=0,D="",V=P[M].encoding;if(P[M].encoding!=="Identity-H")return{text:p,x:m,y:E,options:w,mutex:T};for(D=p,M=O,Array.isArray(p)&&(D=p[0]),k=0;k<D.length;k+=1)P[M].metadata.hasOwnProperty("cmap")&&(f=P[M].metadata.cmap.unicode.codeMap[D[k].charCodeAt(0)]),f||D[k].charCodeAt(0)<256&&P[M].metadata.hasOwnProperty("Unicode")?Q+=D[k]:Q+="";var K="";return parseInt(M.slice(1))<14||V==="WinAnsiEncoding"?K=N(Q,M).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(K=i(Q,P[M])),T.isHex=!0,{text:K,x:m,y:E,options:w,mutex:T}};t.events.push(["postProcessText",function(u){var f=u.text||"",p=[],m={text:f,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(f)){var E=0;for(E=0;E<f.length;E+=1)Array.isArray(f[E])&&f[E].length===3?p.push([c(Object.assign({},m,{text:f[E][0]})).text,f[E][1],f[E][2]]):p.push(c(Object.assign({},m,{text:f[E]})).text);u.text=p}else u.text=c(Object.assign({},m,{text:f})).text}])}(Rn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0},e.addFileToVFS=function(i,s){return t.call(this),this.internal.vFS[i]=s,this},e.getFileFromVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Rn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var c,u,f,p,m,E,w,T=t,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],O=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},M={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Q=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,V=0;this.__bidiEngine__={};var K=function(te){var le=te.charCodeAt(),ae=le>>8,ge=M[ae];return ge!==void 0?T[256*ge+(255&le)]:ae===252||ae===253?"AL":k.test(ae)?"L":ae===8?"R":"N"},J=function(te){for(var le,ae=0;ae<te.length;ae++){if((le=K(te.charAt(ae)))==="L")return!1;if(le==="R")return!0}return!1},ie=function(te,le,ae,ge){var se,xe,Me,Be,ke=le[ge];switch(ke){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(ke="AN");break;case"AL":D=!0,ke="R";break;case"WS":ke="N";break;case"CS":ge<1||ge+1>=le.length||(se=ae[ge-1])!=="EN"&&se!=="AN"||(xe=le[ge+1])!=="EN"&&xe!=="AN"?ke="N":D&&(xe="AN"),ke=xe===se?xe:"N";break;case"ES":ke=(se=ge>0?ae[ge-1]:"B")==="EN"&&ge+1<le.length&&le[ge+1]==="EN"?"EN":"N";break;case"ET":if(ge>0&&ae[ge-1]==="EN"){ke="EN";break}if(D){ke="N";break}for(Me=ge+1,Be=le.length;Me<Be&&le[Me]==="ET";)Me++;ke=Me<Be&&le[Me]==="EN"?"EN":"N";break;case"NSM":if(f&&!p){for(Be=le.length,Me=ge+1;Me<Be&&le[Me]==="NSM";)Me++;if(Me<Be){var Ke=te[ge],ht=Ke>=1425&&Ke<=2303||Ke===64286;if(se=le[Me],ht&&(se==="R"||se==="AL")){ke="R";break}}}ke=ge<1||(se=le[ge-1])==="B"?"N":ae[ge-1];break;case"B":D=!1,c=!0,ke=V;break;case"S":u=!0,ke="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":ke="N"}return ke},fe=function(te,le,ae){var ge=te.split("");return ae&&Z(ge,ae,{hiLevel:V}),ge.reverse(),le&&le.reverse(),ge.join("")},Z=function(te,le,ae){var ge,se,xe,Me,Be,ke=-1,Ke=te.length,ht=0,ve=[],Oe=V?O:N,Ue=[];for(D=!1,c=!1,u=!1,se=0;se<Ke;se++)Ue[se]=K(te[se]);for(xe=0;xe<Ke;xe++){if(Be=ht,ve[xe]=ie(te,Ue,ve,xe),ge=240&(ht=Oe[Be][P[ve[xe]]]),ht&=15,le[xe]=Me=Oe[ht][5],ge>0)if(ge===16){for(se=ke;se<xe;se++)le[se]=1;ke=-1}else ke=-1;if(Oe[ht][6])ke===-1&&(ke=xe);else if(ke>-1){for(se=ke;se<xe;se++)le[se]=Me;ke=-1}Ue[xe]==="B"&&(le[xe]=0),ae.hiLevel|=Me}u&&function(Fe,Qe,We){for(var et=0;et<We;et++)if(Fe[et]==="S"){Qe[et]=V;for(var Ze=et-1;Ze>=0&&Fe[Ze]==="WS";Ze--)Qe[Ze]=V}}(Ue,le,Ke)},pe=function(te,le,ae,ge,se){if(!(se.hiLevel<te)){if(te===1&&V===1&&!c)return le.reverse(),void(ae&&ae.reverse());for(var xe,Me,Be,ke,Ke=le.length,ht=0;ht<Ke;){if(ge[ht]>=te){for(Be=ht+1;Be<Ke&&ge[Be]>=te;)Be++;for(ke=ht,Me=Be-1;ke<Me;ke++,Me--)xe=le[ke],le[ke]=le[Me],le[Me]=xe,ae&&(xe=ae[ke],ae[ke]=ae[Me],ae[Me]=xe);ht=Be}ht++}}},Y=function(te,le,ae){var ge=te.split(""),se={hiLevel:V};return ae||(ae=[]),Z(ge,ae,se),function(xe,Me,Be){if(Be.hiLevel!==0&&w)for(var ke,Ke=0;Ke<xe.length;Ke++)Me[Ke]===1&&(ke=Q.indexOf(xe[Ke]))>=0&&(xe[Ke]=Q[ke+1])}(ge,ae,se),pe(2,ge,le,ae,se),pe(1,ge,le,ae,se),ge.join("")};return this.__bidiEngine__.doBidiReorder=function(te,le,ae){if(function(se,xe){if(xe)for(var Me=0;Me<se.length;Me++)xe[Me]=Me;p===void 0&&(p=J(se)),E===void 0&&(E=J(se))}(te,le),f||!m||E)if(f&&m&&p^E)V=p?1:0,te=fe(te,le,ae);else if(!f&&m&&E)V=p?1:0,te=Y(te,le,ae),te=fe(te,le);else if(!f||p||m||E){if(f&&!m&&p^E)te=fe(te,le),p?(V=0,te=Y(te,le,ae)):(V=1,te=Y(te,le,ae),te=fe(te,le));else if(f&&p&&!m&&E)V=1,te=Y(te,le,ae),te=fe(te,le);else if(!f&&!m&&p^E){var ge=w;p?(V=1,te=Y(te,le,ae),V=0,w=!1,te=Y(te,le,ae),w=ge):(V=0,te=Y(te,le,ae),te=fe(te,le),V=1,w=!1,te=Y(te,le,ae),w=ge,te=fe(te,le))}}else V=0,te=Y(te,le,ae);else V=p?1:0,te=Y(te,le,ae);return te},this.__bidiEngine__.setOptions=function(te){te&&(f=te.isInputVisual,m=te.isOutputVisual,p=te.isInputRtl,E=te.isOutputRtl,w=te.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var c=s.text;s.x,s.y;var u=s.options||{};s.mutex,u.lang;var f=[];if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,i.setOptions(u),Object.prototype.toString.call(c)==="[object Array]"){var p=0;for(f=[],p=0;p<c.length;p+=1)Object.prototype.toString.call(c[p])==="[object Array]"?f.push([i.doBidiReorder(c[p][0]),c[p][1],c[p][2]]):f.push([i.doBidiReorder(c[p])]);s.text=f}else s.text=i.doBidiReorder(c);i.setOptions({isInputVisual:!0})}])}(Rn),Rn.API.TTFFont=function(){function e(t){var i;if(this.rawData=t,i=this.contents=new d0(t),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new EWe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new aWe(this.contents),this.head=new lWe(this),this.name=new hWe(this),this.cmap=new Wfe(this),this.toUnicode={},this.hhea=new uWe(this),this.maxp=new pWe(this),this.hmtx=new gWe(this),this.post=new dWe(this),this.os2=new AWe(this),this.loca=new yWe(this),this.glyf=new mWe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,i,s,c,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var f,p,m,E;for(E=[],f=0,p=(m=this.bbox).length;f<p;f++)t=m[f],E.push(Math.round(t*this.scaleFactor));return E}).call(this),this.stemV=0,this.post.exists?(s=255&(c=this.post.italic_angle),32768&(i=c>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var i;return((i=this.cmap.unicode)!=null?i.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*i},e.prototype.widthOfString=function(t,i,s){var c,u,f,p;for(f=0,u=0,p=(t=""+t).length;0<=p?u<p:u>p;u=0<=p?++u:--u)c=t.charCodeAt(u),f+=this.widthOfGlyph(this.characterToGlyph(c))+s*(1e3/i)||0;return f*(i/1e3)},e.prototype.lineHeight=function(t,i){var s;return i==null&&(i=!1),s=i?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var Ih,d0=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var i,s;for(s=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)s[i]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var i,s,c;for(c=[],i=0,s=t.length;0<=s?i<s:i>s;i=0<=s?++i:--i)c.push(this.writeByte(t.charCodeAt(i)));return c},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,i,s,c,u,f,p,m;return t=this.readByte(),i=this.readByte(),s=this.readByte(),c=this.readByte(),u=this.readByte(),f=this.readByte(),p=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^i)+1099511627776*(255^s)+4294967296*(255^c)+16777216*(255^u)+65536*(255^f)+256*(255^p)+(255^m)+1):72057594037927940*t+281474976710656*i+1099511627776*s+4294967296*c+16777216*u+65536*f+256*p+m},e.prototype.writeLongLong=function(t){var i,s;return i=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var i,s;for(i=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)i.push(this.readByte());return i},e.prototype.write=function(t){var i,s,c,u;for(u=[],s=0,c=t.length;s<c;s++)i=t[s],u.push(this.writeByte(i));return u},e}(),aWe=function(){var e;function t(i){var s,c,u;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},c=0,u=this.tableCount;0<=u?c<u:c>u;c=0<=u?++c:--c)s={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(i){var s,c,u,f,p,m,E,w,T,N,O,P,M;for(M in O=Object.keys(i).length,m=Math.log(2),T=16*Math.floor(Math.log(O)/m),f=Math.floor(T/m),w=16*O-T,(c=new d0).writeInt(this.scalarType),c.writeShort(O),c.writeShort(T),c.writeShort(f),c.writeShort(w),u=16*O,E=c.pos+u,p=null,P=[],i)for(N=i[M],c.writeString(M),c.writeInt(e(N)),c.writeInt(E),c.writeInt(N.length),P=P.concat(N),M==="head"&&(p=E),E+=N.length;E%4;)P.push(0),E++;return c.write(P),s=2981146554-e(c.data),c.pos=p+8,c.writeUInt32(s),c.data},e=function(i){var s,c,u,f;for(i=Gfe.call(i);i.length%4;)i.push(0);for(u=new d0(i),c=0,s=0,f=i.length;s<f;s=s+=4)c+=u.readUInt32();return 4294967295&c},t}(),cWe={}.hasOwnProperty,rg=function(e,t){for(var i in t)cWe.call(t,i)&&(e[i]=t[i]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};Ih=function(){function e(t){var i;this.file=t,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var lWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="head",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},t.prototype.encode=function(i){var s;return(s=new d0).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(i),s.writeShort(this.glyphDataFormat),s.data},t}(),Aie=function(){function e(t,i){var s,c,u,f,p,m,E,w,T,N,O,P,M,Q,k,D,V;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=i+t.readInt(),T=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(O=t.readUInt16(),N=O/2,t.pos+=6,u=function(){var K,J;for(J=[],m=K=0;0<=N?K<N:K>N;m=0<=N?++K:--K)J.push(t.readUInt16());return J}(),t.pos+=2,M=function(){var K,J;for(J=[],m=K=0;0<=N?K<N:K>N;m=0<=N?++K:--K)J.push(t.readUInt16());return J}(),E=function(){var K,J;for(J=[],m=K=0;0<=N?K<N:K>N;m=0<=N?++K:--K)J.push(t.readUInt16());return J}(),w=function(){var K,J;for(J=[],m=K=0;0<=N?K<N:K>N;m=0<=N?++K:--K)J.push(t.readUInt16());return J}(),c=(this.length-t.pos+this.offset)/2,p=function(){var K,J;for(J=[],m=K=0;0<=c?K<c:K>c;m=0<=c?++K:--K)J.push(t.readUInt16());return J}(),m=k=0,V=u.length;k<V;m=++k)for(Q=u[m],s=D=P=M[m];P<=Q?D<=Q:D>=Q;s=P<=Q?++D:--D)w[m]===0?f=s+E[m]:(f=p[w[m]/2+(s-P)-(N-m)]||0)!==0&&(f+=E[m]),this.codeMap[s]=65535&f}t.pos=T}return e.encode=function(t,i){var s,c,u,f,p,m,E,w,T,N,O,P,M,Q,k,D,V,K,J,ie,fe,Z,pe,Y,te,le,ae,ge,se,xe,Me,Be,ke,Ke,ht,ve,Oe,Ue,Fe,Qe,We,et,Ze,pt,at,Rt;switch(ge=new d0,f=Object.keys(t).sort(function(Ot,Ft){return Ot-Ft}),i){case"macroman":for(M=0,Q=function(){var Ot=[];for(P=0;P<256;++P)Ot.push(0);return Ot}(),D={0:0},u={},se=0,ke=f.length;se<ke;se++)D[Ze=t[c=f[se]]]==null&&(D[Ze]=++M),u[c]={old:t[c],new:D[t[c]]},Q[c]=D[t[c]];return ge.writeUInt16(1),ge.writeUInt16(0),ge.writeUInt32(12),ge.writeUInt16(0),ge.writeUInt16(262),ge.writeUInt16(0),ge.write(Q),{charMap:u,subtable:ge.data,maxGlyphID:M+1};case"unicode":for(le=[],T=[],V=0,D={},s={},k=E=null,xe=0,Ke=f.length;xe<Ke;xe++)D[J=t[c=f[xe]]]==null&&(D[J]=++V),s[c]={old:J,new:D[J]},p=D[J]-c,k!=null&&p===E||(k&&T.push(k),le.push(c),E=p),k=c;for(k&&T.push(k),T.push(65535),le.push(65535),Y=2*(pe=le.length),Z=2*Math.pow(Math.log(pe)/Math.LN2,2),N=Math.log(Z/2)/Math.LN2,fe=2*pe-Z,m=[],ie=[],O=[],P=Me=0,ht=le.length;Me<ht;P=++Me){if(te=le[P],w=T[P],te===65535){m.push(0),ie.push(0);break}if(te-(ae=s[te].new)>=32768)for(m.push(0),ie.push(2*(O.length+pe-P)),c=Be=te;te<=w?Be<=w:Be>=w;c=te<=w?++Be:--Be)O.push(s[c].new);else m.push(ae-te),ie.push(0)}for(ge.writeUInt16(3),ge.writeUInt16(1),ge.writeUInt32(12),ge.writeUInt16(4),ge.writeUInt16(16+8*pe+2*O.length),ge.writeUInt16(0),ge.writeUInt16(Y),ge.writeUInt16(Z),ge.writeUInt16(N),ge.writeUInt16(fe),We=0,ve=T.length;We<ve;We++)c=T[We],ge.writeUInt16(c);for(ge.writeUInt16(0),et=0,Oe=le.length;et<Oe;et++)c=le[et],ge.writeUInt16(c);for(pt=0,Ue=m.length;pt<Ue;pt++)p=m[pt],ge.writeUInt16(p);for(at=0,Fe=ie.length;at<Fe;at++)K=ie[at],ge.writeUInt16(K);for(Rt=0,Qe=O.length;Rt<Qe;Rt++)M=O[Rt],ge.writeUInt16(M);return{charMap:s,subtable:ge.data,maxGlyphID:V+1}}},e}(),Wfe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="cmap",t.prototype.parse=function(i){var s,c,u;for(i.pos=this.offset,this.version=i.readUInt16(),u=i.readUInt16(),this.tables=[],this.unicode=null,c=0;0<=u?c<u:c>u;c=0<=u?++c:--c)s=new Aie(i,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(i,s){var c,u;return s==null&&(s="macroman"),c=Aie.encode(i,s),(u=new d0).writeUInt16(0),u.writeUInt16(1),c.table=u.data.concat(c.subtable),c},t}(),uWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="hhea",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},t}(),AWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="OS/2",t.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var s,c;for(c=[],s=0;s<10;++s)c.push(i.readByte());return c}(),this.charRange=function(){var s,c;for(c=[],s=0;s<4;++s)c.push(i.readInt());return c}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var s,c;for(c=[],s=0;s<2;s=++s)c.push(i.readInt());return c}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},t}(),dWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="post",t.prototype.parse=function(i){var s,c,u;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var f;for(c=i.readUInt16(),this.glyphNameIndex=[],f=0;0<=c?f<c:f>c;f=0<=c?++f:--f)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],u=[];i.pos<this.offset+this.length;)s=i.readByte(),u.push(this.names.push(i.readString(s)));return u;case 151552:return c=i.readUInt16(),this.offsets=i.read(c);case 196608:break;case 262144:return this.map=(function(){var p,m,E;for(E=[],f=p=0,m=this.file.maxp.numGlyphs;0<=m?p<m:p>m;f=0<=m?++p:--p)E.push(i.readUInt32());return E}).call(this)}},t}(),fWe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},hWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="name",t.prototype.parse=function(i){var s,c,u,f,p,m,E,w,T,N,O;for(i.pos=this.offset,i.readShort(),s=i.readShort(),m=i.readShort(),c=[],f=0;0<=s?f<s:f>s;f=0<=s?++f:--f)c.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+m+i.readShort()});for(E={},f=T=0,N=c.length;T<N;f=++T)u=c[f],i.pos=u.offset,w=i.readString(u.length),p=new fWe(w,u),E[O=u.nameID]==null&&(E[O]=[]),E[u.nameID].push(p);this.strings=E,this.copyright=E[0],this.fontFamily=E[1],this.fontSubfamily=E[2],this.uniqueSubfamily=E[3],this.fontName=E[4],this.version=E[5];try{this.postscriptName=E[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=E[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=E[7],this.manufacturer=E[8],this.designer=E[9],this.description=E[10],this.vendorUrl=E[11],this.designerUrl=E[12],this.license=E[13],this.licenseUrl=E[14],this.preferredFamily=E[15],this.preferredSubfamily=E[17],this.compatibleFull=E[18],this.sampleText=E[19]},t}(),pWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="maxp",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},t}(),gWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="hmtx",t.prototype.parse=function(i){var s,c,u,f,p,m,E;for(i.pos=this.offset,this.metrics=[],s=0,m=this.file.hhea.numberOfMetrics;0<=m?s<m:s>m;s=0<=m?++s:--s)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,T;for(T=[],s=w=0;0<=u?w<u:w>u;s=0<=u?++w:--w)T.push(i.readInt16());return T}(),this.widths=(function(){var w,T,N,O;for(O=[],w=0,T=(N=this.metrics).length;w<T;w++)f=N[w],O.push(f.advance);return O}).call(this),c=this.widths[this.widths.length-1],E=[],s=p=0;0<=u?p<u:p>u;s=0<=u?++p:--p)E.push(this.widths.push(c));return E},t.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},t}(),Gfe=[].slice,mWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(i){var s,c,u,f,p,m,E,w,T,N;return i in this.cache?this.cache[i]:(f=this.file.loca,s=this.file.contents,c=f.indexOf(i),(u=f.lengthOf(i))===0?this.cache[i]=null:(s.pos=this.offset+c,p=(m=new d0(s.read(u))).readShort(),w=m.readShort(),N=m.readShort(),E=m.readShort(),T=m.readShort(),this.cache[i]=p===-1?new _We(m,w,N,E,T):new vWe(m,p,w,N,E,T),this.cache[i]))},t.prototype.encode=function(i,s,c){var u,f,p,m,E;for(p=[],f=[],m=0,E=s.length;m<E;m++)u=i[s[m]],f.push(p.length),u&&(p=p.concat(u.encode(c)));return f.push(p.length),{table:p,offsets:f}},t}(),vWe=function(){function e(t,i,s,c,u,f){this.raw=t,this.numberOfContours=i,this.xMin=s,this.yMin=c,this.xMax=u,this.yMax=f,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),_We=function(){function e(t,i,s,c,u){var f,p;for(this.raw=t,this.xMin=i,this.yMin=s,this.xMax=c,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],f=this.raw;p=f.readShort(),this.glyphOffsets.push(f.pos),this.glyphIDs.push(f.readUInt16()),32&p;)f.pos+=1&p?4:2,128&p?f.pos+=8:64&p?f.pos+=4:8&p&&(f.pos+=2)}return e.prototype.encode=function(){var t,i,s;for(i=new d0(Gfe.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)i.pos=this.glyphOffsets[t];return i.data},e}(),yWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rg(t,Ih),t.prototype.tag="loca",t.prototype.parse=function(i){var s,c;return i.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var u,f;for(f=[],c=0,u=this.length;c<u;c+=2)f.push(2*i.readUInt16());return f}).call(this):(function(){var u,f;for(f=[],c=0,u=this.length;c<u;c+=4)f.push(i.readUInt32());return f}).call(this)},t.prototype.indexOf=function(i){return this.offsets[i]},t.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},t.prototype.encode=function(i,s){for(var c=new Uint32Array(this.offsets.length),u=0,f=0,p=0;p<c.length;++p)if(c[p]=u,f<s.length&&s[f]==p){++f,c[p]=u;var m=this.offsets[p],E=this.offsets[p+1]-m;E>0&&(u+=E)}for(var w=new Array(4*c.length),T=0;T<c.length;++T)w[4*T+3]=255&c[T],w[4*T+2]=(65280&c[T])>>8,w[4*T+1]=(16711680&c[T])>>16,w[4*T]=(4278190080&c[T])>>24;return w},t}(),EWe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,i,s,c,u;for(i in c=this.font.cmap.tables[0].codeMap,t={},u=this.subset)s=u[i],t[i]=c[s];return t},e.prototype.glyphsFor=function(t){var i,s,c,u,f,p,m;for(c={},f=0,p=t.length;f<p;f++)c[u=t[f]]=this.font.glyf.glyphFor(u);for(u in i=[],c)(s=c[u])!=null&&s.compound&&i.push.apply(i,s.glyphIDs);if(i.length>0)for(u in m=this.glyphsFor(i))s=m[u],c[u]=s;return c},e.prototype.encode=function(t,i){var s,c,u,f,p,m,E,w,T,N,O,P,M,Q,k;for(c in s=Wfe.encode(this.generateCmap(),"unicode"),f=this.glyphsFor(t),O={0:0},k=s.charMap)O[(m=k[c]).old]=m.new;for(P in N=s.maxGlyphID,f)P in O||(O[P]=N++);return w=function(D){var V,K;for(V in K={},D)K[D[V]]=V;return K}(O),T=Object.keys(w).sort(function(D,V){return D-V}),M=function(){var D,V,K;for(K=[],D=0,V=T.length;D<V;D++)p=T[D],K.push(w[p]);return K}(),u=this.font.glyf.encode(f,M,O),E=this.font.loca.encode(u.offsets,M),Q={cmap:this.font.cmap.raw(),glyf:u.table,loca:E,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(Q["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Q)},e}();Rn.API.PDFObject=function(){var e;function t(){}return e=function(i,s){return(Array(s+1).join("0")+i).slice(-s)},t.convert=function(i){var s,c,u,f;if(Array.isArray(i))return"["+function(){var p,m,E;for(E=[],p=0,m=i.length;p<m;p++)s=i[p],E.push(t.convert(s));return E}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(c in u=["<<"],i)f=i[c],u.push("/"+c+" "+t.convert(f));return u.push(">>"),u.join(`
`)}return""+i},t}();const Iv=({src:e,type:t,isRubber:i,isUndo:s})=>{const c=HAe(),u=l0(w=>w.whiteboard.tool),f=l0(w=>w.whiteboard.elements),p=()=>{c(M8e(t))},m=()=>{c(nm([])),jVe()},E=()=>{f.length!==0&&(c(nm(f.slice(0,-1))),HVe())};return oe.jsx("button",{onClick:i?m:s?E:p,className:u===t?"menu_button_active":"menu_button",children:oe.jsx("img",{width:"80%",height:"80%",src:e,alt:`${t} icon`})})},wWe=({canvasRef:e})=>{v0(),l0(s=>s.whiteboard.activeUsers);const t=()=>{const c=e.current.toDataURL("image/png"),u=document.createElement("a");u.href=c,u.download="canvas-image.png",u.click()},i=()=>{const s=e.current;Cfe(s).then(c=>{const u=c.toDataURL("image/png"),f=new Rn;f.addImage(u,"PNG",0,0),f.save("canvas.pdf")})};return oe.jsx(oe.Fragment,{children:oe.jsx("div",{className:"menu_container",children:oe.jsxs(bn,{container:!0,display:"flex",justifyContent:"flex-start",spacing:3,paddingLeft:3,alignItems:"center",height:60,children:[oe.jsx(Iv,{className:"ml-20",src:z6e,type:Wn.RECTANGLE}),oe.jsx(Iv,{src:Z6e,type:Wn.CIRCLE}),oe.jsx(Iv,{src:q6e,type:Wn.LINE}),oe.jsx(Iv,{src:X6e,type:Wn.PENCIL}),oe.jsx(Iv,{src:J6e,type:Wn.TEXT}),oe.jsx(Iv,{src:$Ae,type:Wn.SELECTION}),oe.jsx(Iv,{src:e8e,isUndo:!0}),oe.jsx(Iv,{src:Y6e,isRubber:!0}),oe.jsx(pT,{onClick:t,color:"primary","aria-label":"export to image",children:oe.jsx(H6e,{})}),oe.jsx(pT,{onClick:i,color:"secondary","aria-label":"export to pdf",children:oe.jsx(K6e,{})})]})})})};function H4(e,t,i){if(e&&e.length){const[s,c]=t,u=Math.PI/180*i,f=Math.cos(u),p=Math.sin(u);for(const m of e){const[E,w]=m;m[0]=(E-s)*f-(w-c)*p+s,m[1]=(E-s)*p+(w-c)*f+c}}}function SWe(e,t){return e[0]===t[0]&&e[1]===t[1]}function bWe(e,t,i,s=1){const c=i,u=Math.max(t,.1),f=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,p=[0,0];if(c)for(const E of f)H4(E,p,c);const m=function(E,w,T){const N=[];for(const D of E){const V=[...D];SWe(V[0],V[V.length-1])||V.push([V[0][0],V[0][1]]),V.length>2&&N.push(V)}const O=[];w=Math.max(w,.1);const P=[];for(const D of N)for(let V=0;V<D.length-1;V++){const K=D[V],J=D[V+1];if(K[1]!==J[1]){const ie=Math.min(K[1],J[1]);P.push({ymin:ie,ymax:Math.max(K[1],J[1]),x:ie===K[1]?K[0]:J[0],islope:(J[0]-K[0])/(J[1]-K[1])})}}if(P.sort((D,V)=>D.ymin<V.ymin?-1:D.ymin>V.ymin?1:D.x<V.x?-1:D.x>V.x?1:D.ymax===V.ymax?0:(D.ymax-V.ymax)/Math.abs(D.ymax-V.ymax)),!P.length)return O;let M=[],Q=P[0].ymin,k=0;for(;M.length||P.length;){if(P.length){let D=-1;for(let V=0;V<P.length&&!(P[V].ymin>Q);V++)D=V;P.splice(0,D+1).forEach(V=>{M.push({s:Q,edge:V})})}if(M=M.filter(D=>!(D.edge.ymax<=Q)),M.sort((D,V)=>D.edge.x===V.edge.x?0:(D.edge.x-V.edge.x)/Math.abs(D.edge.x-V.edge.x)),(T!==1||k%w==0)&&M.length>1)for(let D=0;D<M.length;D+=2){const V=D+1;if(V>=M.length)break;const K=M[D].edge,J=M[V].edge;O.push([[Math.round(K.x),Q],[Math.round(J.x),Q]])}Q+=T,M.forEach(D=>{D.edge.x=D.edge.x+T*D.edge.islope}),k++}return O}(f,u,s);if(c){for(const E of f)H4(E,p,-c);(function(E,w,T){const N=[];E.forEach(O=>N.push(...O)),H4(N,w,T)})(m,p,-c)}return m}function zT(e,t){var i;const s=t.hachureAngle+90;let c=t.hachureGap;c<0&&(c=4*t.strokeWidth),c=Math.round(Math.max(c,.1));let u=1;return t.roughness>=1&&(((i=t.randomizer)===null||i===void 0?void 0:i.next())||Math.random())>.7&&(u=c),bWe(e,c,s,u||1)}class XQ{constructor(t){this.helper=t}fillPolygons(t,i){return this._fillPolygons(t,i)}_fillPolygons(t,i){const s=zT(t,i);return{type:"fillSketch",ops:this.renderLines(s,i)}}renderLines(t,i){const s=[];for(const c of t)s.push(...this.helper.doubleLineOps(c[0][0],c[0][1],c[1][0],c[1][1],i));return s}}function hk(e){const t=e[0],i=e[1];return Math.sqrt(Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2))}class CWe extends XQ{fillPolygons(t,i){let s=i.hachureGap;s<0&&(s=4*i.strokeWidth),s=Math.max(s,.1);const c=zT(t,Object.assign({},i,{hachureGap:s})),u=Math.PI/180*i.hachureAngle,f=[],p=.5*s*Math.cos(u),m=.5*s*Math.sin(u);for(const[E,w]of c)hk([E,w])&&f.push([[E[0]-p,E[1]+m],[...w]],[[E[0]+p,E[1]-m],[...w]]);return{type:"fillSketch",ops:this.renderLines(f,i)}}}class TWe extends XQ{fillPolygons(t,i){const s=this._fillPolygons(t,i),c=Object.assign({},i,{hachureAngle:i.hachureAngle+90}),u=this._fillPolygons(t,c);return s.ops=s.ops.concat(u.ops),s}}let RWe=class{constructor(t){this.helper=t}fillPolygons(t,i){const s=zT(t,i=Object.assign({},i,{hachureAngle:0}));return this.dotsOnLines(s,i)}dotsOnLines(t,i){const s=[];let c=i.hachureGap;c<0&&(c=4*i.strokeWidth),c=Math.max(c,.1);let u=i.fillWeight;u<0&&(u=i.strokeWidth/2);const f=c/4;for(const p of t){const m=hk(p),E=m/c,w=Math.ceil(E)-1,T=m-w*c,N=(p[0][0]+p[1][0])/2-c/4,O=Math.min(p[0][1],p[1][1]);for(let P=0;P<w;P++){const M=O+T+P*c,Q=N-f+2*Math.random()*f,k=M-f+2*Math.random()*f,D=this.helper.ellipse(Q,k,u,u,i);s.push(...D.ops)}}return{type:"fillSketch",ops:s}}};class IWe{constructor(t){this.helper=t}fillPolygons(t,i){const s=zT(t,i);return{type:"fillSketch",ops:this.dashedLine(s,i)}}dashedLine(t,i){const s=i.dashOffset<0?i.hachureGap<0?4*i.strokeWidth:i.hachureGap:i.dashOffset,c=i.dashGap<0?i.hachureGap<0?4*i.strokeWidth:i.hachureGap:i.dashGap,u=[];return t.forEach(f=>{const p=hk(f),m=Math.floor(p/(s+c)),E=(p+c-m*(s+c))/2;let w=f[0],T=f[1];w[0]>T[0]&&(w=f[1],T=f[0]);const N=Math.atan((T[1]-w[1])/(T[0]-w[0]));for(let O=0;O<m;O++){const P=O*(s+c),M=P+s,Q=[w[0]+P*Math.cos(N)+E*Math.cos(N),w[1]+P*Math.sin(N)+E*Math.sin(N)],k=[w[0]+M*Math.cos(N)+E*Math.cos(N),w[1]+M*Math.sin(N)+E*Math.sin(N)];u.push(...this.helper.doubleLineOps(Q[0],Q[1],k[0],k[1],i))}}),u}}let OWe=class{constructor(t){this.helper=t}fillPolygons(t,i){const s=i.hachureGap<0?4*i.strokeWidth:i.hachureGap,c=i.zigzagOffset<0?s:i.zigzagOffset,u=zT(t,i=Object.assign({},i,{hachureGap:s+c}));return{type:"fillSketch",ops:this.zigzagLines(u,c,i)}}zigzagLines(t,i,s){const c=[];return t.forEach(u=>{const f=hk(u),p=Math.round(f/(2*i));let m=u[0],E=u[1];m[0]>E[0]&&(m=u[1],E=u[0]);const w=Math.atan((E[1]-m[1])/(E[0]-m[0]));for(let T=0;T<p;T++){const N=2*T*i,O=2*(T+1)*i,P=Math.sqrt(2*Math.pow(i,2)),M=[m[0]+N*Math.cos(w),m[1]+N*Math.sin(w)],Q=[m[0]+O*Math.cos(w),m[1]+O*Math.sin(w)],k=[M[0]+P*Math.cos(w+Math.PI/4),M[1]+P*Math.sin(w+Math.PI/4)];c.push(...this.helper.doubleLineOps(M[0],M[1],k[0],k[1],s),...this.helper.doubleLineOps(k[0],k[1],Q[0],Q[1],s))}}),c}};const Fu={};class NWe{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const BWe=0,j4=1,die=2,cN={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function K4(e,t){return e.type===t}function JQ(e){const t=[],i=function(f){const p=new Array;for(;f!=="";)if(f.match(/^([ \t\r\n,]+)/))f=f.substr(RegExp.$1.length);else if(f.match(/^([aAcChHlLmMqQsStTvVzZ])/))p[p.length]={type:BWe,text:RegExp.$1},f=f.substr(RegExp.$1.length);else{if(!f.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];p[p.length]={type:j4,text:`${parseFloat(RegExp.$1)}`},f=f.substr(RegExp.$1.length)}return p[p.length]={type:die,text:""},p}(e);let s="BOD",c=0,u=i[c];for(;!K4(u,die);){let f=0;const p=[];if(s==="BOD"){if(u.text!=="M"&&u.text!=="m")return JQ("M0,0"+e);c++,f=cN[u.text],s=u.text}else K4(u,j4)?f=cN[s]:(c++,f=cN[u.text],s=u.text);if(!(c+f<i.length))throw new Error("Path data ended short");for(let m=c;m<c+f;m++){const E=i[m];if(!K4(E,j4))throw new Error("Param not a number: "+s+","+E.text);p[p.length]=+E.text}if(typeof cN[s]!="number")throw new Error("Bad segment: "+s);{const m={key:s,data:p};t.push(m),c+=f,u=i[c],s==="M"&&(s="L"),s==="m"&&(s="l")}}return t}function $fe(e){let t=0,i=0,s=0,c=0;const u=[];for(const{key:f,data:p}of e)switch(f){case"M":u.push({key:"M",data:[...p]}),[t,i]=p,[s,c]=p;break;case"m":t+=p[0],i+=p[1],u.push({key:"M",data:[t,i]}),s=t,c=i;break;case"L":u.push({key:"L",data:[...p]}),[t,i]=p;break;case"l":t+=p[0],i+=p[1],u.push({key:"L",data:[t,i]});break;case"C":u.push({key:"C",data:[...p]}),t=p[4],i=p[5];break;case"c":{const m=p.map((E,w)=>w%2?E+i:E+t);u.push({key:"C",data:m}),t=m[4],i=m[5];break}case"Q":u.push({key:"Q",data:[...p]}),t=p[2],i=p[3];break;case"q":{const m=p.map((E,w)=>w%2?E+i:E+t);u.push({key:"Q",data:m}),t=m[2],i=m[3];break}case"A":u.push({key:"A",data:[...p]}),t=p[5],i=p[6];break;case"a":t+=p[5],i+=p[6],u.push({key:"A",data:[p[0],p[1],p[2],p[3],p[4],t,i]});break;case"H":u.push({key:"H",data:[...p]}),t=p[0];break;case"h":t+=p[0],u.push({key:"H",data:[t]});break;case"V":u.push({key:"V",data:[...p]}),i=p[0];break;case"v":i+=p[0],u.push({key:"V",data:[i]});break;case"S":u.push({key:"S",data:[...p]}),t=p[2],i=p[3];break;case"s":{const m=p.map((E,w)=>w%2?E+i:E+t);u.push({key:"S",data:m}),t=m[2],i=m[3];break}case"T":u.push({key:"T",data:[...p]}),t=p[0],i=p[1];break;case"t":t+=p[0],i+=p[1],u.push({key:"T",data:[t,i]});break;case"Z":case"z":u.push({key:"Z",data:[]}),t=s,i=c}return u}function zfe(e){const t=[];let i="",s=0,c=0,u=0,f=0,p=0,m=0;for(const{key:E,data:w}of e){switch(E){case"M":t.push({key:"M",data:[...w]}),[s,c]=w,[u,f]=w;break;case"C":t.push({key:"C",data:[...w]}),s=w[4],c=w[5],p=w[2],m=w[3];break;case"L":t.push({key:"L",data:[...w]}),[s,c]=w;break;case"H":s=w[0],t.push({key:"L",data:[s,c]});break;case"V":c=w[0],t.push({key:"L",data:[s,c]});break;case"S":{let T=0,N=0;i==="C"||i==="S"?(T=s+(s-p),N=c+(c-m)):(T=s,N=c),t.push({key:"C",data:[T,N,...w]}),p=w[0],m=w[1],s=w[2],c=w[3];break}case"T":{const[T,N]=w;let O=0,P=0;i==="Q"||i==="T"?(O=s+(s-p),P=c+(c-m)):(O=s,P=c);const M=s+2*(O-s)/3,Q=c+2*(P-c)/3,k=T+2*(O-T)/3,D=N+2*(P-N)/3;t.push({key:"C",data:[M,Q,k,D,T,N]}),p=O,m=P,s=T,c=N;break}case"Q":{const[T,N,O,P]=w,M=s+2*(T-s)/3,Q=c+2*(N-c)/3,k=O+2*(T-O)/3,D=P+2*(N-P)/3;t.push({key:"C",data:[M,Q,k,D,O,P]}),p=T,m=N,s=O,c=P;break}case"A":{const T=Math.abs(w[0]),N=Math.abs(w[1]),O=w[2],P=w[3],M=w[4],Q=w[5],k=w[6];T===0||N===0?(t.push({key:"C",data:[s,c,Q,k,Q,k]}),s=Q,c=k):(s!==Q||c!==k)&&(qfe(s,c,Q,k,T,N,O,P,M).forEach(function(D){t.push({key:"C",data:D})}),s=Q,c=k);break}case"Z":t.push({key:"Z",data:[]}),s=u,c=f}i=E}return t}function Kb(e,t,i){return[e*Math.cos(i)-t*Math.sin(i),e*Math.sin(i)+t*Math.cos(i)]}function qfe(e,t,i,s,c,u,f,p,m,E){const w=(T=f,Math.PI*T/180);var T;let N=[],O=0,P=0,M=0,Q=0;if(E)[O,P,M,Q]=E;else{[e,t]=Kb(e,t,-w),[i,s]=Kb(i,s,-w);const ae=(e-i)/2,ge=(t-s)/2;let se=ae*ae/(c*c)+ge*ge/(u*u);se>1&&(se=Math.sqrt(se),c*=se,u*=se);const xe=c*c,Me=u*u,Be=xe*Me-xe*ge*ge-Me*ae*ae,ke=xe*ge*ge+Me*ae*ae,Ke=(p===m?-1:1)*Math.sqrt(Math.abs(Be/ke));M=Ke*c*ge/u+(e+i)/2,Q=Ke*-u*ae/c+(t+s)/2,O=Math.asin(parseFloat(((t-Q)/u).toFixed(9))),P=Math.asin(parseFloat(((s-Q)/u).toFixed(9))),e<M&&(O=Math.PI-O),i<M&&(P=Math.PI-P),O<0&&(O=2*Math.PI+O),P<0&&(P=2*Math.PI+P),m&&O>P&&(O-=2*Math.PI),!m&&P>O&&(P-=2*Math.PI)}let k=P-O;if(Math.abs(k)>120*Math.PI/180){const ae=P,ge=i,se=s;P=m&&P>O?O+120*Math.PI/180*1:O+120*Math.PI/180*-1,N=qfe(i=M+c*Math.cos(P),s=Q+u*Math.sin(P),ge,se,c,u,f,0,m,[P,ae,M,Q])}k=P-O;const D=Math.cos(O),V=Math.sin(O),K=Math.cos(P),J=Math.sin(P),ie=Math.tan(k/4),fe=4/3*c*ie,Z=4/3*u*ie,pe=[e,t],Y=[e+fe*V,t-Z*D],te=[i+fe*J,s-Z*K],le=[i,s];if(Y[0]=2*pe[0]-Y[0],Y[1]=2*pe[1]-Y[1],E)return[Y,te,le].concat(N);{N=[Y,te,le].concat(N);const ae=[];for(let ge=0;ge<N.length;ge+=3){const se=Kb(N[ge][0],N[ge][1],w),xe=Kb(N[ge+1][0],N[ge+1][1],w),Me=Kb(N[ge+2][0],N[ge+2][1],w);ae.push([se[0],se[1],xe[0],xe[1],Me[0],Me[1]])}return ae}}const LWe={randOffset:function(e,t){return wn(e,t)},randOffsetWithRange:function(e,t,i){return _L(e,t,i)},ellipse:function(e,t,i,s,c){const u=Xfe(i,s,c);return l8(e,t,c,u).opset},doubleLineOps:function(e,t,i,s,c){return f0(e,t,i,s,c,!0)}};function Yfe(e,t,i,s,c){return{type:"path",ops:f0(e,t,i,s,c)}}function oB(e,t,i){const s=(e||[]).length;if(s>2){const c=[];for(let u=0;u<s-1;u++)c.push(...f0(e[u][0],e[u][1],e[u+1][0],e[u+1][1],i));return t&&c.push(...f0(e[s-1][0],e[s-1][1],e[0][0],e[0][1],i)),{type:"path",ops:c}}return s===2?Yfe(e[0][0],e[0][1],e[1][0],e[1][1],i):{type:"path",ops:[]}}function PWe(e,t,i,s,c){return function(u,f){return oB(u,!0,f)}([[e,t],[e+i,t],[e+i,t+s],[e,t+s]],c)}function fie(e,t){if(e.length){const i=typeof e[0][0]=="number"?[e]:e,s=lN(i[0],1*(1+.2*t.roughness),t),c=t.disableMultiStroke?[]:lN(i[0],1.5*(1+.22*t.roughness),gie(t));for(let u=1;u<i.length;u++){const f=i[u];if(f.length){const p=lN(f,1*(1+.2*t.roughness),t),m=t.disableMultiStroke?[]:lN(f,1.5*(1+.22*t.roughness),gie(t));for(const E of p)E.op!=="move"&&s.push(E);for(const E of m)E.op!=="move"&&c.push(E)}}return{type:"path",ops:s.concat(c)}}return{type:"path",ops:[]}}function Xfe(e,t,i){const s=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),c=Math.ceil(Math.max(i.curveStepCount,i.curveStepCount/Math.sqrt(200)*s)),u=2*Math.PI/c;let f=Math.abs(e/2),p=Math.abs(t/2);const m=1-i.curveFitting;return f+=wn(f*m,i),p+=wn(p*m,i),{increment:u,rx:f,ry:p}}function l8(e,t,i,s){const[c,u]=mie(s.increment,e,t,s.rx,s.ry,1,s.increment*_L(.1,_L(.4,1,i),i),i);let f=yL(c,null,i);if(!i.disableMultiStroke&&i.roughness!==0){const[p]=mie(s.increment,e,t,s.rx,s.ry,1.5,0,i),m=yL(p,null,i);f=f.concat(m)}return{estimatedPoints:u,opset:{type:"path",ops:f}}}function hie(e,t,i,s,c,u,f,p,m){const E=e,w=t;let T=Math.abs(i/2),N=Math.abs(s/2);T+=wn(.01*T,m),N+=wn(.01*N,m);let O=c,P=u;for(;O<0;)O+=2*Math.PI,P+=2*Math.PI;P-O>2*Math.PI&&(O=0,P=2*Math.PI);const M=2*Math.PI/m.curveStepCount,Q=Math.min(M/2,(P-O)/2),k=vie(Q,E,w,T,N,O,P,1,m);if(!m.disableMultiStroke){const D=vie(Q,E,w,T,N,O,P,1.5,m);k.push(...D)}return f&&(p?k.push(...f0(E,w,E+T*Math.cos(O),w+N*Math.sin(O),m),...f0(E,w,E+T*Math.cos(P),w+N*Math.sin(P),m)):k.push({op:"lineTo",data:[E,w]},{op:"lineTo",data:[E+T*Math.cos(O),w+N*Math.sin(O)]})),{type:"path",ops:k}}function pie(e,t){const i=zfe($fe(JQ(e))),s=[];let c=[0,0],u=[0,0];for(const{key:f,data:p}of i)switch(f){case"M":u=[p[0],p[1]],c=[p[0],p[1]];break;case"L":s.push(...f0(u[0],u[1],p[0],p[1],t)),u=[p[0],p[1]];break;case"C":{const[m,E,w,T,N,O]=p;s.push(...kWe(m,E,w,T,N,O,u,t)),u=[N,O];break}case"Z":s.push(...f0(u[0],u[1],c[0],c[1],t)),u=[c[0],c[1]]}return{type:"path",ops:s}}function W4(e,t){const i=[];for(const s of e)if(s.length){const c=t.maxRandomnessOffset||0,u=s.length;if(u>2){i.push({op:"move",data:[s[0][0]+wn(c,t),s[0][1]+wn(c,t)]});for(let f=1;f<u;f++)i.push({op:"lineTo",data:[s[f][0]+wn(c,t),s[f][1]+wn(c,t)]})}}return{type:"fillPath",ops:i}}function mE(e,t){return function(i,s){let c=i.fillStyle||"hachure";if(!Fu[c])switch(c){case"zigzag":Fu[c]||(Fu[c]=new CWe(s));break;case"cross-hatch":Fu[c]||(Fu[c]=new TWe(s));break;case"dots":Fu[c]||(Fu[c]=new RWe(s));break;case"dashed":Fu[c]||(Fu[c]=new IWe(s));break;case"zigzag-line":Fu[c]||(Fu[c]=new OWe(s));break;default:c="hachure",Fu[c]||(Fu[c]=new XQ(s))}return Fu[c]}(t,LWe).fillPolygons(e,t)}function gie(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function Jfe(e){return e.randomizer||(e.randomizer=new NWe(e.seed||0)),e.randomizer.next()}function _L(e,t,i,s=1){return i.roughness*s*(Jfe(i)*(t-e)+e)}function wn(e,t,i=1){return _L(-e,e,t,i)}function f0(e,t,i,s,c,u=!1){const f=u?c.disableMultiStrokeFill:c.disableMultiStroke,p=u8(e,t,i,s,c,!0,!1);if(f)return p;const m=u8(e,t,i,s,c,!0,!0);return p.concat(m)}function u8(e,t,i,s,c,u,f){const p=Math.pow(e-i,2)+Math.pow(t-s,2),m=Math.sqrt(p);let E=1;E=m<200?1:m>500?.4:-.0016668*m+1.233334;let w=c.maxRandomnessOffset||0;w*w*100>p&&(w=m/10);const T=w/2,N=.2+.2*Jfe(c);let O=c.bowing*c.maxRandomnessOffset*(s-t)/200,P=c.bowing*c.maxRandomnessOffset*(e-i)/200;O=wn(O,c,E),P=wn(P,c,E);const M=[],Q=()=>wn(T,c,E),k=()=>wn(w,c,E),D=c.preserveVertices;return u&&(f?M.push({op:"move",data:[e+(D?0:Q()),t+(D?0:Q())]}):M.push({op:"move",data:[e+(D?0:wn(w,c,E)),t+(D?0:wn(w,c,E))]})),f?M.push({op:"bcurveTo",data:[O+e+(i-e)*N+Q(),P+t+(s-t)*N+Q(),O+e+2*(i-e)*N+Q(),P+t+2*(s-t)*N+Q(),i+(D?0:Q()),s+(D?0:Q())]}):M.push({op:"bcurveTo",data:[O+e+(i-e)*N+k(),P+t+(s-t)*N+k(),O+e+2*(i-e)*N+k(),P+t+2*(s-t)*N+k(),i+(D?0:k()),s+(D?0:k())]}),M}function lN(e,t,i){if(!e.length)return[];const s=[];s.push([e[0][0]+wn(t,i),e[0][1]+wn(t,i)]),s.push([e[0][0]+wn(t,i),e[0][1]+wn(t,i)]);for(let c=1;c<e.length;c++)s.push([e[c][0]+wn(t,i),e[c][1]+wn(t,i)]),c===e.length-1&&s.push([e[c][0]+wn(t,i),e[c][1]+wn(t,i)]);return yL(s,null,i)}function yL(e,t,i){const s=e.length,c=[];if(s>3){const u=[],f=1-i.curveTightness;c.push({op:"move",data:[e[1][0],e[1][1]]});for(let p=1;p+2<s;p++){const m=e[p];u[0]=[m[0],m[1]],u[1]=[m[0]+(f*e[p+1][0]-f*e[p-1][0])/6,m[1]+(f*e[p+1][1]-f*e[p-1][1])/6],u[2]=[e[p+1][0]+(f*e[p][0]-f*e[p+2][0])/6,e[p+1][1]+(f*e[p][1]-f*e[p+2][1])/6],u[3]=[e[p+1][0],e[p+1][1]],c.push({op:"bcurveTo",data:[u[1][0],u[1][1],u[2][0],u[2][1],u[3][0],u[3][1]]})}if(t&&t.length===2){const p=i.maxRandomnessOffset;c.push({op:"lineTo",data:[t[0]+wn(p,i),t[1]+wn(p,i)]})}}else s===3?(c.push({op:"move",data:[e[1][0],e[1][1]]}),c.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):s===2&&c.push(...u8(e[0][0],e[0][1],e[1][0],e[1][1],i,!0,!0));return c}function mie(e,t,i,s,c,u,f,p){const m=[],E=[];if(p.roughness===0){e/=4,E.push([t+s*Math.cos(-e),i+c*Math.sin(-e)]);for(let w=0;w<=2*Math.PI;w+=e){const T=[t+s*Math.cos(w),i+c*Math.sin(w)];m.push(T),E.push(T)}E.push([t+s*Math.cos(0),i+c*Math.sin(0)]),E.push([t+s*Math.cos(e),i+c*Math.sin(e)])}else{const w=wn(.5,p)-Math.PI/2;E.push([wn(u,p)+t+.9*s*Math.cos(w-e),wn(u,p)+i+.9*c*Math.sin(w-e)]);const T=2*Math.PI+w-.01;for(let N=w;N<T;N+=e){const O=[wn(u,p)+t+s*Math.cos(N),wn(u,p)+i+c*Math.sin(N)];m.push(O),E.push(O)}E.push([wn(u,p)+t+s*Math.cos(w+2*Math.PI+.5*f),wn(u,p)+i+c*Math.sin(w+2*Math.PI+.5*f)]),E.push([wn(u,p)+t+.98*s*Math.cos(w+f),wn(u,p)+i+.98*c*Math.sin(w+f)]),E.push([wn(u,p)+t+.9*s*Math.cos(w+.5*f),wn(u,p)+i+.9*c*Math.sin(w+.5*f)])}return[E,m]}function vie(e,t,i,s,c,u,f,p,m){const E=u+wn(.1,m),w=[];w.push([wn(p,m)+t+.9*s*Math.cos(E-e),wn(p,m)+i+.9*c*Math.sin(E-e)]);for(let T=E;T<=f;T+=e)w.push([wn(p,m)+t+s*Math.cos(T),wn(p,m)+i+c*Math.sin(T)]);return w.push([t+s*Math.cos(f),i+c*Math.sin(f)]),w.push([t+s*Math.cos(f),i+c*Math.sin(f)]),yL(w,null,m)}function kWe(e,t,i,s,c,u,f,p){const m=[],E=[p.maxRandomnessOffset||1,(p.maxRandomnessOffset||1)+.3];let w=[0,0];const T=p.disableMultiStroke?1:2,N=p.preserveVertices;for(let O=0;O<T;O++)O===0?m.push({op:"move",data:[f[0],f[1]]}):m.push({op:"move",data:[f[0]+(N?0:wn(E[0],p)),f[1]+(N?0:wn(E[0],p))]}),w=N?[c,u]:[c+wn(E[O],p),u+wn(E[O],p)],m.push({op:"bcurveTo",data:[e+wn(E[O],p),t+wn(E[O],p),i+wn(E[O],p),s+wn(E[O],p),w[0],w[1]]});return m}function Wb(e){return[...e]}function _ie(e,t=0){const i=e.length;if(i<3)throw new Error("A curve must have at least three points.");const s=[];if(i===3)s.push(Wb(e[0]),Wb(e[1]),Wb(e[2]),Wb(e[2]));else{const c=[];c.push(e[0],e[0]);for(let p=1;p<e.length;p++)c.push(e[p]),p===e.length-1&&c.push(e[p]);const u=[],f=1-t;s.push(Wb(c[0]));for(let p=1;p+2<c.length;p++){const m=c[p];u[0]=[m[0],m[1]],u[1]=[m[0]+(f*c[p+1][0]-f*c[p-1][0])/6,m[1]+(f*c[p+1][1]-f*c[p-1][1])/6],u[2]=[c[p+1][0]+(f*c[p][0]-f*c[p+2][0])/6,c[p+1][1]+(f*c[p][1]-f*c[p+2][1])/6],u[3]=[c[p+1][0],c[p+1][1]],s.push(u[1],u[2],u[3])}}return s}function sB(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function DWe(e,t,i){const s=sB(t,i);if(s===0)return sB(e,t);let c=((e[0]-t[0])*(i[0]-t[0])+(e[1]-t[1])*(i[1]-t[1]))/s;return c=Math.max(0,Math.min(1,c)),sB(e,k1(t,i,c))}function k1(e,t,i){return[e[0]+(t[0]-e[0])*i,e[1]+(t[1]-e[1])*i]}function A8(e,t,i,s){const c=s||[];if(function(p,m){const E=p[m+0],w=p[m+1],T=p[m+2],N=p[m+3];let O=3*w[0]-2*E[0]-N[0];O*=O;let P=3*w[1]-2*E[1]-N[1];P*=P;let M=3*T[0]-2*N[0]-E[0];M*=M;let Q=3*T[1]-2*N[1]-E[1];return Q*=Q,O<M&&(O=M),P<Q&&(P=Q),O+P}(e,t)<i){const p=e[t+0];c.length?(u=c[c.length-1],f=p,Math.sqrt(sB(u,f))>1&&c.push(p)):c.push(p),c.push(e[t+3])}else{const m=e[t+0],E=e[t+1],w=e[t+2],T=e[t+3],N=k1(m,E,.5),O=k1(E,w,.5),P=k1(w,T,.5),M=k1(N,O,.5),Q=k1(O,P,.5),k=k1(M,Q,.5);A8([m,N,M,k],0,i,c),A8([k,Q,P,T],0,i,c)}var u,f;return c}function xWe(e,t){return EL(e,0,e.length,t)}function EL(e,t,i,s,c){const u=c||[],f=e[t],p=e[i-1];let m=0,E=1;for(let w=t+1;w<i-1;++w){const T=DWe(e[w],f,p);T>m&&(m=T,E=w)}return Math.sqrt(m)>s?(EL(e,t,E+1,s,u),EL(e,E,i,s,u)):(u.length||u.push(f),u.push(p)),u}function G4(e,t=.15,i){const s=[],c=(e.length-1)/3;for(let u=0;u<c;u++)A8(e,3*u,t,s);return i&&i>0?EL(s,0,s.length,i):s}const LA="none";class wL{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,i,s){return{shape:t,sets:i||[],options:s||this.defaultOptions}}line(t,i,s,c,u){const f=this._o(u);return this._d("line",[Yfe(t,i,s,c,f)],f)}rectangle(t,i,s,c,u){const f=this._o(u),p=[],m=PWe(t,i,s,c,f);if(f.fill){const E=[[t,i],[t+s,i],[t+s,i+c],[t,i+c]];f.fillStyle==="solid"?p.push(W4([E],f)):p.push(mE([E],f))}return f.stroke!==LA&&p.push(m),this._d("rectangle",p,f)}ellipse(t,i,s,c,u){const f=this._o(u),p=[],m=Xfe(s,c,f),E=l8(t,i,f,m);if(f.fill)if(f.fillStyle==="solid"){const w=l8(t,i,f,m).opset;w.type="fillPath",p.push(w)}else p.push(mE([E.estimatedPoints],f));return f.stroke!==LA&&p.push(E.opset),this._d("ellipse",p,f)}circle(t,i,s,c){const u=this.ellipse(t,i,s,s,c);return u.shape="circle",u}linearPath(t,i){const s=this._o(i);return this._d("linearPath",[oB(t,!1,s)],s)}arc(t,i,s,c,u,f,p=!1,m){const E=this._o(m),w=[],T=hie(t,i,s,c,u,f,p,!0,E);if(p&&E.fill)if(E.fillStyle==="solid"){const N=Object.assign({},E);N.disableMultiStroke=!0;const O=hie(t,i,s,c,u,f,!0,!1,N);O.type="fillPath",w.push(O)}else w.push(function(N,O,P,M,Q,k,D){const V=N,K=O;let J=Math.abs(P/2),ie=Math.abs(M/2);J+=wn(.01*J,D),ie+=wn(.01*ie,D);let fe=Q,Z=k;for(;fe<0;)fe+=2*Math.PI,Z+=2*Math.PI;Z-fe>2*Math.PI&&(fe=0,Z=2*Math.PI);const pe=(Z-fe)/D.curveStepCount,Y=[];for(let te=fe;te<=Z;te+=pe)Y.push([V+J*Math.cos(te),K+ie*Math.sin(te)]);return Y.push([V+J*Math.cos(Z),K+ie*Math.sin(Z)]),Y.push([V,K]),mE([Y],D)}(t,i,s,c,u,f,E));return E.stroke!==LA&&w.push(T),this._d("arc",w,E)}curve(t,i){const s=this._o(i),c=[],u=fie(t,s);if(s.fill&&s.fill!==LA)if(s.fillStyle==="solid"){const f=fie(t,Object.assign(Object.assign({},s),{disableMultiStroke:!0,roughness:s.roughness?s.roughness+s.fillShapeRoughnessGain:0}));c.push({type:"fillPath",ops:this._mergedShape(f.ops)})}else{const f=[],p=t;if(p.length){const m=typeof p[0][0]=="number"?[p]:p;for(const E of m)E.length<3?f.push(...E):E.length===3?f.push(...G4(_ie([E[0],E[0],E[1],E[2]]),10,(1+s.roughness)/2)):f.push(...G4(_ie(E),10,(1+s.roughness)/2))}f.length&&c.push(mE([f],s))}return s.stroke!==LA&&c.push(u),this._d("curve",c,s)}polygon(t,i){const s=this._o(i),c=[],u=oB(t,!0,s);return s.fill&&(s.fillStyle==="solid"?c.push(W4([t],s)):c.push(mE([t],s))),s.stroke!==LA&&c.push(u),this._d("polygon",c,s)}path(t,i){const s=this._o(i),c=[];if(!t)return this._d("path",c,s);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const u=s.fill&&s.fill!=="transparent"&&s.fill!==LA,f=s.stroke!==LA,p=!!(s.simplification&&s.simplification<1),m=function(w,T,N){const O=zfe($fe(JQ(w))),P=[];let M=[],Q=[0,0],k=[];const D=()=>{k.length>=4&&M.push(...G4(k,T)),k=[]},V=()=>{D(),M.length&&(P.push(M),M=[])};for(const{key:J,data:ie}of O)switch(J){case"M":V(),Q=[ie[0],ie[1]],M.push(Q);break;case"L":D(),M.push([ie[0],ie[1]]);break;case"C":if(!k.length){const fe=M.length?M[M.length-1]:Q;k.push([fe[0],fe[1]])}k.push([ie[0],ie[1]]),k.push([ie[2],ie[3]]),k.push([ie[4],ie[5]]);break;case"Z":D(),M.push([Q[0],Q[1]])}if(V(),!N)return P;const K=[];for(const J of P){const ie=xWe(J,N);ie.length&&K.push(ie)}return K}(t,1,p?4-4*(s.simplification||1):(1+s.roughness)/2),E=pie(t,s);if(u)if(s.fillStyle==="solid")if(m.length===1){const w=pie(t,Object.assign(Object.assign({},s),{disableMultiStroke:!0,roughness:s.roughness?s.roughness+s.fillShapeRoughnessGain:0}));c.push({type:"fillPath",ops:this._mergedShape(w.ops)})}else c.push(W4(m,s));else c.push(mE(m,s));return f&&(p?m.forEach(w=>{c.push(oB(w,!1,s))}):c.push(E)),this._d("path",c,s)}opsToPath(t,i){let s="";for(const c of t.ops){const u=typeof i=="number"&&i>=0?c.data.map(f=>+f.toFixed(i)):c.data;switch(c.op){case"move":s+=`M${u[0]} ${u[1]} `;break;case"bcurveTo":s+=`C${u[0]} ${u[1]}, ${u[2]} ${u[3]}, ${u[4]} ${u[5]} `;break;case"lineTo":s+=`L${u[0]} ${u[1]} `}}return s.trim()}toPaths(t){const i=t.sets||[],s=t.options||this.defaultOptions,c=[];for(const u of i){let f=null;switch(u.type){case"path":f={d:this.opsToPath(u),stroke:s.stroke,strokeWidth:s.strokeWidth,fill:LA};break;case"fillPath":f={d:this.opsToPath(u),stroke:LA,strokeWidth:0,fill:s.fill||LA};break;case"fillSketch":f=this.fillSketch(u,s)}f&&c.push(f)}return c}fillSketch(t,i){let s=i.fillWeight;return s<0&&(s=i.strokeWidth/2),{d:this.opsToPath(t),stroke:i.fill||LA,strokeWidth:s,fill:LA}}_mergedShape(t){return t.filter((i,s)=>s===0||i.op!=="move")}}class UWe{constructor(t,i){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new wL(i)}draw(t){const i=t.sets||[],s=t.options||this.getDefaultOptions(),c=this.ctx,u=t.options.fixedDecimalPlaceDigits;for(const f of i)switch(f.type){case"path":c.save(),c.strokeStyle=s.stroke==="none"?"transparent":s.stroke,c.lineWidth=s.strokeWidth,s.strokeLineDash&&c.setLineDash(s.strokeLineDash),s.strokeLineDashOffset&&(c.lineDashOffset=s.strokeLineDashOffset),this._drawToContext(c,f,u),c.restore();break;case"fillPath":{c.save(),c.fillStyle=s.fill||"";const p=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(c,f,u,p),c.restore();break}case"fillSketch":this.fillSketch(c,f,s)}}fillSketch(t,i,s){let c=s.fillWeight;c<0&&(c=s.strokeWidth/2),t.save(),s.fillLineDash&&t.setLineDash(s.fillLineDash),s.fillLineDashOffset&&(t.lineDashOffset=s.fillLineDashOffset),t.strokeStyle=s.fill||"",t.lineWidth=c,this._drawToContext(t,i,s.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,i,s,c="nonzero"){t.beginPath();for(const u of i.ops){const f=typeof s=="number"&&s>=0?u.data.map(p=>+p.toFixed(s)):u.data;switch(u.op){case"move":t.moveTo(f[0],f[1]);break;case"bcurveTo":t.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"lineTo":t.lineTo(f[0],f[1])}}i.type==="fillPath"?t.fill(c):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,i,s,c,u){const f=this.gen.line(t,i,s,c,u);return this.draw(f),f}rectangle(t,i,s,c,u){const f=this.gen.rectangle(t,i,s,c,u);return this.draw(f),f}ellipse(t,i,s,c,u){const f=this.gen.ellipse(t,i,s,c,u);return this.draw(f),f}circle(t,i,s,c){const u=this.gen.circle(t,i,s,c);return this.draw(u),u}linearPath(t,i){const s=this.gen.linearPath(t,i);return this.draw(s),s}polygon(t,i){const s=this.gen.polygon(t,i);return this.draw(s),s}arc(t,i,s,c,u,f,p=!1,m){const E=this.gen.arc(t,i,s,c,u,f,p,m);return this.draw(E),E}curve(t,i){const s=this.gen.curve(t,i);return this.draw(s),s}path(t,i){const s=this.gen.path(t,i);return this.draw(s),s}}const uN="http://www.w3.org/2000/svg";class MWe{constructor(t,i){this.svg=t,this.gen=new wL(i)}draw(t){const i=t.sets||[],s=t.options||this.getDefaultOptions(),c=this.svg.ownerDocument||window.document,u=c.createElementNS(uN,"g"),f=t.options.fixedDecimalPlaceDigits;for(const p of i){let m=null;switch(p.type){case"path":m=c.createElementNS(uN,"path"),m.setAttribute("d",this.opsToPath(p,f)),m.setAttribute("stroke",s.stroke),m.setAttribute("stroke-width",s.strokeWidth+""),m.setAttribute("fill","none"),s.strokeLineDash&&m.setAttribute("stroke-dasharray",s.strokeLineDash.join(" ").trim()),s.strokeLineDashOffset&&m.setAttribute("stroke-dashoffset",`${s.strokeLineDashOffset}`);break;case"fillPath":m=c.createElementNS(uN,"path"),m.setAttribute("d",this.opsToPath(p,f)),m.setAttribute("stroke","none"),m.setAttribute("stroke-width","0"),m.setAttribute("fill",s.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||m.setAttribute("fill-rule","evenodd");break;case"fillSketch":m=this.fillSketch(c,p,s)}m&&u.appendChild(m)}return u}fillSketch(t,i,s){let c=s.fillWeight;c<0&&(c=s.strokeWidth/2);const u=t.createElementNS(uN,"path");return u.setAttribute("d",this.opsToPath(i,s.fixedDecimalPlaceDigits)),u.setAttribute("stroke",s.fill||""),u.setAttribute("stroke-width",c+""),u.setAttribute("fill","none"),s.fillLineDash&&u.setAttribute("stroke-dasharray",s.fillLineDash.join(" ").trim()),s.fillLineDashOffset&&u.setAttribute("stroke-dashoffset",`${s.fillLineDashOffset}`),u}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,i){return this.gen.opsToPath(t,i)}line(t,i,s,c,u){const f=this.gen.line(t,i,s,c,u);return this.draw(f)}rectangle(t,i,s,c,u){const f=this.gen.rectangle(t,i,s,c,u);return this.draw(f)}ellipse(t,i,s,c,u){const f=this.gen.ellipse(t,i,s,c,u);return this.draw(f)}circle(t,i,s,c){const u=this.gen.circle(t,i,s,c);return this.draw(u)}linearPath(t,i){const s=this.gen.linearPath(t,i);return this.draw(s)}polygon(t,i){const s=this.gen.polygon(t,i);return this.draw(s)}arc(t,i,s,c,u,f,p=!1,m){const E=this.gen.arc(t,i,s,c,u,f,p,m);return this.draw(E)}curve(t,i){const s=this.gen.curve(t,i);return this.draw(s)}path(t,i){const s=this.gen.path(t,i);return this.draw(s)}}var Zfe={canvas:(e,t)=>new UWe(e,t),svg:(e,t)=>new MWe(e,t),generator:e=>new wL(e),newSeed:()=>wL.newSeed()};const ZQ=Zfe.generator(),FWe=({x1:e,y1:t,x2:i,y2:s})=>ZQ.rectangle(e,t,i-e,s-t),VWe=({x1:e,y1:t,x2:i,y2:s})=>ZQ.circle(e,t,Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2))),QWe=({x1:e,y1:t,x2:i,y2:s})=>ZQ.line(e,t,i,s),SL=({x1:e,y1:t,x2:i,y2:s,toolType:c,id:u,text:f})=>{let p;switch(c){case Wn.RECTANGLE:return p=FWe({x1:e,y1:t,x2:i,y2:s}),{id:u,roughElement:p,type:c,x1:e,y1:t,x2:i,y2:s};case Wn.LINE:return p=QWe({x1:e,x2:i,y1:t,y2:s}),{id:u,roughElement:p,type:c,x1:e,y1:t,x2:i,y2:s};case Wn.PENCIL:return{id:u,type:c,points:[{x:e,y:t}]};case Wn.TEXT:return{id:u,type:c,x1:e,y1:t,x2:i,y2:s,text:f||""};case Wn.CIRCLE:return p=VWe({x1:e,y1:t,x2:i,y2:s}),{id:u,roughElement:p,type:c,x1:e,y1:t,x2:i,y2:s};default:throw new Error("Something went wrong when creating element")}},HWe=({index:e,newPoints:t},i)=>{let s=[...i];s[e]={...s[e],points:t};const c=s[e];DA.dispatch(nm(s)),YN(c)},Gb=({id:e,x1:t,y1:i,x2:s,y2:c,type:u,index:f,text:p},m)=>{const E=[...m];switch(u){case Wn.LINE:case Wn.RECTANGLE:case Wn.CIRCLE:const w=SL({id:e,x1:t,y1:i,x2:s,y2:c,toolType:u});E[f]=w,DA.dispatch(nm(E)),YN(w);break;case Wn.PENCIL:E[f]={...E[f],points:[...E[f].points,{x:s,y:c}]};const T=E[f];DA.dispatch(nm(E)),YN(T);break;case Wn.TEXT:const N=document.getElementById("canvas").getContext("2d").measureText(p).width,O=24;E[f]={...SL({id:e,x1:t,y1:i,x2:t+N,y2:i+O,toolType:u,text:p})};const P=E[f];DA.dispatch(nm(E)),YN(P);break;default:throw new Error("not implemented")}};function yie(e,t,i,s=c=>c){return e*s(.5-t*(.5-i))}function jWe(e){return[-e[0],-e[1]]}function uh(e,t){return[e[0]+t[0],e[1]+t[1]]}function Ud(e,t){return[e[0]-t[0],e[1]-t[1]]}function ah(e,t){return[e[0]*t,e[1]*t]}function KWe(e,t){return[e[0]/t,e[1]/t]}function $b(e){return[e[1],-e[0]]}function Eie(e,t){return e[0]*t[0]+e[1]*t[1]}function WWe(e,t){return e[0]===t[0]&&e[1]===t[1]}function GWe(e){return Math.hypot(e[0],e[1])}function $We(e){return e[0]*e[0]+e[1]*e[1]}function wie(e,t){return $We(Ud(e,t))}function ehe(e){return KWe(e,GWe(e))}function zWe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function zb(e,t,i){let s=Math.sin(i),c=Math.cos(i),u=e[0]-t[0],f=e[1]-t[1],p=u*c-f*s,m=u*s+f*c;return[p+t[0],m+t[1]]}function d8(e,t,i){return uh(e,ah(Ud(t,e),i))}function Sie(e,t,i){return uh(e,ah(t,i))}var{min:vE,PI:qWe}=Math,bie=.275,qb=qWe+1e-4;function YWe(e,t={}){let{size:i=16,smoothing:s=.5,thinning:c=.5,simulatePressure:u=!0,easing:f=Me=>Me,start:p={},end:m={},last:E=!1}=t,{cap:w=!0,easing:T=Me=>Me*(2-Me)}=p,{cap:N=!0,easing:O=Me=>--Me*Me*Me+1}=m;if(e.length===0||i<=0)return[];let P=e[e.length-1].runningLength,M=p.taper===!1?0:p.taper===!0?Math.max(i,P):p.taper,Q=m.taper===!1?0:m.taper===!0?Math.max(i,P):m.taper,k=Math.pow(i*s,2),D=[],V=[],K=e.slice(0,10).reduce((Me,Be)=>{let ke=Be.pressure;if(u){let Ke=vE(1,Be.distance/i),ht=vE(1,1-Ke);ke=vE(1,Me+(ht-Me)*(Ke*bie))}return(Me+ke)/2},e[0].pressure),J=yie(i,c,e[e.length-1].pressure,f),ie,fe=e[0].vector,Z=e[0].point,pe=Z,Y=Z,te=pe,le=!1;for(let Me=0;Me<e.length;Me++){let{pressure:Be}=e[Me],{point:ke,vector:Ke,distance:ht,runningLength:ve}=e[Me];if(Me<e.length-1&&P-ve<3)continue;if(c){if(u){let pt=vE(1,ht/i),at=vE(1,1-pt);Be=vE(1,K+(at-K)*(pt*bie))}J=yie(i,c,Be,f)}else J=i/2;ie===void 0&&(ie=J);let Oe=ve<M?T(ve/M):1,Ue=P-ve<Q?O((P-ve)/Q):1;J=Math.max(.01,J*Math.min(Oe,Ue));let Fe=(Me<e.length-1?e[Me+1]:e[Me]).vector,Qe=Me<e.length-1?Eie(Ke,Fe):1,We=Eie(Ke,fe)<0&&!le,et=Qe!==null&&Qe<0;if(We||et){let pt=ah($b(fe),J);for(let at=1/13,Rt=0;Rt<=1;Rt+=at)Y=zb(Ud(ke,pt),ke,qb*Rt),D.push(Y),te=zb(uh(ke,pt),ke,qb*-Rt),V.push(te);Z=Y,pe=te,et&&(le=!0);continue}if(le=!1,Me===e.length-1){let pt=ah($b(Ke),J);D.push(Ud(ke,pt)),V.push(uh(ke,pt));continue}let Ze=ah($b(d8(Fe,Ke,Qe)),J);Y=Ud(ke,Ze),(Me<=1||wie(Z,Y)>k)&&(D.push(Y),Z=Y),te=uh(ke,Ze),(Me<=1||wie(pe,te)>k)&&(V.push(te),pe=te),K=Be,fe=Ke}let ae=e[0].point.slice(0,2),ge=e.length>1?e[e.length-1].point.slice(0,2):uh(e[0].point,[1,1]),se=[],xe=[];if(e.length===1){if(!(M||Q)||E){let Me=Sie(ae,ehe($b(Ud(ae,ge))),-(ie||J)),Be=[];for(let ke=1/13,Ke=ke;Ke<=1;Ke+=ke)Be.push(zb(Me,ae,qb*2*Ke));return Be}}else{if(!(M||Q&&e.length===1))if(w)for(let Be=1/13,ke=Be;ke<=1;ke+=Be){let Ke=zb(V[0],ae,qb*ke);se.push(Ke)}else{let Be=Ud(D[0],V[0]),ke=ah(Be,.5),Ke=ah(Be,.51);se.push(Ud(ae,ke),Ud(ae,Ke),uh(ae,Ke),uh(ae,ke))}let Me=$b(jWe(e[e.length-1].vector));if(Q||M&&e.length===1)xe.push(ge);else if(N){let Be=Sie(ge,Me,J);for(let ke=1/29,Ke=ke;Ke<1;Ke+=ke)xe.push(zb(Be,ge,qb*3*Ke))}else xe.push(uh(ge,ah(Me,J)),uh(ge,ah(Me,J*.99)),Ud(ge,ah(Me,J*.99)),Ud(ge,ah(Me,J)))}return D.concat(xe,V.reverse(),se)}function XWe(e,t={}){var i;let{streamline:s=.5,size:c=16,last:u=!1}=t;if(e.length===0)return[];let f=.15+(1-s)*.85,p=Array.isArray(e[0])?e:e.map(({x:O,y:P,pressure:M=.5})=>[O,P,M]);if(p.length===2){let O=p[1];p=p.slice(0,-1);for(let P=1;P<5;P++)p.push(d8(p[0],O,P/4))}p.length===1&&(p=[...p,[...uh(p[0],[1,1]),...p[0].slice(2)]]);let m=[{point:[p[0][0],p[0][1]],pressure:p[0][2]>=0?p[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],E=!1,w=0,T=m[0],N=p.length-1;for(let O=1;O<p.length;O++){let P=u&&O===N?p[O].slice(0,2):d8(T.point,p[O],f);if(WWe(T.point,P))continue;let M=zWe(P,T.point);if(w+=M,O<N&&!E){if(w<c)continue;E=!0}T={point:P,pressure:p[O][2]>=0?p[O][2]:.5,vector:ehe(Ud(T.point,P)),distance:M,runningLength:w},m.push(T)}return m[0].vector=((i=m[1])==null?void 0:i.vector)||[0,0],m}function JWe(e,t={}){return YWe(XWe(e,t),t)}const ZWe=(e,t)=>{const i=JWe(t.points,{size:3}),s=iGe(i),c=new Path2D(s);e.fill(c)},eGe=(e,t)=>{e.textBaseline="top",e.font="24px sans-serif",e.fillText(t.text,t.x1,t.y1)},tGe=({roughCanvas:e,context:t,element:i})=>{switch(i.type){case Wn.RECTANGLE:case Wn.LINE:case Wn.CIRCLE:return e.draw(i.roughElement);case Wn.PENCIL:ZWe(t,i);break;case Wn.TEXT:eGe(t,i);break;default:throw new Error("Something went wrong when drawing element")}},rGe=e=>[Wn.RECTANGLE,Wn.LINE].includes(e),nGe=e=>{const{type:t,x1:i,y1:s,x2:c,y2:u}=e;if(t===Wn.RECTANGLE){const f=Math.min(i,c),p=Math.max(i,c),m=Math.max(s,u),E=Math.min(s,u);return{x1:f,y1:E,x2:p,y2:m}}if(t===Wn.LINE)return i<c||i===c&&s<2?{x1:i,y1:s,x2:c,y2:u}:{x1:c,y1:u,x2:i,y2:s}},AN=(e,t)=>(e+t)/2,iGe=(e,t=!0)=>{const i=e.length;if(i<4)return"";let s=e[0],c=e[1];const u=e[2];let f=`M${s[0].toFixed(2)},${s[1].toFixed(2)} Q${c[0].toFixed(2)},${c[1].toFixed(2)} ${AN(c[0],u[0]).toFixed(2)},${AN(c[1],u[1]).toFixed(2)} T`;for(let p=2,m=i-1;p<m;p++)s=e[p],c=e[p+1],f+=`${AN(s[0],c[0]).toFixed(2)},${AN(s[1],c[1]).toFixed(2)} `;return t&&(f+="Z"),f},_E=(e,t,i,s,c)=>Math.abs(e-i)<5&&Math.abs(t-s)?c:null,$4=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),Cie=({x1:e,x2:t,y1:i,y2:s,x:c,y:u,maxDistance:f=1})=>{const p={x:e,y:i},m={x:t,y:s},E={x:c,y:u},w=$4(p,m)-($4(p,E)+$4(m,E));return Math.abs(w)<f?Ms.INSIDE:null},oGe=(e,t,i)=>{const{type:s,x1:c,x2:u,y1:f,y2:p}=i;switch(s){case Wn.RECTANGLE:const m=_E(e,t,c,f,Ms.TOP_LEFT),E=_E(e,t,u,f,Ms.TOP_RIGHT),w=_E(e,t,c,p,Ms.BOTTOM_LEFT),T=_E(e,t,u,p,Ms.BOTTOM_RIGHT),N=e>=c&&e<=u&&t>=f&&t<=p?Ms.INSIDE:null;return m||E||w||T||N;case Wn.TEXT:return e>=c&&e<=u&&t>=f&&t<=p?Ms.INSIDE:null;case Wn.LINE:const O=Cie({x1:c,y1:f,x2:u,y2:p,x:e,y:t}),P=_E(e,t,c,f,Ms.START),M=_E(e,t,u,p,Ms.END);return P||M||O;case Wn.PENCIL:return i.points.some((k,D)=>{const V=i.points[D+1];return V?Cie({x1:k.x,y1:k.y,x2:V.x,y2:V.y,x:e,y:t,maxDistance:5}):!1})?Ms.INSIDE:null}},Tie=(e,t,i)=>i.map(s=>({...s,position:oGe(e,t,s)})).find(s=>s.position!==null&&s.position!==void 0),sGe=e=>{switch(e){case Ms.TOP_LEFT:case Ms.BOTTOM_RIGHT:case Ms.START:case Ms.END:return"nwse-resize";case Ms.TOP_RIGHT:case Ms.BOTTOM_LEFT:return"nesw-resize";default:return"move"}},aGe=(e,t,i,s)=>{const{x1:c,y1:u,x2:f,y2:p}=s;switch(i){case Ms.START:case Ms.TOP_LEFT:return{x1:e,y1:t,x2:f,y2:p};case Ms.TOP_RIGHT:return{x1:c,y1:t,x2:e,y2:p};case Ms.BOTTOM_LEFT:return{x1:e,y1:u,x2:f,y2:t};case Ms.END:case Ms.BOTTOM_RIGHT:return{x1:c,y1:u,x2:e,y2:t};default:return null}},tl=[];for(let e=0;e<256;++e)tl.push((e+256).toString(16).slice(1));function cGe(e,t=0){return(tl[e[t+0]]+tl[e[t+1]]+tl[e[t+2]]+tl[e[t+3]]+"-"+tl[e[t+4]]+tl[e[t+5]]+"-"+tl[e[t+6]]+tl[e[t+7]]+"-"+tl[e[t+8]]+tl[e[t+9]]+"-"+tl[e[t+10]]+tl[e[t+11]]+tl[e[t+12]]+tl[e[t+13]]+tl[e[t+14]]+tl[e[t+15]]).toLowerCase()}let z4;const lGe=new Uint8Array(16);function uGe(){if(!z4){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");z4=crypto.getRandomValues.bind(crypto)}return z4(lGe)}const AGe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rie={randomUUID:AGe};function Iie(e,t,i){var c;if(Rie.randomUUID&&!t&&!e)return Rie.randomUUID();e=e||{};const s=e.random??((c=e.rng)==null?void 0:c.call(e))??uGe();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){if(i=i||0,i<0||i+16>t.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let u=0;u<16;++u)t[i+u]=s[u];return t}return cGe(s)}let q4=!0,Oie;const dGe=()=>{const e=he.useRef(),t=he.useRef(),i=l0(O=>O.whiteboard.tool),s=l0(O=>O.whiteboard.elements),[c,u]=he.useState(null),[f,p]=he.useState(null),m=HAe();he.useLayoutEffect(()=>{const O=e.current,P=O.getContext("2d");P.clearRect(0,0,O.width,O.height);const M=Zfe.canvas(O);s.forEach(Q=>{tGe({roughCanvas:M,context:P,element:Q})})},[s]);const E=O=>{const{clientX:P,clientY:M}=O;if(!(f&&c===BA.WRITING))switch(i){case Wn.RECTANGLE:case Wn.LINE:case Wn.CIRCLE:case Wn.PENCIL:{const Q=SL({x1:P,y1:M,x2:P,y2:M,toolType:i,id:Iie()});u(BA.DRAWING),p(Q),m(E6(Q));break}case Wn.TEXT:{const Q=SL({x1:P,y1:M,x2:P,y2:M,toolType:i,id:Iie()});u(BA.WRITING),p(Q),m(E6(Q));break}case Wn.SELECTION:{const Q=Tie(P,M,s);if(Q&&(Q.type===Wn.RECTANGLE||Q.type===Wn.TEXT||Q.type===Wn.LINE)){u(Q.position===Ms.INSIDE?BA.MOVING:BA.RESIZING);const k=P-Q.x1,D=M-Q.y1;p({...Q,offsetX:k,offsetY:D})}if(Q&&Q.type===Wn.PENCIL){u(BA.MOVING);const k=Q.points.map(V=>P-V.x),D=Q.points.map(V=>M-V.y);p({...Q,xOffsets:k,yOffsets:D})}break}}},w=()=>{const O=s.findIndex(P=>P.id===(f==null?void 0:f.id));if(O!==-1&&(c===BA.DRAWING||c===BA.RESIZING)&&rGe(s[O].type)){const{x1:P,y1:M,x2:Q,y2:k}=nGe(s[O]);Gb({id:f.id,index:O,x1:P,x2:Q,y1:M,y2:k,type:s[O].type},s)}u(null),p(null)},T=O=>{const{clientX:P,clientY:M}=O;if(Oie={x:P,y:M},m(Ede({x:P,y:M,userId:localStorage.getItem("userId"),username:localStorage.getItem("username")})),q4&&(Wre({x:P,y:M}),q4=!1,console.log("sending position"),setTimeout(()=>{q4=!0,Wre(Oie)},[50])),c===BA.DRAWING){const Q=s.findIndex(k=>k.id===f.id);Q!==-1&&Gb({index:Q,id:s[Q].id,x1:s[Q].x1,y1:s[Q].y1,x2:P,y2:M,type:s[Q].type},s)}if(i===Wn.SELECTION){const Q=Tie(P,M,s);O.target.style.cursor=Q?sGe(Q.position):"default"}if(f&&i===Wn.SELECTION&&c===BA.MOVING&&f.type===Wn.PENCIL){const Q=f.points.map((D,V)=>({x:P-f.xOffsets[V],y:M-f.yOffsets[V]})),k=s.findIndex(D=>D.id===f.id);k!==-1&&HWe({index:k,newPoints:Q},s);return}if(i===Wn.SELECTION&&c===BA.MOVING&&f){const{id:Q,x1:k,x2:D,y1:V,y2:K,type:J,offsetX:ie,offsetY:fe,text:Z}=f,pe=D-k,Y=K-V,te=P-ie,le=M-fe,ae=s.findIndex(ge=>ge.id===f.id);ae!==-1&&Gb({id:Q,x1:te,y1:le,x2:te+pe,y2:le+Y,type:J,index:ae,text:Z},s)}if(i===Wn.SELECTION&&c===BA.RESIZING&&f){const{id:Q,type:k,position:D,...V}=f,{x1:K,y1:J,x2:ie,y2:fe}=aGe(P,M,D,V),Z=s.findIndex(pe=>pe.id===f.id);Z!==-1&&Gb({x1:K,x2:ie,y1:J,y2:fe,type:f.type,id:f.id,index:Z},s)}},N=O=>{const{id:P,x1:M,y1:Q,type:k}=f,D=s.findIndex(V=>V.id===f.id);D!==-1&&(Gb({id:P,x1:M,y1:Q,type:k,text:O.target.value,index:D},s),u(null),p(null))};return oe.jsxs(oe.Fragment,{children:[oe.jsx(wWe,{canvasRef:e}),c===BA.WRITING?oe.jsx("textarea",{ref:t,onBlur:N,style:{position:"absolute",top:f.y1-3,left:f.x1,font:"24px sans-serif",margin:0,padding:0,border:"1px dotted black",outline:0,resize:"auto",overflow:"hidden",whiteSpace:"pre",background:"transparent"}}):null,oe.jsx("canvas",{id:"canvas",onMouseDown:E,onMouseUp:w,onMouseMove:T,ref:e,width:window.innerWidth-5,height:window.innerHeight-5})]})},fGe=()=>{const e=l0(i=>i.cursor.cursors),t=localStorage.getItem("userId");return oe.jsx(oe.Fragment,{children:e.filter(i=>i.userId!==t).map(i=>oe.jsxs("div",{children:[oe.jsx("p",{style:{position:"absolute",left:i.x-30,top:i.y-30},children:i.username}),oe.jsx("img",{style:{position:"absolute",left:i.x,top:i.y,width:"30px"},className:"cursor",src:$Ae,alt:"cursor"})]},i.userId))})};function hGe(e,t){try{var i=global,s=i.document;if(typeof s<"u"&&s.createElement&&s.head&&s.head.appendChild){var c=s.querySelector('html meta[name="'.concat(encodeURI(e),'"]'))||s.createElement("meta");c.setAttribute("name",e),c.setAttribute("content",t),s.head.appendChild(c)}}catch{}}function pGe(){hGe("react-scroll-to-bottom:version","4.2.0")}var Yb=function(e){return e&&e.Math===Math&&e},Ac=Yb(typeof globalThis=="object"&&globalThis)||Yb(typeof window=="object"&&window)||Yb(typeof self=="object"&&self)||Yb(typeof Kd=="object"&&Kd)||Yb(typeof Kd=="object"&&Kd)||function(){return this}()||Function("return this")(),dc=function(e){try{return!!e()}catch{return!0}},gGe=dc,pk=!gGe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),mGe=pk,the=Function.prototype,Nie=the.apply,Bie=the.call,eH=typeof Reflect=="object"&&Reflect.apply||(mGe?Bie.bind(Nie):function(){return Bie.apply(Nie,arguments)}),rhe=pk,nhe=Function.prototype,f8=nhe.call,vGe=rhe&&nhe.bind.bind(f8,f8),fc=rhe?vGe:function(e){return function(){return f8.apply(e,arguments)}},ihe=fc,_Ge=ihe({}.toString),yGe=ihe("".slice),g_=function(e){return yGe(_Ge(e),8,-1)},EGe=g_,wGe=fc,tH=function(e){if(EGe(e)==="Function")return wGe(e)},Y4=typeof document=="object"&&document.all,jl=typeof Y4>"u"&&Y4!==void 0?function(e){return typeof e=="function"||e===Y4}:function(e){return typeof e=="function"},qT={},SGe=dc,Zu=!SGe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),bGe=pk,dN=Function.prototype.call,ng=bGe?dN.bind(dN):function(){return dN.apply(dN,arguments)},rH={},ohe={}.propertyIsEnumerable,she=Object.getOwnPropertyDescriptor,CGe=she&&!ohe.call({1:2},1);rH.f=CGe?function(t){var i=she(this,t);return!!i&&i.enumerable}:ohe;var YT=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},TGe=fc,RGe=dc,IGe=g_,X4=Object,OGe=TGe("".split),ahe=RGe(function(){return!X4("z").propertyIsEnumerable(0)})?function(e){return IGe(e)==="String"?OGe(e,""):X4(e)}:X4,nH=function(e){return e==null},NGe=nH,BGe=TypeError,iH=function(e){if(NGe(e))throw new BGe("Can't call method on "+e);return e},LGe=ahe,PGe=iH,ig=function(e){return LGe(PGe(e))},kGe=jl,vm=function(e){return typeof e=="object"?e!==null:kGe(e)},ll={},J4=ll,Z4=Ac,DGe=jl,Lie=function(e){return DGe(e)?e:void 0},og=function(e,t){return arguments.length<2?Lie(J4[e])||Lie(Z4[e]):J4[e]&&J4[e][t]||Z4[e]&&Z4[e][t]},xGe=fc,_m=xGe({}.isPrototypeOf),UGe=Ac,Pie=UGe.navigator,kie=Pie&&Pie.userAgent,oH=kie?String(kie):"",che=Ac,e3=oH,Die=che.process,xie=che.Deno,Uie=Die&&Die.versions||xie&&xie.version,Mie=Uie&&Uie.v8,ph,bL;Mie&&(ph=Mie.split("."),bL=ph[0]>0&&ph[0]<4?1:+(ph[0]+ph[1]));!bL&&e3&&(ph=e3.match(/Edge\/(\d+)/),(!ph||ph[1]>=74)&&(ph=e3.match(/Chrome\/(\d+)/),ph&&(bL=+ph[1])));var sH=bL,Fie=sH,MGe=dc,FGe=Ac,VGe=FGe.String,Mw=!!Object.getOwnPropertySymbols&&!MGe(function(){var e=Symbol("symbol detection");return!VGe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Fie&&Fie<41}),QGe=Mw,lhe=QGe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",HGe=og,jGe=jl,KGe=_m,WGe=lhe,GGe=Object,XT=WGe?function(e){return typeof e=="symbol"}:function(e){var t=HGe("Symbol");return jGe(t)&&KGe(t.prototype,GGe(e))},$Ge=String,gk=function(e){try{return $Ge(e)}catch{return"Object"}},zGe=jl,qGe=gk,YGe=TypeError,aH=function(e){if(zGe(e))return e;throw new YGe(qGe(e)+" is not a function")},XGe=aH,JGe=nH,cH=function(e,t){var i=e[t];return JGe(i)?void 0:XGe(i)},t3=ng,r3=jl,n3=vm,ZGe=TypeError,e$e=function(e,t){var i,s;if(t==="string"&&r3(i=e.toString)&&!n3(s=t3(i,e))||r3(i=e.valueOf)&&!n3(s=t3(i,e))||t!=="string"&&r3(i=e.toString)&&!n3(s=t3(i,e)))return s;throw new ZGe("Can't convert object to primitive value")},uhe={exports:{}},Vie=Ac,t$e=Object.defineProperty,r$e=function(e,t){try{t$e(Vie,e,{value:t,configurable:!0,writable:!0})}catch{Vie[e]=t}return t},n$e=Ac,i$e=r$e,Qie="__core-js_shared__",Hie=uhe.exports=n$e[Qie]||i$e(Qie,{});(Hie.versions||(Hie.versions=[])).push({version:"3.43.0",mode:"pure",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"});var lH=uhe.exports,jie=lH,Fw=function(e,t){return jie[e]||(jie[e]=t||{})},o$e=iH,s$e=Object,ym=function(e){return s$e(o$e(e))},a$e=fc,c$e=ym,l$e=a$e({}.hasOwnProperty),YA=Object.hasOwn||function(t,i){return l$e(c$e(t),i)},u$e=fc,A$e=0,d$e=Math.random(),f$e=u$e(1.1.toString),uH=function(e){return"Symbol("+(e===void 0?"":e)+")_"+f$e(++A$e+d$e,36)},h$e=Ac,p$e=Fw,Kie=YA,g$e=uH,m$e=Mw,v$e=lhe,WE=h$e.Symbol,i3=p$e("wks"),_$e=v$e?WE.for||WE:WE&&WE.withoutSetter||g$e,xc=function(e){return Kie(i3,e)||(i3[e]=m$e&&Kie(WE,e)?WE[e]:_$e("Symbol."+e)),i3[e]},y$e=ng,Wie=vm,Gie=XT,E$e=cH,w$e=e$e,S$e=xc,b$e=TypeError,C$e=S$e("toPrimitive"),T$e=function(e,t){if(!Wie(e)||Gie(e))return e;var i=E$e(e,C$e),s;if(i){if(t===void 0&&(t="default"),s=y$e(i,e,t),!Wie(s)||Gie(s))return s;throw new b$e("Can't convert object to primitive value")}return t===void 0&&(t="number"),w$e(e,t)},R$e=T$e,I$e=XT,AH=function(e){var t=R$e(e,"string");return I$e(t)?t:t+""},O$e=Ac,$ie=vm,h8=O$e.document,N$e=$ie(h8)&&$ie(h8.createElement),Ahe=function(e){return N$e?h8.createElement(e):{}},B$e=Zu,L$e=dc,P$e=Ahe,dhe=!B$e&&!L$e(function(){return Object.defineProperty(P$e("div"),"a",{get:function(){return 7}}).a!==7}),k$e=Zu,D$e=ng,x$e=rH,U$e=YT,M$e=ig,F$e=AH,V$e=YA,Q$e=dhe,zie=Object.getOwnPropertyDescriptor;qT.f=k$e?zie:function(t,i){if(t=M$e(t),i=F$e(i),Q$e)try{return zie(t,i)}catch{}if(V$e(t,i))return U$e(!D$e(x$e.f,t,i),t[i])};var H$e=dc,j$e=jl,K$e=/#|\.prototype\./,JT=function(e,t){var i=G$e[W$e(e)];return i===z$e?!0:i===$$e?!1:j$e(t)?H$e(t):!!t},W$e=JT.normalize=function(e){return String(e).replace(K$e,".").toLowerCase()},G$e=JT.data={},$$e=JT.NATIVE="N",z$e=JT.POLYFILL="P",q$e=JT,qie=tH,Y$e=aH,X$e=pk,J$e=qie(qie.bind),dH=function(e,t){return Y$e(e),t===void 0?e:X$e?J$e(e,t):function(){return e.apply(t,arguments)}},Oh={},Z$e=Zu,eze=dc,fhe=Z$e&&eze(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),tze=vm,rze=String,nze=TypeError,E0=function(e){if(tze(e))return e;throw new nze(rze(e)+" is not an object")},ize=Zu,oze=dhe,sze=fhe,fN=E0,Yie=AH,aze=TypeError,o3=Object.defineProperty,cze=Object.getOwnPropertyDescriptor,s3="enumerable",a3="configurable",c3="writable";Oh.f=ize?sze?function(t,i,s){if(fN(t),i=Yie(i),fN(s),typeof t=="function"&&i==="prototype"&&"value"in s&&c3 in s&&!s[c3]){var c=cze(t,i);c&&c[c3]&&(t[i]=s.value,s={configurable:a3 in s?s[a3]:c[a3],enumerable:s3 in s?s[s3]:c[s3],writable:!1})}return o3(t,i,s)}:o3:function(t,i,s){if(fN(t),i=Yie(i),fN(s),oze)try{return o3(t,i,s)}catch{}if("get"in s||"set"in s)throw new aze("Accessors not supported");return"value"in s&&(t[i]=s.value),t};var lze=Zu,uze=Oh,Aze=YT,mk=lze?function(e,t,i){return uze.f(e,t,Aze(1,i))}:function(e,t,i){return e[t]=i,e},Xb=Ac,dze=eH,fze=tH,hze=jl,pze=qT.f,gze=q$e,yE=ll,mze=dH,EE=mk,Xie=YA,vze=function(e){var t=function(i,s,c){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,s)}return new e(i,s,c)}return dze(e,this,arguments)};return t.prototype=e.prototype,t},Bo=function(e,t){var i=e.target,s=e.global,c=e.stat,u=e.proto,f=s?Xb:c?Xb[i]:Xb[i]&&Xb[i].prototype,p=s?yE:yE[i]||EE(yE,i,{})[i],m=p.prototype,E,w,T,N,O,P,M,Q,k;for(N in t)E=gze(s?N:i+(c?".":"#")+N,e.forced),w=!E&&f&&Xie(f,N),P=p[N],w&&(e.dontCallGetSet?(k=pze(f,N),M=k&&k.value):M=f[N]),O=w&&M?M:t[N],!(!E&&!u&&typeof P==typeof O)&&(e.bind&&w?Q=mze(O,Xb):e.wrap&&w?Q=vze(O):u&&hze(O)?Q=fze(O):Q=O,(e.sham||O&&O.sham||P&&P.sham)&&EE(Q,"sham",!0),EE(p,N,Q),u&&(T=i+"Prototype",Xie(yE,T)||EE(yE,T,{}),EE(yE[T],N,O),e.real&&m&&(E||!m[N])&&EE(m,N,O)))},_ze=g_,Vw=Array.isArray||function(t){return _ze(t)==="Array"},yze=Bo,Eze=Vw;yze({target:"Array",stat:!0},{isArray:Eze});var wze=ll,Sze=wze.Array.isArray,bze=Sze,hhe=bze,Cze=hhe,Tze=Cze,Rze=Tze,Ize=Rze,Oze=Ize;const phe=$i(Oze);function Nze(e){if(phe(e))return e}var Bze=Math.ceil,Lze=Math.floor,Pze=Math.trunc||function(t){var i=+t;return(i>0?Lze:Bze)(i)},kze=Pze,vk=function(e){var t=+e;return t!==t||t===0?0:kze(t)},Dze=vk,xze=Math.min,Uze=function(e){var t=Dze(e);return t>0?xze(t,9007199254740991):0},Mze=Uze,m_=function(e){return Mze(e.length)},Fze=TypeError,Vze=9007199254740991,fH=function(e){if(e>Vze)throw Fze("Maximum allowed index exceeded");return e},Qze=Zu,Hze=Oh,jze=YT,ZT=function(e,t,i){Qze?Hze.f(e,t,jze(0,i)):e[t]=i},Kze=xc,Wze=Kze("toStringTag"),ghe={};ghe[Wze]="z";var hH=String(ghe)==="[object z]",Gze=hH,$ze=jl,aB=g_,zze=xc,qze=zze("toStringTag"),Yze=Object,Xze=aB(function(){return arguments}())==="Arguments",Jze=function(e,t){try{return e[t]}catch{}},eR=Gze?aB:function(e){var t,i,s;return e===void 0?"Undefined":e===null?"Null":typeof(i=Jze(t=Yze(e),qze))=="string"?i:Xze?aB(t):(s=aB(t))==="Object"&&$ze(t.callee)?"Arguments":s},Zze=fc,eqe=jl,p8=lH,tqe=Zze(Function.toString);eqe(p8.inspectSource)||(p8.inspectSource=function(e){return tqe(e)});var rqe=p8.inspectSource,nqe=fc,iqe=dc,mhe=jl,oqe=eR,sqe=og,aqe=rqe,vhe=function(){},_he=sqe("Reflect","construct"),pH=/^\s*(?:class|function)\b/,cqe=nqe(pH.exec),lqe=!pH.test(vhe),Jb=function(t){if(!mhe(t))return!1;try{return _he(vhe,[],t),!0}catch{return!1}},yhe=function(t){if(!mhe(t))return!1;switch(oqe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return lqe||!!cqe(pH,aqe(t))}catch{return!0}};yhe.sham=!0;var gH=!_he||iqe(function(){var e;return Jb(Jb.call)||!Jb(Object)||!Jb(function(){e=!0})||e})?yhe:Jb,Jie=Vw,uqe=gH,Aqe=vm,dqe=xc,fqe=dqe("species"),Zie=Array,hqe=function(e){var t;return Jie(e)&&(t=e.constructor,uqe(t)&&(t===Zie||Jie(t.prototype))?t=void 0:Aqe(t)&&(t=t[fqe],t===null&&(t=void 0))),t===void 0?Zie:t},pqe=hqe,mH=function(e,t){return new(pqe(e))(t===0?0:t)},gqe=dc,mqe=xc,vqe=sH,_qe=mqe("species"),_k=function(e){return vqe>=51||!gqe(function(){var t=[],i=t.constructor={};return i[_qe]=function(){return{foo:1}},t[e](Boolean).foo!==1})},yqe=Bo,Eqe=dc,wqe=Vw,Sqe=vm,bqe=ym,Cqe=m_,eoe=fH,toe=ZT,Tqe=mH,Rqe=_k,Iqe=xc,Oqe=sH,Ehe=Iqe("isConcatSpreadable"),Nqe=Oqe>=51||!Eqe(function(){var e=[];return e[Ehe]=!1,e.concat()[0]!==e}),Bqe=function(e){if(!Sqe(e))return!1;var t=e[Ehe];return t!==void 0?!!t:wqe(e)},Lqe=!Nqe||!Rqe("concat");yqe({target:"Array",proto:!0,arity:1,forced:Lqe},{concat:function(t){var i=bqe(this),s=Tqe(i,0),c=0,u,f,p,m,E;for(u=-1,p=arguments.length;u<p;u++)if(E=u===-1?i:arguments[u],Bqe(E))for(m=Cqe(E),eoe(c+m),f=0;f<m;f++,c++)f in E&&toe(s,c,E[f]);else eoe(c+1),toe(s,c++,E);return s.length=c,s}});var Pqe=eR,kqe=String,tR=function(e){if(Pqe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return kqe(e)},yk={},Dqe=vk,xqe=Math.max,Uqe=Math.min,vH=function(e,t){var i=Dqe(e);return i<0?xqe(i+t,0):Uqe(i,t)},Mqe=ig,Fqe=vH,Vqe=m_,roe=function(e){return function(t,i,s){var c=Mqe(t),u=Vqe(c);if(u===0)return!e&&-1;var f=Fqe(s,u),p;if(e&&i!==i){for(;u>f;)if(p=c[f++],p!==p)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===i)return e||f||0;return!e&&-1}},whe={includes:roe(!0),indexOf:roe(!1)},Ek={},Qqe=fc,l3=YA,Hqe=ig,jqe=whe.indexOf,Kqe=Ek,noe=Qqe([].push),She=function(e,t){var i=Hqe(e),s=0,c=[],u;for(u in i)!l3(Kqe,u)&&l3(i,u)&&noe(c,u);for(;t.length>s;)l3(i,u=t[s++])&&(~jqe(c,u)||noe(c,u));return c},_H=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Wqe=She,Gqe=_H,yH=Object.keys||function(t){return Wqe(t,Gqe)},$qe=Zu,zqe=fhe,qqe=Oh,Yqe=E0,Xqe=ig,Jqe=yH;yk.f=$qe&&!zqe?Object.defineProperties:function(t,i){Yqe(t);for(var s=Xqe(i),c=Jqe(i),u=c.length,f=0,p;u>f;)qqe.f(t,p=c[f++],s[p]);return t};var Zqe=og,eYe=Zqe("document","documentElement"),tYe=Fw,rYe=uH,ioe=tYe("keys"),wk=function(e){return ioe[e]||(ioe[e]=rYe(e))},nYe=E0,iYe=yk,ooe=_H,oYe=Ek,sYe=eYe,aYe=Ahe,cYe=wk,soe=">",aoe="<",g8="prototype",m8="script",bhe=cYe("IE_PROTO"),u3=function(){},Che=function(e){return aoe+m8+soe+e+aoe+"/"+m8+soe},coe=function(e){e.write(Che("")),e.close();var t=e.parentWindow.Object;return e=null,t},lYe=function(){var e=aYe("iframe"),t="java"+m8+":",i;return e.style.display="none",sYe.appendChild(e),e.src=String(t),i=e.contentWindow.document,i.open(),i.write(Che("document.F=Object")),i.close(),i.F},hN,cB=function(){try{hN=new ActiveXObject("htmlfile")}catch{}cB=typeof document<"u"?document.domain&&hN?coe(hN):lYe():coe(hN);for(var e=ooe.length;e--;)delete cB[g8][ooe[e]];return cB()};oYe[bhe]=!0;var EH=Object.create||function(t,i){var s;return t!==null?(u3[g8]=nYe(t),s=new u3,u3[g8]=null,s[bhe]=t):s=cB(),i===void 0?s:iYe.f(s,i)},Sk={},uYe=She,AYe=_H,dYe=AYe.concat("length","prototype");Sk.f=Object.getOwnPropertyNames||function(t){return uYe(t,dYe)};var The={},fYe=fc,bk=fYe([].slice),hYe=g_,pYe=ig,Rhe=Sk.f,gYe=bk,Ihe=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mYe=function(e){try{return Rhe(e)}catch{return gYe(Ihe)}};The.f=function(t){return Ihe&&hYe(t)==="Window"?mYe(t):Rhe(pYe(t))};var Ck={};Ck.f=Object.getOwnPropertySymbols;var vYe=mk,Tk=function(e,t,i,s){return s&&s.enumerable?e[t]=i:vYe(e,t,i),e},_Ye=Oh,yYe=function(e,t,i){return _Ye.f(e,t,i)},rR={},EYe=xc;rR.f=EYe;var loe=ll,wYe=YA,SYe=rR,bYe=Oh.f,Hs=function(e){var t=loe.Symbol||(loe.Symbol={});wYe(t,e)||bYe(t,e,{value:SYe.f(e)})},CYe=ng,TYe=og,RYe=xc,IYe=Tk,Ohe=function(){var e=TYe("Symbol"),t=e&&e.prototype,i=t&&t.valueOf,s=RYe("toPrimitive");t&&!t[s]&&IYe(t,s,function(c){return CYe(i,this)},{arity:1})},OYe=hH,NYe=eR,BYe=OYe?{}.toString:function(){return"[object "+NYe(this)+"]"},LYe=hH,PYe=Oh.f,kYe=mk,DYe=YA,xYe=BYe,UYe=xc,uoe=UYe("toStringTag"),Qw=function(e,t,i,s){var c=i?e:e&&e.prototype;c&&(DYe(c,uoe)||PYe(c,uoe,{configurable:!0,value:t}),s&&!LYe&&kYe(c,"toString",xYe))},MYe=Ac,FYe=jl,Aoe=MYe.WeakMap,VYe=FYe(Aoe)&&/native code/.test(String(Aoe)),QYe=VYe,Nhe=Ac,HYe=vm,jYe=mk,A3=YA,d3=lH,KYe=wk,WYe=Ek,doe="Object already initialized",v8=Nhe.TypeError,GYe=Nhe.WeakMap,CL,CT,TL,$Ye=function(e){return TL(e)?CT(e):CL(e,{})},zYe=function(e){return function(t){var i;if(!HYe(t)||(i=CT(t)).type!==e)throw new v8("Incompatible receiver, "+e+" required");return i}};if(QYe||d3.state){var xp=d3.state||(d3.state=new GYe);xp.get=xp.get,xp.has=xp.has,xp.set=xp.set,CL=function(e,t){if(xp.has(e))throw new v8(doe);return t.facade=e,xp.set(e,t),t},CT=function(e){return xp.get(e)||{}},TL=function(e){return xp.has(e)}}else{var wE=KYe("state");WYe[wE]=!0,CL=function(e,t){if(A3(e,wE))throw new v8(doe);return t.facade=e,jYe(e,wE,t),t},CT=function(e){return A3(e,wE)?e[wE]:{}},TL=function(e){return A3(e,wE)}}var wH={set:CL,get:CT,has:TL,enforce:$Ye,getterFor:zYe},qYe=dH,YYe=fc,XYe=ahe,JYe=ym,ZYe=m_,eXe=mH,foe=YYe([].push),Ov=function(e){var t=e===1,i=e===2,s=e===3,c=e===4,u=e===6,f=e===7,p=e===5||u;return function(m,E,w,T){for(var N=JYe(m),O=XYe(N),P=ZYe(O),M=qYe(E,w),Q=0,k=T||eXe,D=t?k(m,P):i||f?k(m,0):void 0,V,K;P>Q;Q++)if((p||Q in O)&&(V=O[Q],K=M(V,Q,N),e))if(t)D[Q]=K;else if(K)switch(e){case 3:return!0;case 5:return V;case 6:return Q;case 2:foe(D,V)}else switch(e){case 4:return!1;case 7:foe(D,V)}return u?-1:s||c?c:D}},SH={forEach:Ov(0),map:Ov(1),filter:Ov(2),some:Ov(3),every:Ov(4),find:Ov(5),findIndex:Ov(6),filterReject:Ov(7)},Rk=Bo,nR=Ac,bH=ng,tXe=fc,Sw=Zu,bw=Mw,rXe=dc,Lc=YA,nXe=_m,_8=E0,Ik=ig,CH=AH,iXe=tR,y8=YT,Cw=EH,Bhe=yH,oXe=Sk,Lhe=The,sXe=Ck,Phe=qT,khe=Oh,aXe=yk,Dhe=rH,hoe=Tk,cXe=yYe,TH=Fw,lXe=wk,xhe=Ek,poe=uH,uXe=xc,AXe=rR,dXe=Hs,fXe=Ohe,hXe=Qw,Uhe=wH,Ok=SH.forEach,Hu=lXe("hidden"),Nk="Symbol",TT="prototype",pXe=Uhe.set,goe=Uhe.getterFor(Nk),mh=Object[TT],Y1=nR.Symbol,yC=Y1&&Y1[TT],gXe=nR.RangeError,mXe=nR.TypeError,f3=nR.QObject,Mhe=Phe.f,X1=khe.f,Fhe=Lhe.f,vXe=Dhe.f,Vhe=tXe([].push),pm=TH("symbols"),iR=TH("op-symbols"),_Xe=TH("wks"),E8=!f3||!f3[TT]||!f3[TT].findChild,Qhe=function(e,t,i){var s=Mhe(mh,t);s&&delete mh[t],X1(e,t,i),s&&e!==mh&&X1(mh,t,s)},w8=Sw&&rXe(function(){return Cw(X1({},"a",{get:function(){return X1(this,"a",{value:7}).a}})).a!==7})?Qhe:X1,h3=function(e,t){var i=pm[e]=Cw(yC);return pXe(i,{type:Nk,tag:e,description:t}),Sw||(i.description=t),i},Bk=function(t,i,s){t===mh&&Bk(iR,i,s),_8(t);var c=CH(i);return _8(s),Lc(pm,c)?(s.enumerable?(Lc(t,Hu)&&t[Hu][c]&&(t[Hu][c]=!1),s=Cw(s,{enumerable:y8(0,!1)})):(Lc(t,Hu)||X1(t,Hu,y8(1,Cw(null))),t[Hu][c]=!0),w8(t,c,s)):X1(t,c,s)},RH=function(t,i){_8(t);var s=Ik(i),c=Bhe(s).concat(Whe(s));return Ok(c,function(u){(!Sw||bH(Hhe,s,u))&&Bk(t,u,s[u])}),t},yXe=function(t,i){return i===void 0?Cw(t):RH(Cw(t),i)},Hhe=function(t){var i=CH(t),s=bH(vXe,this,i);return this===mh&&Lc(pm,i)&&!Lc(iR,i)?!1:s||!Lc(this,i)||!Lc(pm,i)||Lc(this,Hu)&&this[Hu][i]?s:!0},jhe=function(t,i){var s=Ik(t),c=CH(i);if(!(s===mh&&Lc(pm,c)&&!Lc(iR,c))){var u=Mhe(s,c);return u&&Lc(pm,c)&&!(Lc(s,Hu)&&s[Hu][c])&&(u.enumerable=!0),u}},Khe=function(t){var i=Fhe(Ik(t)),s=[];return Ok(i,function(c){!Lc(pm,c)&&!Lc(xhe,c)&&Vhe(s,c)}),s},Whe=function(e){var t=e===mh,i=Fhe(t?iR:Ik(e)),s=[];return Ok(i,function(c){Lc(pm,c)&&(!t||Lc(mh,c))&&Vhe(s,pm[c])}),s};bw||(Y1=function(){if(nXe(yC,this))throw new mXe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:iXe(arguments[0]),i=poe(t),s=function(c){var u=this===void 0?nR:this;u===mh&&bH(s,iR,c),Lc(u,Hu)&&Lc(u[Hu],i)&&(u[Hu][i]=!1);var f=y8(1,c);try{w8(u,i,f)}catch(p){if(!(p instanceof gXe))throw p;Qhe(u,i,f)}};return Sw&&E8&&w8(mh,i,{configurable:!0,set:s}),h3(i,t)},yC=Y1[TT],hoe(yC,"toString",function(){return goe(this).tag}),hoe(Y1,"withoutSetter",function(e){return h3(poe(e),e)}),Dhe.f=Hhe,khe.f=Bk,aXe.f=RH,Phe.f=jhe,oXe.f=Lhe.f=Khe,sXe.f=Whe,AXe.f=function(e){return h3(uXe(e),e)},Sw&&cXe(yC,"description",{configurable:!0,get:function(){return goe(this).description}}));Rk({global:!0,constructor:!0,wrap:!0,forced:!bw,sham:!bw},{Symbol:Y1});Ok(Bhe(_Xe),function(e){dXe(e)});Rk({target:Nk,stat:!0,forced:!bw},{useSetter:function(){E8=!0},useSimple:function(){E8=!1}});Rk({target:"Object",stat:!0,forced:!bw,sham:!Sw},{create:yXe,defineProperty:Bk,defineProperties:RH,getOwnPropertyDescriptor:jhe});Rk({target:"Object",stat:!0,forced:!bw},{getOwnPropertyNames:Khe});fXe();hXe(Y1,Nk);xhe[Hu]=!0;var EXe=Mw,Ghe=EXe&&!!Symbol.for&&!!Symbol.keyFor,wXe=Bo,SXe=og,bXe=YA,CXe=tR,$he=Fw,TXe=Ghe,p3=$he("string-to-symbol-registry"),RXe=$he("symbol-to-string-registry");wXe({target:"Symbol",stat:!0,forced:!TXe},{for:function(e){var t=CXe(e);if(bXe(p3,t))return p3[t];var i=SXe("Symbol")(t);return p3[t]=i,RXe[i]=t,i}});var IXe=Bo,OXe=YA,NXe=XT,BXe=gk,LXe=Fw,PXe=Ghe,moe=LXe("symbol-to-string-registry");IXe({target:"Symbol",stat:!0,forced:!PXe},{keyFor:function(t){if(!NXe(t))throw new TypeError(BXe(t)+" is not a symbol");if(OXe(moe,t))return moe[t]}});var kXe=fc,voe=Vw,DXe=jl,_oe=g_,xXe=tR,yoe=kXe([].push),UXe=function(e){if(DXe(e))return e;if(voe(e)){for(var t=e.length,i=[],s=0;s<t;s++){var c=e[s];typeof c=="string"?yoe(i,c):(typeof c=="number"||_oe(c)==="Number"||_oe(c)==="String")&&yoe(i,xXe(c))}var u=i.length,f=!0;return function(p,m){if(f)return f=!1,m;if(voe(this))return m;for(var E=0;E<u;E++)if(i[E]===p)return m}}},MXe=Bo,zhe=og,qhe=eH,FXe=ng,oR=fc,Yhe=dc,Eoe=jl,woe=XT,Xhe=bk,VXe=UXe,QXe=Mw,HXe=String,n0=zhe("JSON","stringify"),pN=oR(/./.exec),Soe=oR("".charAt),jXe=oR("".charCodeAt),KXe=oR("".replace),WXe=oR(1.1.toString),GXe=/[\uD800-\uDFFF]/g,boe=/^[\uD800-\uDBFF]$/,Coe=/^[\uDC00-\uDFFF]$/,Toe=!QXe||Yhe(function(){var e=zhe("Symbol")("stringify detection");return n0([e])!=="[null]"||n0({a:e})!=="{}"||n0(Object(e))!=="{}"}),Roe=Yhe(function(){return n0("\uDF06\uD834")!=='"\\udf06\\ud834"'||n0("\uDEAD")!=='"\\udead"'}),$Xe=function(e,t){var i=Xhe(arguments),s=VXe(t);if(!(!Eoe(s)&&(e===void 0||woe(e))))return i[1]=function(c,u){if(Eoe(s)&&(u=FXe(s,this,HXe(c),u)),!woe(u))return u},qhe(n0,null,i)},zXe=function(e,t,i){var s=Soe(i,t-1),c=Soe(i,t+1);return pN(boe,e)&&!pN(Coe,c)||pN(Coe,e)&&!pN(boe,s)?"\\u"+WXe(jXe(e,0),16):e};n0&&MXe({target:"JSON",stat:!0,arity:3,forced:Toe||Roe},{stringify:function(t,i,s){var c=Xhe(arguments),u=qhe(Toe?$Xe:n0,null,c);return Roe&&typeof u=="string"?KXe(u,GXe,zXe):u}});var qXe=Bo,YXe=Mw,XXe=dc,Jhe=Ck,JXe=ym,ZXe=!YXe||XXe(function(){Jhe.f(1)});qXe({target:"Object",stat:!0,forced:ZXe},{getOwnPropertySymbols:function(t){var i=Jhe.f;return i?i(JXe(t)):[]}});var eJe=Hs;eJe("asyncDispose");var tJe=Hs;tJe("asyncIterator");var rJe=Hs;rJe("dispose");var nJe=Hs;nJe("hasInstance");var iJe=Hs;iJe("isConcatSpreadable");var oJe=Hs;oJe("iterator");var sJe=Hs;sJe("match");var aJe=Hs;aJe("matchAll");var cJe=Hs;cJe("replace");var lJe=Hs;lJe("search");var uJe=Hs;uJe("species");var AJe=Hs;AJe("split");var dJe=Hs,fJe=Ohe;dJe("toPrimitive");fJe();var hJe=og,pJe=Hs,gJe=Qw;pJe("toStringTag");gJe(hJe("Symbol"),"Symbol");var mJe=Hs;mJe("unscopables");var vJe=Ac,_Je=Qw;_Je(vJe.JSON,"JSON",!0);var yJe=ll,EJe=yJe.Symbol,Hw={},S8=Zu,wJe=YA,Zhe=Function.prototype,SJe=S8&&Object.getOwnPropertyDescriptor,IH=wJe(Zhe,"name"),bJe=IH&&(function(){}).name==="something",CJe=IH&&(!S8||S8&&SJe(Zhe,"name").configurable),TJe={EXISTS:IH,PROPER:bJe,CONFIGURABLE:CJe},RJe=dc,IJe=!RJe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),OJe=YA,NJe=jl,BJe=ym,LJe=wk,PJe=IJe,Ioe=LJe("IE_PROTO"),b8=Object,kJe=b8.prototype,epe=PJe?b8.getPrototypeOf:function(e){var t=BJe(e);if(OJe(t,Ioe))return t[Ioe];var i=t.constructor;return NJe(i)&&t instanceof i?i.prototype:t instanceof b8?kJe:null},DJe=dc,xJe=jl,UJe=vm,MJe=EH,Ooe=epe,FJe=Tk,VJe=xc,C8=VJe("iterator"),tpe=!1,om,g3,m3;[].keys&&(m3=[].keys(),"next"in m3?(g3=Ooe(Ooe(m3)),g3!==Object.prototype&&(om=g3)):tpe=!0);var QJe=!UJe(om)||DJe(function(){var e={};return om[C8].call(e)!==e});QJe?om={}:om=MJe(om);xJe(om[C8])||FJe(om,C8,function(){return this});var rpe={IteratorPrototype:om,BUGGY_SAFARI_ITERATORS:tpe},HJe=rpe.IteratorPrototype,jJe=EH,KJe=YT,WJe=Qw,GJe=Hw,$Je=function(){return this},zJe=function(e,t,i,s){var c=t+" Iterator";return e.prototype=jJe(HJe,{next:KJe(+!s,i)}),WJe(e,c,!1,!0),GJe[c]=$Je,e},qJe=Bo,YJe=ng,npe=TJe,XJe=zJe,JJe=epe,ZJe=Qw,Noe=Tk,eZe=xc,Boe=Hw,ipe=rpe,tZe=npe.PROPER;npe.CONFIGURABLE;ipe.IteratorPrototype;var gN=ipe.BUGGY_SAFARI_ITERATORS,v3=eZe("iterator"),Loe="keys",mN="values",Poe="entries",rZe=function(){return this},ope=function(e,t,i,s,c,u,f){XJe(i,t,s);var p=function(k){if(k===c&&N)return N;if(!gN&&k&&k in w)return w[k];switch(k){case Loe:return function(){return new i(this,k)};case mN:return function(){return new i(this,k)};case Poe:return function(){return new i(this,k)}}return function(){return new i(this)}},m=t+" Iterator",E=!1,w=e.prototype,T=w[v3]||w["@@iterator"]||c&&w[c],N=!gN&&T||p(c),O=t==="Array"&&w.entries||T,P,M,Q;if(O&&(P=JJe(O.call(new e)),P!==Object.prototype&&P.next&&(ZJe(P,m,!0,!0),Boe[m]=rZe)),tZe&&c===mN&&T&&T.name!==mN&&(E=!0,N=function(){return YJe(T,this)}),c)if(M={values:p(mN),keys:u?N:p(Loe),entries:p(Poe)},f)for(Q in M)(gN||E||!(Q in w))&&Noe(w,Q,M[Q]);else qJe({target:t,proto:!0,forced:gN||E},M);return f&&w[v3]!==N&&Noe(w,v3,N,{name:c}),Boe[t]=N,M},spe=function(e,t){return{value:e,done:t}},nZe=ig,koe=Hw,ape=wH;Oh.f;var iZe=ope,vN=spe,cpe="Array Iterator",oZe=ape.set,sZe=ape.getterFor(cpe);iZe(Array,"Array",function(e,t){oZe(this,{type:cpe,target:nZe(e),index:0,kind:t})},function(){var e=sZe(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=null,vN(void 0,!0);switch(e.kind){case"keys":return vN(i,!1);case"values":return vN(t[i],!1)}return vN([i,t[i]],!1)},"values");koe.Arguments=koe.Array;var aZe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},cZe=aZe,lZe=Ac,uZe=Qw,Doe=Hw;for(var _3 in cZe)uZe(lZe[_3],_3),Doe[_3]=Doe.Array;var AZe=EJe,dZe=AZe,fZe=xc,hZe=Oh.f,xoe=fZe("metadata"),Uoe=Function.prototype;Uoe[xoe]===void 0&&hZe(Uoe,xoe,{value:null});var pZe=Hs;pZe("metadata");var gZe=dZe,mZe=gZe,vZe=og,_Ze=fc,OH=vZe("Symbol"),yZe=OH.keyFor,EZe=_Ze(OH.prototype.valueOf),lpe=OH.isRegisteredSymbol||function(t){try{return yZe(EZe(t))!==void 0}catch{return!1}},wZe=Bo,SZe=lpe;wZe({target:"Symbol",stat:!0},{isRegisteredSymbol:SZe});var bZe=Fw,upe=og,CZe=fc,TZe=XT,RZe=xc,RL=upe("Symbol"),Moe=RL.isWellKnownSymbol,Ape=upe("Object","getOwnPropertyNames"),IZe=CZe(RL.prototype.valueOf),Foe=bZe("wks");for(var y3=0,Voe=Ape(RL),OZe=Voe.length;y3<OZe;y3++)try{var Qoe=Voe[y3];TZe(RL[Qoe])&&RZe(Qoe)}catch{}var dpe=function(t){if(Moe&&Moe(t))return!0;try{for(var i=IZe(t),s=0,c=Ape(Foe),u=c.length;s<u;s++)if(Foe[c[s]]==i)return!0}catch{}return!1},NZe=Bo,BZe=dpe;NZe({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:BZe});var LZe=Hs;LZe("customMatcher");var PZe=Hs;PZe("observable");var kZe=Bo,DZe=lpe;kZe({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:DZe});var xZe=Bo,UZe=dpe;xZe({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:UZe});var MZe=Hs;MZe("matcher");var FZe=Hs;FZe("metadataKey");var VZe=Hs;VZe("patternMatch");var QZe=Hs;QZe("replaceAll");var HZe=mZe,jZe=HZe,KZe=jZe;const GE=$i(KZe);var NH=fc,WZe=vk,GZe=tR,$Ze=iH,zZe=NH("".charAt),Hoe=NH("".charCodeAt),qZe=NH("".slice),joe=function(e){return function(t,i){var s=GZe($Ze(t)),c=WZe(i),u=s.length,f,p;return c<0||c>=u?e?"":void 0:(f=Hoe(s,c),f<55296||f>56319||c+1===u||(p=Hoe(s,c+1))<56320||p>57343?e?zZe(s,c):f:e?qZe(s,c,c+2):(f-55296<<10)+(p-56320)+65536)}},YZe={codeAt:joe(!1),charAt:joe(!0)},XZe=YZe.charAt,JZe=tR,fpe=wH,ZZe=ope,Koe=spe,hpe="String Iterator",eet=fpe.set,tet=fpe.getterFor(hpe);ZZe(String,"String",function(e){eet(this,{type:hpe,string:JZe(e),index:0})},function(){var t=tet(this),i=t.string,s=t.index,c;return s>=i.length?Koe(void 0,!0):(c=XZe(i,s),t.index+=c.length,Koe(c,!1))});var ret=eR,Woe=cH,net=nH,iet=Hw,oet=xc,set=oet("iterator"),BH=function(e){if(!net(e))return Woe(e,set)||Woe(e,"@@iterator")||iet[ret(e)]},aet=BH,cet=aet,uet=cet,Aet=uet,det=Aet,fet=det,het=fet,pet=het,get=pet;const ppe=$i(get);var met=Zu,vet=Vw,_et=TypeError,yet=Object.getOwnPropertyDescriptor,Eet=met&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),gpe=Eet?function(e,t){if(vet(e)&&!yet(e,"length").writable)throw new _et("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},wet=Bo,bet=ym,Cet=m_,Tet=gpe,Ret=fH,Iet=dc,Oet=Iet(function(){return[].push.call({length:4294967296},1)!==4294967297}),Net=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},Bet=Oet||!Net();wet({target:"Array",proto:!0,arity:1,forced:Bet},{push:function(t){var i=bet(this),s=Cet(i),c=arguments.length;Ret(s+c);for(var u=0;u<c;u++)i[s]=arguments[u],s++;return Tet(i,s),s}});var Let=Ac,Pet=ll,v_=function(e,t){var i=Pet[e+"Prototype"],s=i&&i[t];if(s)return s;var c=Let[e],u=c&&c.prototype;return u&&u[t]},ket=v_,Det=ket("Array","push"),xet=_m,Uet=Det,E3=Array.prototype,Met=function(e){var t=e.push;return e===E3||xet(E3,e)&&t===E3.push?Uet:t},Fet=Met,Vet=Fet,Qet=Vet,Het=Qet,jet=Het,Ket=jet,Wet=Ket;const Get=$i(Wet);function $et(e,t){var i=e==null?null:typeof GE<"u"&&ppe(e)||e["@@iterator"];if(i!=null){var s,c,u,f,p=[],m=!0,E=!1;try{if(u=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;m=!1}else for(;!(m=(s=u.call(i)).done)&&(Get(p).call(p,s.value),p.length!==t);m=!0);}catch(w){E=!0,c=w}finally{try{if(!m&&i.return!=null&&(f=i.return(),Object(f)!==f))return}finally{if(E)throw c}}return p}}var zet=Bo,Goe=Vw,qet=gH,Yet=vm,$oe=vH,Xet=m_,Jet=ig,Zet=ZT,ett=xc,ttt=_k,rtt=bk,ntt=ttt("slice"),itt=ett("species"),w3=Array,ott=Math.max;zet({target:"Array",proto:!0,forced:!ntt},{slice:function(t,i){var s=Jet(this),c=Xet(s),u=$oe(t,c),f=$oe(i===void 0?c:i,c),p,m,E;if(Goe(s)&&(p=s.constructor,qet(p)&&(p===w3||Goe(p.prototype))?p=void 0:Yet(p)&&(p=p[itt],p===null&&(p=void 0)),p===w3||p===void 0))return rtt(s,u,f);for(m=new(p===void 0?w3:p)(ott(f-u,0)),E=0;u<f;u++,E++)u in s&&Zet(m,E,s[u]);return m.length=E,m}});var stt=v_,att=stt("Array","slice"),ctt=_m,ltt=att,S3=Array.prototype,utt=function(e){var t=e.slice;return e===S3||ctt(S3,e)&&t===S3.slice?ltt:t},Att=utt,dtt=Att,ftt=dtt,htt=ftt,ptt=htt,gtt=ptt,mtt=gtt;const vtt=$i(mtt);var _tt=ng,zoe=E0,ytt=cH,Ett=function(e,t,i){var s,c;zoe(e);try{if(s=ytt(e,"return"),!s){if(t==="throw")throw i;return i}s=_tt(s,e)}catch(u){c=!0,s=u}if(t==="throw")throw i;if(c)throw s;return zoe(s),i},wtt=E0,Stt=Ett,btt=function(e,t,i,s){try{return s?t(wtt(i)[0],i[1]):t(i)}catch(c){Stt(e,"throw",c)}},Ctt=xc,Ttt=Hw,Rtt=Ctt("iterator"),Itt=Array.prototype,Ott=function(e){return e!==void 0&&(Ttt.Array===e||Itt[Rtt]===e)},Ntt=ng,Btt=aH,Ltt=E0,Ptt=gk,ktt=BH,Dtt=TypeError,xtt=function(e,t){var i=arguments.length<2?ktt(e):t;if(Btt(i))return Ltt(Ntt(i,e));throw new Dtt(Ptt(e)+" is not iterable")},Utt=dH,Mtt=ng,Ftt=ym,Vtt=btt,Qtt=Ott,Htt=gH,jtt=m_,qoe=ZT,Ktt=xtt,Wtt=BH,Yoe=Array,Gtt=function(t){var i=Ftt(t),s=Htt(this),c=arguments.length,u=c>1?arguments[1]:void 0,f=u!==void 0;f&&(u=Utt(u,c>2?arguments[2]:void 0));var p=Wtt(i),m=0,E,w,T,N,O,P;if(p&&!(this===Yoe&&Qtt(p)))for(w=s?new this:[],N=Ktt(i,p),O=N.next;!(T=Mtt(O,N)).done;m++)P=f?Vtt(N,u,[T.value,m],!0):T.value,qoe(w,m,P);else for(E=jtt(i),w=s?new this(E):Yoe(E);E>m;m++)P=f?u(i[m],m):i[m],qoe(w,m,P);return w.length=m,w},$tt=xc,mpe=$tt("iterator"),vpe=!1;try{var ztt=0,Xoe={next:function(){return{done:!!ztt++}},return:function(){vpe=!0}};Xoe[mpe]=function(){return this},Array.from(Xoe,function(){throw 2})}catch{}var qtt=function(e,t){try{if(!t&&!vpe)return!1}catch{return!1}var i=!1;try{var s={};s[mpe]=function(){return{next:function(){return{done:i=!0}}}},e(s)}catch{}return i},Ytt=Bo,Xtt=Gtt,Jtt=qtt,Ztt=!Jtt(function(e){Array.from(e)});Ytt({target:"Array",stat:!0,forced:Ztt},{from:Xtt});var ert=ll,trt=ert.Array.from,rrt=trt,nrt=rrt,irt=nrt,ort=irt,srt=ort,art=srt,crt=art;const _pe=$i(crt);function T8(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function ype(e,t){if(e){var i;if(typeof e=="string")return T8(e,t);var s=vtt(i={}.toString.call(e)).call(i,8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?_pe(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?T8(e,t):void 0}}function lrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vp(e,t){return Nze(e)||$et(e,t)||ype(e,t)||lrt()}var Epe={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var s=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var f=typeof u;if(f==="string"||f==="number")s.push(u);else if(Array.isArray(u)){if(u.length){var p=i.apply(null,u);p&&s.push(p)}}else if(f==="object")if(u.toString===Object.prototype.toString)for(var m in u)t.call(u,m)&&u[m]&&s.push(m);else s.push(u.toString())}}return s.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(Epe);var urt=Epe.exports;const LH=$i(urt);var wpe={exports:{}},Art="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",drt=Art,frt=drt;function Spe(){}function bpe(){}bpe.resetWarningCache=Spe;var hrt=function(){function e(s,c,u,f,p,m){if(m!==frt){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:bpe,resetWarningCache:Spe};return i.PropTypes=i,i};wpe.exports=hrt();var prt=wpe.exports;const Wi=$i(prt);var PH=vo.createContext({scrollTo:function(){return 0},scrollToBottom:function(){return 0},scrollToEnd:function(){return 0},scrollToStart:function(){return 0},scrollToTop:function(){return 0}});PH.displayName="ScrollToBottomFunctionContext";function grt(){return he.useContext(PH)}function mrt(){var e=grt(),t=e.scrollToEnd;return t}var kH=vo.createContext({atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom"});kH.displayName="ScrollToBottomState1Context";var DH=vo.createContext({animating:!1,animatingToEnd:!1,sticky:!0});DH.displayName="ScrollToBottomState2Context";var xH=vo.createContext({animating:!1,animatingToEnd:!1,atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom",sticky:!0});xH.displayName="ScrollToBottomStateContext";var Joe=[xH,kH,DH];function vrt(e){return he.useContext(Joe[e]||Joe[0])}function _rt(){var e=vrt(2),t=e.sticky;return[t]}var Lk=vo.createContext({offsetHeight:0,scrollHeight:0,setTarget:function(){return 0},styleToClassName:function(){return""}});Lk.displayName="ScrollToBottomInternalContext";function yrt(){return he.useContext(Lk)}function UH(){var e=yrt(),t=e.styleToClassName;return t}var Ert={backgroundColor:"rgba(0, 0, 0, .2)",borderRadius:10,borderWidth:0,bottom:5,cursor:"pointer",height:20,outline:0,position:"absolute",right:20,width:20,"&:hover":{backgroundColor:"rgba(0, 0, 0, .4)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .6)"}},MH=function(t){var i=t.children,s=t.className,c=_rt(),u=Vp(c,1),f=u[0],p=UH()(Ert),m=mrt();return!f&&vo.createElement("button",{className:LH(p,(s||"")+""),onClick:m,type:"button"},i)};MH.defaultProps={children:void 0,className:""};MH.propTypes={children:Wi.any,className:Wi.string};var Cpe={exports:{}},wrt=Bo,Srt=Zu,Zoe=Oh.f;wrt({target:"Object",stat:!0,forced:Object.defineProperty!==Zoe,sham:!Srt},{defineProperty:Zoe});var brt=ll,Tpe=brt.Object,Crt=Cpe.exports=function(t,i,s){return Tpe.defineProperty(t,i,s)};Tpe.defineProperty.sham&&(Crt.sham=!0);var Trt=Cpe.exports,Rrt=Trt,Rpe=Rrt,Irt=Rpe,Ort=Irt,Nrt=Ort,Brt=Nrt,Lrt=Brt;const Prt=$i(Lrt);var krt=rR,Drt=krt.f("iterator"),xrt=Drt,Urt=xrt,Mrt=Urt,Frt=Mrt,Vrt=Frt,Qrt=Vrt,Hrt=Qrt;const jrt=$i(Hrt);function RT(e){"@babel/helpers - typeof";return RT=typeof GE=="function"&&typeof jrt=="symbol"?function(t){return typeof t}:function(t){return t&&typeof GE=="function"&&t.constructor===GE&&t!==GE.prototype?"symbol":typeof t},RT(e)}var Krt=rR,Wrt=Krt.f("toPrimitive"),Grt=Wrt,$rt=Grt,zrt=$rt,qrt=zrt,Yrt=qrt,Xrt=Yrt,Jrt=Xrt;const Zrt=$i(Jrt);function ent(e,t){if(RT(e)!="object"||!e)return e;var i=e[Zrt];if(i!==void 0){var s=i.call(e,t||"default");if(RT(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tnt(e){var t=ent(e,"string");return RT(t)=="symbol"?t:t+""}function rnt(e,t,i){return(t=tnt(t))in e?Prt(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function nnt(e){if(phe(e))return T8(e)}function int(e){if(typeof GE<"u"&&ppe(e)!=null||e["@@iterator"]!=null)return _pe(e)}function ont(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vi(e){return nnt(e)||int(e)||ype(e)||ont()}var _N=function(e){return e&&e.Math==Math&&e},XA=_N(typeof globalThis=="object"&&globalThis)||_N(typeof window=="object"&&window)||_N(typeof self=="object"&&self)||_N(typeof Kd=="object"&&Kd)||function(){return this}()||Function("return this")(),FH={},Nh=function(e){try{return!!e()}catch{return!0}},snt=Nh,__=!snt(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Ipe={},Ope={}.propertyIsEnumerable,Npe=Object.getOwnPropertyDescriptor,ant=Npe&&!Ope.call({1:2},1);Ipe.f=ant?function(t){var i=Npe(this,t);return!!i&&i.enumerable}:Ope;var Bpe=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},cnt={}.toString,VH=function(e){return cnt.call(e).slice(8,-1)},lnt=Nh,unt=VH,Ant="".split,dnt=lnt(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return unt(e)=="String"?Ant.call(e,""):Object(e)}:Object,Pk=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},fnt=dnt,hnt=Pk,QH=function(e){return fnt(hnt(e))},of=function(e){return typeof e=="function"},pnt=of,sR=function(e){return typeof e=="object"?e!==null:pnt(e)},b3=XA,gnt=of,mnt=function(e){return gnt(e)?e:void 0},kk=function(e,t){return arguments.length<2?mnt(b3[e]):b3[e]&&b3[e][t]},vnt=kk,_nt=vnt("navigator","userAgent")||"",Lpe=XA,C3=_nt,ese=Lpe.process,tse=Lpe.Deno,rse=ese&&ese.versions||tse&&tse.version,nse=rse&&rse.v8,Up,IL;nse?(Up=nse.split("."),IL=Up[0]<4?1:Up[0]+Up[1]):C3&&(Up=C3.match(/Edge\/(\d+)/),(!Up||Up[1]>=74)&&(Up=C3.match(/Chrome\/(\d+)/),Up&&(IL=Up[1])));var ynt=IL&&+IL,ise=ynt,Ent=Nh,Ppe=!!Object.getOwnPropertySymbols&&!Ent(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ise&&ise<41}),wnt=Ppe,kpe=wnt&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Snt=of,bnt=kk,Cnt=kpe,Dpe=Cnt?function(e){return typeof e=="symbol"}:function(e){var t=bnt("Symbol");return Snt(t)&&Object(e)instanceof t},Tnt=function(e){try{return String(e)}catch{return"Object"}},Rnt=of,Int=Tnt,Ont=function(e){if(Rnt(e))return e;throw TypeError(Int(e)+" is not a function")},Nnt=Ont,xpe=function(e,t){var i=e[t];return i==null?void 0:Nnt(i)},T3=of,R3=sR,Bnt=function(e,t){var i,s;if(t==="string"&&T3(i=e.toString)&&!R3(s=i.call(e))||T3(i=e.valueOf)&&!R3(s=i.call(e))||t!=="string"&&T3(i=e.toString)&&!R3(s=i.call(e)))return s;throw TypeError("Can't convert object to primitive value")},Upe={exports:{}},ose=XA,HH=function(e,t){try{Object.defineProperty(ose,e,{value:t,configurable:!0,writable:!0})}catch{ose[e]=t}return t},Lnt=XA,Pnt=HH,sse="__core-js_shared__",knt=Lnt[sse]||Pnt(sse,{}),jH=knt,ase=jH;(Upe.exports=function(e,t){return ase[e]||(ase[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.18.3",mode:"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"});var KH=Upe.exports,Dnt=Pk,Mpe=function(e){return Object(Dnt(e))},xnt=Mpe,Unt={}.hasOwnProperty,y_=Object.hasOwn||function(t,i){return Unt.call(xnt(t),i)},Mnt=0,Fnt=Math.random(),Fpe=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++Mnt+Fnt).toString(36)},Vnt=XA,Qnt=KH,cse=y_,Hnt=Fpe,lse=Ppe,jnt=kpe,Zb=Qnt("wks"),QC=Vnt.Symbol,Knt=jnt?QC:QC&&QC.withoutSetter||Hnt,aR=function(e){return(!cse(Zb,e)||!(lse||typeof Zb[e]=="string"))&&(lse&&cse(QC,e)?Zb[e]=QC[e]:Zb[e]=Knt("Symbol."+e)),Zb[e]},use=sR,Ase=Dpe,Wnt=xpe,Gnt=Bnt,$nt=aR,znt=$nt("toPrimitive"),qnt=function(e,t){if(!use(e)||Ase(e))return e;var i=Wnt(e,znt),s;if(i){if(t===void 0&&(t="default"),s=i.call(e,t),!use(s)||Ase(s))return s;throw TypeError("Can't convert object to primitive value")}return t===void 0&&(t="number"),Gnt(e,t)},Ynt=qnt,Xnt=Dpe,Vpe=function(e){var t=Ynt(e,"string");return Xnt(t)?t:String(t)},Jnt=XA,dse=sR,R8=Jnt.document,Znt=dse(R8)&&dse(R8.createElement),Qpe=function(e){return Znt?R8.createElement(e):{}},eit=__,tit=Nh,rit=Qpe,Hpe=!eit&&!tit(function(){return Object.defineProperty(rit("div"),"a",{get:function(){return 7}}).a!=7}),nit=__,iit=Ipe,oit=Bpe,sit=QH,ait=Vpe,cit=y_,lit=Hpe,fse=Object.getOwnPropertyDescriptor;FH.f=nit?fse:function(t,i){if(t=sit(t),i=ait(i),lit)try{return fse(t,i)}catch{}if(cit(t,i))return oit(!iit.f.call(t,i),t[i])};var cR={},uit=sR,w0=function(e){if(uit(e))return e;throw TypeError(String(e)+" is not an object")},Ait=__,dit=Hpe,hse=w0,fit=Vpe,pse=Object.defineProperty;cR.f=Ait?pse:function(t,i,s){if(hse(t),i=fit(i),hse(s),dit)try{return pse(t,i,s)}catch{}if("get"in s||"set"in s)throw TypeError("Accessors not supported");return"value"in s&&(t[i]=s.value),t};var hit=__,pit=cR,git=Bpe,Dk=hit?function(e,t,i){return pit.f(e,t,git(1,i))}:function(e,t,i){return e[t]=i,e},jpe={exports:{}},mit=of,I8=jH,vit=Function.toString;mit(I8.inspectSource)||(I8.inspectSource=function(e){return vit.call(e)});var Kpe=I8.inspectSource,_it=XA,yit=of,Eit=Kpe,gse=_it.WeakMap,wit=yit(gse)&&/native code/.test(Eit(gse)),Sit=KH,bit=Fpe,mse=Sit("keys"),Wpe=function(e){return mse[e]||(mse[e]=bit(e))},WH={},Cit=wit,Tit=XA,Rit=sR,Iit=Dk,I3=y_,O3=jH,Oit=Wpe,Nit=WH,vse="Object already initialized",Bit=Tit.WeakMap,OL,IT,NL,Lit=function(e){return NL(e)?IT(e):OL(e,{})},Pit=function(e){return function(t){var i;if(!Rit(t)||(i=IT(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}};if(Cit||O3.state){var T1=O3.state||(O3.state=new Bit),kit=T1.get,_se=T1.has,Dit=T1.set;OL=function(e,t){if(_se.call(T1,e))throw new TypeError(vse);return t.facade=e,Dit.call(T1,e,t),t},IT=function(e){return kit.call(T1,e)||{}},NL=function(e){return _se.call(T1,e)}}else{var SE=Oit("state");Nit[SE]=!0,OL=function(e,t){if(I3(e,SE))throw new TypeError(vse);return t.facade=e,Iit(e,SE,t),t},IT=function(e){return I3(e,SE)?e[SE]:{}},NL=function(e){return I3(e,SE)}}var Gpe={set:OL,get:IT,has:NL,enforce:Lit,getterFor:Pit},O8=__,xit=y_,$pe=Function.prototype,Uit=O8&&Object.getOwnPropertyDescriptor,GH=xit($pe,"name"),Mit=GH&&(function(){}).name==="something",Fit=GH&&(!O8||O8&&Uit($pe,"name").configurable),$H={EXISTS:GH,PROPER:Mit,CONFIGURABLE:Fit},Vit=XA,yse=of,Qit=y_,Ese=Dk,Hit=HH,jit=Kpe,zpe=Gpe,Kit=$H.CONFIGURABLE,Wit=zpe.get,Git=zpe.enforce,$it=String(String).split("String");(jpe.exports=function(e,t,i,s){var c=s?!!s.unsafe:!1,u=s?!!s.enumerable:!1,f=s?!!s.noTargetGet:!1,p=s&&s.name!==void 0?s.name:t,m;if(yse(i)&&(String(p).slice(0,7)==="Symbol("&&(p="["+String(p).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Qit(i,"name")||Kit&&i.name!==p)&&Ese(i,"name",p),m=Git(i),m.source||(m.source=$it.join(typeof p=="string"?p:""))),e===Vit){u?e[t]=i:Hit(t,i);return}else c?!f&&e[t]&&(u=!0):delete e[t];u?e[t]=i:Ese(e,t,i)})(Function.prototype,"toString",function(){return yse(this)&&Wit(this).source||jit(this)});var lR=jpe.exports,qpe={},zit=Math.ceil,qit=Math.floor,xk=function(e){var t=+e;return t!==t||t===0?0:(t>0?qit:zit)(t)},Yit=xk,Xit=Math.max,Jit=Math.min,Zit=function(e,t){var i=Yit(e);return i<0?Xit(i+t,0):Jit(i,t)},eot=xk,tot=Math.min,Ype=function(e){return e>0?tot(eot(e),9007199254740991):0},rot=Ype,not=function(e){return rot(e.length)},iot=QH,oot=Zit,sot=not,wse=function(e){return function(t,i,s){var c=iot(t),u=sot(c),f=oot(s,u),p;if(e&&i!=i){for(;u>f;)if(p=c[f++],p!=p)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===i)return e||f||0;return!e&&-1}},aot={includes:wse(!0),indexOf:wse(!1)},N3=y_,cot=QH,lot=aot.indexOf,uot=WH,Xpe=function(e,t){var i=cot(e),s=0,c=[],u;for(u in i)!N3(uot,u)&&N3(i,u)&&c.push(u);for(;t.length>s;)N3(i,u=t[s++])&&(~lot(c,u)||c.push(u));return c},zH=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Aot=Xpe,dot=zH,fot=dot.concat("length","prototype");qpe.f=Object.getOwnPropertyNames||function(t){return Aot(t,fot)};var Jpe={};Jpe.f=Object.getOwnPropertySymbols;var hot=kk,pot=qpe,got=Jpe,mot=w0,vot=hot("Reflect","ownKeys")||function(t){var i=pot.f(mot(t)),s=got.f;return s?i.concat(s(t)):i},_ot=y_,yot=vot,Eot=FH,wot=cR,Sot=function(e,t){for(var i=yot(t),s=wot.f,c=Eot.f,u=0;u<i.length;u++){var f=i[u];_ot(e,f)||s(e,f,c(t,f))}},bot=Nh,Cot=of,Tot=/#|\.prototype\./,uR=function(e,t){var i=Iot[Rot(e)];return i==Not?!0:i==Oot?!1:Cot(t)?bot(t):!!t},Rot=uR.normalize=function(e){return String(e).replace(Tot,".").toLowerCase()},Iot=uR.data={},Oot=uR.NATIVE="N",Not=uR.POLYFILL="P",Bot=uR,B3=XA,Lot=FH.f,Pot=Dk,kot=lR,Dot=HH,xot=Sot,Uot=Bot,Mot=function(e,t){var i=e.target,s=e.global,c=e.stat,u,f,p,m,E,w;if(s?f=B3:c?f=B3[i]||Dot(i,{}):f=(B3[i]||{}).prototype,f)for(p in t){if(E=t[p],e.noTargetGet?(w=Lot(f,p),m=w&&w.value):m=f[p],u=Uot(s?p:i+(c?".":"#")+p,e.forced),!u&&m!==void 0){if(typeof E==typeof m)continue;xot(E,m)}(e.sham||m&&m.sham)&&Pot(E,"sham",!0),kot(f,p,E,e)}},Fot=aR,Vot=Fot("toStringTag"),Zpe={};Zpe[Vot]="z";var qH=String(Zpe)==="[object z]",Qot=qH,Hot=of,lB=VH,jot=aR,Kot=jot("toStringTag"),Wot=lB(function(){return arguments}())=="Arguments",Got=function(e,t){try{return e[t]}catch{}},ege=Qot?lB:function(e){var t,i,s;return e===void 0?"Undefined":e===null?"Null":typeof(i=Got(t=Object(e),Kot))=="string"?i:Wot?lB(t):(s=lB(t))=="Object"&&Hot(t.callee)?"Arguments":s},$ot=ege,Uk=function(e){if($ot(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(e)},zot=w0,tge=function(){var e=zot(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},YH={},rge=Nh,qot=XA,nge=qot.RegExp;YH.UNSUPPORTED_Y=rge(function(){var e=nge("a","y");return e.lastIndex=2,e.exec("abcd")!=null});YH.BROKEN_CARET=rge(function(){var e=nge("^r","gy");return e.lastIndex=2,e.exec("str")!=null});var Yot=Xpe,Xot=zH,Jot=Object.keys||function(t){return Yot(t,Xot)},Zot=__,est=cR,tst=w0,rst=Jot,nst=Zot?Object.defineProperties:function(t,i){tst(t);for(var s=rst(i),c=s.length,u=0,f;c>u;)est.f(t,f=s[u++],i[f]);return t},ist=kk,ost=ist("document","documentElement"),sst=w0,ast=nst,Sse=zH,cst=WH,lst=ost,ust=Qpe,Ast=Wpe,bse=">",Cse="<",N8="prototype",B8="script",ige=Ast("IE_PROTO"),L3=function(){},oge=function(e){return Cse+B8+bse+e+Cse+"/"+B8+bse},Tse=function(e){e.write(oge("")),e.close();var t=e.parentWindow.Object;return e=null,t},dst=function(){var e=ust("iframe"),t="java"+B8+":",i;return e.style.display="none",lst.appendChild(e),e.src=String(t),i=e.contentWindow.document,i.open(),i.write(oge("document.F=Object")),i.close(),i.F},yN,uB=function(){try{yN=new ActiveXObject("htmlfile")}catch{}uB=typeof document<"u"?document.domain&&yN?Tse(yN):dst():Tse(yN);for(var e=Sse.length;e--;)delete uB[N8][Sse[e]];return uB()};cst[ige]=!0;var fst=Object.create||function(t,i){var s;return t!==null?(L3[N8]=sst(t),s=new L3,L3[N8]=null,s[ige]=t):s=uB(),i===void 0?s:ast(s,i)},hst=Nh,pst=XA,gst=pst.RegExp,mst=hst(function(){var e=gst(".","s");return!(e.dotAll&&e.exec(`
`)&&e.flags==="s")}),vst=Nh,_st=XA,yst=_st.RegExp,Est=vst(function(){var e=yst("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),wst=Uk,Sst=tge,Rse=YH,bst=KH,Cst=fst,Tst=Gpe.get,Rst=mst,Ist=Est,BL=RegExp.prototype.exec,Ost=bst("native-string-replace",String.prototype.replace),L8=BL,P8=function(){var e=/a/,t=/b*/g;return BL.call(e,"a"),BL.call(t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),sge=Rse.UNSUPPORTED_Y||Rse.BROKEN_CARET,k8=/()??/.exec("")[1]!==void 0,Nst=P8||k8||sge||Rst||Ist;Nst&&(L8=function(t){var i=this,s=Tst(i),c=wst(t),u=s.raw,f,p,m,E,w,T,N;if(u)return u.lastIndex=i.lastIndex,f=L8.call(u,c),i.lastIndex=u.lastIndex,f;var O=s.groups,P=sge&&i.sticky,M=Sst.call(i),Q=i.source,k=0,D=c;if(P&&(M=M.replace("y",""),M.indexOf("g")===-1&&(M+="g"),D=c.slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&c.charAt(i.lastIndex-1)!==`
`)&&(Q="(?: "+Q+")",D=" "+D,k++),p=new RegExp("^(?:"+Q+")",M)),k8&&(p=new RegExp("^"+Q+"$(?!\\s)",M)),P8&&(m=i.lastIndex),E=BL.call(P?p:i,D),P?E?(E.input=E.input.slice(k),E[0]=E[0].slice(k),E.index=i.lastIndex,i.lastIndex+=E[0].length):i.lastIndex=0:P8&&E&&(i.lastIndex=i.global?E.index+E[0].length:m),k8&&E&&E.length>1&&Ost.call(E[0],p,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(E[w]=void 0)}),E&&O)for(E.groups=T=Cst(null),w=0;w<O.length;w++)N=O[w],T[N[0]]=E[N[1]];return E});var XH=L8,Bst=Mot,Ise=XH;Bst({target:"RegExp",proto:!0,forced:/./.exec!==Ise},{exec:Ise});var Ose=lR,Lst=XH,Nse=Nh,age=aR,Pst=Dk,kst=age("species"),P3=RegExp.prototype,Dst=function(e,t,i,s){var c=age(e),u=!Nse(function(){var E={};return E[c]=function(){return 7},""[e](E)!=7}),f=u&&!Nse(function(){var E=!1,w=/a/;return e==="split"&&(w={},w.constructor={},w.constructor[kst]=function(){return w},w.flags="",w[c]=/./[c]),w.exec=function(){return E=!0,null},w[c](""),!E});if(!u||!f||i){var p=/./[c],m=t(c,""[e],function(E,w,T,N,O){var P=w.exec;return P===Lst||P===P3.exec?u&&!O?{done:!0,value:p.call(w,T,N)}:{done:!0,value:E.call(T,w,N)}:{done:!1}});Ose(String.prototype,e,m[0]),Ose(P3,c,m[1])}s&&Pst(P3[c],"sham",!0)},xst=xk,Ust=Uk,Mst=Pk,Bse=function(e){return function(t,i){var s=Ust(Mst(t)),c=xst(i),u=s.length,f,p;return c<0||c>=u?e?"":void 0:(f=s.charCodeAt(c),f<55296||f>56319||c+1===u||(p=s.charCodeAt(c+1))<56320||p>57343?e?s.charAt(c):f:e?s.slice(c,c+2):(f-55296<<10)+(p-56320)+65536)}},Fst={codeAt:Bse(!1),charAt:Bse(!0)},Vst=Fst.charAt,Qst=function(e,t,i){return t+(i?Vst(e,t).length:1)},Hst=Mpe,jst=Math.floor,Kst="".replace,Wst=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Gst=/\$([$&'`]|\d{1,2})/g,$st=function(e,t,i,s,c,u){var f=i+e.length,p=s.length,m=Gst;return c!==void 0&&(c=Hst(c),m=Wst),Kst.call(u,m,function(E,w){var T;switch(w.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(f);case"<":T=c[w.slice(1,-1)];break;default:var N=+w;if(N===0)return E;if(N>p){var O=jst(N/10);return O===0?E:O<=p?s[O-1]===void 0?w.charAt(1):s[O-1]+w.charAt(1):E}T=s[N-1]}return T===void 0?"":T})},zst=w0,qst=of,Yst=VH,Xst=XH,Jst=function(e,t){var i=e.exec;if(qst(i)){var s=i.call(e,t);return s!==null&&zst(s),s}if(Yst(e)==="RegExp")return Xst.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")},Zst=Dst,eat=Nh,tat=w0,rat=of,nat=xk,iat=Ype,bE=Uk,oat=Pk,sat=Qst,aat=xpe,cat=$st,lat=Jst,uat=aR,D8=uat("replace"),Aat=Math.max,dat=Math.min,fat=function(e){return e===void 0?e:String(e)},hat=function(){return"a".replace(/./,"$0")==="$0"}(),Lse=function(){return/./[D8]?/./[D8]("a","$0")==="":!1}(),pat=!eat(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});Zst("replace",function(e,t,i){var s=Lse?"$":"$0";return[function(u,f){var p=oat(this),m=u==null?void 0:aat(u,D8);return m?m.call(u,p,f):t.call(bE(p),u,f)},function(c,u){var f=tat(this),p=bE(c);if(typeof u=="string"&&u.indexOf(s)===-1&&u.indexOf("$<")===-1){var m=i(t,f,p,u);if(m.done)return m.value}var E=rat(u);E||(u=bE(u));var w=f.global;if(w){var T=f.unicode;f.lastIndex=0}for(var N=[];;){var O=lat(f,p);if(O===null||(N.push(O),!w))break;var P=bE(O[0]);P===""&&(f.lastIndex=sat(p,iat(f.lastIndex),T))}for(var M="",Q=0,k=0;k<N.length;k++){O=N[k];for(var D=bE(O[0]),V=Aat(dat(nat(O.index),p.length),0),K=[],J=1;J<O.length;J++)K.push(fat(O[J]));var ie=O.groups;if(E){var fe=[D].concat(K,V,p);ie!==void 0&&fe.push(ie);var Z=bE(u.apply(void 0,fe))}else Z=cat(D,p,V,K,ie,u);V>=Q&&(M+=p.slice(Q,V)+Z,Q=V+D.length)}return M+p.slice(Q)}]},!pat||!hat||Lse);var eC=Ac,gat=oH,mat=g_,EN=function(e){return gat.slice(0,e.length)===e},vat=function(){return EN("Bun/")?"BUN":EN("Cloudflare-Workers")?"CLOUDFLARE":EN("Deno/")?"DENO":EN("Node.js/")?"NODE":eC.Bun&&typeof Bun.version=="string"?"BUN":eC.Deno&&typeof Deno.version=="object"?"DENO":mat(eC.process)==="process"?"NODE":eC.window&&eC.document?"BROWSER":"REST"}(),_at=TypeError,yat=function(e,t){if(e<t)throw new _at("Not enough arguments");return e},cge=Ac,Eat=eH,wat=jl,Sat=vat,bat=oH,Cat=bk,Tat=yat,Rat=cge.Function,Iat=/MSIE .\./.test(bat)||Sat==="BUN"&&function(){var e=cge.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}(),lge=function(e,t){var i=t?2:1;return Iat?function(s,c){var u=Tat(arguments.length,1)>i,f=wat(s)?s:Rat(s),p=u?Cat(arguments,i):[],m=u?function(){Eat(f,this,p)}:f;return t?e(m,c):e(m)}:e},Oat=Bo,uge=Ac,Nat=lge,Pse=Nat(uge.setInterval,!0);Oat({global:!0,bind:!0,forced:uge.setInterval!==Pse},{setInterval:Pse});var Bat=Bo,Age=Ac,Lat=lge,kse=Lat(Age.setTimeout,!0);Bat({global:!0,bind:!0,forced:Age.setTimeout!==kse},{setTimeout:kse});var Pat=ll,kat=Pat.setInterval,Dat=kat;const xat=$i(Dat);var Uat=dc,dge=function(e,t){var i=[][e];return!!i&&Uat(function(){i.call(null,t||function(){return 1},1)})},Mat=Bo,Fat=tH,Vat=whe.indexOf,Qat=dge,x8=Fat([].indexOf),fge=!!x8&&1/x8([1],1,-0)<0,Hat=fge||!Qat("indexOf");Mat({target:"Array",proto:!0,forced:Hat},{indexOf:function(t){var i=arguments.length>1?arguments[1]:void 0;return fge?x8(this,t,i)||0:Vat(this,t,i)}});var jat=v_,Kat=jat("Array","indexOf"),Wat=_m,Gat=Kat,k3=Array.prototype,$at=function(e){var t=e.indexOf;return e===k3||Wat(k3,e)&&t===k3.indexOf?Gat:t},zat=$at,qat=zat,Yat=qat;const Xat=$i(Yat);var Dse=gk,Jat=TypeError,Zat=function(e,t){if(!delete e[t])throw new Jat("Cannot delete property "+Dse(t)+" of "+Dse(e))},ect=Bo,tct=ym,rct=vH,nct=vk,ict=m_,oct=gpe,sct=fH,act=mH,cct=ZT,D3=Zat,lct=_k,uct=lct("splice"),Act=Math.max,dct=Math.min;ect({target:"Array",proto:!0,forced:!uct},{splice:function(t,i){var s=tct(this),c=ict(s),u=rct(t,c),f=arguments.length,p,m,E,w,T,N;for(f===0?p=m=0:f===1?(p=0,m=c-u):(p=f-2,m=dct(Act(nct(i),0),c-u)),sct(c+p-m),E=act(s,m),w=0;w<m;w++)T=u+w,T in s&&cct(E,w,s[T]);if(E.length=m,p<m){for(w=u;w<c-m;w++)T=w+m,N=w+p,T in s?s[N]=s[T]:D3(s,N);for(w=c;w>c-m+p;w--)D3(s,w-1)}else if(p>m)for(w=c-m;w>u;w--)T=w+m-1,N=w+p-1,T in s?s[N]=s[T]:D3(s,N);for(w=0;w<p;w++)s[w+u]=arguments[w+2];return oct(s,c-m+p),E}});var fct=v_,hct=fct("Array","splice"),pct=_m,gct=hct,x3=Array.prototype,mct=function(e){var t=e.splice;return e===x3||pct(x3,e)&&t===x3.splice?gct:t},vct=mct,_ct=vct,yct=_ct;const Ect=$i(yct);var wct=v_,Sct=wct("Array","concat"),bct=_m,Cct=Sct,U3=Array.prototype,Tct=function(e){var t=e.concat;return e===U3||bct(U3,e)&&t===U3.concat?Cct:t},Rct=Tct,Ict=Rct,Oct=Ict;const Us=$i(Oct);var Nct=Bo,Bct=fc,hge=Date,Lct=Bct(hge.prototype.getTime);Nct({target:"Date",stat:!0},{now:function(){return Lct(new hge)}});var Pct=ll,kct=Pct.Date.now,Dct=kct,xct=Dct,Uct=xct;const i0=$i(Uct);var Mct=SH.forEach,Fct=dge,Vct=Fct("forEach"),Qct=Vct?[].forEach:function(t){return Mct(this,t,arguments.length>1?arguments[1]:void 0)},Hct=Bo,xse=Qct;Hct({target:"Array",proto:!0,forced:[].forEach!==xse},{forEach:xse});var jct=v_,Kct=jct("Array","forEach"),Wct=Kct,Gct=Wct,$ct=eR,zct=YA,qct=_m,Yct=Gct,M3=Array.prototype,Xct={DOMTokenList:!0,NodeList:!0},Jct=function(e){var t=e.forEach;return e===M3||qct(M3,e)&&t===M3.forEach||zct(Xct,$ct(e))?Yct:t},Zct=Jct;const LL=$i(Zct);var elt=Bo,tlt=ym,pge=yH,rlt=dc,nlt=rlt(function(){pge(1)});elt({target:"Object",stat:!0,forced:nlt},{keys:function(t){return pge(tlt(t))}});var ilt=ll,olt=ilt.Object.keys,slt=olt,alt=slt,clt=alt;const llt=$i(clt);var ult=ll,Alt=ult.Object.getOwnPropertySymbols,dlt=Alt,flt=dlt,hlt=flt;const Use=$i(hlt);var plt=Bo,glt=SH.filter,mlt=_k,vlt=mlt("filter");plt({target:"Array",proto:!0,forced:!vlt},{filter:function(t){return glt(this,t,arguments.length>1?arguments[1]:void 0)}});var _lt=v_,ylt=_lt("Array","filter"),Elt=_m,wlt=ylt,F3=Array.prototype,Slt=function(e){var t=e.filter;return e===F3||Elt(F3,e)&&t===F3.filter?wlt:t},blt=Slt,Clt=blt,Tlt=Clt;const Rlt=$i(Tlt);var gge={exports:{}},Ilt=Bo,Olt=dc,Nlt=ig,mge=qT.f,vge=Zu,Blt=!vge||Olt(function(){mge(1)});Ilt({target:"Object",stat:!0,forced:Blt,sham:!vge},{getOwnPropertyDescriptor:function(t,i){return mge(Nlt(t),i)}});var Llt=ll,_ge=Llt.Object,Plt=gge.exports=function(t,i){return _ge.getOwnPropertyDescriptor(t,i)};_ge.getOwnPropertyDescriptor.sham&&(Plt.sham=!0);var klt=gge.exports,Dlt=klt,xlt=Dlt,Ult=xlt;const yge=$i(Ult);var Mlt=og,Flt=fc,Vlt=Sk,Qlt=Ck,Hlt=E0,jlt=Flt([].concat),Klt=Mlt("Reflect","ownKeys")||function(t){var i=Vlt.f(Hlt(t)),s=Qlt.f;return s?jlt(i,s(t)):i},Wlt=Bo,Glt=Zu,$lt=Klt,zlt=ig,qlt=qT,Ylt=ZT;Wlt({target:"Object",stat:!0,sham:!Glt},{getOwnPropertyDescriptors:function(t){for(var i=zlt(t),s=qlt.f,c=$lt(i),u={},f=0,p,m;c.length>f;)m=s(i,p=c[f++]),m!==void 0&&Ylt(u,p,m);return u}});var Xlt=ll,Jlt=Xlt.Object.getOwnPropertyDescriptors,Zlt=Jlt,eut=Zlt,tut=eut;const Mse=$i(tut);var Ege={exports:{}},rut=Bo,nut=Zu,Fse=yk.f;rut({target:"Object",stat:!0,forced:Object.defineProperties!==Fse,sham:!nut},{defineProperties:Fse});var iut=ll,wge=iut.Object,out=Ege.exports=function(t,i){return wge.defineProperties(t,i)};wge.defineProperties.sham&&(out.sham=!0);var sut=Ege.exports,aut=sut,cut=aut,lut=cut;const uut=$i(lut);var Aut=Rpe;const dut=$i(Aut);function Vse(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function Qse(e,t,i){var s=[],c=uP(e,s,i);return s.length<2?i:c+t(s)}var fut=function(t){var i=xle(t);i.sheet.speedy=function(p){this.isSpeedy=p},i.compat=!0;var s=function(){for(var m=arguments.length,E=new Array(m),w=0;w<m;w++)E[w]=arguments[w];var T=Zv(E,i.registered,void 0);return AP(i,T,!1),i.key+"-"+T.name},c=function(){for(var m=arguments.length,E=new Array(m),w=0;w<m;w++)E[w]=arguments[w];var T=Zv(E,i.registered),N="animation-"+T.name;return Vse(i,{name:T.name,styles:"@keyframes "+N+"{"+T.styles+"}"}),N},u=function(){for(var m=arguments.length,E=new Array(m),w=0;w<m;w++)E[w]=arguments[w];var T=Zv(E,i.registered);Vse(i,T)},f=function(){for(var m=arguments.length,E=new Array(m),w=0;w<m;w++)E[w]=arguments[w];return Qse(i.registered,s,hut(E))};return{css:s,cx:f,injectGlobal:u,keyframes:c,hydrate:function(m){m.forEach(function(E){i.inserted[E]=!0})},flush:function(){i.registered={},i.inserted={},i.sheet.flush()},sheet:i.sheet,cache:i,getRegisteredStyles:uP.bind(null,i.registered),merge:Qse.bind(null,i.registered,s)}},hut=function e(t){for(var i="",s=0;s<t.length;s++){var c=t[s];if(c!=null){var u=void 0;switch(typeof c){case"boolean":break;case"object":{if(Array.isArray(c))u=e(c);else{u="";for(var f in c)c[f]&&f&&(u&&(u+=" "),u+=f)}break}default:u=c}u&&(i&&(i+=" "),i+=u)}}return i},put=lR,JH=Date.prototype,Hse="Invalid Date",Sge="toString",gut=JH[Sge],mut=JH.getTime;String(new Date(NaN))!=Hse&&put(JH,Sge,function(){var t=mut.call(this);return t===t?gut.call(this):Hse});var vut=qH,_ut=ege,yut=vut?{}.toString:function(){return"[object "+_ut(this)+"]"},Eut=qH,wut=lR,Sut=yut;Eut||wut(Object.prototype,"toString",Sut,{unsafe:!0});var but=$H.PROPER,Cut=lR,Tut=w0,jse=Uk,Rut=Nh,Iut=tge,ZH="toString",bge=RegExp.prototype,Cge=bge[ZH],Out=Rut(function(){return Cge.call({source:"a",flags:"b"})!="/a/b"}),Nut=but&&Cge.name!=ZH;(Out||Nut)&&Cut(RegExp.prototype,ZH,function(){var t=Tut(this),i=jse(t.source),s=t.flags,c=jse(s===void 0&&t instanceof RegExp&&!("flags"in bge)?Iut.call(t):s);return"/"+i+"/"+c},{unsafe:!0});var Kse=typeof window<"u"?window:self,But=Kse.crypto||Kse.msCrypto,Lut=function(e){if(!e)return Math.random;var t=Math.pow(2,32),i=new Uint32Array(1);return function(){return e.getRandomValues(i)[0]/t}}(But);const Put=$i(Lut);function kut(){return Put().toString(26).substr(2,5).replace(/[0-9]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+65)})}var Dut=hhe;const Wse=$i(Dut);function mo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"white",i="background-color: ".concat(e,"; border-radius: 4px; padding: 2px 4px;");return t&&(i+=" color: ".concat(t,";")),[i,""]}function Gse(e,t){for(var i,s,c=arguments.length,u=new Array(c>2?c-2:0),f=2;f<c;f++)u[f-2]=arguments[f];return Us(i=[Us(s="%c".concat(e,"%c ")).call(s,t)]).call(i,Vi(mo("green","white")),u)}function xut(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.force,s=i===void 0?!1:i;return s?function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];if(u.length){var p=u,m=Vp(p,1),E=m[0];typeof E=="function"&&(u=E());var w=Wse(u[0])?u:[u],T=w.length===1;LL(w).call(w,function(N,O){if(T){var P,M;(P=console).log.apply(P,Vi(Gse.apply(void 0,Us(M=[e]).call(M,Vi(N)))))}else if(O){var Q;(Q=console).log.apply(Q,Vi(Wse(N)?N:[N]))}else{var k,D;(k=console).groupCollapsed.apply(k,Vi(Gse.apply(void 0,Us(D=[e]).call(D,Vi(N)))))}}),T||console.groupEnd()}}:function(){return 0}}var Uut=__,Mut=$H.EXISTS,Fut=cR.f,Tge=Function.prototype,Vut=Tge.toString,Qut=/^\s*function ([^ (]*)/,Hut="name";Uut&&!Mut&&Fut(Tge,Hut,{configurable:!0,get:function(){try{return Vut.call(this).match(Qut)[1]}catch{return""}}});var jut=ll,Kut=jut.setTimeout,Wut=Kut;const Gut=$i(Wut);function $ut(e,t){if(!t)return e;var i=0,s=null;return function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];var p=i0();p-i>t?(e.apply(void 0,u),i=p):(clearTimeout(s),s=Gut(function(){e.apply(void 0,u),i=i0()},Math.max(0,t-p+i)))}}var Rge=function(t){var i=t.debounce,s=t.name,c=t.onEvent,u=t.target,f=he.useRef();f.current=c;var p=he.useMemo(function(){return $ut(function(E){var w=f.current;w&&w(E)},i)},[i,f]),m=he.useCallback(function(E){E.timeStampLow=i0(),p(E)},[p]);return he.useLayoutEffect(function(){return u.addEventListener(s,m,{passive:!0}),m({target:u,type:s}),function(){return u.removeEventListener(s,m)}},[s,m,u]),!1};Rge.defaultProps={debounce:200};var zut=Math.sign||function(t){var i=+t;return i===0||i!==i?i:i<0?-1:1},qut=Bo,Yut=zut;qut({target:"Math",stat:!0},{sign:Yut});var Xut=ll,Jut=Xut.Math.sign,Zut=Jut,eAt=Zut,tAt=eAt;const rAt=$i(tAt);function nAt(e,t){var i=rAt(t-e),s=Math.sqrt(Math.abs(t-e)),c=e+s*i;return i>0?Math.min(t,c):Math.max(t,c)}function iAt(e,t,i,s){for(var c=e,u=0;u<s;u++)c=i(c,t);return c}var Ige=function(t){var i=t.name,s=t.onEnd,c=t.target,u=t.value,f=he.useRef(),p=he.useCallback(function(E,w,T,N){var O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:i0();(T==="100%"||typeof T=="number")&&(cancelAnimationFrame(f.current),f.current=requestAnimationFrame(function(){if(c){var P=T==="100%"?c.scrollHeight-c.offsetHeight:T,M=iAt(w,P,nAt,(i0()-O)/5);Math.abs(P-M)<1.5&&(M=P),c[E]=M,P===M?s&&s(!0):p(E,w,T,N+1,O)}}))},[f,s,c]),m=he.useCallback(function(){cancelAnimationFrame(f.current),s&&s(!1)},[s]);return he.useLayoutEffect(function(){return p(i,c[i],u,1),c?(c.addEventListener("pointerdown",m,{passive:!0}),c.addEventListener("wheel",m,{passive:!0}),function(){c.removeEventListener("pointerdown",m),c.removeEventListener("wheel",m),cancelAnimationFrame(f.current)}):function(){return cancelAnimationFrame(f.current)}},[p,f,m,i,c,u]),!1};Ige.propTypes={name:Wi.string.isRequired,onEnd:Wi.func,target:Wi.any.isRequired,value:Wi.oneOfType([Wi.number,Wi.oneOf(["100%"])]).isRequired};function V3(e){var t=he.useState(e),i=Vp(t,2),s=i[0],c=i[1],u=he.useRef(),f=he.useCallback(function(p){typeof p=="function"?f(function(m){return p=p(m),u.current=p,p}):(u.current=p,f(p))},[u]);return u.current=s,[s,c,u]}function $se(e,t){var i=llt(e);if(Use){var s=Use(e);t&&(s=Rlt(s).call(s,function(c){return yge(e,c).enumerable})),i.push.apply(i,s)}return i}function zse(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){var s;LL(s=$se(Object(i),!0)).call(s,function(u){rnt(e,u,i[u])})}else if(Mse)uut(e,Mse(i));else{var c;LL(c=$se(Object(i))).call(c,function(u){dut(e,u,yge(i,u))})}}return e}var oAt=function(){return 1/0},qse=17,sAt="bottom",Ah="top",Yse=1,aAt=34,Xse={};function cAt(e,t){return e(),xat(e,t)}function Jse(e){var t=e.mode,i=e.target,s=i.offsetHeight,c=i.scrollHeight,u=i.scrollTop,f=c-u-s<Yse,p=u<Yse,m=t===Ah?p:f,E=t!==Ah?p:f;return{atBottom:f,atEnd:m,atStart:E,atTop:p}}function tC(e,t){return e===(t===Ah?0:"100%")}var ej=function(t){var i=t.checkInterval,s=t.children,c=t.debounce,u=t.debug,f=t.initialScrollBehavior,p=t.mode,m=t.nonce,E=t.scroller,w=he.useMemo(function(){return xut("<ScrollToBottom>",{force:u})},[u]);p=p===Ah?Ah:sAt;var T=he.useRef(0),N=he.useRef(f),O=V3(p===Ah?0:"100%"),P=Vp(O,3),M=P[0],Q=P[1],k=P[2],D=V3(null),V=Vp(D,3),K=V[0],J=V[1],ie=V[2],fe=he.useRef(0),Z=he.useRef(0),pe=he.useRef(0),Y=he.useState(!0),te=Vp(Y,2),le=te[0],ae=te[1],ge=he.useState(!0),se=Vp(ge,2),xe=se[0],Me=se[1],Be=he.useState(!0),ke=Vp(Be,2),Ke=ke[0],ht=ke[1],ve=he.useState(!1),Oe=Vp(ve,2),Ue=Oe[0],Fe=Oe[1],Qe=V3(!0),We=Vp(Qe,3),et=We[0],Ze=We[1],pt=We[2],at=he.useRef([]),Rt=he.useCallback(function(Kt){var yr=ie.current;return at.current.push(Kt),yr&&Kt({scrollTop:yr.scrollTop}),function(){var nr=at.current,er=Xat(nr).call(nr,Kt);~er&&Ect(nr).call(nr,er,1)}},[at,ie]),Ot=he.useCallback(function(){var Kt=k.current;w(function(){var yr;return Us(yr=["%cSpineTo%c: %conEnd%c is fired."]).call(yr,Vi(mo("magenta")),Vi(mo("orange")),[{animateTo:Kt}])}),T.current=i0(),tC(Kt,p)||Ze(!1),Q(null)},[k,w,T,p,Q,Ze]),Ft=he.useCallback(function(Kt){var yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nr=yr.behavior,er=ie.current;if(typeof Kt!="number"&&Kt!=="100%")return console.warn('react-scroll-to-bottom: Arguments passed to scrollTo() must be either number or "100%".');w(function(){var vt;return[Us(vt=["%cscrollTo%c: Will scroll to %c".concat(typeof Kt=="number"?Kt+"px":Kt.replace(/%/g,"%%"),"%c")]).call(vt,Vi(mo("lime","")),Vi(mo("purple"))),{behavior:nr,nextAnimateTo:Kt,target:er}]}),nr==="auto"?(Ot(),er&&(er.scrollTop=Kt==="100%"?er.scrollHeight-er.offsetHeight:Kt)):(nr!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollTo". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),Q(Kt)),tC(Kt,p)&&(w(function(){var vt;return[Us(vt=["%cscrollTo%c: Scrolling to end, will set sticky to %ctrue%c."]).call(vt,Vi(mo("lime","")),Vi(mo("purple"))),[{mode:p,nextAnimateTo:Kt}]]}),Ze(!0))},[w,Ot,p,Q,Ze,ie]),lt=he.useCallback(function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=Kt.behavior;w(function(){var nr;return Us(nr=["%cscrollToBottom%c: Called"]).call(nr,Vi(mo("yellow","")))}),yr!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToBottom". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),Ft("100%",{behavior:yr||"smooth"})},[w,Ft]),He=he.useCallback(function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=Kt.behavior;w(function(){var nr;return Us(nr=["%cscrollToTop%c: Called"]).call(nr,Vi(mo("yellow","")))}),yr!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToTop". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),Ft(0,{behavior:yr||"smooth"})},[w,Ft]),vr=he.useCallback(function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=Kt.behavior;w(function(){var er;return Us(er=["%cscrollToEnd%c: Called"]).call(er,Vi(mo("yellow","")))}),yr!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToEnd". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var nr={behavior:yr||"smooth"};p===Ah?He(nr):lt(nr)},[w,p,lt,He]),qt=he.useCallback(function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=Kt.behavior;w(function(){var er;return Us(er=["%cscrollToStart%c: Called"]).call(er,Vi(mo("yellow","")))}),yr!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToStart". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var nr={behavior:yr||"smooth"};p===Ah?lt(nr):He(nr)},[w,p,lt,He]),Nt=he.useCallback(function(){var Kt=ie.current;if(Kt){if(N.current==="auto"){w(function(){var Tr;return Us(Tr=["%ctarget changed%c: Initial scroll"]).call(Tr,Vi(mo("blue")))}),Kt.scrollTop=p===Ah?0:Kt.scrollHeight-Kt.offsetHeight,N.current=!1;return}var yr=fe.current,nr=Kt.offsetHeight,er=Kt.scrollHeight,vt=Kt.scrollTop,tn=p===Ah?0:Math.max(0,er-nr-vt),Rr=Math.max(0,yr-vt),on=E({maxValue:tn,minValue:Rr,offsetHeight:nr,scrollHeight:er,scrollTop:vt}),sr=Math.max(0,Math.min(tn,on)),Mr;p===Ah||sr!==tn?Mr=vt+sr:Mr="100%",w(function(){var Tr,rn,Sr;return[Us(Tr=[Us(rn=Us(Sr="%cscrollToSticky%c: Will animate from %c".concat(yr,"px%c to %c")).call(Sr,typeof Mr=="number"?Mr+"px":Mr.replace(/%/g,"%%"),"%c (%c")).call(rn,(Mr==="100%"?tn:Mr)+yr,"px%c)")]).call(Tr,Vi(mo("orange")),Vi(mo("purple")),Vi(mo("purple")),Vi(mo("purple"))),{animateFrom:yr,maxValue:tn,minValue:Rr,nextAnimateTo:Mr,nextValue:sr,offsetHeight:nr,rawNextValue:on,scrollHeight:er,scrollTop:vt}]}),Ft(Mr,{behavior:"smooth"})}},[fe,w,p,E,Ft,ie]),It=he.useCallback(function(Kt){var yr,nr=Kt.timeStampLow,er=k.current,vt=ie.current,tn=er!==null;if(!(nr<=T.current||!vt)){var Rr=Jse({mode:p,target:vt}),on=Rr.atBottom,sr=Rr.atEnd,Mr=Rr.atStart,Tr=Rr.atTop;ae(on),Me(sr),Fe(Mr),ht(Tr);var rn=vt.offsetHeight,Sr=vt.scrollHeight,ai=Z.current,Ei=pe.current,ti=rn!==ai,dn=Sr!==Ei;if(ti&&(Z.current=rn),dn&&(pe.current=Sr),!ti&&!dn){var Qr=tn&&tC(er,p)||sr;pt.current!==Qr&&(w(function(){var wi,br,Pi,ki;return[Us(wi=["%conScroll%c: %csetSticky%c(%c".concat(Qr,"%c)")]).call(wi,Vi(mo("red")),Vi(mo("red")),Vi(mo("purple"))),Us(br=[Us(Pi=Us(ki="(animating = %c".concat(tn,"%c && isEnd = %c")).call(ki,tC(er,p),"%c) || atEnd = %c")).call(Pi,sr,"%c")]).call(br,Vi(mo("purple")),Vi(mo("purple")),Vi(mo("purple")),[{animating:tn,animateTo:er,atEnd:sr,mode:p,offsetHeight:vt.offsetHeight,scrollHeight:vt.scrollHeight,sticky:pt.current,nextSticky:Qr}])]}),Ze(Qr))}else pt.current&&(w(function(){var wi;return[Us(wi=["%conScroll%c: Size changed while sticky, calling %cscrollToSticky()%c"]).call(wi,Vi(mo("red")),Vi(mo("orange")),[{offsetHeightChanged:ti,scrollHeightChanged:dn}]),{nextOffsetHeight:rn,prevOffsetHeight:ai,nextScrollHeight:Sr,prevScrollHeight:Ei}]}),Nt());var yn=vt.scrollTop;LL(yr=at.current).call(yr,function(wi){return wi({scrollTop:yn})})}},[k,w,T,p,Z,pe,at,Nt,ae,Me,Fe,ht,Ze,pt,ie]);he.useEffect(function(){if(K){var Kt=!1,yr=cAt(function(){var nr=ie.current,er=k.current!==null;pt.current?Jse({mode:p,target:nr}).atEnd?Kt=!1:Kt?i0()-Kt>aAt&&(er||(fe.current=nr.scrollTop,w(function(){var vt;return Us(vt=["%cInterval check%c: Should sticky but not at end, calling %cscrollToSticky()%c to scroll"]).call(vt,Vi(mo("navy")),Vi(mo("orange")))}),Nt()),Kt=!1):Kt=i0():nr.scrollHeight<=nr.offsetHeight&&!pt.current&&(w(function(){var vt;return[Us(vt=["%cInterval check%c: Container is emptied, setting sticky back to %ctrue%c"]).call(vt,Vi(mo("navy")),Vi(mo("purple"))),[{offsetHeight:nr.offsetHeight,scrollHeight:nr.scrollHeight,sticky:pt.current}]]}),Ze(!0))},Math.max(qse,i)||qse);return function(){return clearInterval(yr)}}},[k,i,w,p,Nt,Ze,pt,K,ie]);var Yt=he.useMemo(function(){var Kt=Xse[m]||(Xse[m]=fut({key:"react-scroll-to-bottom--css-"+kut(),nonce:m}));return function(yr){return Kt.css(yr)+""}},[m]),Bt=he.useMemo(function(){return{observeScrollPosition:Rt,setTarget:J,styleToClassName:Yt}},[Rt,J,Yt]),_r=he.useMemo(function(){return{atBottom:le,atEnd:xe,atStart:Ue,atTop:Ke,mode:p}},[le,xe,Ue,Ke,p]),ar=he.useMemo(function(){var Kt=M!==null;return{animating:Kt,animatingToEnd:Kt&&tC(M,p),sticky:et}},[M,p,et]),zr=he.useMemo(function(){return zse(zse({},_r),ar)},[_r,ar]),Xr=he.useMemo(function(){return{scrollTo:Ft,scrollToBottom:lt,scrollToEnd:vr,scrollToStart:qt,scrollToTop:He}},[Ft,lt,vr,qt,He]);return he.useEffect(function(){if(K){var Kt=function(){pe.current=K.scrollHeight};return K.addEventListener("focus",Kt,{capture:!0,passive:!0}),function(){return K.removeEventListener("focus",Kt)}}},[K]),w(function(){var Kt;return[Us(Kt=["%cRender%c: Render"]).call(Kt,Vi(mo("cyan",""))),{animateTo:M,animating:M!==null,sticky:et,target:K}]}),vo.createElement(Lk.Provider,{value:Bt},vo.createElement(PH.Provider,{value:Xr},vo.createElement(xH.Provider,{value:zr},vo.createElement(kH.Provider,{value:_r},vo.createElement(DH.Provider,{value:ar},s,K&&vo.createElement(Rge,{debounce:c,name:"scroll",onEvent:It,target:K}),K&&M!==null&&vo.createElement(Ige,{name:"scrollTop",onEnd:Ot,target:K,value:M}))))))};ej.defaultProps={checkInterval:100,children:void 0,debounce:17,debug:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:oAt};ej.propTypes={checkInterval:Wi.number,children:Wi.any,debounce:Wi.number,debug:Wi.bool,initialScrollBehavior:Wi.oneOf(["auto","smooth"]),mode:Wi.oneOf(["bottom","top"]),nonce:Wi.string,scroller:Wi.func};var lAt={height:"100%",overflowY:"auto",width:"100%"},tj=function(t){var i=t.children,s=t.className,c=he.useContext(Lk),u=c.setTarget,f=UH()(lAt);return vo.createElement("div",{className:LH(f,(s||"")+""),ref:u},i)};tj.defaultProps={children:void 0,className:void 0};tj.propTypes={children:Wi.any,className:Wi.string};var uAt={position:"relative"},rj=function(t){var i=t.children,s=t.className,c=t.followButtonClassName,u=t.scrollViewClassName,f=UH()(uAt);return vo.createElement("div",{className:LH(f,(s||"")+"")},vo.createElement(tj,{className:(u||"")+""},i),vo.createElement(MH,{className:(c||"")+""}))};rj.defaultProps={children:void 0,className:void 0,followButtonClassName:void 0,scrollViewClassName:void 0};rj.propTypes={children:Wi.any,className:Wi.string,followButtonClassName:Wi.string,scrollViewClassName:Wi.string};var nj=function(t){var i=t.checkInterval,s=t.children,c=t.className,u=t.debounce,f=t.debug,p=t.followButtonClassName,m=t.initialScrollBehavior,E=t.mode,w=t.nonce,T=t.scroller,N=t.scrollViewClassName;return vo.createElement(ej,{checkInterval:i,debounce:u,debug:f,initialScrollBehavior:m,mode:E,nonce:w,scroller:T},vo.createElement(rj,{className:c,followButtonClassName:p,scrollViewClassName:N},s))};nj.defaultProps={checkInterval:void 0,children:void 0,className:void 0,debounce:void 0,debug:void 0,followButtonClassName:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:void 0,scrollViewClassName:void 0};nj.propTypes={checkInterval:Wi.number,children:Wi.any,className:Wi.string,debounce:Wi.number,debug:Wi.bool,followButtonClassName:Wi.string,initialScrollBehavior:Wi.oneOf(["auto","smooth"]),mode:Wi.oneOf(["bottom","top"]),nonce:Wi.string,scroller:Wi.func,scrollViewClassName:Wi.string};pGe();var Oge={exports:{}};(function(e,t){(function(i,s){e.exports=s(he)})(Kd,function(i){return function(s){function c(f){if(u[f])return u[f].exports;var p=u[f]={exports:{},id:f,loaded:!1};return s[f].call(p.exports,p,p.exports,c),p.loaded=!0,p.exports}var u={};return c.m=s,c.c=u,c.p="",c(0)}([function(s,c,u){var f=function(P){return P&&P.__esModule?P.default:P},p=f(u(6)),m=f(u(1)),E=f(u(2)),w=f(u(3)),T=f(u(5)),N=f(u(4)),O=function(){var P=function(Z){return Object.keys(Z).map(function(pe){return w(pe)}).join("|")},M=function(Z){var pe={useEmoticon:Z.useEmoticon!==!1,emojiType:Z.emojiType||"twemoji",host:Z.host||"",path:Z.path||"",ext:Z.ext||"svg",singleEmoji:Z.singleEmoji||!1,strict:Z.strict||!1};return pe.attributes=T({width:"20px",height:"20px"},Z.attributes),pe},Q={":/":"1f615"},k="\\:\\/(?!\\/)",D={delimiter:new RegExp("(:(?:"+P(m)+"):|"+P(E)+"|"+k+")","g"),dict:T(m,E,Q)},V={delimiter:new RegExp("(:(?:"+P(m)+"):)","g"),dict:m},K=function(Z,pe){if(pe.host)return N([pe.host,pe.path,""+Z+"."+pe.ext]).join("/");if(pe.emojiType==="twemoji")return"https://twemoji.maxcdn.com/"+pe.ext+"/"+Z+"."+pe.ext;if(pe.emojiType==="emojione")return"http://cdn.jsdelivr.net/emojione/assets/"+pe.ext+"/"+Z.toUpperCase()+"."+pe.ext;throw new Error("Invalid emojiType is passed")},J=function(Z){return Z.match(/^:.*:$/)?Z.replace(/^:/,"").replace(/:$/,""):Z},ie=function(Z,pe){var Y=pe.useEmoticon?D:V,te=Y.dict,le=te[J(Z)];if(pe.strict&&!le)throw new Error("Could not find emoji: "+Z+".");return le?p.createElement("img",T(pe.attributes,{src:K(le,pe)})):Z},fe=function(Z,pe){var Y=pe.useEmoticon?D:V,te=Y.delimiter,le=Y.dict;return N(Z.split(te).map(function(ae,ge){var se=ae.match(te);if(pe.strict&&ae!==""&&se===null)throw new Error("Could not find emoji: "+ae+".");if(se){var xe=le[J(se[0])];return xe===null?ae:p.createElement("img",T(pe.attributes,{key:ge,src:K(xe,pe)}))}return ae}))};return{emojify:function(Z){var pe=arguments[1]===void 0?{}:arguments[1];return Z?(pe=M(pe),pe.singleEmoji?ie(Z,pe):fe(Z,pe)):null}}};s.exports=O()},function(s,c){s.exports={"+1":"1f44d","-1":"1f44e",100:"1f4af",1234:"1f522","8ball":"1f3b1",a:"1f170",ab:"1f18e",abc:"1f524",abcd:"1f521",accept:"1f251",aerial_tramway:"1f6a1",airplane:"2708",airplane_arriving:"1f6ec",airplane_departure:"1f6eb",airplane_small:"1f6e9",alarm_clock:"23f0",alembic:"2697",alien:"1f47d",ambulance:"1f691",amphora:"1f3fa",anchor:"2693",angel:"1f47c",angel_tone1:"1f47c-1f3fb",angel_tone2:"1f47c-1f3fc",angel_tone3:"1f47c-1f3fd",angel_tone4:"1f47c-1f3fe",angel_tone5:"1f47c-1f3ff",anger:"1f4a2",anger_right:"1f5ef",angry:"1f620",anguished:"1f627",ant:"1f41c",apple:"1f34e",aquarius:"2652",aries:"2648",arrow_backward:"25c0",arrow_double_down:"23ec",arrow_double_up:"23eb",arrow_down:"2b07",arrow_down_small:"1f53d",arrow_forward:"25b6",arrow_heading_down:"2935",arrow_heading_up:"2934",arrow_left:"2b05",arrow_lower_left:"2199",arrow_lower_right:"2198",arrow_right:"27a1",arrow_right_hook:"21aa",arrow_up:"2b06",arrow_up_down:"2195",arrow_up_small:"1f53c",arrow_upper_left:"2196",arrow_upper_right:"2197",arrows_clockwise:"1f503",arrows_counterclockwise:"1f504",art:"1f3a8",articulated_lorry:"1f69b",asterisk:"002a-20e3",astonished:"1f632",athletic_shoe:"1f45f",atm:"1f3e7",atom:"269b",avocado:"1f951",b:"1f171",baby:"1f476",baby_bottle:"1f37c",baby_chick:"1f424",baby_symbol:"1f6bc",baby_tone1:"1f476-1f3fb",baby_tone2:"1f476-1f3fc",baby_tone3:"1f476-1f3fd",baby_tone4:"1f476-1f3fe",baby_tone5:"1f476-1f3ff",back:"1f519",bacon:"1f953",badminton:"1f3f8",baggage_claim:"1f6c4",balloon:"1f388",ballot_box:"1f5f3",ballot_box_with_check:"2611",bamboo:"1f38d",banana:"1f34c",bangbang:"203c",bank:"1f3e6",bar_chart:"1f4ca",barber:"1f488",baseball:"26be",basketball:"1f3c0",basketball_player:"26f9",basketball_player_tone1:"26f9-1f3fb",basketball_player_tone2:"26f9-1f3fc",basketball_player_tone3:"26f9-1f3fd",basketball_player_tone4:"26f9-1f3fe",basketball_player_tone5:"26f9-1f3ff",bat:"1f987",bath:"1f6c0",bath_tone1:"1f6c0-1f3fb",bath_tone2:"1f6c0-1f3fc",bath_tone3:"1f6c0-1f3fd",bath_tone4:"1f6c0-1f3fe",bath_tone5:"1f6c0-1f3ff",bathtub:"1f6c1",battery:"1f50b",beach:"1f3d6",beach_umbrella:"26f1",bear:"1f43b",bed:"1f6cf",bee:"1f41d",beer:"1f37a",beers:"1f37b",beetle:"1f41e",beginner:"1f530",bell:"1f514",bellhop:"1f6ce",bento:"1f371",bicyclist:"1f6b4",bicyclist_tone1:"1f6b4-1f3fb",bicyclist_tone2:"1f6b4-1f3fc",bicyclist_tone3:"1f6b4-1f3fd",bicyclist_tone4:"1f6b4-1f3fe",bicyclist_tone5:"1f6b4-1f3ff",bike:"1f6b2",bikini:"1f459",biohazard:"2623",bird:"1f426",birthday:"1f382",black_circle:"26ab",black_heart:"1f5a4",black_joker:"1f0cf",black_large_square:"2b1b",black_medium_small_square:"25fe",black_medium_square:"25fc",black_nib:"2712",black_small_square:"25aa",black_square_button:"1f532",blossom:"1f33c",blowfish:"1f421",blue_book:"1f4d8",blue_car:"1f699",blue_circle:"1f535",blue_heart:"1f499",blush:"1f60a",boat:"26f5",boar:"1f417",bomb:"1f4a3",book:"1f4d6",bookmark:"1f516",bookmark_tabs:"1f4d1",books:"1f4da",boom:"1f4a5",boot:"1f462",bouquet:"1f490",bow:"1f647",bow_and_arrow:"1f3f9",bow_tone1:"1f647-1f3fb",bow_tone2:"1f647-1f3fc",bow_tone3:"1f647-1f3fd",bow_tone4:"1f647-1f3fe",bow_tone5:"1f647-1f3ff",bowling:"1f3b3",bowtie:null,boxing_glove:"1f94a",boy:"1f466",boy_tone1:"1f466-1f3fb",boy_tone2:"1f466-1f3fc",boy_tone3:"1f466-1f3fd",boy_tone4:"1f466-1f3fe",boy_tone5:"1f466-1f3ff",bread:"1f35e",bride_with_veil:"1f470",bride_with_veil_tone1:"1f470-1f3fb",bride_with_veil_tone2:"1f470-1f3fc",bride_with_veil_tone3:"1f470-1f3fd",bride_with_veil_tone4:"1f470-1f3fe",bride_with_veil_tone5:"1f470-1f3ff",bridge_at_night:"1f309",briefcase:"1f4bc",broken_heart:"1f494",bug:"1f41b",bulb:"1f4a1",bullettrain_front:"1f685",bullettrain_side:"1f684",burrito:"1f32f",bus:"1f68c",busstop:"1f68f",bust_in_silhouette:"1f464",busts_in_silhouette:"1f465",butterfly:"1f98b",cactus:"1f335",cake:"1f370",calendar:"1f4c6",calendar_spiral:"1f5d3",call_me:"1f919",call_me_tone1:"1f919-1f3fb",call_me_tone2:"1f919-1f3fc",call_me_tone3:"1f919-1f3fd",call_me_tone4:"1f919-1f3fe",call_me_tone5:"1f919-1f3ff",calling:"1f4f2",camel:"1f42b",camera:"1f4f7",camera_with_flash:"1f4f8",camping:"1f3d5",cancer:"264b",candle:"1f56f",candy:"1f36c",canoe:"1f6f6",capital_abcd:"1f520",capricorn:"2651",car:"1f697",card_box:"1f5c3",card_index:"1f4c7",carousel_horse:"1f3a0",carrot:"1f955",cartwheel:"1f938",cartwheel_tone1:"1f938-1f3fb",cartwheel_tone2:"1f938-1f3fc",cartwheel_tone3:"1f938-1f3fd",cartwheel_tone4:"1f938-1f3fe",cartwheel_tone5:"1f938-1f3ff",cat:"1f431",cat2:"1f408",cd:"1f4bf",chains:"26d3",champagne:"1f37e",champagne_glass:"1f942",chart:"1f4b9",chart_with_downwards_trend:"1f4c9",chart_with_upwards_trend:"1f4c8",checkered_flag:"1f3c1",cheese:"1f9c0",cherries:"1f352",cherry_blossom:"1f338",chestnut:"1f330",chicken:"1f414",children_crossing:"1f6b8",chipmunk:"1f43f",chocolate_bar:"1f36b",christmas_tree:"1f384",church:"26ea",cinema:"1f3a6",circus_tent:"1f3aa",city_dusk:"1f306",city_sunrise:"1f307",city_sunset:"1f307",cityscape:"1f3d9",cl:"1f191",clap:"1f44f",clap_tone1:"1f44f-1f3fb",clap_tone2:"1f44f-1f3fc",clap_tone3:"1f44f-1f3fd",clap_tone4:"1f44f-1f3fe",clap_tone5:"1f44f-1f3ff",clapper:"1f3ac",classical_building:"1f3db",clipboard:"1f4cb",clock:"1f570",clock1:"1f550",clock10:"1f559",clock1030:"1f565",clock11:"1f55a",clock1130:"1f566",clock12:"1f55b",clock1230:"1f567",clock130:"1f55c",clock2:"1f551",clock230:"1f55d",clock3:"1f552",clock330:"1f55e",clock4:"1f553",clock430:"1f55f",clock5:"1f554",clock530:"1f560",clock6:"1f555",clock630:"1f561",clock7:"1f556",clock730:"1f562",clock8:"1f557",clock830:"1f563",clock9:"1f558",clock930:"1f564",closed_book:"1f4d5",closed_lock_with_key:"1f510",closed_umbrella:"1f302",cloud:"2601",cloud_lightning:"1f329",cloud_rain:"1f327",cloud_snow:"1f328",cloud_tornado:"1f32a",clown:"1f921",clubs:"2663",cn:"1f1e8-1f1f3",cocktail:"1f378",coffee:"2615",coffin:"26b0",cold_sweat:"1f630",collision:"1f4a5",comet:"2604",compression:"1f5dc",computer:"1f4bb",confetti_ball:"1f38a",confounded:"1f616",confused:"1f615",congratulations:"3297",construction:"1f6a7",construction_site:"1f3d7",construction_worker:"1f477",construction_worker_tone1:"1f477-1f3fb",construction_worker_tone2:"1f477-1f3fc",construction_worker_tone3:"1f477-1f3fd",construction_worker_tone4:"1f477-1f3fe",construction_worker_tone5:"1f477-1f3ff",control_knobs:"1f39b",convenience_store:"1f3ea",cookie:"1f36a",cooking:"1f373",cool:"1f192",cop:"1f46e",cop_tone1:"1f46e-1f3fb",cop_tone2:"1f46e-1f3fc",cop_tone3:"1f46e-1f3fd",cop_tone4:"1f46e-1f3fe",cop_tone5:"1f46e-1f3ff",copyright:"00a9",corn:"1f33d",couch:"1f6cb",couple:"1f46b",couple_mm:"1f468-2764-1f468",couple_with_heart:"1f491",couple_ww:"1f469-2764-1f469",couplekiss:"1f48f",cow:"1f42e",cow2:"1f404",cowboy:"1f920",crab:"1f980",crayon:"1f58d",credit_card:"1f4b3",crescent_moon:"1f319",cricket:"1f3cf",crocodile:"1f40a",croissant:"1f950",cross:"271d",crossed_flags:"1f38c",crossed_swords:"2694",crown:"1f451",cruise_ship:"1f6f3",cry:"1f622",crying_cat_face:"1f63f",crystal_ball:"1f52e",cucumber:"1f952",cupid:"1f498",curly_loop:"27b0",currency_exchange:"1f4b1",curry:"1f35b",custard:"1f36e",customs:"1f6c3",cyclone:"1f300",dagger:"1f5e1",dancer:"1f483",dancer_tone1:"1f483-1f3fb",dancer_tone2:"1f483-1f3fc",dancer_tone3:"1f483-1f3fd",dancer_tone4:"1f483-1f3fe",dancer_tone5:"1f483-1f3ff",dancers:"1f46f",dango:"1f361",dark_sunglasses:"1f576",dart:"1f3af",dash:"1f4a8",date:"1f4c5",de:"1f1e9-1f1ea",deciduous_tree:"1f333",deer:"1f98c",department_store:"1f3ec",desert:"1f3dc",desktop:"1f5a5",diamond_shape_with_a_dot_inside:"1f4a0",diamonds:"2666",disappointed:"1f61e",disappointed_relieved:"1f625",dividers:"1f5c2",dizzy:"1f4ab",dizzy_face:"1f635",do_not_litter:"1f6af",dog:"1f436",dog2:"1f415",dollar:"1f4b5",dolls:"1f38e",dolphin:"1f42c",door:"1f6aa",doughnut:"1f369",dove:"1f54a",dragon:"1f409",dragon_face:"1f432",dress:"1f457",dromedary_camel:"1f42a",drooling_face:"1f924",droplet:"1f4a7",drum:"1f941",duck:"1f986",dvd:"1f4c0","e-mail":"1f4e7",eagle:"1f985",ear:"1f442",ear_of_rice:"1f33e",ear_tone1:"1f442-1f3fb",ear_tone2:"1f442-1f3fc",ear_tone3:"1f442-1f3fd",ear_tone4:"1f442-1f3fe",ear_tone5:"1f442-1f3ff",earth_africa:"1f30d",earth_americas:"1f30e",earth_asia:"1f30f",egg:"1f95a",eggplant:"1f346",eight:"0038-20e3",eight_pointed_black_star:"2734",eight_spoked_asterisk:"2733",eject:"23cf",electric_plug:"1f50c",elephant:"1f418",email:"2709",end:"1f51a",envelope:"2709",envelope_with_arrow:"1f4e9",es:"1f1ea-1f1f8",euro:"1f4b6",european_castle:"1f3f0",european_post_office:"1f3e4",evergreen_tree:"1f332",exclamation:"2757",expressionless:"1f611",eye:"1f441",eye_in_speech_bubble:"1f441-1f5e8",eyeglasses:"1f453",eyes:"1f440",face_palm:"1f926",face_palm_tone1:"1f926-1f3fb",face_palm_tone2:"1f926-1f3fc",face_palm_tone3:"1f926-1f3fd",face_palm_tone4:"1f926-1f3fe",face_palm_tone5:"1f926-1f3ff",facepunch:"1f44a",factory:"1f3ed",fallen_leaf:"1f342",family:"1f46a",family_mmb:"1f468-1f468-1f466",family_mmbb:"1f468-1f468-1f466-1f466",family_mmg:"1f468-1f468-1f467",family_mmgb:"1f468-1f468-1f467-1f466",family_mmgg:"1f468-1f468-1f467-1f467",family_mwbb:"1f468-1f469-1f466-1f466",family_mwg:"1f468-1f469-1f467",family_mwgb:"1f468-1f469-1f467-1f466",family_mwgg:"1f468-1f469-1f467-1f467",family_wwb:"1f469-1f469-1f466",family_wwbb:"1f469-1f469-1f466-1f466",family_wwg:"1f469-1f469-1f467",family_wwgb:"1f469-1f469-1f467-1f466",family_wwgg:"1f469-1f469-1f467-1f467",fast_forward:"23e9",fax:"1f4e0",fearful:"1f628",feelsgood:null,feet:"1f43e",fencer:"1f93a",ferris_wheel:"1f3a1",ferry:"26f4",field_hockey:"1f3d1",file_cabinet:"1f5c4",file_folder:"1f4c1",film_frames:"1f39e",fingers_crossed:"1f91e",fingers_crossed_tone1:"1f91e-1f3fb",fingers_crossed_tone2:"1f91e-1f3fc",fingers_crossed_tone3:"1f91e-1f3fd",fingers_crossed_tone4:"1f91e-1f3fe",fingers_crossed_tone5:"1f91e-1f3ff",finnadie:null,fire:"1f525",fire_engine:"1f692",fireworks:"1f386",first_place:"1f947",first_quarter_moon:"1f313",first_quarter_moon_with_face:"1f31b",fish:"1f41f",fish_cake:"1f365",fishing_pole_and_fish:"1f3a3",fist:"270a",fist_tone1:"270a-1f3fb",fist_tone2:"270a-1f3fc",fist_tone3:"270a-1f3fd",fist_tone4:"270a-1f3fe",fist_tone5:"270a-1f3ff",five:"0035-20e3",flag_ac:"1f1e6-1f1e8",flag_ad:"1f1e6-1f1e9",flag_ae:"1f1e6-1f1ea",flag_af:"1f1e6-1f1eb",flag_ag:"1f1e6-1f1ec",flag_ai:"1f1e6-1f1ee",flag_al:"1f1e6-1f1f1",flag_am:"1f1e6-1f1f2",flag_ao:"1f1e6-1f1f4",flag_aq:"1f1e6-1f1f6",flag_ar:"1f1e6-1f1f7",flag_as:"1f1e6-1f1f8",flag_at:"1f1e6-1f1f9",flag_au:"1f1e6-1f1fa",flag_aw:"1f1e6-1f1fc",flag_ax:"1f1e6-1f1fd",flag_az:"1f1e6-1f1ff",flag_ba:"1f1e7-1f1e6",flag_bb:"1f1e7-1f1e7",flag_bd:"1f1e7-1f1e9",flag_be:"1f1e7-1f1ea",flag_bf:"1f1e7-1f1eb",flag_bg:"1f1e7-1f1ec",flag_bh:"1f1e7-1f1ed",flag_bi:"1f1e7-1f1ee",flag_bj:"1f1e7-1f1ef",flag_bl:"1f1e7-1f1f1",flag_black:"1f3f4",flag_bm:"1f1e7-1f1f2",flag_bn:"1f1e7-1f1f3",flag_bo:"1f1e7-1f1f4",flag_bq:"1f1e7-1f1f6",flag_br:"1f1e7-1f1f7",flag_bs:"1f1e7-1f1f8",flag_bt:"1f1e7-1f1f9",flag_bv:"1f1e7-1f1fb",flag_bw:"1f1e7-1f1fc",flag_by:"1f1e7-1f1fe",flag_bz:"1f1e7-1f1ff",flag_ca:"1f1e8-1f1e6",flag_cc:"1f1e8-1f1e8",flag_cd:"1f1e8-1f1e9",flag_cf:"1f1e8-1f1eb",flag_cg:"1f1e8-1f1ec",flag_ch:"1f1e8-1f1ed",flag_ci:"1f1e8-1f1ee",flag_ck:"1f1e8-1f1f0",flag_cl:"1f1e8-1f1f1",flag_cm:"1f1e8-1f1f2",flag_cn:"1f1e8-1f1f3",flag_co:"1f1e8-1f1f4",flag_cp:"1f1e8-1f1f5",flag_cr:"1f1e8-1f1f7",flag_cu:"1f1e8-1f1fa",flag_cv:"1f1e8-1f1fb",flag_cw:"1f1e8-1f1fc",flag_cx:"1f1e8-1f1fd",flag_cy:"1f1e8-1f1fe",flag_cz:"1f1e8-1f1ff",flag_de:"1f1e9-1f1ea",flag_dg:"1f1e9-1f1ec",flag_dj:"1f1e9-1f1ef",flag_dk:"1f1e9-1f1f0",flag_dm:"1f1e9-1f1f2",flag_do:"1f1e9-1f1f4",flag_dz:"1f1e9-1f1ff",flag_ea:"1f1ea-1f1e6",flag_ec:"1f1ea-1f1e8",flag_ee:"1f1ea-1f1ea",flag_eg:"1f1ea-1f1ec",flag_eh:"1f1ea-1f1ed",flag_er:"1f1ea-1f1f7",flag_es:"1f1ea-1f1f8",flag_et:"1f1ea-1f1f9",flag_eu:"1f1ea-1f1fa",flag_fi:"1f1eb-1f1ee",flag_fj:"1f1eb-1f1ef",flag_fk:"1f1eb-1f1f0",flag_fm:"1f1eb-1f1f2",flag_fo:"1f1eb-1f1f4",flag_fr:"1f1eb-1f1f7",flag_ga:"1f1ec-1f1e6",flag_gb:"1f1ec-1f1e7",flag_gd:"1f1ec-1f1e9",flag_ge:"1f1ec-1f1ea",flag_gf:"1f1ec-1f1eb",flag_gg:"1f1ec-1f1ec",flag_gh:"1f1ec-1f1ed",flag_gi:"1f1ec-1f1ee",flag_gl:"1f1ec-1f1f1",flag_gm:"1f1ec-1f1f2",flag_gn:"1f1ec-1f1f3",flag_gp:"1f1ec-1f1f5",flag_gq:"1f1ec-1f1f6",flag_gr:"1f1ec-1f1f7",flag_gs:"1f1ec-1f1f8",flag_gt:"1f1ec-1f1f9",flag_gu:"1f1ec-1f1fa",flag_gw:"1f1ec-1f1fc",flag_gy:"1f1ec-1f1fe",flag_hk:"1f1ed-1f1f0",flag_hm:"1f1ed-1f1f2",flag_hn:"1f1ed-1f1f3",flag_hr:"1f1ed-1f1f7",flag_ht:"1f1ed-1f1f9",flag_hu:"1f1ed-1f1fa",flag_ic:"1f1ee-1f1e8",flag_id:"1f1ee-1f1e9",flag_ie:"1f1ee-1f1ea",flag_il:"1f1ee-1f1f1",flag_im:"1f1ee-1f1f2",flag_in:"1f1ee-1f1f3",flag_io:"1f1ee-1f1f4",flag_iq:"1f1ee-1f1f6",flag_ir:"1f1ee-1f1f7",flag_is:"1f1ee-1f1f8",flag_it:"1f1ee-1f1f9",flag_je:"1f1ef-1f1ea",flag_jm:"1f1ef-1f1f2",flag_jo:"1f1ef-1f1f4",flag_jp:"1f1ef-1f1f5",flag_ke:"1f1f0-1f1ea",flag_kg:"1f1f0-1f1ec",flag_kh:"1f1f0-1f1ed",flag_ki:"1f1f0-1f1ee",flag_km:"1f1f0-1f1f2",flag_kn:"1f1f0-1f1f3",flag_kp:"1f1f0-1f1f5",flag_kr:"1f1f0-1f1f7",flag_kw:"1f1f0-1f1fc",flag_ky:"1f1f0-1f1fe",flag_kz:"1f1f0-1f1ff",flag_la:"1f1f1-1f1e6",flag_lb:"1f1f1-1f1e7",flag_lc:"1f1f1-1f1e8",flag_li:"1f1f1-1f1ee",flag_lk:"1f1f1-1f1f0",flag_lr:"1f1f1-1f1f7",flag_ls:"1f1f1-1f1f8",flag_lt:"1f1f1-1f1f9",flag_lu:"1f1f1-1f1fa",flag_lv:"1f1f1-1f1fb",flag_ly:"1f1f1-1f1fe",flag_ma:"1f1f2-1f1e6",flag_mc:"1f1f2-1f1e8",flag_md:"1f1f2-1f1e9",flag_me:"1f1f2-1f1ea",flag_mf:"1f1f2-1f1eb",flag_mg:"1f1f2-1f1ec",flag_mh:"1f1f2-1f1ed",flag_mk:"1f1f2-1f1f0",flag_ml:"1f1f2-1f1f1",flag_mm:"1f1f2-1f1f2",flag_mn:"1f1f2-1f1f3",flag_mo:"1f1f2-1f1f4",flag_mp:"1f1f2-1f1f5",flag_mq:"1f1f2-1f1f6",flag_mr:"1f1f2-1f1f7",flag_ms:"1f1f2-1f1f8",flag_mt:"1f1f2-1f1f9",flag_mu:"1f1f2-1f1fa",flag_mv:"1f1f2-1f1fb",flag_mw:"1f1f2-1f1fc",flag_mx:"1f1f2-1f1fd",flag_my:"1f1f2-1f1fe",flag_mz:"1f1f2-1f1ff",flag_na:"1f1f3-1f1e6",flag_nc:"1f1f3-1f1e8",flag_ne:"1f1f3-1f1ea",flag_nf:"1f1f3-1f1eb",flag_ng:"1f1f3-1f1ec",flag_ni:"1f1f3-1f1ee",flag_nl:"1f1f3-1f1f1",flag_no:"1f1f3-1f1f4",flag_np:"1f1f3-1f1f5",flag_nr:"1f1f3-1f1f7",flag_nu:"1f1f3-1f1fa",flag_nz:"1f1f3-1f1ff",flag_om:"1f1f4-1f1f2",flag_pa:"1f1f5-1f1e6",flag_pe:"1f1f5-1f1ea",flag_pf:"1f1f5-1f1eb",flag_pg:"1f1f5-1f1ec",flag_ph:"1f1f5-1f1ed",flag_pk:"1f1f5-1f1f0",flag_pl:"1f1f5-1f1f1",flag_pm:"1f1f5-1f1f2",flag_pn:"1f1f5-1f1f3",flag_pr:"1f1f5-1f1f7",flag_ps:"1f1f5-1f1f8",flag_pt:"1f1f5-1f1f9",flag_pw:"1f1f5-1f1fc",flag_py:"1f1f5-1f1fe",flag_qa:"1f1f6-1f1e6",flag_re:"1f1f7-1f1ea",flag_ro:"1f1f7-1f1f4",flag_rs:"1f1f7-1f1f8",flag_ru:"1f1f7-1f1fa",flag_rw:"1f1f7-1f1fc",flag_sa:"1f1f8-1f1e6",flag_sb:"1f1f8-1f1e7",flag_sc:"1f1f8-1f1e8",flag_sd:"1f1f8-1f1e9",flag_se:"1f1f8-1f1ea",flag_sg:"1f1f8-1f1ec",flag_sh:"1f1f8-1f1ed",flag_si:"1f1f8-1f1ee",flag_sj:"1f1f8-1f1ef",flag_sk:"1f1f8-1f1f0",flag_sl:"1f1f8-1f1f1",flag_sm:"1f1f8-1f1f2",flag_sn:"1f1f8-1f1f3",flag_so:"1f1f8-1f1f4",flag_sr:"1f1f8-1f1f7",flag_ss:"1f1f8-1f1f8",flag_st:"1f1f8-1f1f9",flag_sv:"1f1f8-1f1fb",flag_sx:"1f1f8-1f1fd",flag_sy:"1f1f8-1f1fe",flag_sz:"1f1f8-1f1ff",flag_ta:"1f1f9-1f1e6",flag_tc:"1f1f9-1f1e8",flag_td:"1f1f9-1f1e9",flag_tf:"1f1f9-1f1eb",flag_tg:"1f1f9-1f1ec",flag_th:"1f1f9-1f1ed",flag_tj:"1f1f9-1f1ef",flag_tk:"1f1f9-1f1f0",flag_tl:"1f1f9-1f1f1",flag_tm:"1f1f9-1f1f2",flag_tn:"1f1f9-1f1f3",flag_to:"1f1f9-1f1f4",flag_tr:"1f1f9-1f1f7",flag_tt:"1f1f9-1f1f9",flag_tv:"1f1f9-1f1fb",flag_tw:"1f1f9-1f1fc",flag_tz:"1f1f9-1f1ff",flag_ua:"1f1fa-1f1e6",flag_ug:"1f1fa-1f1ec",flag_um:"1f1fa-1f1f2",flag_us:"1f1fa-1f1f8",flag_uy:"1f1fa-1f1fe",flag_uz:"1f1fa-1f1ff",flag_va:"1f1fb-1f1e6",flag_vc:"1f1fb-1f1e8",flag_ve:"1f1fb-1f1ea",flag_vg:"1f1fb-1f1ec",flag_vi:"1f1fb-1f1ee",flag_vn:"1f1fb-1f1f3",flag_vu:"1f1fb-1f1fa",flag_wf:"1f1fc-1f1eb",flag_white:"1f3f3",flag_ws:"1f1fc-1f1f8",flag_xk:"1f1fd-1f1f0",flag_ye:"1f1fe-1f1ea",flag_yt:"1f1fe-1f1f9",flag_za:"1f1ff-1f1e6",flag_zm:"1f1ff-1f1f2",flag_zw:"1f1ff-1f1fc",flags:"1f38f",flashlight:"1f526","fleur-de-lis":"269c",flipper:"1f42c",floppy_disk:"1f4be",flower_playing_cards:"1f3b4",flushed:"1f633",fog:"1f32b",foggy:"1f301",football:"1f3c8",footprints:"1f463",fork_and_knife:"1f374",fork_knife_plate:"1f37d",fountain:"26f2",four:"0034-20e3",four_leaf_clover:"1f340",fox:"1f98a",fr:"1f1eb-1f1f7",frame_photo:"1f5bc",free:"1f193",french_bread:"1f956",fried_shrimp:"1f364",fries:"1f35f",frog:"1f438",frowning:"1f626",frowning2:"2639",fuelpump:"26fd",fu:null,full_moon:"1f315",full_moon_with_face:"1f31d",game_die:"1f3b2",gb:"1f1ec-1f1e7",gear:"2699",gem:"1f48e",gemini:"264a",ghost:"1f47b",gift:"1f381",gift_heart:"1f49d",girl:"1f467",girl_tone1:"1f467-1f3fb",girl_tone2:"1f467-1f3fc",girl_tone3:"1f467-1f3fd",girl_tone4:"1f467-1f3fe",girl_tone5:"1f467-1f3ff",globe_with_meridians:"1f310",goal:"1f945",goat:"1f410",golf:"26f3",golfer:"1f3cc",gorilla:"1f98d",grapes:"1f347",green_apple:"1f34f",green_book:"1f4d7",green_heart:"1f49a",grey_exclamation:"2755",grey_question:"2754",grimacing:"1f62c",grin:"1f601",grinning:"1f600",goberserk:null,godmode:null,guardsman:"1f482",guardsman_tone1:"1f482-1f3fb",guardsman_tone2:"1f482-1f3fc",guardsman_tone3:"1f482-1f3fd",guardsman_tone4:"1f482-1f3fe",guardsman_tone5:"1f482-1f3ff",guitar:"1f3b8",gun:"1f52b",haircut:"1f487",haircut_tone1:"1f487-1f3fb",haircut_tone2:"1f487-1f3fc",haircut_tone3:"1f487-1f3fd",haircut_tone4:"1f487-1f3fe",haircut_tone5:"1f487-1f3ff",hamburger:"1f354",hammer:"1f528",hammer_pick:"2692",hamster:"1f439",hand:"270b",hand_splayed:"1f590",hand_splayed_tone1:"1f590-1f3fb",hand_splayed_tone2:"1f590-1f3fc",hand_splayed_tone3:"1f590-1f3fd",hand_splayed_tone4:"1f590-1f3fe",hand_splayed_tone5:"1f590-1f3ff",handbag:"1f45c",handball:"1f93e",handball_tone1:"1f93e-1f3fb",handball_tone2:"1f93e-1f3fc",handball_tone3:"1f93e-1f3fd",handball_tone4:"1f93e-1f3fe",handball_tone5:"1f93e-1f3ff",handshake:"1f91d",handshake_tone1:"1f91d-1f3fb",handshake_tone2:"1f91d-1f3fc",handshake_tone3:"1f91d-1f3fd",handshake_tone4:"1f91d-1f3fe",handshake_tone5:"1f91d-1f3ff",hankey:"1f4a9",hash:"0023-20e3",hatched_chick:"1f425",hatching_chick:"1f423",head_bandage:"1f915",headphones:"1f3a7",hear_no_evil:"1f649",heart:"2764",heart_decoration:"1f49f",heart_exclamation:"2763",heart_eyes:"1f60d",heart_eyes_cat:"1f63b",heartbeat:"1f493",heartpulse:"1f497",hearts:"2665",heavy_check_mark:"2714",heavy_division_sign:"2797",heavy_dollar_sign:"1f4b2",heavy_exclamation_mark:"2757",heavy_minus_sign:"2796",heavy_multiplication_x:"2716",heavy_plus_sign:"2795",helicopter:"1f681",helmet_with_cross:"26d1",herb:"1f33f",hibiscus:"1f33a",high_brightness:"1f506",high_heel:"1f460",hocho:"1f52a",hockey:"1f3d2",hole:"1f573",homes:"1f3d8",honey_pot:"1f36f",honeybee:"1f41d",horse:"1f434",horse_racing:"1f3c7",horse_racing_tone1:"1f3c7-1f3fb",horse_racing_tone2:"1f3c7-1f3fc",horse_racing_tone3:"1f3c7-1f3fd",horse_racing_tone4:"1f3c7-1f3fe",horse_racing_tone5:"1f3c7-1f3ff",hospital:"1f3e5",hot_pepper:"1f336",hotdog:"1f32d",hotel:"1f3e8",hotsprings:"2668",hourglass:"231b",hourglass_flowing_sand:"23f3",house:"1f3e0",house_abandoned:"1f3da",house_with_garden:"1f3e1",hugging:"1f917",hurtrealbad:null,hushed:"1f62f",ice_cream:"1f368",ice_skate:"26f8",icecream:"1f366",id:"1f194",ideograph_advantage:"1f250",imp:"1f47f",inbox_tray:"1f4e5",incoming_envelope:"1f4e8",information_desk_person:"1f481",information_desk_person_tone1:"1f481-1f3fb",information_desk_person_tone2:"1f481-1f3fc",information_desk_person_tone3:"1f481-1f3fd",information_desk_person_tone4:"1f481-1f3fe",information_desk_person_tone5:"1f481-1f3ff",information_source:"2139",innocent:"1f607",interrobang:"2049",iphone:"1f4f1",island:"1f3dd",it:"1f1ee-1f1f9",izakaya_lantern:"1f3ee",jack_o_lantern:"1f383",japan:"1f5fe",japanese_castle:"1f3ef",japanese_goblin:"1f47a",japanese_ogre:"1f479",jeans:"1f456",joy:"1f602",joy_cat:"1f639",joystick:"1f579",jp:"1f1ef-1f1f5",juggling:"1f939",juggling_tone1:"1f939-1f3fb",juggling_tone2:"1f939-1f3fc",juggling_tone3:"1f939-1f3fd",juggling_tone4:"1f939-1f3fe",juggling_tone5:"1f939-1f3ff",kaaba:"1f54b",key:"1f511",key2:"1f5dd",keyboard:"2328",keycap_ten:"1f51f",kimono:"1f458",kiss:"1f48b",kiss_mm:"1f468-2764-1f48b-1f468",kiss_ww:"1f469-2764-1f48b-1f469",kissing:"1f617",kissing_cat:"1f63d",kissing_closed_eyes:"1f61a",kissing_heart:"1f618",kissing_smiling_eyes:"1f619",kiwi:"1f95d",knife:"1f52a",koala:"1f428",koko:"1f201",kr:"1f1f0-1f1f7",label:"1f3f7",lantern:"1f3ee",large_blue_circle:"1f535",large_blue_diamond:"1f537",large_orange_diamond:"1f536",last_quarter_moon:"1f317",last_quarter_moon_with_face:"1f31c",laughing:"1f606",leaves:"1f343",ledger:"1f4d2",left_facing_fist:"1f91b",left_facing_fist_tone1:"1f91b-1f3fb",left_facing_fist_tone2:"1f91b-1f3fc",left_facing_fist_tone3:"1f91b-1f3fd",left_facing_fist_tone4:"1f91b-1f3fe",left_facing_fist_tone5:"1f91b-1f3ff",left_luggage:"1f6c5",left_right_arrow:"2194",leftwards_arrow_with_hook:"21a9",lemon:"1f34b",leo:"264c",leopard:"1f406",level_slider:"1f39a",levitate:"1f574",libra:"264e",lifter:"1f3cb",lifter_tone1:"1f3cb-1f3fb",lifter_tone2:"1f3cb-1f3fc",lifter_tone3:"1f3cb-1f3fd",lifter_tone4:"1f3cb-1f3fe",lifter_tone5:"1f3cb-1f3ff",light_rail:"1f688",link:"1f517",lion_face:"1f981",lips:"1f444",lipstick:"1f484",lizard:"1f98e",lock:"1f512",lock_with_ink_pen:"1f50f",lollipop:"1f36d",loop:"27bf",loud_sound:"1f50a",loudspeaker:"1f4e2",love_hotel:"1f3e9",love_letter:"1f48c",low_brightness:"1f505",lying_face:"1f925",m:"24c2",mag:"1f50d",mag_right:"1f50e",mahjong:"1f004",mailbox:"1f4eb",mailbox_closed:"1f4ea",mailbox_with_mail:"1f4ec",mailbox_with_no_mail:"1f4ed",man:"1f468",man_dancing:"1f57a",man_dancing_tone1:"1f57a-1f3fb",man_dancing_tone2:"1f57a-1f3fc",man_dancing_tone3:"1f57a-1f3fd",man_dancing_tone4:"1f57a-1f3fe",man_dancing_tone5:"1f57a-1f3ff",man_in_tuxedo:"1f935",man_in_tuxedo_tone1:"1f935-1f3fb",man_in_tuxedo_tone2:"1f935-1f3fc",man_in_tuxedo_tone3:"1f935-1f3fd",man_in_tuxedo_tone4:"1f935-1f3fe",man_in_tuxedo_tone5:"1f935-1f3ff",man_tone1:"1f468-1f3fb",man_tone2:"1f468-1f3fc",man_tone3:"1f468-1f3fd",man_tone4:"1f468-1f3fe",man_tone5:"1f468-1f3ff",man_with_gua_pi_mao:"1f472",man_with_gua_pi_mao_tone1:"1f472-1f3fb",man_with_gua_pi_mao_tone2:"1f472-1f3fc",man_with_gua_pi_mao_tone3:"1f472-1f3fd",man_with_gua_pi_mao_tone4:"1f472-1f3fe",man_with_gua_pi_mao_tone5:"1f472-1f3ff",man_with_turban:"1f473",man_with_turban_tone1:"1f473-1f3fb",man_with_turban_tone2:"1f473-1f3fc",man_with_turban_tone3:"1f473-1f3fd",man_with_turban_tone4:"1f473-1f3fe",man_with_turban_tone5:"1f473-1f3ff",mans_shoe:"1f45e",map:"1f5fa",maple_leaf:"1f341",martial_arts_uniform:"1f94b",mask:"1f637",massage:"1f486",massage_tone1:"1f486-1f3fb",massage_tone2:"1f486-1f3fc",massage_tone3:"1f486-1f3fd",massage_tone4:"1f486-1f3fe",massage_tone5:"1f486-1f3ff",meat_on_bone:"1f356",medal:"1f3c5",mega:"1f4e3",melon:"1f348",memo:"1f4dd",menorah:"1f54e",mens:"1f6b9",metal:"1f918",metal_tone1:"1f918-1f3fb",metal_tone2:"1f918-1f3fc",metal_tone3:"1f918-1f3fd",metal_tone4:"1f918-1f3fe",metal_tone5:"1f918-1f3ff",metro:"1f687",microphone:"1f3a4",microphone2:"1f399",microscope:"1f52c",middle_finger:"1f595",middle_finger_tone1:"1f595-1f3fb",middle_finger_tone2:"1f595-1f3fc",middle_finger_tone3:"1f595-1f3fd",middle_finger_tone4:"1f595-1f3fe",middle_finger_tone5:"1f595-1f3ff",military_medal:"1f396",milk:"1f95b",milky_way:"1f30c",minibus:"1f690",minidisc:"1f4bd",mobile_phone_off:"1f4f4",money_mouth:"1f911",money_with_wings:"1f4b8",moneybag:"1f4b0",monkey:"1f412",monkey_face:"1f435",monorail:"1f69d",moon:"1f314",mortar_board:"1f393",mosque:"1f54c",motor_scooter:"1f6f5",motorboat:"1f6e5",motorcycle:"1f3cd",motorway:"1f6e3",mount_fuji:"1f5fb",mountain:"26f0",mountain_bicyclist:"1f6b5",mountain_bicyclist_tone1:"1f6b5-1f3fb",mountain_bicyclist_tone2:"1f6b5-1f3fc",mountain_bicyclist_tone3:"1f6b5-1f3fd",mountain_bicyclist_tone4:"1f6b5-1f3fe",mountain_bicyclist_tone5:"1f6b5-1f3ff",mountain_cableway:"1f6a0",mountain_railway:"1f69e",mountain_snow:"1f3d4",mouse:"1f42d",mouse2:"1f401",mouse_three_button:"1f5b1",movie_camera:"1f3a5",moyai:"1f5ff",mrs_claus:"1f936",mrs_claus_tone1:"1f936-1f3fb",mrs_claus_tone2:"1f936-1f3fc",mrs_claus_tone3:"1f936-1f3fd",mrs_claus_tone4:"1f936-1f3fe",mrs_claus_tone5:"1f936-1f3ff",muscle:"1f4aa",muscle_tone1:"1f4aa-1f3fb",muscle_tone2:"1f4aa-1f3fc",muscle_tone3:"1f4aa-1f3fd",muscle_tone4:"1f4aa-1f3fe",muscle_tone5:"1f4aa-1f3ff",mushroom:"1f344",musical_keyboard:"1f3b9",musical_note:"1f3b5",musical_score:"1f3bc",mute:"1f507",nail_care:"1f485",nail_care_tone1:"1f485-1f3fb",nail_care_tone2:"1f485-1f3fc",nail_care_tone3:"1f485-1f3fd",nail_care_tone4:"1f485-1f3fe",nail_care_tone5:"1f485-1f3ff",name_badge:"1f4db",nauseated_face:"1f922",neckbeard:null,necktie:"1f454",negative_squared_cross_mark:"274e",nerd:"1f913",neutral_face:"1f610",new:"1f195",new_moon:"1f311",new_moon_with_face:"1f31a",newspaper:"1f4f0",newspaper2:"1f5de",ng:"1f196",night_with_stars:"1f303",nine:"0039-20e3",no_bell:"1f515",no_bicycles:"1f6b3",no_entry:"26d4",no_entry_sign:"1f6ab",no_good:"1f645",no_good_tone1:"1f645-1f3fb",no_good_tone2:"1f645-1f3fc",no_good_tone3:"1f645-1f3fd",no_good_tone4:"1f645-1f3fe",no_good_tone5:"1f645-1f3ff",no_mobile_phones:"1f4f5",no_mouth:"1f636",no_pedestrians:"1f6b7",no_smoking:"1f6ad","non-potable_water":"1f6b1",nose:"1f443",nose_tone1:"1f443-1f3fb",nose_tone2:"1f443-1f3fc",nose_tone3:"1f443-1f3fd",nose_tone4:"1f443-1f3fe",nose_tone5:"1f443-1f3ff",notebook:"1f4d3",notebook_with_decorative_cover:"1f4d4",notepad_spiral:"1f5d2",notes:"1f3b6",nut_and_bolt:"1f529",o:"2b55",o2:"1f17e",ocean:"1f30a",octagonal_sign:"1f6d1",octocat:null,octopus:"1f419",oden:"1f362",office:"1f3e2",oil:"1f6e2",ok:"1f197",ok_hand:"1f44c",ok_hand_tone1:"1f44c-1f3fb",ok_hand_tone2:"1f44c-1f3fc",ok_hand_tone3:"1f44c-1f3fd",ok_hand_tone4:"1f44c-1f3fe",ok_hand_tone5:"1f44c-1f3ff",ok_woman:"1f646",ok_woman_tone1:"1f646-1f3fb",ok_woman_tone2:"1f646-1f3fc",ok_woman_tone3:"1f646-1f3fd",ok_woman_tone4:"1f646-1f3fe",ok_woman_tone5:"1f646-1f3ff",older_man:"1f474",older_man_tone1:"1f474-1f3fb",older_man_tone2:"1f474-1f3fc",older_man_tone3:"1f474-1f3fd",older_man_tone4:"1f474-1f3fe",older_man_tone5:"1f474-1f3ff",older_woman:"1f475",older_woman_tone1:"1f475-1f3fb",older_woman_tone2:"1f475-1f3fc",older_woman_tone3:"1f475-1f3fd",older_woman_tone4:"1f475-1f3fe",older_woman_tone5:"1f475-1f3ff",om_symbol:"1f549",on:"1f51b",oncoming_automobile:"1f698",oncoming_bus:"1f68d",oncoming_police_car:"1f694",oncoming_taxi:"1f696",one:"0031-20e3",open_book:"1f4d6",open_file_folder:"1f4c2",open_hands:"1f450",open_hands_tone1:"1f450-1f3fb",open_hands_tone2:"1f450-1f3fc",open_hands_tone3:"1f450-1f3fd",open_hands_tone4:"1f450-1f3fe",open_hands_tone5:"1f450-1f3ff",open_mouth:"1f62e",ophiuchus:"26ce",orange_book:"1f4d9",orthodox_cross:"2626",outbox_tray:"1f4e4",owl:"1f989",ox:"1f402",package:"1f4e6",page_facing_up:"1f4c4",page_with_curl:"1f4c3",pager:"1f4df",paintbrush:"1f58c",palm_tree:"1f334",pancakes:"1f95e",panda_face:"1f43c",paperclip:"1f4ce",paperclips:"1f587",park:"1f3de",parking:"1f17f",part_alternation_mark:"303d",partly_sunny:"26c5",passport_control:"1f6c2",pause_button:"23f8",paw_prints:"1f43e",peace:"262e",peach:"1f351",peanuts:"1f95c",pear:"1f350",pen_ballpoint:"1f58a",pen_fountain:"1f58b",pencil:"1f4dd",pencil2:"270f",penguin:"1f427",pensive:"1f614",performing_arts:"1f3ad",persevere:"1f623",person_frowning:"1f64d",person_frowning_tone1:"1f64d-1f3fb",person_frowning_tone2:"1f64d-1f3fc",person_frowning_tone3:"1f64d-1f3fd",person_frowning_tone4:"1f64d-1f3fe",person_frowning_tone5:"1f64d-1f3ff",person_with_blond_hair:"1f471",person_with_blond_hair_tone1:"1f471-1f3fb",person_with_blond_hair_tone2:"1f471-1f3fc",person_with_blond_hair_tone3:"1f471-1f3fd",person_with_blond_hair_tone4:"1f471-1f3fe",person_with_blond_hair_tone5:"1f471-1f3ff",person_with_pouting_face:"1f64e",person_with_pouting_face_tone1:"1f64e-1f3fb",person_with_pouting_face_tone2:"1f64e-1f3fc",person_with_pouting_face_tone3:"1f64e-1f3fd",person_with_pouting_face_tone4:"1f64e-1f3fe",person_with_pouting_face_tone5:"1f64e-1f3ff",phone:"260e",pick:"26cf",pig:"1f437",pig2:"1f416",pig_nose:"1f43d",pill:"1f48a",pineapple:"1f34d",ping_pong:"1f3d3",pisces:"2653",pizza:"1f355",place_of_worship:"1f6d0",play_pause:"23ef",point_down:"1f447",point_down_tone1:"1f447-1f3fb",point_down_tone2:"1f447-1f3fc",point_down_tone3:"1f447-1f3fd",point_down_tone4:"1f447-1f3fe",point_down_tone5:"1f447-1f3ff",point_left:"1f448",point_left_tone1:"1f448-1f3fb",point_left_tone2:"1f448-1f3fc",point_left_tone3:"1f448-1f3fd",point_left_tone4:"1f448-1f3fe",point_left_tone5:"1f448-1f3ff",point_right:"1f449",point_right_tone1:"1f449-1f3fb",point_right_tone2:"1f449-1f3fc",point_right_tone3:"1f449-1f3fd",point_right_tone4:"1f449-1f3fe",point_right_tone5:"1f449-1f3ff",point_up:"261d",point_up_2:"1f446",point_up_2_tone1:"1f446-1f3fb",point_up_2_tone2:"1f446-1f3fc",point_up_2_tone3:"1f446-1f3fd",point_up_2_tone4:"1f446-1f3fe",point_up_2_tone5:"1f446-1f3ff",point_up_tone1:"261d-1f3fb",point_up_tone2:"261d-1f3fc",point_up_tone3:"261d-1f3fd",point_up_tone4:"261d-1f3fe",point_up_tone5:"261d-1f3ff",police_car:"1f693",poodle:"1f429",poop:"1f4a9",popcorn:"1f37f",post_office:"1f3e3",postal_horn:"1f4ef",postbox:"1f4ee",potable_water:"1f6b0",potato:"1f954",pouch:"1f45d",poultry_leg:"1f357",pound:"1f4b7",pouting_cat:"1f63e",pray:"1f64f",pray_tone1:"1f64f-1f3fb",pray_tone2:"1f64f-1f3fc",pray_tone3:"1f64f-1f3fd",pray_tone4:"1f64f-1f3fe",pray_tone5:"1f64f-1f3ff",prayer_beads:"1f4ff",pregnant_woman:"1f930",pregnant_woman_tone1:"1f930-1f3fb",pregnant_woman_tone2:"1f930-1f3fc",pregnant_woman_tone3:"1f930-1f3fd",pregnant_woman_tone4:"1f930-1f3fe",pregnant_woman_tone5:"1f930-1f3ff",prince:"1f934",prince_tone1:"1f934-1f3fb",prince_tone2:"1f934-1f3fc",prince_tone3:"1f934-1f3fd",prince_tone4:"1f934-1f3fe",prince_tone5:"1f934-1f3ff",princess:"1f478",princess_tone1:"1f478-1f3fb",princess_tone2:"1f478-1f3fc",princess_tone3:"1f478-1f3fd",princess_tone4:"1f478-1f3fe",princess_tone5:"1f478-1f3ff",printer:"1f5a8",projector:"1f4fd",punch:"1f44a",punch_tone1:"1f44a-1f3fb",punch_tone2:"1f44a-1f3fc",punch_tone3:"1f44a-1f3fd",punch_tone4:"1f44a-1f3fe",punch_tone5:"1f44a-1f3ff",purple_heart:"1f49c",purse:"1f45b",pushpin:"1f4cc",put_litter_in_its_place:"1f6ae",question:"2753",rabbit:"1f430",rabbit2:"1f407",race_car:"1f3ce",racehorse:"1f40e",radio:"1f4fb",radio_button:"1f518",radioactive:"2622",rage:"1f621",rage1:null,rage2:null,rage3:null,rage4:null,railway_car:"1f683",railway_track:"1f6e4",rainbow:"1f308",rainbow_flag:"1f3f3-1f308",raised_back_of_hand:"1f91a",raised_back_of_hand_tone1:"1f91a-1f3fb",raised_back_of_hand_tone2:"1f91a-1f3fc",raised_back_of_hand_tone3:"1f91a-1f3fd",raised_back_of_hand_tone4:"1f91a-1f3fe",raised_back_of_hand_tone5:"1f91a-1f3ff",raised_hand:"270b",raised_hand_tone1:"270b-1f3fb",raised_hand_tone2:"270b-1f3fc",raised_hand_tone3:"270b-1f3fd",raised_hand_tone4:"270b-1f3fe",raised_hand_tone5:"270b-1f3ff",raised_hands:"1f64c",raised_hands_tone1:"1f64c-1f3fb",raised_hands_tone2:"1f64c-1f3fc",raised_hands_tone3:"1f64c-1f3fd",raised_hands_tone4:"1f64c-1f3fe",raised_hands_tone5:"1f64c-1f3ff",raising_hand:"1f64b",raising_hand_tone1:"1f64b-1f3fb",raising_hand_tone2:"1f64b-1f3fc",raising_hand_tone3:"1f64b-1f3fd",raising_hand_tone4:"1f64b-1f3fe",raising_hand_tone5:"1f64b-1f3ff",ram:"1f40f",ramen:"1f35c",rat:"1f400",record_button:"23fa",recycle:"267b",red_car:"1f697",red_circle:"1f534",regional_indicator_a:"1f1e6",regional_indicator_b:"1f1e7",regional_indicator_c:"1f1e8",regional_indicator_d:"1f1e9",regional_indicator_e:"1f1ea",regional_indicator_f:"1f1eb",regional_indicator_g:"1f1ec",regional_indicator_h:"1f1ed",regional_indicator_i:"1f1ee",regional_indicator_j:"1f1ef",regional_indicator_k:"1f1f0",regional_indicator_l:"1f1f1",regional_indicator_m:"1f1f2",regional_indicator_n:"1f1f3",regional_indicator_o:"1f1f4",regional_indicator_p:"1f1f5",regional_indicator_q:"1f1f6",regional_indicator_r:"1f1f7",regional_indicator_s:"1f1f8",regional_indicator_t:"1f1f9",regional_indicator_u:"1f1fa",regional_indicator_v:"1f1fb",regional_indicator_w:"1f1fc",regional_indicator_x:"1f1fd",regional_indicator_y:"1f1fe",regional_indicator_z:"1f1ff",registered:"00ae",relaxed:"263a",relieved:"1f60c",reminder_ribbon:"1f397",repeat:"1f501",repeat_one:"1f502",restroom:"1f6bb",revolving_hearts:"1f49e",rewind:"23ea",rhino:"1f98f",ribbon:"1f380",rice:"1f35a",rice_ball:"1f359",rice_cracker:"1f358",rice_scene:"1f391",right_facing_fist:"1f91c",right_facing_fist_tone1:"1f91c-1f3fb",right_facing_fist_tone2:"1f91c-1f3fc",right_facing_fist_tone3:"1f91c-1f3fd",right_facing_fist_tone4:"1f91c-1f3fe",right_facing_fist_tone5:"1f91c-1f3ff",ring:"1f48d",robot:"1f916",rocket:"1f680",rofl:"1f923",roller_coaster:"1f3a2",rolling_eyes:"1f644",rooster:"1f413",rose:"1f339",rosette:"1f3f5",rotating_light:"1f6a8",round_pushpin:"1f4cd",rowboat:"1f6a3",rowboat_tone1:"1f6a3-1f3fb",rowboat_tone2:"1f6a3-1f3fc",rowboat_tone3:"1f6a3-1f3fd",rowboat_tone4:"1f6a3-1f3fe",rowboat_tone5:"1f6a3-1f3ff",ru:"1f1f7-1f1fa",rugby_football:"1f3c9",runner:"1f3c3",runner_tone1:"1f3c3-1f3fb",runner_tone2:"1f3c3-1f3fc",runner_tone3:"1f3c3-1f3fd",runner_tone4:"1f3c3-1f3fe",runner_tone5:"1f3c3-1f3ff",running:"1f3c3",running_shirt_with_sash:"1f3bd",sa:"1f202",sagittarius:"2650",sailboat:"26f5",sake:"1f376",salad:"1f957",sandal:"1f461",santa:"1f385",santa_tone1:"1f385-1f3fb",santa_tone2:"1f385-1f3fc",santa_tone3:"1f385-1f3fd",santa_tone4:"1f385-1f3fe",santa_tone5:"1f385-1f3ff",satellite:"1f4e1",satellite_orbital:"1f6f0",satisfied:"1f606",saxophone:"1f3b7",scales:"2696",school:"1f3eb",school_satchel:"1f392",scissors:"2702",scooter:"1f6f4",scorpion:"1f982",scorpius:"264f",scream:"1f631",scream_cat:"1f640",scroll:"1f4dc",seat:"1f4ba",second_place:"1f948",secret:"3299",see_no_evil:"1f648",seedling:"1f331",selfie:"1f933",selfie_tone1:"1f933-1f3fb",selfie_tone2:"1f933-1f3fc",selfie_tone3:"1f933-1f3fd",selfie_tone4:"1f933-1f3fe",selfie_tone5:"1f933-1f3ff",seven:"0037-20e3",shallow_pan_of_food:"1f958",shamrock:"2618",shark:"1f988",shaved_ice:"1f367",sheep:"1f411",shell:"1f41a",shield:"1f6e1",shinto_shrine:"26e9",ship:"1f6a2",shipit:null,shirt:"1f455",shit:"1f4a9",shoe:"1f45e",shopping_bags:"1f6cd",shopping_cart:"1f6d2",shower:"1f6bf",shrimp:"1f990",shrug:"1f937",shrug_tone1:"1f937-1f3fb",shrug_tone2:"1f937-1f3fc",shrug_tone3:"1f937-1f3fd",shrug_tone4:"1f937-1f3fe",shrug_tone5:"1f937-1f3ff",signal_strength:"1f4f6",simple_smile:"1f642",six:"0036-20e3",six_pointed_star:"1f52f",ski:"1f3bf",skier:"26f7",skull:"1f480",skull_crossbones:"2620",sleeping:"1f634",sleeping_accommodation:"1f6cc",sleepy:"1f62a",slight_frown:"1f641",slight_smile:"1f642",slot_machine:"1f3b0",small_blue_diamond:"1f539",small_orange_diamond:"1f538",small_red_triangle:"1f53a",small_red_triangle_down:"1f53b",smile:"1f604",smile_cat:"1f638",smiley:"1f603",smiley_cat:"1f63a",smiling_imp:"1f608",smirk:"1f60f",smirk_cat:"1f63c",smoking:"1f6ac",snail:"1f40c",snake:"1f40d",sneezing_face:"1f927",snowboarder:"1f3c2",snowflake:"2744",snowman:"26c4",snowman2:"2603",sob:"1f62d",soccer:"26bd",soon:"1f51c",sos:"1f198",sound:"1f509",space_invader:"1f47e",spades:"2660",spaghetti:"1f35d",sparkle:"2747",sparkler:"1f387",sparkles:"2728",sparkling_heart:"1f496",speak_no_evil:"1f64a",speaker:"1f508",speaking_head:"1f5e3",speech_balloon:"1f4ac",speech_left:"1f5e8",speedboat:"1f6a4",spider:"1f577",spider_web:"1f578",spoon:"1f944",spy:"1f575",spy_tone1:"1f575-1f3fb",spy_tone2:"1f575-1f3fc",spy_tone3:"1f575-1f3fd",spy_tone4:"1f575-1f3fe",spy_tone5:"1f575-1f3ff",squid:"1f991",squirrel:null,stadium:"1f3df",star:"2b50",star2:"1f31f",star_and_crescent:"262a",star_of_david:"2721",stars:"1f320",station:"1f689",statue_of_liberty:"1f5fd",steam_locomotive:"1f682",stew:"1f372",stop_button:"23f9",stopwatch:"23f1",straight_ruler:"1f4cf",strawberry:"1f353",stuck_out_tongue:"1f61b",stuck_out_tongue_closed_eyes:"1f61d",stuck_out_tongue_winking_eye:"1f61c",stuffed_flatbread:"1f959",sun_with_face:"1f31e",sunflower:"1f33b",sunglasses:"1f60e",sunny:"2600",sunrise:"1f305",sunrise_over_mountains:"1f304",surfer:"1f3c4",surfer_tone1:"1f3c4-1f3fb",surfer_tone2:"1f3c4-1f3fc",surfer_tone3:"1f3c4-1f3fd",surfer_tone4:"1f3c4-1f3fe",surfer_tone5:"1f3c4-1f3ff",sushi:"1f363",suspect:null,suspension_railway:"1f69f",sweat:"1f613",sweat_drops:"1f4a6",sweat_smile:"1f605",sweet_potato:"1f360",swimmer:"1f3ca",swimmer_tone1:"1f3ca-1f3fb",swimmer_tone2:"1f3ca-1f3fc",swimmer_tone3:"1f3ca-1f3fd",swimmer_tone4:"1f3ca-1f3fe",swimmer_tone5:"1f3ca-1f3ff",symbols:"1f523",synagogue:"1f54d",syringe:"1f489",taco:"1f32e",tada:"1f389",tanabata_tree:"1f38b",tangerine:"1f34a",taurus:"2649",taxi:"1f695",tea:"1f375",telephone:"260e",telephone_receiver:"1f4de",telescope:"1f52d",tennis:"1f3be",tent:"26fa",thermometer:"1f321",thermometer_face:"1f912",thinking:"1f914",third_place:"1f949",thought_balloon:"1f4ad",three:"0033-20e3",thumbsdown:"1f44e",thumbsdown_tone1:"1f44e-1f3fb",thumbsdown_tone2:"1f44e-1f3fc",thumbsdown_tone3:"1f44e-1f3fd",thumbsdown_tone4:"1f44e-1f3fe",thumbsdown_tone5:"1f44e-1f3ff",thumbsup:"1f44d",thumbsup_tone1:"1f44d-1f3fb",thumbsup_tone2:"1f44d-1f3fc",thumbsup_tone3:"1f44d-1f3fd",thumbsup_tone4:"1f44d-1f3fe",thumbsup_tone5:"1f44d-1f3ff",thunder_cloud_rain:"26c8",ticket:"1f3ab",tickets:"1f39f",tiger:"1f42f",tiger2:"1f405",timer:"23f2",tired_face:"1f62b",tm:"2122",toilet:"1f6bd",tokyo_tower:"1f5fc",tomato:"1f345",tone1:"1f3fb",tone2:"1f3fc",tone3:"1f3fd",tone4:"1f3fe",tone5:"1f3ff",tongue:"1f445",tools:"1f6e0",top:"1f51d",tophat:"1f3a9",track_next:"23ed",track_previous:"23ee",trackball:"1f5b2",tractor:"1f69c",traffic_light:"1f6a5",train:"1f68b",train2:"1f686",tram:"1f68a",triangular_flag_on_post:"1f6a9",triangular_ruler:"1f4d0",trident:"1f531",triumph:"1f624",trollface:null,trolleybus:"1f68e",trophy:"1f3c6",tropical_drink:"1f379",tropical_fish:"1f420",truck:"1f69a",trumpet:"1f3ba",tshirt:"1f455",tulip:"1f337",tumbler_glass:"1f943",turkey:"1f983",turtle:"1f422",tv:"1f4fa",twisted_rightwards_arrows:"1f500",two:"0032-20e3",two_hearts:"1f495",two_men_holding_hands:"1f46c",two_women_holding_hands:"1f46d",u5272:"1f239",u5408:"1f234",u55b6:"1f23a",u6307:"1f22f",u6708:"1f237",u6709:"1f236",u6e80:"1f235",u7121:"1f21a",u7533:"1f238",u7981:"1f232",u7a7a:"1f233",uk:"1f1ec-1f1e7",umbrella:"2614",umbrella2:"2602",unamused:"1f612",underage:"1f51e",unicorn:"1f984",unlock:"1f513",up:"1f199",upside_down:"1f643",urn:"26b1",us:"1f1fa-1f1f8",v:"270c",v_tone1:"270c-1f3fb",v_tone2:"270c-1f3fc",v_tone3:"270c-1f3fd",v_tone4:"270c-1f3fe",v_tone5:"270c-1f3ff",vertical_traffic_light:"1f6a6",vhs:"1f4fc",vibration_mode:"1f4f3",video_camera:"1f4f9",video_game:"1f3ae",violin:"1f3bb",virgo:"264d",volcano:"1f30b",volleyball:"1f3d0",vs:"1f19a",vulcan:"1f596",vulcan_tone1:"1f596-1f3fb",vulcan_tone2:"1f596-1f3fc",vulcan_tone3:"1f596-1f3fd",vulcan_tone4:"1f596-1f3fe",vulcan_tone5:"1f596-1f3ff",walking:"1f6b6",walking_tone1:"1f6b6-1f3fb",walking_tone2:"1f6b6-1f3fc",walking_tone3:"1f6b6-1f3fd",walking_tone4:"1f6b6-1f3fe",walking_tone5:"1f6b6-1f3ff",waning_crescent_moon:"1f318",waning_gibbous_moon:"1f316",warning:"26a0",wastebasket:"1f5d1",watch:"231a",water_buffalo:"1f403",water_polo:"1f93d",water_polo_tone1:"1f93d-1f3fb",water_polo_tone2:"1f93d-1f3fc",water_polo_tone3:"1f93d-1f3fd",water_polo_tone4:"1f93d-1f3fe",water_polo_tone5:"1f93d-1f3ff",watermelon:"1f349",wave:"1f44b",wave_tone1:"1f44b-1f3fb",wave_tone2:"1f44b-1f3fc",wave_tone3:"1f44b-1f3fd",wave_tone4:"1f44b-1f3fe",wave_tone5:"1f44b-1f3ff",wavy_dash:"3030",waxing_crescent_moon:"1f312",waxing_gibbous_moon:"1f314",wc:"1f6be",weary:"1f629",wedding:"1f492",whale:"1f433",whale2:"1f40b",wheel_of_dharma:"2638",wheelchair:"267f",white_check_mark:"2705",white_circle:"26aa",white_flower:"1f4ae",white_large_square:"2b1c",white_medium_small_square:"25fd",white_medium_square:"25fb",white_small_square:"25ab",white_square_button:"1f533",white_sun_cloud:"1f325",white_sun_rain_cloud:"1f326",white_sun_small_cloud:"1f324",wilted_rose:"1f940",wind_blowing_face:"1f32c",wind_chime:"1f390",wine_glass:"1f377",wink:"1f609",wolf:"1f43a",woman:"1f469",woman_tone1:"1f469-1f3fb",woman_tone2:"1f469-1f3fc",woman_tone3:"1f469-1f3fd",woman_tone4:"1f469-1f3fe",woman_tone5:"1f469-1f3ff",womans_clothes:"1f45a",womans_hat:"1f452",womens:"1f6ba",worried:"1f61f",wrench:"1f527",wrestlers:"1f93c",wrestlers_tone1:"1f93c-1f3fb",wrestlers_tone2:"1f93c-1f3fc",wrestlers_tone3:"1f93c-1f3fd",wrestlers_tone4:"1f93c-1f3fe",wrestlers_tone5:"1f93c-1f3ff",writing_hand:"270d",writing_hand_tone1:"270d-1f3fb",writing_hand_tone2:"270d-1f3fc",writing_hand_tone3:"270d-1f3fd",writing_hand_tone4:"270d-1f3fe",writing_hand_tone5:"270d-1f3ff",x:"274c",yellow_heart:"1f49b",yen:"1f4b4",yin_yang:"262f",yum:"1f60b",zap:"26a1",zero:"0030-20e3",zipper_mouth:"1f910",zzz:"1f4a4"}},function(s,c){s.exports={"<3":"2764","</3":"1f494",":')":"1f642",":'-)":"1f642",":D":"1f603",":-D":"1f603","=D":"1f603",":)":"1f642",":-)":"1f604","=]":"1f604","=)":"1f604",":]":"1f604","':)":"1f605","':-)":"1f605","'=)":"1f605","':D":"1f605","':-D":"1f605","'=D":"1f605",">:)":"1f606",">;)":"1f606",">:-)":"1f606",">=)":"1f606",";)":"1f609",";-)":"1f609","*-)":"1f609","*)":"1f609",";-]":"1f609",";]":"1f609",";D":"1f609",";^)":"1f609","':(":"1f613","':-(":"1f613","'=(":"1f613",":*":"1f618",":-*":"1f618","=*":"1f618",":^*":"1f618",">:P":"1f61c","X-P":"1f61c","x-p":"1f61c",">:[":"1f61e",":-(":"1f61e",":(":"1f61e",":-[":"1f61e",":[":"1f61e","=(":"1f61e",">:(":"1f620",">:-(":"1f620",":@":"1f620",":'(":"1f622",":'-(":"1f622",";(":"1f622",";-(":"1f622",">.<":"1f623",":$":"1f633","=$":"1f633","#-)":"1f635","#)":"1f635","%-)":"1f635","%)":"1f635","X)":"1f635","X-)":"1f635","*\\0/*":"1f646","\\0/":"1f646","*\\O/*":"1f646","\\O/":"1f646","O:-)":"1f607","0:-3":"1f607","0:3":"1f607","0:-)":"1f607","0:)":"1f607","0;^)":"1f607","O:)":"1f607","O;-)":"1f607","O=)":"1f607","0;-)":"1f607","O:-3":"1f607","O:3":"1f607","B-)":"1f60e","B)":"1f60e","8)":"1f60e","8-)":"1f60e","B-D":"1f60e","8-D":"1f60e","-_-":"1f611","-__-":"1f611","-___-":"1f611",">:\\":"1f615",">:/":"1f615",":-/":"1f615",":-.":"1f615",":\\":"1f615","=/":"1f615","=\\":"1f615",":L":"1f615","=L":"1f615",":P":"1f61b",":-P":"1f61b","=P":"1f61b",":-p":"1f61b",":p":"1f61b","=p":"1f61b",":-":"1f61b",":":"1f61b",":":"1f61b",":-":"1f61b",":-b":"1f61b",":b":"1f61b","d:":"1f61b",":-O":"1f62e",":O":"1f62e",":-o":"1f62e",":o":"1f62e",O_O:"1f62e",">:O":"1f62e",":-X":"1f636",":X":"1f636",":-#":"1f636",":#":"1f636","=X":"1f636","=x":"1f636",":x":"1f636",":-x":"1f636","=#":"1f636"}},function(s,c){var u=/[|\\{}()[\]^$+*?.]/g;s.exports=function(f){if(typeof f!="string")throw new TypeError("Expected a string");return f.replace(u,"\\$&")}},function(s,c){function u(f){for(var p=-1,m=f?f.length:0,E=0,w=[];++p<m;){var T=f[p];T&&(w[E++]=T)}return w}s.exports=u},function(s,c){function u(f){if(f==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(f)}s.exports=Object.assign||function(f,p){for(var m,E,w=u(f),T=1;T<arguments.length;T++){m=arguments[T],E=Object.keys(Object(m));for(var N=0;N<E.length;N++)w[E[N]]=m[E[N]]}return w}},function(s,c){s.exports=i}])})})(Oge);var AAt=Oge.exports;const Zse=$i(AAt),dAt=({message:e,user:t})=>{let i=!1;return t===e.user&&(i=!0),oe.jsx(Xi,{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:i?"flex-end":"flex-start",sx:{gap:1,borderRadius:2,marginY:1},children:i?oe.jsxs(oe.Fragment,{children:[oe.jsx(Gn,{variant:"body2",sx:{color:"gray"},children:t}),oe.jsx(Xi,{sx:{fontSize:"1.1em",borderRadius:2,padding:1,bgcolor:"#2979FF",color:"White",wordBreak:"break-word"},children:Zse.emojify(e.text)})]}):oe.jsxs(oe.Fragment,{children:[oe.jsx(Xi,{sx:{fontSize:"1.1em",borderRadius:2,bgcolor:"#CCCCCC",padding:1,color:"black",wordBreak:"break-word"},children:Zse.emojify(e.text)}),oe.jsx(Gn,{variant:"body2",sx:{color:"#2979FF"},children:e.user})]})})},fAt=({messages:e=[],user:t})=>{const i=he.useRef(null);return he.useEffect(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth"})},[e]),oe.jsx(Xi,{sx:{bgcolor:"background.paper",display:"flex",flexDirection:"column"},children:oe.jsxs(nj,{style:{width:"100%",height:"100%",overflowY:"auto",display:"flex",flexDirection:"column",gap:"10px",backgroundColor:"none"},children:[e.map((s,c)=>oe.jsx(Xi,{sx:{marginBottom:1,"&:focus":{outline:"none"},"&:hover":{backgroundColor:"transparent"}},children:oe.jsx(dAt,{message:s,user:t})},c)),oe.jsx("div",{ref:i})]})})},hAt=()=>oe.jsx(aQ,{position:"static",children:oe.jsx(bQ,{variant:"dense",children:oe.jsx(Gn,{variant:"h6",color:"inherit",component:"div",children:"Room Chats"})})}),pAt=({setMessage:e,sendMessage:t,message:i})=>oe.jsx(Xi,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:oe.jsxs("form",{style:{width:"100%",display:"flex",alignItems:"center"},onSubmit:s=>{s.preventDefault(),t(s)},children:[oe.jsx("input",{style:{width:"100%",height:"100%",flex:1,padding:"10px",border:"1px solid #AAAAAA",borderRadius:"5px",marginRight:"10px",border:"none"},type:"text",placeholder:"Type a message...",value:i,onChange:({target:{value:s}})=>e(s),onKeyDown:s=>s.key==="Enter"?t(s):null}),oe.jsx("button",{style:{padding:"10px 20px",backgroundColor:"#009BFF",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:s=>{console.log("Clicked !"),t(s)},children:"Send"})]})}),gAt=()=>{he.useState([]);const[e,t]=he.useState(""),[i,s]=he.useState(""),[c,u]=he.useState(""),[f,p]=he.useState([]);he.useEffect(()=>((async()=>{try{const w=localStorage.getItem("username"),T=localStorage.getItem("roomId");console.log(`room called with roomId: ${T}`);const N=await JFe(T);p(N),console.log(f),QVe(w,T),VVe(P=>{console.log(P),p(M=>[...M,P])}),t(w),s(T),console.log("Messages fetched:",N)}catch(w){console.error("Error in useEffect:",w)}})(),()=>{console.log("Cleaning up chat listeners"),KVe()}),[p,t,s]);const m=E=>{E.preventDefault(),console.log("clicked"),console.log(c),c.trim()&&(FVe({text:c,user:e},i),u(""))};return oe.jsxs(Xi,{sx:{width:"100%",maxWidth:400,height:"93vh",borderRadius:2,bgcolor:"primary.main",display:"flex",marginTop:7,flexDirection:"column",overflow:"hidden","&:hover":{bgcolor:"primary.dark"}},children:[oe.jsx(Xi,{sx:{flexShrink:0},children:oe.jsx(hAt,{})}),oe.jsx(Xi,{sx:{flexGrow:1,overflowY:"auto"},bgcolor:"white",children:oe.jsx(fAt,{messages:f,user:e})}),oe.jsx(Xi,{sx:{flexShrink:0,borderTop:1,borderColor:"divider",padding:1},children:oe.jsx(pAt,{message:c,setMessage:u,sendMessage:m})})]})};var Q3={exports:{}},eae;function AR(){return eae||(eae=1,function(e,t){(function(i,s){e.exports=s()})(Kd,function(){var i=navigator.userAgent,s=navigator.platform,c=/gecko\/\d/i.test(i),u=/MSIE \d/.test(i),f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(i),p=/Edge\/(\d+)/.exec(i),m=u||f||p,E=m&&(u?document.documentMode||6:+(p||f)[1]),w=!p&&/WebKit\//.test(i),T=w&&/Qt\/\d+\.\d+/.test(i),N=!p&&/Chrome\/(\d+)/.exec(i),O=N&&+N[1],P=/Opera\//.test(i),M=/Apple Computer/.test(navigator.vendor),Q=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(i),k=/PhantomJS/.test(i),D=M&&(/Mobile\/\w+/.test(i)||navigator.maxTouchPoints>2),V=/Android/.test(i),K=D||V||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(i),J=D||/Mac/.test(s),ie=/\bCrOS\b/.test(i),fe=/win/i.test(s),Z=P&&i.match(/Version\/(\d*\.\d*)/);Z&&(Z=Number(Z[1])),Z&&Z>=15&&(P=!1,w=!0);var pe=J&&(T||P&&(Z==null||Z<12.11)),Y=c||m&&E>=9;function te(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var le=function(A,g){var b=A.className,S=te(g).exec(b);if(S){var R=b.slice(S.index+S[0].length);A.className=b.slice(0,S.index)+(R?S[1]+R:"")}};function ae(A){for(var g=A.childNodes.length;g>0;--g)A.removeChild(A.firstChild);return A}function ge(A,g){return ae(A).appendChild(g)}function se(A,g,b,S){var R=document.createElement(A);if(b&&(R.className=b),S&&(R.style.cssText=S),typeof g=="string")R.appendChild(document.createTextNode(g));else if(g)for(var F=0;F<g.length;++F)R.appendChild(g[F]);return R}function xe(A,g,b,S){var R=se(A,g,b,S);return R.setAttribute("role","presentation"),R}var Me;document.createRange?Me=function(A,g,b,S){var R=document.createRange();return R.setEnd(S||A,b),R.setStart(A,g),R}:Me=function(A,g,b){var S=document.body.createTextRange();try{S.moveToElementText(A.parentNode)}catch{return S}return S.collapse(!0),S.moveEnd("character",b),S.moveStart("character",g),S};function Be(A,g){if(g.nodeType==3&&(g=g.parentNode),A.contains)return A.contains(g);do if(g.nodeType==11&&(g=g.host),g==A)return!0;while(g=g.parentNode)}function ke(A){var g=A.ownerDocument||A,b;try{b=A.activeElement}catch{b=g.body||null}for(;b&&b.shadowRoot&&b.shadowRoot.activeElement;)b=b.shadowRoot.activeElement;return b}function Ke(A,g){var b=A.className;te(g).test(b)||(A.className+=(b?" ":"")+g)}function ht(A,g){for(var b=A.split(" "),S=0;S<b.length;S++)b[S]&&!te(b[S]).test(g)&&(g+=" "+b[S]);return g}var ve=function(A){A.select()};D?ve=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:m&&(ve=function(A){try{A.select()}catch{}});function Oe(A){return A.display.wrapper.ownerDocument}function Ue(A){return Fe(A.display.wrapper)}function Fe(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Qe(A){return Oe(A).defaultView}function We(A){var g=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,g)}}function et(A,g,b){g||(g={});for(var S in A)A.hasOwnProperty(S)&&(b!==!1||!g.hasOwnProperty(S))&&(g[S]=A[S]);return g}function Ze(A,g,b,S,R){g==null&&(g=A.search(/[^\s\u00a0]/),g==-1&&(g=A.length));for(var F=S||0,z=R||0;;){var ee=A.indexOf("	",F);if(ee<0||ee>=g)return z+(g-F);z+=ee-F,z+=b-z%b,F=ee+1}}var pt=function(){this.id=null,this.f=null,this.time=0,this.handler=We(this.onTimeout,this)};pt.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},pt.prototype.set=function(A,g){this.f=g;var b=+new Date+A;(!this.id||b<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=b)};function at(A,g){for(var b=0;b<A.length;++b)if(A[b]==g)return b;return-1}var Rt=50,Ot={toString:function(){return"CodeMirror.Pass"}},Ft={scroll:!1},lt={origin:"*mouse"},He={origin:"+move"};function vr(A,g,b){for(var S=0,R=0;;){var F=A.indexOf("	",S);F==-1&&(F=A.length);var z=F-S;if(F==A.length||R+z>=g)return S+Math.min(z,g-R);if(R+=F-S,R+=b-R%b,S=F+1,R>=g)return S}}var qt=[""];function Nt(A){for(;qt.length<=A;)qt.push(It(qt)+" ");return qt[A]}function It(A){return A[A.length-1]}function Yt(A,g){for(var b=[],S=0;S<A.length;S++)b[S]=g(A[S],S);return b}function Bt(A,g,b){for(var S=0,R=b(g);S<A.length&&b(A[S])<=R;)S++;A.splice(S,0,g)}function _r(){}function ar(A,g){var b;return Object.create?b=Object.create(A):(_r.prototype=A,b=new _r),g&&et(g,b),b}var zr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Xr(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||zr.test(A))}function Kt(A,g){return g?g.source.indexOf("\\w")>-1&&Xr(A)?!0:g.test(A):Xr(A)}function yr(A){for(var g in A)if(A.hasOwnProperty(g)&&A[g])return!1;return!0}var nr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function er(A){return A.charCodeAt(0)>=768&&nr.test(A)}function vt(A,g,b){for(;(b<0?g>0:g<A.length)&&er(A.charAt(g));)g+=b;return g}function tn(A,g,b){for(var S=g>b?-1:1;;){if(g==b)return g;var R=(g+b)/2,F=S<0?Math.ceil(R):Math.floor(R);if(F==g)return A(F)?g:b;A(F)?b=F:g=F+S}}function Rr(A,g,b,S){if(!A)return S(g,b,"ltr",0);for(var R=!1,F=0;F<A.length;++F){var z=A[F];(z.from<b&&z.to>g||g==b&&z.to==g)&&(S(Math.max(z.from,g),Math.min(z.to,b),z.level==1?"rtl":"ltr",F),R=!0)}R||S(g,b,"ltr")}var on=null;function sr(A,g,b){var S;on=null;for(var R=0;R<A.length;++R){var F=A[R];if(F.from<g&&F.to>g)return R;F.to==g&&(F.from!=F.to&&b=="before"?S=R:on=R),F.from==g&&(F.from!=F.to&&b!="before"?S=R:on=R)}return S??on}var Mr=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",g="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function b(ye){return ye<=247?A.charAt(ye):1424<=ye&&ye<=1524?"R":1536<=ye&&ye<=1785?g.charAt(ye-1536):1774<=ye&&ye<=2220?"r":8192<=ye&&ye<=8203?"w":ye==8204?"b":"L"}var S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,R=/[stwN]/,F=/[LRr]/,z=/[Lb1n]/,ee=/[1n]/;function ce(ye,Ve,qe){this.level=ye,this.from=Ve,this.to=qe}return function(ye,Ve){var qe=Ve=="ltr"?"L":"R";if(ye.length==0||Ve=="ltr"&&!S.test(ye))return!1;for(var ut=ye.length,ot=[],Lt=0;Lt<ut;++Lt)ot.push(b(ye.charCodeAt(Lt)));for(var zt=0,or=qe;zt<ut;++zt){var Ar=ot[zt];Ar=="m"?ot[zt]=or:or=Ar}for(var Er=0,dr=qe;Er<ut;++Er){var Nr=ot[Er];Nr=="1"&&dr=="r"?ot[Er]="n":F.test(Nr)&&(dr=Nr,Nr=="r"&&(ot[Er]="R"))}for(var an=1,Zr=ot[0];an<ut-1;++an){var Mn=ot[an];Mn=="+"&&Zr=="1"&&ot[an+1]=="1"?ot[an]="1":Mn==","&&Zr==ot[an+1]&&(Zr=="1"||Zr=="n")&&(ot[an]=Zr),Zr=Mn}for(var oo=0;oo<ut;++oo){var ha=ot[oo];if(ha==",")ot[oo]="N";else if(ha=="%"){var Do=void 0;for(Do=oo+1;Do<ut&&ot[Do]=="%";++Do);for(var zc=oo&&ot[oo-1]=="!"||Do<ut&&ot[Do]=="1"?"1":"N",tc=oo;tc<Do;++tc)ot[tc]=zc;oo=Do-1}}for(var Os=0,qc=qe;Os<ut;++Os){var ds=ot[Os];qc=="L"&&ds=="1"?ot[Os]="L":F.test(ds)&&(qc=ds)}for(var Ns=0;Ns<ut;++Ns)if(R.test(ot[Ns])){var xo=void 0;for(xo=Ns+1;xo<ut&&R.test(ot[xo]);++xo);for(var so=(Ns?ot[Ns-1]:qe)=="L",Ec=(xo<ut?ot[xo]:qe)=="L",up=so==Ec?so?"L":"R":qe,mA=Ns;mA<xo;++mA)ot[mA]=up;Ns=xo-1}for(var rc=[],pd,pa=0;pa<ut;)if(z.test(ot[pa])){var K_=pa;for(++pa;pa<ut&&z.test(ot[pa]);++pa);rc.push(new ce(0,K_,pa))}else{var xf=pa,Og=rc.length,Ng=Ve=="rtl"?1:0;for(++pa;pa<ut&&ot[pa]!="L";++pa);for(var Ua=xf;Ua<pa;)if(ee.test(ot[Ua])){xf<Ua&&(rc.splice(Og,0,new ce(1,xf,Ua)),Og+=Ng);var Xl=Ua;for(++Ua;Ua<pa&&ee.test(ot[Ua]);++Ua);rc.splice(Og,0,new ce(2,Xl,Ua)),Og+=Ng,xf=Ua}else++Ua;xf<pa&&rc.splice(Og,0,new ce(1,xf,pa))}return Ve=="ltr"&&(rc[0].level==1&&(pd=ye.match(/^\s+/))&&(rc[0].from=pd[0].length,rc.unshift(new ce(0,0,pd[0].length))),It(rc).level==1&&(pd=ye.match(/\s+$/))&&(It(rc).to-=pd[0].length,rc.push(new ce(0,ut-pd[0].length,ut)))),Ve=="rtl"?rc.reverse():rc}}();function Tr(A,g){var b=A.order;return b==null&&(b=A.order=Mr(A.text,g)),b}var rn=[],Sr=function(A,g,b){if(A.addEventListener)A.addEventListener(g,b,!1);else if(A.attachEvent)A.attachEvent("on"+g,b);else{var S=A._handlers||(A._handlers={});S[g]=(S[g]||rn).concat(b)}};function ai(A,g){return A._handlers&&A._handlers[g]||rn}function Ei(A,g,b){if(A.removeEventListener)A.removeEventListener(g,b,!1);else if(A.detachEvent)A.detachEvent("on"+g,b);else{var S=A._handlers,R=S&&S[g];if(R){var F=at(R,b);F>-1&&(S[g]=R.slice(0,F).concat(R.slice(F+1)))}}}function ti(A,g){var b=ai(A,g);if(b.length)for(var S=Array.prototype.slice.call(arguments,2),R=0;R<b.length;++R)b[R].apply(null,S)}function dn(A,g,b){return typeof g=="string"&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),ti(A,b||g.type,A,g),ki(g)||g.codemirrorIgnore}function Qr(A){var g=A._handlers&&A._handlers.cursorActivity;if(g)for(var b=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),S=0;S<g.length;++S)at(b,g[S])==-1&&b.push(g[S])}function yn(A,g){return ai(A,g).length>0}function wi(A){A.prototype.on=function(g,b){Sr(this,g,b)},A.prototype.off=function(g,b){Ei(this,g,b)}}function br(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function Pi(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function ki(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function kr(A){br(A),Pi(A)}function $a(A){return A.target||A.srcElement}function ls(A){var g=A.which;return g==null&&(A.button&1?g=1:A.button&2?g=3:A.button&4&&(g=2)),J&&A.ctrlKey&&g==1&&(g=3),g}var _s=function(){if(m&&E<9)return!1;var A=se("div");return"draggable"in A||"dragDrop"in A}(),ro;function uo(A){if(ro==null){var g=se("span","");ge(A,se("span",[g,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(ro=g.offsetWidth<=1&&g.offsetHeight>2&&!(m&&E<8))}var b=ro?se("span",""):se("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return b.setAttribute("cm-text",""),b}var ys;function Uc(A){if(ys!=null)return ys;var g=ge(A,document.createTextNode("AA")),b=Me(g,0,1).getBoundingClientRect(),S=Me(g,1,2).getBoundingClientRect();return ae(A),!b||b.left==b.right?!1:ys=S.right-b.right<3}var Zo=`

b`.split(/\n/).length!=3?function(A){for(var g=0,b=[],S=A.length;g<=S;){var R=A.indexOf(`
`,g);R==-1&&(R=A.length);var F=A.slice(g,A.charAt(R-1)=="\r"?R-1:R),z=F.indexOf("\r");z!=-1?(b.push(F.slice(0,z)),g+=z+1):(b.push(F),g=R+1)}return b}:function(A){return A.split(/\r\n?|\n/)},Es=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var g;try{g=A.ownerDocument.selection.createRange()}catch{}return!g||g.parentElement()!=A?!1:g.compareEndPoints("StartToEnd",g)!=0},hc=function(){var A=se("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),es=null;function ul(A){if(es!=null)return es;var g=ge(A,se("span","x")),b=g.getBoundingClientRect(),S=Me(g,0,1).getBoundingClientRect();return es=Math.abs(b.left-S.left)>1}var js={},ts={};function ws(A,g){arguments.length>2&&(g.dependencies=Array.prototype.slice.call(arguments,2)),js[A]=g}function Mc(A,g){ts[A]=g}function Oa(A){if(typeof A=="string"&&ts.hasOwnProperty(A))A=ts[A];else if(A&&typeof A.name=="string"&&ts.hasOwnProperty(A.name)){var g=ts[A.name];typeof g=="string"&&(g={name:g}),A=ar(g,A),A.name=g.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return Oa("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return Oa("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function Kl(A,g){g=Oa(g);var b=js[g.name];if(!b)return Kl(A,"text/plain");var S=b(A,g);if(Fc.hasOwnProperty(g.name)){var R=Fc[g.name];for(var F in R)R.hasOwnProperty(F)&&(S.hasOwnProperty(F)&&(S["_"+F]=S[F]),S[F]=R[F])}if(S.name=g.name,g.helperType&&(S.helperType=g.helperType),g.modeProps)for(var z in g.modeProps)S[z]=g.modeProps[z];return S}var Fc={};function Ks(A,g){var b=Fc.hasOwnProperty(A)?Fc[A]:Fc[A]={};et(g,b)}function Al(A,g){if(g===!0)return g;if(A.copyState)return A.copyState(g);var b={};for(var S in g){var R=g[S];R instanceof Array&&(R=R.concat([])),b[S]=R}return b}function sf(A,g){for(var b;A.innerMode&&(b=A.innerMode(g),!(!b||b.mode==A));)g=b.state,A=b.mode;return b||{mode:A,state:g}}function Di(A,g,b){return A.startState?A.startState(g,b):!0}var no=function(A,g,b){this.pos=this.start=0,this.string=A,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=b};no.prototype.eol=function(){return this.pos>=this.string.length},no.prototype.sol=function(){return this.pos==this.lineStart},no.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},no.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},no.prototype.eat=function(A){var g=this.string.charAt(this.pos),b;if(typeof A=="string"?b=g==A:b=g&&(A.test?A.test(g):A(g)),b)return++this.pos,g},no.prototype.eatWhile=function(A){for(var g=this.pos;this.eat(A););return this.pos>g},no.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},no.prototype.skipToEnd=function(){this.pos=this.string.length},no.prototype.skipTo=function(A){var g=this.string.indexOf(A,this.pos);if(g>-1)return this.pos=g,!0},no.prototype.backUp=function(A){this.pos-=A},no.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ze(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ze(this.string,this.lineStart,this.tabSize):0)},no.prototype.indentation=function(){return Ze(this.string,null,this.tabSize)-(this.lineStart?Ze(this.string,this.lineStart,this.tabSize):0)},no.prototype.match=function(A,g,b){if(typeof A=="string"){var S=function(z){return b?z.toLowerCase():z},R=this.string.substr(this.pos,A.length);if(S(R)==S(A))return g!==!1&&(this.pos+=A.length),!0}else{var F=this.string.slice(this.pos).match(A);return F&&F.index>0?null:(F&&g!==!1&&(this.pos+=F[0].length),F)}},no.prototype.current=function(){return this.string.slice(this.start,this.pos)},no.prototype.hideFirstChars=function(A,g){this.lineStart+=A;try{return g()}finally{this.lineStart-=A}},no.prototype.lookAhead=function(A){var g=this.lineOracle;return g&&g.lookAhead(A)},no.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function Hr(A,g){if(g-=A.first,g<0||g>=A.size)throw new Error("There is no line "+(g+A.first)+" in the document.");for(var b=A;!b.lines;)for(var S=0;;++S){var R=b.children[S],F=R.chunkSize();if(g<F){b=R;break}g-=F}return b.lines[g]}function Vc(A,g,b){var S=[],R=g.line;return A.iter(g.line,b.line+1,function(F){var z=F.text;R==b.line&&(z=z.slice(0,b.ch)),R==g.line&&(z=z.slice(g.ch)),S.push(z),++R}),S}function af(A,g,b){var S=[];return A.iter(g,b,function(R){S.push(R.text)}),S}function Ws(A,g){var b=g-A.height;if(b)for(var S=A;S;S=S.parent)S.height+=b}function Ce(A){if(A.parent==null)return null;for(var g=A.parent,b=at(g.lines,A),S=g.parent;S;g=S,S=S.parent)for(var R=0;S.children[R]!=g;++R)b+=S.children[R].chunkSize();return b+g.first}function Ge(A,g){var b=A.first;e:do{for(var S=0;S<A.children.length;++S){var R=A.children[S],F=R.height;if(g<F){A=R;continue e}g-=F,b+=R.chunkSize()}return b}while(!A.lines);for(var z=0;z<A.lines.length;++z){var ee=A.lines[z],ce=ee.height;if(g<ce)break;g-=ce}return b+z}function Ut(A,g){return g>=A.first&&g<A.first+A.size}function Wt(A,g){return String(A.lineNumberFormatter(g+A.firstLineNumber))}function Tt(A,g,b){if(b===void 0&&(b=null),!(this instanceof Tt))return new Tt(A,g,b);this.line=A,this.ch=g,this.sticky=b}function lr(A,g){return A.line-g.line||A.ch-g.ch}function ri(A,g){return A.sticky==g.sticky&&lr(A,g)==0}function Lo(A){return Tt(A.line,A.ch)}function Bn(A,g){return lr(A,g)<0?g:A}function Na(A,g){return lr(A,g)<0?A:g}function JA(A,g){return Math.max(A.first,Math.min(g,A.first+A.size-1))}function qr(A,g){if(g.line<A.first)return Tt(A.first,0);var b=A.first+A.size-1;return g.line>b?Tt(b,Hr(A,b).text.length):sg(g,Hr(A,g.line).text.length)}function sg(A,g){var b=A.ch;return b==null||b>g?Tt(A.line,g):b<0?Tt(A.line,0):A}function ag(A,g){for(var b=[],S=0;S<g.length;S++)b[S]=qr(A,g[S]);return b}var Bh=function(A,g){this.state=A,this.lookAhead=g},Qc=function(A,g,b,S){this.state=g,this.doc=A,this.line=b,this.maxLookAhead=S||0,this.baseTokens=null,this.baseTokenPos=1};Qc.prototype.lookAhead=function(A){var g=this.doc.getLine(this.line+A);return g!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),g},Qc.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},Qc.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Qc.fromSaved=function(A,g,b){return g instanceof Bh?new Qc(A,Al(A.mode,g.state),b,g.lookAhead):new Qc(A,Al(A.mode,g),b)},Qc.prototype.save=function(A){var g=A!==!1?Al(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Bh(g,this.maxLookAhead):g};function Em(A,g,b,S){var R=[A.state.modeGen],F={};cf(A,g.text,A.doc.mode,b,function(ye,Ve){return R.push(ye,Ve)},F,S);for(var z=b.state,ee=function(ye){b.baseTokens=R;var Ve=A.state.overlays[ye],qe=1,ut=0;b.state=!0,cf(A,g.text,Ve.mode,b,function(ot,Lt){for(var zt=qe;ut<ot;){var or=R[qe];or>ot&&R.splice(qe,1,ot,R[qe+1],or),qe+=2,ut=Math.min(ot,or)}if(Lt)if(Ve.opaque)R.splice(zt,qe-zt,ot,"overlay "+Lt),qe=zt+2;else for(;zt<qe;zt+=2){var Ar=R[zt+1];R[zt+1]=(Ar?Ar+" ":"")+"overlay "+Lt}},F),b.state=z,b.baseTokens=null,b.baseTokenPos=1},ce=0;ce<A.state.overlays.length;++ce)ee(ce);return{styles:R,classes:F.bgClass||F.textClass?F:null}}function cg(A,g,b){if(!g.styles||g.styles[0]!=A.state.modeGen){var S=eA(A,Ce(g)),R=g.text.length>A.options.maxHighlightLength&&Al(A.doc.mode,S.state),F=Em(A,g,S);R&&(S.state=R),g.stateAfter=S.save(!R),g.styles=F.styles,F.classes?g.styleClasses=F.classes:g.styleClasses&&(g.styleClasses=null),b===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return g.styles}function eA(A,g,b){var S=A.doc,R=A.display;if(!S.mode.startState)return new Qc(S,!0,g);var F=wm(A,g,b),z=F>S.first&&Hr(S,F-1).stateAfter,ee=z?Qc.fromSaved(S,z,F):new Qc(S,Di(S.mode),F);return S.iter(F,g,function(ce){ZA(A,ce.text,ee);var ye=ee.line;ce.stateAfter=ye==g-1||ye%5==0||ye>=R.viewFrom&&ye<R.viewTo?ee.save():null,ee.nextLine()}),b&&(S.modeFrontier=ee.line),ee}function ZA(A,g,b,S){var R=A.doc.mode,F=new no(g,A.options.tabSize,b);for(F.start=F.pos=S||0,g==""&&Lh(R,b.state);!F.eol();)lg(R,F,b.state),F.start=F.pos}function Lh(A,g){if(A.blankLine)return A.blankLine(g);if(A.innerMode){var b=sf(A,g);if(b.mode.blankLine)return b.mode.blankLine(b.state)}}function lg(A,g,b,S){for(var R=0;R<10;R++){S&&(S[0]=sf(A,b).mode);var F=A.token(g,b);if(g.pos>g.start)return F}throw new Error("Mode "+A.name+" failed to advance stream.")}var Ph=function(A,g,b){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=g||null,this.state=b};function lu(A,g,b,S){var R=A.doc,F=R.mode,z;g=qr(R,g);var ee=Hr(R,g.line),ce=eA(A,g.line,b),ye=new no(ee.text,A.options.tabSize,ce),Ve;for(S&&(Ve=[]);(S||ye.pos<g.ch)&&!ye.eol();)ye.start=ye.pos,z=lg(F,ye,ce.state),S&&Ve.push(new Ph(ye,z,Al(R.mode,ce.state)));return S?Ve:new Ph(ye,z,ce.state)}function ed(A,g){if(A)for(;;){var b=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!b)break;A=A.slice(0,b.index)+A.slice(b.index+b[0].length);var S=b[1]?"bgClass":"textClass";g[S]==null?g[S]=b[2]:new RegExp("(?:^|\\s)"+b[2]+"(?:$|\\s)").test(g[S])||(g[S]+=" "+b[2])}return A}function cf(A,g,b,S,R,F,z){var ee=b.flattenSpans;ee==null&&(ee=A.options.flattenSpans);var ce=0,ye=null,Ve=new no(g,A.options.tabSize,S),qe,ut=A.options.addModeClass&&[null];for(g==""&&ed(Lh(b,S.state),F);!Ve.eol();){if(Ve.pos>A.options.maxHighlightLength?(ee=!1,z&&ZA(A,g,S,Ve.pos),Ve.pos=g.length,qe=null):qe=ed(lg(b,Ve,S.state,ut),F),ut){var ot=ut[0].name;ot&&(qe="m-"+(qe?ot+" "+qe:ot))}if(!ee||ye!=qe){for(;ce<Ve.start;)ce=Math.min(Ve.start,ce+5e3),R(ce,ye);ye=qe}Ve.start=Ve.pos}for(;ce<Ve.pos;){var Lt=Math.min(Ve.pos,ce+5e3);R(Lt,ye),ce=Lt}}function wm(A,g,b){for(var S,R,F=A.doc,z=b?-1:g-(A.doc.mode.innerMode?1e3:100),ee=g;ee>z;--ee){if(ee<=F.first)return F.first;var ce=Hr(F,ee-1),ye=ce.stateAfter;if(ye&&(!b||ee+(ye instanceof Bh?ye.lookAhead:0)<=F.modeFrontier))return ee;var Ve=Ze(ce.text,null,A.options.tabSize);(R==null||S>Ve)&&(R=ee-1,S=Ve)}return R}function Ba(A,g){if(A.modeFrontier=Math.min(A.modeFrontier,g),!(A.highlightFrontier<g-10)){for(var b=A.first,S=g-1;S>b;S--){var R=Hr(A,S).stateAfter;if(R&&(!(R instanceof Bh)||S+R.lookAhead<g)){b=S+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,b)}}var Sm=!1,dl=!1;function Cn(){Sm=!0}function S0(){dl=!0}function kh(A,g,b){this.marker=A,this.from=g,this.to=b}function za(A,g){if(A)for(var b=0;b<A.length;++b){var S=A[b];if(S.marker==g)return S}}function bm(A,g){for(var b,S=0;S<A.length;++S)A[S]!=g&&(b||(b=[])).push(A[S]);return b}function Cm(A,g,b){var S=b&&window.WeakSet&&(b.markedSpans||(b.markedSpans=new WeakSet));S&&A.markedSpans&&S.has(A.markedSpans)?A.markedSpans.push(g):(A.markedSpans=A.markedSpans?A.markedSpans.concat([g]):[g],S&&S.add(A.markedSpans)),g.marker.attachLine(A)}function Dh(A,g,b){var S;if(A)for(var R=0;R<A.length;++R){var F=A[R],z=F.marker,ee=F.from==null||(z.inclusiveLeft?F.from<=g:F.from<g);if(ee||F.from==g&&z.type=="bookmark"&&(!b||!F.marker.insertLeft)){var ce=F.to==null||(z.inclusiveRight?F.to>=g:F.to>g);(S||(S=[])).push(new kh(z,F.from,ce?null:F.to))}}return S}function tA(A,g,b){var S;if(A)for(var R=0;R<A.length;++R){var F=A[R],z=F.marker,ee=F.to==null||(z.inclusiveRight?F.to>=g:F.to>g);if(ee||F.from==g&&z.type=="bookmark"&&(!b||F.marker.insertLeft)){var ce=F.from==null||(z.inclusiveLeft?F.from<=g:F.from<g);(S||(S=[])).push(new kh(z,ce?null:F.from-g,F.to==null?null:F.to-g))}}return S}function ug(A,g){if(g.full)return null;var b=Ut(A,g.from.line)&&Hr(A,g.from.line).markedSpans,S=Ut(A,g.to.line)&&Hr(A,g.to.line).markedSpans;if(!b&&!S)return null;var R=g.from.ch,F=g.to.ch,z=lr(g.from,g.to)==0,ee=Dh(b,R,z),ce=tA(S,F,z),ye=g.text.length==1,Ve=It(g.text).length+(ye?R:0);if(ee)for(var qe=0;qe<ee.length;++qe){var ut=ee[qe];if(ut.to==null){var ot=za(ce,ut.marker);ot?ye&&(ut.to=ot.to==null?null:ot.to+Ve):ut.to=R}}if(ce)for(var Lt=0;Lt<ce.length;++Lt){var zt=ce[Lt];if(zt.to!=null&&(zt.to+=Ve),zt.from==null){var or=za(ee,zt.marker);or||(zt.from=Ve,ye&&(ee||(ee=[])).push(zt))}else zt.from+=Ve,ye&&(ee||(ee=[])).push(zt)}ee&&(ee=Tm(ee)),ce&&ce!=ee&&(ce=Tm(ce));var Ar=[ee];if(!ye){var Er=g.text.length-2,dr;if(Er>0&&ee)for(var Nr=0;Nr<ee.length;++Nr)ee[Nr].to==null&&(dr||(dr=[])).push(new kh(ee[Nr].marker,null,null));for(var an=0;an<Er;++an)Ar.push(dr);Ar.push(ce)}return Ar}function Tm(A){for(var g=0;g<A.length;++g){var b=A[g];b.from!=null&&b.from==b.to&&b.marker.clearWhenEmpty!==!1&&A.splice(g--,1)}return A.length?A:null}function b0(A,g,b){var S=null;if(A.iter(g.line,b.line+1,function(ot){if(ot.markedSpans)for(var Lt=0;Lt<ot.markedSpans.length;++Lt){var zt=ot.markedSpans[Lt].marker;zt.readOnly&&(!S||at(S,zt)==-1)&&(S||(S=[])).push(zt)}}),!S)return null;for(var R=[{from:g,to:b}],F=0;F<S.length;++F)for(var z=S[F],ee=z.find(0),ce=0;ce<R.length;++ce){var ye=R[ce];if(!(lr(ye.to,ee.from)<0||lr(ye.from,ee.to)>0)){var Ve=[ce,1],qe=lr(ye.from,ee.from),ut=lr(ye.to,ee.to);(qe<0||!z.inclusiveLeft&&!qe)&&Ve.push({from:ye.from,to:ee.from}),(ut>0||!z.inclusiveRight&&!ut)&&Ve.push({from:ee.to,to:ye.to}),R.splice.apply(R,Ve),ce+=Ve.length-3}}return R}function xh(A){var g=A.markedSpans;if(g){for(var b=0;b<g.length;++b)g[b].marker.detachLine(A);A.markedSpans=null}}function rA(A,g){if(g){for(var b=0;b<g.length;++b)g[b].marker.attachLine(A);A.markedSpans=g}}function Wl(A){return A.inclusiveLeft?-1:0}function Uh(A){return A.inclusiveRight?1:0}function nA(A,g){var b=A.lines.length-g.lines.length;if(b!=0)return b;var S=A.find(),R=g.find(),F=lr(S.from,R.from)||Wl(A)-Wl(g);if(F)return-F;var z=lr(S.to,R.to)||Uh(A)-Uh(g);return z||g.id-A.id}function Hc(A,g){var b=dl&&A.markedSpans,S;if(b)for(var R=void 0,F=0;F<b.length;++F)R=b[F],R.marker.collapsed&&(g?R.from:R.to)==null&&(!S||nA(S,R.marker)<0)&&(S=R.marker);return S}function Gs(A){return Hc(A,!0)}function td(A){return Hc(A,!1)}function Rm(A,g){var b=dl&&A.markedSpans,S;if(b)for(var R=0;R<b.length;++R){var F=b[R];F.marker.collapsed&&(F.from==null||F.from<g)&&(F.to==null||F.to>g)&&(!S||nA(S,F.marker)<0)&&(S=F.marker)}return S}function Ag(A,g,b,S,R){var F=Hr(A,g),z=dl&&F.markedSpans;if(z)for(var ee=0;ee<z.length;++ee){var ce=z[ee];if(ce.marker.collapsed){var ye=ce.marker.find(0),Ve=lr(ye.from,b)||Wl(ce.marker)-Wl(R),qe=lr(ye.to,S)||Uh(ce.marker)-Uh(R);if(!(Ve>=0&&qe<=0||Ve<=0&&qe>=0)&&(Ve<=0&&(ce.marker.inclusiveRight&&R.inclusiveLeft?lr(ye.to,b)>=0:lr(ye.to,b)>0)||Ve>=0&&(ce.marker.inclusiveRight&&R.inclusiveLeft?lr(ye.from,S)<=0:lr(ye.from,S)<0)))return!0}}}function pc(A){for(var g;g=Gs(A);)A=g.find(-1,!0).line;return A}function wo(A){for(var g;g=td(A);)A=g.find(1,!0).line;return A}function iA(A){for(var g,b;g=td(A);)A=g.find(1,!0).line,(b||(b=[])).push(A);return b}function dg(A,g){var b=Hr(A,g),S=pc(b);return b==S?g:Ce(S)}function oA(A,g){if(g>A.lastLine())return g;var b=Hr(A,g),S;if(!rs(A,b))return g;for(;S=td(b);)b=S.find(1,!0).line;return Ce(b)+1}function rs(A,g){var b=dl&&g.markedSpans;if(b){for(var S=void 0,R=0;R<b.length;++R)if(S=b[R],!!S.marker.collapsed){if(S.from==null)return!0;if(!S.marker.widgetNode&&S.from==0&&S.marker.inclusiveLeft&&rd(A,g,S))return!0}}}function rd(A,g,b){if(b.to==null){var S=b.marker.find(1,!0);return rd(A,S.line,za(S.line.markedSpans,b.marker))}if(b.marker.inclusiveRight&&b.to==g.text.length)return!0;for(var R=void 0,F=0;F<g.markedSpans.length;++F)if(R=g.markedSpans[F],R.marker.collapsed&&!R.marker.widgetNode&&R.from==b.to&&(R.to==null||R.to!=b.from)&&(R.marker.inclusiveLeft||b.marker.inclusiveRight)&&rd(A,g,R))return!0}function qa(A){A=pc(A);for(var g=0,b=A.parent,S=0;S<b.lines.length;++S){var R=b.lines[S];if(R==A)break;g+=R.height}for(var F=b.parent;F;b=F,F=b.parent)for(var z=0;z<F.children.length;++z){var ee=F.children[z];if(ee==b)break;g+=ee.height}return g}function nd(A){if(A.height==0)return 0;for(var g=A.text.length,b,S=A;b=Gs(S);){var R=b.find(0,!0);S=R.from.line,g+=R.from.ch-R.to.ch}for(S=A;b=td(S);){var F=b.find(0,!0);g-=S.text.length-F.from.ch,S=F.to.line,g+=S.text.length-F.to.ch}return g}function id(A){var g=A.display,b=A.doc;g.maxLine=Hr(b,b.first),g.maxLineLength=nd(g.maxLine),g.maxLineChanged=!0,b.iter(function(S){var R=nd(S);R>g.maxLineLength&&(g.maxLineLength=R,g.maxLine=S)})}var uu=function(A,g,b){this.text=A,rA(this,g),this.height=b?b(this):1};uu.prototype.lineNo=function(){return Ce(this)},wi(uu);function lf(A,g,b,S){A.text=g,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),xh(A),rA(A,b);var R=S?S(A):1;R!=A.height&&Ws(A,R)}function uf(A){A.parent=null,xh(A)}var Im={},Mh={};function fl(A,g){if(!A||/^\s*$/.test(A))return null;var b=g.addModeClass?Mh:Im;return b[A]||(b[A]=A.replace(/\S+/g,"cm-$&"))}function Au(A,g){var b=xe("span",null,null,w?"padding-right: .1px":null),S={pre:xe("pre",[b],"CodeMirror-line"),content:b,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};g.measure={};for(var R=0;R<=(g.rest?g.rest.length:0);R++){var F=R?g.rest[R-1]:g.line,z=void 0;S.pos=0,S.addToken=C0,Uc(A.display.measure)&&(z=Tr(F,A.doc.direction))&&(S.addToken=Af(S.addToken,z)),S.map=[];var ee=g!=A.display.externalMeasured&&Ce(F);jc(F,S,cg(A,F,ee)),F.styleClasses&&(F.styleClasses.bgClass&&(S.bgClass=ht(F.styleClasses.bgClass,S.bgClass||"")),F.styleClasses.textClass&&(S.textClass=ht(F.styleClasses.textClass,S.textClass||""))),S.map.length==0&&S.map.push(0,0,S.content.appendChild(uo(A.display.measure))),R==0?(g.measure.map=S.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(S.map),(g.measure.caches||(g.measure.caches=[])).push({}))}if(w){var ce=S.content.lastChild;(/\bcm-tab\b/.test(ce.className)||ce.querySelector&&ce.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")}return ti(A,"renderLine",A,g.line,S.pre),S.pre.className&&(S.textClass=ht(S.pre.className,S.textClass||"")),S}function Om(A){var g=se("span","","cm-invalidchar");return g.title="\\u"+A.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function C0(A,g,b,S,R,F,z){if(g){var ee=A.splitSpaces?Fh(g,A.trailingSpace):g,ce=A.cm.state.specialChars,ye=!1,Ve;if(!ce.test(g))A.col+=g.length,Ve=document.createTextNode(ee),A.map.push(A.pos,A.pos+g.length,Ve),m&&E<9&&(ye=!0),A.pos+=g.length;else{Ve=document.createDocumentFragment();for(var qe=0;;){ce.lastIndex=qe;var ut=ce.exec(g),ot=ut?ut.index-qe:g.length-qe;if(ot){var Lt=document.createTextNode(ee.slice(qe,qe+ot));m&&E<9?Ve.appendChild(se("span",[Lt])):Ve.appendChild(Lt),A.map.push(A.pos,A.pos+ot,Lt),A.col+=ot,A.pos+=ot}if(!ut)break;qe+=ot+1;var zt=void 0;if(ut[0]=="	"){var or=A.cm.options.tabSize,Ar=or-A.col%or;zt=Ve.appendChild(se("span",Nt(Ar),"cm-tab")),zt.setAttribute("role","presentation"),zt.setAttribute("cm-text","	"),A.col+=Ar}else ut[0]=="\r"||ut[0]==`
`?(zt=Ve.appendChild(se("span",ut[0]=="\r"?"":"","cm-invalidchar")),zt.setAttribute("cm-text",ut[0]),A.col+=1):(zt=A.cm.options.specialCharPlaceholder(ut[0]),zt.setAttribute("cm-text",ut[0]),m&&E<9?Ve.appendChild(se("span",[zt])):Ve.appendChild(zt),A.col+=1);A.map.push(A.pos,A.pos+1,zt),A.pos++}}if(A.trailingSpace=ee.charCodeAt(g.length-1)==32,b||S||R||ye||F||z){var Er=b||"";S&&(Er+=S),R&&(Er+=R);var dr=se("span",[Ve],Er,F);if(z)for(var Nr in z)z.hasOwnProperty(Nr)&&Nr!="style"&&Nr!="class"&&dr.setAttribute(Nr,z[Nr]);return A.content.appendChild(dr)}A.content.appendChild(Ve)}}function Fh(A,g){if(A.length>1&&!/  /.test(A))return A;for(var b=g,S="",R=0;R<A.length;R++){var F=A.charAt(R);F==" "&&b&&(R==A.length-1||A.charCodeAt(R+1)==32)&&(F=""),S+=F,b=F==" "}return S}function Af(A,g){return function(b,S,R,F,z,ee,ce){R=R?R+" cm-force-border":"cm-force-border";for(var ye=b.pos,Ve=ye+S.length;;){for(var qe=void 0,ut=0;ut<g.length&&(qe=g[ut],!(qe.to>ye&&qe.from<=ye));ut++);if(qe.to>=Ve)return A(b,S,R,F,z,ee,ce);A(b,S.slice(0,qe.to-ye),R,F,null,ee,ce),F=null,S=S.slice(qe.to-ye),ye=qe.to}}}function Vh(A,g,b,S){var R=!S&&b.widgetNode;R&&A.map.push(A.pos,A.pos+g,R),!S&&A.cm.display.input.needsContentAttribute&&(R||(R=A.content.appendChild(document.createElement("span"))),R.setAttribute("cm-marker",b.id)),R&&(A.cm.display.input.setUneditable(R),A.content.appendChild(R)),A.pos+=g,A.trailingSpace=!1}function jc(A,g,b){var S=A.markedSpans,R=A.text,F=0;if(!S){for(var z=1;z<b.length;z+=2)g.addToken(g,R.slice(F,F=b[z]),fl(b[z+1],g.cm.options));return}for(var ee=R.length,ce=0,ye=1,Ve="",qe,ut,ot=0,Lt,zt,or,Ar,Er;;){if(ot==ce){Lt=zt=or=ut="",Er=null,Ar=null,ot=1/0;for(var dr=[],Nr=void 0,an=0;an<S.length;++an){var Zr=S[an],Mn=Zr.marker;if(Mn.type=="bookmark"&&Zr.from==ce&&Mn.widgetNode)dr.push(Mn);else if(Zr.from<=ce&&(Zr.to==null||Zr.to>ce||Mn.collapsed&&Zr.to==ce&&Zr.from==ce)){if(Zr.to!=null&&Zr.to!=ce&&ot>Zr.to&&(ot=Zr.to,zt=""),Mn.className&&(Lt+=" "+Mn.className),Mn.css&&(ut=(ut?ut+";":"")+Mn.css),Mn.startStyle&&Zr.from==ce&&(or+=" "+Mn.startStyle),Mn.endStyle&&Zr.to==ot&&(Nr||(Nr=[])).push(Mn.endStyle,Zr.to),Mn.title&&((Er||(Er={})).title=Mn.title),Mn.attributes)for(var oo in Mn.attributes)(Er||(Er={}))[oo]=Mn.attributes[oo];Mn.collapsed&&(!Ar||nA(Ar.marker,Mn)<0)&&(Ar=Zr)}else Zr.from>ce&&ot>Zr.from&&(ot=Zr.from)}if(Nr)for(var ha=0;ha<Nr.length;ha+=2)Nr[ha+1]==ot&&(zt+=" "+Nr[ha]);if(!Ar||Ar.from==ce)for(var Do=0;Do<dr.length;++Do)Vh(g,0,dr[Do]);if(Ar&&(Ar.from||0)==ce){if(Vh(g,(Ar.to==null?ee+1:Ar.to)-ce,Ar.marker,Ar.from==null),Ar.to==null)return;Ar.to==ce&&(Ar=!1)}}if(ce>=ee)break;for(var zc=Math.min(ee,ot);;){if(Ve){var tc=ce+Ve.length;if(!Ar){var Os=tc>zc?Ve.slice(0,zc-ce):Ve;g.addToken(g,Os,qe?qe+Lt:Lt,or,ce+Os.length==ot?zt:"",ut,Er)}if(tc>=zc){Ve=Ve.slice(zc-ce),ce=zc;break}ce=tc,or=""}Ve=R.slice(F,F=b[ye++]),qe=fl(b[ye++],g.cm.options)}}}function Qh(A,g,b){this.line=g,this.rest=iA(g),this.size=this.rest?Ce(It(this.rest))-b+1:1,this.node=this.text=null,this.hidden=rs(A,g)}function j(A,g,b){for(var S=[],R,F=g;F<b;F=R){var z=new Qh(A.doc,Hr(A.doc,F),F);R=F+z.size,S.push(z)}return S}var we=null;function $e(A){we?we.ops.push(A):A.ownsGroup=we={ops:[A],delayedCallbacks:[]}}function Ye(A){var g=A.delayedCallbacks,b=0;do{for(;b<g.length;b++)g[b].call(null);for(var S=0;S<A.ops.length;S++){var R=A.ops[S];if(R.cursorActivityHandlers)for(;R.cursorActivityCalled<R.cursorActivityHandlers.length;)R.cursorActivityHandlers[R.cursorActivityCalled++].call(null,R.cm)}}while(b<g.length)}function gt(A,g){var b=A.ownsGroup;if(b)try{Ye(b)}finally{we=null,g(b)}}var Dt=null;function Gt(A,g){var b=ai(A,g);if(b.length){var S=Array.prototype.slice.call(arguments,2),R;we?R=we.delayedCallbacks:Dt?R=Dt:(R=Dt=[],setTimeout(Lr,0));for(var F=function(ee){R.push(function(){return b[ee].apply(null,S)})},z=0;z<b.length;++z)F(z)}}function Lr(){var A=Dt;Dt=null;for(var g=0;g<A.length;++g)A[g]()}function Jr(A,g,b,S){for(var R=0;R<g.changes.length;R++){var F=g.changes[R];F=="text"?Ao(A,g):F=="gutter"?ns(A,g,b,S):F=="class"?So(A,g):F=="widget"&&ca(A,g,S)}g.changes=null}function En(A){return A.node==A.text&&(A.node=se("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),m&&E<8&&(A.node.style.zIndex=2)),A.node}function On(A,g){var b=g.bgClass?g.bgClass+" "+(g.line.bgClass||""):g.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),g.background)b?g.background.className=b:(g.background.parentNode.removeChild(g.background),g.background=null);else if(b){var S=En(g);g.background=S.insertBefore(se("div",null,b),S.firstChild),A.display.input.setUneditable(g.background)}}function ci(A,g){var b=A.display.externalMeasured;return b&&b.line==g.line?(A.display.externalMeasured=null,g.measure=b.measure,b.built):Au(A,g)}function Ao(A,g){var b=g.text.className,S=ci(A,g);g.text==g.node&&(g.node=S.pre),g.text.parentNode.replaceChild(S.pre,g.text),g.text=S.pre,S.bgClass!=g.bgClass||S.textClass!=g.textClass?(g.bgClass=S.bgClass,g.textClass=S.textClass,So(A,g)):b&&(g.text.className=b)}function So(A,g){On(A,g),g.line.wrapClass?En(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className="");var b=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass;g.text.className=b||""}function ns(A,g,b,S){if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass){var R=En(g);g.gutterBackground=se("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(A.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px; width: "+S.gutterTotalWidth+"px"),A.display.input.setUneditable(g.gutterBackground),R.insertBefore(g.gutterBackground,g.text)}var F=g.line.gutterMarkers;if(A.options.lineNumbers||F){var z=En(g),ee=g.gutter=se("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px");if(ee.setAttribute("aria-hidden","true"),A.display.input.setUneditable(ee),z.insertBefore(ee,g.text),g.line.gutterClass&&(ee.className+=" "+g.line.gutterClass),A.options.lineNumbers&&(!F||!F["CodeMirror-linenumbers"])&&(g.lineNumber=ee.appendChild(se("div",Wt(A.options,b),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+S.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),F)for(var ce=0;ce<A.display.gutterSpecs.length;++ce){var ye=A.display.gutterSpecs[ce].className,Ve=F.hasOwnProperty(ye)&&F[ye];Ve&&ee.appendChild(se("div",[Ve],"CodeMirror-gutter-elt","left: "+S.gutterLeft[ye]+"px; width: "+S.gutterWidth[ye]+"px"))}}}function ca(A,g,b){g.alignable&&(g.alignable=null);for(var S=te("CodeMirror-linewidget"),R=g.node.firstChild,F=void 0;R;R=F)F=R.nextSibling,S.test(R.className)&&g.node.removeChild(R);Ss(A,g,b)}function $s(A,g,b,S){var R=ci(A,g);return g.text=g.node=R.pre,R.bgClass&&(g.bgClass=R.bgClass),R.textClass&&(g.textClass=R.textClass),So(A,g),ns(A,g,b,S),Ss(A,g,S),g.node}function Ss(A,g,b){if(gc(A,g.line,g,b,!0),g.rest)for(var S=0;S<g.rest.length;S++)gc(A,g.rest[S],g,b,!1)}function gc(A,g,b,S,R){if(g.widgets)for(var F=En(b),z=0,ee=g.widgets;z<ee.length;++z){var ce=ee[z],ye=se("div",[ce.node],"CodeMirror-linewidget"+(ce.className?" "+ce.className:""));ce.handleMouseEvents||ye.setAttribute("cm-ignore-events","true"),du(ce,ye,b,S),A.display.input.setUneditable(ye),R&&ce.above?F.insertBefore(ye,b.gutter||b.text):F.appendChild(ye),Gt(ce,"redraw")}}function du(A,g,b,S){if(A.noHScroll){(b.alignable||(b.alignable=[])).push(g);var R=S.wrapperWidth;g.style.left=S.fixedPos+"px",A.coverGutter||(R-=S.gutterTotalWidth,g.style.paddingLeft=S.gutterTotalWidth+"px"),g.style.width=R+"px"}A.coverGutter&&(g.style.zIndex=5,g.style.position="relative",A.noHScroll||(g.style.marginLeft=-S.gutterTotalWidth+"px"))}function od(A){if(A.height!=null)return A.height;var g=A.doc.cm;if(!g)return 0;if(!Be(document.body,A.node)){var b="position: relative;";A.coverGutter&&(b+="margin-left: -"+g.display.gutters.offsetWidth+"px;"),A.noHScroll&&(b+="width: "+g.display.wrapper.clientWidth+"px;"),ge(g.display.measure,se("div",[A.node],null,b))}return A.height=A.node.parentNode.offsetHeight}function mc(A,g){for(var b=$a(g);b!=A.wrapper;b=b.parentNode)if(!b||b.nodeType==1&&b.getAttribute("cm-ignore-events")=="true"||b.parentNode==A.sizer&&b!=A.mover)return!0}function fu(A){return A.lineSpace.offsetTop}function sd(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function Hh(A){if(A.cachedPaddingH)return A.cachedPaddingH;var g=ge(A.measure,se("pre","x","CodeMirror-line-like")),b=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,S={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return!isNaN(S.left)&&!isNaN(S.right)&&(A.cachedPaddingH=S),S}function vc(A){return Rt-A.display.nativeBarWidth}function Po(A){return A.display.scroller.clientWidth-vc(A)-A.display.barWidth}function bs(A){return A.display.scroller.clientHeight-vc(A)-A.display.barHeight}function jh(A,g,b){var S=A.options.lineWrapping,R=S&&Po(A);if(!g.measure.heights||S&&g.measure.width!=R){var F=g.measure.heights=[];if(S){g.measure.width=R;for(var z=g.text.firstChild.getClientRects(),ee=0;ee<z.length-1;ee++){var ce=z[ee],ye=z[ee+1];Math.abs(ce.bottom-ye.bottom)>2&&F.push((ce.bottom+ye.top)/2-b.top)}}F.push(b.bottom-b.top)}}function df(A,g,b){if(A.line==g)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var S=0;S<A.rest.length;S++)if(A.rest[S]==g)return{map:A.measure.maps[S],cache:A.measure.caches[S]};for(var R=0;R<A.rest.length;R++)if(Ce(A.rest[R])>b)return{map:A.measure.maps[R],cache:A.measure.caches[R],before:!0}}}function Kh(A,g){g=pc(g);var b=Ce(g),S=A.display.externalMeasured=new Qh(A.doc,g,b);S.lineN=b;var R=S.built=Au(A,S);return S.text=R.pre,ge(A.display.lineMeasure,R.pre),S}function ff(A,g,b,S){return Ya(A,ad(A,g),b,S)}function La(A,g){if(g>=A.display.viewFrom&&g<A.display.viewTo)return A.display.view[vi(A,g)];var b=A.display.externalMeasured;if(b&&g>=b.lineN&&g<b.lineN+b.size)return b}function ad(A,g){var b=Ce(g),S=La(A,b);S&&!S.text?S=null:S&&S.changes&&(Jr(A,S,b,pu(A)),A.curOp.forceUpdate=!0),S||(S=Kh(A,g));var R=df(S,g,b);return{line:g,view:S,rect:null,map:R.map,cache:R.cache,before:R.before,hasHeights:!1}}function Ya(A,g,b,S,R){g.before&&(b=-1);var F=b+(S||""),z;return g.cache.hasOwnProperty(F)?z=g.cache[F]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(jh(A,g.view,g.rect),g.hasHeights=!0),z=pf(A,g,b,S),z.bogus||(g.cache[F]=z)),{left:z.left,right:z.right,top:R?z.rtop:z.top,bottom:R?z.rbottom:z.bottom}}var hf={left:0,right:0,top:0,bottom:0};function Kc(A,g,b){for(var S,R,F,z,ee,ce,ye=0;ye<A.length;ye+=3)if(ee=A[ye],ce=A[ye+1],g<ee?(R=0,F=1,z="left"):g<ce?(R=g-ee,F=R+1):(ye==A.length-3||g==ce&&A[ye+3]>g)&&(F=ce-ee,R=F-1,g>=ce&&(z="right")),R!=null){if(S=A[ye+2],ee==ce&&b==(S.insertLeft?"left":"right")&&(z=b),b=="left"&&R==0)for(;ye&&A[ye-2]==A[ye-3]&&A[ye-1].insertLeft;)S=A[(ye-=3)+2],z="left";if(b=="right"&&R==ce-ee)for(;ye<A.length-3&&A[ye+3]==A[ye+4]&&!A[ye+5].insertLeft;)S=A[(ye+=3)+2],z="right";break}return{node:S,start:R,end:F,collapse:z,coverStart:ee,coverEnd:ce}}function Wh(A,g){var b=hf;if(g=="left")for(var S=0;S<A.length&&(b=A[S]).left==b.right;S++);else for(var R=A.length-1;R>=0&&(b=A[R]).left==b.right;R--);return b}function pf(A,g,b,S){var R=Kc(g.map,b,S),F=R.node,z=R.start,ee=R.end,ce=R.collapse,ye;if(F.nodeType==3){for(var Ve=0;Ve<4;Ve++){for(;z&&er(g.line.text.charAt(R.coverStart+z));)--z;for(;R.coverStart+ee<R.coverEnd&&er(g.line.text.charAt(R.coverStart+ee));)++ee;if(m&&E<9&&z==0&&ee==R.coverEnd-R.coverStart?ye=F.parentNode.getBoundingClientRect():ye=Wh(Me(F,z,ee).getClientRects(),S),ye.left||ye.right||z==0)break;ee=z,z=z-1,ce="right"}m&&E<11&&(ye=Nm(A.display.measure,ye))}else{z>0&&(ce=S="right");var qe;A.options.lineWrapping&&(qe=F.getClientRects()).length>1?ye=qe[S=="right"?qe.length-1:0]:ye=F.getBoundingClientRect()}if(m&&E<9&&!z&&(!ye||!ye.left&&!ye.right)){var ut=F.parentNode.getClientRects()[0];ut?ye={left:ut.left,right:ut.left+gl(A.display),top:ut.top,bottom:ut.bottom}:ye=hf}for(var ot=ye.top-g.rect.top,Lt=ye.bottom-g.rect.top,zt=(ot+Lt)/2,or=g.view.measure.heights,Ar=0;Ar<or.length-1&&!(zt<or[Ar]);Ar++);var Er=Ar?or[Ar-1]:0,dr=or[Ar],Nr={left:(ce=="right"?ye.right:ye.left)-g.rect.left,right:(ce=="left"?ye.left:ye.right)-g.rect.left,top:Er,bottom:dr};return!ye.left&&!ye.right&&(Nr.bogus=!0),A.options.singleCursorHeightPerLine||(Nr.rtop=ot,Nr.rbottom=Lt),Nr}function Nm(A,g){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ul(A))return g;var b=screen.logicalXDPI/screen.deviceXDPI,S=screen.logicalYDPI/screen.deviceYDPI;return{left:g.left*b,right:g.right*b,top:g.top*S,bottom:g.bottom*S}}function sA(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var g=0;g<A.rest.length;g++)A.measure.caches[g]={}}function cd(A){A.display.externalMeasure=null,ae(A.display.lineMeasure);for(var g=0;g<A.display.view.length;g++)sA(A.display.view[g])}function fo(A){cd(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function Pa(A){return N&&V?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function aA(A){return N&&V?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function bo(A){var g=pc(A),b=g.widgets,S=0;if(b)for(var R=0;R<b.length;++R)b[R].above&&(S+=od(b[R]));return S}function hl(A,g,b,S,R){if(!R){var F=bo(g);b.top+=F,b.bottom+=F}if(S=="line")return b;S||(S="local");var z=qa(g);if(S=="local"?z+=fu(A.display):z-=A.display.viewOffset,S=="page"||S=="window"){var ee=A.display.lineSpace.getBoundingClientRect();z+=ee.top+(S=="window"?0:aA(Oe(A)));var ce=ee.left+(S=="window"?0:Pa(Oe(A)));b.left+=ce,b.right+=ce}return b.top+=z,b.bottom+=z,b}function gf(A,g,b){if(b=="div")return g;var S=g.left,R=g.top;if(b=="page")S-=Pa(Oe(A)),R-=aA(Oe(A));else if(b=="local"||!b){var F=A.display.sizer.getBoundingClientRect();S+=F.left,R+=F.top}var z=A.display.lineSpace.getBoundingClientRect();return{left:S-z.left,top:R-z.top}}function pl(A,g,b,S,R){return S||(S=Hr(A.doc,g.line)),hl(A,S,ff(A,S,g.ch,R),b)}function Ri(A,g,b,S,R,F){S=S||Hr(A.doc,g.line),R||(R=ad(A,S));function z(Lt,zt){var or=Ya(A,R,Lt,zt?"right":"left",F);return zt?or.left=or.right:or.right=or.left,hl(A,S,or,b)}var ee=Tr(S,A.doc.direction),ce=g.ch,ye=g.sticky;if(ce>=S.text.length?(ce=S.text.length,ye="before"):ce<=0&&(ce=0,ye="after"),!ee)return z(ye=="before"?ce-1:ce,ye=="before");function Ve(Lt,zt,or){var Ar=ee[zt],Er=Ar.level==1;return z(or?Lt-1:Lt,Er!=or)}var qe=sr(ee,ce,ye),ut=on,ot=Ve(ce,qe,ye=="before");return ut!=null&&(ot.other=Ve(ce,ut,ye!="before")),ot}function mf(A,g){var b=0;g=qr(A.doc,g),A.options.lineWrapping||(b=gl(A.display)*g.ch);var S=Hr(A.doc,g.line),R=qa(S)+fu(A.display);return{left:b,right:b,top:R,bottom:R+S.height}}function la(A,g,b,S,R){var F=Tt(A,g,b);return F.xRel=R,S&&(F.outside=S),F}function _c(A,g,b){var S=A.doc;if(b+=A.display.viewOffset,b<0)return la(S.first,0,null,-1,-1);var R=Ge(S,b),F=S.first+S.size-1;if(R>F)return la(S.first+S.size-1,Hr(S,F).text.length,null,1,1);g<0&&(g=0);for(var z=Hr(S,R);;){var ee=yf(A,z,R,g,b),ce=Rm(z,ee.ch+(ee.xRel>0||ee.outside>0?1:0));if(!ce)return ee;var ye=ce.find(1);if(ye.line==R)return ye;z=Hr(S,R=ye.line)}}function vf(A,g,b,S){S-=bo(g);var R=g.text.length,F=tn(function(z){return Ya(A,b,z-1).bottom<=S},R,0);return R=tn(function(z){return Ya(A,b,z).top>S},F,R),{begin:F,end:R}}function Gh(A,g,b,S){b||(b=ad(A,g));var R=hl(A,g,Ya(A,b,S),"line").top;return vf(A,g,b,R)}function _f(A,g,b,S){return A.bottom<=b?!1:A.top>b?!0:(S?A.left:A.right)>g}function yf(A,g,b,S,R){R-=qa(g);var F=ad(A,g),z=bo(g),ee=0,ce=g.text.length,ye=!0,Ve=Tr(g,A.doc.direction);if(Ve){var qe=(A.options.lineWrapping?hu:cA)(A,g,b,F,Ve,S,R);ye=qe.level!=1,ee=ye?qe.from:qe.to-1,ce=ye?qe.to:qe.from-1}var ut=null,ot=null,Lt=tn(function(an){var Zr=Ya(A,F,an);return Zr.top+=z,Zr.bottom+=z,_f(Zr,S,R,!1)?(Zr.top<=R&&Zr.left<=S&&(ut=an,ot=Zr),!0):!1},ee,ce),zt,or,Ar=!1;if(ot){var Er=S-ot.left<ot.right-S,dr=Er==ye;Lt=ut+(dr?0:1),or=dr?"after":"before",zt=Er?ot.left:ot.right}else{!ye&&(Lt==ce||Lt==ee)&&Lt++,or=Lt==0?"after":Lt==g.text.length?"before":Ya(A,F,Lt-(ye?1:0)).bottom+z<=R==ye?"after":"before";var Nr=Ri(A,Tt(b,Lt,or),"line",g,F);zt=Nr.left,Ar=R<Nr.top?-1:R>=Nr.bottom?1:0}return Lt=vt(g.text,Lt,1),la(b,Lt,or,Ar,S-zt)}function cA(A,g,b,S,R,F,z){var ee=tn(function(qe){var ut=R[qe],ot=ut.level!=1;return _f(Ri(A,Tt(b,ot?ut.to:ut.from,ot?"before":"after"),"line",g,S),F,z,!0)},0,R.length-1),ce=R[ee];if(ee>0){var ye=ce.level!=1,Ve=Ri(A,Tt(b,ye?ce.from:ce.to,ye?"after":"before"),"line",g,S);_f(Ve,F,z,!0)&&Ve.top>z&&(ce=R[ee-1])}return ce}function hu(A,g,b,S,R,F,z){var ee=vf(A,g,S,z),ce=ee.begin,ye=ee.end;/\s/.test(g.text.charAt(ye-1))&&ye--;for(var Ve=null,qe=null,ut=0;ut<R.length;ut++){var ot=R[ut];if(!(ot.from>=ye||ot.to<=ce)){var Lt=ot.level!=1,zt=Ya(A,S,Lt?Math.min(ye,ot.to)-1:Math.max(ce,ot.from)).right,or=zt<F?F-zt+1e9:zt-F;(!Ve||qe>or)&&(Ve=ot,qe=or)}}return Ve||(Ve=R[R.length-1]),Ve.from<ce&&(Ve={from:ce,to:Ve.to,level:Ve.level}),Ve.to>ye&&(Ve={from:Ve.from,to:ye,level:Ve.level}),Ve}var Wc;function _t(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(Wc==null){Wc=se("pre",null,"CodeMirror-line-like");for(var g=0;g<49;++g)Wc.appendChild(document.createTextNode("x")),Wc.appendChild(se("br"));Wc.appendChild(document.createTextNode("x"))}ge(A.measure,Wc);var b=Wc.offsetHeight/50;return b>3&&(A.cachedTextHeight=b),ae(A.measure),b||1}function gl(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var g=se("span","xxxxxxxxxx"),b=se("pre",[g],"CodeMirror-line-like");ge(A.measure,b);var S=g.getBoundingClientRect(),R=(S.right-S.left)/10;return R>2&&(A.cachedCharWidth=R),R||10}function pu(A){for(var g=A.display,b={},S={},R=g.gutters.clientLeft,F=g.gutters.firstChild,z=0;F;F=F.nextSibling,++z){var ee=A.display.gutterSpecs[z].className;b[ee]=F.offsetLeft+F.clientLeft+R,S[ee]=F.clientWidth}return{fixedPos:Ef(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:b,gutterWidth:S,wrapperWidth:g.wrapper.clientWidth}}function Ef(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function Gc(A){var g=_t(A.display),b=A.options.lineWrapping,S=b&&Math.max(5,A.display.scroller.clientWidth/gl(A.display)-3);return function(R){if(rs(A.doc,R))return 0;var F=0;if(R.widgets)for(var z=0;z<R.widgets.length;z++)R.widgets[z].height&&(F+=R.widgets[z].height);return b?F+(Math.ceil(R.text.length/S)||1)*g:F+g}}function Xa(A){var g=A.doc,b=Gc(A);g.iter(function(S){var R=b(S);R!=S.height&&Ws(S,R)})}function mi(A,g,b,S){var R=A.display;if(!b&&$a(g).getAttribute("cm-not-content")=="true")return null;var F,z,ee=R.lineSpace.getBoundingClientRect();try{F=g.clientX-ee.left,z=g.clientY-ee.top}catch{return null}var ce=_c(A,F,z),ye;if(S&&ce.xRel>0&&(ye=Hr(A.doc,ce.line).text).length==ce.ch){var Ve=Ze(ye,ye.length,A.options.tabSize)-ye.length;ce=Tt(ce.line,Math.max(0,Math.round((F-Hh(A.display).left)/gl(A.display))-Ve))}return ce}function vi(A,g){if(g>=A.display.viewTo||(g-=A.display.viewFrom,g<0))return null;for(var b=A.display.view,S=0;S<b.length;S++)if(g-=b[S].size,g<0)return S}function li(A,g,b,S){g==null&&(g=A.doc.first),b==null&&(b=A.doc.first+A.doc.size),S||(S=0);var R=A.display;if(S&&b<R.viewTo&&(R.updateLineNumbers==null||R.updateLineNumbers>g)&&(R.updateLineNumbers=g),A.curOp.viewChanged=!0,g>=R.viewTo)dl&&dg(A.doc,g)<R.viewTo&&Cs(A);else if(b<=R.viewFrom)dl&&oA(A.doc,b+S)>R.viewFrom?Cs(A):(R.viewFrom+=S,R.viewTo+=S);else if(g<=R.viewFrom&&b>=R.viewTo)Cs(A);else if(g<=R.viewFrom){var F=ml(A,b,b+S,1);F?(R.view=R.view.slice(F.index),R.viewFrom=F.lineN,R.viewTo+=S):Cs(A)}else if(b>=R.viewTo){var z=ml(A,g,g,-1);z?(R.view=R.view.slice(0,z.index),R.viewTo=z.lineN):Cs(A)}else{var ee=ml(A,g,g,-1),ce=ml(A,b,b+S,1);ee&&ce?(R.view=R.view.slice(0,ee.index).concat(j(A,ee.lineN,ce.lineN)).concat(R.view.slice(ce.index)),R.viewTo+=S):Cs(A)}var ye=R.externalMeasured;ye&&(b<ye.lineN?ye.lineN+=S:g<ye.lineN+ye.size&&(R.externalMeasured=null))}function io(A,g,b){A.curOp.viewChanged=!0;var S=A.display,R=A.display.externalMeasured;if(R&&g>=R.lineN&&g<R.lineN+R.size&&(S.externalMeasured=null),!(g<S.viewFrom||g>=S.viewTo)){var F=S.view[vi(A,g)];if(F.node!=null){var z=F.changes||(F.changes=[]);at(z,b)==-1&&z.push(b)}}}function Cs(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function ml(A,g,b,S){var R=vi(A,g),F,z=A.display.view;if(!dl||b==A.doc.first+A.doc.size)return{index:R,lineN:b};for(var ee=A.display.viewFrom,ce=0;ce<R;ce++)ee+=z[ce].size;if(ee!=g){if(S>0){if(R==z.length-1)return null;F=ee+z[R].size-g,R++}else F=ee-g;g+=F,b+=F}for(;dg(A.doc,b)!=b;){if(R==(S<0?0:z.length-1))return null;b+=S*z[R-(S<0?1:0)].size,R+=S}return{index:R,lineN:b}}function $h(A,g,b){var S=A.display,R=S.view;R.length==0||g>=S.viewTo||b<=S.viewFrom?(S.view=j(A,g,b),S.viewFrom=g):(S.viewFrom>g?S.view=j(A,g,S.viewFrom).concat(S.view):S.viewFrom<g&&(S.view=S.view.slice(vi(A,g))),S.viewFrom=g,S.viewTo<b?S.view=S.view.concat(j(A,S.viewTo,b)):S.viewTo>b&&(S.view=S.view.slice(0,vi(A,b)))),S.viewTo=b}function fg(A){for(var g=A.display.view,b=0,S=0;S<g.length;S++){var R=g[S];!R.hidden&&(!R.node||R.changes)&&++b}return b}function gu(A){A.display.input.showSelection(A.display.input.prepareSelection())}function wf(A,g){g===void 0&&(g=!0);var b=A.doc,S={},R=S.cursors=document.createDocumentFragment(),F=S.selection=document.createDocumentFragment(),z=A.options.$customCursor;z&&(g=!0);for(var ee=0;ee<b.sel.ranges.length;ee++)if(!(!g&&ee==b.sel.primIndex)){var ce=b.sel.ranges[ee];if(!(ce.from().line>=A.display.viewTo||ce.to().line<A.display.viewFrom)){var ye=ce.empty();if(z){var Ve=z(A,ce);Ve&&zs(A,Ve,R)}else(ye||A.options.showCursorWhenSelecting)&&zs(A,ce.head,R);ye||Bm(A,ce,F)}}return S}function zs(A,g,b){var S=Ri(A,g,"div",null,null,!A.options.singleCursorHeightPerLine),R=b.appendChild(se("div","","CodeMirror-cursor"));if(R.style.left=S.left+"px",R.style.top=S.top+"px",R.style.height=Math.max(0,S.bottom-S.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var F=pl(A,g,"div",null,null),z=F.right-F.left;R.style.width=(z>0?z:A.defaultCharWidth())+"px"}if(S.other){var ee=b.appendChild(se("div","","CodeMirror-cursor CodeMirror-secondarycursor"));ee.style.display="",ee.style.left=S.other.left+"px",ee.style.top=S.other.top+"px",ee.style.height=(S.other.bottom-S.other.top)*.85+"px"}}function Ja(A,g){return A.top-g.top||A.left-g.left}function Bm(A,g,b){var S=A.display,R=A.doc,F=document.createDocumentFragment(),z=Hh(A.display),ee=z.left,ce=Math.max(S.sizerWidth,Po(A)-S.sizer.offsetLeft)-z.right,ye=R.direction=="ltr";function Ve(dr,Nr,an,Zr){Nr<0&&(Nr=0),Nr=Math.round(Nr),Zr=Math.round(Zr),F.appendChild(se("div",null,"CodeMirror-selected","position: absolute; left: "+dr+`px;
                             top: `+Nr+"px; width: "+(an??ce-dr)+`px;
                             height: `+(Zr-Nr)+"px"))}function qe(dr,Nr,an){var Zr=Hr(R,dr),Mn=Zr.text.length,oo,ha;function Do(Os,qc){return pl(A,Tt(dr,Os),"div",Zr,qc)}function zc(Os,qc,ds){var Ns=Gh(A,Zr,null,Os),xo=qc=="ltr"==(ds=="after")?"left":"right",so=ds=="after"?Ns.begin:Ns.end-(/\s/.test(Zr.text.charAt(Ns.end-1))?2:1);return Do(so,xo)[xo]}var tc=Tr(Zr,R.direction);return Rr(tc,Nr||0,an??Mn,function(Os,qc,ds,Ns){var xo=ds=="ltr",so=Do(Os,xo?"left":"right"),Ec=Do(qc-1,xo?"right":"left"),up=Nr==null&&Os==0,mA=an==null&&qc==Mn,rc=Ns==0,pd=!tc||Ns==tc.length-1;if(Ec.top-so.top<=3){var pa=(ye?up:mA)&&rc,K_=(ye?mA:up)&&pd,xf=pa?ee:(xo?so:Ec).left,Og=K_?ce:(xo?Ec:so).right;Ve(xf,so.top,Og-xf,so.bottom)}else{var Ng,Ua,Xl,tS;xo?(Ng=ye&&up&&rc?ee:so.left,Ua=ye?ce:zc(Os,ds,"before"),Xl=ye?ee:zc(qc,ds,"after"),tS=ye&&mA&&pd?ce:Ec.right):(Ng=ye?zc(Os,ds,"before"):ee,Ua=!ye&&up&&rc?ce:so.right,Xl=!ye&&mA&&pd?ee:Ec.left,tS=ye?zc(qc,ds,"after"):ce),Ve(Ng,so.top,Ua-Ng,so.bottom),so.bottom<Ec.top&&Ve(ee,so.bottom,null,Ec.top),Ve(Xl,Ec.top,tS-Xl,Ec.bottom)}(!oo||Ja(so,oo)<0)&&(oo=so),Ja(Ec,oo)<0&&(oo=Ec),(!ha||Ja(so,ha)<0)&&(ha=so),Ja(Ec,ha)<0&&(ha=Ec)}),{start:oo,end:ha}}var ut=g.from(),ot=g.to();if(ut.line==ot.line)qe(ut.line,ut.ch,ot.ch);else{var Lt=Hr(R,ut.line),zt=Hr(R,ot.line),or=pc(Lt)==pc(zt),Ar=qe(ut.line,ut.ch,or?Lt.text.length+1:null).end,Er=qe(ot.line,or?0:null,ot.ch).start;or&&(Ar.top<Er.top-2?(Ve(Ar.right,Ar.top,null,Ar.bottom),Ve(ee,Er.top,Er.left,Er.bottom)):Ve(Ar.right,Ar.top,Er.left-Ar.right,Ar.bottom)),Ar.bottom<Er.top&&Ve(ee,Ar.bottom,null,Er.top)}b.appendChild(F)}function zh(A){if(A.state.focused){var g=A.display;clearInterval(g.blinker);var b=!0;g.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?g.blinker=setInterval(function(){A.hasFocus()||lA(A),g.cursorDiv.style.visibility=(b=!b)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden")}}function T0(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||qh(A))}function ld(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&lA(A))},100)}function qh(A,g){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(ti(A,"focus",A,g),A.state.focused=!0,Ke(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),w&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),zh(A))}function lA(A,g){A.state.delayingBlurEvent||(A.state.focused&&(ti(A,"blur",A,g),A.state.focused=!1,le(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function ka(A){for(var g=A.display,b=g.lineDiv.offsetTop,S=Math.max(0,g.scroller.getBoundingClientRect().top),R=g.lineDiv.getBoundingClientRect().top,F=0,z=0;z<g.view.length;z++){var ee=g.view[z],ce=A.options.lineWrapping,ye=void 0,Ve=0;if(!ee.hidden){if(R+=ee.line.height,m&&E<8){var qe=ee.node.offsetTop+ee.node.offsetHeight;ye=qe-b,b=qe}else{var ut=ee.node.getBoundingClientRect();ye=ut.bottom-ut.top,!ce&&ee.text.firstChild&&(Ve=ee.text.firstChild.getBoundingClientRect().right-ut.left-1)}var ot=ee.line.height-ye;if((ot>.005||ot<-.005)&&(R<S&&(F-=ot),Ws(ee.line,ye),Lm(ee.line),ee.rest))for(var Lt=0;Lt<ee.rest.length;Lt++)Lm(ee.rest[Lt]);if(Ve>A.display.sizerWidth){var zt=Math.ceil(Ve/gl(A.display));zt>A.display.maxLineLength&&(A.display.maxLineLength=zt,A.display.maxLine=ee.line,A.display.maxLineChanged=!0)}}}Math.abs(F)>2&&(g.scroller.scrollTop+=F)}function Lm(A){if(A.widgets)for(var g=0;g<A.widgets.length;++g){var b=A.widgets[g],S=b.node.parentNode;S&&(b.height=S.offsetHeight)}}function mu(A,g,b){var S=b&&b.top!=null?Math.max(0,b.top):A.scroller.scrollTop;S=Math.floor(S-fu(A));var R=b&&b.bottom!=null?b.bottom:S+A.wrapper.clientHeight,F=Ge(g,S),z=Ge(g,R);if(b&&b.ensure){var ee=b.ensure.from.line,ce=b.ensure.to.line;ee<F?(F=ee,z=Ge(g,qa(Hr(g,ee))+A.wrapper.clientHeight)):Math.min(ce,g.lastLine())>=z&&(F=Ge(g,qa(Hr(g,ce))-A.wrapper.clientHeight),z=ce)}return{from:F,to:Math.max(z,F+1)}}function Pm(A,g){if(!dn(A,"scrollCursorIntoView")){var b=A.display,S=b.sizer.getBoundingClientRect(),R=null,F=b.wrapper.ownerDocument;if(g.top+S.top<0?R=!0:g.bottom+S.top>(F.defaultView.innerHeight||F.documentElement.clientHeight)&&(R=!1),R!=null&&!k){var z=se("div","",null,`position: absolute;
                         top: `+(g.top-b.viewOffset-fu(A.display))+`px;
                         height: `+(g.bottom-g.top+vc(A)+b.barHeight)+`px;
                         left: `+g.left+"px; width: "+Math.max(2,g.right-g.left)+"px;");A.display.lineSpace.appendChild(z),z.scrollIntoView(R),A.display.lineSpace.removeChild(z)}}}function R0(A,g,b,S){S==null&&(S=0);var R;!A.options.lineWrapping&&g==b&&(b=g.sticky=="before"?Tt(g.line,g.ch+1,"before"):g,g=g.ch?Tt(g.line,g.sticky=="before"?g.ch-1:g.ch,"after"):g);for(var F=0;F<5;F++){var z=!1,ee=Ri(A,g),ce=!b||b==g?ee:Ri(A,b);R={left:Math.min(ee.left,ce.left),top:Math.min(ee.top,ce.top)-S,right:Math.max(ee.left,ce.left),bottom:Math.max(ee.bottom,ce.bottom)+S};var ye=km(A,R),Ve=A.doc.scrollTop,qe=A.doc.scrollLeft;if(ye.scrollTop!=null&&(ud(A,ye.scrollTop),Math.abs(A.doc.scrollTop-Ve)>1&&(z=!0)),ye.scrollLeft!=null&&(vl(A,ye.scrollLeft),Math.abs(A.doc.scrollLeft-qe)>1&&(z=!0)),!z)break}return R}function jw(A,g){var b=km(A,g);b.scrollTop!=null&&ud(A,b.scrollTop),b.scrollLeft!=null&&vl(A,b.scrollLeft)}function km(A,g){var b=A.display,S=_t(A.display);g.top<0&&(g.top=0);var R=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:b.scroller.scrollTop,F=bs(A),z={};g.bottom-g.top>F&&(g.bottom=g.top+F);var ee=A.doc.height+sd(b),ce=g.top<S,ye=g.bottom>ee-S;if(g.top<R)z.scrollTop=ce?0:g.top;else if(g.bottom>R+F){var Ve=Math.min(g.top,(ye?ee:g.bottom)-F);Ve!=R&&(z.scrollTop=Ve)}var qe=A.options.fixedGutter?0:b.gutters.offsetWidth,ut=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:b.scroller.scrollLeft-qe,ot=Po(A)-b.gutters.offsetWidth,Lt=g.right-g.left>ot;return Lt&&(g.right=g.left+ot),g.left<10?z.scrollLeft=0:g.left<ut?z.scrollLeft=Math.max(0,g.left+qe-(Lt?0:10)):g.right>ot+ut-3&&(z.scrollLeft=g.right+(Lt?0:10)-ot),z}function Dm(A,g){g!=null&&(xm(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+g)}function Yh(A){xm(A);var g=A.getCursor();A.curOp.scrollToPos={from:g,to:g,margin:A.options.cursorScrollMargin}}function hg(A,g,b){(g!=null||b!=null)&&xm(A),g!=null&&(A.curOp.scrollLeft=g),b!=null&&(A.curOp.scrollTop=b)}function I0(A,g){xm(A),A.curOp.scrollToPos=g}function xm(A){var g=A.curOp.scrollToPos;if(g){A.curOp.scrollToPos=null;var b=mf(A,g.from),S=mf(A,g.to);O0(A,b,S,g.margin)}}function O0(A,g,b,S){var R=km(A,{left:Math.min(g.left,b.left),top:Math.min(g.top,b.top)-S,right:Math.max(g.right,b.right),bottom:Math.max(g.bottom,b.bottom)+S});hg(A,R.scrollLeft,R.scrollTop)}function ud(A,g){Math.abs(A.doc.scrollTop-g)<2||(c||Fm(A,{top:g}),Um(A,g,!0),c&&Fm(A),pg(A,100))}function Um(A,g,b){g=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,g)),!(A.display.scroller.scrollTop==g&&!b)&&(A.doc.scrollTop=g,A.display.scrollbars.setScrollTop(g),A.display.scroller.scrollTop!=g&&(A.display.scroller.scrollTop=g))}function vl(A,g,b,S){g=Math.max(0,Math.min(g,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((b?g==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-g)<2)&&!S)&&(A.doc.scrollLeft=g,Zh(A),A.display.scroller.scrollLeft!=g&&(A.display.scroller.scrollLeft=g),A.display.scrollbars.setScrollLeft(g))}function Ad(A){var g=A.display,b=g.gutters.offsetWidth,S=Math.round(A.doc.height+sd(A.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:A.options.fixedGutter?b:0,docHeight:S,scrollHeight:S+vc(A)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:b}}var Sf=function(A,g,b){this.cm=b;var S=this.vert=se("div",[se("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),R=this.horiz=se("div",[se("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");S.tabIndex=R.tabIndex=-1,A(S),A(R),Sr(S,"scroll",function(){S.clientHeight&&g(S.scrollTop,"vertical")}),Sr(R,"scroll",function(){R.clientWidth&&g(R.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&E<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Sf.prototype.update=function(A){var g=A.scrollWidth>A.clientWidth+1,b=A.scrollHeight>A.clientHeight+1,S=A.nativeBarWidth;if(b){this.vert.style.display="block",this.vert.style.bottom=g?S+"px":"0";var R=A.viewHeight-(g?S:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+R)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(g){this.horiz.style.display="block",this.horiz.style.right=b?S+"px":"0",this.horiz.style.left=A.barLeft+"px";var F=A.viewWidth-A.barLeft-(b?S:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+F)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(S==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:b?S:0,bottom:g?S:0}},Sf.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Sf.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Sf.prototype.zeroWidthHack=function(){var A=J&&!Q?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new pt,this.disableVert=new pt},Sf.prototype.enableZeroWidthBar=function(A,g,b){A.style.visibility="";function S(){var R=A.getBoundingClientRect(),F=b=="vert"?document.elementFromPoint(R.right-1,(R.top+R.bottom)/2):document.elementFromPoint((R.right+R.left)/2,R.bottom-1);F!=A?A.style.visibility="hidden":g.set(1e3,S)}g.set(1e3,S)},Sf.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var Xh=function(){};Xh.prototype.update=function(){return{bottom:0,right:0}},Xh.prototype.setScrollLeft=function(){},Xh.prototype.setScrollTop=function(){},Xh.prototype.clear=function(){};function Jh(A,g){g||(g=Ad(A));var b=A.display.barWidth,S=A.display.barHeight;E_(A,g);for(var R=0;R<4&&b!=A.display.barWidth||S!=A.display.barHeight;R++)b!=A.display.barWidth&&A.options.lineWrapping&&ka(A),E_(A,Ad(A)),b=A.display.barWidth,S=A.display.barHeight}function E_(A,g){var b=A.display,S=b.scrollbars.update(g);b.sizer.style.paddingRight=(b.barWidth=S.right)+"px",b.sizer.style.paddingBottom=(b.barHeight=S.bottom)+"px",b.heightForcer.style.borderBottom=S.bottom+"px solid transparent",S.right&&S.bottom?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=S.bottom+"px",b.scrollbarFiller.style.width=S.right+"px"):b.scrollbarFiller.style.display="",S.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=S.bottom+"px",b.gutterFiller.style.width=g.gutterWidth+"px"):b.gutterFiller.style.display=""}var w_={native:Sf,null:Xh};function N0(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&le(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new w_[A.options.scrollbarStyle](function(g){A.display.wrapper.insertBefore(g,A.display.scrollbarFiller),Sr(g,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),g.setAttribute("cm-not-content","true")},function(g,b){b=="horizontal"?vl(A,g):ud(A,g)},A),A.display.scrollbars.addClass&&Ke(A.display.wrapper,A.display.scrollbars.addClass)}var vu=0;function ua(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++vu,markArrays:null},$e(A.curOp)}function Aa(A){var g=A.curOp;g&&gt(g,function(b){for(var S=0;S<b.ops.length;S++)b.ops[S].cm.curOp=null;Kw(b)})}function Kw(A){for(var g=A.ops,b=0;b<g.length;b++)S_(g[b]);for(var S=0;S<g.length;S++)dd(g[S]);for(var R=0;R<g.length;R++)_l(g[R]);for(var F=0;F<g.length;F++)Ww(g[F]);for(var z=0;z<g.length;z++)Gw(g[z])}function S_(A){var g=A.cm,b=g.display;Cf(g),A.updateMaxLine&&id(g),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<b.viewFrom||A.scrollToPos.to.line>=b.viewTo)||b.maxLineChanged&&g.options.lineWrapping,A.update=A.mustUpdate&&new _u(g,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function dd(A){A.updatedDisplay=A.mustUpdate&&L0(A.cm,A.update)}function _l(A){var g=A.cm,b=g.display;A.updatedDisplay&&ka(g),A.barMeasure=Ad(g),b.maxLineChanged&&!g.options.lineWrapping&&(A.adjustWidthTo=ff(g,b.maxLine,b.maxLine.text.length).left+3,g.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+A.adjustWidthTo+vc(g)+g.display.barWidth),A.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+A.adjustWidthTo-Po(g))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=b.input.prepareSelection())}function Ww(A){var g=A.cm;A.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<g.doc.scrollLeft&&vl(g,Math.min(g.display.scroller.scrollLeft,A.maxScrollLeft),!0),g.display.maxLineChanged=!1);var b=A.focus&&A.focus==ke(Ue(g));A.preparedSelection&&g.display.input.showSelection(A.preparedSelection,b),(A.updatedDisplay||A.startHeight!=g.doc.height)&&Jh(g,A.barMeasure),A.updatedDisplay&&D0(g,A.barMeasure),A.selectionChanged&&zh(g),g.state.focused&&A.updateInput&&g.display.input.reset(A.typing),b&&T0(A.cm)}function Gw(A){var g=A.cm,b=g.display,S=g.doc;if(A.updatedDisplay&&Mm(g,A.update),b.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(b.wheelStartX=b.wheelStartY=null),A.scrollTop!=null&&Um(g,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&vl(g,A.scrollLeft,!0,!0),A.scrollToPos){var R=R0(g,qr(S,A.scrollToPos.from),qr(S,A.scrollToPos.to),A.scrollToPos.margin);Pm(g,R)}var F=A.maybeHiddenMarkers,z=A.maybeUnhiddenMarkers;if(F)for(var ee=0;ee<F.length;++ee)F[ee].lines.length||ti(F[ee],"hide");if(z)for(var ce=0;ce<z.length;++ce)z[ce].lines.length&&ti(z[ce],"unhide");b.wrapper.offsetHeight&&(S.scrollTop=g.display.scroller.scrollTop),A.changeObjs&&ti(g,"changes",g,A.changeObjs),A.update&&A.update.finish()}function Za(A,g){if(A.curOp)return g();ua(A);try{return g()}finally{Aa(A)}}function us(A,g){return function(){if(A.curOp)return g.apply(A,arguments);ua(A);try{return g.apply(A,arguments)}finally{Aa(A)}}}function da(A){return function(){if(this.curOp)return A.apply(this,arguments);ua(this);try{return A.apply(this,arguments)}finally{Aa(this)}}}function As(A){return function(){var g=this.cm;if(!g||g.curOp)return A.apply(this,arguments);ua(g);try{return A.apply(this,arguments)}finally{Aa(g)}}}function pg(A,g){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(g,We(bf,A))}function bf(A){var g=A.doc;if(!(g.highlightFrontier>=A.display.viewTo)){var b=+new Date+A.options.workTime,S=eA(A,g.highlightFrontier),R=[];g.iter(S.line,Math.min(g.first+g.size,A.display.viewTo+500),function(F){if(S.line>=A.display.viewFrom){var z=F.styles,ee=F.text.length>A.options.maxHighlightLength?Al(g.mode,S.state):null,ce=Em(A,F,S,!0);ee&&(S.state=ee),F.styles=ce.styles;var ye=F.styleClasses,Ve=ce.classes;Ve?F.styleClasses=Ve:ye&&(F.styleClasses=null);for(var qe=!z||z.length!=F.styles.length||ye!=Ve&&(!ye||!Ve||ye.bgClass!=Ve.bgClass||ye.textClass!=Ve.textClass),ut=0;!qe&&ut<z.length;++ut)qe=z[ut]!=F.styles[ut];qe&&R.push(S.line),F.stateAfter=S.save(),S.nextLine()}else F.text.length<=A.options.maxHighlightLength&&ZA(A,F.text,S),F.stateAfter=S.line%5==0?S.save():null,S.nextLine();if(+new Date>b)return pg(A,A.options.workDelay),!0}),g.highlightFrontier=S.line,g.modeFrontier=Math.max(g.modeFrontier,S.line),R.length&&Za(A,function(){for(var F=0;F<R.length;F++)io(A,R[F],"text")})}}var _u=function(A,g,b){var S=A.display;this.viewport=g,this.visible=mu(S,A.doc,g),this.editorIsHidden=!S.wrapper.offsetWidth,this.wrapperHeight=S.wrapper.clientHeight,this.wrapperWidth=S.wrapper.clientWidth,this.oldDisplayWidth=Po(A),this.force=b,this.dims=pu(A),this.events=[]};_u.prototype.signal=function(A,g){yn(A,g)&&this.events.push(arguments)},_u.prototype.finish=function(){for(var A=0;A<this.events.length;A++)ti.apply(null,this.events[A])};function Cf(A){var g=A.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=vc(A)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=vc(A)+"px",g.scrollbarsClipped=!0)}function B0(A){if(A.hasFocus())return null;var g=ke(Ue(A));if(!g||!Be(A.display.lineDiv,g))return null;var b={activeElt:g};if(window.getSelection){var S=Qe(A).getSelection();S.anchorNode&&S.extend&&Be(A.display.lineDiv,S.anchorNode)&&(b.anchorNode=S.anchorNode,b.anchorOffset=S.anchorOffset,b.focusNode=S.focusNode,b.focusOffset=S.focusOffset)}return b}function b_(A){if(!(!A||!A.activeElt||A.activeElt==ke(Fe(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&Be(document.body,A.anchorNode)&&Be(document.body,A.focusNode))){var g=A.activeElt.ownerDocument,b=g.defaultView.getSelection(),S=g.createRange();S.setEnd(A.anchorNode,A.anchorOffset),S.collapse(!1),b.removeAllRanges(),b.addRange(S),b.extend(A.focusNode,A.focusOffset)}}function L0(A,g){var b=A.display,S=A.doc;if(g.editorIsHidden)return Cs(A),!1;if(!g.force&&g.visible.from>=b.viewFrom&&g.visible.to<=b.viewTo&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo)&&b.renderedView==b.view&&fg(A)==0)return!1;C_(A)&&(Cs(A),g.dims=pu(A));var R=S.first+S.size,F=Math.max(g.visible.from-A.options.viewportMargin,S.first),z=Math.min(R,g.visible.to+A.options.viewportMargin);b.viewFrom<F&&F-b.viewFrom<20&&(F=Math.max(S.first,b.viewFrom)),b.viewTo>z&&b.viewTo-z<20&&(z=Math.min(R,b.viewTo)),dl&&(F=dg(A.doc,F),z=oA(A.doc,z));var ee=F!=b.viewFrom||z!=b.viewTo||b.lastWrapHeight!=g.wrapperHeight||b.lastWrapWidth!=g.wrapperWidth;$h(A,F,z),b.viewOffset=qa(Hr(A.doc,b.viewFrom)),A.display.mover.style.top=b.viewOffset+"px";var ce=fg(A);if(!ee&&ce==0&&!g.force&&b.renderedView==b.view&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo))return!1;var ye=B0(A);return ce>4&&(b.lineDiv.style.display="none"),P0(A,b.updateLineNumbers,g.dims),ce>4&&(b.lineDiv.style.display=""),b.renderedView=b.view,b_(ye),ae(b.cursorDiv),ae(b.selectionDiv),b.gutters.style.height=b.sizer.style.minHeight=0,ee&&(b.lastWrapHeight=g.wrapperHeight,b.lastWrapWidth=g.wrapperWidth,pg(A,400)),b.updateLineNumbers=null,!0}function Mm(A,g){for(var b=g.viewport,S=!0;;S=!1){if(!S||!A.options.lineWrapping||g.oldDisplayWidth==Po(A)){if(b&&b.top!=null&&(b={top:Math.min(A.doc.height+sd(A.display)-bs(A),b.top)}),g.visible=mu(A.display,A.doc,b),g.visible.from>=A.display.viewFrom&&g.visible.to<=A.display.viewTo)break}else S&&(g.visible=mu(A.display,A.doc,b));if(!L0(A,g))break;ka(A);var R=Ad(A);gu(A),Jh(A,R),D0(A,R),g.force=!1}g.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(g.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function Fm(A,g){var b=new _u(A,g);if(L0(A,b)){ka(A),Mm(A,b);var S=Ad(A);gu(A),Jh(A,S),D0(A,S),b.finish()}}function P0(A,g,b){var S=A.display,R=A.options.lineNumbers,F=S.lineDiv,z=F.firstChild;function ee(Lt){var zt=Lt.nextSibling;return w&&J&&A.display.currentWheelTarget==Lt?Lt.style.display="none":Lt.parentNode.removeChild(Lt),zt}for(var ce=S.view,ye=S.viewFrom,Ve=0;Ve<ce.length;Ve++){var qe=ce[Ve];if(!qe.hidden)if(!qe.node||qe.node.parentNode!=F){var ut=$s(A,qe,ye,b);F.insertBefore(ut,z)}else{for(;z!=qe.node;)z=ee(z);var ot=R&&g!=null&&g<=ye&&qe.lineNumber;qe.changes&&(at(qe.changes,"gutter")>-1&&(ot=!1),Jr(A,qe,ye,b)),ot&&(ae(qe.lineNumber),qe.lineNumber.appendChild(document.createTextNode(Wt(A.options,ye)))),z=qe.node.nextSibling}ye+=qe.size}for(;z;)z=ee(z)}function k0(A){var g=A.gutters.offsetWidth;A.sizer.style.marginLeft=g+"px",Gt(A,"gutterChanged",A)}function D0(A,g){A.display.sizer.style.minHeight=g.docHeight+"px",A.display.heightForcer.style.top=g.docHeight+"px",A.display.gutters.style.height=g.docHeight+A.display.barHeight+vc(A)+"px"}function Zh(A){var g=A.display,b=g.view;if(!(!g.alignWidgets&&(!g.gutters.firstChild||!A.options.fixedGutter))){for(var S=Ef(g)-g.scroller.scrollLeft+A.doc.scrollLeft,R=g.gutters.offsetWidth,F=S+"px",z=0;z<b.length;z++)if(!b[z].hidden){A.options.fixedGutter&&(b[z].gutter&&(b[z].gutter.style.left=F),b[z].gutterBackground&&(b[z].gutterBackground.style.left=F));var ee=b[z].alignable;if(ee)for(var ce=0;ce<ee.length;ce++)ee[ce].style.left=F}A.options.fixedGutter&&(g.gutters.style.left=S+R+"px")}}function C_(A){if(!A.options.lineNumbers)return!1;var g=A.doc,b=Wt(A.options,g.first+g.size-1),S=A.display;if(b.length!=S.lineNumChars){var R=S.measure.appendChild(se("div",[se("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),F=R.firstChild.offsetWidth,z=R.offsetWidth-F;return S.lineGutter.style.width="",S.lineNumInnerWidth=Math.max(F,S.lineGutter.offsetWidth-z)+1,S.lineNumWidth=S.lineNumInnerWidth+z,S.lineNumChars=S.lineNumInnerWidth?b.length:-1,S.lineGutter.style.width=S.lineNumWidth+"px",k0(A.display),!0}return!1}function Vm(A,g){for(var b=[],S=!1,R=0;R<A.length;R++){var F=A[R],z=null;if(typeof F!="string"&&(z=F.style,F=F.className),F=="CodeMirror-linenumbers")if(g)S=!0;else continue;b.push({className:F,style:z})}return g&&!S&&b.push({className:"CodeMirror-linenumbers",style:null}),b}function gg(A){var g=A.gutters,b=A.gutterSpecs;ae(g),A.lineGutter=null;for(var S=0;S<b.length;++S){var R=b[S],F=R.className,z=R.style,ee=g.appendChild(se("div",null,"CodeMirror-gutter "+F));z&&(ee.style.cssText=z),F=="CodeMirror-linenumbers"&&(A.lineGutter=ee,ee.style.width=(A.lineNumWidth||1)+"px")}g.style.display=b.length?"":"none",k0(A)}function mg(A){gg(A.display),li(A),Zh(A)}function $w(A,g,b,S){var R=this;this.input=b,R.scrollbarFiller=se("div",null,"CodeMirror-scrollbar-filler"),R.scrollbarFiller.setAttribute("cm-not-content","true"),R.gutterFiller=se("div",null,"CodeMirror-gutter-filler"),R.gutterFiller.setAttribute("cm-not-content","true"),R.lineDiv=xe("div",null,"CodeMirror-code"),R.selectionDiv=se("div",null,null,"position: relative; z-index: 1"),R.cursorDiv=se("div",null,"CodeMirror-cursors"),R.measure=se("div",null,"CodeMirror-measure"),R.lineMeasure=se("div",null,"CodeMirror-measure"),R.lineSpace=xe("div",[R.measure,R.lineMeasure,R.selectionDiv,R.cursorDiv,R.lineDiv],null,"position: relative; outline: none");var F=xe("div",[R.lineSpace],"CodeMirror-lines");R.mover=se("div",[F],null,"position: relative"),R.sizer=se("div",[R.mover],"CodeMirror-sizer"),R.sizerWidth=null,R.heightForcer=se("div",null,null,"position: absolute; height: "+Rt+"px; width: 1px;"),R.gutters=se("div",null,"CodeMirror-gutters"),R.lineGutter=null,R.scroller=se("div",[R.sizer,R.heightForcer,R.gutters],"CodeMirror-scroll"),R.scroller.setAttribute("tabIndex","-1"),R.wrapper=se("div",[R.scrollbarFiller,R.gutterFiller,R.scroller],"CodeMirror"),N&&O>=105&&(R.wrapper.style.clipPath="inset(0px)"),R.wrapper.setAttribute("translate","no"),m&&E<8&&(R.gutters.style.zIndex=-1,R.scroller.style.paddingRight=0),!w&&!(c&&K)&&(R.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(R.wrapper):A(R.wrapper)),R.viewFrom=R.viewTo=g.first,R.reportedViewFrom=R.reportedViewTo=g.first,R.view=[],R.renderedView=null,R.externalMeasured=null,R.viewOffset=0,R.lastWrapHeight=R.lastWrapWidth=0,R.updateLineNumbers=null,R.nativeBarWidth=R.barHeight=R.barWidth=0,R.scrollbarsClipped=!1,R.lineNumWidth=R.lineNumInnerWidth=R.lineNumChars=null,R.alignWidgets=!1,R.cachedCharWidth=R.cachedTextHeight=R.cachedPaddingH=null,R.maxLine=null,R.maxLineLength=0,R.maxLineChanged=!1,R.wheelDX=R.wheelDY=R.wheelStartX=R.wheelStartY=null,R.shift=!1,R.selForContextMenu=null,R.activeTouch=null,R.gutterSpecs=Vm(S.gutters,S.lineNumbers),gg(R),b.init(R)}var vg=0,I=null;m?I=-.53:c?I=15:N?I=-.7:M&&(I=-1/3);function U(A){var g=A.wheelDeltaX,b=A.wheelDeltaY;return g==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(g=A.detail),b==null&&A.detail&&A.axis==A.VERTICAL_AXIS?b=A.detail:b==null&&(b=A.wheelDelta),{x:g,y:b}}function $(A){var g=U(A);return g.x*=I,g.y*=I,g}function ne(A,g){N&&O==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var b=U(g),S=b.x,R=b.y,F=I;g.deltaMode===0&&(S=g.deltaX,R=g.deltaY,F=1);var z=A.display,ee=z.scroller,ce=ee.scrollWidth>ee.clientWidth,ye=ee.scrollHeight>ee.clientHeight;if(S&&ce||R&&ye){if(R&&J&&w){e:for(var Ve=g.target,qe=z.view;Ve!=ee;Ve=Ve.parentNode)for(var ut=0;ut<qe.length;ut++)if(qe[ut].node==Ve){A.display.currentWheelTarget=Ve;break e}}if(S&&!c&&!P&&F!=null){R&&ye&&ud(A,Math.max(0,ee.scrollTop+R*F)),vl(A,Math.max(0,ee.scrollLeft+S*F)),(!R||R&&ye)&&br(g),z.wheelStartX=null;return}if(R&&F!=null){var ot=R*F,Lt=A.doc.scrollTop,zt=Lt+z.wrapper.clientHeight;ot<0?Lt=Math.max(0,Lt+ot-50):zt=Math.min(A.doc.height,zt+ot+50),Fm(A,{top:Lt,bottom:zt})}vg<20&&g.deltaMode!==0&&(z.wheelStartX==null?(z.wheelStartX=ee.scrollLeft,z.wheelStartY=ee.scrollTop,z.wheelDX=S,z.wheelDY=R,setTimeout(function(){if(z.wheelStartX!=null){var or=ee.scrollLeft-z.wheelStartX,Ar=ee.scrollTop-z.wheelStartY,Er=Ar&&z.wheelDY&&Ar/z.wheelDY||or&&z.wheelDX&&or/z.wheelDX;z.wheelStartX=z.wheelStartY=null,Er&&(I=(I*vg+Er)/(vg+1),++vg)}},200)):(z.wheelDX+=S,z.wheelDY+=R))}}var Ee=function(A,g){this.ranges=A,this.primIndex=g};Ee.prototype.primary=function(){return this.ranges[this.primIndex]},Ee.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var g=0;g<this.ranges.length;g++){var b=this.ranges[g],S=A.ranges[g];if(!ri(b.anchor,S.anchor)||!ri(b.head,S.head))return!1}return!0},Ee.prototype.deepCopy=function(){for(var A=[],g=0;g<this.ranges.length;g++)A[g]=new be(Lo(this.ranges[g].anchor),Lo(this.ranges[g].head));return new Ee(A,this.primIndex)},Ee.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},Ee.prototype.contains=function(A,g){g||(g=A);for(var b=0;b<this.ranges.length;b++){var S=this.ranges[b];if(lr(g,S.from())>=0&&lr(A,S.to())<=0)return b}return-1};var be=function(A,g){this.anchor=A,this.head=g};be.prototype.from=function(){return Na(this.anchor,this.head)},be.prototype.to=function(){return Bn(this.anchor,this.head)},be.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Re(A,g,b){var S=A&&A.options.selectionsMayTouch,R=g[b];g.sort(function(ut,ot){return lr(ut.from(),ot.from())}),b=at(g,R);for(var F=1;F<g.length;F++){var z=g[F],ee=g[F-1],ce=lr(ee.to(),z.from());if(S&&!z.empty()?ce>0:ce>=0){var ye=Na(ee.from(),z.from()),Ve=Bn(ee.to(),z.to()),qe=ee.empty()?z.from()==z.head:ee.from()==ee.head;F<=b&&--b,g.splice(--F,2,new be(qe?Ve:ye,qe?ye:Ve))}}return new Ee(g,b)}function Ie(A,g){return new Ee([new be(A,g||A)],0)}function Pe(A){return A.text?Tt(A.from.line+A.text.length-1,It(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function je(A,g){if(lr(A,g.from)<0)return A;if(lr(A,g.to)<=0)return Pe(g);var b=A.line+g.text.length-(g.to.line-g.from.line)-1,S=A.ch;return A.line==g.to.line&&(S+=Pe(g).ch-g.to.ch),Tt(b,S)}function nt(A,g){for(var b=[],S=0;S<A.sel.ranges.length;S++){var R=A.sel.ranges[S];b.push(new be(je(R.anchor,g),je(R.head,g)))}return Re(A.cm,b,A.sel.primIndex)}function yt(A,g,b){return A.line==g.line?Tt(b.line,A.ch-g.ch+b.ch):Tt(b.line+(A.line-g.line),A.ch)}function Et(A,g,b){for(var S=[],R=Tt(A.first,0),F=R,z=0;z<g.length;z++){var ee=g[z],ce=yt(ee.from,R,F),ye=yt(Pe(ee),R,F);if(R=ee.to,F=ye,b=="around"){var Ve=A.sel.ranges[z],qe=lr(Ve.head,Ve.anchor)<0;S[z]=new be(qe?ye:ce,qe?ce:ye)}else S[z]=new be(ce,ce)}return new Ee(S,A.sel.primIndex)}function dt(A){A.doc.mode=Kl(A.options,A.doc.modeOption),Ht(A)}function Ht(A){A.doc.iter(function(g){g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,pg(A,100),A.state.modeGen++,A.curOp&&li(A)}function Pt(A,g){return g.from.ch==0&&g.to.ch==0&&It(g.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function it(A,g,b,S){function R(Er){return b?b[Er]:null}function F(Er,dr,Nr){lf(Er,dr,Nr,S),Gt(Er,"change",Er,g)}function z(Er,dr){for(var Nr=[],an=Er;an<dr;++an)Nr.push(new uu(ye[an],R(an),S));return Nr}var ee=g.from,ce=g.to,ye=g.text,Ve=Hr(A,ee.line),qe=Hr(A,ce.line),ut=It(ye),ot=R(ye.length-1),Lt=ce.line-ee.line;if(g.full)A.insert(0,z(0,ye.length)),A.remove(ye.length,A.size-ye.length);else if(Pt(A,g)){var zt=z(0,ye.length-1);F(qe,qe.text,ot),Lt&&A.remove(ee.line,Lt),zt.length&&A.insert(ee.line,zt)}else if(Ve==qe)if(ye.length==1)F(Ve,Ve.text.slice(0,ee.ch)+ut+Ve.text.slice(ce.ch),ot);else{var or=z(1,ye.length-1);or.push(new uu(ut+Ve.text.slice(ce.ch),ot,S)),F(Ve,Ve.text.slice(0,ee.ch)+ye[0],R(0)),A.insert(ee.line+1,or)}else if(ye.length==1)F(Ve,Ve.text.slice(0,ee.ch)+ye[0]+qe.text.slice(ce.ch),R(0)),A.remove(ee.line+1,Lt);else{F(Ve,Ve.text.slice(0,ee.ch)+ye[0],R(0)),F(qe,ut+qe.text.slice(ce.ch),ot);var Ar=z(1,ye.length-1);Lt>1&&A.remove(ee.line+1,Lt-1),A.insert(ee.line+1,Ar)}Gt(A,"change",A,g)}function st(A,g,b){function S(R,F,z){if(R.linked)for(var ee=0;ee<R.linked.length;++ee){var ce=R.linked[ee];if(ce.doc!=F){var ye=z&&ce.sharedHist;b&&!ye||(g(ce.doc,ye),S(ce.doc,R,ye))}}}S(A,null,!0)}function $t(A,g){if(g.cm)throw new Error("This document is already in use.");A.doc=g,g.cm=A,Xa(A),dt(A),ir(A),A.options.direction=g.direction,A.options.lineWrapping||id(A),A.options.mode=g.modeOption,li(A)}function ir(A){(A.doc.direction=="rtl"?Ke:le)(A.display.lineDiv,"CodeMirror-rtl")}function Jt(A){Za(A,function(){ir(A),li(A)})}function Ir(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function pr(A,g){var b={from:Lo(g.from),to:Pe(g),text:Vc(A,g.from,g.to)};return Si(A,b,g.from.line,g.to.line+1),st(A,function(S){return Si(S,b,g.from.line,g.to.line+1)},!0),b}function sn(A){for(;A.length;){var g=It(A);if(g.ranges)A.pop();else break}}function wr(A,g){if(g)return sn(A.done),It(A.done);if(A.done.length&&!It(A.done).ranges)return It(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),It(A.done)}function di(A,g,b,S){var R=A.history;R.undone.length=0;var F=+new Date,z,ee;if((R.lastOp==S||R.lastOrigin==g.origin&&g.origin&&(g.origin.charAt(0)=="+"&&R.lastModTime>F-(A.cm?A.cm.options.historyEventDelay:500)||g.origin.charAt(0)=="*"))&&(z=wr(R,R.lastOp==S)))ee=It(z.changes),lr(g.from,g.to)==0&&lr(g.from,ee.to)==0?ee.to=Pe(g):z.changes.push(pr(A,g));else{var ce=It(R.done);for((!ce||!ce.ranges)&&Pn(A.sel,R.done),z={changes:[pr(A,g)],generation:R.generation},R.done.push(z);R.done.length>R.undoDepth;)R.done.shift(),R.done[0].ranges||R.done.shift()}R.done.push(b),R.generation=++R.maxGeneration,R.lastModTime=R.lastSelTime=F,R.lastOp=R.lastSelOp=S,R.lastOrigin=R.lastSelOrigin=g.origin,ee||ti(A,"historyAdded")}function xi(A,g,b,S){var R=g.charAt(0);return R=="*"||R=="+"&&b.ranges.length==S.ranges.length&&b.somethingSelected()==S.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function fi(A,g,b,S){var R=A.history,F=S&&S.origin;b==R.lastSelOp||F&&R.lastSelOrigin==F&&(R.lastModTime==R.lastSelTime&&R.lastOrigin==F||xi(A,F,It(R.done),g))?R.done[R.done.length-1]=g:Pn(g,R.done),R.lastSelTime=+new Date,R.lastSelOrigin=F,R.lastSelOp=b,S&&S.clearRedo!==!1&&sn(R.undone)}function Pn(A,g){var b=It(g);b&&b.ranges&&b.equals(A)||g.push(A)}function Si(A,g,b,S){var R=g["spans_"+A.id],F=0;A.iter(Math.max(A.first,b),Math.min(A.first+A.size,S),function(z){z.markedSpans&&((R||(R=g["spans_"+A.id]={}))[F]=z.markedSpans),++F})}function zi(A){if(!A)return null;for(var g,b=0;b<A.length;++b)A[b].marker.explicitlyCleared?g||(g=A.slice(0,b)):g&&g.push(A[b]);return g?g.length?g:null:A}function kn(A,g){var b=g["spans_"+A.id];if(!b)return null;for(var S=[],R=0;R<g.text.length;++R)S.push(zi(b[R]));return S}function $o(A,g){var b=kn(A,g),S=ug(A,g);if(!b)return S;if(!S)return b;for(var R=0;R<b.length;++R){var F=b[R],z=S[R];if(F&&z)e:for(var ee=0;ee<z.length;++ee){for(var ce=z[ee],ye=0;ye<F.length;++ye)if(F[ye].marker==ce.marker)continue e;F.push(ce)}else z&&(b[R]=z)}return b}function Ts(A,g,b){for(var S=[],R=0;R<A.length;++R){var F=A[R];if(F.ranges){S.push(b?Ee.prototype.deepCopy.call(F):F);continue}var z=F.changes,ee=[];S.push({changes:ee});for(var ce=0;ce<z.length;++ce){var ye=z[ce],Ve=void 0;if(ee.push({from:ye.from,to:ye.to,text:ye.text}),g)for(var qe in ye)(Ve=qe.match(/^spans_(\d+)$/))&&at(g,Number(Ve[1]))>-1&&(It(ee)[qe]=ye[qe],delete ye[qe])}}return S}function zo(A,g,b,S){if(S){var R=A.anchor;if(b){var F=lr(g,R)<0;F!=lr(b,R)<0?(R=g,g=b):F!=lr(g,b)<0&&(g=b)}return new be(R,g)}else return new be(b||g,g)}function qs(A,g,b,S,R){R==null&&(R=A.cm&&(A.cm.display.shift||A.extend)),Ii(A,new Ee([zo(A.sel.primary(),g,b,R)],0),S)}function Ui(A,g,b){for(var S=[],R=A.cm&&(A.cm.display.shift||A.extend),F=0;F<A.sel.ranges.length;F++)S[F]=zo(A.sel.ranges[F],g[F],null,R);var z=Re(A.cm,S,A.sel.primIndex);Ii(A,z,b)}function ec(A,g,b,S){var R=A.sel.ranges.slice(0);R[g]=b,Ii(A,Re(A.cm,R,A.sel.primIndex),S)}function yc(A,g,b,S){Ii(A,Ie(g,b),S)}function Ys(A,g,b){var S={ranges:g.ranges,update:function(R){this.ranges=[];for(var F=0;F<R.length;F++)this.ranges[F]=new be(qr(A,R[F].anchor),qr(A,R[F].head))},origin:b&&b.origin};return ti(A,"beforeSelectionChange",A,S),A.cm&&ti(A.cm,"beforeSelectionChange",A.cm,S),S.ranges!=g.ranges?Re(A.cm,S.ranges,S.ranges.length-1):g}function Xs(A,g,b){var S=A.history.done,R=It(S);R&&R.ranges?(S[S.length-1]=g,Da(A,g,b)):Ii(A,g,b)}function Ii(A,g,b){Da(A,g,b),fi(A,A.sel,A.cm?A.cm.curOp.id:NaN,b)}function Da(A,g,b){(yn(A,"beforeSelectionChange")||A.cm&&yn(A.cm,"beforeSelectionChange"))&&(g=Ys(A,g,b));var S=b&&b.bias||(lr(g.primary().head,A.sel.primary().head)<0?-1:1);xa(A,yu(A,g,S,!0)),!(b&&b.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&Yh(A.cm)}function xa(A,g){g.equals(A.sel)||(A.sel=g,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,Qr(A.cm)),Gt(A,"cursorActivity",A))}function Rs(A){xa(A,yu(A,A.sel,null,!1))}function yu(A,g,b,S){for(var R,F=0;F<g.ranges.length;F++){var z=g.ranges[F],ee=g.ranges.length==A.sel.ranges.length&&A.sel.ranges[F],ce=Eu(A,z.anchor,ee&&ee.anchor,b,S),ye=z.head==z.anchor?ce:Eu(A,z.head,ee&&ee.head,b,S);(R||ce!=z.anchor||ye!=z.head)&&(R||(R=g.ranges.slice(0,F)),R[F]=new be(ce,ye))}return R?Re(A.cm,R,g.primIndex):g}function yl(A,g,b,S,R){var F=Hr(A,g.line);if(F.markedSpans)for(var z=0;z<F.markedSpans.length;++z){var ee=F.markedSpans[z],ce=ee.marker,ye="selectLeft"in ce?!ce.selectLeft:ce.inclusiveLeft,Ve="selectRight"in ce?!ce.selectRight:ce.inclusiveRight;if((ee.from==null||(ye?ee.from<=g.ch:ee.from<g.ch))&&(ee.to==null||(Ve?ee.to>=g.ch:ee.to>g.ch))){if(R&&(ti(ce,"beforeCursorEnter"),ce.explicitlyCleared))if(F.markedSpans){--z;continue}else break;if(!ce.atomic)continue;if(b){var qe=ce.find(S<0?1:-1),ut=void 0;if((S<0?Ve:ye)&&(qe=uA(A,qe,-S,qe&&qe.line==g.line?F:null)),qe&&qe.line==g.line&&(ut=lr(qe,b))&&(S<0?ut<0:ut>0))return yl(A,qe,g,S,R)}var ot=ce.find(S<0?-1:1);return(S<0?ye:Ve)&&(ot=uA(A,ot,S,ot.line==g.line?F:null)),ot?yl(A,ot,g,S,R):null}}return g}function Eu(A,g,b,S,R){var F=S||1,z=yl(A,g,b,F,R)||!R&&yl(A,g,b,F,!0)||yl(A,g,b,-F,R)||!R&&yl(A,g,b,-F,!0);return z||(A.cantEdit=!0,Tt(A.first,0))}function uA(A,g,b,S){return b<0&&g.ch==0?g.line>A.first?qr(A,Tt(g.line-1)):null:b>0&&g.ch==(S||Hr(A,g.line)).text.length?g.line<A.first+A.size-1?Tt(g.line+1,0):null:new Tt(g.line,g.ch+b)}function Co(A){A.setSelection(Tt(A.firstLine(),0),Tt(A.lastLine()),Ft)}function Qm(A,g,b){var S={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return S.canceled=!0}};return b&&(S.update=function(R,F,z,ee){R&&(S.from=qr(A,R)),F&&(S.to=qr(A,F)),z&&(S.text=z),ee!==void 0&&(S.origin=ee)}),ti(A,"beforeChange",A,S),A.cm&&ti(A.cm,"beforeChange",A.cm,S),S.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:S.from,to:S.to,text:S.text,origin:S.origin}}function Tf(A,g,b){if(A.cm){if(!A.cm.curOp)return us(A.cm,Tf)(A,g,b);if(A.cm.state.suppressEdits)return}if(!((yn(A,"beforeChange")||A.cm&&yn(A.cm,"beforeChange"))&&(g=Qm(A,g,!0),!g))){var S=Sm&&!b&&b0(A,g.from,g.to);if(S)for(var R=S.length-1;R>=0;--R)x0(A,{from:S[R].from,to:S[R].to,text:R?[""]:g.text,origin:g.origin});else x0(A,g)}}function x0(A,g){if(!(g.text.length==1&&g.text[0]==""&&lr(g.from,g.to)==0)){var b=nt(A,g);di(A,g,b,A.cm?A.cm.curOp.id:NaN),fd(A,g,b,ug(A,g));var S=[];st(A,function(R,F){!F&&at(S,R.history)==-1&&(If(R.history,g),S.push(R.history)),fd(R,g,null,ug(R,g))})}}function wu(A,g,b){var S=A.cm&&A.cm.state.suppressEdits;if(!(S&&!b)){for(var R=A.history,F,z=A.sel,ee=g=="undo"?R.done:R.undone,ce=g=="undo"?R.undone:R.done,ye=0;ye<ee.length&&(F=ee[ye],!(b?F.ranges&&!F.equals(A.sel):!F.ranges));ye++);if(ye!=ee.length){for(R.lastOrigin=R.lastSelOrigin=null;;)if(F=ee.pop(),F.ranges){if(Pn(F,ce),b&&!F.equals(A.sel)){Ii(A,F,{clearRedo:!1});return}z=F}else if(S){ee.push(F);return}else break;var Ve=[];Pn(z,ce),ce.push({changes:Ve,generation:R.generation}),R.generation=F.generation||++R.maxGeneration;for(var qe=yn(A,"beforeChange")||A.cm&&yn(A.cm,"beforeChange"),ut=function(zt){var or=F.changes[zt];if(or.origin=g,qe&&!Qm(A,or,!1))return ee.length=0,{};Ve.push(pr(A,or));var Ar=zt?nt(A,or):It(ee);fd(A,or,Ar,$o(A,or)),!zt&&A.cm&&A.cm.scrollIntoView({from:or.from,to:Pe(or)});var Er=[];st(A,function(dr,Nr){!Nr&&at(Er,dr.history)==-1&&(If(dr.history,or),Er.push(dr.history)),fd(dr,or,null,$o(dr,or))})},ot=F.changes.length-1;ot>=0;--ot){var Lt=ut(ot);if(Lt)return Lt.v}}}}function ep(A,g){if(g!=0&&(A.first+=g,A.sel=new Ee(Yt(A.sel.ranges,function(R){return new be(Tt(R.anchor.line+g,R.anchor.ch),Tt(R.head.line+g,R.head.ch))}),A.sel.primIndex),A.cm)){li(A.cm,A.first,A.first-g,g);for(var b=A.cm.display,S=b.viewFrom;S<b.viewTo;S++)io(A.cm,S,"gutter")}}function fd(A,g,b,S){if(A.cm&&!A.cm.curOp)return us(A.cm,fd)(A,g,b,S);if(g.to.line<A.first){ep(A,g.text.length-1-(g.to.line-g.from.line));return}if(!(g.from.line>A.lastLine())){if(g.from.line<A.first){var R=g.text.length-1-(A.first-g.from.line);ep(A,R),g={from:Tt(A.first,0),to:Tt(g.to.line+R,g.to.ch),text:[It(g.text)],origin:g.origin}}var F=A.lastLine();g.to.line>F&&(g={from:g.from,to:Tt(F,Hr(A,F).text.length),text:[g.text[0]],origin:g.origin}),g.removed=Vc(A,g.from,g.to),b||(b=nt(A,g)),A.cm?Gl(A.cm,g,S):it(A,g,S),Da(A,b,Ft),A.cantEdit&&Eu(A,Tt(A.firstLine(),0))&&(A.cantEdit=!1)}}function Gl(A,g,b){var S=A.doc,R=A.display,F=g.from,z=g.to,ee=!1,ce=F.line;A.options.lineWrapping||(ce=Ce(pc(Hr(S,F.line))),S.iter(ce,z.line+1,function(ot){if(ot==R.maxLine)return ee=!0,!0})),S.sel.contains(g.from,g.to)>-1&&Qr(A),it(S,g,b,Gc(A)),A.options.lineWrapping||(S.iter(ce,F.line+g.text.length,function(ot){var Lt=nd(ot);Lt>R.maxLineLength&&(R.maxLine=ot,R.maxLineLength=Lt,R.maxLineChanged=!0,ee=!1)}),ee&&(A.curOp.updateMaxLine=!0)),Ba(S,F.line),pg(A,400);var ye=g.text.length-(z.line-F.line)-1;g.full?li(A):F.line==z.line&&g.text.length==1&&!Pt(A.doc,g)?io(A,F.line,"text"):li(A,F.line,z.line+1,ye);var Ve=yn(A,"changes"),qe=yn(A,"change");if(qe||Ve){var ut={from:F,to:z,text:g.text,removed:g.removed,origin:g.origin};qe&&Gt(A,"change",A,ut),Ve&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(ut)}A.display.selForContextMenu=null}function $l(A,g,b,S,R){var F;S||(S=b),lr(S,b)<0&&(F=[S,b],b=F[0],S=F[1]),typeof g=="string"&&(g=A.splitLines(g)),Tf(A,{from:b,to:S,text:g,origin:R})}function Rf(A,g,b,S){b<A.line?A.line+=S:g<A.line&&(A.line=g,A.ch=0)}function U0(A,g,b,S){for(var R=0;R<A.length;++R){var F=A[R],z=!0;if(F.ranges){F.copied||(F=A[R]=F.deepCopy(),F.copied=!0);for(var ee=0;ee<F.ranges.length;ee++)Rf(F.ranges[ee].anchor,g,b,S),Rf(F.ranges[ee].head,g,b,S);continue}for(var ce=0;ce<F.changes.length;++ce){var ye=F.changes[ce];if(b<ye.from.line)ye.from=Tt(ye.from.line+S,ye.from.ch),ye.to=Tt(ye.to.line+S,ye.to.ch);else if(g<=ye.to.line){z=!1;break}}z||(A.splice(0,R+1),R=0)}}function If(A,g){var b=g.from.line,S=g.to.line,R=g.text.length-(S-b)-1;U0(A.done,b,S,R),U0(A.undone,b,S,R)}function tp(A,g,b,S){var R=g,F=g;return typeof g=="number"?F=Hr(A,JA(A,g)):R=Ce(g),R==null?null:(S(F,R)&&A.cm&&io(A.cm,R,b),F)}function AA(A){this.lines=A,this.parent=null;for(var g=0,b=0;b<A.length;++b)A[b].parent=this,g+=A[b].height;this.height=g}AA.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,g){for(var b=A,S=A+g;b<S;++b){var R=this.lines[b];this.height-=R.height,uf(R),Gt(R,"delete")}this.lines.splice(A,g)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,g,b){this.height+=b,this.lines=this.lines.slice(0,A).concat(g).concat(this.lines.slice(A));for(var S=0;S<g.length;++S)g[S].parent=this},iterN:function(A,g,b){for(var S=A+g;A<S;++A)if(b(this.lines[A]))return!0}};function Of(A){this.children=A;for(var g=0,b=0,S=0;S<A.length;++S){var R=A[S];g+=R.chunkSize(),b+=R.height,R.parent=this}this.size=g,this.height=b,this.parent=null}Of.prototype={chunkSize:function(){return this.size},removeInner:function(A,g){this.size-=g;for(var b=0;b<this.children.length;++b){var S=this.children[b],R=S.chunkSize();if(A<R){var F=Math.min(g,R-A),z=S.height;if(S.removeInner(A,F),this.height-=z-S.height,R==F&&(this.children.splice(b--,1),S.parent=null),(g-=F)==0)break;A=0}else A-=R}if(this.size-g<25&&(this.children.length>1||!(this.children[0]instanceof AA))){var ee=[];this.collapse(ee),this.children=[new AA(ee)],this.children[0].parent=this}},collapse:function(A){for(var g=0;g<this.children.length;++g)this.children[g].collapse(A)},insertInner:function(A,g,b){this.size+=g.length,this.height+=b;for(var S=0;S<this.children.length;++S){var R=this.children[S],F=R.chunkSize();if(A<=F){if(R.insertInner(A,g,b),R.lines&&R.lines.length>50){for(var z=R.lines.length%25+25,ee=z;ee<R.lines.length;){var ce=new AA(R.lines.slice(ee,ee+=25));R.height-=ce.height,this.children.splice(++S,0,ce),ce.parent=this}R.lines=R.lines.slice(0,z),this.maybeSpill()}break}A-=F}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var g=A.children.splice(A.children.length-5,5),b=new Of(g);if(A.parent){A.size-=b.size,A.height-=b.height;var R=at(A.parent.children,A);A.parent.children.splice(R+1,0,b)}else{var S=new Of(A.children);S.parent=A,A.children=[S,b],A=S}b.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,g,b){for(var S=0;S<this.children.length;++S){var R=this.children[S],F=R.chunkSize();if(A<F){var z=Math.min(g,F-A);if(R.iterN(A,z,b))return!0;if((g-=z)==0)break;A=0}else A-=F}}};var dA=function(A,g,b){if(b)for(var S in b)b.hasOwnProperty(S)&&(this[S]=b[S]);this.doc=A,this.node=g};dA.prototype.clear=function(){var A=this.doc.cm,g=this.line.widgets,b=this.line,S=Ce(b);if(!(S==null||!g)){for(var R=0;R<g.length;++R)g[R]==this&&g.splice(R--,1);g.length||(b.widgets=null);var F=od(this);Ws(b,Math.max(0,b.height-F)),A&&(Za(A,function(){rp(A,b,-F),io(A,S,"widget")}),Gt(A,"lineWidgetCleared",A,this,S))}},dA.prototype.changed=function(){var A=this,g=this.height,b=this.doc.cm,S=this.line;this.height=null;var R=od(this)-g;R&&(rs(this.doc,S)||Ws(S,S.height+R),b&&Za(b,function(){b.curOp.forceUpdate=!0,rp(b,S,R),Gt(b,"lineWidgetChanged",b,A,Ce(S))}))},wi(dA);function rp(A,g,b){qa(g)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&Dm(A,b)}function zw(A,g,b,S){var R=new dA(A,b,S),F=A.cm;return F&&R.noHScroll&&(F.display.alignWidgets=!0),tp(A,g,"widget",function(z){var ee=z.widgets||(z.widgets=[]);if(R.insertAt==null?ee.push(R):ee.splice(Math.min(ee.length,Math.max(0,R.insertAt)),0,R),R.line=z,F&&!rs(A,z)){var ce=qa(z)<A.scrollTop;Ws(z,z.height+od(R)),ce&&Dm(F,R.height),F.curOp.forceUpdate=!0}return!0}),F&&Gt(F,"lineWidgetAdded",F,R,typeof g=="number"?g:Ce(g)),R}var T_=0,Su=function(A,g){this.lines=[],this.type=g,this.doc=A,this.id=++T_};Su.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,g=A&&!A.curOp;if(g&&ua(A),yn(this,"clear")){var b=this.find();b&&Gt(this,"clear",b.from,b.to)}for(var S=null,R=null,F=0;F<this.lines.length;++F){var z=this.lines[F],ee=za(z.markedSpans,this);A&&!this.collapsed?io(A,Ce(z),"text"):A&&(ee.to!=null&&(R=Ce(z)),ee.from!=null&&(S=Ce(z))),z.markedSpans=bm(z.markedSpans,ee),ee.from==null&&this.collapsed&&!rs(this.doc,z)&&A&&Ws(z,_t(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var ce=0;ce<this.lines.length;++ce){var ye=pc(this.lines[ce]),Ve=nd(ye);Ve>A.display.maxLineLength&&(A.display.maxLine=ye,A.display.maxLineLength=Ve,A.display.maxLineChanged=!0)}S!=null&&A&&this.collapsed&&li(A,S,R+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&Rs(A.doc)),A&&Gt(A,"markerCleared",A,this,S,R),g&&Aa(A),this.parent&&this.parent.clear()}},Su.prototype.find=function(A,g){A==null&&this.type=="bookmark"&&(A=1);for(var b,S,R=0;R<this.lines.length;++R){var F=this.lines[R],z=za(F.markedSpans,this);if(z.from!=null&&(b=Tt(g?F:Ce(F),z.from),A==-1))return b;if(z.to!=null&&(S=Tt(g?F:Ce(F),z.to),A==1))return S}return b&&{from:b,to:S}},Su.prototype.changed=function(){var A=this,g=this.find(-1,!0),b=this,S=this.doc.cm;!g||!S||Za(S,function(){var R=g.line,F=Ce(g.line),z=La(S,F);if(z&&(sA(z),S.curOp.selectionChanged=S.curOp.forceUpdate=!0),S.curOp.updateMaxLine=!0,!rs(b.doc,R)&&b.height!=null){var ee=b.height;b.height=null;var ce=od(b)-ee;ce&&Ws(R,R.height+ce)}Gt(S,"markerChanged",S,A)})},Su.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(!g.maybeHiddenMarkers||at(g.maybeHiddenMarkers,this)==-1)&&(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},Su.prototype.detachLine=function(A){if(this.lines.splice(at(this.lines,A),1),!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(g.maybeHiddenMarkers||(g.maybeHiddenMarkers=[])).push(this)}},wi(Su);function $c(A,g,b,S,R){if(S&&S.shared)return R_(A,g,b,S,R);if(A.cm&&!A.cm.curOp)return us(A.cm,$c)(A,g,b,S,R);var F=new Su(A,R),z=lr(g,b);if(S&&et(S,F,!1),z>0||z==0&&F.clearWhenEmpty!==!1)return F;if(F.replacedWith&&(F.collapsed=!0,F.widgetNode=xe("span",[F.replacedWith],"CodeMirror-widget"),S.handleMouseEvents||F.widgetNode.setAttribute("cm-ignore-events","true"),S.insertLeft&&(F.widgetNode.insertLeft=!0)),F.collapsed){if(Ag(A,g.line,g,b,F)||g.line!=b.line&&Ag(A,b.line,g,b,F))throw new Error("Inserting collapsed marker partially overlapping an existing one");S0()}F.addToHistory&&di(A,{from:g,to:b,origin:"markText"},A.sel,NaN);var ee=g.line,ce=A.cm,ye;if(A.iter(ee,b.line+1,function(qe){ce&&F.collapsed&&!ce.options.lineWrapping&&pc(qe)==ce.display.maxLine&&(ye=!0),F.collapsed&&ee!=g.line&&Ws(qe,0),Cm(qe,new kh(F,ee==g.line?g.ch:null,ee==b.line?b.ch:null),A.cm&&A.cm.curOp),++ee}),F.collapsed&&A.iter(g.line,b.line+1,function(qe){rs(A,qe)&&Ws(qe,0)}),F.clearOnEnter&&Sr(F,"beforeCursorEnter",function(){return F.clear()}),F.readOnly&&(Cn(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),F.collapsed&&(F.id=++T_,F.atomic=!0),ce){if(ye&&(ce.curOp.updateMaxLine=!0),F.collapsed)li(ce,g.line,b.line+1);else if(F.className||F.startStyle||F.endStyle||F.css||F.attributes||F.title)for(var Ve=g.line;Ve<=b.line;Ve++)io(ce,Ve,"text");F.atomic&&Rs(ce.doc),Gt(ce,"markerAdded",ce,F)}return F}var _g=function(A,g){this.markers=A,this.primary=g;for(var b=0;b<A.length;++b)A[b].parent=this};_g.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();Gt(this,"clear")}},_g.prototype.find=function(A,g){return this.primary.find(A,g)},wi(_g);function R_(A,g,b,S,R){S=et(S),S.shared=!1;var F=[$c(A,g,b,S,R)],z=F[0],ee=S.widgetNode;return st(A,function(ce){ee&&(S.widgetNode=ee.cloneNode(!0)),F.push($c(ce,qr(ce,g),qr(ce,b),S,R));for(var ye=0;ye<ce.linked.length;++ye)if(ce.linked[ye].isParent)return;z=It(F)}),new _g(F,z)}function I_(A){return A.findMarks(Tt(A.first,0),A.clipPos(Tt(A.lastLine())),function(g){return g.parent})}function O_(A,g){for(var b=0;b<g.length;b++){var S=g[b],R=S.find(),F=A.clipPos(R.from),z=A.clipPos(R.to);if(lr(F,z)){var ee=$c(A,F,z,S.primary,S.primary.type);S.markers.push(ee),ee.parent=S}}}function yg(A){for(var g=function(S){var R=A[S],F=[R.primary.doc];st(R.primary.doc,function(ce){return F.push(ce)});for(var z=0;z<R.markers.length;z++){var ee=R.markers[z];at(F,ee.doc)==-1&&(ee.parent=null,R.markers.splice(z--,1))}},b=0;b<A.length;b++)g(b)}var N_=0,Is=function(A,g,b,S,R){if(!(this instanceof Is))return new Is(A,g,b,S,R);b==null&&(b=0),Of.call(this,[new AA([new uu("",null)])]),this.first=b,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=b;var F=Tt(b,0);this.sel=Ie(F),this.history=new Ir(null),this.id=++N_,this.modeOption=g,this.lineSep=S,this.direction=R=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),it(this,{from:F,to:F,text:A}),Ii(this,Ie(F),Ft)};Is.prototype=ar(Of.prototype,{constructor:Is,iter:function(A,g,b){b?this.iterN(A-this.first,g-A,b):this.iterN(this.first,this.first+this.size,A)},insert:function(A,g){for(var b=0,S=0;S<g.length;++S)b+=g[S].height;this.insertInner(A-this.first,g,b)},remove:function(A,g){this.removeInner(A-this.first,g)},getValue:function(A){var g=af(this,this.first,this.first+this.size);return A===!1?g:g.join(A||this.lineSeparator())},setValue:As(function(A){var g=Tt(this.first,0),b=this.first+this.size-1;Tf(this,{from:g,to:Tt(b,Hr(this,b).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&hg(this.cm,0,0),Ii(this,Ie(g),Ft)}),replaceRange:function(A,g,b,S){g=qr(this,g),b=b?qr(this,b):g,$l(this,A,g,b,S)},getRange:function(A,g,b){var S=Vc(this,qr(this,A),qr(this,g));return b===!1?S:b===""?S.join(""):S.join(b||this.lineSeparator())},getLine:function(A){var g=this.getLineHandle(A);return g&&g.text},getLineHandle:function(A){if(Ut(this,A))return Hr(this,A)},getLineNumber:function(A){return Ce(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=Hr(this,A)),pc(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return qr(this,A)},getCursor:function(A){var g=this.sel.primary(),b;return A==null||A=="head"?b=g.head:A=="anchor"?b=g.anchor:A=="end"||A=="to"||A===!1?b=g.to():b=g.from(),b},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:As(function(A,g,b){yc(this,qr(this,typeof A=="number"?Tt(A,g||0):A),null,b)}),setSelection:As(function(A,g,b){yc(this,qr(this,A),qr(this,g||A),b)}),extendSelection:As(function(A,g,b){qs(this,qr(this,A),g&&qr(this,g),b)}),extendSelections:As(function(A,g){Ui(this,ag(this,A),g)}),extendSelectionsBy:As(function(A,g){var b=Yt(this.sel.ranges,A);Ui(this,ag(this,b),g)}),setSelections:As(function(A,g,b){if(A.length){for(var S=[],R=0;R<A.length;R++)S[R]=new be(qr(this,A[R].anchor),qr(this,A[R].head||A[R].anchor));g==null&&(g=Math.min(A.length-1,this.sel.primIndex)),Ii(this,Re(this.cm,S,g),b)}}),addSelection:As(function(A,g,b){var S=this.sel.ranges.slice(0);S.push(new be(qr(this,A),qr(this,g||A))),Ii(this,Re(this.cm,S,S.length-1),b)}),getSelection:function(A){for(var g=this.sel.ranges,b,S=0;S<g.length;S++){var R=Vc(this,g[S].from(),g[S].to());b=b?b.concat(R):R}return A===!1?b:b.join(A||this.lineSeparator())},getSelections:function(A){for(var g=[],b=this.sel.ranges,S=0;S<b.length;S++){var R=Vc(this,b[S].from(),b[S].to());A!==!1&&(R=R.join(A||this.lineSeparator())),g[S]=R}return g},replaceSelection:function(A,g,b){for(var S=[],R=0;R<this.sel.ranges.length;R++)S[R]=A;this.replaceSelections(S,g,b||"+input")},replaceSelections:As(function(A,g,b){for(var S=[],R=this.sel,F=0;F<R.ranges.length;F++){var z=R.ranges[F];S[F]={from:z.from(),to:z.to(),text:this.splitLines(A[F]),origin:b}}for(var ee=g&&g!="end"&&Et(this,S,g),ce=S.length-1;ce>=0;ce--)Tf(this,S[ce]);ee?Xs(this,ee):this.cm&&Yh(this.cm)}),undo:As(function(){wu(this,"undo")}),redo:As(function(){wu(this,"redo")}),undoSelection:As(function(){wu(this,"undo",!0)}),redoSelection:As(function(){wu(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,g=0,b=0,S=0;S<A.done.length;S++)A.done[S].ranges||++g;for(var R=0;R<A.undone.length;R++)A.undone[R].ranges||++b;return{undo:g,redo:b}},clearHistory:function(){var A=this;this.history=new Ir(this.history),st(this,function(g){return g.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:Ts(this.history.done),undone:Ts(this.history.undone)}},setHistory:function(A){var g=this.history=new Ir(this.history);g.done=Ts(A.done.slice(0),null,!0),g.undone=Ts(A.undone.slice(0),null,!0)},setGutterMarker:As(function(A,g,b){return tp(this,A,"gutter",function(S){var R=S.gutterMarkers||(S.gutterMarkers={});return R[g]=b,!b&&yr(R)&&(S.gutterMarkers=null),!0})}),clearGutter:As(function(A){var g=this;this.iter(function(b){b.gutterMarkers&&b.gutterMarkers[A]&&tp(g,b,"gutter",function(){return b.gutterMarkers[A]=null,yr(b.gutterMarkers)&&(b.gutterMarkers=null),!0})})}),lineInfo:function(A){var g;if(typeof A=="number"){if(!Ut(this,A)||(g=A,A=Hr(this,A),!A))return null}else if(g=Ce(A),g==null)return null;return{line:g,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:As(function(A,g,b){return tp(this,A,g=="gutter"?"gutter":"class",function(S){var R=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass";if(!S[R])S[R]=b;else{if(te(b).test(S[R]))return!1;S[R]+=" "+b}return!0})}),removeLineClass:As(function(A,g,b){return tp(this,A,g=="gutter"?"gutter":"class",function(S){var R=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass",F=S[R];if(F)if(b==null)S[R]=null;else{var z=F.match(te(b));if(!z)return!1;var ee=z.index+z[0].length;S[R]=F.slice(0,z.index)+(!z.index||ee==F.length?"":" ")+F.slice(ee)||null}else return!1;return!0})}),addLineWidget:As(function(A,g,b){return zw(this,A,g,b)}),removeLineWidget:function(A){A.clear()},markText:function(A,g,b){return $c(this,qr(this,A),qr(this,g),b,b&&b.type||"range")},setBookmark:function(A,g){var b={replacedWith:g&&(g.nodeType==null?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents};return A=qr(this,A),$c(this,A,A,b,"bookmark")},findMarksAt:function(A){A=qr(this,A);var g=[],b=Hr(this,A.line).markedSpans;if(b)for(var S=0;S<b.length;++S){var R=b[S];(R.from==null||R.from<=A.ch)&&(R.to==null||R.to>=A.ch)&&g.push(R.marker.parent||R.marker)}return g},findMarks:function(A,g,b){A=qr(this,A),g=qr(this,g);var S=[],R=A.line;return this.iter(A.line,g.line+1,function(F){var z=F.markedSpans;if(z)for(var ee=0;ee<z.length;ee++){var ce=z[ee];!(ce.to!=null&&R==A.line&&A.ch>=ce.to||ce.from==null&&R!=A.line||ce.from!=null&&R==g.line&&ce.from>=g.ch)&&(!b||b(ce.marker))&&S.push(ce.marker.parent||ce.marker)}++R}),S},getAllMarks:function(){var A=[];return this.iter(function(g){var b=g.markedSpans;if(b)for(var S=0;S<b.length;++S)b[S].from!=null&&A.push(b[S].marker)}),A},posFromIndex:function(A){var g,b=this.first,S=this.lineSeparator().length;return this.iter(function(R){var F=R.text.length+S;if(F>A)return g=A,!0;A-=F,++b}),qr(this,Tt(b,g))},indexFromPos:function(A){A=qr(this,A);var g=A.ch;if(A.line<this.first||A.ch<0)return 0;var b=this.lineSeparator().length;return this.iter(this.first,A.line,function(S){g+=S.text.length+b}),g},copy:function(A){var g=new Is(af(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,A&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(A){A||(A={});var g=this.first,b=this.first+this.size;A.from!=null&&A.from>g&&(g=A.from),A.to!=null&&A.to<b&&(b=A.to);var S=new Is(af(this,g,b),A.mode||this.modeOption,g,this.lineSep,this.direction);return A.sharedHist&&(S.history=this.history),(this.linked||(this.linked=[])).push({doc:S,sharedHist:A.sharedHist}),S.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],O_(S,I_(this)),S},unlinkDoc:function(A){if(A instanceof To&&(A=A.doc),this.linked)for(var g=0;g<this.linked.length;++g){var b=this.linked[g];if(b.doc==A){this.linked.splice(g,1),A.unlinkDoc(this),yg(I_(this));break}}if(A.history==this.history){var S=[A.id];st(A,function(R){return S.push(R.id)},!0),A.history=new Ir(null),A.history.done=Ts(this.history.done,S),A.history.undone=Ts(this.history.undone,S)}},iterLinkedDocs:function(A){st(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):Zo(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:As(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(g){return g.order=null}),this.cm&&Jt(this.cm))})}),Is.prototype.eachLine=Is.prototype.iter;var np=0;function Nf(A){var g=this;if(L_(g),!(dn(g,A)||mc(g.display,A))){br(A),m&&(np=+new Date);var b=mi(g,A,!0),S=A.dataTransfer.files;if(!(!b||g.isReadOnly()))if(S&&S.length&&window.FileReader&&window.File)for(var R=S.length,F=Array(R),z=0,ee=function(){++z==R&&us(g,function(){b=qr(g.doc,b);var ot={from:b,to:b,text:g.doc.splitLines(F.filter(function(Lt){return Lt!=null}).join(g.doc.lineSeparator())),origin:"paste"};Tf(g.doc,ot),Xs(g.doc,Ie(qr(g.doc,b),qr(g.doc,Pe(ot))))})()},ce=function(ot,Lt){if(g.options.allowDropFileTypes&&at(g.options.allowDropFileTypes,ot.type)==-1){ee();return}var zt=new FileReader;zt.onerror=function(){return ee()},zt.onload=function(){var or=zt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(or)){ee();return}F[Lt]=or,ee()},zt.readAsText(ot)},ye=0;ye<S.length;ye++)ce(S[ye],ye);else{if(g.state.draggingText&&g.doc.sel.contains(b)>-1){g.state.draggingText(A),setTimeout(function(){return g.display.input.focus()},20);return}try{var Ve=A.dataTransfer.getData("Text");if(Ve){var qe;if(g.state.draggingText&&!g.state.draggingText.copy&&(qe=g.listSelections()),Da(g.doc,Ie(b,b)),qe)for(var ut=0;ut<qe.length;++ut)$l(g.doc,"",qe[ut].anchor,qe[ut].head,"drag");g.replaceSelection(Ve,"around","paste"),g.display.input.focus()}}catch{}}}}function Eg(A,g){if(m&&(!A.state.draggingText||+new Date-np<100)){kr(g);return}if(!(dn(A,g)||mc(A.display,g))&&(g.dataTransfer.setData("Text",A.getSelection()),g.dataTransfer.effectAllowed="copyMove",g.dataTransfer.setDragImage&&!M)){var b=se("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",P&&(b.width=b.height=1,A.display.wrapper.appendChild(b),b._top=b.offsetTop),g.dataTransfer.setDragImage(b,0,0),P&&b.parentNode.removeChild(b)}}function B_(A,g){var b=mi(A,g);if(b){var S=document.createDocumentFragment();zs(A,b,S),A.display.dragCursor||(A.display.dragCursor=se("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),ge(A.display.dragCursor,S)}}function L_(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function wg(A){if(document.getElementsByClassName){for(var g=document.getElementsByClassName("CodeMirror"),b=[],S=0;S<g.length;S++){var R=g[S].CodeMirror;R&&b.push(R)}b.length&&b[0].operation(function(){for(var F=0;F<b.length;F++)A(b[F])})}}var ip=!1;function M0(){ip||(fA(),ip=!0)}function fA(){var A;Sr(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,wg(Hm)},100))}),Sr(window,"blur",function(){return wg(lA)})}function Hm(A){var g=A.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,A.setSize()}for(var zl={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Sg=0;Sg<10;Sg++)zl[Sg+48]=zl[Sg+96]=String(Sg);for(var bg=65;bg<=90;bg++)zl[bg]=String.fromCharCode(bg);for(var bu=1;bu<=12;bu++)zl[bu+111]=zl[bu+63235]="F"+bu;var hA={};hA.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},hA.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},hA.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},hA.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},hA.default=J?hA.macDefault:hA.pcDefault;function P_(A){var g=A.split(/-(?!$)/);A=g[g.length-1];for(var b,S,R,F,z=0;z<g.length-1;z++){var ee=g[z];if(/^(cmd|meta|m)$/i.test(ee))F=!0;else if(/^a(lt)?$/i.test(ee))b=!0;else if(/^(c|ctrl|control)$/i.test(ee))S=!0;else if(/^s(hift)?$/i.test(ee))R=!0;else throw new Error("Unrecognized modifier name: "+ee)}return b&&(A="Alt-"+A),S&&(A="Ctrl-"+A),F&&(A="Cmd-"+A),R&&(A="Shift-"+A),A}function jm(A){var g={};for(var b in A)if(A.hasOwnProperty(b)){var S=A[b];if(/^(name|fallthrough|(de|at)tach)$/.test(b))continue;if(S=="..."){delete A[b];continue}for(var R=Yt(b.split(" "),P_),F=0;F<R.length;F++){var z=void 0,ee=void 0;F==R.length-1?(ee=R.join(" "),z=S):(ee=R.slice(0,F+1).join(" "),z="...");var ce=g[ee];if(!ce)g[ee]=z;else if(ce!=z)throw new Error("Inconsistent bindings for "+ee)}delete A[b]}for(var ye in g)A[ye]=g[ye];return A}function Bf(A,g,b,S){g=ql(g);var R=g.call?g.call(A,S):g[A];if(R===!1)return"nothing";if(R==="...")return"multi";if(R!=null&&b(R))return"handled";if(g.fallthrough){if(Object.prototype.toString.call(g.fallthrough)!="[object Array]")return Bf(A,g.fallthrough,b,S);for(var F=0;F<g.fallthrough.length;F++){var z=Bf(A,g.fallthrough[F],b,S);if(z)return z}}}function Lf(A){var g=typeof A=="string"?A:zl[A.keyCode];return g=="Ctrl"||g=="Alt"||g=="Shift"||g=="Mod"}function hd(A,g,b){var S=A;return g.altKey&&S!="Alt"&&(A="Alt-"+A),(pe?g.metaKey:g.ctrlKey)&&S!="Ctrl"&&(A="Ctrl-"+A),(pe?g.ctrlKey:g.metaKey)&&S!="Mod"&&(A="Cmd-"+A),!b&&g.shiftKey&&S!="Shift"&&(A="Shift-"+A),A}function Pf(A,g){if(P&&A.keyCode==34&&A.char)return!1;var b=zl[A.keyCode];return b==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(b=A.code),hd(b,A,g))}function ql(A){return typeof A=="string"?hA[A]:A}function fa(A,g){for(var b=A.doc.sel.ranges,S=[],R=0;R<b.length;R++){for(var F=g(b[R]);S.length&&lr(F.from,It(S).to)<=0;){var z=S.pop();if(lr(z.from,F.from)<0){F.from=z.from;break}}S.push(F)}Za(A,function(){for(var ee=S.length-1;ee>=0;ee--)$l(A.doc,"",S[ee].from,S[ee].to,"+delete");Yh(A)})}function Cu(A,g,b){var S=vt(A.text,g+b,b);return S<0||S>A.text.length?null:S}function Yl(A,g,b){var S=Cu(A,g.ch,b);return S==null?null:new Tt(g.line,S,b<0?"after":"before")}function op(A,g,b,S,R){if(A){g.doc.direction=="rtl"&&(R=-R);var F=Tr(b,g.doc.direction);if(F){var z=R<0?It(F):F[0],ee=R<0==(z.level==1),ce=ee?"after":"before",ye;if(z.level>0||g.doc.direction=="rtl"){var Ve=ad(g,b);ye=R<0?b.text.length-1:0;var qe=Ya(g,Ve,ye).top;ye=tn(function(ut){return Ya(g,Ve,ut).top==qe},R<0==(z.level==1)?z.from:z.to-1,ye),ce=="before"&&(ye=Cu(b,ye,1))}else ye=R<0?z.to:z.from;return new Tt(S,ye,ce)}}return new Tt(S,R<0?b.text.length:0,R<0?"before":"after")}function Km(A,g,b,S){var R=Tr(g,A.doc.direction);if(!R)return Yl(g,b,S);b.ch>=g.text.length?(b.ch=g.text.length,b.sticky="before"):b.ch<=0&&(b.ch=0,b.sticky="after");var F=sr(R,b.ch,b.sticky),z=R[F];if(A.doc.direction=="ltr"&&z.level%2==0&&(S>0?z.to>b.ch:z.from<b.ch))return Yl(g,b,S);var ee=function(Ar,Er){return Cu(g,Ar instanceof Tt?Ar.ch:Ar,Er)},ce,ye=function(Ar){return A.options.lineWrapping?(ce=ce||ad(A,g),Gh(A,g,ce,Ar)):{begin:0,end:g.text.length}},Ve=ye(b.sticky=="before"?ee(b,-1):b.ch);if(A.doc.direction=="rtl"||z.level==1){var qe=z.level==1==S<0,ut=ee(b,qe?1:-1);if(ut!=null&&(qe?ut<=z.to&&ut<=Ve.end:ut>=z.from&&ut>=Ve.begin)){var ot=qe?"before":"after";return new Tt(b.line,ut,ot)}}var Lt=function(Ar,Er,dr){for(var Nr=function(oo,ha){return ha?new Tt(b.line,ee(oo,1),"before"):new Tt(b.line,oo,"after")};Ar>=0&&Ar<R.length;Ar+=Er){var an=R[Ar],Zr=Er>0==(an.level!=1),Mn=Zr?dr.begin:ee(dr.end,-1);if(an.from<=Mn&&Mn<an.to||(Mn=Zr?an.from:ee(an.to,-1),dr.begin<=Mn&&Mn<dr.end))return Nr(Mn,Zr)}},zt=Lt(F+S,S,Ve);if(zt)return zt;var or=S>0?Ve.end:ee(Ve.begin,-1);return or!=null&&!(S>0&&or==g.text.length)&&(zt=Lt(S>0?0:R.length-1,S,ye(or)),zt)?zt:null}var sp={selectAll:Co,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),Ft)},killLine:function(A){return fa(A,function(g){if(g.empty()){var b=Hr(A.doc,g.head.line).text.length;return g.head.ch==b&&g.head.line<A.lastLine()?{from:g.head,to:Tt(g.head.line+1,0)}:{from:g.head,to:Tt(g.head.line,b)}}else return{from:g.from(),to:g.to()}})},deleteLine:function(A){return fa(A,function(g){return{from:Tt(g.from().line,0),to:qr(A.doc,Tt(g.to().line+1,0))}})},delLineLeft:function(A){return fa(A,function(g){return{from:Tt(g.from().line,0),to:g.from()}})},delWrappedLineLeft:function(A){return fa(A,function(g){var b=A.charCoords(g.head,"div").top+5,S=A.coordsChar({left:0,top:b},"div");return{from:S,to:g.from()}})},delWrappedLineRight:function(A){return fa(A,function(g){var b=A.charCoords(g.head,"div").top+5,S=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:b},"div");return{from:g.from(),to:S}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(Tt(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(Tt(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(g){return k_(A,g.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(g){return ap(A,g.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(g){return Cg(A,g.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(g){var b=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:b},"div")},He)},goLineLeft:function(A){return A.extendSelectionsBy(function(g){var b=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:0,top:b},"div")},He)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(g){var b=A.cursorCoords(g.head,"div").top+5,S=A.coordsChar({left:0,top:b},"div");return S.ch<A.getLine(S.line).search(/\S/)?ap(A,g.head):S},He)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var g=[],b=A.listSelections(),S=A.options.tabSize,R=0;R<b.length;R++){var F=b[R].from(),z=Ze(A.getLine(F.line),F.ch,S);g.push(Nt(S-z%S))}A.replaceSelections(g)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return Za(A,function(){for(var g=A.listSelections(),b=[],S=0;S<g.length;S++)if(g[S].empty()){var R=g[S].head,F=Hr(A.doc,R.line).text;if(F){if(R.ch==F.length&&(R=new Tt(R.line,R.ch-1)),R.ch>0)R=new Tt(R.line,R.ch+1),A.replaceRange(F.charAt(R.ch-1)+F.charAt(R.ch-2),Tt(R.line,R.ch-2),R,"+transpose");else if(R.line>A.doc.first){var z=Hr(A.doc,R.line-1).text;z&&(R=new Tt(R.line,1),A.replaceRange(F.charAt(0)+A.doc.lineSeparator()+z.charAt(z.length-1),Tt(R.line-1,z.length-1),R,"+transpose"))}}b.push(new be(R,R))}A.setSelections(b)})},newlineAndIndent:function(A){return Za(A,function(){for(var g=A.listSelections(),b=g.length-1;b>=0;b--)A.replaceRange(A.doc.lineSeparator(),g[b].anchor,g[b].head,"+input");g=A.listSelections();for(var S=0;S<g.length;S++)A.indentLine(g[S].from().line,null,!0);Yh(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function k_(A,g){var b=Hr(A.doc,g),S=pc(b);return S!=b&&(g=Ce(S)),op(!0,A,S,g,1)}function Cg(A,g){var b=Hr(A.doc,g),S=wo(b);return S!=b&&(g=Ce(S)),op(!0,A,b,g,-1)}function ap(A,g){var b=k_(A,g.line),S=Hr(A.doc,b.line),R=Tr(S,A.doc.direction);if(!R||R[0].level==0){var F=Math.max(b.ch,S.text.search(/\S/)),z=g.line==b.line&&g.ch<=F&&g.ch;return Tt(b.line,z?0:F,b.sticky)}return b}function D_(A,g,b){if(typeof g=="string"&&(g=sp[g],!g))return!1;A.display.input.ensurePolled();var S=A.display.shift,R=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),b&&(A.display.shift=!1),R=g(A)!=Ot}finally{A.display.shift=S,A.state.suppressEdits=!1}return R}function Mk(A,g,b){for(var S=0;S<A.state.keyMaps.length;S++){var R=Bf(g,A.state.keyMaps[S],b,A);if(R)return R}return A.options.extraKeys&&Bf(g,A.options.extraKeys,b,A)||Bf(g,A.options.keyMap,b,A)}var dR=new pt;function Tg(A,g,b,S){var R=A.state.keySeq;if(R){if(Lf(g))return"handled";if(/\'$/.test(g)?A.state.keySeq=null:dR.set(50,function(){A.state.keySeq==R&&(A.state.keySeq=null,A.display.input.reset())}),fR(A,R+" "+g,b,S))return!0}return fR(A,g,b,S)}function fR(A,g,b,S){var R=Mk(A,g,S);return R=="multi"&&(A.state.keySeq=g),R=="handled"&&Gt(A,"keyHandled",A,g,b),(R=="handled"||R=="multi")&&(br(b),zh(A)),!!R}function pA(A,g){var b=Pf(g,!0);return b?g.shiftKey&&!A.state.keySeq?Tg(A,"Shift-"+b,g,function(S){return D_(A,S,!0)})||Tg(A,b,g,function(S){if(typeof S=="string"?/^go[A-Z]/.test(S):S.motion)return D_(A,S)}):Tg(A,b,g,function(S){return D_(A,S)}):!1}function Wm(A,g,b){return Tg(A,"'"+b+"'",g,function(S){return D_(A,S,!0)})}var kf=null;function qw(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&(g.curOp.focus=ke(Ue(g)),!dn(g,A))){m&&E<11&&A.keyCode==27&&(A.returnValue=!1);var b=A.keyCode;g.display.shift=b==16||A.shiftKey;var S=pA(g,A);P&&(kf=S?b:null,!S&&b==88&&!hc&&(J?A.metaKey:A.ctrlKey)&&g.replaceSelection("",null,"cut")),c&&!J&&!S&&b==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),b==18&&!/\bCodeMirror-crosshair\b/.test(g.display.lineDiv.className)&&hR(g)}}function hR(A){var g=A.display.lineDiv;Ke(g,"CodeMirror-crosshair");function b(S){(S.keyCode==18||!S.altKey)&&(le(g,"CodeMirror-crosshair"),Ei(document,"keyup",b),Ei(document,"mouseover",b))}Sr(document,"keyup",b),Sr(document,"mouseover",b)}function cp(A){A.keyCode==16&&(this.doc.sel.shift=!1),dn(this,A)}function x_(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&!(mc(g.display,A)||dn(g,A)||A.ctrlKey&&!A.altKey||J&&A.metaKey)){var b=A.keyCode,S=A.charCode;if(P&&b==kf){kf=null,br(A);return}if(!(P&&(!A.which||A.which<10)&&pA(g,A))){var R=String.fromCharCode(S??b);R!="\b"&&(Wm(g,A,R)||g.display.input.onKeyPress(A))}}}var Fk=400,U_=function(A,g,b){this.time=A,this.pos=g,this.button=b};U_.prototype.compare=function(A,g,b){return this.time+Fk>A&&lr(g,this.pos)==0&&b==this.button};var F0,Rg;function pR(A,g){var b=+new Date;return Rg&&Rg.compare(b,A,g)?(F0=Rg=null,"triple"):F0&&F0.compare(b,A,g)?(Rg=new U_(b,A,g),F0=null,"double"):(F0=new U_(b,A,g),Rg=null,"single")}function gR(A){var g=this,b=g.display;if(!(dn(g,A)||b.activeTouch&&b.input.supportsTouch())){if(b.input.ensurePolled(),b.shift=A.shiftKey,mc(b,A)){w||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));return}if(!F_(g,A)){var S=mi(g,A),R=ls(A),F=S?pR(S,R):"single";Qe(g).focus(),R==1&&g.state.selectingText&&g.state.selectingText(A),!(S&&lp(g,R,S,F,A))&&(R==1?S?Qk(g,S,F,A):$a(A)==b.scroller&&br(A):R==2?(S&&qs(g.doc,S),setTimeout(function(){return b.input.focus()},20)):R==3&&(Y?g.display.input.onContextMenu(A):ld(g)))}}}function lp(A,g,b,S,R){var F="Click";return S=="double"?F="Double"+F:S=="triple"&&(F="Triple"+F),F=(g==1?"Left":g==2?"Middle":"Right")+F,Tg(A,hd(F,R),R,function(z){if(typeof z=="string"&&(z=sp[z]),!z)return!1;var ee=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),ee=z(A,b)!=Ot}finally{A.state.suppressEdits=!1}return ee})}function Vk(A,g,b){var S=A.getOption("configureMouse"),R=S?S(A,g,b):{};if(R.unit==null){var F=ie?b.shiftKey&&b.metaKey:b.altKey;R.unit=F?"rectangle":g=="single"?"char":g=="double"?"word":"line"}return(R.extend==null||A.doc.extend)&&(R.extend=A.doc.extend||b.shiftKey),R.addNew==null&&(R.addNew=J?b.metaKey:b.ctrlKey),R.moveOnDrag==null&&(R.moveOnDrag=!(J?b.altKey:b.ctrlKey)),R}function Qk(A,g,b,S){m?setTimeout(We(T0,A),0):A.curOp.focus=ke(Ue(A));var R=Vk(A,b,S),F=A.doc.sel,z;A.options.dragDrop&&_s&&!A.isReadOnly()&&b=="single"&&(z=F.contains(g))>-1&&(lr((z=F.ranges[z]).from(),g)<0||g.xRel>0)&&(lr(z.to(),g)>0||g.xRel<0)?Hk(A,S,g,R):vR(A,S,g,R)}function Hk(A,g,b,S){var R=A.display,F=!1,z=us(A,function(ye){w&&(R.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:ld(A)),Ei(R.wrapper.ownerDocument,"mouseup",z),Ei(R.wrapper.ownerDocument,"mousemove",ee),Ei(R.scroller,"dragstart",ce),Ei(R.scroller,"drop",z),F||(br(ye),S.addNew||qs(A.doc,b,null,null,S.extend),w&&!M||m&&E==9?setTimeout(function(){R.wrapper.ownerDocument.body.focus({preventScroll:!0}),R.input.focus()},20):R.input.focus())}),ee=function(ye){F=F||Math.abs(g.clientX-ye.clientX)+Math.abs(g.clientY-ye.clientY)>=10},ce=function(){return F=!0};w&&(R.scroller.draggable=!0),A.state.draggingText=z,z.copy=!S.moveOnDrag,Sr(R.wrapper.ownerDocument,"mouseup",z),Sr(R.wrapper.ownerDocument,"mousemove",ee),Sr(R.scroller,"dragstart",ce),Sr(R.scroller,"drop",z),A.state.delayingBlurEvent=!0,setTimeout(function(){return R.input.focus()},20),R.scroller.dragDrop&&R.scroller.dragDrop()}function mR(A,g,b){if(b=="char")return new be(g,g);if(b=="word")return A.findWordAt(g);if(b=="line")return new be(Tt(g.line,0),qr(A.doc,Tt(g.line+1,0)));var S=b(A,g);return new be(S.from,S.to)}function vR(A,g,b,S){m&&ld(A);var R=A.display,F=A.doc;br(g);var z,ee,ce=F.sel,ye=ce.ranges;if(S.addNew&&!S.extend?(ee=F.sel.contains(b),ee>-1?z=ye[ee]:z=new be(b,b)):(z=F.sel.primary(),ee=F.sel.primIndex),S.unit=="rectangle")S.addNew||(z=new be(b,b)),b=mi(A,g,!0,!0),ee=-1;else{var Ve=mR(A,b,S.unit);S.extend?z=zo(z,Ve.anchor,Ve.head,S.extend):z=Ve}S.addNew?ee==-1?(ee=ye.length,Ii(F,Re(A,ye.concat([z]),ee),{scroll:!1,origin:"*mouse"})):ye.length>1&&ye[ee].empty()&&S.unit=="char"&&!S.extend?(Ii(F,Re(A,ye.slice(0,ee).concat(ye.slice(ee+1)),0),{scroll:!1,origin:"*mouse"}),ce=F.sel):ec(F,ee,z,lt):(ee=0,Ii(F,new Ee([z],0),lt),ce=F.sel);var qe=b;function ut(dr){if(lr(qe,dr)!=0)if(qe=dr,S.unit=="rectangle"){for(var Nr=[],an=A.options.tabSize,Zr=Ze(Hr(F,b.line).text,b.ch,an),Mn=Ze(Hr(F,dr.line).text,dr.ch,an),oo=Math.min(Zr,Mn),ha=Math.max(Zr,Mn),Do=Math.min(b.line,dr.line),zc=Math.min(A.lastLine(),Math.max(b.line,dr.line));Do<=zc;Do++){var tc=Hr(F,Do).text,Os=vr(tc,oo,an);oo==ha?Nr.push(new be(Tt(Do,Os),Tt(Do,Os))):tc.length>Os&&Nr.push(new be(Tt(Do,Os),Tt(Do,vr(tc,ha,an))))}Nr.length||Nr.push(new be(b,b)),Ii(F,Re(A,ce.ranges.slice(0,ee).concat(Nr),ee),{origin:"*mouse",scroll:!1}),A.scrollIntoView(dr)}else{var qc=z,ds=mR(A,dr,S.unit),Ns=qc.anchor,xo;lr(ds.anchor,Ns)>0?(xo=ds.head,Ns=Na(qc.from(),ds.anchor)):(xo=ds.anchor,Ns=Bn(qc.to(),ds.head));var so=ce.ranges.slice(0);so[ee]=jk(A,new be(qr(F,Ns),xo)),Ii(F,Re(A,so,ee),lt)}}var ot=R.wrapper.getBoundingClientRect(),Lt=0;function zt(dr){var Nr=++Lt,an=mi(A,dr,!0,S.unit=="rectangle");if(an)if(lr(an,qe)!=0){A.curOp.focus=ke(Ue(A)),ut(an);var Zr=mu(R,F);(an.line>=Zr.to||an.line<Zr.from)&&setTimeout(us(A,function(){Lt==Nr&&zt(dr)}),150)}else{var Mn=dr.clientY<ot.top?-20:dr.clientY>ot.bottom?20:0;Mn&&setTimeout(us(A,function(){Lt==Nr&&(R.scroller.scrollTop+=Mn,zt(dr))}),50)}}function or(dr){A.state.selectingText=!1,Lt=1/0,dr&&(br(dr),R.input.focus()),Ei(R.wrapper.ownerDocument,"mousemove",Ar),Ei(R.wrapper.ownerDocument,"mouseup",Er),F.history.lastSelOrigin=null}var Ar=us(A,function(dr){dr.buttons===0||!ls(dr)?or(dr):zt(dr)}),Er=us(A,or);A.state.selectingText=Er,Sr(R.wrapper.ownerDocument,"mousemove",Ar),Sr(R.wrapper.ownerDocument,"mouseup",Er)}function jk(A,g){var b=g.anchor,S=g.head,R=Hr(A.doc,b.line);if(lr(b,S)==0&&b.sticky==S.sticky)return g;var F=Tr(R);if(!F)return g;var z=sr(F,b.ch,b.sticky),ee=F[z];if(ee.from!=b.ch&&ee.to!=b.ch)return g;var ce=z+(ee.from==b.ch==(ee.level!=1)?0:1);if(ce==0||ce==F.length)return g;var ye;if(S.line!=b.line)ye=(S.line-b.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var Ve=sr(F,S.ch,S.sticky),qe=Ve-z||(S.ch-b.ch)*(ee.level==1?-1:1);Ve==ce-1||Ve==ce?ye=qe<0:ye=qe>0}var ut=F[ce+(ye?-1:0)],ot=ye==(ut.level==1),Lt=ot?ut.from:ut.to,zt=ot?"after":"before";return b.ch==Lt&&b.sticky==zt?g:new be(new Tt(b.line,Lt,zt),S)}function M_(A,g,b,S){var R,F;if(g.touches)R=g.touches[0].clientX,F=g.touches[0].clientY;else try{R=g.clientX,F=g.clientY}catch{return!1}if(R>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;S&&br(g);var z=A.display,ee=z.lineDiv.getBoundingClientRect();if(F>ee.bottom||!yn(A,b))return ki(g);F-=ee.top-z.viewOffset;for(var ce=0;ce<A.display.gutterSpecs.length;++ce){var ye=z.gutters.childNodes[ce];if(ye&&ye.getBoundingClientRect().right>=R){var Ve=Ge(A.doc,F),qe=A.display.gutterSpecs[ce];return ti(A,b,A,Ve,qe.className,g),ki(g)}}}function F_(A,g){return M_(A,g,"gutterClick",!0)}function _R(A,g){mc(A.display,g)||yR(A,g)||dn(A,g,"contextmenu")||Y||A.display.input.onContextMenu(g)}function yR(A,g){return yn(A,"gutterContextMenu")?M_(A,g,"gutterContextMenu",!1):!1}function ER(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),fo(A)}var Gm={toString:function(){return"CodeMirror.Init"}},wR={},V_={};function Kk(A){var g=A.optionHandlers;function b(S,R,F,z){A.defaults[S]=R,F&&(g[S]=z?function(ee,ce,ye){ye!=Gm&&F(ee,ce,ye)}:F)}A.defineOption=b,A.Init=Gm,b("value","",function(S,R){return S.setValue(R)},!0),b("mode",null,function(S,R){S.doc.modeOption=R,dt(S)},!0),b("indentUnit",2,dt,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(S){Ht(S),fo(S),li(S)},!0),b("lineSeparator",null,function(S,R){if(S.doc.lineSep=R,!!R){var F=[],z=S.doc.first;S.doc.iter(function(ce){for(var ye=0;;){var Ve=ce.text.indexOf(R,ye);if(Ve==-1)break;ye=Ve+R.length,F.push(Tt(z,Ve))}z++});for(var ee=F.length-1;ee>=0;ee--)$l(S.doc,R,F[ee],Tt(F[ee].line,F[ee].ch+R.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(S,R,F){S.state.specialChars=new RegExp(R.source+(R.test("	")?"":"|	"),"g"),F!=Gm&&S.refresh()}),b("specialCharPlaceholder",Om,function(S){return S.refresh()},!0),b("electricChars",!0),b("inputStyle",K?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(S,R){return S.getInputField().spellcheck=R},!0),b("autocorrect",!1,function(S,R){return S.getInputField().autocorrect=R},!0),b("autocapitalize",!1,function(S,R){return S.getInputField().autocapitalize=R},!0),b("rtlMoveVisually",!fe),b("wholeLineUpdateBefore",!0),b("theme","default",function(S){ER(S),mg(S)},!0),b("keyMap","default",function(S,R,F){var z=ql(R),ee=F!=Gm&&ql(F);ee&&ee.detach&&ee.detach(S,z),z.attach&&z.attach(S,ee||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,Gk,!0),b("gutters",[],function(S,R){S.display.gutterSpecs=Vm(R,S.options.lineNumbers),mg(S)},!0),b("fixedGutter",!0,function(S,R){S.display.gutters.style.left=R?Ef(S.display)+"px":"0",S.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(S){return Jh(S)},!0),b("scrollbarStyle","native",function(S){N0(S),Jh(S),S.display.scrollbars.setScrollTop(S.doc.scrollTop),S.display.scrollbars.setScrollLeft(S.doc.scrollLeft)},!0),b("lineNumbers",!1,function(S,R){S.display.gutterSpecs=Vm(S.options.gutters,R),mg(S)},!0),b("firstLineNumber",1,mg,!0),b("lineNumberFormatter",function(S){return S},mg,!0),b("showCursorWhenSelecting",!1,gu,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("selectionsMayTouch",!1),b("readOnly",!1,function(S,R){R=="nocursor"&&(lA(S),S.display.input.blur()),S.display.input.readOnlyChanged(R)}),b("screenReaderLabel",null,function(S,R){R=R===""?null:R,S.display.input.screenReaderLabelChanged(R)}),b("disableInput",!1,function(S,R){R||S.display.input.reset()},!0),b("dragDrop",!0,Wk),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,gu,!0),b("singleCursorHeightPerLine",!0,gu,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,Ht,!0),b("addModeClass",!1,Ht,!0),b("pollInterval",100),b("undoDepth",200,function(S,R){return S.doc.history.undoDepth=R}),b("historyEventDelay",1250),b("viewportMargin",10,function(S){return S.refresh()},!0),b("maxHighlightLength",1e4,Ht,!0),b("moveInputWithCursor",!0,function(S,R){R||S.display.input.resetPosition()}),b("tabindex",null,function(S,R){return S.display.input.getField().tabIndex=R||""}),b("autofocus",null),b("direction","ltr",function(S,R){return S.doc.setDirection(R)},!0),b("phrases",null)}function Wk(A,g,b){var S=b&&b!=Gm;if(!g!=!S){var R=A.display.dragFunctions,F=g?Sr:Ei;F(A.display.scroller,"dragstart",R.start),F(A.display.scroller,"dragenter",R.enter),F(A.display.scroller,"dragover",R.over),F(A.display.scroller,"dragleave",R.leave),F(A.display.scroller,"drop",R.drop)}}function Gk(A){A.options.lineWrapping?(Ke(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(le(A.display.wrapper,"CodeMirror-wrap"),id(A)),Xa(A),li(A),fo(A),setTimeout(function(){return Jh(A)},100)}function To(A,g){var b=this;if(!(this instanceof To))return new To(A,g);this.options=g=g?et(g):{},et(wR,g,!1);var S=g.value;typeof S=="string"?S=new Is(S,g.mode,null,g.lineSeparator,g.direction):g.mode&&(S.modeOption=g.mode),this.doc=S;var R=new To.inputStyles[g.inputStyle](this),F=this.display=new $w(A,S,R,g);F.wrapper.CodeMirror=this,ER(this),g.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),N0(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new pt,keySeq:null,specialChars:null},g.autofocus&&!K&&F.input.focus(),m&&E<11&&setTimeout(function(){return b.display.input.reset(!0)},20),Df(this),M0(),ua(this),this.curOp.forceUpdate=!0,$t(this,S),g.autofocus&&!K||this.hasFocus()?setTimeout(function(){b.hasFocus()&&!b.state.focused&&qh(b)},20):lA(this);for(var z in V_)V_.hasOwnProperty(z)&&V_[z](this,g[z],Gm);C_(this),g.finishInit&&g.finishInit(this);for(var ee=0;ee<Yw.length;++ee)Yw[ee](this);Aa(this),w&&g.lineWrapping&&getComputedStyle(F.lineDiv).textRendering=="optimizelegibility"&&(F.lineDiv.style.textRendering="auto")}To.defaults=wR,To.optionHandlers=V_;function Df(A){var g=A.display;Sr(g.scroller,"mousedown",us(A,gR)),m&&E<11?Sr(g.scroller,"dblclick",us(A,function(ce){if(!dn(A,ce)){var ye=mi(A,ce);if(!(!ye||F_(A,ce)||mc(A.display,ce))){br(ce);var Ve=A.findWordAt(ye);qs(A.doc,Ve.anchor,Ve.head)}}})):Sr(g.scroller,"dblclick",function(ce){return dn(A,ce)||br(ce)}),Sr(g.scroller,"contextmenu",function(ce){return _R(A,ce)}),Sr(g.input.getField(),"contextmenu",function(ce){g.scroller.contains(ce.target)||_R(A,ce)});var b,S={end:0};function R(){g.activeTouch&&(b=setTimeout(function(){return g.activeTouch=null},1e3),S=g.activeTouch,S.end=+new Date)}function F(ce){if(ce.touches.length!=1)return!1;var ye=ce.touches[0];return ye.radiusX<=1&&ye.radiusY<=1}function z(ce,ye){if(ye.left==null)return!0;var Ve=ye.left-ce.left,qe=ye.top-ce.top;return Ve*Ve+qe*qe>20*20}Sr(g.scroller,"touchstart",function(ce){if(!dn(A,ce)&&!F(ce)&&!F_(A,ce)){g.input.ensurePolled(),clearTimeout(b);var ye=+new Date;g.activeTouch={start:ye,moved:!1,prev:ye-S.end<=300?S:null},ce.touches.length==1&&(g.activeTouch.left=ce.touches[0].pageX,g.activeTouch.top=ce.touches[0].pageY)}}),Sr(g.scroller,"touchmove",function(){g.activeTouch&&(g.activeTouch.moved=!0)}),Sr(g.scroller,"touchend",function(ce){var ye=g.activeTouch;if(ye&&!mc(g,ce)&&ye.left!=null&&!ye.moved&&new Date-ye.start<300){var Ve=A.coordsChar(g.activeTouch,"page"),qe;!ye.prev||z(ye,ye.prev)?qe=new be(Ve,Ve):!ye.prev.prev||z(ye,ye.prev.prev)?qe=A.findWordAt(Ve):qe=new be(Tt(Ve.line,0),qr(A.doc,Tt(Ve.line+1,0))),A.setSelection(qe.anchor,qe.head),A.focus(),br(ce)}R()}),Sr(g.scroller,"touchcancel",R),Sr(g.scroller,"scroll",function(){g.scroller.clientHeight&&(ud(A,g.scroller.scrollTop),vl(A,g.scroller.scrollLeft,!0),ti(A,"scroll",A))}),Sr(g.scroller,"mousewheel",function(ce){return ne(A,ce)}),Sr(g.scroller,"DOMMouseScroll",function(ce){return ne(A,ce)}),Sr(g.wrapper,"scroll",function(){return g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),g.dragFunctions={enter:function(ce){dn(A,ce)||kr(ce)},over:function(ce){dn(A,ce)||(B_(A,ce),kr(ce))},start:function(ce){return Eg(A,ce)},drop:us(A,Nf),leave:function(ce){dn(A,ce)||L_(A)}};var ee=g.input.getField();Sr(ee,"keyup",function(ce){return cp.call(A,ce)}),Sr(ee,"keydown",us(A,qw)),Sr(ee,"keypress",us(A,x_)),Sr(ee,"focus",function(ce){return qh(A,ce)}),Sr(ee,"blur",function(ce){return lA(A,ce)})}var Yw=[];To.defineInitHook=function(A){return Yw.push(A)};function V0(A,g,b,S){var R=A.doc,F;b==null&&(b="add"),b=="smart"&&(R.mode.indent?F=eA(A,g).state:b="prev");var z=A.options.tabSize,ee=Hr(R,g),ce=Ze(ee.text,null,z);ee.stateAfter&&(ee.stateAfter=null);var ye=ee.text.match(/^\s*/)[0],Ve;if(!S&&!/\S/.test(ee.text))Ve=0,b="not";else if(b=="smart"&&(Ve=R.mode.indent(F,ee.text.slice(ye.length),ee.text),Ve==Ot||Ve>150)){if(!S)return;b="prev"}b=="prev"?g>R.first?Ve=Ze(Hr(R,g-1).text,null,z):Ve=0:b=="add"?Ve=ce+A.options.indentUnit:b=="subtract"?Ve=ce-A.options.indentUnit:typeof b=="number"&&(Ve=ce+b),Ve=Math.max(0,Ve);var qe="",ut=0;if(A.options.indentWithTabs)for(var ot=Math.floor(Ve/z);ot;--ot)ut+=z,qe+="	";if(ut<Ve&&(qe+=Nt(Ve-ut)),qe!=ye)return $l(R,qe,Tt(g,0),Tt(g,ye.length),"+input"),ee.stateAfter=null,!0;for(var Lt=0;Lt<R.sel.ranges.length;Lt++){var zt=R.sel.ranges[Lt];if(zt.head.line==g&&zt.head.ch<ye.length){var or=Tt(g,ye.length);ec(R,Lt,new be(or,or));break}}}var gA=null;function Q_(A){gA=A}function Xw(A,g,b,S,R){var F=A.doc;A.display.shift=!1,S||(S=F.sel);var z=+new Date-200,ee=R=="paste"||A.state.pasteIncoming>z,ce=Zo(g),ye=null;if(ee&&S.ranges.length>1)if(gA&&gA.text.join(`
`)==g){if(S.ranges.length%gA.text.length==0){ye=[];for(var Ve=0;Ve<gA.text.length;Ve++)ye.push(F.splitLines(gA.text[Ve]))}}else ce.length==S.ranges.length&&A.options.pasteLinesPerSelection&&(ye=Yt(ce,function(Ar){return[Ar]}));for(var qe=A.curOp.updateInput,ut=S.ranges.length-1;ut>=0;ut--){var ot=S.ranges[ut],Lt=ot.from(),zt=ot.to();ot.empty()&&(b&&b>0?Lt=Tt(Lt.line,Lt.ch-b):A.state.overwrite&&!ee?zt=Tt(zt.line,Math.min(Hr(F,zt.line).text.length,zt.ch+It(ce).length)):ee&&gA&&gA.lineWise&&gA.text.join(`
`)==ce.join(`
`)&&(Lt=zt=Tt(Lt.line,0)));var or={from:Lt,to:zt,text:ye?ye[ut%ye.length]:ce,origin:R||(ee?"paste":A.state.cutIncoming>z?"cut":"+input")};Tf(A.doc,or),Gt(A,"inputRead",A,or)}g&&!ee&&H_(A,g),Yh(A),A.curOp.updateInput<2&&(A.curOp.updateInput=qe),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function SR(A,g){var b=A.clipboardData&&A.clipboardData.getData("Text");if(b)return A.preventDefault(),!g.isReadOnly()&&!g.options.disableInput&&g.hasFocus()&&Za(g,function(){return Xw(g,b,0,null,"paste")}),!0}function H_(A,g){if(!(!A.options.electricChars||!A.options.smartIndent))for(var b=A.doc.sel,S=b.ranges.length-1;S>=0;S--){var R=b.ranges[S];if(!(R.head.ch>100||S&&b.ranges[S-1].head.line==R.head.line)){var F=A.getModeAt(R.head),z=!1;if(F.electricChars){for(var ee=0;ee<F.electricChars.length;ee++)if(g.indexOf(F.electricChars.charAt(ee))>-1){z=V0(A,R.head.line,"smart");break}}else F.electricInput&&F.electricInput.test(Hr(A.doc,R.head.line).text.slice(0,R.head.ch))&&(z=V0(A,R.head.line,"smart"));z&&Gt(A,"electricInput",A,R.head.line)}}}function bR(A){for(var g=[],b=[],S=0;S<A.doc.sel.ranges.length;S++){var R=A.doc.sel.ranges[S].head.line,F={anchor:Tt(R,0),head:Tt(R+1,0)};b.push(F),g.push(A.getRange(F.anchor,F.head))}return{text:g,ranges:b}}function Jw(A,g,b,S){A.setAttribute("autocorrect",b?"on":"off"),A.setAttribute("autocapitalize",S?"on":"off"),A.setAttribute("spellcheck",!!g)}function CR(){var A=se("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),g=se("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return w?A.style.width="1000px":A.setAttribute("wrap","off"),D&&(A.style.border="1px solid black"),g}function $k(A){var g=A.optionHandlers,b=A.helpers={};A.prototype={constructor:A,focus:function(){Qe(this).focus(),this.display.input.focus()},setOption:function(S,R){var F=this.options,z=F[S];F[S]==R&&S!="mode"||(F[S]=R,g.hasOwnProperty(S)&&us(this,g[S])(this,R,z),ti(this,"optionChange",this,S))},getOption:function(S){return this.options[S]},getDoc:function(){return this.doc},addKeyMap:function(S,R){this.state.keyMaps[R?"push":"unshift"](ql(S))},removeKeyMap:function(S){for(var R=this.state.keyMaps,F=0;F<R.length;++F)if(R[F]==S||R[F].name==S)return R.splice(F,1),!0},addOverlay:da(function(S,R){var F=S.token?S:A.getMode(this.options,S);if(F.startState)throw new Error("Overlays may not be stateful.");Bt(this.state.overlays,{mode:F,modeSpec:S,opaque:R&&R.opaque,priority:R&&R.priority||0},function(z){return z.priority}),this.state.modeGen++,li(this)}),removeOverlay:da(function(S){for(var R=this.state.overlays,F=0;F<R.length;++F){var z=R[F].modeSpec;if(z==S||typeof S=="string"&&z.name==S){R.splice(F,1),this.state.modeGen++,li(this);return}}}),indentLine:da(function(S,R,F){typeof R!="string"&&typeof R!="number"&&(R==null?R=this.options.smartIndent?"smart":"prev":R=R?"add":"subtract"),Ut(this.doc,S)&&V0(this,S,R,F)}),indentSelection:da(function(S){for(var R=this.doc.sel.ranges,F=-1,z=0;z<R.length;z++){var ee=R[z];if(ee.empty())ee.head.line>F&&(V0(this,ee.head.line,S,!0),F=ee.head.line,z==this.doc.sel.primIndex&&Yh(this));else{var ce=ee.from(),ye=ee.to(),Ve=Math.max(F,ce.line);F=Math.min(this.lastLine(),ye.line-(ye.ch?0:1))+1;for(var qe=Ve;qe<F;++qe)V0(this,qe,S);var ut=this.doc.sel.ranges;ce.ch==0&&R.length==ut.length&&ut[z].from().ch>0&&ec(this.doc,z,new be(ce,ut[z].to()),Ft)}}}),getTokenAt:function(S,R){return lu(this,S,R)},getLineTokens:function(S,R){return lu(this,Tt(S),R,!0)},getTokenTypeAt:function(S){S=qr(this.doc,S);var R=cg(this,Hr(this.doc,S.line)),F=0,z=(R.length-1)/2,ee=S.ch,ce;if(ee==0)ce=R[2];else for(;;){var ye=F+z>>1;if((ye?R[ye*2-1]:0)>=ee)z=ye;else if(R[ye*2+1]<ee)F=ye+1;else{ce=R[ye*2+2];break}}var Ve=ce?ce.indexOf("overlay "):-1;return Ve<0?ce:Ve==0?null:ce.slice(0,Ve-1)},getModeAt:function(S){var R=this.doc.mode;return R.innerMode?A.innerMode(R,this.getTokenAt(S).state).mode:R},getHelper:function(S,R){return this.getHelpers(S,R)[0]},getHelpers:function(S,R){var F=[];if(!b.hasOwnProperty(R))return F;var z=b[R],ee=this.getModeAt(S);if(typeof ee[R]=="string")z[ee[R]]&&F.push(z[ee[R]]);else if(ee[R])for(var ce=0;ce<ee[R].length;ce++){var ye=z[ee[R][ce]];ye&&F.push(ye)}else ee.helperType&&z[ee.helperType]?F.push(z[ee.helperType]):z[ee.name]&&F.push(z[ee.name]);for(var Ve=0;Ve<z._global.length;Ve++){var qe=z._global[Ve];qe.pred(ee,this)&&at(F,qe.val)==-1&&F.push(qe.val)}return F},getStateAfter:function(S,R){var F=this.doc;return S=JA(F,S??F.first+F.size-1),eA(this,S+1,R).state},cursorCoords:function(S,R){var F,z=this.doc.sel.primary();return S==null?F=z.head:typeof S=="object"?F=qr(this.doc,S):F=S?z.from():z.to(),Ri(this,F,R||"page")},charCoords:function(S,R){return pl(this,qr(this.doc,S),R||"page")},coordsChar:function(S,R){return S=gf(this,S,R||"page"),_c(this,S.left,S.top)},lineAtHeight:function(S,R){return S=gf(this,{top:S,left:0},R||"page").top,Ge(this.doc,S+this.display.viewOffset)},heightAtLine:function(S,R,F){var z=!1,ee;if(typeof S=="number"){var ce=this.doc.first+this.doc.size-1;S<this.doc.first?S=this.doc.first:S>ce&&(S=ce,z=!0),ee=Hr(this.doc,S)}else ee=S;return hl(this,ee,{top:0,left:0},R||"page",F||z).top+(z?this.doc.height-qa(ee):0)},defaultTextHeight:function(){return _t(this.display)},defaultCharWidth:function(){return gl(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(S,R,F,z,ee){var ce=this.display;S=Ri(this,qr(this.doc,S));var ye=S.bottom,Ve=S.left;if(R.style.position="absolute",R.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(R),ce.sizer.appendChild(R),z=="over")ye=S.top;else if(z=="above"||z=="near"){var qe=Math.max(ce.wrapper.clientHeight,this.doc.height),ut=Math.max(ce.sizer.clientWidth,ce.lineSpace.clientWidth);(z=="above"||S.bottom+R.offsetHeight>qe)&&S.top>R.offsetHeight?ye=S.top-R.offsetHeight:S.bottom+R.offsetHeight<=qe&&(ye=S.bottom),Ve+R.offsetWidth>ut&&(Ve=ut-R.offsetWidth)}R.style.top=ye+"px",R.style.left=R.style.right="",ee=="right"?(Ve=ce.sizer.clientWidth-R.offsetWidth,R.style.right="0px"):(ee=="left"?Ve=0:ee=="middle"&&(Ve=(ce.sizer.clientWidth-R.offsetWidth)/2),R.style.left=Ve+"px"),F&&jw(this,{left:Ve,top:ye,right:Ve+R.offsetWidth,bottom:ye+R.offsetHeight})},triggerOnKeyDown:da(qw),triggerOnKeyPress:da(x_),triggerOnKeyUp:cp,triggerOnMouseDown:da(gR),execCommand:function(S){if(sp.hasOwnProperty(S))return sp[S].call(null,this)},triggerElectric:da(function(S){H_(this,S)}),findPosH:function(S,R,F,z){var ee=1;R<0&&(ee=-1,R=-R);for(var ce=qr(this.doc,S),ye=0;ye<R&&(ce=Zw(this.doc,ce,ee,F,z),!ce.hitSide);++ye);return ce},moveH:da(function(S,R){var F=this;this.extendSelectionsBy(function(z){return F.display.shift||F.doc.extend||z.empty()?Zw(F.doc,z.head,S,R,F.options.rtlMoveVisually):S<0?z.from():z.to()},He)}),deleteH:da(function(S,R){var F=this.doc.sel,z=this.doc;F.somethingSelected()?z.replaceSelection("",null,"+delete"):fa(this,function(ee){var ce=Zw(z,ee.head,S,R,!1);return S<0?{from:ce,to:ee.head}:{from:ee.head,to:ce}})}),findPosV:function(S,R,F,z){var ee=1,ce=z;R<0&&(ee=-1,R=-R);for(var ye=qr(this.doc,S),Ve=0;Ve<R;++Ve){var qe=Ri(this,ye,"div");if(ce==null?ce=qe.left:qe.left=ce,ye=TR(this,qe,ee,F),ye.hitSide)break}return ye},moveV:da(function(S,R){var F=this,z=this.doc,ee=[],ce=!this.display.shift&&!z.extend&&z.sel.somethingSelected();if(z.extendSelectionsBy(function(Ve){if(ce)return S<0?Ve.from():Ve.to();var qe=Ri(F,Ve.head,"div");Ve.goalColumn!=null&&(qe.left=Ve.goalColumn),ee.push(qe.left);var ut=TR(F,qe,S,R);return R=="page"&&Ve==z.sel.primary()&&Dm(F,pl(F,ut,"div").top-qe.top),ut},He),ee.length)for(var ye=0;ye<z.sel.ranges.length;ye++)z.sel.ranges[ye].goalColumn=ee[ye]}),findWordAt:function(S){var R=this.doc,F=Hr(R,S.line).text,z=S.ch,ee=S.ch;if(F){var ce=this.getHelper(S,"wordChars");(S.sticky=="before"||ee==F.length)&&z?--z:++ee;for(var ye=F.charAt(z),Ve=Kt(ye,ce)?function(qe){return Kt(qe,ce)}:/\s/.test(ye)?function(qe){return/\s/.test(qe)}:function(qe){return!/\s/.test(qe)&&!Kt(qe)};z>0&&Ve(F.charAt(z-1));)--z;for(;ee<F.length&&Ve(F.charAt(ee));)++ee}return new be(Tt(S.line,z),Tt(S.line,ee))},toggleOverwrite:function(S){S!=null&&S==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ke(this.display.cursorDiv,"CodeMirror-overwrite"):le(this.display.cursorDiv,"CodeMirror-overwrite"),ti(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ke(Ue(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:da(function(S,R){hg(this,S,R)}),getScrollInfo:function(){var S=this.display.scroller;return{left:S.scrollLeft,top:S.scrollTop,height:S.scrollHeight-vc(this)-this.display.barHeight,width:S.scrollWidth-vc(this)-this.display.barWidth,clientHeight:bs(this),clientWidth:Po(this)}},scrollIntoView:da(function(S,R){S==null?(S={from:this.doc.sel.primary().head,to:null},R==null&&(R=this.options.cursorScrollMargin)):typeof S=="number"?S={from:Tt(S,0),to:null}:S.from==null&&(S={from:S,to:null}),S.to||(S.to=S.from),S.margin=R||0,S.from.line!=null?I0(this,S):O0(this,S.from,S.to,S.margin)}),setSize:da(function(S,R){var F=this,z=function(ce){return typeof ce=="number"||/^\d+$/.test(String(ce))?ce+"px":ce};S!=null&&(this.display.wrapper.style.width=z(S)),R!=null&&(this.display.wrapper.style.height=z(R)),this.options.lineWrapping&&cd(this);var ee=this.display.viewFrom;this.doc.iter(ee,this.display.viewTo,function(ce){if(ce.widgets){for(var ye=0;ye<ce.widgets.length;ye++)if(ce.widgets[ye].noHScroll){io(F,ee,"widget");break}}++ee}),this.curOp.forceUpdate=!0,ti(this,"refresh",this)}),operation:function(S){return Za(this,S)},startOperation:function(){return ua(this)},endOperation:function(){return Aa(this)},refresh:da(function(){var S=this.display.cachedTextHeight;li(this),this.curOp.forceUpdate=!0,fo(this),hg(this,this.doc.scrollLeft,this.doc.scrollTop),k0(this.display),(S==null||Math.abs(S-_t(this.display))>.5||this.options.lineWrapping)&&Xa(this),ti(this,"refresh",this)}),swapDoc:da(function(S){var R=this.doc;return R.cm=null,this.state.selectingText&&this.state.selectingText(),$t(this,S),fo(this),this.display.input.reset(),hg(this,S.scrollLeft,S.scrollTop),this.curOp.forceScroll=!0,Gt(this,"swapDoc",this,R),R}),phrase:function(S){var R=this.options.phrases;return R&&Object.prototype.hasOwnProperty.call(R,S)?R[S]:S},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},wi(A),A.registerHelper=function(S,R,F){b.hasOwnProperty(S)||(b[S]=A[S]={_global:[]}),b[S][R]=F},A.registerGlobalHelper=function(S,R,F,z){A.registerHelper(S,R,z),b[S]._global.push({pred:F,val:z})}}function Zw(A,g,b,S,R){var F=g,z=b,ee=Hr(A,g.line),ce=R&&A.direction=="rtl"?-b:b;function ye(){var Er=g.line+ce;return Er<A.first||Er>=A.first+A.size?!1:(g=new Tt(Er,g.ch,g.sticky),ee=Hr(A,Er))}function Ve(Er){var dr;if(S=="codepoint"){var Nr=ee.text.charCodeAt(g.ch+(b>0?0:-1));if(isNaN(Nr))dr=null;else{var an=b>0?Nr>=55296&&Nr<56320:Nr>=56320&&Nr<57343;dr=new Tt(g.line,Math.max(0,Math.min(ee.text.length,g.ch+b*(an?2:1))),-b)}}else R?dr=Km(A.cm,ee,g,b):dr=Yl(ee,g,b);if(dr==null)if(!Er&&ye())g=op(R,A.cm,ee,g.line,ce);else return!1;else g=dr;return!0}if(S=="char"||S=="codepoint")Ve();else if(S=="column")Ve(!0);else if(S=="word"||S=="group")for(var qe=null,ut=S=="group",ot=A.cm&&A.cm.getHelper(g,"wordChars"),Lt=!0;!(b<0&&!Ve(!Lt));Lt=!1){var zt=ee.text.charAt(g.ch)||`
`,or=Kt(zt,ot)?"w":ut&&zt==`
`?"n":!ut||/\s/.test(zt)?null:"p";if(ut&&!Lt&&!or&&(or="s"),qe&&qe!=or){b<0&&(b=1,Ve(),g.sticky="after");break}if(or&&(qe=or),b>0&&!Ve(!Lt))break}var Ar=Eu(A,g,F,z,!0);return ri(F,Ar)&&(Ar.hitSide=!0),Ar}function TR(A,g,b,S){var R=A.doc,F=g.left,z;if(S=="page"){var ee=Math.min(A.display.wrapper.clientHeight,Qe(A).innerHeight||R(A).documentElement.clientHeight),ce=Math.max(ee-.5*_t(A.display),3);z=(b>0?g.bottom:g.top)+b*ce}else S=="line"&&(z=b>0?g.bottom+3:g.top-3);for(var ye;ye=_c(A,F,z),!!ye.outside;){if(b<0?z<=0:z>=R.height){ye.hitSide=!0;break}z+=b*5}return ye}var Qi=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new pt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Qi.prototype.init=function(A){var g=this,b=this,S=b.cm,R=b.div=A.lineDiv;R.contentEditable=!0,Jw(R,S.options.spellcheck,S.options.autocorrect,S.options.autocapitalize);function F(ee){for(var ce=ee.target;ce;ce=ce.parentNode){if(ce==R)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ce.className))break}return!1}Sr(R,"paste",function(ee){!F(ee)||dn(S,ee)||SR(ee,S)||E<=11&&setTimeout(us(S,function(){return g.updateFromDOM()}),20)}),Sr(R,"compositionstart",function(ee){g.composing={data:ee.data,done:!1}}),Sr(R,"compositionupdate",function(ee){g.composing||(g.composing={data:ee.data,done:!1})}),Sr(R,"compositionend",function(ee){g.composing&&(ee.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)}),Sr(R,"touchstart",function(){return b.forceCompositionEnd()}),Sr(R,"input",function(){g.composing||g.readFromDOMSoon()});function z(ee){if(!(!F(ee)||dn(S,ee))){if(S.somethingSelected())Q_({lineWise:!1,text:S.getSelections()}),ee.type=="cut"&&S.replaceSelection("",null,"cut");else if(S.options.lineWiseCopyCut){var ce=bR(S);Q_({lineWise:!0,text:ce.text}),ee.type=="cut"&&S.operation(function(){S.setSelections(ce.ranges,0,Ft),S.replaceSelection("",null,"cut")})}else return;if(ee.clipboardData){ee.clipboardData.clearData();var ye=gA.text.join(`
`);if(ee.clipboardData.setData("Text",ye),ee.clipboardData.getData("Text")==ye){ee.preventDefault();return}}var Ve=CR(),qe=Ve.firstChild;Jw(qe),S.display.lineSpace.insertBefore(Ve,S.display.lineSpace.firstChild),qe.value=gA.text.join(`
`);var ut=ke(Fe(R));ve(qe),setTimeout(function(){S.display.lineSpace.removeChild(Ve),ut.focus(),ut==R&&b.showPrimarySelection()},50)}}Sr(R,"copy",z),Sr(R,"cut",z)},Qi.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},Qi.prototype.prepareSelection=function(){var A=wf(this.cm,!1);return A.focus=ke(Fe(this.div))==this.div,A},Qi.prototype.showSelection=function(A,g){!A||!this.cm.display.view.length||((A.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(A))},Qi.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qi.prototype.showPrimarySelection=function(){var A=this.getSelection(),g=this.cm,b=g.doc.sel.primary(),S=b.from(),R=b.to();if(g.display.viewTo==g.display.viewFrom||S.line>=g.display.viewTo||R.line<g.display.viewFrom){A.removeAllRanges();return}var F=zm(g,A.anchorNode,A.anchorOffset),z=zm(g,A.focusNode,A.focusOffset);if(!(F&&!F.bad&&z&&!z.bad&&lr(Na(F,z),S)==0&&lr(Bn(F,z),R)==0)){var ee=g.display.view,ce=S.line>=g.display.viewFrom&&eS(g,S)||{node:ee[0].measure.map[2],offset:0},ye=R.line<g.display.viewTo&&eS(g,R);if(!ye){var Ve=ee[ee.length-1].measure,qe=Ve.maps?Ve.maps[Ve.maps.length-1]:Ve.map;ye={node:qe[qe.length-1],offset:qe[qe.length-2]-qe[qe.length-3]}}if(!ce||!ye){A.removeAllRanges();return}var ut=A.rangeCount&&A.getRangeAt(0),ot;try{ot=Me(ce.node,ce.offset,ye.offset,ye.node)}catch{}ot&&(!c&&g.state.focused?(A.collapse(ce.node,ce.offset),ot.collapsed||(A.removeAllRanges(),A.addRange(ot))):(A.removeAllRanges(),A.addRange(ot)),ut&&A.anchorNode==null?A.addRange(ut):c&&this.startGracePeriod()),this.rememberSelection()}},Qi.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},Qi.prototype.showMultipleSelections=function(A){ge(this.cm.display.cursorDiv,A.cursors),ge(this.cm.display.selectionDiv,A.selection)},Qi.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},Qi.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var g=A.getRangeAt(0).commonAncestorContainer;return Be(this.div,g)},Qi.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ke(Fe(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qi.prototype.blur=function(){this.div.blur()},Qi.prototype.getField=function(){return this.div},Qi.prototype.supportsTouch=function(){return!0},Qi.prototype.receivedFocus=function(){var A=this,g=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):Za(this.cm,function(){return g.cm.curOp.selectionChanged=!0});function b(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,b))}this.polling.set(this.cm.options.pollInterval,b)},Qi.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},Qi.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),g=this.cm;if(V&&N&&this.cm.display.gutterSpecs.length&&zk(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var b=zm(g,A.anchorNode,A.anchorOffset),S=zm(g,A.focusNode,A.focusOffset);b&&S&&Za(g,function(){Ii(g.doc,Ie(b,S),Ft),(b.bad||S.bad)&&(g.curOp.selectionChanged=!0)})}}},Qi.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,g=A.display,b=A.doc.sel.primary(),S=b.from(),R=b.to();if(S.ch==0&&S.line>A.firstLine()&&(S=Tt(S.line-1,Hr(A.doc,S.line-1).length)),R.ch==Hr(A.doc,R.line).text.length&&R.line<A.lastLine()&&(R=Tt(R.line+1,0)),S.line<g.viewFrom||R.line>g.viewTo-1)return!1;var F,z,ee;S.line==g.viewFrom||(F=vi(A,S.line))==0?(z=Ce(g.view[0].line),ee=g.view[0].node):(z=Ce(g.view[F].line),ee=g.view[F-1].node.nextSibling);var ce=vi(A,R.line),ye,Ve;if(ce==g.view.length-1?(ye=g.viewTo-1,Ve=g.lineDiv.lastChild):(ye=Ce(g.view[ce+1].line)-1,Ve=g.view[ce+1].node.previousSibling),!ee)return!1;for(var qe=A.doc.splitLines(j_(A,ee,Ve,z,ye)),ut=Vc(A.doc,Tt(z,0),Tt(ye,Hr(A.doc,ye).text.length));qe.length>1&&ut.length>1;)if(It(qe)==It(ut))qe.pop(),ut.pop(),ye--;else if(qe[0]==ut[0])qe.shift(),ut.shift(),z++;else break;for(var ot=0,Lt=0,zt=qe[0],or=ut[0],Ar=Math.min(zt.length,or.length);ot<Ar&&zt.charCodeAt(ot)==or.charCodeAt(ot);)++ot;for(var Er=It(qe),dr=It(ut),Nr=Math.min(Er.length-(qe.length==1?ot:0),dr.length-(ut.length==1?ot:0));Lt<Nr&&Er.charCodeAt(Er.length-Lt-1)==dr.charCodeAt(dr.length-Lt-1);)++Lt;if(qe.length==1&&ut.length==1&&z==S.line)for(;ot&&ot>S.ch&&Er.charCodeAt(Er.length-Lt-1)==dr.charCodeAt(dr.length-Lt-1);)ot--,Lt++;qe[qe.length-1]=Er.slice(0,Er.length-Lt).replace(/^\u200b+/,""),qe[0]=qe[0].slice(ot).replace(/\u200b+$/,"");var an=Tt(z,ot),Zr=Tt(ye,ut.length?It(ut).length-Lt:0);if(qe.length>1||qe[0]||lr(an,Zr))return $l(A.doc,qe,an,Zr,"+input"),!0},Qi.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qi.prototype.reset=function(){this.forceCompositionEnd()},Qi.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qi.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},Qi.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&Za(this.cm,function(){return li(A.cm)})},Qi.prototype.setUneditable=function(A){A.contentEditable="false"},Qi.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||us(this.cm,Xw)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},Qi.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},Qi.prototype.onContextMenu=function(){},Qi.prototype.resetPosition=function(){},Qi.prototype.needsContentAttribute=!0;function eS(A,g){var b=La(A,g.line);if(!b||b.hidden)return null;var S=Hr(A.doc,g.line),R=df(b,S,g.line),F=Tr(S,A.doc.direction),z="left";if(F){var ee=sr(F,g.ch);z=ee%2?"right":"left"}var ce=Kc(R.map,g.ch,z);return ce.offset=ce.collapse=="right"?ce.end:ce.start,ce}function zk(A){for(var g=A;g;g=g.parentNode)if(/CodeMirror-gutter-wrapper/.test(g.className))return!0;return!1}function $m(A,g){return g&&(A.bad=!0),A}function j_(A,g,b,S,R){var F="",z=!1,ee=A.doc.lineSeparator(),ce=!1;function ye(ot){return function(Lt){return Lt.id==ot}}function Ve(){z&&(F+=ee,ce&&(F+=ee),z=ce=!1)}function qe(ot){ot&&(Ve(),F+=ot)}function ut(ot){if(ot.nodeType==1){var Lt=ot.getAttribute("cm-text");if(Lt){qe(Lt);return}var zt=ot.getAttribute("cm-marker"),or;if(zt){var Ar=A.findMarks(Tt(S,0),Tt(R+1,0),ye(+zt));Ar.length&&(or=Ar[0].find(0))&&qe(Vc(A.doc,or.from,or.to).join(ee));return}if(ot.getAttribute("contenteditable")=="false")return;var Er=/^(pre|div|p|li|table|br)$/i.test(ot.nodeName);if(!/^br$/i.test(ot.nodeName)&&ot.textContent.length==0)return;Er&&Ve();for(var dr=0;dr<ot.childNodes.length;dr++)ut(ot.childNodes[dr]);/^(pre|p)$/i.test(ot.nodeName)&&(ce=!0),Er&&(z=!0)}else ot.nodeType==3&&qe(ot.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ut(g),g!=b;)g=g.nextSibling,ce=!1;return F}function zm(A,g,b){var S;if(g==A.display.lineDiv){if(S=A.display.lineDiv.childNodes[b],!S)return $m(A.clipPos(Tt(A.display.viewTo-1)),!0);g=null,b=0}else for(S=g;;S=S.parentNode){if(!S||S==A.display.lineDiv)return null;if(S.parentNode&&S.parentNode==A.display.lineDiv)break}for(var R=0;R<A.display.view.length;R++){var F=A.display.view[R];if(F.node==S)return RR(F,g,b)}}function RR(A,g,b){var S=A.text.firstChild,R=!1;if(!g||!Be(S,g))return $m(Tt(Ce(A.line),0),!0);if(g==S&&(R=!0,g=S.childNodes[b],b=0,!g)){var F=A.rest?It(A.rest):A.line;return $m(Tt(Ce(F),F.text.length),R)}var z=g.nodeType==3?g:null,ee=g;for(!z&&g.childNodes.length==1&&g.firstChild.nodeType==3&&(z=g.firstChild,b&&(b=z.nodeValue.length));ee.parentNode!=S;)ee=ee.parentNode;var ce=A.measure,ye=ce.maps;function Ve(or,Ar,Er){for(var dr=-1;dr<(ye?ye.length:0);dr++)for(var Nr=dr<0?ce.map:ye[dr],an=0;an<Nr.length;an+=3){var Zr=Nr[an+2];if(Zr==or||Zr==Ar){var Mn=Ce(dr<0?A.line:A.rest[dr]),oo=Nr[an]+Er;return(Er<0||Zr!=or)&&(oo=Nr[an+(Er?1:0)]),Tt(Mn,oo)}}}var qe=Ve(z,ee,b);if(qe)return $m(qe,R);for(var ut=ee.nextSibling,ot=z?z.nodeValue.length-b:0;ut;ut=ut.nextSibling){if(qe=Ve(ut,ut.firstChild,0),qe)return $m(Tt(qe.line,qe.ch-ot),R);ot+=ut.textContent.length}for(var Lt=ee.previousSibling,zt=b;Lt;Lt=Lt.previousSibling){if(qe=Ve(Lt,Lt.firstChild,-1),qe)return $m(Tt(qe.line,qe.ch+zt),R);zt+=Lt.textContent.length}}var ko=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new pt,this.hasSelection=!1,this.composing=null,this.resetting=!1};ko.prototype.init=function(A){var g=this,b=this,S=this.cm;this.createField(A);var R=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),D&&(R.style.width="0px"),Sr(R,"input",function(){m&&E>=9&&g.hasSelection&&(g.hasSelection=null),b.poll()}),Sr(R,"paste",function(z){dn(S,z)||SR(z,S)||(S.state.pasteIncoming=+new Date,b.fastPoll())});function F(z){if(!dn(S,z)){if(S.somethingSelected())Q_({lineWise:!1,text:S.getSelections()});else if(S.options.lineWiseCopyCut){var ee=bR(S);Q_({lineWise:!0,text:ee.text}),z.type=="cut"?S.setSelections(ee.ranges,null,Ft):(b.prevInput="",R.value=ee.text.join(`
`),ve(R))}else return;z.type=="cut"&&(S.state.cutIncoming=+new Date)}}Sr(R,"cut",F),Sr(R,"copy",F),Sr(A.scroller,"paste",function(z){if(!(mc(A,z)||dn(S,z))){if(!R.dispatchEvent){S.state.pasteIncoming=+new Date,b.focus();return}var ee=new Event("paste");ee.clipboardData=z.clipboardData,R.dispatchEvent(ee)}}),Sr(A.lineSpace,"selectstart",function(z){mc(A,z)||br(z)}),Sr(R,"compositionstart",function(){var z=S.getCursor("from");b.composing&&b.composing.range.clear(),b.composing={start:z,range:S.markText(z,S.getCursor("to"),{className:"CodeMirror-composing"})}}),Sr(R,"compositionend",function(){b.composing&&(b.poll(),b.composing.range.clear(),b.composing=null)})},ko.prototype.createField=function(A){this.wrapper=CR(),this.textarea=this.wrapper.firstChild;var g=this.cm.options;Jw(this.textarea,g.spellcheck,g.autocorrect,g.autocapitalize)},ko.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},ko.prototype.prepareSelection=function(){var A=this.cm,g=A.display,b=A.doc,S=wf(A);if(A.options.moveInputWithCursor){var R=Ri(A,b.sel.primary().head,"div"),F=g.wrapper.getBoundingClientRect(),z=g.lineDiv.getBoundingClientRect();S.teTop=Math.max(0,Math.min(g.wrapper.clientHeight-10,R.top+z.top-F.top)),S.teLeft=Math.max(0,Math.min(g.wrapper.clientWidth-10,R.left+z.left-F.left))}return S},ko.prototype.showSelection=function(A){var g=this.cm,b=g.display;ge(b.cursorDiv,A.cursors),ge(b.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},ko.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var g=this.cm;if(this.resetting=!0,g.somethingSelected()){this.prevInput="";var b=g.getSelection();this.textarea.value=b,g.state.focused&&ve(this.textarea),m&&E>=9&&(this.hasSelection=b)}else A||(this.prevInput=this.textarea.value="",m&&E>=9&&(this.hasSelection=null));this.resetting=!1}},ko.prototype.getField=function(){return this.textarea},ko.prototype.supportsTouch=function(){return!1},ko.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!K||ke(Fe(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},ko.prototype.blur=function(){this.textarea.blur()},ko.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ko.prototype.receivedFocus=function(){this.slowPoll()},ko.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},ko.prototype.fastPoll=function(){var A=!1,g=this;g.pollingFast=!0;function b(){var S=g.poll();!S&&!A?(A=!0,g.polling.set(60,b)):(g.pollingFast=!1,g.slowPoll())}g.polling.set(20,b)},ko.prototype.poll=function(){var A=this,g=this.cm,b=this.textarea,S=this.prevInput;if(this.contextMenuPending||this.resetting||!g.state.focused||Es(b)&&!S&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq)return!1;var R=b.value;if(R==S&&!g.somethingSelected())return!1;if(m&&E>=9&&this.hasSelection===R||J&&/[\uf700-\uf7ff]/.test(R))return g.display.input.reset(),!1;if(g.doc.sel==g.display.selForContextMenu){var F=R.charCodeAt(0);if(F==8203&&!S&&(S=""),F==8666)return this.reset(),this.cm.execCommand("undo")}for(var z=0,ee=Math.min(S.length,R.length);z<ee&&S.charCodeAt(z)==R.charCodeAt(z);)++z;return Za(g,function(){Xw(g,R.slice(z),S.length-z,null,A.composing?"*compose":null),R.length>1e3||R.indexOf(`
`)>-1?b.value=A.prevInput="":A.prevInput=R,A.composing&&(A.composing.range.clear(),A.composing.range=g.markText(A.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ko.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ko.prototype.onKeyPress=function(){m&&E>=9&&(this.hasSelection=null),this.fastPoll()},ko.prototype.onContextMenu=function(A){var g=this,b=g.cm,S=b.display,R=g.textarea;g.contextMenuPending&&g.contextMenuPending();var F=mi(b,A),z=S.scroller.scrollTop;if(!F||P)return;var ee=b.options.resetSelectionOnContextMenu;ee&&b.doc.sel.contains(F)==-1&&us(b,Ii)(b.doc,Ie(F),Ft);var ce=R.style.cssText,ye=g.wrapper.style.cssText,Ve=g.wrapper.offsetParent.getBoundingClientRect();g.wrapper.style.cssText="position: static",R.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-Ve.top-5)+"px; left: "+(A.clientX-Ve.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var qe;w&&(qe=R.ownerDocument.defaultView.scrollY),S.input.focus(),w&&R.ownerDocument.defaultView.scrollTo(null,qe),S.input.reset(),b.somethingSelected()||(R.value=g.prevInput=" "),g.contextMenuPending=ot,S.selForContextMenu=b.doc.sel,clearTimeout(S.detectingSelectAll);function ut(){if(R.selectionStart!=null){var zt=b.somethingSelected(),or=""+(zt?R.value:"");R.value="",R.value=or,g.prevInput=zt?"":"",R.selectionStart=1,R.selectionEnd=or.length,S.selForContextMenu=b.doc.sel}}function ot(){if(g.contextMenuPending==ot&&(g.contextMenuPending=!1,g.wrapper.style.cssText=ye,R.style.cssText=ce,m&&E<9&&S.scrollbars.setScrollTop(S.scroller.scrollTop=z),R.selectionStart!=null)){(!m||m&&E<9)&&ut();var zt=0,or=function(){S.selForContextMenu==b.doc.sel&&R.selectionStart==0&&R.selectionEnd>0&&g.prevInput==""?us(b,Co)(b):zt++<10?S.detectingSelectAll=setTimeout(or,500):(S.selForContextMenu=null,S.input.reset())};S.detectingSelectAll=setTimeout(or,200)}}if(m&&E>=9&&ut(),Y){kr(A);var Lt=function(){Ei(window,"mouseup",Lt),setTimeout(ot,20)};Sr(window,"mouseup",Lt)}else setTimeout(ot,50)},ko.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},ko.prototype.setUneditable=function(){},ko.prototype.needsContentAttribute=!1;function IR(A,g){if(g=g?et(g):{},g.value=A.value,!g.tabindex&&A.tabIndex&&(g.tabindex=A.tabIndex),!g.placeholder&&A.placeholder&&(g.placeholder=A.placeholder),g.autofocus==null){var b=ke(Fe(A));g.autofocus=b==A||A.getAttribute("autofocus")!=null&&b==document.body}function S(){A.value=ee.getValue()}var R;if(A.form&&(Sr(A.form,"submit",S),!g.leaveSubmitMethodAlone)){var F=A.form;R=F.submit;try{var z=F.submit=function(){S(),F.submit=R,F.submit(),F.submit=z}}catch{}}g.finishInit=function(ce){ce.save=S,ce.getTextArea=function(){return A},ce.toTextArea=function(){ce.toTextArea=isNaN,S(),A.parentNode.removeChild(ce.getWrapperElement()),A.style.display="",A.form&&(Ei(A.form,"submit",S),!g.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=R))}},A.style.display="none";var ee=To(function(ce){return A.parentNode.insertBefore(ce,A.nextSibling)},g);return ee}function qk(A){A.off=Ei,A.on=Sr,A.wheelEventPixels=$,A.Doc=Is,A.splitLines=Zo,A.countColumn=Ze,A.findColumn=vr,A.isWordChar=Xr,A.Pass=Ot,A.signal=ti,A.Line=uu,A.changeEnd=Pe,A.scrollbarModel=w_,A.Pos=Tt,A.cmpPos=lr,A.modes=js,A.mimeModes=ts,A.resolveMode=Oa,A.getMode=Kl,A.modeExtensions=Fc,A.extendMode=Ks,A.copyState=Al,A.startState=Di,A.innerMode=sf,A.commands=sp,A.keyMap=hA,A.keyName=Pf,A.isModifierKey=Lf,A.lookupKey=Bf,A.normalizeKeyMap=jm,A.StringStream=no,A.SharedTextMarker=_g,A.TextMarker=Su,A.LineWidget=dA,A.e_preventDefault=br,A.e_stopPropagation=Pi,A.e_stop=kr,A.addClass=Ke,A.contains=Be,A.rmClass=le,A.keyNames=zl}Kk(To),$k(To);var OR="iter insert remove copy getEditor constructor".split(" ");for(var Ig in Is.prototype)Is.prototype.hasOwnProperty(Ig)&&at(OR,Ig)<0&&(To.prototype[Ig]=function(A){return function(){return A.apply(this.doc,arguments)}}(Is.prototype[Ig]));return wi(Is),To.inputStyles={textarea:ko,contenteditable:Qi},To.defineMode=function(A){!To.defaults.mode&&A!="null"&&(To.defaults.mode=A),ws.apply(this,arguments)},To.defineMIME=Mc,To.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),To.defineMIME("text/plain","null"),To.defineExtension=function(A,g){To.prototype[A]=g},To.defineDocExtension=function(A,g){Is.prototype[A]=g},To.fromTextArea=IR,qk(To),To.version="5.65.19",To})}(Q3)),Q3.exports}var mAt=AR();const vAt=$i(mAt);(function(e,t){(function(i){i(AR())})(function(i){i.defineMode("javascript",function(s,c){var u=s.indentUnit,f=c.statementIndent,p=c.jsonld,m=c.json||p,E=c.trackScope!==!1,w=c.typescript,T=c.wordCharacters||/[\w$\xa1-\uffff]/,N=function(){function Ce(Lo){return{type:Lo,style:"keyword"}}var Ge=Ce("keyword a"),Ut=Ce("keyword b"),Wt=Ce("keyword c"),Tt=Ce("keyword d"),lr=Ce("operator"),ri={type:"atom",style:"atom"};return{if:Ce("if"),while:Ge,with:Ge,else:Ut,do:Ut,try:Ut,finally:Ut,return:Tt,break:Tt,continue:Tt,new:Ce("new"),delete:Wt,void:Wt,throw:Wt,debugger:Ce("debugger"),var:Ce("var"),const:Ce("var"),let:Ce("var"),function:Ce("function"),catch:Ce("catch"),for:Ce("for"),switch:Ce("switch"),case:Ce("case"),default:Ce("default"),in:lr,typeof:lr,instanceof:lr,true:ri,false:ri,null:ri,undefined:ri,NaN:ri,Infinity:ri,this:Ce("this"),class:Ce("class"),super:Ce("atom"),yield:Wt,export:Ce("export"),import:Ce("import"),extends:Wt,await:Wt}}(),O=/[+\-*&%=<>!?|~^@]/,P=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function M(Ce){for(var Ge=!1,Ut,Wt=!1;(Ut=Ce.next())!=null;){if(!Ge){if(Ut=="/"&&!Wt)return;Ut=="["?Wt=!0:Wt&&Ut=="]"&&(Wt=!1)}Ge=!Ge&&Ut=="\\"}}var Q,k;function D(Ce,Ge,Ut){return Q=Ce,k=Ut,Ge}function V(Ce,Ge){var Ut=Ce.next();if(Ut=='"'||Ut=="'")return Ge.tokenize=K(Ut),Ge.tokenize(Ce,Ge);if(Ut=="."&&Ce.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return D("number","number");if(Ut=="."&&Ce.match(".."))return D("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ut))return D(Ut);if(Ut=="="&&Ce.eat(">"))return D("=>","operator");if(Ut=="0"&&Ce.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return D("number","number");if(/\d/.test(Ut))return Ce.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),D("number","number");if(Ut=="/")return Ce.eat("*")?(Ge.tokenize=J,J(Ce,Ge)):Ce.eat("/")?(Ce.skipToEnd(),D("comment","comment")):Ws(Ce,Ge,1)?(M(Ce),Ce.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),D("regexp","string-2")):(Ce.eat("="),D("operator","operator",Ce.current()));if(Ut=="`")return Ge.tokenize=ie,ie(Ce,Ge);if(Ut=="#"&&Ce.peek()=="!")return Ce.skipToEnd(),D("meta","meta");if(Ut=="#"&&Ce.eatWhile(T))return D("variable","property");if(Ut=="<"&&Ce.match("!--")||Ut=="-"&&Ce.match("->")&&!/\S/.test(Ce.string.slice(0,Ce.start)))return Ce.skipToEnd(),D("comment","comment");if(O.test(Ut))return(Ut!=">"||!Ge.lexical||Ge.lexical.type!=">")&&(Ce.eat("=")?(Ut=="!"||Ut=="=")&&Ce.eat("="):/[<>*+\-|&?]/.test(Ut)&&(Ce.eat(Ut),Ut==">"&&Ce.eat(Ut))),Ut=="?"&&Ce.eat(".")?D("."):D("operator","operator",Ce.current());if(T.test(Ut)){Ce.eatWhile(T);var Wt=Ce.current();if(Ge.lastType!="."){if(N.propertyIsEnumerable(Wt)){var Tt=N[Wt];return D(Tt.type,Tt.style,Wt)}if(Wt=="async"&&Ce.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return D("async","keyword",Wt)}return D("variable","variable",Wt)}}function K(Ce){return function(Ge,Ut){var Wt=!1,Tt;if(p&&Ge.peek()=="@"&&Ge.match(P))return Ut.tokenize=V,D("jsonld-keyword","meta");for(;(Tt=Ge.next())!=null&&!(Tt==Ce&&!Wt);)Wt=!Wt&&Tt=="\\";return Wt||(Ut.tokenize=V),D("string","string")}}function J(Ce,Ge){for(var Ut=!1,Wt;Wt=Ce.next();){if(Wt=="/"&&Ut){Ge.tokenize=V;break}Ut=Wt=="*"}return D("comment","comment")}function ie(Ce,Ge){for(var Ut=!1,Wt;(Wt=Ce.next())!=null;){if(!Ut&&(Wt=="`"||Wt=="$"&&Ce.eat("{"))){Ge.tokenize=V;break}Ut=!Ut&&Wt=="\\"}return D("quasi","string-2",Ce.current())}var fe="([{}])";function Z(Ce,Ge){Ge.fatArrowAt&&(Ge.fatArrowAt=null);var Ut=Ce.string.indexOf("=>",Ce.start);if(!(Ut<0)){if(w){var Wt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ce.string.slice(Ce.start,Ut));Wt&&(Ut=Wt.index)}for(var Tt=0,lr=!1,ri=Ut-1;ri>=0;--ri){var Lo=Ce.string.charAt(ri),Bn=fe.indexOf(Lo);if(Bn>=0&&Bn<3){if(!Tt){++ri;break}if(--Tt==0){Lo=="("&&(lr=!0);break}}else if(Bn>=3&&Bn<6)++Tt;else if(T.test(Lo))lr=!0;else if(/["'\/`]/.test(Lo))for(;;--ri){if(ri==0)return;var Na=Ce.string.charAt(ri-1);if(Na==Lo&&Ce.string.charAt(ri-2)!="\\"){ri--;break}}else if(lr&&!Tt){++ri;break}}lr&&!Tt&&(Ge.fatArrowAt=ri)}}var pe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Y(Ce,Ge,Ut,Wt,Tt,lr){this.indented=Ce,this.column=Ge,this.type=Ut,this.prev=Tt,this.info=lr,Wt!=null&&(this.align=Wt)}function te(Ce,Ge){if(!E)return!1;for(var Ut=Ce.localVars;Ut;Ut=Ut.next)if(Ut.name==Ge)return!0;for(var Wt=Ce.context;Wt;Wt=Wt.prev)for(var Ut=Wt.vars;Ut;Ut=Ut.next)if(Ut.name==Ge)return!0}function le(Ce,Ge,Ut,Wt,Tt){var lr=Ce.cc;for(ae.state=Ce,ae.stream=Tt,ae.marked=null,ae.cc=lr,ae.style=Ge,Ce.lexical.hasOwnProperty("align")||(Ce.lexical.align=!0);;){var ri=lr.length?lr.pop():m?at:Ze;if(ri(Ut,Wt)){for(;lr.length&&lr[lr.length-1].lex;)lr.pop()();return ae.marked?ae.marked:Ut=="variable"&&te(Ce,Wt)?"variable-2":Ge}}}var ae={state:null,column:null,marked:null,cc:null};function ge(){for(var Ce=arguments.length-1;Ce>=0;Ce--)ae.cc.push(arguments[Ce])}function se(){return ge.apply(null,arguments),!0}function xe(Ce,Ge){for(var Ut=Ge;Ut;Ut=Ut.next)if(Ut.name==Ce)return!0;return!1}function Me(Ce){var Ge=ae.state;if(ae.marked="def",!!E){if(Ge.context){if(Ge.lexical.info=="var"&&Ge.context&&Ge.context.block){var Ut=Be(Ce,Ge.context);if(Ut!=null){Ge.context=Ut;return}}else if(!xe(Ce,Ge.localVars)){Ge.localVars=new ht(Ce,Ge.localVars);return}}c.globalVars&&!xe(Ce,Ge.globalVars)&&(Ge.globalVars=new ht(Ce,Ge.globalVars))}}function Be(Ce,Ge){if(Ge)if(Ge.block){var Ut=Be(Ce,Ge.prev);return Ut?Ut==Ge.prev?Ge:new Ke(Ut,Ge.vars,!0):null}else return xe(Ce,Ge.vars)?Ge:new Ke(Ge.prev,new ht(Ce,Ge.vars),!1);else return null}function ke(Ce){return Ce=="public"||Ce=="private"||Ce=="protected"||Ce=="abstract"||Ce=="readonly"}function Ke(Ce,Ge,Ut){this.prev=Ce,this.vars=Ge,this.block=Ut}function ht(Ce,Ge){this.name=Ce,this.next=Ge}var ve=new ht("this",new ht("arguments",null));function Oe(){ae.state.context=new Ke(ae.state.context,ae.state.localVars,!1),ae.state.localVars=ve}function Ue(){ae.state.context=new Ke(ae.state.context,ae.state.localVars,!0),ae.state.localVars=null}Oe.lex=Ue.lex=!0;function Fe(){ae.state.localVars=ae.state.context.vars,ae.state.context=ae.state.context.prev}Fe.lex=!0;function Qe(Ce,Ge){var Ut=function(){var Wt=ae.state,Tt=Wt.indented;if(Wt.lexical.type=="stat")Tt=Wt.lexical.indented;else for(var lr=Wt.lexical;lr&&lr.type==")"&&lr.align;lr=lr.prev)Tt=lr.indented;Wt.lexical=new Y(Tt,ae.stream.column(),Ce,null,Wt.lexical,Ge)};return Ut.lex=!0,Ut}function We(){var Ce=ae.state;Ce.lexical.prev&&(Ce.lexical.type==")"&&(Ce.indented=Ce.lexical.indented),Ce.lexical=Ce.lexical.prev)}We.lex=!0;function et(Ce){function Ge(Ut){return Ut==Ce?se():Ce==";"||Ut=="}"||Ut==")"||Ut=="]"?ge():se(Ge)}return Ge}function Ze(Ce,Ge){return Ce=="var"?se(Qe("vardef",Ge),Pi,et(";"),We):Ce=="keyword a"?se(Qe("form"),Ot,Ze,We):Ce=="keyword b"?se(Qe("form"),Ze,We):Ce=="keyword d"?ae.stream.match(/^\s*$/,!1)?se():se(Qe("stat"),lt,et(";"),We):Ce=="debugger"?se(et(";")):Ce=="{"?se(Qe("}"),Ue,tn,We,Fe):Ce==";"?se():Ce=="if"?(ae.state.lexical.info=="else"&&ae.state.cc[ae.state.cc.length-1]==We&&ae.state.cc.pop()(),se(Qe("form"),Ot,Ze,We,ro)):Ce=="function"?se(Zo):Ce=="for"?se(Qe("form"),Ue,uo,Ze,Fe,We):Ce=="class"||w&&Ge=="interface"?(ae.marked="keyword",se(Qe("form",Ce=="class"?Ce:Ge),js,We)):Ce=="variable"?w&&Ge=="declare"?(ae.marked="keyword",se(Ze)):w&&(Ge=="module"||Ge=="enum"||Ge=="type")&&ae.stream.match(/^\s*\w/,!1)?(ae.marked="keyword",Ge=="enum"?se(Hr):Ge=="type"?se(hc,et("operator"),Tr,et(";")):se(Qe("form"),ki,et("{"),Qe("}"),tn,We,We)):w&&Ge=="namespace"?(ae.marked="keyword",se(Qe("form"),at,Ze,We)):w&&Ge=="abstract"?(ae.marked="keyword",se(Ze)):se(Qe("stat"),zr):Ce=="switch"?se(Qe("form"),Ot,et("{"),Qe("}","switch"),Ue,tn,We,We,Fe):Ce=="case"?se(at,et(":")):Ce=="default"?se(et(":")):Ce=="catch"?se(Qe("form"),Oe,pt,Ze,We,Fe):Ce=="export"?se(Qe("stat"),Oa,We):Ce=="import"?se(Qe("stat"),Fc,We):Ce=="async"?se(Ze):Ge=="@"?se(at,Ze):ge(Qe("stat"),at,et(";"),We)}function pt(Ce){if(Ce=="(")return se(es,et(")"))}function at(Ce,Ge){return Ft(Ce,Ge,!1)}function Rt(Ce,Ge){return Ft(Ce,Ge,!0)}function Ot(Ce){return Ce!="("?ge():se(Qe(")"),lt,et(")"),We)}function Ft(Ce,Ge,Ut){if(ae.state.fatArrowAt==ae.stream.start){var Wt=Ut?Yt:It;if(Ce=="(")return se(Oe,Qe(")"),er(es,")"),We,et("=>"),Wt,Fe);if(Ce=="variable")return ge(Oe,ki,et("=>"),Wt,Fe)}var Tt=Ut?vr:He;return pe.hasOwnProperty(Ce)?se(Tt):Ce=="function"?se(Zo,Tt):Ce=="class"||w&&Ge=="interface"?(ae.marked="keyword",se(Qe("form"),ul,We)):Ce=="keyword c"||Ce=="async"?se(Ut?Rt:at):Ce=="("?se(Qe(")"),lt,et(")"),We,Tt):Ce=="operator"||Ce=="spread"?se(Ut?Rt:at):Ce=="["?se(Qe("]"),no,We,Tt):Ce=="{"?vt(Kt,"}",null,Tt):Ce=="quasi"?ge(qt,Tt):Ce=="new"?se(Bt(Ut)):se()}function lt(Ce){return Ce.match(/[;\}\)\],]/)?ge():ge(at)}function He(Ce,Ge){return Ce==","?se(lt):vr(Ce,Ge,!1)}function vr(Ce,Ge,Ut){var Wt=Ut==!1?He:vr,Tt=Ut==!1?at:Rt;if(Ce=="=>")return se(Oe,Ut?Yt:It,Fe);if(Ce=="operator")return/\+\+|--/.test(Ge)||w&&Ge=="!"?se(Wt):w&&Ge=="<"&&ae.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?se(Qe(">"),er(Tr,">"),We,Wt):Ge=="?"?se(at,et(":"),Tt):se(Tt);if(Ce=="quasi")return ge(qt,Wt);if(Ce!=";"){if(Ce=="(")return vt(Rt,")","call",Wt);if(Ce==".")return se(Xr,Wt);if(Ce=="[")return se(Qe("]"),lt,et("]"),We,Wt);if(w&&Ge=="as")return ae.marked="keyword",se(Tr,Wt);if(Ce=="regexp")return ae.state.lastType=ae.marked="operator",ae.stream.backUp(ae.stream.pos-ae.stream.start-1),se(Tt)}}function qt(Ce,Ge){return Ce!="quasi"?ge():Ge.slice(Ge.length-2)!="${"?se(qt):se(lt,Nt)}function Nt(Ce){if(Ce=="}")return ae.marked="string-2",ae.state.tokenize=ie,se(qt)}function It(Ce){return Z(ae.stream,ae.state),ge(Ce=="{"?Ze:at)}function Yt(Ce){return Z(ae.stream,ae.state),ge(Ce=="{"?Ze:Rt)}function Bt(Ce){return function(Ge){return Ge=="."?se(Ce?ar:_r):Ge=="variable"&&w?se(yn,Ce?vr:He):ge(Ce?Rt:at)}}function _r(Ce,Ge){if(Ge=="target")return ae.marked="keyword",se(He)}function ar(Ce,Ge){if(Ge=="target")return ae.marked="keyword",se(vr)}function zr(Ce){return Ce==":"?se(We,Ze):ge(He,et(";"),We)}function Xr(Ce){if(Ce=="variable")return ae.marked="property",se()}function Kt(Ce,Ge){if(Ce=="async")return ae.marked="property",se(Kt);if(Ce=="variable"||ae.style=="keyword"){if(ae.marked="property",Ge=="get"||Ge=="set")return se(yr);var Ut;return w&&ae.state.fatArrowAt==ae.stream.start&&(Ut=ae.stream.match(/^\s*:\s*/,!1))&&(ae.state.fatArrowAt=ae.stream.pos+Ut[0].length),se(nr)}else{if(Ce=="number"||Ce=="string")return ae.marked=p?"property":ae.style+" property",se(nr);if(Ce=="jsonld-keyword")return se(nr);if(w&&ke(Ge))return ae.marked="keyword",se(Kt);if(Ce=="[")return se(at,Rr,et("]"),nr);if(Ce=="spread")return se(Rt,nr);if(Ge=="*")return ae.marked="keyword",se(Kt);if(Ce==":")return ge(nr)}}function yr(Ce){return Ce!="variable"?ge(nr):(ae.marked="property",se(Zo))}function nr(Ce){if(Ce==":")return se(Rt);if(Ce=="(")return ge(Zo)}function er(Ce,Ge,Ut){function Wt(Tt,lr){if(Ut?Ut.indexOf(Tt)>-1:Tt==","){var ri=ae.state.lexical;return ri.info=="call"&&(ri.pos=(ri.pos||0)+1),se(function(Lo,Bn){return Lo==Ge||Bn==Ge?ge():ge(Ce)},Wt)}return Tt==Ge||lr==Ge?se():Ut&&Ut.indexOf(";")>-1?ge(Ce):se(et(Ge))}return function(Tt,lr){return Tt==Ge||lr==Ge?se():ge(Ce,Wt)}}function vt(Ce,Ge,Ut){for(var Wt=3;Wt<arguments.length;Wt++)ae.cc.push(arguments[Wt]);return se(Qe(Ge,Ut),er(Ce,Ge),We)}function tn(Ce){return Ce=="}"?se():ge(Ze,tn)}function Rr(Ce,Ge){if(w){if(Ce==":")return se(Tr);if(Ge=="?")return se(Rr)}}function on(Ce,Ge){if(w&&(Ce==":"||Ge=="in"))return se(Tr)}function sr(Ce){if(w&&Ce==":")return ae.stream.match(/^\s*\w+\s+is\b/,!1)?se(at,Mr,Tr):se(Tr)}function Mr(Ce,Ge){if(Ge=="is")return ae.marked="keyword",se()}function Tr(Ce,Ge){if(Ge=="keyof"||Ge=="typeof"||Ge=="infer"||Ge=="readonly")return ae.marked="keyword",se(Ge=="typeof"?Rt:Tr);if(Ce=="variable"||Ge=="void")return ae.marked="type",se(Qr);if(Ge=="|"||Ge=="&")return se(Tr);if(Ce=="string"||Ce=="number"||Ce=="atom")return se(Qr);if(Ce=="[")return se(Qe("]"),er(Tr,"]",","),We,Qr);if(Ce=="{")return se(Qe("}"),Sr,We,Qr);if(Ce=="(")return se(er(dn,")"),rn,Qr);if(Ce=="<")return se(er(Tr,">"),Tr);if(Ce=="quasi")return ge(Ei,Qr)}function rn(Ce){if(Ce=="=>")return se(Tr)}function Sr(Ce){return Ce.match(/[\}\)\]]/)?se():Ce==","||Ce==";"?se(Sr):ge(ai,Sr)}function ai(Ce,Ge){if(Ce=="variable"||ae.style=="keyword")return ae.marked="property",se(ai);if(Ge=="?"||Ce=="number"||Ce=="string")return se(ai);if(Ce==":")return se(Tr);if(Ce=="[")return se(et("variable"),on,et("]"),ai);if(Ce=="(")return ge(Es,ai);if(!Ce.match(/[;\}\)\],]/))return se()}function Ei(Ce,Ge){return Ce!="quasi"?ge():Ge.slice(Ge.length-2)!="${"?se(Ei):se(Tr,ti)}function ti(Ce){if(Ce=="}")return ae.marked="string-2",ae.state.tokenize=ie,se(Ei)}function dn(Ce,Ge){return Ce=="variable"&&ae.stream.match(/^\s*[?:]/,!1)||Ge=="?"?se(dn):Ce==":"?se(Tr):Ce=="spread"?se(dn):ge(Tr)}function Qr(Ce,Ge){if(Ge=="<")return se(Qe(">"),er(Tr,">"),We,Qr);if(Ge=="|"||Ce=="."||Ge=="&")return se(Tr);if(Ce=="[")return se(Tr,et("]"),Qr);if(Ge=="extends"||Ge=="implements")return ae.marked="keyword",se(Tr);if(Ge=="?")return se(Tr,et(":"),Tr)}function yn(Ce,Ge){if(Ge=="<")return se(Qe(">"),er(Tr,">"),We,Qr)}function wi(){return ge(Tr,br)}function br(Ce,Ge){if(Ge=="=")return se(Tr)}function Pi(Ce,Ge){return Ge=="enum"?(ae.marked="keyword",se(Hr)):ge(ki,Rr,ls,_s)}function ki(Ce,Ge){if(w&&ke(Ge))return ae.marked="keyword",se(ki);if(Ce=="variable")return Me(Ge),se();if(Ce=="spread")return se(ki);if(Ce=="[")return vt($a,"]");if(Ce=="{")return vt(kr,"}")}function kr(Ce,Ge){return Ce=="variable"&&!ae.stream.match(/^\s*:/,!1)?(Me(Ge),se(ls)):(Ce=="variable"&&(ae.marked="property"),Ce=="spread"?se(ki):Ce=="}"?ge():Ce=="["?se(at,et("]"),et(":"),kr):se(et(":"),ki,ls))}function $a(){return ge(ki,ls)}function ls(Ce,Ge){if(Ge=="=")return se(Rt)}function _s(Ce){if(Ce==",")return se(Pi)}function ro(Ce,Ge){if(Ce=="keyword b"&&Ge=="else")return se(Qe("form","else"),Ze,We)}function uo(Ce,Ge){if(Ge=="await")return se(uo);if(Ce=="(")return se(Qe(")"),ys,We)}function ys(Ce){return Ce=="var"?se(Pi,Uc):Ce=="variable"?se(Uc):ge(Uc)}function Uc(Ce,Ge){return Ce==")"?se():Ce==";"?se(Uc):Ge=="in"||Ge=="of"?(ae.marked="keyword",se(at,Uc)):ge(at,Uc)}function Zo(Ce,Ge){if(Ge=="*")return ae.marked="keyword",se(Zo);if(Ce=="variable")return Me(Ge),se(Zo);if(Ce=="(")return se(Oe,Qe(")"),er(es,")"),We,sr,Ze,Fe);if(w&&Ge=="<")return se(Qe(">"),er(wi,">"),We,Zo)}function Es(Ce,Ge){if(Ge=="*")return ae.marked="keyword",se(Es);if(Ce=="variable")return Me(Ge),se(Es);if(Ce=="(")return se(Oe,Qe(")"),er(es,")"),We,sr,Fe);if(w&&Ge=="<")return se(Qe(">"),er(wi,">"),We,Es)}function hc(Ce,Ge){if(Ce=="keyword"||Ce=="variable")return ae.marked="type",se(hc);if(Ge=="<")return se(Qe(">"),er(wi,">"),We)}function es(Ce,Ge){return Ge=="@"&&se(at,es),Ce=="spread"?se(es):w&&ke(Ge)?(ae.marked="keyword",se(es)):w&&Ce=="this"?se(Rr,ls):ge(ki,Rr,ls)}function ul(Ce,Ge){return Ce=="variable"?js(Ce,Ge):ts(Ce,Ge)}function js(Ce,Ge){if(Ce=="variable")return Me(Ge),se(ts)}function ts(Ce,Ge){if(Ge=="<")return se(Qe(">"),er(wi,">"),We,ts);if(Ge=="extends"||Ge=="implements"||w&&Ce==",")return Ge=="implements"&&(ae.marked="keyword"),se(w?Tr:at,ts);if(Ce=="{")return se(Qe("}"),ws,We)}function ws(Ce,Ge){if(Ce=="async"||Ce=="variable"&&(Ge=="static"||Ge=="get"||Ge=="set"||w&&ke(Ge))&&ae.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return ae.marked="keyword",se(ws);if(Ce=="variable"||ae.style=="keyword")return ae.marked="property",se(Mc,ws);if(Ce=="number"||Ce=="string")return se(Mc,ws);if(Ce=="[")return se(at,Rr,et("]"),Mc,ws);if(Ge=="*")return ae.marked="keyword",se(ws);if(w&&Ce=="(")return ge(Es,ws);if(Ce==";"||Ce==",")return se(ws);if(Ce=="}")return se();if(Ge=="@")return se(at,ws)}function Mc(Ce,Ge){if(Ge=="!"||Ge=="?")return se(Mc);if(Ce==":")return se(Tr,ls);if(Ge=="=")return se(Rt);var Ut=ae.state.lexical.prev,Wt=Ut&&Ut.info=="interface";return ge(Wt?Es:Zo)}function Oa(Ce,Ge){return Ge=="*"?(ae.marked="keyword",se(Di,et(";"))):Ge=="default"?(ae.marked="keyword",se(at,et(";"))):Ce=="{"?se(er(Kl,"}"),Di,et(";")):ge(Ze)}function Kl(Ce,Ge){if(Ge=="as")return ae.marked="keyword",se(et("variable"));if(Ce=="variable")return ge(Rt,Kl)}function Fc(Ce){return Ce=="string"?se():Ce=="("?ge(at):Ce=="."?ge(He):ge(Ks,Al,Di)}function Ks(Ce,Ge){return Ce=="{"?vt(Ks,"}"):(Ce=="variable"&&Me(Ge),Ge=="*"&&(ae.marked="keyword"),se(sf))}function Al(Ce){if(Ce==",")return se(Ks,Al)}function sf(Ce,Ge){if(Ge=="as")return ae.marked="keyword",se(Ks)}function Di(Ce,Ge){if(Ge=="from")return ae.marked="keyword",se(at)}function no(Ce){return Ce=="]"?se():ge(er(Rt,"]"))}function Hr(){return ge(Qe("form"),ki,et("{"),Qe("}"),er(Vc,"}"),We,We)}function Vc(){return ge(ki,ls)}function af(Ce,Ge){return Ce.lastType=="operator"||Ce.lastType==","||O.test(Ge.charAt(0))||/[,.]/.test(Ge.charAt(0))}function Ws(Ce,Ge,Ut){return Ge.tokenize==V&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Ge.lastType)||Ge.lastType=="quasi"&&/\{\s*$/.test(Ce.string.slice(0,Ce.pos-(Ut||0)))}return{startState:function(Ce){var Ge={tokenize:V,lastType:"sof",cc:[],lexical:new Y((Ce||0)-u,0,"block",!1),localVars:c.localVars,context:c.localVars&&new Ke(null,null,!1),indented:Ce||0};return c.globalVars&&typeof c.globalVars=="object"&&(Ge.globalVars=c.globalVars),Ge},token:function(Ce,Ge){if(Ce.sol()&&(Ge.lexical.hasOwnProperty("align")||(Ge.lexical.align=!1),Ge.indented=Ce.indentation(),Z(Ce,Ge)),Ge.tokenize!=J&&Ce.eatSpace())return null;var Ut=Ge.tokenize(Ce,Ge);return Q=="comment"?Ut:(Ge.lastType=Q=="operator"&&(k=="++"||k=="--")?"incdec":Q,le(Ge,Ut,Q,k,Ce))},indent:function(Ce,Ge){if(Ce.tokenize==J||Ce.tokenize==ie)return i.Pass;if(Ce.tokenize!=V)return 0;var Ut=Ge&&Ge.charAt(0),Wt=Ce.lexical,Tt;if(!/^\s*else\b/.test(Ge))for(var lr=Ce.cc.length-1;lr>=0;--lr){var ri=Ce.cc[lr];if(ri==We)Wt=Wt.prev;else if(ri!=ro&&ri!=Fe)break}for(;(Wt.type=="stat"||Wt.type=="form")&&(Ut=="}"||(Tt=Ce.cc[Ce.cc.length-1])&&(Tt==He||Tt==vr)&&!/^[,\.=+\-*:?[\(]/.test(Ge));)Wt=Wt.prev;f&&Wt.type==")"&&Wt.prev.type=="stat"&&(Wt=Wt.prev);var Lo=Wt.type,Bn=Ut==Lo;return Lo=="vardef"?Wt.indented+(Ce.lastType=="operator"||Ce.lastType==","?Wt.info.length+1:0):Lo=="form"&&Ut=="{"?Wt.indented:Lo=="form"?Wt.indented+u:Lo=="stat"?Wt.indented+(af(Ce,Ge)?f||u:0):Wt.info=="switch"&&!Bn&&c.doubleIndentSwitch!=!1?Wt.indented+(/^(?:case|default)\b/.test(Ge)?u:2*u):Wt.align?Wt.column+(Bn?0:1):Wt.indented+(Bn?0:u)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:p,jsonMode:m,expressionAllowed:Ws,skipExpression:function(Ce){le(Ce,"atom","atom","true",new i.StringStream("",2,null))}}}),i.registerHelper("wordChars","javascript",/[\w$]/),i.defineMIME("text/javascript","javascript"),i.defineMIME("text/ecmascript","javascript"),i.defineMIME("application/javascript","javascript"),i.defineMIME("application/x-javascript","javascript"),i.defineMIME("application/ecmascript","javascript"),i.defineMIME("application/json",{name:"javascript",json:!0}),i.defineMIME("application/x-json",{name:"javascript",json:!0}),i.defineMIME("application/manifest+json",{name:"javascript",json:!0}),i.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),i.defineMIME("text/typescript",{name:"javascript",typescript:!0}),i.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var tae={exports:{}},rae;function _At(){return rae||(rae=1,function(e,t){(function(i){i(AR())})(function(i){var s=i.Pos;function c(D,V){return D.line-V.line||D.ch-V.ch}var u="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=u+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",p=new RegExp("<(/?)(["+u+"]["+f+"]*)","g");function m(D,V,K,J){this.line=V,this.ch=K,this.cm=D,this.text=D.getLine(V),this.min=J?Math.max(J.from,D.firstLine()):D.firstLine(),this.max=J?Math.min(J.to-1,D.lastLine()):D.lastLine()}function E(D,V){var K=D.cm.getTokenTypeAt(s(D.line,V));return K&&/\btag\b/.test(K)}function w(D){if(!(D.line>=D.max))return D.ch=0,D.text=D.cm.getLine(++D.line),!0}function T(D){if(!(D.line<=D.min))return D.text=D.cm.getLine(--D.line),D.ch=D.text.length,!0}function N(D){for(;;){var V=D.text.indexOf(">",D.ch);if(V==-1){if(w(D))continue;return}if(!E(D,V+1)){D.ch=V+1;continue}var K=D.text.lastIndexOf("/",V),J=K>-1&&!/\S/.test(D.text.slice(K+1,V));return D.ch=V+1,J?"selfClose":"regular"}}function O(D){for(;;){var V=D.ch?D.text.lastIndexOf("<",D.ch-1):-1;if(V==-1){if(T(D))continue;return}if(!E(D,V+1)){D.ch=V;continue}p.lastIndex=V,D.ch=V;var K=p.exec(D.text);if(K&&K.index==V)return K}}function P(D){for(;;){p.lastIndex=D.ch;var V=p.exec(D.text);if(!V){if(w(D))continue;return}if(!E(D,V.index+1)){D.ch=V.index+1;continue}return D.ch=V.index+V[0].length,V}}function M(D){for(;;){var V=D.ch?D.text.lastIndexOf(">",D.ch-1):-1;if(V==-1){if(T(D))continue;return}if(!E(D,V+1)){D.ch=V;continue}var K=D.text.lastIndexOf("/",V),J=K>-1&&!/\S/.test(D.text.slice(K+1,V));return D.ch=V+1,J?"selfClose":"regular"}}function Q(D,V){for(var K=[];;){var J=P(D),ie,fe=D.line,Z=D.ch-(J?J[0].length:0);if(!J||!(ie=N(D)))return;if(ie!="selfClose")if(J[1]){for(var pe=K.length-1;pe>=0;--pe)if(K[pe]==J[2]){K.length=pe;break}if(pe<0&&(!V||V==J[2]))return{tag:J[2],from:s(fe,Z),to:s(D.line,D.ch)}}else K.push(J[2])}}function k(D,V){for(var K=[];;){var J=M(D);if(!J)return;if(J=="selfClose"){O(D);continue}var ie=D.line,fe=D.ch,Z=O(D);if(!Z)return;if(Z[1])K.push(Z[2]);else{for(var pe=K.length-1;pe>=0;--pe)if(K[pe]==Z[2]){K.length=pe;break}if(pe<0&&(!V||V==Z[2]))return{tag:Z[2],from:s(D.line,D.ch),to:s(ie,fe)}}}}i.registerHelper("fold","xml",function(D,V){for(var K=new m(D,V.line,0);;){var J=P(K);if(!J||K.line!=V.line)return;var ie=N(K);if(!ie)return;if(!J[1]&&ie!="selfClose"){var fe=s(K.line,K.ch),Z=Q(K,J[2]);return Z&&c(Z.from,fe)>0?{from:fe,to:Z.from}:null}}}),i.findMatchingTag=function(D,V,K){var J=new m(D,V.line,V.ch,K);if(!(J.text.indexOf(">")==-1&&J.text.indexOf("<")==-1)){var ie=N(J),fe=ie&&s(J.line,J.ch),Z=ie&&O(J);if(!(!ie||!Z||c(J,V)>0)){var pe={from:s(J.line,J.ch),to:fe,tag:Z[2]};return ie=="selfClose"?{open:pe,close:null,at:"open"}:Z[1]?{open:k(J,Z[2]),close:pe,at:"close"}:(J=new m(D,fe.line,fe.ch,K),{open:pe,close:Q(J,Z[2]),at:"open"})}}},i.findEnclosingTag=function(D,V,K,J){for(var ie=new m(D,V.line,V.ch,K);;){var fe=k(ie,J);if(!fe)break;var Z=new m(D,V.line,V.ch,K),pe=Q(Z,fe.tag);if(pe)return{open:fe,close:pe}}},i.scanForClosingTag=function(D,V,K,J){var ie=new m(D,V.line,V.ch,J?{from:0,to:J}:null);return Q(ie,K)}})}()),tae.exports}(function(e,t){(function(i){i(AR(),_At())})(function(i){i.defineOption("autoCloseTags",!1,function(w,T,N){if(N!=i.Init&&N&&w.removeKeyMap("autoCloseTags"),!!T){var O={name:"autoCloseTags"};(typeof T!="object"||T.whenClosing!==!1)&&(O["'/'"]=function(P){return p(P)}),(typeof T!="object"||T.whenOpening!==!1)&&(O["'>'"]=function(P){return u(P)}),w.addKeyMap(O)}});var s=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],c=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function u(w){if(w.getOption("disableInput"))return i.Pass;for(var T=w.listSelections(),N=[],O=w.getOption("autoCloseTags"),P=0;P<T.length;P++){if(!T[P].empty())return i.Pass;var M=T[P].head,Q=w.getTokenAt(M),k=i.innerMode(w.getMode(),Q.state),D=k.state,V=k.mode.xmlCurrentTag&&k.mode.xmlCurrentTag(D),K=V&&V.name;if(!K)return i.Pass;var J=k.mode.configuration=="html",ie=typeof O=="object"&&O.dontCloseTags||J&&s,fe=typeof O=="object"&&O.indentTags||J&&c;Q.end>M.ch&&(K=K.slice(0,K.length-Q.end+M.ch));var Z=K.toLowerCase();if(!K||Q.type=="string"&&(Q.end!=M.ch||!/[\"\']/.test(Q.string.charAt(Q.string.length-1))||Q.string.length==1)||Q.type=="tag"&&V.close||Q.string.indexOf("/")==M.ch-Q.start-1||ie&&m(ie,Z)>-1||E(w,k.mode.xmlCurrentContext&&k.mode.xmlCurrentContext(D)||[],K,M,!0))return i.Pass;var pe=typeof O=="object"&&O.emptyTags;if(pe&&m(pe,K)>-1){N[P]={text:"/>",newPos:i.Pos(M.line,M.ch+2)};continue}var Y=fe&&m(fe,Z)>-1;N[P]={indent:Y,text:">"+(Y?`

`:"")+"</"+K+">",newPos:Y?i.Pos(M.line+1,0):i.Pos(M.line,M.ch+1)}}for(var te=typeof O=="object"&&O.dontIndentOnAutoClose,P=T.length-1;P>=0;P--){var le=N[P];w.replaceRange(le.text,T[P].head,T[P].anchor,"+insert");var ae=w.listSelections().slice(0);ae[P]={head:le.newPos,anchor:le.newPos},w.setSelections(ae),!te&&le.indent&&(w.indentLine(le.newPos.line,null,!0),w.indentLine(le.newPos.line+1,null,!0))}}function f(w,T){for(var N=w.listSelections(),O=[],P=T?"/":"</",M=w.getOption("autoCloseTags"),Q=typeof M=="object"&&M.dontIndentOnSlash,k=0;k<N.length;k++){if(!N[k].empty())return i.Pass;var D=N[k].head,V=w.getTokenAt(D),K=i.innerMode(w.getMode(),V.state),J=K.state;if(T&&(V.type=="string"||V.string.charAt(0)!="<"||V.start!=D.ch-1))return i.Pass;var ie,fe=K.mode.name!="xml"&&w.getMode().name=="htmlmixed";if(fe&&K.mode.name=="javascript")ie=P+"script";else if(fe&&K.mode.name=="css")ie=P+"style";else{var Z=K.mode.xmlCurrentContext&&K.mode.xmlCurrentContext(J),pe=Z.length?Z[Z.length-1]:"";if(!Z||Z.length&&E(w,Z,pe,D))return i.Pass;ie=P+pe}w.getLine(D.line).charAt(V.end)!=">"&&(ie+=">"),O[k]=ie}if(w.replaceSelections(O),N=w.listSelections(),!Q)for(var k=0;k<N.length;k++)(k==N.length-1||N[k].head.line<N[k+1].head.line)&&w.indentLine(N[k].head.line)}function p(w){return w.getOption("disableInput")?i.Pass:f(w,!0)}i.commands.closeTag=function(w){return f(w)};function m(w,T){if(w.indexOf)return w.indexOf(T);for(var N=0,O=w.length;N<O;++N)if(w[N]==T)return N;return-1}function E(w,T,N,O,P){if(!i.scanForClosingTag)return!1;var M=Math.min(w.lastLine()+1,O.line+500),Q=i.scanForClosingTag(w,O,null,M);if(!Q||Q.tag!=N)return!1;for(var k=P?1:0,D=T.length-1;D>=0&&T[D]==N;D--)++k;O=Q.to;for(var D=1;D<k;D++){var V=i.scanForClosingTag(w,O,null,M);if(!V||V.tag!=N)return!1;O=V.to}return!0}})})();(function(e,t){(function(i){i(AR())})(function(i){var s={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},c=i.Pos;i.defineOption("autoCloseBrackets",!1,function(k,D,V){V&&V!=i.Init&&(k.removeKeyMap(f),k.state.closeBrackets=null),D&&(p(u(D,"pairs")),k.state.closeBrackets=D,k.addKeyMap(f))});function u(k,D){return D=="pairs"&&typeof k=="string"?k:typeof k=="object"&&k[D]!=null?k[D]:s[D]}var f={Backspace:w,Enter:T};function p(k){for(var D=0;D<k.length;D++){var V=k.charAt(D),K="'"+V+"'";f[K]||(f[K]=m(V))}}p(s.pairs+"`");function m(k){return function(D){return P(D,k)}}function E(k){var D=k.state.closeBrackets;if(!D||D.override)return D;var V=k.getModeAt(k.getCursor());return V.closeBrackets||D}function w(k){var D=E(k);if(!D||k.getOption("disableInput"))return i.Pass;for(var V=u(D,"pairs"),K=k.listSelections(),J=0;J<K.length;J++){if(!K[J].empty())return i.Pass;var ie=M(k,K[J].head);if(!ie||V.indexOf(ie)%2!=0)return i.Pass}for(var J=K.length-1;J>=0;J--){var fe=K[J].head;k.replaceRange("",c(fe.line,fe.ch-1),c(fe.line,fe.ch+1),"+delete")}}function T(k){var D=E(k),V=D&&u(D,"explode");if(!V||k.getOption("disableInput"))return i.Pass;for(var K=k.listSelections(),J=0;J<K.length;J++){if(!K[J].empty())return i.Pass;var ie=M(k,K[J].head);if(!ie||V.indexOf(ie)%2!=0)return i.Pass}k.operation(function(){var fe=k.lineSeparator()||`
`;k.replaceSelection(fe+fe,null),N(k,-1),K=k.listSelections();for(var Z=0;Z<K.length;Z++){var pe=K[Z].head.line;k.indentLine(pe,null,!0),k.indentLine(pe+1,null,!0)}})}function N(k,D){for(var V=[],K=k.listSelections(),J=0,ie=0;ie<K.length;ie++){var fe=K[ie];fe.head==k.getCursor()&&(J=ie);var Z=fe.head.ch||D>0?{line:fe.head.line,ch:fe.head.ch+D}:{line:fe.head.line-1};V.push({anchor:Z,head:Z})}k.setSelections(V,J)}function O(k){var D=i.cmpPos(k.anchor,k.head)>0;return{anchor:new c(k.anchor.line,k.anchor.ch+(D?-1:1)),head:new c(k.head.line,k.head.ch+(D?1:-1))}}function P(k,D){var V=E(k);if(!V||k.getOption("disableInput"))return i.Pass;var K=u(V,"pairs"),J=K.indexOf(D);if(J==-1)return i.Pass;for(var ie=u(V,"closeBefore"),fe=u(V,"triples"),Z=K.charAt(J+1)==D,pe=k.listSelections(),Y=J%2==0,te,le=0;le<pe.length;le++){var ae=pe[le],ge=ae.head,se,xe=k.getRange(ge,c(ge.line,ge.ch+1));if(Y&&!ae.empty())se="surround";else if((Z||!Y)&&xe==D)Z&&Q(k,ge)?se="both":fe.indexOf(D)>=0&&k.getRange(ge,c(ge.line,ge.ch+3))==D+D+D?se="skipThree":se="skip";else if(Z&&ge.ch>1&&fe.indexOf(D)>=0&&k.getRange(c(ge.line,ge.ch-2),ge)==D+D){if(ge.ch>2&&/\bstring/.test(k.getTokenTypeAt(c(ge.line,ge.ch-2))))return i.Pass;se="addFour"}else if(Z){var Me=ge.ch==0?" ":k.getRange(c(ge.line,ge.ch-1),ge);if(!i.isWordChar(xe)&&Me!=D&&!i.isWordChar(Me))se="both";else return i.Pass}else if(Y&&(xe.length===0||/\s/.test(xe)||ie.indexOf(xe)>-1))se="both";else return i.Pass;if(!te)te=se;else if(te!=se)return i.Pass}var Be=J%2?K.charAt(J-1):D,ke=J%2?D:K.charAt(J+1);k.operation(function(){if(te=="skip")N(k,1);else if(te=="skipThree")N(k,3);else if(te=="surround"){for(var Ke=k.getSelections(),ht=0;ht<Ke.length;ht++)Ke[ht]=Be+Ke[ht]+ke;k.replaceSelections(Ke,"around"),Ke=k.listSelections().slice();for(var ht=0;ht<Ke.length;ht++)Ke[ht]=O(Ke[ht]);k.setSelections(Ke)}else te=="both"?(k.replaceSelection(Be+ke,null),k.triggerElectric(Be+ke),N(k,-1)):te=="addFour"&&(k.replaceSelection(Be+Be+Be+Be,"before"),N(k,1))})}function M(k,D){var V=k.getRange(c(D.line,D.ch-1),c(D.line,D.ch+1));return V.length==2?V:null}function Q(k,D){var V=k.getTokenAt(c(D.line,D.ch+1));return/\bstring/.test(V.type)&&V.start==D.ch&&(D.ch==0||!/\bstring/.test(k.getTokenTypeAt(D)))}})})();const yAt=()=>{const e=he.useRef(null),t=he.useRef(""),{roomId:i}=Sle();return he.useEffect(()=>{if(e.current)return;const s=document.getElementById("realtimeEditor");if(!s)return;e.current=vAt.fromTextArea(s,{mode:{name:"javascript",json:!0},theme:"dracula",autoCloseTags:!0,autoCloseBrackets:!0,lineNumbers:!0}),GVe(localStorage.getItem("username"),i),e.current.on("change",(u,f)=>{const{origin:p}=f,m=u.getValue();t.current=m,p!=="setValue"&&zVe(i,m)});const c=u=>{u!==null&&e.current&&u!==e.current.getValue()&&e.current.setValue(u)};return $Ve(c,i),qVe(c),()=>{YVe(),XVe(),e.current&&(e.current.toTextArea(),e.current=null)}},[i]),oe.jsx("div",{style:{height:"100vh",width:"100%",paddingTop:"60px"},children:oe.jsx("textarea",{id:"realtimeEditor"})})},EAt=()=>{const{roomId:e}=Sle(),[t,i]=he.useState(!1),[s,c]=he.useState(!1),[u,f]=he.useState(!0);return l0(p=>p.cursor.cursors),he.useEffect(()=>(console.log(`Connecting to socket server for roomId: ${e}`),MVe(e).then(()=>{console.log("Socket connected successfully"),i(!0)}).catch(p=>{console.error("Error connecting to socket:",p)}),()=>{console.log("Disconnecting socket connection"),WVe()}),[e]),oe.jsx("div",{children:oe.jsxs(Xi,{children:[oe.jsx(Xi,{children:oe.jsx($6e,{setIsChatAppOpen:c,isChatAppOpen:s,setIsWhiteboard:f,isWhiteboard:u})}),oe.jsxs(Xi,{bgcolor:"#DDDDDD",sx:{position:"relative",width:"100%",height:"100vh"},children:[oe.jsx(Xi,{children:t?u?oe.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[oe.jsx(dGe,{}),oe.jsx(fGe,{})]}):oe.jsx(yAt,{}):oe.jsx(zB,{})}),oe.jsx(Xi,{sx:{position:"fixed",top:0,right:0,width:"26%",height:"100%",backgroundColor:"white",boxShadow:"0 0 10px rgba(0,0,0,0.3)",zIndex:10,display:s?"block":"none"},children:t?s&&oe.jsx(gAt,{}):oe.jsx(zB,{})})]})]})})},wAt=()=>{const e=localStorage.getItem("userId"),[t,i]=he.useState({}),[s,c]=he.useState(!1),[u,f]=he.useState(""),p=()=>{c(!1)},[m,E]=he.useState({currentPassword:"",newPassword:"",confirmNewPassword:""});he.useEffect(()=>{(async()=>{try{const P=await YFe(e);console.log(P),i(P.user)}catch(P){console.log(`error while loading boads for user : ${P}`)}})()},[e]);const w=O=>{const{name:P,value:M}=O.target;E(Q=>({...Q,[P]:M}))},T=async O=>{if(O.preventDefault(),console.log(m),m.newPassword!==m.confirmNewPassword){f("new password and confirm password not matching!"),c(!0);return}try{const P=await WFe(e,{currentPassword:m.currentPassword,newPassword:m.newPassword});console.log(P),f(P.message),c(!0),E({currentPassword:"",newPassword:"",confirmNewPassword:""})}catch(P){console.log("error occured while reset password!!"),console.log(P.response.data.message),f(P.response.data.message),c(!0)}},N=()=>{window.history.back()};return oe.jsxs("div",{children:[oe.jsx(UAe,{isProfilePage:!0}),oe.jsx(bn,{container:!0,spacing:2,children:oe.jsxs(bn,{children:[oe.jsx(bn,{item:!0,xs:6,style:{marginTop:5},children:oe.jsx(Ko,{onClick:N,variant:"contained",style:{marginLeft:10,marginTop:10},startIcon:oe.jsx(BQ,{}),children:"Back"})}),oe.jsx(Gn,{variant:"h5",align:"center",m:2,children:"Profile Page"}),oe.jsx(bn,{item:!0,xs:6,style:{marginLeft:10},children:oe.jsxs(Zd,{elevation:3,style:{padding:10},children:[oe.jsxs(Gn,{variant:"h6",children:["Username: ",t.username]}),oe.jsxs(Gn,{variant:"body1",children:["Email: ",t.email]}),oe.jsxs(Gn,{variant:"body1",children:["First Name: ",t.firstName]}),oe.jsxs(Gn,{variant:"body1",children:["Last Name: ",t.lastName]}),oe.jsxs(Gn,{variant:"body1",children:["Role: ",t.role]}),oe.jsxs(Gn,{variant:"body1",children:["Created At: ",t.createdAt]})]})}),oe.jsx(bn,{mt:5,mb:2,align:"left",ml:2,children:oe.jsx(Gn,{variant:"h5",children:"Reset password"})}),oe.jsx(bn,{item:!0,xs:6,style:{marginLeft:10},children:oe.jsx(Zd,{elevation:3,style:{padding:10},children:oe.jsxs("form",{onSubmit:T,children:[oe.jsx(Ml,{fullWidth:!0,type:"password",label:"Current Password",name:"currentPassword",value:m.currentPassword,onChange:w,margin:"normal",variant:"outlined",required:!0}),oe.jsx(Ml,{fullWidth:!0,type:"password",label:"New Password",name:"newPassword",value:m.newPassword,onChange:w,margin:"normal",variant:"outlined",required:!0}),oe.jsx(Ml,{fullWidth:!0,type:"password",label:"Confirm New Password",name:"confirmNewPassword",value:m.confirmNewPassword,onChange:w,margin:"normal",variant:"outlined",required:!0}),oe.jsx(Ko,{type:"submit",variant:"contained",color:"primary",style:{marginTop:"20px"},children:"Reset Password"})]})})})]})}),oe.jsx(jT,{open:s,autoHideDuration:5e3,onClose:p,message:u,anchorOrigin:{vertical:"bottom",horizontal:"right"}})]})},SAt=[{path:"/",element:oe.jsx(Ire,{}),navbar:!0},{path:"/login",element:oe.jsx(Ire,{}),navbar:!0},{path:"/registration",element:oe.jsx(e6e,{}),navbar:!0},{path:"/rooms",element:oe.jsx(f6e,{}),navbar:!1},{path:"/room/:roomId",element:oe.jsx(EAt,{}),navbar:!1},{path:"/profile",element:oe.jsx(wAt,{}),navbar:!1}];function bAt(){return oe.jsx(hOe,{children:oe.jsx("div",{children:oe.jsx(aOe,{children:SAt.map((e,t)=>oe.jsx(Rle,{path:e.path,element:oe.jsxs(oe.Fragment,{children:[e.navbar&&oe.jsx(t6e,{}),e.element]})},t))})})})}const CAt=H3.createRoot(document.getElementById("root"));CAt.render(oe.jsx(U6e,{store:DA,children:oe.jsx(bAt,{})}));export{_o as _,Kd as c,$i as g};
